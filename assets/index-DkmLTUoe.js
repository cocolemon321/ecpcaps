(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function a(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=a(s);fetch(s.href,l)}})();var nC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ji(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var EE={exports:{}},yw={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m6;function Gte(){if(m6)return yw;m6=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function a(r,s,l){var h=null;if(l!==void 0&&(h=""+l),s.key!==void 0&&(h=""+s.key),"key"in s){l={};for(var n in s)n!=="key"&&(l[n]=s[n])}else l=s;return s=l.ref,{$$typeof:t,type:r,key:h,ref:s!==void 0?s:null,props:l}}return yw.Fragment=e,yw.jsx=a,yw.jsxs=a,yw}var y6;function jte(){return y6||(y6=1,EE.exports=Gte()),EE.exports}var K=jte(),NE={exports:{}},gi={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g6;function Zte(){if(g6)return gi;g6=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),h=Symbol.for("react.context"),n=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),T=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),z=Symbol.iterator;function k(Ue){return Ue===null||typeof Ue!="object"?null:(Ue=z&&Ue[z]||Ue["@@iterator"],typeof Ue=="function"?Ue:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z=Object.assign,H={};function q(Ue,He,Ce){this.props=Ue,this.context=He,this.refs=H,this.updater=Ce||U}q.prototype.isReactComponent={},q.prototype.setState=function(Ue,He){if(typeof Ue!="object"&&typeof Ue!="function"&&Ue!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ue,He,"setState")},q.prototype.forceUpdate=function(Ue){this.updater.enqueueForceUpdate(this,Ue,"forceUpdate")};function J(){}J.prototype=q.prototype;function re(Ue,He,Ce){this.props=Ue,this.context=He,this.refs=H,this.updater=Ce||U}var ce=re.prototype=new J;ce.constructor=re,Z(ce,q.prototype),ce.isPureReactComponent=!0;var ye=Array.isArray,he={H:null,A:null,T:null,S:null},_e=Object.prototype.hasOwnProperty;function me(Ue,He,Ce,Se,$e,ht){return Ce=ht.ref,{$$typeof:t,type:Ue,key:He,ref:Ce!==void 0?Ce:null,props:ht}}function Re(Ue,He){return me(Ue.type,He,void 0,void 0,void 0,Ue.props)}function be(Ue){return typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===t}function De(Ue){var He={"=":"=0",":":"=2"};return"$"+Ue.replace(/[=:]/g,function(Ce){return He[Ce]})}var ie=/\/+/g;function ge(Ue,He){return typeof Ue=="object"&&Ue!==null&&Ue.key!=null?De(""+Ue.key):He.toString(36)}function Me(){}function ze(Ue){switch(Ue.status){case"fulfilled":return Ue.value;case"rejected":throw Ue.reason;default:switch(typeof Ue.status=="string"?Ue.then(Me,Me):(Ue.status="pending",Ue.then(function(He){Ue.status==="pending"&&(Ue.status="fulfilled",Ue.value=He)},function(He){Ue.status==="pending"&&(Ue.status="rejected",Ue.reason=He)})),Ue.status){case"fulfilled":return Ue.value;case"rejected":throw Ue.reason}}throw Ue}function Le(Ue,He,Ce,Se,$e){var ht=typeof Ue;(ht==="undefined"||ht==="boolean")&&(Ue=null);var ft=!1;if(Ue===null)ft=!0;else switch(ht){case"bigint":case"string":case"number":ft=!0;break;case"object":switch(Ue.$$typeof){case t:case e:ft=!0;break;case P:return ft=Ue._init,Le(ft(Ue._payload),He,Ce,Se,$e)}}if(ft)return $e=$e(Ue),ft=Se===""?"."+ge(Ue,0):Se,ye($e)?(Ce="",ft!=null&&(Ce=ft.replace(ie,"$&/")+"/"),Le($e,He,Ce,"",function(We){return We})):$e!=null&&(be($e)&&($e=Re($e,Ce+($e.key==null||Ue&&Ue.key===$e.key?"":(""+$e.key).replace(ie,"$&/")+"/")+ft)),He.push($e)),1;ft=0;var ut=Se===""?".":Se+":";if(ye(Ue))for(var Rt=0;Rt<Ue.length;Rt++)Se=Ue[Rt],ht=ut+ge(Se,Rt),ft+=Le(Se,He,Ce,ht,$e);else if(Rt=k(Ue),typeof Rt=="function")for(Ue=Rt.call(Ue),Rt=0;!(Se=Ue.next()).done;)Se=Se.value,ht=ut+ge(Se,Rt++),ft+=Le(Se,He,Ce,ht,$e);else if(ht==="object"){if(typeof Ue.then=="function")return Le(ze(Ue),He,Ce,Se,$e);throw He=String(Ue),Error("Objects are not valid as a React child (found: "+(He==="[object Object]"?"object with keys {"+Object.keys(Ue).join(", ")+"}":He)+"). If you meant to render a collection of children, use an array instead.")}return ft}function Ie(Ue,He,Ce){if(Ue==null)return Ue;var Se=[],$e=0;return Le(Ue,Se,"","",function(ht){return He.call(Ce,ht,$e++)}),Se}function Ze(Ue){if(Ue._status===-1){var He=Ue._result;He=He(),He.then(function(Ce){(Ue._status===0||Ue._status===-1)&&(Ue._status=1,Ue._result=Ce)},function(Ce){(Ue._status===0||Ue._status===-1)&&(Ue._status=2,Ue._result=Ce)}),Ue._status===-1&&(Ue._status=0,Ue._result=He)}if(Ue._status===1)return Ue._result.default;throw Ue._result}var ke=typeof reportError=="function"?reportError:function(Ue){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var He=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Ue=="object"&&Ue!==null&&typeof Ue.message=="string"?String(Ue.message):String(Ue),error:Ue});if(!window.dispatchEvent(He))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Ue);return}console.error(Ue)};function tt(){}return gi.Children={map:Ie,forEach:function(Ue,He,Ce){Ie(Ue,function(){He.apply(this,arguments)},Ce)},count:function(Ue){var He=0;return Ie(Ue,function(){He++}),He},toArray:function(Ue){return Ie(Ue,function(He){return He})||[]},only:function(Ue){if(!be(Ue))throw Error("React.Children.only expected to receive a single React element child.");return Ue}},gi.Component=q,gi.Fragment=a,gi.Profiler=s,gi.PureComponent=re,gi.StrictMode=r,gi.Suspense=w,gi.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=he,gi.act=function(){throw Error("act(...) is not supported in production builds of React.")},gi.cache=function(Ue){return function(){return Ue.apply(null,arguments)}},gi.cloneElement=function(Ue,He,Ce){if(Ue==null)throw Error("The argument must be a React element, but you passed "+Ue+".");var Se=Z({},Ue.props),$e=Ue.key,ht=void 0;if(He!=null)for(ft in He.ref!==void 0&&(ht=void 0),He.key!==void 0&&($e=""+He.key),He)!_e.call(He,ft)||ft==="key"||ft==="__self"||ft==="__source"||ft==="ref"&&He.ref===void 0||(Se[ft]=He[ft]);var ft=arguments.length-2;if(ft===1)Se.children=Ce;else if(1<ft){for(var ut=Array(ft),Rt=0;Rt<ft;Rt++)ut[Rt]=arguments[Rt+2];Se.children=ut}return me(Ue.type,$e,void 0,void 0,ht,Se)},gi.createContext=function(Ue){return Ue={$$typeof:h,_currentValue:Ue,_currentValue2:Ue,_threadCount:0,Provider:null,Consumer:null},Ue.Provider=Ue,Ue.Consumer={$$typeof:l,_context:Ue},Ue},gi.createElement=function(Ue,He,Ce){var Se,$e={},ht=null;if(He!=null)for(Se in He.key!==void 0&&(ht=""+He.key),He)_e.call(He,Se)&&Se!=="key"&&Se!=="__self"&&Se!=="__source"&&($e[Se]=He[Se]);var ft=arguments.length-2;if(ft===1)$e.children=Ce;else if(1<ft){for(var ut=Array(ft),Rt=0;Rt<ft;Rt++)ut[Rt]=arguments[Rt+2];$e.children=ut}if(Ue&&Ue.defaultProps)for(Se in ft=Ue.defaultProps,ft)$e[Se]===void 0&&($e[Se]=ft[Se]);return me(Ue,ht,void 0,void 0,null,$e)},gi.createRef=function(){return{current:null}},gi.forwardRef=function(Ue){return{$$typeof:n,render:Ue}},gi.isValidElement=be,gi.lazy=function(Ue){return{$$typeof:P,_payload:{_status:-1,_result:Ue},_init:Ze}},gi.memo=function(Ue,He){return{$$typeof:T,type:Ue,compare:He===void 0?null:He}},gi.startTransition=function(Ue){var He=he.T,Ce={};he.T=Ce;try{var Se=Ue(),$e=he.S;$e!==null&&$e(Ce,Se),typeof Se=="object"&&Se!==null&&typeof Se.then=="function"&&Se.then(tt,ke)}catch(ht){ke(ht)}finally{he.T=He}},gi.unstable_useCacheRefresh=function(){return he.H.useCacheRefresh()},gi.use=function(Ue){return he.H.use(Ue)},gi.useActionState=function(Ue,He,Ce){return he.H.useActionState(Ue,He,Ce)},gi.useCallback=function(Ue,He){return he.H.useCallback(Ue,He)},gi.useContext=function(Ue){return he.H.useContext(Ue)},gi.useDebugValue=function(){},gi.useDeferredValue=function(Ue,He){return he.H.useDeferredValue(Ue,He)},gi.useEffect=function(Ue,He){return he.H.useEffect(Ue,He)},gi.useId=function(){return he.H.useId()},gi.useImperativeHandle=function(Ue,He,Ce){return he.H.useImperativeHandle(Ue,He,Ce)},gi.useInsertionEffect=function(Ue,He){return he.H.useInsertionEffect(Ue,He)},gi.useLayoutEffect=function(Ue,He){return he.H.useLayoutEffect(Ue,He)},gi.useMemo=function(Ue,He){return he.H.useMemo(Ue,He)},gi.useOptimistic=function(Ue,He){return he.H.useOptimistic(Ue,He)},gi.useReducer=function(Ue,He,Ce){return he.H.useReducer(Ue,He,Ce)},gi.useRef=function(Ue){return he.H.useRef(Ue)},gi.useState=function(Ue){return he.H.useState(Ue)},gi.useSyncExternalStore=function(Ue,He,Ce){return he.H.useSyncExternalStore(Ue,He,Ce)},gi.useTransition=function(){return he.H.useTransition()},gi.version="19.0.0",gi}var A6;function AI(){return A6||(A6=1,NE.exports=Zte()),NE.exports}var nt=AI();const Vt=Ji(nt);var VE={exports:{}},gw={},zE={exports:{}},OE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _6;function qte(){return _6||(_6=1,function(t){function e(Ie,Ze){var ke=Ie.length;Ie.push(Ze);e:for(;0<ke;){var tt=ke-1>>>1,Ue=Ie[tt];if(0<s(Ue,Ze))Ie[tt]=Ze,Ie[ke]=Ue,ke=tt;else break e}}function a(Ie){return Ie.length===0?null:Ie[0]}function r(Ie){if(Ie.length===0)return null;var Ze=Ie[0],ke=Ie.pop();if(ke!==Ze){Ie[0]=ke;e:for(var tt=0,Ue=Ie.length,He=Ue>>>1;tt<He;){var Ce=2*(tt+1)-1,Se=Ie[Ce],$e=Ce+1,ht=Ie[$e];if(0>s(Se,ke))$e<Ue&&0>s(ht,Se)?(Ie[tt]=ht,Ie[$e]=ke,tt=$e):(Ie[tt]=Se,Ie[Ce]=ke,tt=Ce);else if($e<Ue&&0>s(ht,ke))Ie[tt]=ht,Ie[$e]=ke,tt=$e;else break e}}return Ze}function s(Ie,Ze){var ke=Ie.sortIndex-Ze.sortIndex;return ke!==0?ke:Ie.id-Ze.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var h=Date,n=h.now();t.unstable_now=function(){return h.now()-n}}var w=[],T=[],P=1,z=null,k=3,U=!1,Z=!1,H=!1,q=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;function ce(Ie){for(var Ze=a(T);Ze!==null;){if(Ze.callback===null)r(T);else if(Ze.startTime<=Ie)r(T),Ze.sortIndex=Ze.expirationTime,e(w,Ze);else break;Ze=a(T)}}function ye(Ie){if(H=!1,ce(Ie),!Z)if(a(w)!==null)Z=!0,ze();else{var Ze=a(T);Ze!==null&&Le(ye,Ze.startTime-Ie)}}var he=!1,_e=-1,me=5,Re=-1;function be(){return!(t.unstable_now()-Re<me)}function De(){if(he){var Ie=t.unstable_now();Re=Ie;var Ze=!0;try{e:{Z=!1,H&&(H=!1,J(_e),_e=-1),U=!0;var ke=k;try{t:{for(ce(Ie),z=a(w);z!==null&&!(z.expirationTime>Ie&&be());){var tt=z.callback;if(typeof tt=="function"){z.callback=null,k=z.priorityLevel;var Ue=tt(z.expirationTime<=Ie);if(Ie=t.unstable_now(),typeof Ue=="function"){z.callback=Ue,ce(Ie),Ze=!0;break t}z===a(w)&&r(w),ce(Ie)}else r(w);z=a(w)}if(z!==null)Ze=!0;else{var He=a(T);He!==null&&Le(ye,He.startTime-Ie),Ze=!1}}break e}finally{z=null,k=ke,U=!1}Ze=void 0}}finally{Ze?ie():he=!1}}}var ie;if(typeof re=="function")ie=function(){re(De)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,Me=ge.port2;ge.port1.onmessage=De,ie=function(){Me.postMessage(null)}}else ie=function(){q(De,0)};function ze(){he||(he=!0,ie())}function Le(Ie,Ze){_e=q(function(){Ie(t.unstable_now())},Ze)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Ie){Ie.callback=null},t.unstable_continueExecution=function(){Z||U||(Z=!0,ze())},t.unstable_forceFrameRate=function(Ie){0>Ie||125<Ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):me=0<Ie?Math.floor(1e3/Ie):5},t.unstable_getCurrentPriorityLevel=function(){return k},t.unstable_getFirstCallbackNode=function(){return a(w)},t.unstable_next=function(Ie){switch(k){case 1:case 2:case 3:var Ze=3;break;default:Ze=k}var ke=k;k=Ze;try{return Ie()}finally{k=ke}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Ie,Ze){switch(Ie){case 1:case 2:case 3:case 4:case 5:break;default:Ie=3}var ke=k;k=Ie;try{return Ze()}finally{k=ke}},t.unstable_scheduleCallback=function(Ie,Ze,ke){var tt=t.unstable_now();switch(typeof ke=="object"&&ke!==null?(ke=ke.delay,ke=typeof ke=="number"&&0<ke?tt+ke:tt):ke=tt,Ie){case 1:var Ue=-1;break;case 2:Ue=250;break;case 5:Ue=1073741823;break;case 4:Ue=1e4;break;default:Ue=5e3}return Ue=ke+Ue,Ie={id:P++,callback:Ze,priorityLevel:Ie,startTime:ke,expirationTime:Ue,sortIndex:-1},ke>tt?(Ie.sortIndex=ke,e(T,Ie),a(w)===null&&Ie===a(T)&&(H?(J(_e),_e=-1):H=!0,Le(ye,ke-tt))):(Ie.sortIndex=Ue,e(w,Ie),Z||U||(Z=!0,ze())),Ie},t.unstable_shouldYield=be,t.unstable_wrapCallback=function(Ie){var Ze=k;return function(){var ke=k;k=Ze;try{return Ie.apply(this,arguments)}finally{k=ke}}}}(OE)),OE}var v6;function Hte(){return v6||(v6=1,zE.exports=qte()),zE.exports}var DE={exports:{}},td={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w6;function $te(){if(w6)return td;w6=1;var t=AI();function e(w){var T="https://react.dev/errors/"+w;if(1<arguments.length){T+="?args[]="+encodeURIComponent(arguments[1]);for(var P=2;P<arguments.length;P++)T+="&args[]="+encodeURIComponent(arguments[P])}return"Minified React error #"+w+"; visit "+T+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var r={d:{f:a,r:function(){throw Error(e(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(w,T,P){var z=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:z==null?null:""+z,children:w,containerInfo:T,implementation:P}}var h=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function n(w,T){if(w==="font")return"";if(typeof T=="string")return T==="use-credentials"?T:""}return td.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,td.createPortal=function(w,T){var P=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!T||T.nodeType!==1&&T.nodeType!==9&&T.nodeType!==11)throw Error(e(299));return l(w,T,null,P)},td.flushSync=function(w){var T=h.T,P=r.p;try{if(h.T=null,r.p=2,w)return w()}finally{h.T=T,r.p=P,r.d.f()}},td.preconnect=function(w,T){typeof w=="string"&&(T?(T=T.crossOrigin,T=typeof T=="string"?T==="use-credentials"?T:"":void 0):T=null,r.d.C(w,T))},td.prefetchDNS=function(w){typeof w=="string"&&r.d.D(w)},td.preinit=function(w,T){if(typeof w=="string"&&T&&typeof T.as=="string"){var P=T.as,z=n(P,T.crossOrigin),k=typeof T.integrity=="string"?T.integrity:void 0,U=typeof T.fetchPriority=="string"?T.fetchPriority:void 0;P==="style"?r.d.S(w,typeof T.precedence=="string"?T.precedence:void 0,{crossOrigin:z,integrity:k,fetchPriority:U}):P==="script"&&r.d.X(w,{crossOrigin:z,integrity:k,fetchPriority:U,nonce:typeof T.nonce=="string"?T.nonce:void 0})}},td.preinitModule=function(w,T){if(typeof w=="string")if(typeof T=="object"&&T!==null){if(T.as==null||T.as==="script"){var P=n(T.as,T.crossOrigin);r.d.M(w,{crossOrigin:P,integrity:typeof T.integrity=="string"?T.integrity:void 0,nonce:typeof T.nonce=="string"?T.nonce:void 0})}}else T==null&&r.d.M(w)},td.preload=function(w,T){if(typeof w=="string"&&typeof T=="object"&&T!==null&&typeof T.as=="string"){var P=T.as,z=n(P,T.crossOrigin);r.d.L(w,P,{crossOrigin:z,integrity:typeof T.integrity=="string"?T.integrity:void 0,nonce:typeof T.nonce=="string"?T.nonce:void 0,type:typeof T.type=="string"?T.type:void 0,fetchPriority:typeof T.fetchPriority=="string"?T.fetchPriority:void 0,referrerPolicy:typeof T.referrerPolicy=="string"?T.referrerPolicy:void 0,imageSrcSet:typeof T.imageSrcSet=="string"?T.imageSrcSet:void 0,imageSizes:typeof T.imageSizes=="string"?T.imageSizes:void 0,media:typeof T.media=="string"?T.media:void 0})}},td.preloadModule=function(w,T){if(typeof w=="string")if(T){var P=n(T.as,T.crossOrigin);r.d.m(w,{as:typeof T.as=="string"&&T.as!=="script"?T.as:void 0,crossOrigin:P,integrity:typeof T.integrity=="string"?T.integrity:void 0})}else r.d.m(w)},td.requestFormReset=function(w){r.d.r(w)},td.unstable_batchedUpdates=function(w,T){return w(T)},td.useFormState=function(w,T,P){return h.H.useFormState(w,T,P)},td.useFormStatus=function(){return h.H.useHostTransitionStatus()},td.version="19.0.0",td}var R6;function Kte(){if(R6)return DE.exports;R6=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),DE.exports=$te(),DE.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T6;function Wte(){if(T6)return gw;T6=1;var t=Hte(),e=AI(),a=Kte();function r(p){var v="https://react.dev/errors/"+p;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)v+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+p+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)}var l=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),k=Symbol.for("react.consumer"),U=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),re=Symbol.for("react.lazy"),ce=Symbol.for("react.offscreen"),ye=Symbol.for("react.memo_cache_sentinel"),he=Symbol.iterator;function _e(p){return p===null||typeof p!="object"?null:(p=he&&p[he]||p["@@iterator"],typeof p=="function"?p:null)}var me=Symbol.for("react.client.reference");function Re(p){if(p==null)return null;if(typeof p=="function")return p.$$typeof===me?null:p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case w:return"Fragment";case n:return"Portal";case P:return"Profiler";case T:return"StrictMode";case H:return"Suspense";case q:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case U:return(p.displayName||"Context")+".Provider";case k:return(p._context.displayName||"Context")+".Consumer";case Z:var v=p.render;return p=p.displayName,p||(p=v.displayName||v.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case J:return v=p.displayName||null,v!==null?v:Re(p.type)||"Memo";case re:v=p._payload,p=p._init;try{return Re(p(v))}catch{}}return null}var be=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,De=Object.assign,ie,ge;function Me(p){if(ie===void 0)try{throw Error()}catch(x){var v=x.stack.trim().match(/\n( *(at )?)/);ie=v&&v[1]||"",ge=-1<x.stack.indexOf(`
    at`)?" (<anonymous>)":-1<x.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ie+p+ge}var ze=!1;function Le(p,v){if(!p||ze)return"";ze=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var F={DetermineComponentFrameRoot:function(){try{if(v){var nr=function(){throw Error()};if(Object.defineProperty(nr.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(nr,[])}catch(Za){var xa=Za}Reflect.construct(p,[],nr)}else{try{nr.call()}catch(Za){xa=Za}p.call(nr.prototype)}}else{try{throw Error()}catch(Za){xa=Za}(nr=p())&&typeof nr.catch=="function"&&nr.catch(function(){})}}catch(Za){if(Za&&xa&&typeof Za.stack=="string")return[Za.stack,xa.stack]}return[null,null]}};F.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var Y=Object.getOwnPropertyDescriptor(F.DetermineComponentFrameRoot,"name");Y&&Y.configurable&&Object.defineProperty(F.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var se=F.DetermineComponentFrameRoot(),Fe=se[0],ct=se[1];if(Fe&&ct){var Ut=Fe.split(`
`),la=ct.split(`
`);for(Y=F=0;F<Ut.length&&!Ut[F].includes("DetermineComponentFrameRoot");)F++;for(;Y<la.length&&!la[Y].includes("DetermineComponentFrameRoot");)Y++;if(F===Ut.length||Y===la.length)for(F=Ut.length-1,Y=la.length-1;1<=F&&0<=Y&&Ut[F]!==la[Y];)Y--;for(;1<=F&&0<=Y;F--,Y--)if(Ut[F]!==la[Y]){if(F!==1||Y!==1)do if(F--,Y--,0>Y||Ut[F]!==la[Y]){var ja=`
`+Ut[F].replace(" at new "," at ");return p.displayName&&ja.includes("<anonymous>")&&(ja=ja.replace("<anonymous>",p.displayName)),ja}while(1<=F&&0<=Y);break}}}finally{ze=!1,Error.prepareStackTrace=x}return(x=p?p.displayName||p.name:"")?Me(x):""}function Ie(p){switch(p.tag){case 26:case 27:case 5:return Me(p.type);case 16:return Me("Lazy");case 13:return Me("Suspense");case 19:return Me("SuspenseList");case 0:case 15:return p=Le(p.type,!1),p;case 11:return p=Le(p.type.render,!1),p;case 1:return p=Le(p.type,!0),p;default:return""}}function Ze(p){try{var v="";do v+=Ie(p),p=p.return;while(p);return v}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}function ke(p){var v=p,x=p;if(p.alternate)for(;v.return;)v=v.return;else{p=v;do v=p,(v.flags&4098)!==0&&(x=v.return),p=v.return;while(p)}return v.tag===3?x:null}function tt(p){if(p.tag===13){var v=p.memoizedState;if(v===null&&(p=p.alternate,p!==null&&(v=p.memoizedState)),v!==null)return v.dehydrated}return null}function Ue(p){if(ke(p)!==p)throw Error(r(188))}function He(p){var v=p.alternate;if(!v){if(v=ke(p),v===null)throw Error(r(188));return v!==p?null:p}for(var x=p,F=v;;){var Y=x.return;if(Y===null)break;var se=Y.alternate;if(se===null){if(F=Y.return,F!==null){x=F;continue}break}if(Y.child===se.child){for(se=Y.child;se;){if(se===x)return Ue(Y),p;if(se===F)return Ue(Y),v;se=se.sibling}throw Error(r(188))}if(x.return!==F.return)x=Y,F=se;else{for(var Fe=!1,ct=Y.child;ct;){if(ct===x){Fe=!0,x=Y,F=se;break}if(ct===F){Fe=!0,F=Y,x=se;break}ct=ct.sibling}if(!Fe){for(ct=se.child;ct;){if(ct===x){Fe=!0,x=se,F=Y;break}if(ct===F){Fe=!0,F=se,x=Y;break}ct=ct.sibling}if(!Fe)throw Error(r(189))}}if(x.alternate!==F)throw Error(r(190))}if(x.tag!==3)throw Error(r(188));return x.stateNode.current===x?p:v}function Ce(p){var v=p.tag;if(v===5||v===26||v===27||v===6)return p;for(p=p.child;p!==null;){if(v=Ce(p),v!==null)return v;p=p.sibling}return null}var Se=Array.isArray,$e=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ht={pending:!1,data:null,method:null,action:null},ft=[],ut=-1;function Rt(p){return{current:p}}function We(p){0>ut||(p.current=ft[ut],ft[ut]=null,ut--)}function Ae(p,v){ut++,ft[ut]=p.current,p.current=v}var qt=Rt(null),Gt=Rt(null),Aa=Rt(null),It=Rt(null);function ta(p,v){switch(Ae(Aa,v),Ae(Gt,p),Ae(qt,null),p=v.nodeType,p){case 9:case 11:v=(v=v.documentElement)&&(v=v.namespaceURI)?T1(v):0;break;default:if(p=p===8?v.parentNode:v,v=p.tagName,p=p.namespaceURI)p=T1(p),v=S1(p,v);else switch(v){case"svg":v=1;break;case"math":v=2;break;default:v=0}}We(qt),Ae(qt,v)}function vt(){We(qt),We(Gt),We(Aa)}function or(p){p.memoizedState!==null&&Ae(It,p);var v=qt.current,x=S1(v,p.type);v!==x&&(Ae(Gt,p),Ae(qt,x))}function Na(p){Gt.current===p&&(We(qt),We(Gt)),It.current===p&&(We(It),ng._currentValue=ht)}var za=Object.prototype.hasOwnProperty,er=t.unstable_scheduleCallback,dr=t.unstable_cancelCallback,cr=t.unstable_shouldYield,Pr=t.unstable_requestPaint,ka=t.unstable_now,jr=t.unstable_getCurrentPriorityLevel,pn=t.unstable_ImmediatePriority,Dn=t.unstable_UserBlockingPriority,Rn=t.unstable_NormalPriority,wa=t.unstable_LowPriority,Wa=t.unstable_IdlePriority,ca=t.log,Qa=t.unstable_setDisableYieldValue,gr=null,qn=null;function Mn(p){if(qn&&typeof qn.onCommitFiberRoot=="function")try{qn.onCommitFiberRoot(gr,p,void 0,(p.current.flags&128)===128)}catch{}}function mn(p){if(typeof ca=="function"&&Qa(p),qn&&typeof qn.setStrictMode=="function")try{qn.setStrictMode(gr,p)}catch{}}var en=Math.clz32?Math.clz32:Bi,Er=Math.log,As=Math.LN2;function Bi(p){return p>>>=0,p===0?32:31-(Er(p)/As|0)|0}var Qi=128,Oo=4194304;function Ni(p){var v=p&42;if(v!==0)return v;switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return p&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return p}}function fn(p,v){var x=p.pendingLanes;if(x===0)return 0;var F=0,Y=p.suspendedLanes,se=p.pingedLanes,Fe=p.warmLanes;p=p.finishedLanes!==0;var ct=x&134217727;return ct!==0?(x=ct&~Y,x!==0?F=Ni(x):(se&=ct,se!==0?F=Ni(se):p||(Fe=ct&~Fe,Fe!==0&&(F=Ni(Fe))))):(ct=x&~Y,ct!==0?F=Ni(ct):se!==0?F=Ni(se):p||(Fe=x&~Fe,Fe!==0&&(F=Ni(Fe)))),F===0?0:v!==0&&v!==F&&(v&Y)===0&&(Y=F&-F,Fe=v&-v,Y>=Fe||Y===32&&(Fe&4194176)!==0)?v:F}function ui(p,v){return(p.pendingLanes&~(p.suspendedLanes&~p.pingedLanes)&v)===0}function Vc(p,v){switch(p){case 1:case 2:case 4:case 8:return v+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return v+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Us(){var p=Qi;return Qi<<=1,(Qi&4194176)===0&&(Qi=128),p}function Jt(){var p=Oo;return Oo<<=1,(Oo&62914560)===0&&(Oo=4194304),p}function xe(p){for(var v=[],x=0;31>x;x++)v.push(p);return v}function Oe(p,v){p.pendingLanes|=v,v!==268435456&&(p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0)}function rt(p,v,x,F,Y,se){var Fe=p.pendingLanes;p.pendingLanes=x,p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0,p.expiredLanes&=x,p.entangledLanes&=x,p.errorRecoveryDisabledLanes&=x,p.shellSuspendCounter=0;var ct=p.entanglements,Ut=p.expirationTimes,la=p.hiddenUpdates;for(x=Fe&~x;0<x;){var ja=31-en(x),nr=1<<ja;ct[ja]=0,Ut[ja]=-1;var xa=la[ja];if(xa!==null)for(la[ja]=null,ja=0;ja<xa.length;ja++){var Za=xa[ja];Za!==null&&(Za.lane&=-536870913)}x&=~nr}F!==0&&_t(p,F,0),se!==0&&Y===0&&p.tag!==0&&(p.suspendedLanes|=se&~(Fe&~v))}function _t(p,v,x){p.pendingLanes|=v,p.suspendedLanes&=~v;var F=31-en(v);p.entangledLanes|=v,p.entanglements[F]=p.entanglements[F]|1073741824|x&4194218}function yt(p,v){var x=p.entangledLanes|=v;for(p=p.entanglements;x;){var F=31-en(x),Y=1<<F;Y&v|p[F]&v&&(p[F]|=v),x&=~Y}}function bt(p){return p&=-p,2<p?8<p?(p&134217727)!==0?32:268435456:8:2}function Bt(){var p=$e.p;return p!==0?p:(p=window.event,p===void 0?32:wS(p.type))}function Et(p,v){var x=$e.p;try{return $e.p=p,v()}finally{$e.p=x}}var $t=Math.random().toString(36).slice(2),Kt="__reactFiber$"+$t,Ht="__reactProps$"+$t,Ta="__reactContainer$"+$t,Ma="__reactEvents$"+$t,Ba="__reactListeners$"+$t,_r="__reactHandles$"+$t,Nr="__reactResources$"+$t,Vr="__reactMarker$"+$t;function Gr(p){delete p[Kt],delete p[Ht],delete p[Ma],delete p[Ba],delete p[_r]}function zn(p){var v=p[Kt];if(v)return v;for(var x=p.parentNode;x;){if(v=x[Ta]||x[Kt]){if(x=v.alternate,v.child!==null||x!==null&&x.child!==null)for(p=P1(p);p!==null;){if(x=p[Kt])return x;p=P1(p)}return v}p=x,x=p.parentNode}return null}function Jn(p){if(p=p[Kt]||p[Ta]){var v=p.tag;if(v===5||v===6||v===13||v===26||v===27||v===3)return p}return null}function qr(p){var v=p.tag;if(v===5||v===26||v===27||v===6)return p.stateNode;throw Error(r(33))}function yn(p){var v=p[Nr];return v||(v=p[Nr]={hoistableStyles:new Map,hoistableScripts:new Map}),v}function Hr(p){p[Vr]=!0}var In=new Set,Vi={};function Gi(p,v){_s(p,v),_s(p+"Capture",v)}function _s(p,v){for(Vi[p]=v,p=0;p<v.length;p++)In.add(v[p])}var vs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Do=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ws={},ks={};function sc(p){return za.call(ks,p)?!0:za.call(ws,p)?!1:Do.test(p)?ks[p]=!0:(ws[p]=!0,!1)}function Wo(p,v,x){if(sc(v))if(x===null)p.removeAttribute(v);else{switch(typeof x){case"undefined":case"function":case"symbol":p.removeAttribute(v);return;case"boolean":var F=v.toLowerCase().slice(0,5);if(F!=="data-"&&F!=="aria-"){p.removeAttribute(v);return}}p.setAttribute(v,""+x)}}function zi(p,v,x){if(x===null)p.removeAttribute(v);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":p.removeAttribute(v);return}p.setAttribute(v,""+x)}}function ql(p,v,x,F){if(F===null)p.removeAttribute(x);else{switch(typeof F){case"undefined":case"function":case"symbol":case"boolean":p.removeAttribute(x);return}p.setAttributeNS(v,x,""+F)}}function Mo(p){switch(typeof p){case"bigint":case"boolean":case"number":case"string":case"undefined":return p;case"object":return p;default:return""}}function wd(p){var v=p.type;return(p=p.nodeName)&&p.toLowerCase()==="input"&&(v==="checkbox"||v==="radio")}function zc(p){var v=wd(p)?"checked":"value",x=Object.getOwnPropertyDescriptor(p.constructor.prototype,v),F=""+p[v];if(!p.hasOwnProperty(v)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var Y=x.get,se=x.set;return Object.defineProperty(p,v,{configurable:!0,get:function(){return Y.call(this)},set:function(Fe){F=""+Fe,se.call(this,Fe)}}),Object.defineProperty(p,v,{enumerable:x.enumerable}),{getValue:function(){return F},setValue:function(Fe){F=""+Fe},stopTracking:function(){p._valueTracker=null,delete p[v]}}}}function ih(p){p._valueTracker||(p._valueTracker=zc(p))}function pu(p){if(!p)return!1;var v=p._valueTracker;if(!v)return!0;var x=v.getValue(),F="";return p&&(F=wd(p)?p.checked?"true":"false":p.value),p=F,p!==x?(v.setValue(p),!0):!1}function Oc(p){if(p=p||(typeof document<"u"?document:void 0),typeof p>"u")return null;try{return p.activeElement||p.body}catch{return p.body}}var hl=/[\n"\\]/g;function Xs(p){return p.replace(hl,function(v){return"\\"+v.charCodeAt(0).toString(16)+" "})}function Io(p,v,x,F,Y,se,Fe,ct){p.name="",Fe!=null&&typeof Fe!="function"&&typeof Fe!="symbol"&&typeof Fe!="boolean"?p.type=Fe:p.removeAttribute("type"),v!=null?Fe==="number"?(v===0&&p.value===""||p.value!=v)&&(p.value=""+Mo(v)):p.value!==""+Mo(v)&&(p.value=""+Mo(v)):Fe!=="submit"&&Fe!=="reset"||p.removeAttribute("value"),v!=null?mu(p,Fe,Mo(v)):x!=null?mu(p,Fe,Mo(x)):F!=null&&p.removeAttribute("value"),Y==null&&se!=null&&(p.defaultChecked=!!se),Y!=null&&(p.checked=Y&&typeof Y!="function"&&typeof Y!="symbol"),ct!=null&&typeof ct!="function"&&typeof ct!="symbol"&&typeof ct!="boolean"?p.name=""+Mo(ct):p.removeAttribute("name")}function Hl(p,v,x,F,Y,se,Fe,ct){if(se!=null&&typeof se!="function"&&typeof se!="symbol"&&typeof se!="boolean"&&(p.type=se),v!=null||x!=null){if(!(se!=="submit"&&se!=="reset"||v!=null))return;x=x!=null?""+Mo(x):"",v=v!=null?""+Mo(v):x,ct||v===p.value||(p.value=v),p.defaultValue=v}F=F??Y,F=typeof F!="function"&&typeof F!="symbol"&&!!F,p.checked=ct?p.checked:!!F,p.defaultChecked=!!F,Fe!=null&&typeof Fe!="function"&&typeof Fe!="symbol"&&typeof Fe!="boolean"&&(p.name=Fe)}function mu(p,v,x){v==="number"&&Oc(p.ownerDocument)===p||p.defaultValue===""+x||(p.defaultValue=""+x)}function oo(p,v,x,F){if(p=p.options,v){v={};for(var Y=0;Y<x.length;Y++)v["$"+x[Y]]=!0;for(x=0;x<p.length;x++)Y=v.hasOwnProperty("$"+p[x].value),p[x].selected!==Y&&(p[x].selected=Y),Y&&F&&(p[x].defaultSelected=!0)}else{for(x=""+Mo(x),v=null,Y=0;Y<p.length;Y++){if(p[Y].value===x){p[Y].selected=!0,F&&(p[Y].defaultSelected=!0);return}v!==null||p[Y].disabled||(v=p[Y])}v!==null&&(v.selected=!0)}}function Lo(p,v,x){if(v!=null&&(v=""+Mo(v),v!==p.value&&(p.value=v),x==null)){p.defaultValue!==v&&(p.defaultValue=v);return}p.defaultValue=x!=null?""+Mo(x):""}function Rd(p,v,x,F){if(v==null){if(F!=null){if(x!=null)throw Error(r(92));if(Se(F)){if(1<F.length)throw Error(r(93));F=F[0]}x=F}x==null&&(x=""),v=x}x=Mo(v),p.defaultValue=x,F=p.textContent,F===x&&F!==""&&F!==null&&(p.value=F)}function ku(p,v){if(v){var x=p.firstChild;if(x&&x===p.lastChild&&x.nodeType===3){x.nodeValue=v;return}}p.textContent=v}var mf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $l(p,v,x){var F=v.indexOf("--")===0;x==null||typeof x=="boolean"||x===""?F?p.setProperty(v,""):v==="float"?p.cssFloat="":p[v]="":F?p.setProperty(v,x):typeof x!="number"||x===0||mf.has(v)?v==="float"?p.cssFloat=x:p[v]=(""+x).trim():p[v]=x+"px"}function Fo(p,v,x){if(v!=null&&typeof v!="object")throw Error(r(62));if(p=p.style,x!=null){for(var F in x)!x.hasOwnProperty(F)||v!=null&&v.hasOwnProperty(F)||(F.indexOf("--")===0?p.setProperty(F,""):F==="float"?p.cssFloat="":p[F]="");for(var Y in v)F=v[Y],v.hasOwnProperty(Y)&&x[Y]!==F&&$l(p,Y,F)}else for(var se in v)v.hasOwnProperty(se)&&$l(p,se,v[se])}function Bu(p){if(p.indexOf("-")===-1)return!1;switch(p){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Yo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function bn(p){return Yo.test(""+p)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":p}var lo=null;function fr(p){return p=p.target||p.srcElement||window,p.correspondingUseElement&&(p=p.correspondingUseElement),p.nodeType===3?p.parentNode:p}var Dc=null,gn=null;function oh(p){var v=Jn(p);if(v&&(p=v.stateNode)){var x=p[Ht]||null;e:switch(p=v.stateNode,v.type){case"input":if(Io(p,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name),v=x.name,x.type==="radio"&&v!=null){for(x=p;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll('input[name="'+Xs(""+v)+'"][type="radio"]'),v=0;v<x.length;v++){var F=x[v];if(F!==p&&F.form===p.form){var Y=F[Ht]||null;if(!Y)throw Error(r(90));Io(F,Y.value,Y.defaultValue,Y.defaultValue,Y.checked,Y.defaultChecked,Y.type,Y.name)}}for(v=0;v<x.length;v++)F=x[v],F.form===p.form&&pu(F)}break e;case"textarea":Lo(p,x.value,x.defaultValue);break e;case"select":v=x.value,v!=null&&oo(p,!!x.multiple,v,!1)}}}var Tn=!1;function Bs(p,v,x){if(Tn)return p(v,x);Tn=!0;try{var F=p(v);return F}finally{if(Tn=!1,(Dc!==null||gn!==null)&&(k0(),Dc&&(v=Dc,p=gn,gn=Dc=null,oh(v),p)))for(v=0;v<p.length;v++)oh(p[v])}}function oc(p,v){var x=p.stateNode;if(x===null)return null;var F=x[Ht]||null;if(F===null)return null;x=F[v];e:switch(v){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(F=!F.disabled)||(p=p.type,F=!(p==="button"||p==="input"||p==="select"||p==="textarea")),p=!F;break e;default:p=!1}if(p)return null;if(x&&typeof x!="function")throw Error(r(231,v,typeof x));return x}var lc=!1;if(vs)try{var Xa={};Object.defineProperty(Xa,"passive",{get:function(){lc=!0}}),window.addEventListener("test",Xa,Xa),window.removeEventListener("test",Xa,Xa)}catch{lc=!1}var an=null,An=null,Gs=null;function Td(){if(Gs)return Gs;var p,v=An,x=v.length,F,Y="value"in an?an.value:an.textContent,se=Y.length;for(p=0;p<x&&v[p]===Y[p];p++);var Fe=x-p;for(F=1;F<=Fe&&v[x-F]===Y[se-F];F++);return Gs=Y.slice(p,1<F?1-F:void 0)}function un(p){var v=p.keyCode;return"charCode"in p?(p=p.charCode,p===0&&v===13&&(p=13)):p=v,p===10&&(p=13),32<=p||p===13?p:0}function Uo(){return!0}function yu(){return!1}function Rs(p){function v(x,F,Y,se,Fe){this._reactName=x,this._targetInst=Y,this.type=F,this.nativeEvent=se,this.target=Fe,this.currentTarget=null;for(var ct in p)p.hasOwnProperty(ct)&&(x=p[ct],this[ct]=x?x(se):se[ct]);return this.isDefaultPrevented=(se.defaultPrevented!=null?se.defaultPrevented:se.returnValue===!1)?Uo:yu,this.isPropagationStopped=yu,this}return De(v.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=Uo)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=Uo)},persist:function(){},isPersistent:Uo}),v}var Li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(p){return p.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bi=Rs(Li),uo=De({},Li,{view:0,detail:0}),Sd=Rs(uo),lh,uc,cc,Xo=De({},uo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wl,button:0,buttons:0,relatedTarget:function(p){return p.relatedTarget===void 0?p.fromElement===p.srcElement?p.toElement:p.fromElement:p.relatedTarget},movementX:function(p){return"movementX"in p?p.movementX:(p!==cc&&(cc&&p.type==="mousemove"?(lh=p.screenX-cc.screenX,uc=p.screenY-cc.screenY):uc=lh=0,cc=p),lh)},movementY:function(p){return"movementY"in p?p.movementY:uc}}),us=Rs(Xo),Gu=De({},Xo,{dataTransfer:0}),Ts=Rs(Gu),xl=De({},uo,{relatedTarget:0}),Jo=Rs(xl),ji=De({},Li,{animationName:0,elapsedTime:0,pseudoElement:0}),js=Rs(ji),Kl=De({},Li,{clipboardData:function(p){return"clipboardData"in p?p.clipboardData:window.clipboardData}}),ns=Rs(Kl),Dh=De({},Li,{data:0}),ko=Rs(Dh),Cd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Au={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yf(p){var v=this.nativeEvent;return v.getModifierState?v.getModifierState(p):(p=Au[p])?!!v[p]:!1}function Wl(){return Yf}var jm=De({},uo,{key:function(p){if(p.key){var v=Cd[p.key]||p.key;if(v!=="Unidentified")return v}return p.type==="keypress"?(p=un(p),p===13?"Enter":String.fromCharCode(p)):p.type==="keydown"||p.type==="keyup"?gu[p.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wl,charCode:function(p){return p.type==="keypress"?un(p):0},keyCode:function(p){return p.type==="keydown"||p.type==="keyup"?p.keyCode:0},which:function(p){return p.type==="keypress"?un(p):p.type==="keydown"||p.type==="keyup"?p.keyCode:0}}),bd=Rs(jm),Zs=De({},Xo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yf=Rs(Zs),Yl=De({},uo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wl}),gf=Rs(Yl),oe=De({},Li,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ke=Rs(oe),Dt=De({},Xo,{deltaX:function(p){return"deltaX"in p?p.deltaX:"wheelDeltaX"in p?-p.wheelDeltaX:0},deltaY:function(p){return"deltaY"in p?p.deltaY:"wheelDeltaY"in p?-p.wheelDeltaY:"wheelDelta"in p?-p.wheelDelta:0},deltaZ:0,deltaMode:0}),Yt=Rs(Dt),ha=De({},Li,{newState:0,oldState:0}),Da=Rs(ha),rr=[9,13,27,32],wr=vs&&"CompositionEvent"in window,$r=null;vs&&"documentMode"in document&&($r=document.documentMode);var Sn=vs&&"TextEvent"in window&&!$r,Nn=vs&&(!wr||$r&&8<$r&&11>=$r),mi=" ",Ss=!1;function Cs(p,v){switch(p){case"keyup":return rr.indexOf(v.keyCode)!==-1;case"keydown":return v.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Js(p){return p=p.detail,typeof p=="object"&&"data"in p?p.data:null}var es=!1;function br(p,v){switch(p){case"compositionend":return Js(v);case"keypress":return v.which!==32?null:(Ss=!0,mi);case"textInput":return p=v.data,p===mi&&Ss?null:p;default:return null}}function ir(p,v){if(es)return p==="compositionend"||!wr&&Cs(p,v)?(p=Td(),Gs=An=an=null,es=!1,p):null;switch(p){case"paste":return null;case"keypress":if(!(v.ctrlKey||v.altKey||v.metaKey)||v.ctrlKey&&v.altKey){if(v.char&&1<v.char.length)return v.char;if(v.which)return String.fromCharCode(v.which)}return null;case"compositionend":return Nn&&v.locale!=="ko"?null:v.data;default:return null}}var fl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rr(p){var v=p&&p.nodeName&&p.nodeName.toLowerCase();return v==="input"?!!fl[p.type]:v==="textarea"}function _u(p,v,x,F){Dc?gn?gn.push(F):gn=[F]:Dc=F,v=Of(v,"onChange"),0<v.length&&(x=new bi("onChange","change",null,x,F),p.push({event:x,listeners:v}))}var Xl=null,vr=null;function uh(p){$0(p,0)}function Jl(p){var v=qr(p);if(pu(v))return p}function dc(p,v){if(p==="change")return v}var xd=!1;if(vs){var bs;if(vs){var Ai="oninput"in document;if(!Ai){var hc=document.createElement("div");hc.setAttribute("oninput","return;"),Ai=typeof hc.oninput=="function"}bs=Ai}else bs=!1;xd=bs&&(!document.documentMode||9<document.documentMode)}function Va(){Xl&&(Xl.detachEvent("onpropertychange",Pd),vr=Xl=null)}function Pd(p){if(p.propertyName==="value"&&Jl(vr)){var v=[];_u(v,vr,p,fr(p)),Bs(uh,v)}}function qs(p,v,x){p==="focusin"?(Va(),Xl=v,vr=x,Xl.attachEvent("onpropertychange",Pd)):p==="focusout"&&Va()}function co(p){if(p==="selectionchange"||p==="keyup"||p==="keydown")return Jl(vr)}function Af(p,v){if(p==="click")return Jl(v)}function Mh(p,v){if(p==="input"||p==="change")return Jl(v)}function ho(p,v){return p===v&&(p!==0||1/p===1/v)||p!==p&&v!==v}var Os=typeof Object.is=="function"?Object.is:ho;function Pl(p,v){if(Os(p,v))return!0;if(typeof p!="object"||p===null||typeof v!="object"||v===null)return!1;var x=Object.keys(p),F=Object.keys(v);if(x.length!==F.length)return!1;for(F=0;F<x.length;F++){var Y=x[F];if(!za.call(v,Y)||!Os(p[Y],v[Y]))return!1}return!0}function Mc(p){for(;p&&p.firstChild;)p=p.firstChild;return p}function Ql(p,v){var x=Mc(p);p=0;for(var F;x;){if(x.nodeType===3){if(F=p+x.textContent.length,p<=v&&F>=v)return{node:x,offset:v-p};p=F}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=Mc(x)}}function ch(p,v){return p&&v?p===v?!0:p&&p.nodeType===3?!1:v&&v.nodeType===3?ch(p,v.parentNode):"contains"in p?p.contains(v):p.compareDocumentPosition?!!(p.compareDocumentPosition(v)&16):!1:!1}function El(p){p=p!=null&&p.ownerDocument!=null&&p.ownerDocument.defaultView!=null?p.ownerDocument.defaultView:window;for(var v=Oc(p.document);v instanceof p.HTMLIFrameElement;){try{var x=typeof v.contentWindow.location.href=="string"}catch{x=!1}if(x)p=v.contentWindow;else break;v=Oc(p.document)}return v}function Ro(p){var v=p&&p.nodeName&&p.nodeName.toLowerCase();return v&&(v==="input"&&(p.type==="text"||p.type==="search"||p.type==="tel"||p.type==="url"||p.type==="password")||v==="textarea"||p.contentEditable==="true")}function Ed(p,v){var x=El(v);v=p.focusedElem;var F=p.selectionRange;if(x!==v&&v&&v.ownerDocument&&ch(v.ownerDocument.documentElement,v)){if(F!==null&&Ro(v)){if(p=F.start,x=F.end,x===void 0&&(x=p),"selectionStart"in v)v.selectionStart=p,v.selectionEnd=Math.min(x,v.value.length);else if(x=(p=v.ownerDocument||document)&&p.defaultView||window,x.getSelection){x=x.getSelection();var Y=v.textContent.length,se=Math.min(F.start,Y);F=F.end===void 0?se:Math.min(F.end,Y),!x.extend&&se>F&&(Y=F,F=se,se=Y),Y=Ql(v,se);var Fe=Ql(v,F);Y&&Fe&&(x.rangeCount!==1||x.anchorNode!==Y.node||x.anchorOffset!==Y.offset||x.focusNode!==Fe.node||x.focusOffset!==Fe.offset)&&(p=p.createRange(),p.setStart(Y.node,Y.offset),x.removeAllRanges(),se>F?(x.addRange(p),x.extend(Fe.node,Fe.offset)):(p.setEnd(Fe.node,Fe.offset),x.addRange(p)))}}for(p=[],x=v;x=x.parentNode;)x.nodeType===1&&p.push({element:x,left:x.scrollLeft,top:x.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<p.length;v++)x=p[v],x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}var Ic=vs&&"documentMode"in document&&11>=document.documentMode,Nl=null,fc=null,vu=null,Zi=!1;function _f(p,v,x){var F=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;Zi||Nl==null||Nl!==Oc(F)||(F=Nl,"selectionStart"in F&&Ro(F)?F={start:F.selectionStart,end:F.selectionEnd}:(F=(F.ownerDocument&&F.ownerDocument.defaultView||window).getSelection(),F={anchorNode:F.anchorNode,anchorOffset:F.anchorOffset,focusNode:F.focusNode,focusOffset:F.focusOffset}),vu&&Pl(vu,F)||(vu=F,F=Of(fc,"onSelect"),0<F.length&&(v=new bi("onSelect","select",null,v,x),p.push({event:v,listeners:F}),v.target=Nl)))}function Qs(p,v){var x={};return x[p.toLowerCase()]=v.toLowerCase(),x["Webkit"+p]="webkit"+v,x["Moz"+p]="moz"+v,x}var fo={animationend:Qs("Animation","AnimationEnd"),animationiteration:Qs("Animation","AnimationIteration"),animationstart:Qs("Animation","AnimationStart"),transitionrun:Qs("Transition","TransitionRun"),transitionstart:Qs("Transition","TransitionStart"),transitioncancel:Qs("Transition","TransitionCancel"),transitionend:Qs("Transition","TransitionEnd")},Nd={},Vd={};vs&&(Vd=document.createElement("div").style,"AnimationEvent"in window||(delete fo.animationend.animation,delete fo.animationiteration.animation,delete fo.animationstart.animation),"TransitionEvent"in window||delete fo.transitionend.transition);function eo(p){if(Nd[p])return Nd[p];if(!fo[p])return p;var v=fo[p],x;for(x in v)if(v.hasOwnProperty(x)&&x in Vd)return Nd[p]=v[x];return p}var Lc=eo("animationend"),pc=eo("animationiteration"),wu=eo("animationstart"),Fc=eo("transitionrun"),Ru=eo("transitionstart"),Uc=eo("transitioncancel"),mc=eo("transitionend"),ju=new Map,Bo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function cs(p,v){ju.set(p,v),Gi(v,[p])}var Xn=[],ai=0,qi=0;function is(){for(var p=ai,v=qi=ai=0;v<p;){var x=Xn[v];Xn[v++]=null;var F=Xn[v];Xn[v++]=null;var Y=Xn[v];Xn[v++]=null;var se=Xn[v];if(Xn[v++]=null,F!==null&&Y!==null){var Fe=F.pending;Fe===null?Y.next=Y:(Y.next=Fe.next,Fe.next=Y),F.pending=Y}se!==0&&tu(x,Y,se)}}function eu(p,v,x,F){Xn[ai++]=p,Xn[ai++]=v,Xn[ai++]=x,Xn[ai++]=F,qi|=F,p.lanes|=F,p=p.alternate,p!==null&&(p.lanes|=F)}function kc(p,v,x,F){return eu(p,v,x,F),tn(p)}function Qo(p,v){return eu(p,null,null,v),tn(p)}function tu(p,v,x){p.lanes|=x;var F=p.alternate;F!==null&&(F.lanes|=x);for(var Y=!1,se=p.return;se!==null;)se.childLanes|=x,F=se.alternate,F!==null&&(F.childLanes|=x),se.tag===22&&(p=se.stateNode,p===null||p._visibility&1||(Y=!0)),p=se,se=se.return;Y&&v!==null&&p.tag===3&&(se=p.stateNode,Y=31-en(x),se=se.hiddenUpdates,p=se[Y],p===null?se[Y]=[v]:p.push(v),v.lane=x|536870912)}function tn(p){if(50<vl)throw vl=0,qd=null,Error(r(185));for(var v=p.return;v!==null;)p=v,v=p.return;return p.tag===3?p.stateNode:null}var Bc={},Vl=new WeakMap;function ts(p,v){if(typeof p=="object"&&p!==null){var x=Vl.get(p);return x!==void 0?x:(v={value:p,source:v,stack:Ze(v)},Vl.set(p,v),v)}return{value:p,source:v,stack:Ze(v)}}var yc=[],zd=0,di=null,Ih=0,el=[],pl=0,Gc=null,Tu=1,Zu="";function gc(p,v){yc[zd++]=Ih,yc[zd++]=di,di=p,Ih=v}function qp(p,v,x){el[pl++]=Tu,el[pl++]=Zu,el[pl++]=Gc,Gc=p;var F=Tu;p=Zu;var Y=32-en(F)-1;F&=~(1<<Y),x+=1;var se=32-en(v)+Y;if(30<se){var Fe=Y-Y%5;se=(F&(1<<Fe)-1).toString(32),F>>=Fe,Y-=Fe,Tu=1<<32-en(v)+Y|x<<Y|F,Zu=se+p}else Tu=1<<se|x<<Y|F,Zu=p}function Lh(p){p.return!==null&&(gc(p,1),qp(p,1,0))}function Fh(p){for(;p===di;)di=yc[--zd],yc[zd]=null,Ih=yc[--zd],yc[zd]=null;for(;p===Gc;)Gc=el[--pl],el[pl]=null,Zu=el[--pl],el[pl]=null,Tu=el[--pl],el[pl]=null}var tl=null,Hi=null,_i=!1,au=null,Su=!1,Xf=Error(r(519));function Ac(p){var v=Error(r(418,""));throw Dd(ts(v,p)),Xf}function vf(p){var v=p.stateNode,x=p.type,F=p.memoizedProps;switch(v[Kt]=p,v[Ht]=F,x){case"dialog":Mi("cancel",v),Mi("close",v);break;case"iframe":case"object":case"embed":Mi("load",v);break;case"video":case"audio":for(x=0;x<ey.length;x++)Mi(ey[x],v);break;case"source":Mi("error",v);break;case"img":case"image":case"link":Mi("error",v),Mi("load",v);break;case"details":Mi("toggle",v);break;case"input":Mi("invalid",v),Hl(v,F.value,F.defaultValue,F.checked,F.defaultChecked,F.type,F.name,!0),ih(v);break;case"select":Mi("invalid",v);break;case"textarea":Mi("invalid",v),Rd(v,F.value,F.defaultValue,F.children),ih(v)}x=F.children,typeof x!="string"&&typeof x!="number"&&typeof x!="bigint"||v.textContent===""+x||F.suppressHydrationWarning===!0||Df(v.textContent,x)?(F.popover!=null&&(Mi("beforetoggle",v),Mi("toggle",v)),F.onScroll!=null&&Mi("scroll",v),F.onScrollEnd!=null&&Mi("scrollend",v),F.onClick!=null&&(v.onclick=Qy),v=!0):v=!1,v||Ac(p)}function Od(p){for(tl=p.return;tl;)switch(tl.tag){case 3:case 27:Su=!0;return;case 5:case 13:Su=!1;return;default:tl=tl.return}}function Uh(p){if(p!==tl)return!1;if(!_i)return Od(p),_i=!0,!1;var v=!1,x;if((x=p.tag!==3&&p.tag!==27)&&((x=p.tag===5)&&(x=p.type,x=!(x!=="form"&&x!=="button")||J0(p.type,p.memoizedProps)),x=!x),x&&(v=!0),v&&Hi&&Ac(p),Od(p),p.tag===13){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));e:{for(p=p.nextSibling,v=0;p;){if(p.nodeType===8)if(x=p.data,x==="/$"){if(v===0){Hi=Mu(p.nextSibling);break e}v--}else x!=="$"&&x!=="$!"&&x!=="$?"||v++;p=p.nextSibling}Hi=null}}else Hi=tl?Mu(p.stateNode.nextSibling):null;return!0}function kh(){Hi=tl=null,_i=!1}function Dd(p){au===null?au=[p]:au.push(p)}var wf=Error(r(460)),Zm=Error(r(474)),dh={then:function(){}};function Ly(p){return p=p.status,p==="fulfilled"||p==="rejected"}function _c(){}function qu(p,v,x){switch(x=p[x],x===void 0?p.push(v):x!==v&&(v.then(_c,_c),v=x),v.status){case"fulfilled":return v.value;case"rejected":throw p=v.reason,p===wf?Error(r(483)):p;default:if(typeof v.status=="string")v.then(_c,_c);else{if(p=Ur,p!==null&&100<p.shellSuspendCounter)throw Error(r(482));p=v,p.status="pending",p.then(function(F){if(v.status==="pending"){var Y=v;Y.status="fulfilled",Y.value=F}},function(F){if(v.status==="pending"){var Y=v;Y.status="rejected",Y.reason=F}})}switch(v.status){case"fulfilled":return v.value;case"rejected":throw p=v.reason,p===wf?Error(r(483)):p}throw Cu=v,wf}}var Cu=null;function Fy(){if(Cu===null)throw Error(r(459));var p=Cu;return Cu=null,p}var Bh=null,ml=0;function al(p){var v=ml;return ml+=1,Bh===null&&(Bh=[]),qu(Bh,p,v)}function Gh(p,v){v=v.props.ref,p.ref=v!==void 0?v:null}function Md(p,v){throw v.$$typeof===l?Error(r(525)):(p=Object.prototype.toString.call(v),Error(r(31,p==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":p)))}function Hp(p){var v=p._init;return v(p._payload)}function $p(p){function v(ya,ia){if(p){var Sa=ya.deletions;Sa===null?(ya.deletions=[ia],ya.flags|=16):Sa.push(ia)}}function x(ya,ia){if(!p)return null;for(;ia!==null;)v(ya,ia),ia=ia.sibling;return null}function F(ya){for(var ia=new Map;ya!==null;)ya.key!==null?ia.set(ya.key,ya):ia.set(ya.index,ya),ya=ya.sibling;return ia}function Y(ya,ia){return ya=Ca(ya,ia),ya.index=0,ya.sibling=null,ya}function se(ya,ia,Sa){return ya.index=Sa,p?(Sa=ya.alternate,Sa!==null?(Sa=Sa.index,Sa<ia?(ya.flags|=33554434,ia):Sa):(ya.flags|=33554434,ia)):(ya.flags|=1048576,ia)}function Fe(ya){return p&&ya.alternate===null&&(ya.flags|=33554434),ya}function ct(ya,ia,Sa,Ja){return ia===null||ia.tag!==6?(ia=ea(Sa,ya.mode,Ja),ia.return=ya,ia):(ia=Y(ia,Sa),ia.return=ya,ia)}function Ut(ya,ia,Sa,Ja){var Kr=Sa.type;return Kr===w?ja(ya,ia,Sa.props.children,Ja,Sa.key):ia!==null&&(ia.elementType===Kr||typeof Kr=="object"&&Kr!==null&&Kr.$$typeof===re&&Hp(Kr)===ia.type)?(ia=Y(ia,Sa.props),Gh(ia,Sa),ia.return=ya,ia):(ia=sa(Sa.type,Sa.key,Sa.props,null,ya.mode,Ja),Gh(ia,Sa),ia.return=ya,ia)}function la(ya,ia,Sa,Ja){return ia===null||ia.tag!==4||ia.stateNode.containerInfo!==Sa.containerInfo||ia.stateNode.implementation!==Sa.implementation?(ia=da(Sa,ya.mode,Ja),ia.return=ya,ia):(ia=Y(ia,Sa.children||[]),ia.return=ya,ia)}function ja(ya,ia,Sa,Ja,Kr){return ia===null||ia.tag!==7?(ia=zt(Sa,ya.mode,Ja,Kr),ia.return=ya,ia):(ia=Y(ia,Sa),ia.return=ya,ia)}function nr(ya,ia,Sa){if(typeof ia=="string"&&ia!==""||typeof ia=="number"||typeof ia=="bigint")return ia=ea(""+ia,ya.mode,Sa),ia.return=ya,ia;if(typeof ia=="object"&&ia!==null){switch(ia.$$typeof){case h:return Sa=sa(ia.type,ia.key,ia.props,null,ya.mode,Sa),Gh(Sa,ia),Sa.return=ya,Sa;case n:return ia=da(ia,ya.mode,Sa),ia.return=ya,ia;case re:var Ja=ia._init;return ia=Ja(ia._payload),nr(ya,ia,Sa)}if(Se(ia)||_e(ia))return ia=zt(ia,ya.mode,Sa,null),ia.return=ya,ia;if(typeof ia.then=="function")return nr(ya,al(ia),Sa);if(ia.$$typeof===U)return nr(ya,Wu(ya,ia),Sa);Md(ya,ia)}return null}function xa(ya,ia,Sa,Ja){var Kr=ia!==null?ia.key:null;if(typeof Sa=="string"&&Sa!==""||typeof Sa=="number"||typeof Sa=="bigint")return Kr!==null?null:ct(ya,ia,""+Sa,Ja);if(typeof Sa=="object"&&Sa!==null){switch(Sa.$$typeof){case h:return Sa.key===Kr?Ut(ya,ia,Sa,Ja):null;case n:return Sa.key===Kr?la(ya,ia,Sa,Ja):null;case re:return Kr=Sa._init,Sa=Kr(Sa._payload),xa(ya,ia,Sa,Ja)}if(Se(Sa)||_e(Sa))return Kr!==null?null:ja(ya,ia,Sa,Ja,null);if(typeof Sa.then=="function")return xa(ya,ia,al(Sa),Ja);if(Sa.$$typeof===U)return xa(ya,ia,Wu(ya,Sa),Ja);Md(ya,Sa)}return null}function Za(ya,ia,Sa,Ja,Kr){if(typeof Ja=="string"&&Ja!==""||typeof Ja=="number"||typeof Ja=="bigint")return ya=ya.get(Sa)||null,ct(ia,ya,""+Ja,Kr);if(typeof Ja=="object"&&Ja!==null){switch(Ja.$$typeof){case h:return ya=ya.get(Ja.key===null?Sa:Ja.key)||null,Ut(ia,ya,Ja,Kr);case n:return ya=ya.get(Ja.key===null?Sa:Ja.key)||null,la(ia,ya,Ja,Kr);case re:var yi=Ja._init;return Ja=yi(Ja._payload),Za(ya,ia,Sa,Ja,Kr)}if(Se(Ja)||_e(Ja))return ya=ya.get(Sa)||null,ja(ia,ya,Ja,Kr,null);if(typeof Ja.then=="function")return Za(ya,ia,Sa,al(Ja),Kr);if(Ja.$$typeof===U)return Za(ya,ia,Sa,Wu(ia,Ja),Kr);Md(ia,Ja)}return null}function Yr(ya,ia,Sa,Ja){for(var Kr=null,yi=null,on=ia,Pn=ia=0,su=null;on!==null&&Pn<Sa.length;Pn++){on.index>Pn?(su=on,on=null):su=on.sibling;var as=xa(ya,on,Sa[Pn],Ja);if(as===null){on===null&&(on=su);break}p&&on&&as.alternate===null&&v(ya,on),ia=se(as,ia,Pn),yi===null?Kr=as:yi.sibling=as,yi=as,on=su}if(Pn===Sa.length)return x(ya,on),_i&&gc(ya,Pn),Kr;if(on===null){for(;Pn<Sa.length;Pn++)on=nr(ya,Sa[Pn],Ja),on!==null&&(ia=se(on,ia,Pn),yi===null?Kr=on:yi.sibling=on,yi=on);return _i&&gc(ya,Pn),Kr}for(on=F(on);Pn<Sa.length;Pn++)su=Za(on,ya,Pn,Sa[Pn],Ja),su!==null&&(p&&su.alternate!==null&&on.delete(su.key===null?Pn:su.key),ia=se(su,ia,Pn),yi===null?Kr=su:yi.sibling=su,yi=su);return p&&on.forEach(function(mm){return v(ya,mm)}),_i&&gc(ya,Pn),Kr}function Qn(ya,ia,Sa,Ja){if(Sa==null)throw Error(r(151));for(var Kr=null,yi=null,on=ia,Pn=ia=0,su=null,as=Sa.next();on!==null&&!as.done;Pn++,as=Sa.next()){on.index>Pn?(su=on,on=null):su=on.sibling;var mm=xa(ya,on,as.value,Ja);if(mm===null){on===null&&(on=su);break}p&&on&&mm.alternate===null&&v(ya,on),ia=se(mm,ia,Pn),yi===null?Kr=mm:yi.sibling=mm,yi=mm,on=su}if(as.done)return x(ya,on),_i&&gc(ya,Pn),Kr;if(on===null){for(;!as.done;Pn++,as=Sa.next())as=nr(ya,as.value,Ja),as!==null&&(ia=se(as,ia,Pn),yi===null?Kr=as:yi.sibling=as,yi=as);return _i&&gc(ya,Pn),Kr}for(on=F(on);!as.done;Pn++,as=Sa.next())as=Za(on,ya,Pn,as.value,Ja),as!==null&&(p&&as.alternate!==null&&on.delete(as.key===null?Pn:as.key),ia=se(as,ia,Pn),yi===null?Kr=as:yi.sibling=as,yi=as);return p&&on.forEach(function(LP){return v(ya,LP)}),_i&&gc(ya,Pn),Kr}function Ho(ya,ia,Sa,Ja){if(typeof Sa=="object"&&Sa!==null&&Sa.type===w&&Sa.key===null&&(Sa=Sa.props.children),typeof Sa=="object"&&Sa!==null){switch(Sa.$$typeof){case h:e:{for(var Kr=Sa.key;ia!==null;){if(ia.key===Kr){if(Kr=Sa.type,Kr===w){if(ia.tag===7){x(ya,ia.sibling),Ja=Y(ia,Sa.props.children),Ja.return=ya,ya=Ja;break e}}else if(ia.elementType===Kr||typeof Kr=="object"&&Kr!==null&&Kr.$$typeof===re&&Hp(Kr)===ia.type){x(ya,ia.sibling),Ja=Y(ia,Sa.props),Gh(Ja,Sa),Ja.return=ya,ya=Ja;break e}x(ya,ia);break}else v(ya,ia);ia=ia.sibling}Sa.type===w?(Ja=zt(Sa.props.children,ya.mode,Ja,Sa.key),Ja.return=ya,ya=Ja):(Ja=sa(Sa.type,Sa.key,Sa.props,null,ya.mode,Ja),Gh(Ja,Sa),Ja.return=ya,ya=Ja)}return Fe(ya);case n:e:{for(Kr=Sa.key;ia!==null;){if(ia.key===Kr)if(ia.tag===4&&ia.stateNode.containerInfo===Sa.containerInfo&&ia.stateNode.implementation===Sa.implementation){x(ya,ia.sibling),Ja=Y(ia,Sa.children||[]),Ja.return=ya,ya=Ja;break e}else{x(ya,ia);break}else v(ya,ia);ia=ia.sibling}Ja=da(Sa,ya.mode,Ja),Ja.return=ya,ya=Ja}return Fe(ya);case re:return Kr=Sa._init,Sa=Kr(Sa._payload),Ho(ya,ia,Sa,Ja)}if(Se(Sa))return Yr(ya,ia,Sa,Ja);if(_e(Sa)){if(Kr=_e(Sa),typeof Kr!="function")throw Error(r(150));return Sa=Kr.call(Sa),Qn(ya,ia,Sa,Ja)}if(typeof Sa.then=="function")return Ho(ya,ia,al(Sa),Ja);if(Sa.$$typeof===U)return Ho(ya,ia,Wu(ya,Sa),Ja);Md(ya,Sa)}return typeof Sa=="string"&&Sa!==""||typeof Sa=="number"||typeof Sa=="bigint"?(Sa=""+Sa,ia!==null&&ia.tag===6?(x(ya,ia.sibling),Ja=Y(ia,Sa),Ja.return=ya,ya=Ja):(x(ya,ia),Ja=ea(Sa,ya.mode,Ja),Ja.return=ya,ya=Ja),Fe(ya)):x(ya,ia)}return function(ya,ia,Sa,Ja){try{ml=0;var Kr=Ho(ya,ia,Sa,Ja);return Bh=null,Kr}catch(on){if(on===wf)throw on;var yi=ra(29,on,null,ya.mode);return yi.lanes=Ja,yi.return=ya,yi}finally{}}}var jc=$p(!0),Rf=$p(!1),rl=Rt(null),Id=Rt(0);function bu(p,v){p=cn,Ae(Id,p),Ae(rl,v),cn=p|v.baseLanes}function Ld(){Ae(Id,cn),Ae(rl,rl.current)}function Zc(){cn=Id.current,We(rl),We(Id)}var zl=Rt(null),Hu=null;function qc(p){var v=p.alternate;Ae(Ds,Ds.current&1),Ae(zl,p),Hu===null&&(v===null||rl.current!==null||v.memoizedState!==null)&&(Hu=p)}function Jf(p){if(p.tag===22){if(Ae(Ds,Ds.current),Ae(zl,p),Hu===null){var v=p.alternate;v!==null&&v.memoizedState!==null&&(Hu=p)}}else Fd()}function Fd(){Ae(Ds,Ds.current),Ae(zl,zl.current)}function Hc(p){We(zl),Hu===p&&(Hu=null),We(Ds)}var Ds=Rt(0);function Kp(p){for(var v=p;v!==null;){if(v.tag===13){var x=v.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||x.data==="$?"||x.data==="$!"))return v}else if(v.tag===19&&v.memoizedProps.revealOrder!==void 0){if((v.flags&128)!==0)return v}else if(v.child!==null){v.child.return=v,v=v.child;continue}if(v===p)break;for(;v.sibling===null;){if(v.return===null||v.return===p)return null;v=v.return}v.sibling.return=v.return,v=v.sibling}return null}var qm=typeof AbortController<"u"?AbortController:function(){var p=[],v=this.signal={aborted:!1,addEventListener:function(x,F){p.push(F)}};this.abort=function(){v.aborted=!0,p.forEach(function(x){return x()})}},Tf=t.unstable_scheduleCallback,Wp=t.unstable_NormalPriority,to={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jh(){return{controller:new qm,data:new Map,refCount:0}}function G(p){p.refCount--,p.refCount===0&&Tf(Wp,function(){p.controller.abort()})}var Q=null,fe=0,Ne=0,Ge=null;function Qe(p,v){if(Q===null){var x=Q=[];fe=0,Ne=AA(),Ge={status:"pending",value:void 0,then:function(F){x.push(F)}}}return fe++,v.then(at,at),v}function at(){if(--fe===0&&Q!==null){Ge!==null&&(Ge.status="fulfilled");var p=Q;Q=null,Ne=0,Ge=null;for(var v=0;v<p.length;v++)(0,p[v])()}}function lt(p,v){var x=[],F={status:"pending",value:null,reason:null,then:function(Y){x.push(Y)}};return p.then(function(){F.status="fulfilled",F.value=v;for(var Y=0;Y<x.length;Y++)(0,x[Y])(v)},function(Y){for(F.status="rejected",F.reason=Y,Y=0;Y<x.length;Y++)(0,x[Y])(void 0)}),F}var pt=be.S;be.S=function(p,v){typeof v=="object"&&v!==null&&typeof v.then=="function"&&Qe(p,v),pt!==null&&pt(p,v)};var Ct=Rt(null);function Qt(){var p=Ct.current;return p!==null?p:Ur.pooledCache}function Pt(p,v){v===null?Ae(Ct,Ct.current):Ae(Ct,v.pool)}function _a(){var p=Qt();return p===null?null:{parent:to._currentValue,pool:p}}var na=0,Ra=null,fa=null,wt=null,aa=!1,Ga=!1,Ka=!1,qa=0,Sr=0,pr=null,rn=0;function ur(){throw Error(r(321))}function vi(p,v){if(v===null)return!1;for(var x=0;x<v.length&&x<p.length;x++)if(!Os(p[x],v[x]))return!1;return!0}function xi(p,v,x,F,Y,se){return na=se,Ra=v,v.memoizedState=null,v.updateQueue=null,v.lanes=0,be.H=p===null||p.memoizedState===null?vc:ru,Ka=!1,se=x(F,Y),Ka=!1,Ga&&(se=ri(v,x,F,Y)),Hn(p),se}function Hn(p){be.H=Vu;var v=fa!==null&&fa.next!==null;if(na=0,wt=fa=Ra=null,aa=!1,Sr=0,pr=null,v)throw Error(r(300));p===null||sl||(p=p.dependencies,p!==null&&xf(p)&&(sl=!0))}function ri(p,v,x,F){Ra=p;var Y=0;do{if(Ga&&(pr=null),Sr=0,Ga=!1,25<=Y)throw Error(r(301));if(Y+=1,wt=fa=null,p.updateQueue!=null){var se=p.updateQueue;se.lastEffect=null,se.events=null,se.stores=null,se.memoCache!=null&&(se.memoCache.index=0)}be.H=wc,se=v(x,F)}while(Ga);return se}function $i(){var p=be.H,v=p.useState()[0];return v=typeof v.then=="function"?wi(v):v,p=p.useState()[0],(fa!==null?fa.memoizedState:null)!==p&&(Ra.flags|=1024),v}function kn(){var p=qa!==0;return qa=0,p}function _n(p,v,x){v.updateQueue=p.updateQueue,v.flags&=-2053,p.lanes&=~x}function ds(p){if(aa){for(p=p.memoizedState;p!==null;){var v=p.queue;v!==null&&(v.pending=null),p=p.next}aa=!1}na=0,wt=fa=Ra=null,Ga=!1,Sr=qa=0,pr=null}function Fi(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?Ra.memoizedState=wt=p:wt=wt.next=p,wt}function Bn(){if(fa===null){var p=Ra.alternate;p=p!==null?p.memoizedState:null}else p=fa.next;var v=wt===null?Ra.memoizedState:wt.next;if(v!==null)wt=v,fa=p;else{if(p===null)throw Ra.alternate===null?Error(r(467)):Error(r(310));fa=p,p={memoizedState:fa.memoizedState,baseState:fa.baseState,baseQueue:fa.baseQueue,queue:fa.queue,next:null},wt===null?Ra.memoizedState=wt=p:wt=wt.next=p}return wt}var po;po=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function wi(p){var v=Sr;return Sr+=1,pr===null&&(pr=[]),p=qu(pr,p,v),v=Ra,(wt===null?v.memoizedState:wt.next)===null&&(v=v.alternate,be.H=v===null||v.memoizedState===null?vc:ru),p}function ss(p){if(p!==null&&typeof p=="object"){if(typeof p.then=="function")return wi(p);if(p.$$typeof===U)return Ks(p)}throw Error(r(438,String(p)))}function vn(p){var v=null,x=Ra.updateQueue;if(x!==null&&(v=x.memoCache),v==null){var F=Ra.alternate;F!==null&&(F=F.updateQueue,F!==null&&(F=F.memoCache,F!=null&&(v={data:F.data.map(function(Y){return Y.slice()}),index:0})))}if(v==null&&(v={data:[],index:0}),x===null&&(x=po(),Ra.updateQueue=x),x.memoCache=v,x=v.data[v.index],x===void 0)for(x=v.data[v.index]=Array(p),F=0;F<p;F++)x[F]=ye;return v.index++,x}function Ii(p,v){return typeof v=="function"?v(p):v}function Hs(p){var v=Bn();return To(v,fa,p)}function To(p,v,x){var F=p.queue;if(F===null)throw Error(r(311));F.lastRenderedReducer=x;var Y=p.baseQueue,se=F.pending;if(se!==null){if(Y!==null){var Fe=Y.next;Y.next=se.next,se.next=Fe}v.baseQueue=Y=se,F.pending=null}if(se=p.baseState,Y===null)p.memoizedState=se;else{v=Y.next;var ct=Fe=null,Ut=null,la=v,ja=!1;do{var nr=la.lane&-536870913;if(nr!==la.lane?(hr&nr)===nr:(na&nr)===nr){var xa=la.revertLane;if(xa===0)Ut!==null&&(Ut=Ut.next={lane:0,revertLane:0,action:la.action,hasEagerState:la.hasEagerState,eagerState:la.eagerState,next:null}),nr===Ne&&(ja=!0);else if((na&xa)===xa){la=la.next,xa===Ne&&(ja=!0);continue}else nr={lane:0,revertLane:la.revertLane,action:la.action,hasEagerState:la.hasEagerState,eagerState:la.eagerState,next:null},Ut===null?(ct=Ut=nr,Fe=se):Ut=Ut.next=nr,Ra.lanes|=xa,Wi|=xa;nr=la.action,Ka&&x(se,nr),se=la.hasEagerState?la.eagerState:x(se,nr)}else xa={lane:nr,revertLane:la.revertLane,action:la.action,hasEagerState:la.hasEagerState,eagerState:la.eagerState,next:null},Ut===null?(ct=Ut=xa,Fe=se):Ut=Ut.next=xa,Ra.lanes|=nr,Wi|=nr;la=la.next}while(la!==null&&la!==v);if(Ut===null?Fe=se:Ut.next=ct,!Os(se,p.memoizedState)&&(sl=!0,ja&&(x=Ge,x!==null)))throw x;p.memoizedState=se,p.baseState=Fe,p.baseQueue=Ut,F.lastRenderedState=se}return Y===null&&(F.lanes=0),[p.memoizedState,F.dispatch]}function nl(p){var v=Bn(),x=v.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=p;var F=x.dispatch,Y=x.pending,se=v.memoizedState;if(Y!==null){x.pending=null;var Fe=Y=Y.next;do se=p(se,Fe.action),Fe=Fe.next;while(Fe!==Y);Os(se,v.memoizedState)||(sl=!0),v.memoizedState=se,v.baseQueue===null&&(v.baseState=se),x.lastRenderedState=se}return[se,F]}function Ol(p,v,x){var F=Ra,Y=Bn(),se=_i;if(se){if(x===void 0)throw Error(r(407));x=x()}else x=v();var Fe=!Os((fa||Y).memoizedState,x);if(Fe&&(Y.memoizedState=x,sl=!0),Y=Y.queue,Wc(xu.bind(null,F,Y,p),[p]),Y.getSnapshot!==v||Fe||wt!==null&&wt.memoizedState.tag&1){if(F.flags|=2048,Ml(9,Dl.bind(null,F,Y,x,v),{destroy:void 0},null),Ur===null)throw Error(r(349));se||(na&60)!==0||xs(F,v,x)}return x}function xs(p,v,x){p.flags|=16384,p={getSnapshot:v,value:x},v=Ra.updateQueue,v===null?(v=po(),Ra.updateQueue=v,v.stores=[p]):(x=v.stores,x===null?v.stores=[p]:x.push(p))}function Dl(p,v,x,F){v.value=x,v.getSnapshot=F,ba(v)&&Ua(p)}function xu(p,v,x){return x(function(){ba(v)&&Ua(p)})}function ba(p){var v=p.getSnapshot;p=p.value;try{var x=v();return!Os(p,x)}catch{return!0}}function Ua(p){var v=Qo(p,2);v!==null&&Fl(v,p,2)}function Ki(p){var v=Fi();if(typeof p=="function"){var x=p;if(p=x(),Ka){mn(!0);try{x()}finally{mn(!1)}}}return v.memoizedState=v.baseState=p,v.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:p},v}function Oi(p,v,x,F){return p.baseState=x,To(p,fa,typeof F=="function"?F:Ii)}function jt(p,v,x,F,Y){if(Jc(p))throw Error(r(485));if(p=v.action,p!==null){var se={payload:Y,action:p,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Fe){se.listeners.push(Fe)}};be.T!==null?x(!0):se.isTransition=!1,F(se),x=v.pending,x===null?(se.next=v.pending=se,Yp(v,se)):(se.next=x.next,v.pending=x.next=se)}}function Yp(p,v){var x=v.action,F=v.payload,Y=p.state;if(v.isTransition){var se=be.T,Fe={};be.T=Fe;try{var ct=x(Y,F),Ut=be.S;Ut!==null&&Ut(Fe,ct),hh(p,v,ct)}catch(la){ph(p,v,la)}finally{be.T=se}}else try{se=x(Y,F),hh(p,v,se)}catch(la){ph(p,v,la)}}function hh(p,v,x){x!==null&&typeof x=="object"&&typeof x.then=="function"?x.then(function(F){fh(p,v,F)},function(F){return ph(p,v,F)}):fh(p,v,x)}function fh(p,v,x){v.status="fulfilled",v.value=x,Pu(v),p.state=x,v=p.pending,v!==null&&(x=v.next,x===v?p.pending=null:(x=x.next,v.next=x,Yp(p,x)))}function ph(p,v,x){var F=p.pending;if(p.pending=null,F!==null){F=F.next;do v.status="rejected",v.reason=x,Pu(v),v=v.next;while(v!==F)}p.action=null}function Pu(p){p=p.listeners;for(var v=0;v<p.length;v++)(0,p[v])()}function mh(p,v){return v}function $u(p,v){if(_i){var x=Ur.formState;if(x!==null){e:{var F=Ra;if(_i){if(Hi){t:{for(var Y=Hi,se=Su;Y.nodeType!==8;){if(!se){Y=null;break t}if(Y=Mu(Y.nextSibling),Y===null){Y=null;break t}}se=Y.data,Y=se==="F!"||se==="F"?Y:null}if(Y){Hi=Mu(Y.nextSibling),F=Y.data==="F!";break e}}Ac(F)}F=!1}F&&(v=x[0])}}return x=Fi(),x.memoizedState=x.baseState=v,F={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mh,lastRenderedState:v},x.queue=F,x=rp.bind(null,Ra,F),F.dispatch=x,F=Ki(!1),se=Xc.bind(null,Ra,!1,F.queue),F=Fi(),Y={state:v,dispatch:null,action:p,pending:null},F.queue=Y,x=jt.bind(null,Ra,Y,se,x),Y.dispatch=x,F.memoizedState=p,[v,x,!1]}function Hm(p){var v=Bn();return Qf(v,fa,p)}function Qf(p,v,x){v=To(p,v,mh)[0],p=Hs(Ii)[0],v=typeof v=="object"&&v!==null&&typeof v.then=="function"?wi(v):v;var F=Bn(),Y=F.queue,se=Y.dispatch;return x!==F.memoizedState&&(Ra.flags|=2048,Ml(9,$m.bind(null,Y,x),{destroy:void 0},null)),[v,se,p]}function $m(p,v){p.action=v}function yh(p){var v=Bn(),x=fa;if(x!==null)return Qf(v,x,p);Bn(),v=v.memoizedState,x=Bn();var F=x.queue.dispatch;return x.memoizedState=p,[v,F,!1]}function Ml(p,v,x,F){return p={tag:p,create:v,inst:x,deps:F,next:null},v=Ra.updateQueue,v===null&&(v=po(),Ra.updateQueue=v),x=v.lastEffect,x===null?v.lastEffect=p.next=p:(F=x.next,x.next=p,p.next=F,v.lastEffect=p),p}function Zh(){return Bn().memoizedState}function $c(p,v,x,F){var Y=Fi();Ra.flags|=p,Y.memoizedState=Ml(1|v,x,{destroy:void 0},F===void 0?null:F)}function Kc(p,v,x,F){var Y=Bn();F=F===void 0?null:F;var se=Y.memoizedState.inst;fa!==null&&F!==null&&vi(F,fa.memoizedState.deps)?Y.memoizedState=Ml(v,x,se,F):(Ra.flags|=p,Y.memoizedState=Ml(1|v,x,se,F))}function ep(p,v){$c(8390656,8,p,v)}function Wc(p,v){Kc(2048,8,p,v)}function il(p,v){return Kc(4,2,p,v)}function Km(p,v){return Kc(4,4,p,v)}function ao(p,v){if(typeof v=="function"){p=p();var x=v(p);return function(){typeof x=="function"?x():v(null)}}if(v!=null)return p=p(),v.current=p,function(){v.current=null}}function Uy(p,v,x){x=x!=null?x.concat([p]):null,Kc(4,4,ao.bind(null,v,p),x)}function gh(){}function ni(p,v){var x=Bn();v=v===void 0?null:v;var F=x.memoizedState;return v!==null&&vi(v,F[1])?F[0]:(x.memoizedState=[p,v],p)}function xn(p,v){var x=Bn();v=v===void 0?null:v;var F=x.memoizedState;if(v!==null&&vi(v,F[1]))return F[0];if(F=p(),Ka){mn(!0);try{p()}finally{mn(!1)}}return x.memoizedState=[F,v],F}function tp(p,v,x){return x===void 0||(na&1073741824)!==0?p.memoizedState=v:(p.memoizedState=x,p=Sh(),Ra.lanes|=p,Wi|=p,x)}function Eu(p,v,x,F){return Os(x,v)?x:rl.current!==null?(p=tp(p,x,F),Os(p,v)||(sl=!0),p):(na&42)===0?(sl=!0,p.memoizedState=x):(p=Sh(),Ra.lanes|=p,Wi|=p,v)}function Ud(p,v,x,F,Y){var se=$e.p;$e.p=se!==0&&8>se?se:8;var Fe=be.T,ct={};be.T=ct,Xc(p,!1,v,x);try{var Ut=Y(),la=be.S;if(la!==null&&la(ct,Ut),Ut!==null&&typeof Ut=="object"&&typeof Ut.then=="function"){var ja=lt(Ut,F);Ah(p,v,ja,go(p))}else Ah(p,v,F,go(p))}catch(nr){Ah(p,v,{then:function(){},status:"rejected",reason:nr},go())}finally{$e.p=se,be.T=Fe}}function Nu(){}function Yc(p,v,x,F){if(p.tag!==5)throw Error(r(476));var Y=Sf(p).queue;Ud(p,Y,v,ht,x===null?Nu:function(){return qh(p),x(F)})}function Sf(p){var v=p.memoizedState;if(v!==null)return v;v={memoizedState:ht,baseState:ht,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:ht},next:null};var x={};return v.next={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:x},next:null},p.memoizedState=v,p=p.alternate,p!==null&&(p.memoizedState=v),v}function qh(p){var v=Sf(p).next.queue;Ah(p,v,{},go())}function Il(){return Ks(ng)}function Cf(){return Bn().memoizedState}function So(){return Bn().memoizedState}function kd(p){for(var v=p.return;v!==null;){switch(v.tag){case 24:case 3:var x=go();p=Pf(x);var F=Ef(v,p,x);F!==null&&(Fl(F,v,x),Nf(F,v,x)),v={cache:jh()},p.payload=v;return}v=v.return}}function ap(p,v,x){var F=go();x={lane:F,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null},Jc(p)?np(v,x):(x=kc(p,v,x,F),x!==null&&(Fl(x,p,F),Bd(x,v,F)))}function rp(p,v,x){var F=go();Ah(p,v,x,F)}function Ah(p,v,x,F){var Y={lane:F,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null};if(Jc(p))np(v,Y);else{var se=p.alternate;if(p.lanes===0&&(se===null||se.lanes===0)&&(se=v.lastRenderedReducer,se!==null))try{var Fe=v.lastRenderedState,ct=se(Fe,x);if(Y.hasEagerState=!0,Y.eagerState=ct,Os(ct,Fe))return eu(p,v,Y,0),Ur===null&&is(),!1}catch{}finally{}if(x=kc(p,v,Y,F),x!==null)return Fl(x,p,F),Bd(x,v,F),!0}return!1}function Xc(p,v,x,F){if(F={lane:2,revertLane:AA(),action:F,hasEagerState:!1,eagerState:null,next:null},Jc(p)){if(v)throw Error(r(479))}else v=kc(p,x,F,2),v!==null&&Fl(v,p,2)}function Jc(p){var v=p.alternate;return p===Ra||v!==null&&v===Ra}function np(p,v){Ga=aa=!0;var x=p.pending;x===null?v.next=v:(v.next=x.next,x.next=v),p.pending=v}function Bd(p,v,x){if((x&4194176)!==0){var F=v.lanes;F&=p.pendingLanes,x|=F,v.lanes=x,yt(p,x)}}var Vu={readContext:Ks,use:ss,useCallback:ur,useContext:ur,useEffect:ur,useImperativeHandle:ur,useLayoutEffect:ur,useInsertionEffect:ur,useMemo:ur,useReducer:ur,useRef:ur,useState:ur,useDebugValue:ur,useDeferredValue:ur,useTransition:ur,useSyncExternalStore:ur,useId:ur};Vu.useCacheRefresh=ur,Vu.useMemoCache=ur,Vu.useHostTransitionStatus=ur,Vu.useFormState=ur,Vu.useActionState=ur,Vu.useOptimistic=ur;var vc={readContext:Ks,use:ss,useCallback:function(p,v){return Fi().memoizedState=[p,v===void 0?null:v],p},useContext:Ks,useEffect:ep,useImperativeHandle:function(p,v,x){x=x!=null?x.concat([p]):null,$c(4194308,4,ao.bind(null,v,p),x)},useLayoutEffect:function(p,v){return $c(4194308,4,p,v)},useInsertionEffect:function(p,v){$c(4,2,p,v)},useMemo:function(p,v){var x=Fi();v=v===void 0?null:v;var F=p();if(Ka){mn(!0);try{p()}finally{mn(!1)}}return x.memoizedState=[F,v],F},useReducer:function(p,v,x){var F=Fi();if(x!==void 0){var Y=x(v);if(Ka){mn(!0);try{x(v)}finally{mn(!1)}}}else Y=v;return F.memoizedState=F.baseState=Y,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:Y},F.queue=p,p=p.dispatch=ap.bind(null,Ra,p),[F.memoizedState,p]},useRef:function(p){var v=Fi();return p={current:p},v.memoizedState=p},useState:function(p){p=Ki(p);var v=p.queue,x=rp.bind(null,Ra,v);return v.dispatch=x,[p.memoizedState,x]},useDebugValue:gh,useDeferredValue:function(p,v){var x=Fi();return tp(x,p,v)},useTransition:function(){var p=Ki(!1);return p=Ud.bind(null,Ra,p.queue,!0,!1),Fi().memoizedState=p,[!1,p]},useSyncExternalStore:function(p,v,x){var F=Ra,Y=Fi();if(_i){if(x===void 0)throw Error(r(407));x=x()}else{if(x=v(),Ur===null)throw Error(r(349));(hr&60)!==0||xs(F,v,x)}Y.memoizedState=x;var se={value:x,getSnapshot:v};return Y.queue=se,ep(xu.bind(null,F,se,p),[p]),F.flags|=2048,Ml(9,Dl.bind(null,F,se,x,v),{destroy:void 0},null),x},useId:function(){var p=Fi(),v=Ur.identifierPrefix;if(_i){var x=Zu,F=Tu;x=(F&~(1<<32-en(F)-1)).toString(32)+x,v=":"+v+"R"+x,x=qa++,0<x&&(v+="H"+x.toString(32)),v+=":"}else x=rn++,v=":"+v+"r"+x.toString(32)+":";return p.memoizedState=v},useCacheRefresh:function(){return Fi().memoizedState=kd.bind(null,Ra)}};vc.useMemoCache=vn,vc.useHostTransitionStatus=Il,vc.useFormState=$u,vc.useActionState=$u,vc.useOptimistic=function(p){var v=Fi();v.memoizedState=v.baseState=p;var x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return v.queue=x,v=Xc.bind(null,Ra,!0,x),x.dispatch=v,[p,v]};var ru={readContext:Ks,use:ss,useCallback:ni,useContext:Ks,useEffect:Wc,useImperativeHandle:Uy,useInsertionEffect:il,useLayoutEffect:Km,useMemo:xn,useReducer:Hs,useRef:Zh,useState:function(){return Hs(Ii)},useDebugValue:gh,useDeferredValue:function(p,v){var x=Bn();return Eu(x,fa.memoizedState,p,v)},useTransition:function(){var p=Hs(Ii)[0],v=Bn().memoizedState;return[typeof p=="boolean"?p:wi(p),v]},useSyncExternalStore:Ol,useId:Cf};ru.useCacheRefresh=So,ru.useMemoCache=vn,ru.useHostTransitionStatus=Il,ru.useFormState=Hm,ru.useActionState=Hm,ru.useOptimistic=function(p,v){var x=Bn();return Oi(x,fa,p,v)};var wc={readContext:Ks,use:ss,useCallback:ni,useContext:Ks,useEffect:Wc,useImperativeHandle:Uy,useInsertionEffect:il,useLayoutEffect:Km,useMemo:xn,useReducer:nl,useRef:Zh,useState:function(){return nl(Ii)},useDebugValue:gh,useDeferredValue:function(p,v){var x=Bn();return fa===null?tp(x,p,v):Eu(x,fa.memoizedState,p,v)},useTransition:function(){var p=nl(Ii)[0],v=Bn().memoizedState;return[typeof p=="boolean"?p:wi(p),v]},useSyncExternalStore:Ol,useId:Cf};wc.useCacheRefresh=So,wc.useMemoCache=vn,wc.useHostTransitionStatus=Il,wc.useFormState=yh,wc.useActionState=yh,wc.useOptimistic=function(p,v){var x=Bn();return fa!==null?Oi(x,fa,p,v):(x.baseState=p,[p,x.queue.dispatch])};function Ps(p,v,x,F){v=p.memoizedState,x=x(F,v),x=x==null?v:De({},v,x),p.memoizedState=x,p.lanes===0&&(p.updateQueue.baseState=x)}var nu={isMounted:function(p){return(p=p._reactInternals)?ke(p)===p:!1},enqueueSetState:function(p,v,x){p=p._reactInternals;var F=go(),Y=Pf(F);Y.payload=v,x!=null&&(Y.callback=x),v=Ef(p,Y,F),v!==null&&(Fl(v,p,F),Nf(v,p,F))},enqueueReplaceState:function(p,v,x){p=p._reactInternals;var F=go(),Y=Pf(F);Y.tag=1,Y.payload=v,x!=null&&(Y.callback=x),v=Ef(p,Y,F),v!==null&&(Fl(v,p,F),Nf(v,p,F))},enqueueForceUpdate:function(p,v){p=p._reactInternals;var x=go(),F=Pf(x);F.tag=2,v!=null&&(F.callback=v),v=Ef(p,F,x),v!==null&&(Fl(v,p,x),Nf(v,p,x))}};function Ku(p,v,x,F,Y,se,Fe){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(F,se,Fe):v.prototype&&v.prototype.isPureReactComponent?!Pl(x,F)||!Pl(Y,se):!0}function $s(p,v,x,F){p=v.state,typeof v.componentWillReceiveProps=="function"&&v.componentWillReceiveProps(x,F),typeof v.UNSAFE_componentWillReceiveProps=="function"&&v.UNSAFE_componentWillReceiveProps(x,F),v.state!==p&&nu.enqueueReplaceState(v,v.state,null)}function zu(p,v){var x=v;if("ref"in v){x={};for(var F in v)F!=="ref"&&(x[F]=v[F])}if(p=p.defaultProps){x===v&&(x=De({},x));for(var Y in p)x[Y]===void 0&&(x[Y]=p[Y])}return x}var _h=typeof reportError=="function"?reportError:function(p){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var v=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof p=="object"&&p!==null&&typeof p.message=="string"?String(p.message):String(p),error:p});if(!window.dispatchEvent(v))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",p);return}console.error(p)};function ip(p){_h(p)}function Hh(p){console.error(p)}function vh(p){_h(p)}function Gd(p,v){try{var x=p.onUncaughtError;x(v.value,{componentStack:v.stack})}catch(F){setTimeout(function(){throw F})}}function Wm(p,v,x){try{var F=p.onCaughtError;F(x.value,{componentStack:x.stack,errorBoundary:v.tag===1?v.stateNode:null})}catch(Y){setTimeout(function(){throw Y})}}function Xp(p,v,x){return x=Pf(x),x.tag=3,x.payload={element:null},x.callback=function(){Gd(p,v)},x}function Ym(p){return p=Pf(p),p.tag=3,p}function ky(p,v,x,F){var Y=x.type.getDerivedStateFromError;if(typeof Y=="function"){var se=F.value;p.payload=function(){return Y(se)},p.callback=function(){Wm(v,x,F)}}var Fe=x.stateNode;Fe!==null&&typeof Fe.componentDidCatch=="function"&&(p.callback=function(){Wm(v,x,F),typeof Y!="function"&&(os===null?os=new Set([this]):os.add(this));var ct=F.stack;this.componentDidCatch(F.value,{componentStack:ct!==null?ct:""})})}function aA(p,v,x,F,Y){if(x.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){if(v=x.alternate,v!==null&&cp(v,x,Y,!0),x=zl.current,x!==null){switch(x.tag){case 13:return Hu===null?G0():x.alternate===null&&Vn===0&&(Vn=3),x.flags&=-257,x.flags|=65536,x.lanes=Y,F===dh?x.flags|=16384:(v=x.updateQueue,v===null?x.updateQueue=new Set([F]):v.add(F),A1(p,F,Y)),!1;case 22:return x.flags|=65536,F===dh?x.flags|=16384:(v=x.updateQueue,v===null?(v={transitions:null,markerInstances:null,retryQueue:new Set([F])},x.updateQueue=v):(x=v.retryQueue,x===null?v.retryQueue=new Set([F]):x.add(F)),A1(p,F,Y)),!1}throw Error(r(435,x.tag))}return A1(p,F,Y),G0(),!1}if(_i)return v=zl.current,v!==null?((v.flags&65536)===0&&(v.flags|=256),v.flags|=65536,v.lanes=Y,F!==Xf&&(p=Error(r(422),{cause:F}),Dd(ts(p,x)))):(F!==Xf&&(v=Error(r(423),{cause:F}),Dd(ts(v,x))),p=p.current.alternate,p.flags|=65536,Y&=-Y,p.lanes|=Y,F=ts(F,x),Y=Xp(p.stateNode,F,Y),jy(p,Y),Vn!==4&&(Vn=2)),!1;var se=Error(r(520),{cause:F});if(se=ts(se,x),Cn===null?Cn=[se]:Cn.push(se),Vn!==4&&(Vn=2),v===null)return!0;F=ts(F,x),x=v;do{switch(x.tag){case 3:return x.flags|=65536,p=Y&-Y,x.lanes|=p,p=Xp(x.stateNode,F,p),jy(x,p),!1;case 1:if(v=x.type,se=x.stateNode,(x.flags&128)===0&&(typeof v.getDerivedStateFromError=="function"||se!==null&&typeof se.componentDidCatch=="function"&&(os===null||!os.has(se))))return x.flags|=65536,Y&=-Y,x.lanes|=Y,Y=Ym(Y),ky(Y,p,x,F),jy(x,Y),!1}x=x.return}while(x!==null);return!1}var Jp=Error(r(461)),sl=!1;function yl(p,v,x,F){v.child=p===null?Rf(v,null,x,F):jc(v,p.child,x,F)}function rA(p,v,x,F,Y){x=x.render;var se=v.ref;if("ref"in F){var Fe={};for(var ct in F)ct!=="ref"&&(Fe[ct]=F[ct])}else Fe=F;return Tc(v),F=xi(p,v,x,Fe,se,Y),ct=kn(),p!==null&&!sl?(_n(p,v,Y),Rc(p,v,Y)):(_i&&ct&&Lh(v),v.flags|=1,yl(p,v,F,Y),v.child)}function nA(p,v,x,F,Y){if(p===null){var se=x.type;return typeof se=="function"&&!ua(se)&&se.defaultProps===void 0&&x.compare===null?(v.tag=15,v.type=se,iA(p,v,se,F,Y)):(p=sa(x.type,null,F,v,v.mode,Y),p.ref=v.ref,p.return=v,v.child=p)}if(se=p.child,!ms(p,Y)){var Fe=se.memoizedProps;if(x=x.compare,x=x!==null?x:Pl,x(Fe,F)&&p.ref===v.ref)return Rc(p,v,Y)}return v.flags|=1,p=Ca(se,F),p.ref=v.ref,p.return=v,v.child=p}function iA(p,v,x,F,Y){if(p!==null){var se=p.memoizedProps;if(Pl(se,F)&&p.ref===v.ref)if(sl=!1,v.pendingProps=F=se,ms(p,Y))(p.flags&131072)!==0&&(sl=!0);else return v.lanes=p.lanes,Rc(p,v,Y)}return sp(p,v,x,F,Y)}function Qp(p,v,x){var F=v.pendingProps,Y=F.children,se=(v.stateNode._pendingVisibility&2)!==0,Fe=p!==null?p.memoizedState:null;if(gl(p,v),F.mode==="hidden"||se){if((v.flags&128)!==0){if(F=Fe!==null?Fe.baseLanes|x:x,p!==null){for(Y=v.child=p.child,se=0;Y!==null;)se=se|Y.lanes|Y.childLanes,Y=Y.sibling;v.childLanes=se&~F}else v.childLanes=0,v.child=null;return em(p,v,F,x)}if((x&536870912)!==0)v.memoizedState={baseLanes:0,cachePool:null},p!==null&&Pt(v,Fe!==null?Fe.cachePool:null),Fe!==null?bu(v,Fe):Ld(),Jf(v);else return v.lanes=v.childLanes=536870912,em(p,v,Fe!==null?Fe.baseLanes|x:x,x)}else Fe!==null?(Pt(v,Fe.cachePool),bu(v,Fe),Fd(),v.memoizedState=null):(p!==null&&Pt(v,null),Ld(),Fd());return yl(p,v,Y,x),v.child}function em(p,v,x,F){var Y=Qt();return Y=Y===null?null:{parent:to._currentValue,pool:Y},v.memoizedState={baseLanes:x,cachePool:Y},p!==null&&Pt(v,null),Ld(),Jf(v),p!==null&&cp(p,v,F,!0),null}function gl(p,v){var x=v.ref;if(x===null)p!==null&&p.ref!==null&&(v.flags|=2097664);else{if(typeof x!="function"&&typeof x!="object")throw Error(r(284));(p===null||p.ref!==x)&&(v.flags|=2097664)}}function sp(p,v,x,F,Y){return Tc(v),x=xi(p,v,x,F,void 0,Y),F=kn(),p!==null&&!sl?(_n(p,v,Y),Rc(p,v,Y)):(_i&&F&&Lh(v),v.flags|=1,yl(p,v,x,Y),v.child)}function sA(p,v,x,F,Y,se){return Tc(v),v.updateQueue=null,x=ri(v,F,x,Y),Hn(p),F=kn(),p!==null&&!sl?(_n(p,v,se),Rc(p,v,se)):(_i&&F&&Lh(v),v.flags|=1,yl(p,v,x,se),v.child)}function oA(p,v,x,F,Y){if(Tc(v),v.stateNode===null){var se=Bc,Fe=x.contextType;typeof Fe=="object"&&Fe!==null&&(se=Ks(Fe)),se=new x(F,se),v.memoizedState=se.state!==null&&se.state!==void 0?se.state:null,se.updater=nu,v.stateNode=se,se._reactInternals=v,se=v.stateNode,se.props=F,se.state=v.memoizedState,se.refs={},Rh(v),Fe=x.contextType,se.context=typeof Fe=="object"&&Fe!==null?Ks(Fe):Bc,se.state=v.memoizedState,Fe=x.getDerivedStateFromProps,typeof Fe=="function"&&(Ps(v,x,Fe,F),se.state=v.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof se.getSnapshotBeforeUpdate=="function"||typeof se.UNSAFE_componentWillMount!="function"&&typeof se.componentWillMount!="function"||(Fe=se.state,typeof se.componentWillMount=="function"&&se.componentWillMount(),typeof se.UNSAFE_componentWillMount=="function"&&se.UNSAFE_componentWillMount(),Fe!==se.state&&nu.enqueueReplaceState(se,se.state,null),rm(v,F,se,Y),Th(),se.state=v.memoizedState),typeof se.componentDidMount=="function"&&(v.flags|=4194308),F=!0}else if(p===null){se=v.stateNode;var ct=v.memoizedProps,Ut=zu(x,ct);se.props=Ut;var la=se.context,ja=x.contextType;Fe=Bc,typeof ja=="object"&&ja!==null&&(Fe=Ks(ja));var nr=x.getDerivedStateFromProps;ja=typeof nr=="function"||typeof se.getSnapshotBeforeUpdate=="function",ct=v.pendingProps!==ct,ja||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(ct||la!==Fe)&&$s(v,se,F,Fe),Yu=!1;var xa=v.memoizedState;se.state=xa,rm(v,F,se,Y),Th(),la=v.memoizedState,ct||xa!==la||Yu?(typeof nr=="function"&&(Ps(v,x,nr,F),la=v.memoizedState),(Ut=Yu||Ku(v,x,Ut,F,xa,la,Fe))?(ja||typeof se.UNSAFE_componentWillMount!="function"&&typeof se.componentWillMount!="function"||(typeof se.componentWillMount=="function"&&se.componentWillMount(),typeof se.UNSAFE_componentWillMount=="function"&&se.UNSAFE_componentWillMount()),typeof se.componentDidMount=="function"&&(v.flags|=4194308)):(typeof se.componentDidMount=="function"&&(v.flags|=4194308),v.memoizedProps=F,v.memoizedState=la),se.props=F,se.state=la,se.context=Fe,F=Ut):(typeof se.componentDidMount=="function"&&(v.flags|=4194308),F=!1)}else{se=v.stateNode,dA(p,v),Fe=v.memoizedProps,ja=zu(x,Fe),se.props=ja,nr=v.pendingProps,xa=se.context,la=x.contextType,Ut=Bc,typeof la=="object"&&la!==null&&(Ut=Ks(la)),ct=x.getDerivedStateFromProps,(la=typeof ct=="function"||typeof se.getSnapshotBeforeUpdate=="function")||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(Fe!==nr||xa!==Ut)&&$s(v,se,F,Ut),Yu=!1,xa=v.memoizedState,se.state=xa,rm(v,F,se,Y),Th();var Za=v.memoizedState;Fe!==nr||xa!==Za||Yu||p!==null&&p.dependencies!==null&&xf(p.dependencies)?(typeof ct=="function"&&(Ps(v,x,ct,F),Za=v.memoizedState),(ja=Yu||Ku(v,x,ja,F,xa,Za,Ut)||p!==null&&p.dependencies!==null&&xf(p.dependencies))?(la||typeof se.UNSAFE_componentWillUpdate!="function"&&typeof se.componentWillUpdate!="function"||(typeof se.componentWillUpdate=="function"&&se.componentWillUpdate(F,Za,Ut),typeof se.UNSAFE_componentWillUpdate=="function"&&se.UNSAFE_componentWillUpdate(F,Za,Ut)),typeof se.componentDidUpdate=="function"&&(v.flags|=4),typeof se.getSnapshotBeforeUpdate=="function"&&(v.flags|=1024)):(typeof se.componentDidUpdate!="function"||Fe===p.memoizedProps&&xa===p.memoizedState||(v.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||Fe===p.memoizedProps&&xa===p.memoizedState||(v.flags|=1024),v.memoizedProps=F,v.memoizedState=Za),se.props=F,se.state=Za,se.context=Ut,F=ja):(typeof se.componentDidUpdate!="function"||Fe===p.memoizedProps&&xa===p.memoizedState||(v.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||Fe===p.memoizedProps&&xa===p.memoizedState||(v.flags|=1024),F=!1)}return se=F,gl(p,v),F=(v.flags&128)!==0,se||F?(se=v.stateNode,x=F&&typeof x.getDerivedStateFromError!="function"?null:se.render(),v.flags|=1,p!==null&&F?(v.child=jc(v,p.child,null,Y),v.child=jc(v,null,x,Y)):yl(p,v,x,Y),v.memoizedState=se.state,p=v.child):p=Rc(p,v,Y),p}function U0(p,v,x,F){return kh(),v.flags|=256,yl(p,v,x,F),v.child}var lA={dehydrated:null,treeContext:null,retryLane:0};function Di(p){return{baseLanes:p,cachePool:_a()}}function By(p,v,x){return p=p!==null?p.childLanes&~x:0,v&&(p|=Ws),p}function Gy(p,v,x){var F=v.pendingProps,Y=!1,se=(v.flags&128)!==0,Fe;if((Fe=se)||(Fe=p!==null&&p.memoizedState===null?!1:(Ds.current&2)!==0),Fe&&(Y=!0,v.flags&=-129),Fe=(v.flags&32)!==0,v.flags&=-33,p===null){if(_i){if(Y?qc(v):Fd(),_i){var ct=Hi,Ut;if(Ut=ct){e:{for(Ut=ct,ct=Su;Ut.nodeType!==8;){if(!ct){ct=null;break e}if(Ut=Mu(Ut.nextSibling),Ut===null){ct=null;break e}}ct=Ut}ct!==null?(v.memoizedState={dehydrated:ct,treeContext:Gc!==null?{id:Tu,overflow:Zu}:null,retryLane:536870912},Ut=ra(18,null,null,0),Ut.stateNode=ct,Ut.return=v,v.child=Ut,tl=v,Hi=null,Ut=!0):Ut=!1}Ut||Ac(v)}if(ct=v.memoizedState,ct!==null&&(ct=ct.dehydrated,ct!==null))return ct.data==="$!"?v.lanes=16:v.lanes=536870912,null;Hc(v)}return ct=F.children,F=F.fallback,Y?(Fd(),Y=v.mode,ct=op({mode:"hidden",children:ct},Y),F=zt(F,Y,x,null),ct.return=v,F.return=v,ct.sibling=F,v.child=ct,Y=v.child,Y.memoizedState=Di(x),Y.childLanes=By(p,Fe,x),v.memoizedState=lA,F):(qc(v),uA(v,ct))}if(Ut=p.memoizedState,Ut!==null&&(ct=Ut.dehydrated,ct!==null)){if(se)v.flags&256?(qc(v),v.flags&=-257,v=Xm(p,v,x)):v.memoizedState!==null?(Fd(),v.child=p.child,v.flags|=128,v=null):(Fd(),Y=F.fallback,ct=v.mode,F=op({mode:"visible",children:F.children},ct),Y=zt(Y,ct,x,null),Y.flags|=2,F.return=v,Y.return=v,F.sibling=Y,v.child=F,jc(v,p.child,null,x),F=v.child,F.memoizedState=Di(x),F.childLanes=By(p,Fe,x),v.memoizedState=lA,v=Y);else if(qc(v),ct.data==="$!"){if(Fe=ct.nextSibling&&ct.nextSibling.dataset,Fe)var la=Fe.dgst;Fe=la,F=Error(r(419)),F.stack="",F.digest=Fe,Dd({value:F,source:null,stack:null}),v=Xm(p,v,x)}else if(sl||cp(p,v,x,!1),Fe=(x&p.childLanes)!==0,sl||Fe){if(Fe=Ur,Fe!==null){if(F=x&-x,(F&42)!==0)F=1;else switch(F){case 2:F=1;break;case 8:F=4;break;case 32:F=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:F=64;break;case 268435456:F=134217728;break;default:F=0}if(F=(F&(Fe.suspendedLanes|x))!==0?0:F,F!==0&&F!==Ut.retryLane)throw Ut.retryLane=F,Qo(p,F),Fl(Fe,p,F),Jp}ct.data==="$?"||G0(),v=Xm(p,v,x)}else ct.data==="$?"?(v.flags|=128,v.child=p.child,v=SP.bind(null,p),ct._reactRetry=v,v=null):(p=Ut.treeContext,Hi=Mu(ct.nextSibling),tl=v,_i=!0,au=null,Su=!1,p!==null&&(el[pl++]=Tu,el[pl++]=Zu,el[pl++]=Gc,Tu=p.id,Zu=p.overflow,Gc=v),v=uA(v,F.children),v.flags|=4096);return v}return Y?(Fd(),Y=F.fallback,ct=v.mode,Ut=p.child,la=Ut.sibling,F=Ca(Ut,{mode:"hidden",children:F.children}),F.subtreeFlags=Ut.subtreeFlags&31457280,la!==null?Y=Ca(la,Y):(Y=zt(Y,ct,x,null),Y.flags|=2),Y.return=v,F.return=v,F.sibling=Y,v.child=F,F=Y,Y=v.child,ct=p.child.memoizedState,ct===null?ct=Di(x):(Ut=ct.cachePool,Ut!==null?(la=to._currentValue,Ut=Ut.parent!==la?{parent:la,pool:la}:Ut):Ut=_a(),ct={baseLanes:ct.baseLanes|x,cachePool:Ut}),Y.memoizedState=ct,Y.childLanes=By(p,Fe,x),v.memoizedState=lA,F):(qc(v),x=p.child,p=x.sibling,x=Ca(x,{mode:"visible",children:F.children}),x.return=v,x.sibling=null,p!==null&&(Fe=v.deletions,Fe===null?(v.deletions=[p],v.flags|=16):Fe.push(p)),v.child=x,v.memoizedState=null,x)}function uA(p,v){return v=op({mode:"visible",children:v},p.mode),v.return=p,p.child=v}function op(p,v){return oa(p,v,0,null)}function Xm(p,v,x){return jc(v,p.child,null,x),p=uA(v,v.pendingProps.children),p.flags|=2,v.memoizedState=null,p}function tm(p,v,x){p.lanes|=v;var F=p.alternate;F!==null&&(F.lanes|=v),cA(p.return,v,x)}function am(p,v,x,F,Y){var se=p.memoizedState;se===null?p.memoizedState={isBackwards:v,rendering:null,renderingStartTime:0,last:F,tail:x,tailMode:Y}:(se.isBackwards=v,se.rendering=null,se.renderingStartTime=0,se.last=F,se.tail=x,se.tailMode=Y)}function jd(p,v,x){var F=v.pendingProps,Y=F.revealOrder,se=F.tail;if(yl(p,v,F.children,x),F=Ds.current,(F&2)!==0)F=F&1|2,v.flags|=128;else{if(p!==null&&(p.flags&128)!==0)e:for(p=v.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&tm(p,x,v);else if(p.tag===19)tm(p,x,v);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===v)break e;for(;p.sibling===null;){if(p.return===null||p.return===v)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}F&=1}switch(Ae(Ds,F),Y){case"forwards":for(x=v.child,Y=null;x!==null;)p=x.alternate,p!==null&&Kp(p)===null&&(Y=x),x=x.sibling;x=Y,x===null?(Y=v.child,v.child=null):(Y=x.sibling,x.sibling=null),am(v,!1,Y,x,se);break;case"backwards":for(x=null,Y=v.child,v.child=null;Y!==null;){if(p=Y.alternate,p!==null&&Kp(p)===null){v.child=Y;break}p=Y.sibling,Y.sibling=x,x=Y,Y=p}am(v,!0,x,null,se);break;case"together":am(v,!1,null,null,void 0);break;default:v.memoizedState=null}return v.child}function Rc(p,v,x){if(p!==null&&(v.dependencies=p.dependencies),Wi|=v.lanes,(x&v.childLanes)===0)if(p!==null){if(cp(p,v,x,!1),(x&v.childLanes)===0)return null}else return null;if(p!==null&&v.child!==p.child)throw Error(r(153));if(v.child!==null){for(p=v.child,x=Ca(p,p.pendingProps),v.child=x,x.return=v;p.sibling!==null;)p=p.sibling,x=x.sibling=Ca(p,p.pendingProps),x.return=v;x.sibling=null}return v.child}function ms(p,v){return(p.lanes&v)!==0?!0:(p=p.dependencies,!!(p!==null&&xf(p)))}function Qc(p,v,x){switch(v.tag){case 3:ta(v,v.stateNode.containerInfo),ed(v,to,p.memoizedState.cache),kh();break;case 27:case 5:or(v);break;case 4:ta(v,v.stateNode.containerInfo);break;case 10:ed(v,v.type,v.memoizedProps.value);break;case 13:var F=v.memoizedState;if(F!==null)return F.dehydrated!==null?(qc(v),v.flags|=128,null):(x&v.child.childLanes)!==0?Gy(p,v,x):(qc(v),p=Rc(p,v,x),p!==null?p.sibling:null);qc(v);break;case 19:var Y=(p.flags&128)!==0;if(F=(x&v.childLanes)!==0,F||(cp(p,v,x,!1),F=(x&v.childLanes)!==0),Y){if(F)return jd(p,v,x);v.flags|=128}if(Y=v.memoizedState,Y!==null&&(Y.rendering=null,Y.tail=null,Y.lastEffect=null),Ae(Ds,Ds.current),F)break;return null;case 22:case 23:return v.lanes=0,Qp(p,v,x);case 24:ed(v,to,p.memoizedState.cache)}return Rc(p,v,x)}function lp(p,v,x){if(p!==null)if(p.memoizedProps!==v.pendingProps)sl=!0;else{if(!ms(p,x)&&(v.flags&128)===0)return sl=!1,Qc(p,v,x);sl=(p.flags&131072)!==0}else sl=!1,_i&&(v.flags&1048576)!==0&&qp(v,Ih,v.index);switch(v.lanes=0,v.tag){case 16:e:{p=v.pendingProps;var F=v.elementType,Y=F._init;if(F=Y(F._payload),v.type=F,typeof F=="function")ua(F)?(p=zu(F,p),v.tag=1,v=oA(null,v,F,p,x)):(v.tag=0,v=sp(null,v,F,p,x));else{if(F!=null){if(Y=F.$$typeof,Y===Z){v.tag=11,v=rA(null,v,F,p,x);break e}else if(Y===J){v.tag=14,v=nA(null,v,F,p,x);break e}}throw v=Re(F)||F,Error(r(306,v,""))}}return v;case 0:return sp(p,v,v.type,v.pendingProps,x);case 1:return F=v.type,Y=zu(F,v.pendingProps),oA(p,v,F,Y,x);case 3:e:{if(ta(v,v.stateNode.containerInfo),p===null)throw Error(r(387));var se=v.pendingProps;Y=v.memoizedState,F=Y.element,dA(p,v),rm(v,se,null,x);var Fe=v.memoizedState;if(se=Fe.cache,ed(v,to,se),se!==Y.cache&&Jm(v,[to],x,!0),Th(),se=Fe.element,Y.isDehydrated)if(Y={element:se,isDehydrated:!1,cache:Fe.cache},v.updateQueue.baseState=Y,v.memoizedState=Y,v.flags&256){v=U0(p,v,se,x);break e}else if(se!==F){F=ts(Error(r(424)),v),Dd(F),v=U0(p,v,se,x);break e}else for(Hi=Mu(v.stateNode.containerInfo.firstChild),tl=v,_i=!0,au=null,Su=!0,x=Rf(v,null,se,x),v.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(kh(),se===F){v=Rc(p,v,x);break e}yl(p,v,se,x)}v=v.child}return v;case 26:return gl(p,v),p===null?(x=V1(v.type,null,v.pendingProps,null))?v.memoizedState=x:_i||(x=v.type,p=v.pendingProps,F=eg(Aa.current).createElement(x),F[Kt]=v,F[Ht]=p,Co(F,x,p),Hr(F),v.stateNode=F):v.memoizedState=V1(v.type,p.memoizedProps,v.pendingProps,p.memoizedState),null;case 27:return or(v),p===null&&_i&&(F=v.stateNode=TA(v.type,v.pendingProps,Aa.current),tl=v,Su=!0,Hi=Mu(F.firstChild)),F=v.pendingProps.children,p!==null||_i?yl(p,v,F,x):v.child=jc(v,null,F,x),gl(p,v),v.child;case 5:return p===null&&_i&&((Y=F=Hi)&&(F=VP(F,v.type,v.pendingProps,Su),F!==null?(v.stateNode=F,tl=v,Hi=Mu(F.firstChild),Su=!1,Y=!0):Y=!1),Y||Ac(v)),or(v),Y=v.type,se=v.pendingProps,Fe=p!==null?p.memoizedProps:null,F=se.children,J0(Y,se)?F=null:Fe!==null&&J0(Y,Fe)&&(v.flags|=32),v.memoizedState!==null&&(Y=xi(p,v,$i,null,null,x),ng._currentValue=Y),gl(p,v),yl(p,v,F,x),v.child;case 6:return p===null&&_i&&((p=x=Hi)&&(x=zP(x,v.pendingProps,Su),x!==null?(v.stateNode=x,tl=v,Hi=null,p=!0):p=!1),p||Ac(v)),null;case 13:return Gy(p,v,x);case 4:return ta(v,v.stateNode.containerInfo),F=v.pendingProps,p===null?v.child=jc(v,null,F,x):yl(p,v,F,x),v.child;case 11:return rA(p,v,v.type,v.pendingProps,x);case 7:return yl(p,v,v.pendingProps,x),v.child;case 8:return yl(p,v,v.pendingProps.children,x),v.child;case 12:return yl(p,v,v.pendingProps.children,x),v.child;case 10:return F=v.pendingProps,ed(v,v.type,F.value),yl(p,v,F.children,x),v.child;case 9:return Y=v.type._context,F=v.pendingProps.children,Tc(v),Y=Ks(Y),F=F(Y),v.flags|=1,yl(p,v,F,x),v.child;case 14:return nA(p,v,v.type,v.pendingProps,x);case 15:return iA(p,v,v.type,v.pendingProps,x);case 19:return jd(p,v,x);case 22:return Qp(p,v,x);case 24:return Tc(v),F=Ks(to),p===null?(Y=Qt(),Y===null&&(Y=Ur,se=jh(),Y.pooledCache=se,se.refCount++,se!==null&&(Y.pooledCacheLanes|=x),Y=se),v.memoizedState={parent:F,cache:Y},Rh(v),ed(v,to,Y)):((p.lanes&x)!==0&&(dA(p,v),rm(v,null,null,x),Th()),Y=p.memoizedState,se=v.memoizedState,Y.parent!==F?(Y={parent:F,cache:F},v.memoizedState=Y,v.lanes===0&&(v.memoizedState=v.updateQueue.baseState=Y),ed(v,to,F)):(F=se.cache,ed(v,to,F),F!==Y.cache&&Jm(v,[to],x,!0))),yl(p,v,v.pendingProps.children,x),v.child;case 29:throw v.pendingProps}throw Error(r(156,v.tag))}var up=Rt(null),bf=null,wh=null;function ed(p,v,x){Ae(up,v._currentValue),v._currentValue=x}function Zd(p){p._currentValue=up.current,We(up)}function cA(p,v,x){for(;p!==null;){var F=p.alternate;if((p.childLanes&v)!==v?(p.childLanes|=v,F!==null&&(F.childLanes|=v)):F!==null&&(F.childLanes&v)!==v&&(F.childLanes|=v),p===x)break;p=p.return}}function Jm(p,v,x,F){var Y=p.child;for(Y!==null&&(Y.return=p);Y!==null;){var se=Y.dependencies;if(se!==null){var Fe=Y.child;se=se.firstContext;e:for(;se!==null;){var ct=se;se=Y;for(var Ut=0;Ut<v.length;Ut++)if(ct.context===v[Ut]){se.lanes|=x,ct=se.alternate,ct!==null&&(ct.lanes|=x),cA(se.return,x,p),F||(Fe=null);break e}se=ct.next}}else if(Y.tag===18){if(Fe=Y.return,Fe===null)throw Error(r(341));Fe.lanes|=x,se=Fe.alternate,se!==null&&(se.lanes|=x),cA(Fe,x,p),Fe=null}else Fe=Y.child;if(Fe!==null)Fe.return=Y;else for(Fe=Y;Fe!==null;){if(Fe===p){Fe=null;break}if(Y=Fe.sibling,Y!==null){Y.return=Fe.return,Fe=Y;break}Fe=Fe.return}Y=Fe}}function cp(p,v,x,F){p=null;for(var Y=v,se=!1;Y!==null;){if(!se){if((Y.flags&524288)!==0)se=!0;else if((Y.flags&262144)!==0)break}if(Y.tag===10){var Fe=Y.alternate;if(Fe===null)throw Error(r(387));if(Fe=Fe.memoizedProps,Fe!==null){var ct=Y.type;Os(Y.pendingProps.value,Fe.value)||(p!==null?p.push(ct):p=[ct])}}else if(Y===It.current){if(Fe=Y.alternate,Fe===null)throw Error(r(387));Fe.memoizedState.memoizedState!==Y.memoizedState.memoizedState&&(p!==null?p.push(ng):p=[ng])}Y=Y.return}p!==null&&Jm(v,p,x,F),v.flags|=262144}function xf(p){for(p=p.firstContext;p!==null;){if(!Os(p.context._currentValue,p.memoizedValue))return!0;p=p.next}return!1}function Tc(p){bf=p,wh=null,p=p.dependencies,p!==null&&(p.firstContext=null)}function Ks(p){return $h(bf,p)}function Wu(p,v){return bf===null&&Tc(p),$h(p,v)}function $h(p,v){var x=v._currentValue;if(v={context:v,memoizedValue:x,next:null},wh===null){if(p===null)throw Error(r(308));wh=v,p.dependencies={lanes:0,firstContext:v},p.flags|=524288}else wh=wh.next=v;return x}var Yu=!1;function Rh(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function dA(p,v){p=p.updateQueue,v.updateQueue===p&&(v.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,callbacks:null})}function Pf(p){return{lane:p,tag:0,payload:null,callback:null,next:null}}function Ef(p,v,x){var F=p.updateQueue;if(F===null)return null;if(F=F.shared,(xr&2)!==0){var Y=F.pending;return Y===null?v.next=v:(v.next=Y.next,Y.next=v),F.pending=v,v=tn(p),tu(p,null,x),v}return eu(p,F,v,x),tn(p)}function Nf(p,v,x){if(v=v.updateQueue,v!==null&&(v=v.shared,(x&4194176)!==0)){var F=v.lanes;F&=p.pendingLanes,x|=F,v.lanes=x,yt(p,x)}}function jy(p,v){var x=p.updateQueue,F=p.alternate;if(F!==null&&(F=F.updateQueue,x===F)){var Y=null,se=null;if(x=x.firstBaseUpdate,x!==null){do{var Fe={lane:x.lane,tag:x.tag,payload:x.payload,callback:null,next:null};se===null?Y=se=Fe:se=se.next=Fe,x=x.next}while(x!==null);se===null?Y=se=v:se=se.next=v}else Y=se=v;x={baseState:F.baseState,firstBaseUpdate:Y,lastBaseUpdate:se,shared:F.shared,callbacks:F.callbacks},p.updateQueue=x;return}p=x.lastBaseUpdate,p===null?x.firstBaseUpdate=v:p.next=v,x.lastBaseUpdate=v}var Al=!1;function Th(){if(Al){var p=Ge;if(p!==null)throw p}}function rm(p,v,x,F){Al=!1;var Y=p.updateQueue;Yu=!1;var se=Y.firstBaseUpdate,Fe=Y.lastBaseUpdate,ct=Y.shared.pending;if(ct!==null){Y.shared.pending=null;var Ut=ct,la=Ut.next;Ut.next=null,Fe===null?se=la:Fe.next=la,Fe=Ut;var ja=p.alternate;ja!==null&&(ja=ja.updateQueue,ct=ja.lastBaseUpdate,ct!==Fe&&(ct===null?ja.firstBaseUpdate=la:ct.next=la,ja.lastBaseUpdate=Ut))}if(se!==null){var nr=Y.baseState;Fe=0,ja=la=Ut=null,ct=se;do{var xa=ct.lane&-536870913,Za=xa!==ct.lane;if(Za?(hr&xa)===xa:(F&xa)===xa){xa!==0&&xa===Ne&&(Al=!0),ja!==null&&(ja=ja.next={lane:0,tag:ct.tag,payload:ct.payload,callback:null,next:null});e:{var Yr=p,Qn=ct;xa=v;var Ho=x;switch(Qn.tag){case 1:if(Yr=Qn.payload,typeof Yr=="function"){nr=Yr.call(Ho,nr,xa);break e}nr=Yr;break e;case 3:Yr.flags=Yr.flags&-65537|128;case 0:if(Yr=Qn.payload,xa=typeof Yr=="function"?Yr.call(Ho,nr,xa):Yr,xa==null)break e;nr=De({},nr,xa);break e;case 2:Yu=!0}}xa=ct.callback,xa!==null&&(p.flags|=64,Za&&(p.flags|=8192),Za=Y.callbacks,Za===null?Y.callbacks=[xa]:Za.push(xa))}else Za={lane:xa,tag:ct.tag,payload:ct.payload,callback:ct.callback,next:null},ja===null?(la=ja=Za,Ut=nr):ja=ja.next=Za,Fe|=xa;if(ct=ct.next,ct===null){if(ct=Y.shared.pending,ct===null)break;Za=ct,ct=Za.next,Za.next=null,Y.lastBaseUpdate=Za,Y.shared.pending=null}}while(!0);ja===null&&(Ut=nr),Y.baseState=Ut,Y.firstBaseUpdate=la,Y.lastBaseUpdate=ja,se===null&&(Y.shared.lanes=0),Wi|=Fe,p.lanes=Fe,p.memoizedState=nr}}function hA(p,v){if(typeof p!="function")throw Error(r(191,p));p.call(v)}function dp(p,v){var x=p.callbacks;if(x!==null)for(p.callbacks=null,p=0;p<x.length;p++)hA(x[p],v)}function Vf(p,v){try{var x=v.updateQueue,F=x!==null?x.lastEffect:null;if(F!==null){var Y=F.next;x=Y;do{if((x.tag&p)===p){F=void 0;var se=x.create,Fe=x.inst;F=se(),Fe.destroy=F}x=x.next}while(x!==Y)}}catch(ct){Ms(v,v.return,ct)}}function Go(p,v,x){try{var F=v.updateQueue,Y=F!==null?F.lastEffect:null;if(Y!==null){var se=Y.next;F=se;do{if((F.tag&p)===p){var Fe=F.inst,ct=Fe.destroy;if(ct!==void 0){Fe.destroy=void 0,Y=v;var Ut=x;try{ct()}catch(la){Ms(Y,Ut,la)}}}F=F.next}while(F!==se)}}catch(la){Ms(v,v.return,la)}}function Xu(p){var v=p.updateQueue;if(v!==null){var x=p.stateNode;try{dp(v,x)}catch(F){Ms(p,p.return,F)}}}function hp(p,v,x){x.props=zu(p.type,p.memoizedProps),x.state=p.memoizedState;try{x.componentWillUnmount()}catch(F){Ms(p,v,F)}}function Sc(p,v){try{var x=p.ref;if(x!==null){var F=p.stateNode;switch(p.tag){case 26:case 27:case 5:var Y=F;break;default:Y=F}typeof x=="function"?p.refCleanup=x(Y):x.current=Y}}catch(se){Ms(p,v,se)}}function ol(p,v){var x=p.ref,F=p.refCleanup;if(x!==null)if(typeof F=="function")try{F()}catch(Y){Ms(p,v,Y)}finally{p.refCleanup=null,p=p.alternate,p!=null&&(p.refCleanup=null)}else if(typeof x=="function")try{x(null)}catch(Y){Ms(p,v,Y)}else x.current=null}function Zy(p){var v=p.type,x=p.memoizedProps,F=p.stateNode;try{e:switch(v){case"button":case"input":case"select":case"textarea":x.autoFocus&&F.focus();break e;case"img":x.src?F.src=x.src:x.srcSet&&(F.srcset=x.srcSet)}}catch(Y){Ms(p,p.return,Y)}}function Ln(p,v,x){try{var F=p.stateNode;PP(F,p.type,x,v),F[Ht]=v}catch(Y){Ms(p,p.return,Y)}}function Kh(p){return p.tag===5||p.tag===3||p.tag===26||p.tag===27||p.tag===4}function fA(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||Kh(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==27&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function pA(p,v,x){var F=p.tag;if(F===5||F===6)p=p.stateNode,v?x.nodeType===8?x.parentNode.insertBefore(p,v):x.insertBefore(p,v):(x.nodeType===8?(v=x.parentNode,v.insertBefore(p,x)):(v=x,v.appendChild(p)),x=x._reactRootContainer,x!=null||v.onclick!==null||(v.onclick=Qy));else if(F!==4&&F!==27&&(p=p.child,p!==null))for(pA(p,v,x),p=p.sibling;p!==null;)pA(p,v,x),p=p.sibling}function fp(p,v,x){var F=p.tag;if(F===5||F===6)p=p.stateNode,v?x.insertBefore(p,v):x.appendChild(p);else if(F!==4&&F!==27&&(p=p.child,p!==null))for(fp(p,v,x),p=p.sibling;p!==null;)fp(p,v,x),p=p.sibling}var _l=!1,Pi=!1,jo=!1,Ou=typeof WeakSet=="function"?WeakSet:Set,Ri=null,qy=!1;function Du(p,v){if(p=p.containerInfo,Hd=hm,p=El(p),Ro(p)){if("selectionStart"in p)var x={start:p.selectionStart,end:p.selectionEnd};else e:{x=(x=p.ownerDocument)&&x.defaultView||window;var F=x.getSelection&&x.getSelection();if(F&&F.rangeCount!==0){x=F.anchorNode;var Y=F.anchorOffset,se=F.focusNode;F=F.focusOffset;try{x.nodeType,se.nodeType}catch{x=null;break e}var Fe=0,ct=-1,Ut=-1,la=0,ja=0,nr=p,xa=null;t:for(;;){for(var Za;nr!==x||Y!==0&&nr.nodeType!==3||(ct=Fe+Y),nr!==se||F!==0&&nr.nodeType!==3||(Ut=Fe+F),nr.nodeType===3&&(Fe+=nr.nodeValue.length),(Za=nr.firstChild)!==null;)xa=nr,nr=Za;for(;;){if(nr===p)break t;if(xa===x&&++la===Y&&(ct=Fe),xa===se&&++ja===F&&(Ut=Fe),(Za=nr.nextSibling)!==null)break;nr=xa,xa=nr.parentNode}nr=Za}x=ct===-1||Ut===-1?null:{start:ct,end:Ut}}else x=null}x=x||{start:0,end:0}}else x=null;for(RA={focusedElem:p,selectionRange:x},hm=!1,Ri=v;Ri!==null;)if(v=Ri,p=v.child,(v.subtreeFlags&1028)!==0&&p!==null)p.return=v,Ri=p;else for(;Ri!==null;){switch(v=Ri,se=v.alternate,p=v.flags,v.tag){case 0:break;case 11:case 15:break;case 1:if((p&1024)!==0&&se!==null){p=void 0,x=v,Y=se.memoizedProps,se=se.memoizedState,F=x.stateNode;try{var Yr=zu(x.type,Y,x.elementType===x.type);p=F.getSnapshotBeforeUpdate(Yr,se),F.__reactInternalSnapshotBeforeUpdate=p}catch(Qn){Ms(x,x.return,Qn)}}break;case 3:if((p&1024)!==0){if(p=v.stateNode.containerInfo,x=p.nodeType,x===9)x1(p);else if(x===1)switch(p.nodeName){case"HEAD":case"HTML":case"BODY":x1(p);break;default:p.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((p&1024)!==0)throw Error(r(163))}if(p=v.sibling,p!==null){p.return=v.return,Ri=p;break}Ri=v.return}return Yr=qy,qy=!1,Yr}function mA(p,v,x){var F=x.flags;switch(x.tag){case 0:case 11:case 15:te(p,x),F&4&&Vf(5,x);break;case 1:if(te(p,x),F&4)if(p=x.stateNode,v===null)try{p.componentDidMount()}catch(ct){Ms(x,x.return,ct)}else{var Y=zu(x.type,v.memoizedProps);v=v.memoizedState;try{p.componentDidUpdate(Y,v,p.__reactInternalSnapshotBeforeUpdate)}catch(ct){Ms(x,x.return,ct)}}F&64&&Xu(x),F&512&&Sc(x,x.return);break;case 3:if(te(p,x),F&64&&(F=x.updateQueue,F!==null)){if(p=null,x.child!==null)switch(x.child.tag){case 27:case 5:p=x.child.stateNode;break;case 1:p=x.child.stateNode}try{dp(F,p)}catch(ct){Ms(x,x.return,ct)}}break;case 26:te(p,x),F&512&&Sc(x,x.return);break;case 27:case 5:te(p,x),v===null&&F&4&&Zy(x),F&512&&Sc(x,x.return);break;case 12:te(p,x);break;case 13:te(p,x),F&4&&A(p,x);break;case 22:if(Y=x.memoizedState!==null||_l,!Y){v=v!==null&&v.memoizedState!==null||Pi;var se=_l,Fe=Pi;_l=Y,(Pi=v)&&!Fe?de(p,x,(x.subtreeFlags&8772)!==0):te(p,x),_l=se,Pi=Fe}F&512&&(x.memoizedProps.mode==="manual"?Sc(x,x.return):ol(x,x.return));break;default:te(p,x)}}function Wh(p){var v=p.alternate;v!==null&&(p.alternate=null,Wh(v)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(v=p.stateNode,v!==null&&Gr(v)),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}var Zo=null,g=!1;function o(p,v,x){for(x=x.child;x!==null;)c(p,v,x),x=x.sibling}function c(p,v,x){if(qn&&typeof qn.onCommitFiberUnmount=="function")try{qn.onCommitFiberUnmount(gr,x)}catch{}switch(x.tag){case 26:Pi||ol(x,v),o(p,v,x),x.memoizedState?x.memoizedState.count--:x.stateNode&&(x=x.stateNode,x.parentNode.removeChild(x));break;case 27:Pi||ol(x,v);var F=Zo,Y=g;for(Zo=x.stateNode,o(p,v,x),x=x.stateNode,v=x.attributes;v.length;)x.removeAttributeNode(v[0]);Gr(x),Zo=F,g=Y;break;case 5:Pi||ol(x,v);case 6:Y=Zo;var se=g;if(Zo=null,o(p,v,x),Zo=Y,g=se,Zo!==null)if(g)try{p=Zo,F=x.stateNode,p.nodeType===8?p.parentNode.removeChild(F):p.removeChild(F)}catch(Fe){Ms(x,v,Fe)}else try{Zo.removeChild(x.stateNode)}catch(Fe){Ms(x,v,Fe)}break;case 18:Zo!==null&&(g?(v=Zo,x=x.stateNode,v.nodeType===8?b1(v.parentNode,x):v.nodeType===1&&b1(v,x),VA(v)):b1(Zo,x.stateNode));break;case 4:F=Zo,Y=g,Zo=x.stateNode.containerInfo,g=!0,o(p,v,x),Zo=F,g=Y;break;case 0:case 11:case 14:case 15:Pi||Go(2,x,v),Pi||Go(4,x,v),o(p,v,x);break;case 1:Pi||(ol(x,v),F=x.stateNode,typeof F.componentWillUnmount=="function"&&hp(x,v,F)),o(p,v,x);break;case 21:o(p,v,x);break;case 22:Pi||ol(x,v),Pi=(F=Pi)||x.memoizedState!==null,o(p,v,x),Pi=F;break;default:o(p,v,x)}}function A(p,v){if(v.memoizedState===null&&(p=v.alternate,p!==null&&(p=p.memoizedState,p!==null&&(p=p.dehydrated,p!==null))))try{VA(p)}catch(x){Ms(v,v.return,x)}}function R(p){switch(p.tag){case 13:case 19:var v=p.stateNode;return v===null&&(v=p.stateNode=new Ou),v;case 22:return p=p.stateNode,v=p._retryCache,v===null&&(v=p._retryCache=new Ou),v;default:throw Error(r(435,p.tag))}}function C(p,v){var x=R(p);v.forEach(function(F){var Y=CP.bind(null,p,F);x.has(F)||(x.add(F),F.then(Y,Y))})}function E(p,v){var x=v.deletions;if(x!==null)for(var F=0;F<x.length;F++){var Y=x[F],se=p,Fe=v,ct=Fe;e:for(;ct!==null;){switch(ct.tag){case 27:case 5:Zo=ct.stateNode,g=!1;break e;case 3:Zo=ct.stateNode.containerInfo,g=!0;break e;case 4:Zo=ct.stateNode.containerInfo,g=!0;break e}ct=ct.return}if(Zo===null)throw Error(r(160));c(se,Fe,Y),Zo=null,g=!1,se=Y.alternate,se!==null&&(se.return=null),Y.return=null}if(v.subtreeFlags&13878)for(v=v.child;v!==null;)j(v,p),v=v.sibling}var L=null;function j(p,v){var x=p.alternate,F=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:E(v,p),$(p),F&4&&(Go(3,p,p.return),Vf(3,p),Go(5,p,p.return));break;case 1:E(v,p),$(p),F&512&&(Pi||x===null||ol(x,x.return)),F&64&&_l&&(p=p.updateQueue,p!==null&&(F=p.callbacks,F!==null&&(x=p.shared.hiddenCallbacks,p.shared.hiddenCallbacks=x===null?F:x.concat(F))));break;case 26:var Y=L;if(E(v,p),$(p),F&512&&(Pi||x===null||ol(x,x.return)),F&4){var se=x!==null?x.memoizedState:null;if(F=p.memoizedState,x===null)if(F===null)if(p.stateNode===null){e:{F=p.type,x=p.memoizedProps,Y=Y.ownerDocument||Y;t:switch(F){case"title":se=Y.getElementsByTagName("title")[0],(!se||se[Vr]||se[Kt]||se.namespaceURI==="http://www.w3.org/2000/svg"||se.hasAttribute("itemprop"))&&(se=Y.createElement(F),Y.head.insertBefore(se,Y.querySelector("head > title"))),Co(se,F,x),se[Kt]=p,Hr(se),F=se;break e;case"link":var Fe=z1("link","href",Y).get(F+(x.href||""));if(Fe){for(var ct=0;ct<Fe.length;ct++)if(se=Fe[ct],se.getAttribute("href")===(x.href==null?null:x.href)&&se.getAttribute("rel")===(x.rel==null?null:x.rel)&&se.getAttribute("title")===(x.title==null?null:x.title)&&se.getAttribute("crossorigin")===(x.crossOrigin==null?null:x.crossOrigin)){Fe.splice(ct,1);break t}}se=Y.createElement(F),Co(se,F,x),Y.head.appendChild(se);break;case"meta":if(Fe=z1("meta","content",Y).get(F+(x.content||""))){for(ct=0;ct<Fe.length;ct++)if(se=Fe[ct],se.getAttribute("content")===(x.content==null?null:""+x.content)&&se.getAttribute("name")===(x.name==null?null:x.name)&&se.getAttribute("property")===(x.property==null?null:x.property)&&se.getAttribute("http-equiv")===(x.httpEquiv==null?null:x.httpEquiv)&&se.getAttribute("charset")===(x.charSet==null?null:x.charSet)){Fe.splice(ct,1);break t}}se=Y.createElement(F),Co(se,F,x),Y.head.appendChild(se);break;default:throw Error(r(468,F))}se[Kt]=p,Hr(se),F=se}p.stateNode=F}else O1(Y,p.type,p.stateNode);else p.stateNode=yp(Y,F,p.memoizedProps);else se!==F?(se===null?x.stateNode!==null&&(x=x.stateNode,x.parentNode.removeChild(x)):se.count--,F===null?O1(Y,p.type,p.stateNode):yp(Y,F,p.memoizedProps)):F===null&&p.stateNode!==null&&Ln(p,p.memoizedProps,x.memoizedProps)}break;case 27:if(F&4&&p.alternate===null){Y=p.stateNode,se=p.memoizedProps;try{for(var Ut=Y.firstChild;Ut;){var la=Ut.nextSibling,ja=Ut.nodeName;Ut[Vr]||ja==="HEAD"||ja==="BODY"||ja==="SCRIPT"||ja==="STYLE"||ja==="LINK"&&Ut.rel.toLowerCase()==="stylesheet"||Y.removeChild(Ut),Ut=la}for(var nr=p.type,xa=Y.attributes;xa.length;)Y.removeAttributeNode(xa[0]);Co(Y,nr,se),Y[Kt]=p,Y[Ht]=se}catch(Yr){Ms(p,p.return,Yr)}}case 5:if(E(v,p),$(p),F&512&&(Pi||x===null||ol(x,x.return)),p.flags&32){Y=p.stateNode;try{ku(Y,"")}catch(Yr){Ms(p,p.return,Yr)}}F&4&&p.stateNode!=null&&(Y=p.memoizedProps,Ln(p,Y,x!==null?x.memoizedProps:Y)),F&1024&&(jo=!0);break;case 6:if(E(v,p),$(p),F&4){if(p.stateNode===null)throw Error(r(162));F=p.memoizedProps,x=p.stateNode;try{x.nodeValue=F}catch(Yr){Ms(p,p.return,Yr)}}break;case 3:if(dm=null,Y=L,L=ry(v.containerInfo),E(v,p),L=Y,$(p),F&4&&x!==null&&x.memoizedState.isDehydrated)try{VA(v.containerInfo)}catch(Yr){Ms(p,p.return,Yr)}jo&&(jo=!1,W(p));break;case 4:F=L,L=ry(p.stateNode.containerInfo),E(v,p),$(p),L=F;break;case 12:E(v,p),$(p);break;case 13:E(v,p),$(p),p.child.flags&8192&&p.memoizedState!==null!=(x!==null&&x.memoizedState!==null)&&(oi=ka()),F&4&&(F=p.updateQueue,F!==null&&(p.updateQueue=null,C(p,F)));break;case 22:if(F&512&&(Pi||x===null||ol(x,x.return)),Ut=p.memoizedState!==null,la=x!==null&&x.memoizedState!==null,ja=_l,nr=Pi,_l=ja||Ut,Pi=nr||la,E(v,p),Pi=nr,_l=ja,$(p),v=p.stateNode,v._current=p,v._visibility&=-3,v._visibility|=v._pendingVisibility&2,F&8192&&(v._visibility=Ut?v._visibility&-2:v._visibility|1,Ut&&(v=_l||Pi,x===null||la||v||ae(p)),p.memoizedProps===null||p.memoizedProps.mode!=="manual"))e:for(x=null,v=p;;){if(v.tag===5||v.tag===26||v.tag===27){if(x===null){la=x=v;try{if(Y=la.stateNode,Ut)se=Y.style,typeof se.setProperty=="function"?se.setProperty("display","none","important"):se.display="none";else{Fe=la.stateNode,ct=la.memoizedProps.style;var Za=ct!=null&&ct.hasOwnProperty("display")?ct.display:null;Fe.style.display=Za==null||typeof Za=="boolean"?"":(""+Za).trim()}}catch(Yr){Ms(la,la.return,Yr)}}}else if(v.tag===6){if(x===null){la=v;try{la.stateNode.nodeValue=Ut?"":la.memoizedProps}catch(Yr){Ms(la,la.return,Yr)}}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===p)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===p)break e;for(;v.sibling===null;){if(v.return===null||v.return===p)break e;x===v&&(x=null),v=v.return}x===v&&(x=null),v.sibling.return=v.return,v=v.sibling}F&4&&(F=p.updateQueue,F!==null&&(x=F.retryQueue,x!==null&&(F.retryQueue=null,C(p,x))));break;case 19:E(v,p),$(p),F&4&&(F=p.updateQueue,F!==null&&(p.updateQueue=null,C(p,F)));break;case 21:break;default:E(v,p),$(p)}}function $(p){var v=p.flags;if(v&2){try{if(p.tag!==27){e:{for(var x=p.return;x!==null;){if(Kh(x)){var F=x;break e}x=x.return}throw Error(r(160))}switch(F.tag){case 27:var Y=F.stateNode,se=fA(p);fp(p,se,Y);break;case 5:var Fe=F.stateNode;F.flags&32&&(ku(Fe,""),F.flags&=-33);var ct=fA(p);fp(p,ct,Fe);break;case 3:case 4:var Ut=F.stateNode.containerInfo,la=fA(p);pA(p,la,Ut);break;default:throw Error(r(161))}}}catch(ja){Ms(p,p.return,ja)}p.flags&=-3}v&4096&&(p.flags&=-4097)}function W(p){if(p.subtreeFlags&1024)for(p=p.child;p!==null;){var v=p;W(v),v.tag===5&&v.flags&1024&&v.stateNode.reset(),p=p.sibling}}function te(p,v){if(v.subtreeFlags&8772)for(v=v.child;v!==null;)mA(p,v.alternate,v),v=v.sibling}function ae(p){for(p=p.child;p!==null;){var v=p;switch(v.tag){case 0:case 11:case 14:case 15:Go(4,v,v.return),ae(v);break;case 1:ol(v,v.return);var x=v.stateNode;typeof x.componentWillUnmount=="function"&&hp(v,v.return,x),ae(v);break;case 26:case 27:case 5:ol(v,v.return),ae(v);break;case 22:ol(v,v.return),v.memoizedState===null&&ae(v);break;default:ae(v)}p=p.sibling}}function de(p,v,x){for(x=x&&(v.subtreeFlags&8772)!==0,v=v.child;v!==null;){var F=v.alternate,Y=p,se=v,Fe=se.flags;switch(se.tag){case 0:case 11:case 15:de(Y,se,x),Vf(4,se);break;case 1:if(de(Y,se,x),F=se,Y=F.stateNode,typeof Y.componentDidMount=="function")try{Y.componentDidMount()}catch(la){Ms(F,F.return,la)}if(F=se,Y=F.updateQueue,Y!==null){var ct=F.stateNode;try{var Ut=Y.shared.hiddenCallbacks;if(Ut!==null)for(Y.shared.hiddenCallbacks=null,Y=0;Y<Ut.length;Y++)hA(Ut[Y],ct)}catch(la){Ms(F,F.return,la)}}x&&Fe&64&&Xu(se),Sc(se,se.return);break;case 26:case 27:case 5:de(Y,se,x),x&&F===null&&Fe&4&&Zy(se),Sc(se,se.return);break;case 12:de(Y,se,x);break;case 13:de(Y,se,x),x&&Fe&4&&A(Y,se);break;case 22:se.memoizedState===null&&de(Y,se,x),Sc(se,se.return);break;default:de(Y,se,x)}v=v.sibling}}function Te(p,v){var x=null;p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(x=p.memoizedState.cachePool.pool),p=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(p=v.memoizedState.cachePool.pool),p!==x&&(p!=null&&p.refCount++,x!=null&&G(x))}function ve(p,v){p=null,v.alternate!==null&&(p=v.alternate.memoizedState.cache),v=v.memoizedState.cache,v!==p&&(v.refCount++,p!=null&&G(p))}function Ee(p,v,x,F){if(v.subtreeFlags&10256)for(v=v.child;v!==null;)Ve(p,v,x,F),v=v.sibling}function Ve(p,v,x,F){var Y=v.flags;switch(v.tag){case 0:case 11:case 15:Ee(p,v,x,F),Y&2048&&Vf(9,v);break;case 3:Ee(p,v,x,F),Y&2048&&(p=null,v.alternate!==null&&(p=v.alternate.memoizedState.cache),v=v.memoizedState.cache,v!==p&&(v.refCount++,p!=null&&G(p)));break;case 12:if(Y&2048){Ee(p,v,x,F),p=v.stateNode;try{var se=v.memoizedProps,Fe=se.id,ct=se.onPostCommit;typeof ct=="function"&&ct(Fe,v.alternate===null?"mount":"update",p.passiveEffectDuration,-0)}catch(Ut){Ms(v,v.return,Ut)}}else Ee(p,v,x,F);break;case 23:break;case 22:se=v.stateNode,v.memoizedState!==null?se._visibility&4?Ee(p,v,x,F):et(p,v):se._visibility&4?Ee(p,v,x,F):(se._visibility|=4,Be(p,v,x,F,(v.subtreeFlags&10256)!==0)),Y&2048&&Te(v.alternate,v);break;case 24:Ee(p,v,x,F),Y&2048&&ve(v.alternate,v);break;default:Ee(p,v,x,F)}}function Be(p,v,x,F,Y){for(Y=Y&&(v.subtreeFlags&10256)!==0,v=v.child;v!==null;){var se=p,Fe=v,ct=x,Ut=F,la=Fe.flags;switch(Fe.tag){case 0:case 11:case 15:Be(se,Fe,ct,Ut,Y),Vf(8,Fe);break;case 23:break;case 22:var ja=Fe.stateNode;Fe.memoizedState!==null?ja._visibility&4?Be(se,Fe,ct,Ut,Y):et(se,Fe):(ja._visibility|=4,Be(se,Fe,ct,Ut,Y)),Y&&la&2048&&Te(Fe.alternate,Fe);break;case 24:Be(se,Fe,ct,Ut,Y),Y&&la&2048&&ve(Fe.alternate,Fe);break;default:Be(se,Fe,ct,Ut,Y)}v=v.sibling}}function et(p,v){if(v.subtreeFlags&10256)for(v=v.child;v!==null;){var x=p,F=v,Y=F.flags;switch(F.tag){case 22:et(x,F),Y&2048&&Te(F.alternate,F);break;case 24:et(x,F),Y&2048&&ve(F.alternate,F);break;default:et(x,F)}v=v.sibling}}var Je=8192;function dt(p){if(p.subtreeFlags&Je)for(p=p.child;p!==null;)it(p),p=p.sibling}function it(p){switch(p.tag){case 26:dt(p),p.flags&Je&&p.memoizedState!==null&&yS(L,p.memoizedState,p.memoizedProps);break;case 5:dt(p);break;case 3:case 4:var v=L;L=ry(p.stateNode.containerInfo),dt(p),L=v;break;case 22:p.memoizedState===null&&(v=p.alternate,v!==null&&v.memoizedState!==null?(v=Je,Je=16777216,dt(p),Je=v):dt(p));break;default:dt(p)}}function st(p){var v=p.alternate;if(v!==null&&(p=v.child,p!==null)){v.child=null;do v=p.sibling,p.sibling=null,p=v;while(p!==null)}}function ot(p){var v=p.deletions;if((p.flags&16)!==0){if(v!==null)for(var x=0;x<v.length;x++){var F=v[x];Ri=F,Xt(F,p)}st(p)}if(p.subtreeFlags&10256)for(p=p.child;p!==null;)gt(p),p=p.sibling}function gt(p){switch(p.tag){case 0:case 11:case 15:ot(p),p.flags&2048&&Go(9,p,p.return);break;case 3:ot(p);break;case 12:ot(p);break;case 22:var v=p.stateNode;p.memoizedState!==null&&v._visibility&4&&(p.return===null||p.return.tag!==13)?(v._visibility&=-5,Tt(p)):ot(p);break;default:ot(p)}}function Tt(p){var v=p.deletions;if((p.flags&16)!==0){if(v!==null)for(var x=0;x<v.length;x++){var F=v[x];Ri=F,Xt(F,p)}st(p)}for(p=p.child;p!==null;){switch(v=p,v.tag){case 0:case 11:case 15:Go(8,v,v.return),Tt(v);break;case 22:x=v.stateNode,x._visibility&4&&(x._visibility&=-5,Tt(v));break;default:Tt(v)}p=p.sibling}}function Xt(p,v){for(;Ri!==null;){var x=Ri;switch(x.tag){case 0:case 11:case 15:Go(8,x,v);break;case 23:case 22:if(x.memoizedState!==null&&x.memoizedState.cachePool!==null){var F=x.memoizedState.cachePool.pool;F!=null&&F.refCount++}break;case 24:G(x.memoizedState.cache)}if(F=x.child,F!==null)F.return=x,Ri=F;else e:for(x=p;Ri!==null;){F=Ri;var Y=F.sibling,se=F.return;if(Wh(F),F===x){Ri=null;break e}if(Y!==null){Y.return=se,Ri=Y;break e}Ri=se}}}function Ft(p,v,x,F){this.tag=p,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=v,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=F,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ra(p,v,x,F){return new Ft(p,v,x,F)}function ua(p){return p=p.prototype,!(!p||!p.isReactComponent)}function Ca(p,v){var x=p.alternate;return x===null?(x=ra(p.tag,v,p.key,p.mode),x.elementType=p.elementType,x.type=p.type,x.stateNode=p.stateNode,x.alternate=p,p.alternate=x):(x.pendingProps=v,x.type=p.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=p.flags&31457280,x.childLanes=p.childLanes,x.lanes=p.lanes,x.child=p.child,x.memoizedProps=p.memoizedProps,x.memoizedState=p.memoizedState,x.updateQueue=p.updateQueue,v=p.dependencies,x.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext},x.sibling=p.sibling,x.index=p.index,x.ref=p.ref,x.refCleanup=p.refCleanup,x}function Lt(p,v){p.flags&=31457282;var x=p.alternate;return x===null?(p.childLanes=0,p.lanes=v,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=x.childLanes,p.lanes=x.lanes,p.child=x.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=x.memoizedProps,p.memoizedState=x.memoizedState,p.updateQueue=x.updateQueue,p.type=x.type,v=x.dependencies,p.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext}),p}function sa(p,v,x,F,Y,se){var Fe=0;if(F=p,typeof p=="function")ua(p)&&(Fe=1);else if(typeof p=="string")Fe=mS(p,x,qt.current)?26:p==="html"||p==="head"||p==="body"?27:5;else e:switch(p){case w:return zt(x.children,Y,se,v);case T:Fe=8,Y|=24;break;case P:return p=ra(12,x,v,Y|2),p.elementType=P,p.lanes=se,p;case H:return p=ra(13,x,v,Y),p.elementType=H,p.lanes=se,p;case q:return p=ra(19,x,v,Y),p.elementType=q,p.lanes=se,p;case ce:return oa(x,Y,se,v);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case z:case U:Fe=10;break e;case k:Fe=9;break e;case Z:Fe=11;break e;case J:Fe=14;break e;case re:Fe=16,F=null;break e}Fe=29,x=Error(r(130,p===null?"null":typeof p,"")),F=null}return v=ra(Fe,x,v,Y),v.elementType=p,v.type=F,v.lanes=se,v}function zt(p,v,x,F){return p=ra(7,p,F,v),p.lanes=x,p}function oa(p,v,x,F){p=ra(22,p,F,v),p.elementType=ce,p.lanes=x;var Y={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var se=Y._current;if(se===null)throw Error(r(456));if((Y._pendingVisibility&2)===0){var Fe=Qo(se,2);Fe!==null&&(Y._pendingVisibility|=2,Fl(Fe,se,2))}},attach:function(){var se=Y._current;if(se===null)throw Error(r(456));if((Y._pendingVisibility&2)!==0){var Fe=Qo(se,2);Fe!==null&&(Y._pendingVisibility&=-3,Fl(Fe,se,2))}}};return p.stateNode=Y,p}function ea(p,v,x){return p=ra(6,p,null,v),p.lanes=x,p}function da(p,v,x){return v=ra(4,p.children!==null?p.children:[],p.key,v),v.lanes=x,v.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},v}function Wt(p){p.flags|=4}function pa(p,v){if(v.type!=="stylesheet"||(v.state.loading&4)!==0)p.flags&=-16777217;else if(p.flags|=16777216,!D1(v)){if(v=zl.current,v!==null&&((hr&4194176)===hr?Hu!==null:(hr&62914560)!==hr&&(hr&536870912)===0||v!==Hu))throw Cu=dh,Zm;p.flags|=8192}}function Ia(p,v){v!==null&&(p.flags|=4),p.flags&16384&&(v=p.tag!==22?Jt():536870912,p.lanes|=v,mo|=v)}function La(p,v){if(!_i)switch(p.tailMode){case"hidden":v=p.tail;for(var x=null;v!==null;)v.alternate!==null&&(x=v),v=v.sibling;x===null?p.tail=null:x.sibling=null;break;case"collapsed":x=p.tail;for(var F=null;x!==null;)x.alternate!==null&&(F=x),x=x.sibling;F===null?v||p.tail===null?p.tail=null:p.tail.sibling=null:F.sibling=null}}function Ea(p){var v=p.alternate!==null&&p.alternate.child===p.child,x=0,F=0;if(v)for(var Y=p.child;Y!==null;)x|=Y.lanes|Y.childLanes,F|=Y.subtreeFlags&31457280,F|=Y.flags&31457280,Y.return=p,Y=Y.sibling;else for(Y=p.child;Y!==null;)x|=Y.lanes|Y.childLanes,F|=Y.subtreeFlags,F|=Y.flags,Y.return=p,Y=Y.sibling;return p.subtreeFlags|=F,p.childLanes=x,v}function sr(p,v,x){var F=v.pendingProps;switch(Fh(v),v.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ea(v),null;case 1:return Ea(v),null;case 3:return x=v.stateNode,F=null,p!==null&&(F=p.memoizedState.cache),v.memoizedState.cache!==F&&(v.flags|=2048),Zd(to),vt(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(p===null||p.child===null)&&(Uh(v)?Wt(v):p===null||p.memoizedState.isDehydrated&&(v.flags&256)===0||(v.flags|=1024,au!==null&&(nm(au),au=null))),Ea(v),null;case 26:return x=v.memoizedState,p===null?(Wt(v),x!==null?(Ea(v),pa(v,x)):(Ea(v),v.flags&=-16777217)):x?x!==p.memoizedState?(Wt(v),Ea(v),pa(v,x)):(Ea(v),v.flags&=-16777217):(p.memoizedProps!==F&&Wt(v),Ea(v),v.flags&=-16777217),null;case 27:Na(v),x=Aa.current;var Y=v.type;if(p!==null&&v.stateNode!=null)p.memoizedProps!==F&&Wt(v);else{if(!F){if(v.stateNode===null)throw Error(r(166));return Ea(v),null}p=qt.current,Uh(v)?vf(v):(p=TA(Y,F,x),v.stateNode=p,Wt(v))}return Ea(v),null;case 5:if(Na(v),x=v.type,p!==null&&v.stateNode!=null)p.memoizedProps!==F&&Wt(v);else{if(!F){if(v.stateNode===null)throw Error(r(166));return Ea(v),null}if(p=qt.current,Uh(v))vf(v);else{switch(Y=eg(Aa.current),p){case 1:p=Y.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:p=Y.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":p=Y.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":p=Y.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":p=Y.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof F.is=="string"?Y.createElement("select",{is:F.is}):Y.createElement("select"),F.multiple?p.multiple=!0:F.size&&(p.size=F.size);break;default:p=typeof F.is=="string"?Y.createElement(x,{is:F.is}):Y.createElement(x)}}p[Kt]=v,p[Ht]=F;e:for(Y=v.child;Y!==null;){if(Y.tag===5||Y.tag===6)p.appendChild(Y.stateNode);else if(Y.tag!==4&&Y.tag!==27&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===v)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===v)break e;Y=Y.return}Y.sibling.return=Y.return,Y=Y.sibling}v.stateNode=p;e:switch(Co(p,x,F),x){case"button":case"input":case"select":case"textarea":p=!!F.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&Wt(v)}}return Ea(v),v.flags&=-16777217,null;case 6:if(p&&v.stateNode!=null)p.memoizedProps!==F&&Wt(v);else{if(typeof F!="string"&&v.stateNode===null)throw Error(r(166));if(p=Aa.current,Uh(v)){if(p=v.stateNode,x=v.memoizedProps,F=null,Y=tl,Y!==null)switch(Y.tag){case 27:case 5:F=Y.memoizedProps}p[Kt]=v,p=!!(p.nodeValue===x||F!==null&&F.suppressHydrationWarning===!0||Df(p.nodeValue,x)),p||Ac(v)}else p=eg(p).createTextNode(F),p[Kt]=v,v.stateNode=p}return Ea(v),null;case 13:if(F=v.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(Y=Uh(v),F!==null&&F.dehydrated!==null){if(p===null){if(!Y)throw Error(r(318));if(Y=v.memoizedState,Y=Y!==null?Y.dehydrated:null,!Y)throw Error(r(317));Y[Kt]=v}else kh(),(v.flags&128)===0&&(v.memoizedState=null),v.flags|=4;Ea(v),Y=!1}else au!==null&&(nm(au),au=null),Y=!0;if(!Y)return v.flags&256?(Hc(v),v):(Hc(v),null)}if(Hc(v),(v.flags&128)!==0)return v.lanes=x,v;if(x=F!==null,p=p!==null&&p.memoizedState!==null,x){F=v.child,Y=null,F.alternate!==null&&F.alternate.memoizedState!==null&&F.alternate.memoizedState.cachePool!==null&&(Y=F.alternate.memoizedState.cachePool.pool);var se=null;F.memoizedState!==null&&F.memoizedState.cachePool!==null&&(se=F.memoizedState.cachePool.pool),se!==Y&&(F.flags|=2048)}return x!==p&&x&&(v.child.flags|=8192),Ia(v,v.updateQueue),Ea(v),null;case 4:return vt(),p===null&&W0(v.stateNode.containerInfo),Ea(v),null;case 10:return Zd(v.type),Ea(v),null;case 19:if(We(Ds),Y=v.memoizedState,Y===null)return Ea(v),null;if(F=(v.flags&128)!==0,se=Y.rendering,se===null)if(F)La(Y,!1);else{if(Vn!==0||p!==null&&(p.flags&128)!==0)for(p=v.child;p!==null;){if(se=Kp(p),se!==null){for(v.flags|=128,La(Y,!1),p=se.updateQueue,v.updateQueue=p,Ia(v,p),v.subtreeFlags=0,p=x,x=v.child;x!==null;)Lt(x,p),x=x.sibling;return Ae(Ds,Ds.current&1|2),v.child}p=p.sibling}Y.tail!==null&&ka()>yo&&(v.flags|=128,F=!0,La(Y,!1),v.lanes=4194304)}else{if(!F)if(p=Kp(se),p!==null){if(v.flags|=128,F=!0,p=p.updateQueue,v.updateQueue=p,Ia(v,p),La(Y,!0),Y.tail===null&&Y.tailMode==="hidden"&&!se.alternate&&!_i)return Ea(v),null}else 2*ka()-Y.renderingStartTime>yo&&x!==536870912&&(v.flags|=128,F=!0,La(Y,!1),v.lanes=4194304);Y.isBackwards?(se.sibling=v.child,v.child=se):(p=Y.last,p!==null?p.sibling=se:v.child=se,Y.last=se)}return Y.tail!==null?(v=Y.tail,Y.rendering=v,Y.tail=v.sibling,Y.renderingStartTime=ka(),v.sibling=null,p=Ds.current,Ae(Ds,F?p&1|2:p&1),v):(Ea(v),null);case 22:case 23:return Hc(v),Zc(),F=v.memoizedState!==null,p!==null?p.memoizedState!==null!==F&&(v.flags|=8192):F&&(v.flags|=8192),F?(x&536870912)!==0&&(v.flags&128)===0&&(Ea(v),v.subtreeFlags&6&&(v.flags|=8192)):Ea(v),x=v.updateQueue,x!==null&&Ia(v,x.retryQueue),x=null,p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(x=p.memoizedState.cachePool.pool),F=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(F=v.memoizedState.cachePool.pool),F!==x&&(v.flags|=2048),p!==null&&We(Ct),null;case 24:return x=null,p!==null&&(x=p.memoizedState.cache),v.memoizedState.cache!==x&&(v.flags|=2048),Zd(to),Ea(v),null;case 25:return null}throw Error(r(156,v.tag))}function Fr(p,v){switch(Fh(v),v.tag){case 1:return p=v.flags,p&65536?(v.flags=p&-65537|128,v):null;case 3:return Zd(to),vt(),p=v.flags,(p&65536)!==0&&(p&128)===0?(v.flags=p&-65537|128,v):null;case 26:case 27:case 5:return Na(v),null;case 13:if(Hc(v),p=v.memoizedState,p!==null&&p.dehydrated!==null){if(v.alternate===null)throw Error(r(340));kh()}return p=v.flags,p&65536?(v.flags=p&-65537|128,v):null;case 19:return We(Ds),null;case 4:return vt(),null;case 10:return Zd(v.type),null;case 22:case 23:return Hc(v),Zc(),p!==null&&We(Ct),p=v.flags,p&65536?(v.flags=p&-65537|128,v):null;case 24:return Zd(to),null;case 25:return null;default:return null}}function mr(p,v){switch(Fh(v),v.tag){case 3:Zd(to),vt();break;case 26:case 27:case 5:Na(v);break;case 4:vt();break;case 13:Hc(v);break;case 19:We(Ds);break;case 10:Zd(v.type);break;case 22:case 23:Hc(v),Zc(),p!==null&&We(Ct);break;case 24:Zd(to)}}var Or={getCacheForType:function(p){var v=Ks(to),x=v.data.get(p);return x===void 0&&(x=p(),v.data.set(p,x)),x}},Cr=typeof WeakMap=="function"?WeakMap:Map,xr=0,Ur=null,Ir=null,hr=0,nn=0,Tr=null,tr=!1,sn=!1,$n=!1,cn=0,Vn=0,Wi=0,hs=0,ro=0,Ws=0,mo=0,Cn=null,ii=null,On=!1,oi=0,yo=1/0,Ti=null,os=null,Cc=!1,qo=null,iu=0,Ll=0,Ju=null,vl=0,qd=null;function go(){if((xr&2)!==0&&hr!==0)return hr&-hr;if(be.T!==null){var p=Ne;return p!==0?p:AA()}return Bt()}function Sh(){Ws===0&&(Ws=(hr&536870912)===0||_i?Us():536870912);var p=zl.current;return p!==null&&(p.flags|=32),Ws}function Fl(p,v,x){(p===Ur&&nn===2||p.cancelPendingCommit!==null)&&(Qm(p,0),mp(p,hr,Ws,!1)),Oe(p,x),((xr&2)===0||p!==Ur)&&(p===Ur&&((xr&2)===0&&(hs|=x),Vn===4&&mp(p,hr,Ws,!1)),Yh(p))}function pp(p,v,x){if((xr&6)!==0)throw Error(r(327));var F=!x&&(v&60)===0&&(v&p.expiredLanes)===0||ui(p,v),Y=F?im(p,v):j0(p,v,!0),se=F;do{if(Y===0){sn&&!F&&mp(p,v,0,!1);break}else if(Y===6)mp(p,v,0,!tr);else{if(x=p.current.alternate,se&&!WT(x)){Y=j0(p,v,!1),se=!1;continue}if(Y===2){if(se=v,p.errorRecoveryDisabledLanes&se)var Fe=0;else Fe=p.pendingLanes&-536870913,Fe=Fe!==0?Fe:Fe&536870912?536870912:0;if(Fe!==0){v=Fe;e:{var ct=p;Y=Cn;var Ut=ct.current.memoizedState.isDehydrated;if(Ut&&(Qm(ct,Fe).flags|=256),Fe=j0(ct,Fe,!1),Fe!==2){if($n&&!Ut){ct.errorRecoveryDisabledLanes|=se,hs|=se,Y=4;break e}se=ii,ii=Y,se!==null&&nm(se)}Y=Fe}if(se=!1,Y!==2)continue}}if(Y===1){Qm(p,0),mp(p,v,0,!0);break}e:{switch(F=p,Y){case 0:case 1:throw Error(r(345));case 4:if((v&4194176)===v){mp(F,v,Ws,!tr);break e}break;case 2:ii=null;break;case 3:case 5:break;default:throw Error(r(329))}if(F.finishedWork=x,F.finishedLanes=v,(v&62914560)===v&&(se=oi+300-ka(),10<se)){if(mp(F,v,Ws,!tr),fn(F,0)!==0)break e;F.timeoutHandle=Xh(Hy.bind(null,F,x,ii,Ti,On,v,Ws,hs,mo,tr,2,-0,0),se);break e}Hy(F,x,ii,Ti,On,v,Ws,hs,mo,tr,0,-0,0)}}break}while(!0);Yh(p)}function nm(p){ii===null?ii=p:ii.push.apply(ii,p)}function Hy(p,v,x,F,Y,se,Fe,ct,Ut,la,ja,nr,xa){var Za=v.subtreeFlags;if((Za&8192||(Za&16785408)===16785408)&&(CA={stylesheets:null,count:0,unsuspend:MP},it(v),v=a_(),v!==null)){p.cancelPendingCommit=v(XT.bind(null,p,x,F,Y,Fe,ct,Ut,1,nr,xa)),mp(p,se,Fe,!la);return}XT(p,x,F,Y,Fe,ct,Ut,ja,nr,xa)}function WT(p){for(var v=p;;){var x=v.tag;if((x===0||x===11||x===15)&&v.flags&16384&&(x=v.updateQueue,x!==null&&(x=x.stores,x!==null)))for(var F=0;F<x.length;F++){var Y=x[F],se=Y.getSnapshot;Y=Y.value;try{if(!Os(se(),Y))return!1}catch{return!1}}if(x=v.child,v.subtreeFlags&16384&&x!==null)x.return=v,v=x;else{if(v===p)break;for(;v.sibling===null;){if(v.return===null||v.return===p)return!0;v=v.return}v.sibling.return=v.return,v=v.sibling}}return!0}function mp(p,v,x,F){v&=~ro,v&=~hs,p.suspendedLanes|=v,p.pingedLanes&=~v,F&&(p.warmLanes|=v),F=p.expirationTimes;for(var Y=v;0<Y;){var se=31-en(Y),Fe=1<<se;F[se]=-1,Y&=~Fe}x!==0&&_t(p,x,v)}function k0(){return(xr&6)===0?(om(0),!1):!0}function B0(){if(Ir!==null){if(nn===0)var p=Ir.return;else p=Ir,wh=bf=null,ds(p),Bh=null,ml=0,p=Ir;for(;p!==null;)mr(p.alternate,p),p=p.return;Ir=null}}function Qm(p,v){p.finishedWork=null,p.finishedLanes=0;var x=p.timeoutHandle;x!==-1&&(p.timeoutHandle=-1,sS(x)),x=p.cancelPendingCommit,x!==null&&(p.cancelPendingCommit=null,x()),B0(),Ur=p,Ir=x=Ca(p.current,null),hr=v,nn=0,Tr=null,tr=!1,sn=ui(p,v),$n=!1,mo=Ws=ro=hs=Wi=Vn=0,ii=Cn=null,On=!1,(v&8)!==0&&(v|=v&32);var F=p.entangledLanes;if(F!==0)for(p=p.entanglements,F&=v;0<F;){var Y=31-en(F),se=1<<Y;v|=p[Y],F&=~se}return cn=v,is(),x}function h1(p,v){Ra=null,be.H=Vu,v===wf?(v=Fy(),nn=3):v===Zm?(v=Fy(),nn=4):nn=v===Jp?8:v!==null&&typeof v=="object"&&typeof v.then=="function"?6:1,Tr=v,Ir===null&&(Vn=1,Gd(p,ts(v,p.current)))}function f1(){var p=be.H;return be.H=Vu,p===null?Vu:p}function p1(){var p=be.A;return be.A=Or,p}function G0(){Vn=4,tr||(hr&4194176)!==hr&&zl.current!==null||(sn=!0),(Wi&134217727)===0&&(hs&134217727)===0||Ur===null||mp(Ur,hr,Ws,!1)}function j0(p,v,x){var F=xr;xr|=2;var Y=f1(),se=p1();(Ur!==p||hr!==v)&&(Ti=null,Qm(p,v)),v=!1;var Fe=Vn;e:do try{if(nn!==0&&Ir!==null){var ct=Ir,Ut=Tr;switch(nn){case 8:B0(),Fe=6;break e;case 3:case 2:case 6:zl.current===null&&(v=!0);var la=nn;if(nn=0,Tr=null,Ky(p,ct,Ut,la),x&&sn){Fe=0;break e}break;default:la=nn,nn=0,Tr=null,Ky(p,ct,Ut,la)}}m1(),Fe=Vn;break}catch(ja){h1(p,ja)}while(!0);return v&&p.shellSuspendCounter++,wh=bf=null,xr=F,be.H=Y,be.A=se,Ir===null&&(Ur=null,hr=0,is()),Fe}function m1(){for(;Ir!==null;)y1(Ir)}function im(p,v){var x=xr;xr|=2;var F=f1(),Y=p1();Ur!==p||hr!==v?(Ti=null,yo=ka()+500,Qm(p,v)):sn=ui(p,v);e:do try{if(nn!==0&&Ir!==null){v=Ir;var se=Tr;t:switch(nn){case 1:nn=0,Tr=null,Ky(p,v,se,1);break;case 2:if(Ly(se)){nn=0,Tr=null,$y(v);break}v=function(){nn===2&&Ur===p&&(nn=7),Yh(p)},se.then(v,v);break e;case 3:nn=7;break e;case 4:nn=5;break e;case 7:Ly(se)?(nn=0,Tr=null,$y(v)):(nn=0,Tr=null,Ky(p,v,se,7));break;case 5:var Fe=null;switch(Ir.tag){case 26:Fe=Ir.memoizedState;case 5:case 27:var ct=Ir;if(!Fe||D1(Fe)){nn=0,Tr=null;var Ut=ct.sibling;if(Ut!==null)Ir=Ut;else{var la=ct.return;la!==null?(Ir=la,Z0(la)):Ir=null}break t}}nn=0,Tr=null,Ky(p,v,se,5);break;case 6:nn=0,Tr=null,Ky(p,v,se,6);break;case 8:B0(),Vn=6;break e;default:throw Error(r(462))}}wl();break}catch(ja){h1(p,ja)}while(!0);return wh=bf=null,be.H=F,be.A=Y,xr=x,Ir!==null?0:(Ur=null,hr=0,is(),Vn)}function wl(){for(;Ir!==null&&!cr();)y1(Ir)}function y1(p){var v=lp(p.alternate,p,cn);p.memoizedProps=p.pendingProps,v===null?Z0(p):Ir=v}function $y(p){var v=p,x=v.alternate;switch(v.tag){case 15:case 0:v=sA(x,v,v.pendingProps,v.type,void 0,hr);break;case 11:v=sA(x,v,v.pendingProps,v.type.render,v.ref,hr);break;case 5:ds(v);default:mr(x,v),v=Ir=Lt(v,cn),v=lp(x,v,cn)}p.memoizedProps=p.pendingProps,v===null?Z0(p):Ir=v}function Ky(p,v,x,F){wh=bf=null,ds(v),Bh=null,ml=0;var Y=v.return;try{if(aA(p,Y,v,x,hr)){Vn=1,Gd(p,ts(x,p.current)),Ir=null;return}}catch(se){if(Y!==null)throw Ir=Y,se;Vn=1,Gd(p,ts(x,p.current)),Ir=null;return}v.flags&32768?(_i||F===1?p=!0:sn||(hr&536870912)!==0?p=!1:(tr=p=!0,(F===2||F===3||F===6)&&(F=zl.current,F!==null&&F.tag===13&&(F.flags|=16384))),YT(v,p)):Z0(v)}function Z0(p){var v=p;do{if((v.flags&32768)!==0){YT(v,tr);return}p=v.return;var x=sr(v.alternate,v,cn);if(x!==null){Ir=x;return}if(v=v.sibling,v!==null){Ir=v;return}Ir=v=p}while(v!==null);Vn===0&&(Vn=5)}function YT(p,v){do{var x=Fr(p.alternate,p);if(x!==null){x.flags&=32767,Ir=x;return}if(x=p.return,x!==null&&(x.flags|=32768,x.subtreeFlags=0,x.deletions=null),!v&&(p=p.sibling,p!==null)){Ir=p;return}Ir=p=x}while(p!==null);Vn=6,Ir=null}function XT(p,v,x,F,Y,se,Fe,ct,Ut,la){var ja=be.T,nr=$e.p;try{$e.p=2,be.T=null,yA(p,v,x,F,nr,Y,se,Fe,ct,Ut,la)}finally{be.T=ja,$e.p=nr}}function yA(p,v,x,F,Y,se,Fe,ct){do Ch();while(qo!==null);if((xr&6)!==0)throw Error(r(327));var Ut=p.finishedWork;if(F=p.finishedLanes,Ut===null)return null;if(p.finishedWork=null,p.finishedLanes=0,Ut===p.current)throw Error(r(177));p.callbackNode=null,p.callbackPriority=0,p.cancelPendingCommit=null;var la=Ut.lanes|Ut.childLanes;if(la|=qi,rt(p,F,la,se,Fe,ct),p===Ur&&(Ir=Ur=null,hr=0),(Ut.subtreeFlags&10256)===0&&(Ut.flags&10256)===0||Cc||(Cc=!0,Ll=la,Ju=x,bP(Rn,function(){return Ch(),null})),x=(Ut.flags&15990)!==0,(Ut.subtreeFlags&15990)!==0||x?(x=be.T,be.T=null,se=$e.p,$e.p=2,Fe=xr,xr|=4,Du(p,Ut),j(Ut,p),Ed(RA,p.containerInfo),hm=!!Hd,RA=Hd=null,p.current=Ut,mA(p,Ut.alternate,Ut),Pr(),xr=Fe,$e.p=se,be.T=x):p.current=Ut,Cc?(Cc=!1,qo=p,iu=F):g1(p,la),la=p.pendingLanes,la===0&&(os=null),Mn(Ut.stateNode),Yh(p),v!==null)for(Y=p.onRecoverableError,Ut=0;Ut<v.length;Ut++)la=v[Ut],Y(la.value,{componentStack:la.stack});return(iu&3)!==0&&Ch(),la=p.pendingLanes,(F&4194218)!==0&&(la&42)!==0?p===qd?vl++:(vl=0,qd=p):vl=0,om(0),null}function g1(p,v){(p.pooledCacheLanes&=v)===0&&(v=p.pooledCache,v!=null&&(p.pooledCache=null,G(v)))}function Ch(){if(qo!==null){var p=qo,v=Ll;Ll=0;var x=bt(iu),F=be.T,Y=$e.p;try{if($e.p=32>x?32:x,be.T=null,qo===null)var se=!1;else{x=Ju,Ju=null;var Fe=qo,ct=iu;if(qo=null,iu=0,(xr&6)!==0)throw Error(r(331));var Ut=xr;if(xr|=4,gt(Fe.current),Ve(Fe,Fe.current,ct,x),xr=Ut,om(0,!1),qn&&typeof qn.onPostCommitFiberRoot=="function")try{qn.onPostCommitFiberRoot(gr,Fe)}catch{}se=!0}return se}finally{$e.p=Y,be.T=F,g1(p,v)}}return!1}function Wy(p,v,x){v=ts(x,v),v=Xp(p.stateNode,v,2),p=Ef(p,v,2),p!==null&&(Oe(p,2),Yh(p))}function Ms(p,v,x){if(p.tag===3)Wy(p,p,x);else for(;v!==null;){if(v.tag===3){Wy(v,p,x);break}else if(v.tag===1){var F=v.stateNode;if(typeof v.type.getDerivedStateFromError=="function"||typeof F.componentDidCatch=="function"&&(os===null||!os.has(F))){p=ts(x,p),x=Ym(2),F=Ef(v,x,2),F!==null&&(ky(x,F,v,p),Oe(F,2),Yh(F));break}}v=v.return}}function A1(p,v,x){var F=p.pingCache;if(F===null){F=p.pingCache=new Cr;var Y=new Set;F.set(v,Y)}else Y=F.get(v),Y===void 0&&(Y=new Set,F.set(v,Y));Y.has(x)||($n=!0,Y.add(x),p=TP.bind(null,p,v,x),v.then(p,p))}function TP(p,v,x){var F=p.pingCache;F!==null&&F.delete(v),p.pingedLanes|=p.suspendedLanes&x,p.warmLanes&=~x,Ur===p&&(hr&x)===x&&(Vn===4||Vn===3&&(hr&62914560)===hr&&300>ka()-oi?(xr&2)===0&&Qm(p,0):ro|=x,mo===hr&&(mo=0)),Yh(p)}function JT(p,v){v===0&&(v=Jt()),p=Qo(p,v),p!==null&&(Oe(p,v),Yh(p))}function SP(p){var v=p.memoizedState,x=0;v!==null&&(x=v.retryLane),JT(p,x)}function CP(p,v){var x=0;switch(p.tag){case 13:var F=p.stateNode,Y=p.memoizedState;Y!==null&&(x=Y.retryLane);break;case 19:F=p.stateNode;break;case 22:F=p.stateNode._retryCache;break;default:throw Error(r(314))}F!==null&&F.delete(v),JT(p,x)}function bP(p,v){return er(p,v)}var Yy=null,Xy=null,sm=!1,q0=!1,no=!1,zf=0;function Yh(p){p!==Xy&&p.next===null&&(Xy===null?Yy=Xy=p:Xy=Xy.next=p),q0=!0,sm||(sm=!0,gA(H0))}function om(p,v){if(!no&&q0){no=!0;do for(var x=!1,F=Yy;F!==null;){if(p!==0){var Y=F.pendingLanes;if(Y===0)var se=0;else{var Fe=F.suspendedLanes,ct=F.pingedLanes;se=(1<<31-en(42|p)+1)-1,se&=Y&~(Fe&~ct),se=se&201326677?se&201326677|1:se?se|2:0}se!==0&&(x=!0,v1(F,se))}else se=hr,se=fn(F,F===Ur?se:0),(se&3)===0||ui(F,se)||(x=!0,v1(F,se));F=F.next}while(x);no=!1}}function H0(){q0=sm=!1;var p=0;zf!==0&&(C1()&&(p=zf),zf=0);for(var v=ka(),x=null,F=Yy;F!==null;){var Y=F.next,se=Jy(F,v);se===0?(F.next=null,x===null?Yy=Y:x.next=Y,Y===null&&(Xy=x)):(x=F,(p!==0||(se&3)!==0)&&(q0=!0)),F=Y}om(p)}function Jy(p,v){for(var x=p.suspendedLanes,F=p.pingedLanes,Y=p.expirationTimes,se=p.pendingLanes&-62914561;0<se;){var Fe=31-en(se),ct=1<<Fe,Ut=Y[Fe];Ut===-1?((ct&x)===0||(ct&F)!==0)&&(Y[Fe]=Vc(ct,v)):Ut<=v&&(p.expiredLanes|=ct),se&=~ct}if(v=Ur,x=hr,x=fn(p,p===v?x:0),F=p.callbackNode,x===0||p===v&&nn===2||p.cancelPendingCommit!==null)return F!==null&&F!==null&&dr(F),p.callbackNode=null,p.callbackPriority=0;if((x&3)===0||ui(p,x)){if(v=x&-x,v===p.callbackPriority)return v;switch(F!==null&&dr(F),bt(x)){case 2:case 8:x=Dn;break;case 32:x=Rn;break;case 268435456:x=Wa;break;default:x=Rn}return F=_1.bind(null,p),x=er(x,F),p.callbackPriority=v,p.callbackNode=x,v}return F!==null&&F!==null&&dr(F),p.callbackPriority=2,p.callbackNode=null,2}function _1(p,v){var x=p.callbackNode;if(Ch()&&p.callbackNode!==x)return null;var F=hr;return F=fn(p,p===Ur?F:0),F===0?null:(pp(p,F,v),Jy(p,ka()),p.callbackNode!=null&&p.callbackNode===x?_1.bind(null,p):null)}function v1(p,v){if(Ch())return null;pp(p,v,!0)}function gA(p){EP(function(){(xr&6)!==0?er(pn,p):p()})}function AA(){return zf===0&&(zf=Us()),zf}function _A(p){return p==null||typeof p=="symbol"||typeof p=="boolean"?null:typeof p=="function"?p:bn(""+p)}function QT(p,v){var x=v.ownerDocument.createElement("input");return x.name=v.name,x.value=v.value,p.id&&x.setAttribute("form",p.id),v.parentNode.insertBefore(x,v),p=new FormData(p),x.parentNode.removeChild(x),p}function eS(p,v,x,F,Y){if(v==="submit"&&x&&x.stateNode===Y){var se=_A((Y[Ht]||null).action),Fe=F.submitter;Fe&&(v=(v=Fe[Ht]||null)?_A(v.formAction):Fe.getAttribute("formAction"),v!==null&&(se=v,Fe=null));var ct=new bi("action","action",null,F,Y);p.push({event:ct,listeners:[{instance:null,listener:function(){if(F.defaultPrevented){if(zf!==0){var Ut=Fe?QT(Y,Fe):new FormData(Y);Yc(x,{pending:!0,data:Ut,method:Y.method,action:se},null,Ut)}}else typeof se=="function"&&(ct.preventDefault(),Ut=Fe?QT(Y,Fe):new FormData(Y),Yc(x,{pending:!0,data:Ut,method:Y.method,action:se},se,Ut))},currentTarget:Y}]})}}for(var vA=0;vA<Bo.length;vA++){var wA=Bo[vA],w1=wA.toLowerCase(),tS=wA[0].toUpperCase()+wA.slice(1);cs(w1,"on"+tS)}cs(Lc,"onAnimationEnd"),cs(pc,"onAnimationIteration"),cs(wu,"onAnimationStart"),cs("dblclick","onDoubleClick"),cs("focusin","onFocus"),cs("focusout","onBlur"),cs(Fc,"onTransitionRun"),cs(Ru,"onTransitionStart"),cs(Uc,"onTransitionCancel"),cs(mc,"onTransitionEnd"),_s("onMouseEnter",["mouseout","mouseover"]),_s("onMouseLeave",["mouseout","mouseover"]),_s("onPointerEnter",["pointerout","pointerover"]),_s("onPointerLeave",["pointerout","pointerover"]),Gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Gi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ey="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ey));function $0(p,v){v=(v&4)!==0;for(var x=0;x<p.length;x++){var F=p[x],Y=F.event;F=F.listeners;e:{var se=void 0;if(v)for(var Fe=F.length-1;0<=Fe;Fe--){var ct=F[Fe],Ut=ct.instance,la=ct.currentTarget;if(ct=ct.listener,Ut!==se&&Y.isPropagationStopped())break e;se=ct,Y.currentTarget=la;try{se(Y)}catch(ja){_h(ja)}Y.currentTarget=null,se=Ut}else for(Fe=0;Fe<F.length;Fe++){if(ct=F[Fe],Ut=ct.instance,la=ct.currentTarget,ct=ct.listener,Ut!==se&&Y.isPropagationStopped())break e;se=ct,Y.currentTarget=la;try{se(Y)}catch(ja){_h(ja)}Y.currentTarget=null,se=Ut}}}}function Mi(p,v){var x=v[Ma];x===void 0&&(x=v[Ma]=new Set);var F=p+"__bubble";x.has(F)||(R1(v,p,2,!1),x.add(F))}function K0(p,v,x){var F=0;v&&(F|=4),R1(x,p,F,v)}var ty="_reactListening"+Math.random().toString(36).slice(2);function W0(p){if(!p[ty]){p[ty]=!0,In.forEach(function(x){x!=="selectionchange"&&(aS.has(x)||K0(x,!1,p),K0(x,!0,p))});var v=p.nodeType===9?p:p.ownerDocument;v===null||v[ty]||(v[ty]=!0,K0("selectionchange",!1,v))}}function R1(p,v,x,F){switch(wS(v)){case 2:var Y=_S;break;case 8:Y=vS;break;default:Y=k1}x=Y.bind(null,v,x,p),Y=void 0,!lc||v!=="touchstart"&&v!=="touchmove"&&v!=="wheel"||(Y=!0),F?Y!==void 0?p.addEventListener(v,x,{capture:!0,passive:Y}):p.addEventListener(v,x,!0):Y!==void 0?p.addEventListener(v,x,{passive:Y}):p.addEventListener(v,x,!1)}function Y0(p,v,x,F,Y){var se=F;if((v&1)===0&&(v&2)===0&&F!==null)e:for(;;){if(F===null)return;var Fe=F.tag;if(Fe===3||Fe===4){var ct=F.stateNode.containerInfo;if(ct===Y||ct.nodeType===8&&ct.parentNode===Y)break;if(Fe===4)for(Fe=F.return;Fe!==null;){var Ut=Fe.tag;if((Ut===3||Ut===4)&&(Ut=Fe.stateNode.containerInfo,Ut===Y||Ut.nodeType===8&&Ut.parentNode===Y))return;Fe=Fe.return}for(;ct!==null;){if(Fe=zn(ct),Fe===null)return;if(Ut=Fe.tag,Ut===5||Ut===6||Ut===26||Ut===27){F=se=Fe;continue e}ct=ct.parentNode}}F=F.return}Bs(function(){var la=se,ja=fr(x),nr=[];e:{var xa=ju.get(p);if(xa!==void 0){var Za=bi,Yr=p;switch(p){case"keypress":if(un(x)===0)break e;case"keydown":case"keyup":Za=bd;break;case"focusin":Yr="focus",Za=Jo;break;case"focusout":Yr="blur",Za=Jo;break;case"beforeblur":case"afterblur":Za=Jo;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Za=us;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Za=Ts;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Za=gf;break;case Lc:case pc:case wu:Za=js;break;case mc:Za=Ke;break;case"scroll":case"scrollend":Za=Sd;break;case"wheel":Za=Yt;break;case"copy":case"cut":case"paste":Za=ns;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Za=yf;break;case"toggle":case"beforetoggle":Za=Da}var Qn=(v&4)!==0,Ho=!Qn&&(p==="scroll"||p==="scrollend"),ya=Qn?xa!==null?xa+"Capture":null:xa;Qn=[];for(var ia=la,Sa;ia!==null;){var Ja=ia;if(Sa=Ja.stateNode,Ja=Ja.tag,Ja!==5&&Ja!==26&&Ja!==27||Sa===null||ya===null||(Ja=oc(ia,ya),Ja!=null&&Qn.push(bh(ia,Ja,Sa))),Ho)break;ia=ia.return}0<Qn.length&&(xa=new Za(xa,Yr,null,x,ja),nr.push({event:xa,listeners:Qn}))}}if((v&7)===0){e:{if(xa=p==="mouseover"||p==="pointerover",Za=p==="mouseout"||p==="pointerout",xa&&x!==lo&&(Yr=x.relatedTarget||x.fromElement)&&(zn(Yr)||Yr[Ta]))break e;if((Za||xa)&&(xa=ja.window===ja?ja:(xa=ja.ownerDocument)?xa.defaultView||xa.parentWindow:window,Za?(Yr=x.relatedTarget||x.toElement,Za=la,Yr=Yr?zn(Yr):null,Yr!==null&&(Ho=ke(Yr),Qn=Yr.tag,Yr!==Ho||Qn!==5&&Qn!==27&&Qn!==6)&&(Yr=null)):(Za=null,Yr=la),Za!==Yr)){if(Qn=us,Ja="onMouseLeave",ya="onMouseEnter",ia="mouse",(p==="pointerout"||p==="pointerover")&&(Qn=yf,Ja="onPointerLeave",ya="onPointerEnter",ia="pointer"),Ho=Za==null?xa:qr(Za),Sa=Yr==null?xa:qr(Yr),xa=new Qn(Ja,ia+"leave",Za,x,ja),xa.target=Ho,xa.relatedTarget=Sa,Ja=null,zn(ja)===la&&(Qn=new Qn(ya,ia+"enter",Yr,x,ja),Qn.target=Sa,Qn.relatedTarget=Ho,Ja=Qn),Ho=Ja,Za&&Yr)t:{for(Qn=Za,ya=Yr,ia=0,Sa=Qn;Sa;Sa=ay(Sa))ia++;for(Sa=0,Ja=ya;Ja;Ja=ay(Ja))Sa++;for(;0<ia-Sa;)Qn=ay(Qn),ia--;for(;0<Sa-ia;)ya=ay(ya),Sa--;for(;ia--;){if(Qn===ya||ya!==null&&Qn===ya.alternate)break t;Qn=ay(Qn),ya=ay(ya)}Qn=null}else Qn=null;Za!==null&&rS(nr,xa,Za,Qn,!1),Yr!==null&&Ho!==null&&rS(nr,Ho,Yr,Qn,!0)}}e:{if(xa=la?qr(la):window,Za=xa.nodeName&&xa.nodeName.toLowerCase(),Za==="select"||Za==="input"&&xa.type==="file")var Kr=dc;else if(Rr(xa))if(xd)Kr=Mh;else{Kr=co;var yi=qs}else Za=xa.nodeName,!Za||Za.toLowerCase()!=="input"||xa.type!=="checkbox"&&xa.type!=="radio"?la&&Bu(la.elementType)&&(Kr=dc):Kr=Af;if(Kr&&(Kr=Kr(p,la))){_u(nr,Kr,x,ja);break e}yi&&yi(p,xa,la),p==="focusout"&&la&&xa.type==="number"&&la.memoizedProps.value!=null&&mu(xa,"number",xa.value)}switch(yi=la?qr(la):window,p){case"focusin":(Rr(yi)||yi.contentEditable==="true")&&(Nl=yi,fc=la,vu=null);break;case"focusout":vu=fc=Nl=null;break;case"mousedown":Zi=!0;break;case"contextmenu":case"mouseup":case"dragend":Zi=!1,_f(nr,x,ja);break;case"selectionchange":if(Ic)break;case"keydown":case"keyup":_f(nr,x,ja)}var on;if(wr)e:{switch(p){case"compositionstart":var Pn="onCompositionStart";break e;case"compositionend":Pn="onCompositionEnd";break e;case"compositionupdate":Pn="onCompositionUpdate";break e}Pn=void 0}else es?Cs(p,x)&&(Pn="onCompositionEnd"):p==="keydown"&&x.keyCode===229&&(Pn="onCompositionStart");Pn&&(Nn&&x.locale!=="ko"&&(es||Pn!=="onCompositionStart"?Pn==="onCompositionEnd"&&es&&(on=Td()):(an=ja,An="value"in an?an.value:an.textContent,es=!0)),yi=Of(la,Pn),0<yi.length&&(Pn=new ko(Pn,p,null,x,ja),nr.push({event:Pn,listeners:yi}),on?Pn.data=on:(on=Js(x),on!==null&&(Pn.data=on)))),(on=Sn?br(p,x):ir(p,x))&&(Pn=Of(la,"onBeforeInput"),0<Pn.length&&(yi=new ko("onBeforeInput","beforeinput",null,x,ja),nr.push({event:yi,listeners:Pn}),yi.data=on)),eS(nr,p,la,x,ja)}$0(nr,v)})}function bh(p,v,x){return{instance:p,listener:v,currentTarget:x}}function Of(p,v){for(var x=v+"Capture",F=[];p!==null;){var Y=p,se=Y.stateNode;Y=Y.tag,Y!==5&&Y!==26&&Y!==27||se===null||(Y=oc(p,x),Y!=null&&F.unshift(bh(p,Y,se)),Y=oc(p,v),Y!=null&&F.push(bh(p,Y,se))),p=p.return}return F}function ay(p){if(p===null)return null;do p=p.return;while(p&&p.tag!==5&&p.tag!==27);return p||null}function rS(p,v,x,F,Y){for(var se=v._reactName,Fe=[];x!==null&&x!==F;){var ct=x,Ut=ct.alternate,la=ct.stateNode;if(ct=ct.tag,Ut!==null&&Ut===F)break;ct!==5&&ct!==26&&ct!==27||la===null||(Ut=la,Y?(la=oc(x,se),la!=null&&Fe.unshift(bh(x,la,Ut))):Y||(la=oc(x,se),la!=null&&Fe.push(bh(x,la,Ut)))),x=x.return}Fe.length!==0&&p.push({event:v,listeners:Fe})}var nS=/\r\n?/g,xP=/\u0000|\uFFFD/g;function iS(p){return(typeof p=="string"?p:""+p).replace(nS,`
`).replace(xP,"")}function Df(p,v){return v=iS(v),iS(p)===v}function Qy(){}function Es(p,v,x,F,Y,se){switch(x){case"children":typeof F=="string"?v==="body"||v==="textarea"&&F===""||ku(p,F):(typeof F=="number"||typeof F=="bigint")&&v!=="body"&&ku(p,""+F);break;case"className":zi(p,"class",F);break;case"tabIndex":zi(p,"tabindex",F);break;case"dir":case"role":case"viewBox":case"width":case"height":zi(p,x,F);break;case"style":Fo(p,F,se);break;case"data":if(v!=="object"){zi(p,"data",F);break}case"src":case"href":if(F===""&&(v!=="a"||x!=="href")){p.removeAttribute(x);break}if(F==null||typeof F=="function"||typeof F=="symbol"||typeof F=="boolean"){p.removeAttribute(x);break}F=bn(""+F),p.setAttribute(x,F);break;case"action":case"formAction":if(typeof F=="function"){p.setAttribute(x,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof se=="function"&&(x==="formAction"?(v!=="input"&&Es(p,v,"name",Y.name,Y,null),Es(p,v,"formEncType",Y.formEncType,Y,null),Es(p,v,"formMethod",Y.formMethod,Y,null),Es(p,v,"formTarget",Y.formTarget,Y,null)):(Es(p,v,"encType",Y.encType,Y,null),Es(p,v,"method",Y.method,Y,null),Es(p,v,"target",Y.target,Y,null)));if(F==null||typeof F=="symbol"||typeof F=="boolean"){p.removeAttribute(x);break}F=bn(""+F),p.setAttribute(x,F);break;case"onClick":F!=null&&(p.onclick=Qy);break;case"onScroll":F!=null&&Mi("scroll",p);break;case"onScrollEnd":F!=null&&Mi("scrollend",p);break;case"dangerouslySetInnerHTML":if(F!=null){if(typeof F!="object"||!("__html"in F))throw Error(r(61));if(x=F.__html,x!=null){if(Y.children!=null)throw Error(r(60));p.innerHTML=x}}break;case"multiple":p.multiple=F&&typeof F!="function"&&typeof F!="symbol";break;case"muted":p.muted=F&&typeof F!="function"&&typeof F!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(F==null||typeof F=="function"||typeof F=="boolean"||typeof F=="symbol"){p.removeAttribute("xlink:href");break}x=bn(""+F),p.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",x);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":F!=null&&typeof F!="function"&&typeof F!="symbol"?p.setAttribute(x,""+F):p.removeAttribute(x);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":F&&typeof F!="function"&&typeof F!="symbol"?p.setAttribute(x,""):p.removeAttribute(x);break;case"capture":case"download":F===!0?p.setAttribute(x,""):F!==!1&&F!=null&&typeof F!="function"&&typeof F!="symbol"?p.setAttribute(x,F):p.removeAttribute(x);break;case"cols":case"rows":case"size":case"span":F!=null&&typeof F!="function"&&typeof F!="symbol"&&!isNaN(F)&&1<=F?p.setAttribute(x,F):p.removeAttribute(x);break;case"rowSpan":case"start":F==null||typeof F=="function"||typeof F=="symbol"||isNaN(F)?p.removeAttribute(x):p.setAttribute(x,F);break;case"popover":Mi("beforetoggle",p),Mi("toggle",p),Wo(p,"popover",F);break;case"xlinkActuate":ql(p,"http://www.w3.org/1999/xlink","xlink:actuate",F);break;case"xlinkArcrole":ql(p,"http://www.w3.org/1999/xlink","xlink:arcrole",F);break;case"xlinkRole":ql(p,"http://www.w3.org/1999/xlink","xlink:role",F);break;case"xlinkShow":ql(p,"http://www.w3.org/1999/xlink","xlink:show",F);break;case"xlinkTitle":ql(p,"http://www.w3.org/1999/xlink","xlink:title",F);break;case"xlinkType":ql(p,"http://www.w3.org/1999/xlink","xlink:type",F);break;case"xmlBase":ql(p,"http://www.w3.org/XML/1998/namespace","xml:base",F);break;case"xmlLang":ql(p,"http://www.w3.org/XML/1998/namespace","xml:lang",F);break;case"xmlSpace":ql(p,"http://www.w3.org/XML/1998/namespace","xml:space",F);break;case"is":Wo(p,"is",F);break;case"innerText":case"textContent":break;default:(!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(x=sh.get(x)||x,Wo(p,x,F))}}function X0(p,v,x,F,Y,se){switch(x){case"style":Fo(p,F,se);break;case"dangerouslySetInnerHTML":if(F!=null){if(typeof F!="object"||!("__html"in F))throw Error(r(61));if(x=F.__html,x!=null){if(Y.children!=null)throw Error(r(60));p.innerHTML=x}}break;case"children":typeof F=="string"?ku(p,F):(typeof F=="number"||typeof F=="bigint")&&ku(p,""+F);break;case"onScroll":F!=null&&Mi("scroll",p);break;case"onScrollEnd":F!=null&&Mi("scrollend",p);break;case"onClick":F!=null&&(p.onclick=Qy);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Vi.hasOwnProperty(x))e:{if(x[0]==="o"&&x[1]==="n"&&(Y=x.endsWith("Capture"),v=x.slice(2,Y?x.length-7:void 0),se=p[Ht]||null,se=se!=null?se[x]:null,typeof se=="function"&&p.removeEventListener(v,se,Y),typeof F=="function")){typeof se!="function"&&se!==null&&(x in p?p[x]=null:p.hasAttribute(x)&&p.removeAttribute(x)),p.addEventListener(v,F,Y);break e}x in p?p[x]=F:F===!0?p.setAttribute(x,""):Wo(p,x,F)}}}function Co(p,v,x){switch(v){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mi("error",p),Mi("load",p);var F=!1,Y=!1,se;for(se in x)if(x.hasOwnProperty(se)){var Fe=x[se];if(Fe!=null)switch(se){case"src":F=!0;break;case"srcSet":Y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,v));default:Es(p,v,se,Fe,x,null)}}Y&&Es(p,v,"srcSet",x.srcSet,x,null),F&&Es(p,v,"src",x.src,x,null);return;case"input":Mi("invalid",p);var ct=se=Fe=Y=null,Ut=null,la=null;for(F in x)if(x.hasOwnProperty(F)){var ja=x[F];if(ja!=null)switch(F){case"name":Y=ja;break;case"type":Fe=ja;break;case"checked":Ut=ja;break;case"defaultChecked":la=ja;break;case"value":se=ja;break;case"defaultValue":ct=ja;break;case"children":case"dangerouslySetInnerHTML":if(ja!=null)throw Error(r(137,v));break;default:Es(p,v,F,ja,x,null)}}Hl(p,se,ct,Ut,la,Fe,Y,!1),ih(p);return;case"select":Mi("invalid",p),F=Fe=se=null;for(Y in x)if(x.hasOwnProperty(Y)&&(ct=x[Y],ct!=null))switch(Y){case"value":se=ct;break;case"defaultValue":Fe=ct;break;case"multiple":F=ct;default:Es(p,v,Y,ct,x,null)}v=se,x=Fe,p.multiple=!!F,v!=null?oo(p,!!F,v,!1):x!=null&&oo(p,!!F,x,!0);return;case"textarea":Mi("invalid",p),se=Y=F=null;for(Fe in x)if(x.hasOwnProperty(Fe)&&(ct=x[Fe],ct!=null))switch(Fe){case"value":F=ct;break;case"defaultValue":Y=ct;break;case"children":se=ct;break;case"dangerouslySetInnerHTML":if(ct!=null)throw Error(r(91));break;default:Es(p,v,Fe,ct,x,null)}Rd(p,F,Y,se),ih(p);return;case"option":for(Ut in x)if(x.hasOwnProperty(Ut)&&(F=x[Ut],F!=null))switch(Ut){case"selected":p.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:Es(p,v,Ut,F,x,null)}return;case"dialog":Mi("cancel",p),Mi("close",p);break;case"iframe":case"object":Mi("load",p);break;case"video":case"audio":for(F=0;F<ey.length;F++)Mi(ey[F],p);break;case"image":Mi("error",p),Mi("load",p);break;case"details":Mi("toggle",p);break;case"embed":case"source":case"link":Mi("error",p),Mi("load",p);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(la in x)if(x.hasOwnProperty(la)&&(F=x[la],F!=null))switch(la){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,v));default:Es(p,v,la,F,x,null)}return;default:if(Bu(v)){for(ja in x)x.hasOwnProperty(ja)&&(F=x[ja],F!==void 0&&X0(p,v,ja,F,x,void 0));return}}for(ct in x)x.hasOwnProperty(ct)&&(F=x[ct],F!=null&&Es(p,v,ct,F,x,null))}function PP(p,v,x,F){switch(v){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var Y=null,se=null,Fe=null,ct=null,Ut=null,la=null,ja=null;for(Za in x){var nr=x[Za];if(x.hasOwnProperty(Za)&&nr!=null)switch(Za){case"checked":break;case"value":break;case"defaultValue":Ut=nr;default:F.hasOwnProperty(Za)||Es(p,v,Za,null,F,nr)}}for(var xa in F){var Za=F[xa];if(nr=x[xa],F.hasOwnProperty(xa)&&(Za!=null||nr!=null))switch(xa){case"type":se=Za;break;case"name":Y=Za;break;case"checked":la=Za;break;case"defaultChecked":ja=Za;break;case"value":Fe=Za;break;case"defaultValue":ct=Za;break;case"children":case"dangerouslySetInnerHTML":if(Za!=null)throw Error(r(137,v));break;default:Za!==nr&&Es(p,v,xa,Za,F,nr)}}Io(p,Fe,ct,Ut,la,ja,se,Y);return;case"select":Za=Fe=ct=xa=null;for(se in x)if(Ut=x[se],x.hasOwnProperty(se)&&Ut!=null)switch(se){case"value":break;case"multiple":Za=Ut;default:F.hasOwnProperty(se)||Es(p,v,se,null,F,Ut)}for(Y in F)if(se=F[Y],Ut=x[Y],F.hasOwnProperty(Y)&&(se!=null||Ut!=null))switch(Y){case"value":xa=se;break;case"defaultValue":ct=se;break;case"multiple":Fe=se;default:se!==Ut&&Es(p,v,Y,se,F,Ut)}v=ct,x=Fe,F=Za,xa!=null?oo(p,!!x,xa,!1):!!F!=!!x&&(v!=null?oo(p,!!x,v,!0):oo(p,!!x,x?[]:"",!1));return;case"textarea":Za=xa=null;for(ct in x)if(Y=x[ct],x.hasOwnProperty(ct)&&Y!=null&&!F.hasOwnProperty(ct))switch(ct){case"value":break;case"children":break;default:Es(p,v,ct,null,F,Y)}for(Fe in F)if(Y=F[Fe],se=x[Fe],F.hasOwnProperty(Fe)&&(Y!=null||se!=null))switch(Fe){case"value":xa=Y;break;case"defaultValue":Za=Y;break;case"children":break;case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(91));break;default:Y!==se&&Es(p,v,Fe,Y,F,se)}Lo(p,xa,Za);return;case"option":for(var Yr in x)if(xa=x[Yr],x.hasOwnProperty(Yr)&&xa!=null&&!F.hasOwnProperty(Yr))switch(Yr){case"selected":p.selected=!1;break;default:Es(p,v,Yr,null,F,xa)}for(Ut in F)if(xa=F[Ut],Za=x[Ut],F.hasOwnProperty(Ut)&&xa!==Za&&(xa!=null||Za!=null))switch(Ut){case"selected":p.selected=xa&&typeof xa!="function"&&typeof xa!="symbol";break;default:Es(p,v,Ut,xa,F,Za)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Qn in x)xa=x[Qn],x.hasOwnProperty(Qn)&&xa!=null&&!F.hasOwnProperty(Qn)&&Es(p,v,Qn,null,F,xa);for(la in F)if(xa=F[la],Za=x[la],F.hasOwnProperty(la)&&xa!==Za&&(xa!=null||Za!=null))switch(la){case"children":case"dangerouslySetInnerHTML":if(xa!=null)throw Error(r(137,v));break;default:Es(p,v,la,xa,F,Za)}return;default:if(Bu(v)){for(var Ho in x)xa=x[Ho],x.hasOwnProperty(Ho)&&xa!==void 0&&!F.hasOwnProperty(Ho)&&X0(p,v,Ho,void 0,F,xa);for(ja in F)xa=F[ja],Za=x[ja],!F.hasOwnProperty(ja)||xa===Za||xa===void 0&&Za===void 0||X0(p,v,ja,xa,F,Za);return}}for(var ya in x)xa=x[ya],x.hasOwnProperty(ya)&&xa!=null&&!F.hasOwnProperty(ya)&&Es(p,v,ya,null,F,xa);for(nr in F)xa=F[nr],Za=x[nr],!F.hasOwnProperty(nr)||xa===Za||xa==null&&Za==null||Es(p,v,nr,xa,F,Za)}var Hd=null,RA=null;function eg(p){return p.nodeType===9?p:p.ownerDocument}function T1(p){switch(p){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function S1(p,v){if(p===0)switch(v){case"svg":return 1;case"math":return 2;default:return 0}return p===1&&v==="foreignObject"?0:p}function J0(p,v){return p==="textarea"||p==="noscript"||typeof v.children=="string"||typeof v.children=="number"||typeof v.children=="bigint"||typeof v.dangerouslySetInnerHTML=="object"&&v.dangerouslySetInnerHTML!==null&&v.dangerouslySetInnerHTML.__html!=null}var Q0=null;function C1(){var p=window.event;return p&&p.type==="popstate"?p===Q0?!1:(Q0=p,!0):(Q0=null,!1)}var Xh=typeof setTimeout=="function"?setTimeout:void 0,sS=typeof clearTimeout=="function"?clearTimeout:void 0,oS=typeof Promise=="function"?Promise:void 0,EP=typeof queueMicrotask=="function"?queueMicrotask:typeof oS<"u"?function(p){return oS.resolve(null).then(p).catch(NP)}:Xh;function NP(p){setTimeout(function(){throw p})}function b1(p,v){var x=v,F=0;do{var Y=x.nextSibling;if(p.removeChild(x),Y&&Y.nodeType===8)if(x=Y.data,x==="/$"){if(F===0){p.removeChild(Y),VA(v);return}F--}else x!=="$"&&x!=="$?"&&x!=="$!"||F++;x=Y}while(x);VA(v)}function x1(p){var v=p.firstChild;for(v&&v.nodeType===10&&(v=v.nextSibling);v;){var x=v;switch(v=v.nextSibling,x.nodeName){case"HTML":case"HEAD":case"BODY":x1(x),Gr(x);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(x.rel.toLowerCase()==="stylesheet")continue}p.removeChild(x)}}function VP(p,v,x,F){for(;p.nodeType===1;){var Y=x;if(p.nodeName.toLowerCase()!==v.toLowerCase()){if(!F&&(p.nodeName!=="INPUT"||p.type!=="hidden"))break}else if(F){if(!p[Vr])switch(v){case"meta":if(!p.hasAttribute("itemprop"))break;return p;case"link":if(se=p.getAttribute("rel"),se==="stylesheet"&&p.hasAttribute("data-precedence"))break;if(se!==Y.rel||p.getAttribute("href")!==(Y.href==null?null:Y.href)||p.getAttribute("crossorigin")!==(Y.crossOrigin==null?null:Y.crossOrigin)||p.getAttribute("title")!==(Y.title==null?null:Y.title))break;return p;case"style":if(p.hasAttribute("data-precedence"))break;return p;case"script":if(se=p.getAttribute("src"),(se!==(Y.src==null?null:Y.src)||p.getAttribute("type")!==(Y.type==null?null:Y.type)||p.getAttribute("crossorigin")!==(Y.crossOrigin==null?null:Y.crossOrigin))&&se&&p.hasAttribute("async")&&!p.hasAttribute("itemprop"))break;return p;default:return p}}else if(v==="input"&&p.type==="hidden"){var se=Y.name==null?null:""+Y.name;if(Y.type==="hidden"&&p.getAttribute("name")===se)return p}else return p;if(p=Mu(p.nextSibling),p===null)break}return null}function zP(p,v,x){if(v==="")return null;for(;p.nodeType!==3;)if((p.nodeType!==1||p.nodeName!=="INPUT"||p.type!=="hidden")&&!x||(p=Mu(p.nextSibling),p===null))return null;return p}function Mu(p){for(;p!=null;p=p.nextSibling){var v=p.nodeType;if(v===1||v===3)break;if(v===8){if(v=p.data,v==="$"||v==="$!"||v==="$?"||v==="F!"||v==="F")break;if(v==="/$")return null}}return p}function P1(p){p=p.previousSibling;for(var v=0;p;){if(p.nodeType===8){var x=p.data;if(x==="$"||x==="$!"||x==="$?"){if(v===0)return p;v--}else x==="/$"&&v++}p=p.previousSibling}return null}function TA(p,v,x){switch(v=eg(x),p){case"html":if(p=v.documentElement,!p)throw Error(r(452));return p;case"head":if(p=v.head,!p)throw Error(r(453));return p;case"body":if(p=v.body,!p)throw Error(r(454));return p;default:throw Error(r(451))}}var $d=new Map,E1=new Set;function ry(p){return typeof p.getRootNode=="function"?p.getRootNode():p.ownerDocument}var Mf=$e.d;$e.d={f:e_,r:lS,D:uS,C:OP,L:cS,m:dS,X:fS,S:hS,M:N1};function e_(){var p=Mf.f(),v=k0();return p||v}function lS(p){var v=Jn(p);v!==null&&v.tag===5&&v.type==="form"?qh(v):Mf.r(p)}var lm=typeof document>"u"?null:document;function t_(p,v,x){var F=lm;if(F&&typeof v=="string"&&v){var Y=Xs(v);Y='link[rel="'+p+'"][href="'+Y+'"]',typeof x=="string"&&(Y+='[crossorigin="'+x+'"]'),E1.has(Y)||(E1.add(Y),p={rel:p,crossOrigin:x,href:v},F.querySelector(Y)===null&&(v=F.createElement("link"),Co(v,"link",p),Hr(v),F.head.appendChild(v)))}}function uS(p){Mf.D(p),t_("dns-prefetch",p,null)}function OP(p,v){Mf.C(p,v),t_("preconnect",p,v)}function cS(p,v,x){Mf.L(p,v,x);var F=lm;if(F&&p&&v){var Y='link[rel="preload"][as="'+Xs(v)+'"]';v==="image"&&x&&x.imageSrcSet?(Y+='[imagesrcset="'+Xs(x.imageSrcSet)+'"]',typeof x.imageSizes=="string"&&(Y+='[imagesizes="'+Xs(x.imageSizes)+'"]')):Y+='[href="'+Xs(p)+'"]';var se=Y;switch(v){case"style":se=um(p);break;case"script":se=tg(p)}$d.has(se)||(p=De({rel:"preload",href:v==="image"&&x&&x.imageSrcSet?void 0:p,as:v},x),$d.set(se,p),F.querySelector(Y)!==null||v==="style"&&F.querySelector(SA(se))||v==="script"&&F.querySelector(ag(se))||(v=F.createElement("link"),Co(v,"link",p),Hr(v),F.head.appendChild(v)))}}function dS(p,v){Mf.m(p,v);var x=lm;if(x&&p){var F=v&&typeof v.as=="string"?v.as:"script",Y='link[rel="modulepreload"][as="'+Xs(F)+'"][href="'+Xs(p)+'"]',se=Y;switch(F){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":se=tg(p)}if(!$d.has(se)&&(p=De({rel:"modulepreload",href:p},v),$d.set(se,p),x.querySelector(Y)===null)){switch(F){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(x.querySelector(ag(se)))return}F=x.createElement("link"),Co(F,"link",p),Hr(F),x.head.appendChild(F)}}}function hS(p,v,x){Mf.S(p,v,x);var F=lm;if(F&&p){var Y=yn(F).hoistableStyles,se=um(p);v=v||"default";var Fe=Y.get(se);if(!Fe){var ct={loading:0,preload:null};if(Fe=F.querySelector(SA(se)))ct.loading=5;else{p=De({rel:"stylesheet",href:p,"data-precedence":v},x),(x=$d.get(se))&&ny(p,x);var Ut=Fe=F.createElement("link");Hr(Ut),Co(Ut,"link",p),Ut._p=new Promise(function(la,ja){Ut.onload=la,Ut.onerror=ja}),Ut.addEventListener("load",function(){ct.loading|=1}),Ut.addEventListener("error",function(){ct.loading|=2}),ct.loading|=4,cm(Fe,v,F)}Fe={type:"stylesheet",instance:Fe,count:1,state:ct},Y.set(se,Fe)}}}function fS(p,v){Mf.X(p,v);var x=lm;if(x&&p){var F=yn(x).hoistableScripts,Y=tg(p),se=F.get(Y);se||(se=x.querySelector(ag(Y)),se||(p=De({src:p,async:!0},v),(v=$d.get(Y))&&rg(p,v),se=x.createElement("script"),Hr(se),Co(se,"link",p),x.head.appendChild(se)),se={type:"script",instance:se,count:1,state:null},F.set(Y,se))}}function N1(p,v){Mf.M(p,v);var x=lm;if(x&&p){var F=yn(x).hoistableScripts,Y=tg(p),se=F.get(Y);se||(se=x.querySelector(ag(Y)),se||(p=De({src:p,async:!0,type:"module"},v),(v=$d.get(Y))&&rg(p,v),se=x.createElement("script"),Hr(se),Co(se,"link",p),x.head.appendChild(se)),se={type:"script",instance:se,count:1,state:null},F.set(Y,se))}}function V1(p,v,x,F){var Y=(Y=Aa.current)?ry(Y):null;if(!Y)throw Error(r(446));switch(p){case"meta":case"title":return null;case"style":return typeof x.precedence=="string"&&typeof x.href=="string"?(v=um(x.href),x=yn(Y).hoistableStyles,F=x.get(v),F||(F={type:"style",instance:null,count:0,state:null},x.set(v,F)),F):{type:"void",instance:null,count:0,state:null};case"link":if(x.rel==="stylesheet"&&typeof x.href=="string"&&typeof x.precedence=="string"){p=um(x.href);var se=yn(Y).hoistableStyles,Fe=se.get(p);if(Fe||(Y=Y.ownerDocument||Y,Fe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},se.set(p,Fe),(se=Y.querySelector(SA(p)))&&!se._p&&(Fe.instance=se,Fe.state.loading=5),$d.has(p)||(x={rel:"preload",as:"style",href:x.href,crossOrigin:x.crossOrigin,integrity:x.integrity,media:x.media,hrefLang:x.hrefLang,referrerPolicy:x.referrerPolicy},$d.set(p,x),se||DP(Y,p,x,Fe.state))),v&&F===null)throw Error(r(528,""));return Fe}if(v&&F!==null)throw Error(r(529,""));return null;case"script":return v=x.async,x=x.src,typeof x=="string"&&v&&typeof v!="function"&&typeof v!="symbol"?(v=tg(x),x=yn(Y).hoistableScripts,F=x.get(v),F||(F={type:"script",instance:null,count:0,state:null},x.set(v,F)),F):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,p))}}function um(p){return'href="'+Xs(p)+'"'}function SA(p){return'link[rel="stylesheet"]['+p+"]"}function pS(p){return De({},p,{"data-precedence":p.precedence,precedence:null})}function DP(p,v,x,F){p.querySelector('link[rel="preload"][as="style"]['+v+"]")?F.loading=1:(v=p.createElement("link"),F.preload=v,v.addEventListener("load",function(){return F.loading|=1}),v.addEventListener("error",function(){return F.loading|=2}),Co(v,"link",x),Hr(v),p.head.appendChild(v))}function tg(p){return'[src="'+Xs(p)+'"]'}function ag(p){return"script[async]"+p}function yp(p,v,x){if(v.count++,v.instance===null)switch(v.type){case"style":var F=p.querySelector('style[data-href~="'+Xs(x.href)+'"]');if(F)return v.instance=F,Hr(F),F;var Y=De({},x,{"data-href":x.href,"data-precedence":x.precedence,href:null,precedence:null});return F=(p.ownerDocument||p).createElement("style"),Hr(F),Co(F,"style",Y),cm(F,x.precedence,p),v.instance=F;case"stylesheet":Y=um(x.href);var se=p.querySelector(SA(Y));if(se)return v.state.loading|=4,v.instance=se,Hr(se),se;F=pS(x),(Y=$d.get(Y))&&ny(F,Y),se=(p.ownerDocument||p).createElement("link"),Hr(se);var Fe=se;return Fe._p=new Promise(function(ct,Ut){Fe.onload=ct,Fe.onerror=Ut}),Co(se,"link",F),v.state.loading|=4,cm(se,x.precedence,p),v.instance=se;case"script":return se=tg(x.src),(Y=p.querySelector(ag(se)))?(v.instance=Y,Hr(Y),Y):(F=x,(Y=$d.get(se))&&(F=De({},x),rg(F,Y)),p=p.ownerDocument||p,Y=p.createElement("script"),Hr(Y),Co(Y,"link",F),p.head.appendChild(Y),v.instance=Y);case"void":return null;default:throw Error(r(443,v.type))}else v.type==="stylesheet"&&(v.state.loading&4)===0&&(F=v.instance,v.state.loading|=4,cm(F,x.precedence,p));return v.instance}function cm(p,v,x){for(var F=x.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),Y=F.length?F[F.length-1]:null,se=Y,Fe=0;Fe<F.length;Fe++){var ct=F[Fe];if(ct.dataset.precedence===v)se=ct;else if(se!==Y)break}se?se.parentNode.insertBefore(p,se.nextSibling):(v=x.nodeType===9?x.head:x,v.insertBefore(p,v.firstChild))}function ny(p,v){p.crossOrigin==null&&(p.crossOrigin=v.crossOrigin),p.referrerPolicy==null&&(p.referrerPolicy=v.referrerPolicy),p.title==null&&(p.title=v.title)}function rg(p,v){p.crossOrigin==null&&(p.crossOrigin=v.crossOrigin),p.referrerPolicy==null&&(p.referrerPolicy=v.referrerPolicy),p.integrity==null&&(p.integrity=v.integrity)}var dm=null;function z1(p,v,x){if(dm===null){var F=new Map,Y=dm=new Map;Y.set(x,F)}else Y=dm,F=Y.get(x),F||(F=new Map,Y.set(x,F));if(F.has(p))return F;for(F.set(p,null),x=x.getElementsByTagName(p),Y=0;Y<x.length;Y++){var se=x[Y];if(!(se[Vr]||se[Kt]||p==="link"&&se.getAttribute("rel")==="stylesheet")&&se.namespaceURI!=="http://www.w3.org/2000/svg"){var Fe=se.getAttribute(v)||"";Fe=p+Fe;var ct=F.get(Fe);ct?ct.push(se):F.set(Fe,[se])}}return F}function O1(p,v,x){p=p.ownerDocument||p,p.head.insertBefore(x,v==="title"?p.querySelector("head > title"):null)}function mS(p,v,x){if(x===1||v.itemProp!=null)return!1;switch(p){case"meta":case"title":return!0;case"style":if(typeof v.precedence!="string"||typeof v.href!="string"||v.href==="")break;return!0;case"link":if(typeof v.rel!="string"||typeof v.href!="string"||v.href===""||v.onLoad||v.onError)break;switch(v.rel){case"stylesheet":return p=v.disabled,typeof v.precedence=="string"&&p==null;default:return!0}case"script":if(v.async&&typeof v.async!="function"&&typeof v.async!="symbol"&&!v.onLoad&&!v.onError&&v.src&&typeof v.src=="string")return!0}return!1}function D1(p){return!(p.type==="stylesheet"&&(p.state.loading&3)===0)}var CA=null;function MP(){}function yS(p,v,x){if(CA===null)throw Error(r(475));var F=CA;if(v.type==="stylesheet"&&(typeof x.media!="string"||matchMedia(x.media).matches!==!1)&&(v.state.loading&4)===0){if(v.instance===null){var Y=um(x.href),se=p.querySelector(SA(Y));if(se){p=se._p,p!==null&&typeof p=="object"&&typeof p.then=="function"&&(F.count++,F=bA.bind(F),p.then(F,F)),v.state.loading|=4,v.instance=se,Hr(se);return}se=p.ownerDocument||p,x=pS(x),(Y=$d.get(Y))&&ny(x,Y),se=se.createElement("link"),Hr(se);var Fe=se;Fe._p=new Promise(function(ct,Ut){Fe.onload=ct,Fe.onerror=Ut}),Co(se,"link",x),v.instance=se}F.stylesheets===null&&(F.stylesheets=new Map),F.stylesheets.set(v,p),(p=v.state.preload)&&(v.state.loading&3)===0&&(F.count++,v=bA.bind(F),p.addEventListener("load",v),p.addEventListener("error",v))}}function a_(){if(CA===null)throw Error(r(475));var p=CA;return p.stylesheets&&p.count===0&&n_(p,p.stylesheets),0<p.count?function(v){var x=setTimeout(function(){if(p.stylesheets&&n_(p,p.stylesheets),p.unsuspend){var F=p.unsuspend;p.unsuspend=null,F()}},6e4);return p.unsuspend=v,function(){p.unsuspend=null,clearTimeout(x)}}:null}function bA(){if(this.count--,this.count===0){if(this.stylesheets)n_(this,this.stylesheets);else if(this.unsuspend){var p=this.unsuspend;this.unsuspend=null,p()}}}var r_=null;function n_(p,v){p.stylesheets=null,p.unsuspend!==null&&(p.count++,r_=new Map,v.forEach(M1,p),r_=null,bA.call(p))}function M1(p,v){if(!(v.state.loading&4)){var x=r_.get(p);if(x)var F=x.get(null);else{x=new Map,r_.set(p,x);for(var Y=p.querySelectorAll("link[data-precedence],style[data-precedence]"),se=0;se<Y.length;se++){var Fe=Y[se];(Fe.nodeName==="LINK"||Fe.getAttribute("media")!=="not all")&&(x.set(Fe.dataset.precedence,Fe),F=Fe)}F&&x.set(null,F)}Y=v.instance,Fe=Y.getAttribute("data-precedence"),se=x.get(Fe)||F,se===F&&x.set(null,Y),x.set(Fe,Y),this.count++,F=bA.bind(this),Y.addEventListener("load",F),Y.addEventListener("error",F),se?se.parentNode.insertBefore(Y,se.nextSibling):(p=p.nodeType===9?p.head:p,p.insertBefore(Y,p.firstChild)),v.state.loading|=4}}var ng={$$typeof:U,Provider:null,Consumer:null,_currentValue:ht,_currentValue2:ht,_threadCount:0};function gS(p,v,x,F,Y,se,Fe,ct){this.tag=1,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xe(0),this.hiddenUpdates=xe(null),this.identifierPrefix=F,this.onUncaughtError=Y,this.onCaughtError=se,this.onRecoverableError=Fe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ct,this.incompleteTransitions=new Map}function I1(p,v,x,F,Y,se,Fe,ct,Ut,la,ja,nr){return p=new gS(p,v,x,Fe,ct,Ut,la,nr),v=1,se===!0&&(v|=24),se=ra(3,null,null,v),p.current=se,se.stateNode=p,v=jh(),v.refCount++,p.pooledCache=v,v.refCount++,se.memoizedState={element:F,isDehydrated:x,cache:v},Rh(se),p}function L1(p){return p?(p=Bc,p):Bc}function F1(p,v,x,F,Y,se){Y=L1(Y),F.context===null?F.context=Y:F.pendingContext=Y,F=Pf(v),F.payload={element:x},se=se===void 0?null:se,se!==null&&(F.callback=se),x=Ef(p,F,v),x!==null&&(Fl(x,p,v),Nf(x,p,v))}function AS(p,v){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var x=p.retryLane;p.retryLane=x!==0&&x<v?x:v}}function i_(p,v){AS(p,v),(p=p.alternate)&&AS(p,v)}function U1(p){if(p.tag===13){var v=Qo(p,67108864);v!==null&&Fl(v,p,67108864),i_(p,67108864)}}var hm=!0;function _S(p,v,x,F){var Y=be.T;be.T=null;var se=$e.p;try{$e.p=2,k1(p,v,x,F)}finally{$e.p=se,be.T=Y}}function vS(p,v,x,F){var Y=be.T;be.T=null;var se=$e.p;try{$e.p=8,k1(p,v,x,F)}finally{$e.p=se,be.T=Y}}function k1(p,v,x,F){if(hm){var Y=B1(F);if(Y===null)Y0(p,v,F,s_,x),q1(p,F);else if(RS(Y,p,v,x,F))F.stopPropagation();else if(q1(p,F),v&4&&-1<Z1.indexOf(p)){for(;Y!==null;){var se=Jn(Y);if(se!==null)switch(se.tag){case 3:if(se=se.stateNode,se.current.memoizedState.isDehydrated){var Fe=Ni(se.pendingLanes);if(Fe!==0){var ct=se;for(ct.pendingLanes|=2,ct.entangledLanes|=2;Fe;){var Ut=1<<31-en(Fe);ct.entanglements[1]|=Ut,Fe&=~Ut}Yh(se),(xr&6)===0&&(yo=ka()+500,om(0))}}break;case 13:ct=Qo(se,2),ct!==null&&Fl(ct,se,2),k0(),i_(se,2)}if(se=B1(F),se===null&&Y0(p,v,F,s_,x),se===Y)break;Y=se}Y!==null&&F.stopPropagation()}else Y0(p,v,F,null,x)}}function B1(p){return p=fr(p),G1(p)}var s_=null;function G1(p){if(s_=null,p=zn(p),p!==null){var v=ke(p);if(v===null)p=null;else{var x=v.tag;if(x===13){if(p=tt(v),p!==null)return p;p=null}else if(x===3){if(v.stateNode.current.memoizedState.isDehydrated)return v.tag===3?v.stateNode.containerInfo:null;p=null}else v!==p&&(p=null)}}return s_=p,null}function wS(p){switch(p){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(jr()){case pn:return 2;case Dn:return 8;case Rn:case wa:return 32;case Wa:return 268435456;default:return 32}default:return 32}}var j1=!1,fm=null,gp=null,pm=null,xA=new Map,PA=new Map,If=[],Z1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function q1(p,v){switch(p){case"focusin":case"focusout":fm=null;break;case"dragenter":case"dragleave":gp=null;break;case"mouseover":case"mouseout":pm=null;break;case"pointerover":case"pointerout":xA.delete(v.pointerId);break;case"gotpointercapture":case"lostpointercapture":PA.delete(v.pointerId)}}function ig(p,v,x,F,Y,se){return p===null||p.nativeEvent!==se?(p={blockedOn:v,domEventName:x,eventSystemFlags:F,nativeEvent:se,targetContainers:[Y]},v!==null&&(v=Jn(v),v!==null&&U1(v)),p):(p.eventSystemFlags|=F,v=p.targetContainers,Y!==null&&v.indexOf(Y)===-1&&v.push(Y),p)}function RS(p,v,x,F,Y){switch(v){case"focusin":return fm=ig(fm,p,v,x,F,Y),!0;case"dragenter":return gp=ig(gp,p,v,x,F,Y),!0;case"mouseover":return pm=ig(pm,p,v,x,F,Y),!0;case"pointerover":var se=Y.pointerId;return xA.set(se,ig(xA.get(se)||null,p,v,x,F,Y)),!0;case"gotpointercapture":return se=Y.pointerId,PA.set(se,ig(PA.get(se)||null,p,v,x,F,Y)),!0}return!1}function H1(p){var v=zn(p.target);if(v!==null){var x=ke(v);if(x!==null){if(v=x.tag,v===13){if(v=tt(x),v!==null){p.blockedOn=v,Et(p.priority,function(){if(x.tag===13){var F=go(),Y=Qo(x,F);Y!==null&&Fl(Y,x,F),i_(x,F)}});return}}else if(v===3&&x.stateNode.current.memoizedState.isDehydrated){p.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}p.blockedOn=null}function EA(p){if(p.blockedOn!==null)return!1;for(var v=p.targetContainers;0<v.length;){var x=B1(p.nativeEvent);if(x===null){x=p.nativeEvent;var F=new x.constructor(x.type,x);lo=F,x.target.dispatchEvent(F),lo=null}else return v=Jn(x),v!==null&&U1(v),p.blockedOn=x,!1;v.shift()}return!0}function $1(p,v,x){EA(p)&&x.delete(v)}function TS(){j1=!1,fm!==null&&EA(fm)&&(fm=null),gp!==null&&EA(gp)&&(gp=null),pm!==null&&EA(pm)&&(pm=null),xA.forEach($1),PA.forEach($1)}function NA(p,v){p.blockedOn===v&&(p.blockedOn=null,j1||(j1=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,TS)))}var sg=null;function K1(p){sg!==p&&(sg=p,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){sg===p&&(sg=null);for(var v=0;v<p.length;v+=3){var x=p[v],F=p[v+1],Y=p[v+2];if(typeof F!="function"){if(G1(F||x)===null)continue;break}var se=Jn(x);se!==null&&(p.splice(v,3),v-=3,Yc(se,{pending:!0,data:Y,method:x.method,action:F},F,Y))}}))}function VA(p){function v(Ut){return NA(Ut,p)}fm!==null&&NA(fm,p),gp!==null&&NA(gp,p),pm!==null&&NA(pm,p),xA.forEach(v),PA.forEach(v);for(var x=0;x<If.length;x++){var F=If[x];F.blockedOn===p&&(F.blockedOn=null)}for(;0<If.length&&(x=If[0],x.blockedOn===null);)H1(x),x.blockedOn===null&&If.shift();if(x=(p.ownerDocument||p).$$reactFormReplay,x!=null)for(F=0;F<x.length;F+=3){var Y=x[F],se=x[F+1],Fe=Y[Ht]||null;if(typeof se=="function")Fe||K1(x);else if(Fe){var ct=null;if(se&&se.hasAttribute("formAction")){if(Y=se,Fe=se[Ht]||null)ct=Fe.formAction;else if(G1(Y)!==null)continue}else ct=Fe.action;typeof ct=="function"?x[F+1]=ct:(x.splice(F,3),F-=3),K1(x)}}}function iy(p){this._internalRoot=p}zA.prototype.render=iy.prototype.render=function(p){var v=this._internalRoot;if(v===null)throw Error(r(409));var x=v.current,F=go();F1(x,F,p,v,null,null)},zA.prototype.unmount=iy.prototype.unmount=function(){var p=this._internalRoot;if(p!==null){this._internalRoot=null;var v=p.containerInfo;p.tag===0&&Ch(),F1(p.current,2,null,p,null,null),k0(),v[Ta]=null}};function zA(p){this._internalRoot=p}zA.prototype.unstable_scheduleHydration=function(p){if(p){var v=Bt();p={blockedOn:null,target:p,priority:v};for(var x=0;x<If.length&&v!==0&&v<If[x].priority;x++);If.splice(x,0,p),x===0&&H1(p)}};var SS=e.version;if(SS!=="19.0.0")throw Error(r(527,SS,"19.0.0"));$e.findDOMNode=function(p){var v=p._reactInternals;if(v===void 0)throw typeof p.render=="function"?Error(r(188)):(p=Object.keys(p).join(","),Error(r(268,p)));return p=He(v),p=p!==null?Ce(p):null,p=p===null?null:p.stateNode,p};var IP={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:be,findFiberByHostInstance:zn,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var o_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!o_.isDisabled&&o_.supportsFiber)try{gr=o_.inject(IP),qn=o_}catch{}}return gw.createRoot=function(p,v){if(!s(p))throw Error(r(299));var x=!1,F="",Y=ip,se=Hh,Fe=vh,ct=null;return v!=null&&(v.unstable_strictMode===!0&&(x=!0),v.identifierPrefix!==void 0&&(F=v.identifierPrefix),v.onUncaughtError!==void 0&&(Y=v.onUncaughtError),v.onCaughtError!==void 0&&(se=v.onCaughtError),v.onRecoverableError!==void 0&&(Fe=v.onRecoverableError),v.unstable_transitionCallbacks!==void 0&&(ct=v.unstable_transitionCallbacks)),v=I1(p,1,!1,null,null,x,F,Y,se,Fe,ct,null),p[Ta]=v.current,W0(p.nodeType===8?p.parentNode:p),new iy(v)},gw.hydrateRoot=function(p,v,x){if(!s(p))throw Error(r(299));var F=!1,Y="",se=ip,Fe=Hh,ct=vh,Ut=null,la=null;return x!=null&&(x.unstable_strictMode===!0&&(F=!0),x.identifierPrefix!==void 0&&(Y=x.identifierPrefix),x.onUncaughtError!==void 0&&(se=x.onUncaughtError),x.onCaughtError!==void 0&&(Fe=x.onCaughtError),x.onRecoverableError!==void 0&&(ct=x.onRecoverableError),x.unstable_transitionCallbacks!==void 0&&(Ut=x.unstable_transitionCallbacks),x.formState!==void 0&&(la=x.formState)),v=I1(p,1,!0,v,x??null,F,Y,se,Fe,ct,Ut,la),v.context=L1(null),x=v.current,F=go(),Y=Pf(F),Y.callback=null,Ef(x,Y,F),v.current.lanes=F,Oe(v,F),Yh(v),p[Ta]=v.current,W0(p),new zA(v)},gw.version="19.0.0",gw}var S6;function Yte(){if(S6)return VE.exports;S6=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),VE.exports=Wte(),VE.exports}var Xte=Yte(),Aw={},C6;function Jte(){if(C6)return Aw;C6=1,Object.defineProperty(Aw,"__esModule",{value:!0}),Aw.parse=h,Aw.serialize=T;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,a=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,l=(()=>{const k=function(){};return k.prototype=Object.create(null),k})();function h(k,U){const Z=new l,H=k.length;if(H<2)return Z;const q=(U==null?void 0:U.decode)||P;let J=0;do{const re=k.indexOf("=",J);if(re===-1)break;const ce=k.indexOf(";",J),ye=ce===-1?H:ce;if(re>ye){J=k.lastIndexOf(";",re-1)+1;continue}const he=n(k,J,re),_e=w(k,re,he),me=k.slice(he,_e);if(Z[me]===void 0){let Re=n(k,re+1,ye),be=w(k,ye,Re);const De=q(k.slice(Re,be));Z[me]=De}J=ye+1}while(J<H);return Z}function n(k,U,Z){do{const H=k.charCodeAt(U);if(H!==32&&H!==9)return U}while(++U<Z);return Z}function w(k,U,Z){for(;U>Z;){const H=k.charCodeAt(--U);if(H!==32&&H!==9)return U+1}return Z}function T(k,U,Z){const H=(Z==null?void 0:Z.encode)||encodeURIComponent;if(!t.test(k))throw new TypeError(`argument name is invalid: ${k}`);const q=H(U);if(!e.test(q))throw new TypeError(`argument val is invalid: ${U}`);let J=k+"="+q;if(!Z)return J;if(Z.maxAge!==void 0){if(!Number.isInteger(Z.maxAge))throw new TypeError(`option maxAge is invalid: ${Z.maxAge}`);J+="; Max-Age="+Z.maxAge}if(Z.domain){if(!a.test(Z.domain))throw new TypeError(`option domain is invalid: ${Z.domain}`);J+="; Domain="+Z.domain}if(Z.path){if(!r.test(Z.path))throw new TypeError(`option path is invalid: ${Z.path}`);J+="; Path="+Z.path}if(Z.expires){if(!z(Z.expires)||!Number.isFinite(Z.expires.valueOf()))throw new TypeError(`option expires is invalid: ${Z.expires}`);J+="; Expires="+Z.expires.toUTCString()}if(Z.httpOnly&&(J+="; HttpOnly"),Z.secure&&(J+="; Secure"),Z.partitioned&&(J+="; Partitioned"),Z.priority)switch(typeof Z.priority=="string"?Z.priority.toLowerCase():void 0){case"low":J+="; Priority=Low";break;case"medium":J+="; Priority=Medium";break;case"high":J+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${Z.priority}`)}if(Z.sameSite)switch(typeof Z.sameSite=="string"?Z.sameSite.toLowerCase():Z.sameSite){case!0:case"strict":J+="; SameSite=Strict";break;case"lax":J+="; SameSite=Lax";break;case"none":J+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${Z.sameSite}`)}return J}function P(k){if(k.indexOf("%")===-1)return k;try{return decodeURIComponent(k)}catch{return k}}function z(k){return s.call(k)==="[object Date]"}return Aw}Jte();/**
 * react-router v7.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var b6="popstate";function Qte(t={}){function e(s,l){let{pathname:h="/",search:n="",hash:w=""}=C0(s.location.hash.substring(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),Z5("",{pathname:h,search:n,hash:w},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function a(s,l){let h=s.document.querySelector("base"),n="";if(h&&h.getAttribute("href")){let w=s.location.href,T=w.indexOf("#");n=T===-1?w:w.slice(0,T)}return n+"#"+(typeof l=="string"?l:dR(l))}function r(s,l){Ip(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return tae(e,a,r,t)}function cl(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ip(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function eae(){return Math.random().toString(36).substring(2,10)}function x6(t,e){return{usr:t.state,key:t.key,idx:e}}function Z5(t,e,a=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?C0(e):e,state:a,key:e&&e.key||r||eae()}}function dR({pathname:t="/",search:e="",hash:a=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function C0(t){let e={};if(t){let a=t.indexOf("#");a>=0&&(e.hash=t.substring(a),t=t.substring(0,a));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function tae(t,e,a,r={}){let{window:s=document.defaultView,v5Compat:l=!1}=r,h=s.history,n="POP",w=null,T=P();T==null&&(T=0,h.replaceState({...h.state,idx:T},""));function P(){return(h.state||{idx:null}).idx}function z(){n="POP";let q=P(),J=q==null?null:q-T;T=q,w&&w({action:n,location:H.location,delta:J})}function k(q,J){n="PUSH";let re=Z5(H.location,q,J);a&&a(re,q),T=P()+1;let ce=x6(re,T),ye=H.createHref(re);try{h.pushState(ce,"",ye)}catch(he){if(he instanceof DOMException&&he.name==="DataCloneError")throw he;s.location.assign(ye)}l&&w&&w({action:n,location:H.location,delta:1})}function U(q,J){n="REPLACE";let re=Z5(H.location,q,J);a&&a(re,q),T=P();let ce=x6(re,T),ye=H.createHref(re);h.replaceState(ce,"",ye),l&&w&&w({action:n,location:H.location,delta:0})}function Z(q){let J=s.location.origin!=="null"?s.location.origin:s.location.href,re=typeof q=="string"?q:dR(q);return re=re.replace(/ $/,"%20"),cl(J,`No window.location.(origin|href) available to create URL for href: ${re}`),new URL(re,J)}let H={get action(){return n},get location(){return t(s,h)},listen(q){if(w)throw new Error("A history only accepts one active listener");return s.addEventListener(b6,z),w=q,()=>{s.removeEventListener(b6,z),w=null}},createHref(q){return e(s,q)},createURL:Z,encodeLocation(q){let J=Z(q);return{pathname:J.pathname,search:J.search,hash:J.hash}},push:k,replace:U,go(q){return h.go(q)}};return H}function Tq(t,e,a="/"){return aae(t,e,a,!1)}function aae(t,e,a,r){let s=typeof e=="string"?C0(e):e,l=wy(s.pathname||"/",a);if(l==null)return null;let h=Sq(t);rae(h);let n=null;for(let w=0;n==null&&w<h.length;++w){let T=pae(l);n=hae(h[w],T,r)}return n}function Sq(t,e=[],a=[],r=""){let s=(l,h,n)=>{let w={relativePath:n===void 0?l.path||"":n,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};w.relativePath.startsWith("/")&&(cl(w.relativePath.startsWith(r),`Absolute route path "${w.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),w.relativePath=w.relativePath.slice(r.length));let T=gy([r,w.relativePath]),P=a.concat(w);l.children&&l.children.length>0&&(cl(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),Sq(l.children,e,P,T)),!(l.path==null&&!l.index)&&e.push({path:T,score:cae(T,l.index),routesMeta:P})};return t.forEach((l,h)=>{var n;if(l.path===""||!((n=l.path)!=null&&n.includes("?")))s(l,h);else for(let w of Cq(l.path))s(l,h,w)}),e}function Cq(t){let e=t.split("/");if(e.length===0)return[];let[a,...r]=e,s=a.endsWith("?"),l=a.replace(/\?$/,"");if(r.length===0)return s?[l,""]:[l];let h=Cq(r.join("/")),n=[];return n.push(...h.map(w=>w===""?l:[l,w].join("/"))),s&&n.push(...h),n.map(w=>t.startsWith("/")&&w===""?"/":w)}function rae(t){t.sort((e,a)=>e.score!==a.score?a.score-e.score:dae(e.routesMeta.map(r=>r.childrenIndex),a.routesMeta.map(r=>r.childrenIndex)))}var nae=/^:[\w-]+$/,iae=3,sae=2,oae=1,lae=10,uae=-2,P6=t=>t==="*";function cae(t,e){let a=t.split("/"),r=a.length;return a.some(P6)&&(r+=uae),e&&(r+=sae),a.filter(s=>!P6(s)).reduce((s,l)=>s+(nae.test(l)?iae:l===""?oae:lae),r)}function dae(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function hae(t,e,a=!1){let{routesMeta:r}=t,s={},l="/",h=[];for(let n=0;n<r.length;++n){let w=r[n],T=n===r.length-1,P=l==="/"?e:e.slice(l.length)||"/",z=ub({path:w.relativePath,caseSensitive:w.caseSensitive,end:T},P),k=w.route;if(!z&&T&&a&&!r[r.length-1].route.index&&(z=ub({path:w.relativePath,caseSensitive:w.caseSensitive,end:!1},P)),!z)return null;Object.assign(s,z.params),h.push({params:s,pathname:gy([l,z.pathname]),pathnameBase:Aae(gy([l,z.pathnameBase])),route:k}),z.pathnameBase!=="/"&&(l=gy([l,z.pathnameBase]))}return h}function ub(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[a,r]=fae(t.path,t.caseSensitive,t.end),s=e.match(a);if(!s)return null;let l=s[0],h=l.replace(/(.)\/+$/,"$1"),n=s.slice(1);return{params:r.reduce((T,{paramName:P,isOptional:z},k)=>{if(P==="*"){let Z=n[k]||"";h=l.slice(0,l.length-Z.length).replace(/(.)\/+$/,"$1")}const U=n[k];return z&&!U?T[P]=void 0:T[P]=(U||"").replace(/%2F/g,"/"),T},{}),pathname:l,pathnameBase:h,pattern:t}}function fae(t,e=!1,a=!0){Ip(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,n,w)=>(r.push({paramName:n,isOptional:w!=null}),w?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function pae(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ip(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function wy(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let a=e.endsWith("/")?e.length-1:e.length,r=t.charAt(a);return r&&r!=="/"?null:t.slice(a)||"/"}function mae(t,e="/"){let{pathname:a,search:r="",hash:s=""}=typeof t=="string"?C0(t):t;return{pathname:a?a.startsWith("/")?a:yae(a,e):e,search:_ae(r),hash:vae(s)}}function yae(t,e){let a=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?a.length>1&&a.pop():s!=="."&&a.push(s)}),a.length>1?a.join("/"):"/"}function ME(t,e,a,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function gae(t){return t.filter((e,a)=>a===0||e.route.path&&e.route.path.length>0)}function bq(t){let e=gae(t);return e.map((a,r)=>r===e.length-1?a.pathname:a.pathnameBase)}function xq(t,e,a,r=!1){let s;typeof t=="string"?s=C0(t):(s={...t},cl(!s.pathname||!s.pathname.includes("?"),ME("?","pathname","search",s)),cl(!s.pathname||!s.pathname.includes("#"),ME("#","pathname","hash",s)),cl(!s.search||!s.search.includes("#"),ME("#","search","hash",s)));let l=t===""||s.pathname==="",h=l?"/":s.pathname,n;if(h==null)n=a;else{let z=e.length-1;if(!r&&h.startsWith("..")){let k=h.split("/");for(;k[0]==="..";)k.shift(),z-=1;s.pathname=k.join("/")}n=z>=0?e[z]:"/"}let w=mae(s,n),T=h&&h!=="/"&&h.endsWith("/"),P=(l||h===".")&&a.endsWith("/");return!w.pathname.endsWith("/")&&(T||P)&&(w.pathname+="/"),w}var gy=t=>t.join("/").replace(/\/\/+/g,"/"),Aae=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),_ae=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,vae=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function wae(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Pq=["POST","PUT","PATCH","DELETE"];new Set(Pq);var Rae=["GET",...Pq];new Set(Rae);var jv=nt.createContext(null);jv.displayName="DataRouter";var Bx=nt.createContext(null);Bx.displayName="DataRouterState";var Eq=nt.createContext({isTransitioning:!1});Eq.displayName="ViewTransition";var Tae=nt.createContext(new Map);Tae.displayName="Fetchers";var Sae=nt.createContext(null);Sae.displayName="Await";var Fm=nt.createContext(null);Fm.displayName="Navigation";var fT=nt.createContext(null);fT.displayName="Location";var Vy=nt.createContext({outlet:null,matches:[],isDataRoute:!1});Vy.displayName="Route";var _I=nt.createContext(null);_I.displayName="RouteError";function Cae(t,{relative:e}={}){cl(pT(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:r}=nt.useContext(Fm),{hash:s,pathname:l,search:h}=mT(t,{relative:e}),n=l;return a!=="/"&&(n=l==="/"?a:gy([a,l])),r.createHref({pathname:n,search:h,hash:s})}function pT(){return nt.useContext(fT)!=null}function qg(){return cl(pT(),"useLocation() may be used only in the context of a <Router> component."),nt.useContext(fT).location}var Nq="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Vq(t){nt.useContext(Fm).static||nt.useLayoutEffect(t)}function vI(){let{isDataRoute:t}=nt.useContext(Vy);return t?Fae():bae()}function bae(){cl(pT(),"useNavigate() may be used only in the context of a <Router> component.");let t=nt.useContext(jv),{basename:e,navigator:a}=nt.useContext(Fm),{matches:r}=nt.useContext(Vy),{pathname:s}=qg(),l=JSON.stringify(bq(r)),h=nt.useRef(!1);return Vq(()=>{h.current=!0}),nt.useCallback((w,T={})=>{if(Ip(h.current,Nq),!h.current)return;if(typeof w=="number"){a.go(w);return}let P=xq(w,JSON.parse(l),s,T.relative==="path");t==null&&e!=="/"&&(P.pathname=P.pathname==="/"?e:gy([e,P.pathname])),(T.replace?a.replace:a.push)(P,T.state,T)},[e,a,l,s,t])}nt.createContext(null);function mT(t,{relative:e}={}){let{matches:a}=nt.useContext(Vy),{pathname:r}=qg(),s=JSON.stringify(bq(a));return nt.useMemo(()=>xq(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function xae(t,e){return zq(t,e)}function zq(t,e,a,r){var re;cl(pT(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:l}=nt.useContext(Fm),{matches:h}=nt.useContext(Vy),n=h[h.length-1],w=n?n.params:{},T=n?n.pathname:"/",P=n?n.pathnameBase:"/",z=n&&n.route;{let ce=z&&z.path||"";Oq(T,!z||ce.endsWith("*")||ce.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${T}" (under <Route path="${ce}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ce}"> to <Route path="${ce==="/"?"*":`${ce}/*`}">.`)}let k=qg(),U;if(e){let ce=typeof e=="string"?C0(e):e;cl(P==="/"||((re=ce.pathname)==null?void 0:re.startsWith(P)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${P}" but pathname "${ce.pathname}" was given in the \`location\` prop.`),U=ce}else U=k;let Z=U.pathname||"/",H=Z;if(P!=="/"){let ce=P.replace(/^\//,"").split("/");H="/"+Z.replace(/^\//,"").split("/").slice(ce.length).join("/")}let q=!l&&a&&a.matches&&a.matches.length>0?a.matches:Tq(t,{pathname:H});Ip(z||q!=null,`No routes matched location "${U.pathname}${U.search}${U.hash}" `),Ip(q==null||q[q.length-1].route.element!==void 0||q[q.length-1].route.Component!==void 0||q[q.length-1].route.lazy!==void 0,`Matched leaf route at location "${U.pathname}${U.search}${U.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let J=zae(q&&q.map(ce=>Object.assign({},ce,{params:Object.assign({},w,ce.params),pathname:gy([P,s.encodeLocation?s.encodeLocation(ce.pathname).pathname:ce.pathname]),pathnameBase:ce.pathnameBase==="/"?P:gy([P,s.encodeLocation?s.encodeLocation(ce.pathnameBase).pathname:ce.pathnameBase])})),h,a,r);return e&&J?nt.createElement(fT.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...U},navigationType:"POP"}},J):J}function Pae(){let t=Lae(),e=wae(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),a=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},h=null;return console.error("Error handled by React Router default ErrorBoundary:",t),h=nt.createElement(nt.Fragment,null,nt.createElement("p",null," Hey developer "),nt.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",nt.createElement("code",{style:l},"ErrorBoundary")," or"," ",nt.createElement("code",{style:l},"errorElement")," prop on your route.")),nt.createElement(nt.Fragment,null,nt.createElement("h2",null,"Unexpected Application Error!"),nt.createElement("h3",{style:{fontStyle:"italic"}},e),a?nt.createElement("pre",{style:s},a):null,h)}var Eae=nt.createElement(Pae,null),Nae=class extends nt.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?nt.createElement(Vy.Provider,{value:this.props.routeContext},nt.createElement(_I.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Vae({routeContext:t,match:e,children:a}){let r=nt.useContext(jv);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),nt.createElement(Vy.Provider,{value:t},a)}function zae(t,e=[],a=null,r=null){if(t==null){if(!a)return null;if(a.errors)t=a.matches;else if(e.length===0&&!a.initialized&&a.matches.length>0)t=a.matches;else return null}let s=t,l=a==null?void 0:a.errors;if(l!=null){let w=s.findIndex(T=>T.route.id&&(l==null?void 0:l[T.route.id])!==void 0);cl(w>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),s=s.slice(0,Math.min(s.length,w+1))}let h=!1,n=-1;if(a)for(let w=0;w<s.length;w++){let T=s[w];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(n=w),T.route.id){let{loaderData:P,errors:z}=a,k=T.route.loader&&!P.hasOwnProperty(T.route.id)&&(!z||z[T.route.id]===void 0);if(T.route.lazy||k){h=!0,n>=0?s=s.slice(0,n+1):s=[s[0]];break}}}return s.reduceRight((w,T,P)=>{let z,k=!1,U=null,Z=null;a&&(z=l&&T.route.id?l[T.route.id]:void 0,U=T.route.errorElement||Eae,h&&(n<0&&P===0?(Oq("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,Z=null):n===P&&(k=!0,Z=T.route.hydrateFallbackElement||null)));let H=e.concat(s.slice(0,P+1)),q=()=>{let J;return z?J=U:k?J=Z:T.route.Component?J=nt.createElement(T.route.Component,null):T.route.element?J=T.route.element:J=w,nt.createElement(Vae,{match:T,routeContext:{outlet:w,matches:H,isDataRoute:a!=null},children:J})};return a&&(T.route.ErrorBoundary||T.route.errorElement||P===0)?nt.createElement(Nae,{location:a.location,revalidation:a.revalidation,component:U,error:z,children:q(),routeContext:{outlet:null,matches:H,isDataRoute:!0}}):q()},null)}function wI(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Oae(t){let e=nt.useContext(jv);return cl(e,wI(t)),e}function Dae(t){let e=nt.useContext(Bx);return cl(e,wI(t)),e}function Mae(t){let e=nt.useContext(Vy);return cl(e,wI(t)),e}function RI(t){let e=Mae(t),a=e.matches[e.matches.length-1];return cl(a.route.id,`${t} can only be used on routes that contain a unique "id"`),a.route.id}function Iae(){return RI("useRouteId")}function Lae(){var r;let t=nt.useContext(_I),e=Dae("useRouteError"),a=RI("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[a]}function Fae(){let{router:t}=Oae("useNavigate"),e=RI("useNavigate"),a=nt.useRef(!1);return Vq(()=>{a.current=!0}),nt.useCallback(async(s,l={})=>{Ip(a.current,Nq),a.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...l}))},[t,e])}var E6={};function Oq(t,e,a){!e&&!E6[t]&&(E6[t]=!0,Ip(!1,a))}nt.memo(Uae);function Uae({routes:t,future:e,state:a}){return zq(t,void 0,a,e)}function xp(t){cl(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function kae({basename:t="/",children:e=null,location:a,navigationType:r="POP",navigator:s,static:l=!1}){cl(!pT(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=t.replace(/^\/*/,"/"),n=nt.useMemo(()=>({basename:h,navigator:s,static:l,future:{}}),[h,s,l]);typeof a=="string"&&(a=C0(a));let{pathname:w="/",search:T="",hash:P="",state:z=null,key:k="default"}=a,U=nt.useMemo(()=>{let Z=wy(w,h);return Z==null?null:{location:{pathname:Z,search:T,hash:P,state:z,key:k},navigationType:r}},[h,w,T,P,z,k,r]);return Ip(U!=null,`<Router basename="${h}"> is not able to match the URL "${w}${T}${P}" because it does not start with the basename, so the <Router> won't render anything.`),U==null?null:nt.createElement(Fm.Provider,{value:n},nt.createElement(fT.Provider,{children:e,value:U}))}function Bae({children:t,location:e}){return xae(q5(t),e)}function q5(t,e=[]){let a=[];return nt.Children.forEach(t,(r,s)=>{if(!nt.isValidElement(r))return;let l=[...e,s];if(r.type===nt.Fragment){a.push.apply(a,q5(r.props.children,l));return}cl(r.type===xp,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),cl(!r.props.index||!r.props.children,"An index route cannot have child routes.");let h={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(h.children=q5(r.props.children,l)),a.push(h)}),a}var LC="get",FC="application/x-www-form-urlencoded";function Gx(t){return t!=null&&typeof t.tagName=="string"}function Gae(t){return Gx(t)&&t.tagName.toLowerCase()==="button"}function jae(t){return Gx(t)&&t.tagName.toLowerCase()==="form"}function Zae(t){return Gx(t)&&t.tagName.toLowerCase()==="input"}function qae(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Hae(t,e){return t.button===0&&(!e||e==="_self")&&!qae(t)}var iC=null;function $ae(){if(iC===null)try{new FormData(document.createElement("form"),0),iC=!1}catch{iC=!0}return iC}var Kae=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function IE(t){return t!=null&&!Kae.has(t)?(Ip(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${FC}"`),null):t}function Wae(t,e){let a,r,s,l,h;if(jae(t)){let n=t.getAttribute("action");r=n?wy(n,e):null,a=t.getAttribute("method")||LC,s=IE(t.getAttribute("enctype"))||FC,l=new FormData(t)}else if(Gae(t)||Zae(t)&&(t.type==="submit"||t.type==="image")){let n=t.form;if(n==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let w=t.getAttribute("formaction")||n.getAttribute("action");if(r=w?wy(w,e):null,a=t.getAttribute("formmethod")||n.getAttribute("method")||LC,s=IE(t.getAttribute("formenctype"))||IE(n.getAttribute("enctype"))||FC,l=new FormData(n,t),!$ae()){let{name:T,type:P,value:z}=t;if(P==="image"){let k=T?`${T}.`:"";l.append(`${k}x`,"0"),l.append(`${k}y`,"0")}else T&&l.append(T,z)}}else{if(Gx(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=LC,r=null,s=FC,h=t}return l&&s==="text/plain"&&(h=l,l=void 0),{action:r,method:a.toLowerCase(),encType:s,formData:l,body:h}}function TI(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function Yae(t,e){if(t.id in e)return e[t.id];try{let a=await import(t.module);return e[t.id]=a,a}catch(a){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Xae(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Jae(t,e,a){let r=await Promise.all(t.map(async s=>{let l=e.routes[s.route.id];if(l){let h=await Yae(l,a);return h.links?h.links():[]}return[]}));return are(r.flat(1).filter(Xae).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function N6(t,e,a,r,s,l){let h=(w,T)=>a[T]?w.route.id!==a[T].route.id:!0,n=(w,T)=>{var P;return a[T].pathname!==w.pathname||((P=a[T].route.path)==null?void 0:P.endsWith("*"))&&a[T].params["*"]!==w.params["*"]};return l==="assets"?e.filter((w,T)=>h(w,T)||n(w,T)):l==="data"?e.filter((w,T)=>{var z;let P=r.routes[w.route.id];if(!P||!P.hasLoader)return!1;if(h(w,T)||n(w,T))return!0;if(w.route.shouldRevalidate){let k=w.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((z=a[0])==null?void 0:z.params)||{},nextUrl:new URL(t,window.origin),nextParams:w.params,defaultShouldRevalidate:!0});if(typeof k=="boolean")return k}return!0}):[]}function Qae(t,e,{includeHydrateFallback:a}={}){return ere(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let l=[s.module];return s.clientActionModule&&(l=l.concat(s.clientActionModule)),s.clientLoaderModule&&(l=l.concat(s.clientLoaderModule)),a&&s.hydrateFallbackModule&&(l=l.concat(s.hydrateFallbackModule)),s.imports&&(l=l.concat(s.imports)),l}).flat(1))}function ere(t){return[...new Set(t)]}function tre(t){let e={},a=Object.keys(t).sort();for(let r of a)e[r]=t[r];return e}function are(t,e){let a=new Set;return new Set(e),t.reduce((r,s)=>{let l=JSON.stringify(tre(s));return a.has(l)||(a.add(l),r.push({key:l,link:s})),r},[])}function rre(t,e){let a=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return a.pathname==="/"?a.pathname="_root.data":e&&wy(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.data`:a.pathname=`${a.pathname.replace(/\/$/,"")}.data`,a}function Dq(){let t=nt.useContext(jv);return TI(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function nre(){let t=nt.useContext(Bx);return TI(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var SI=nt.createContext(void 0);SI.displayName="FrameworkContext";function Mq(){let t=nt.useContext(SI);return TI(t,"You must render this element inside a <HydratedRouter> element"),t}function ire(t,e){let a=nt.useContext(SI),[r,s]=nt.useState(!1),[l,h]=nt.useState(!1),{onFocus:n,onBlur:w,onMouseEnter:T,onMouseLeave:P,onTouchStart:z}=e,k=nt.useRef(null);nt.useEffect(()=>{if(t==="render"&&h(!0),t==="viewport"){let H=J=>{J.forEach(re=>{h(re.isIntersecting)})},q=new IntersectionObserver(H,{threshold:.5});return k.current&&q.observe(k.current),()=>{q.disconnect()}}},[t]),nt.useEffect(()=>{if(r){let H=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(H)}}},[r]);let U=()=>{s(!0)},Z=()=>{s(!1),h(!1)};return a?t!=="intent"?[l,k,{}]:[l,k,{onFocus:_w(n,U),onBlur:_w(w,Z),onMouseEnter:_w(T,U),onMouseLeave:_w(P,Z),onTouchStart:_w(z,U)}]:[!1,k,{}]}function _w(t,e){return a=>{t&&t(a),a.defaultPrevented||e(a)}}function sre({page:t,...e}){let{router:a}=Dq(),r=nt.useMemo(()=>Tq(a.routes,t,a.basename),[a.routes,t,a.basename]);return r?nt.createElement(lre,{page:t,matches:r,...e}):null}function ore(t){let{manifest:e,routeModules:a}=Mq(),[r,s]=nt.useState([]);return nt.useEffect(()=>{let l=!1;return Jae(t,e,a).then(h=>{l||s(h)}),()=>{l=!0}},[t,e,a]),r}function lre({page:t,matches:e,...a}){let r=qg(),{manifest:s,routeModules:l}=Mq(),{basename:h}=Dq(),{loaderData:n,matches:w}=nre(),T=nt.useMemo(()=>N6(t,e,w,s,r,"data"),[t,e,w,s,r]),P=nt.useMemo(()=>N6(t,e,w,s,r,"assets"),[t,e,w,s,r]),z=nt.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let Z=new Set,H=!1;if(e.forEach(J=>{var ce;let re=s.routes[J.route.id];!re||!re.hasLoader||(!T.some(ye=>ye.route.id===J.route.id)&&J.route.id in n&&((ce=l[J.route.id])!=null&&ce.shouldRevalidate)||re.hasClientLoader?H=!0:Z.add(J.route.id))}),Z.size===0)return[];let q=rre(t,h);return H&&Z.size>0&&q.searchParams.set("_routes",e.filter(J=>Z.has(J.route.id)).map(J=>J.route.id).join(",")),[q.pathname+q.search]},[h,n,r,s,T,e,t,l]),k=nt.useMemo(()=>Qae(P,s),[P,s]),U=ore(P);return nt.createElement(nt.Fragment,null,z.map(Z=>nt.createElement("link",{key:Z,rel:"prefetch",as:"fetch",href:Z,...a})),k.map(Z=>nt.createElement("link",{key:Z,rel:"modulepreload",href:Z,...a})),U.map(({key:Z,link:H})=>nt.createElement("link",{key:Z,...H})))}function ure(...t){return e=>{t.forEach(a=>{typeof a=="function"?a(e):a!=null&&(a.current=e)})}}var Iq=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Iq&&(window.__reactRouterVersion="7.3.0")}catch{}function cre({basename:t,children:e,window:a}){let r=nt.useRef();r.current==null&&(r.current=Qte({window:a,v5Compat:!0}));let s=r.current,[l,h]=nt.useState({action:s.action,location:s.location}),n=nt.useCallback(w=>{nt.startTransition(()=>h(w))},[h]);return nt.useLayoutEffect(()=>s.listen(n),[s,n]),nt.createElement(kae,{basename:t,children:e,location:l.location,navigationType:l.action,navigator:s})}var Lq=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fq=nt.forwardRef(function({onClick:e,discover:a="render",prefetch:r="none",relative:s,reloadDocument:l,replace:h,state:n,target:w,to:T,preventScrollReset:P,viewTransition:z,...k},U){let{basename:Z}=nt.useContext(Fm),H=typeof T=="string"&&Lq.test(T),q,J=!1;if(typeof T=="string"&&H&&(q=T,Iq))try{let be=new URL(window.location.href),De=T.startsWith("//")?new URL(be.protocol+T):new URL(T),ie=wy(De.pathname,Z);De.origin===be.origin&&ie!=null?T=ie+De.search+De.hash:J=!0}catch{Ip(!1,`<Link to="${T}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let re=Cae(T,{relative:s}),[ce,ye,he]=ire(r,k),_e=pre(T,{replace:h,state:n,target:w,preventScrollReset:P,relative:s,viewTransition:z});function me(be){e&&e(be),be.defaultPrevented||_e(be)}let Re=nt.createElement("a",{...k,...he,href:q||re,onClick:J||l?e:me,ref:ure(U,ye),target:w,"data-discover":!H&&a==="render"?"true":void 0});return ce&&!H?nt.createElement(nt.Fragment,null,Re,nt.createElement(sre,{page:re})):Re});Fq.displayName="Link";var dre=nt.forwardRef(function({"aria-current":e="page",caseSensitive:a=!1,className:r="",end:s=!1,style:l,to:h,viewTransition:n,children:w,...T},P){let z=mT(h,{relative:T.relative}),k=qg(),U=nt.useContext(Bx),{navigator:Z,basename:H}=nt.useContext(Fm),q=U!=null&&_re(z)&&n===!0,J=Z.encodeLocation?Z.encodeLocation(z).pathname:z.pathname,re=k.pathname,ce=U&&U.navigation&&U.navigation.location?U.navigation.location.pathname:null;a||(re=re.toLowerCase(),ce=ce?ce.toLowerCase():null,J=J.toLowerCase()),ce&&H&&(ce=wy(ce,H)||ce);const ye=J!=="/"&&J.endsWith("/")?J.length-1:J.length;let he=re===J||!s&&re.startsWith(J)&&re.charAt(ye)==="/",_e=ce!=null&&(ce===J||!s&&ce.startsWith(J)&&ce.charAt(J.length)==="/"),me={isActive:he,isPending:_e,isTransitioning:q},Re=he?e:void 0,be;typeof r=="function"?be=r(me):be=[r,he?"active":null,_e?"pending":null,q?"transitioning":null].filter(Boolean).join(" ");let De=typeof l=="function"?l(me):l;return nt.createElement(Fq,{...T,"aria-current":Re,className:be,ref:P,style:De,to:h,viewTransition:n},typeof w=="function"?w(me):w)});dre.displayName="NavLink";var hre=nt.forwardRef(({discover:t="render",fetcherKey:e,navigate:a,reloadDocument:r,replace:s,state:l,method:h=LC,action:n,onSubmit:w,relative:T,preventScrollReset:P,viewTransition:z,...k},U)=>{let Z=gre(),H=Are(n,{relative:T}),q=h.toLowerCase()==="get"?"get":"post",J=typeof n=="string"&&Lq.test(n),re=ce=>{if(w&&w(ce),ce.defaultPrevented)return;ce.preventDefault();let ye=ce.nativeEvent.submitter,he=(ye==null?void 0:ye.getAttribute("formmethod"))||h;Z(ye||ce.currentTarget,{fetcherKey:e,method:he,navigate:a,replace:s,state:l,relative:T,preventScrollReset:P,viewTransition:z})};return nt.createElement("form",{ref:U,method:q,action:H,onSubmit:r?w:re,...k,"data-discover":!J&&t==="render"?"true":void 0})});hre.displayName="Form";function fre(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Uq(t){let e=nt.useContext(jv);return cl(e,fre(t)),e}function pre(t,{target:e,replace:a,state:r,preventScrollReset:s,relative:l,viewTransition:h}={}){let n=vI(),w=qg(),T=mT(t,{relative:l});return nt.useCallback(P=>{if(Hae(P,e)){P.preventDefault();let z=a!==void 0?a:dR(w)===dR(T);n(t,{replace:z,state:r,preventScrollReset:s,relative:l,viewTransition:h})}},[w,n,T,a,r,e,t,s,l,h])}var mre=0,yre=()=>`__${String(++mre)}__`;function gre(){let{router:t}=Uq("useSubmit"),{basename:e}=nt.useContext(Fm),a=Iae();return nt.useCallback(async(r,s={})=>{let{action:l,method:h,encType:n,formData:w,body:T}=Wae(r,e);if(s.navigate===!1){let P=s.fetcherKey||yre();await t.fetch(P,a,s.action||l,{preventScrollReset:s.preventScrollReset,formData:w,body:T,formMethod:s.method||h,formEncType:s.encType||n,flushSync:s.flushSync})}else await t.navigate(s.action||l,{preventScrollReset:s.preventScrollReset,formData:w,body:T,formMethod:s.method||h,formEncType:s.encType||n,replace:s.replace,state:s.state,fromRouteId:a,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,a])}function Are(t,{relative:e}={}){let{basename:a}=nt.useContext(Fm),r=nt.useContext(Vy);cl(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),l={...mT(t||".",{relative:e})},h=qg();if(t==null){l.search=h.search;let n=new URLSearchParams(l.search),w=n.getAll("index");if(w.some(P=>P==="")){n.delete("index"),w.filter(z=>z).forEach(z=>n.append("index",z));let P=n.toString();l.search=P?`?${P}`:""}}return(!t||t===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(l.pathname=l.pathname==="/"?a:gy([a,l.pathname])),dR(l)}function _re(t,e={}){let a=nt.useContext(Eq);cl(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Uq("useViewTransitionState"),s=mT(t,{relative:e.relative});if(!a.isTransitioning)return!1;let l=wy(a.currentLocation.pathname,r)||a.currentLocation.pathname,h=wy(a.nextLocation.pathname,r)||a.nextLocation.pathname;return ub(s.pathname,h)!=null||ub(s.pathname,l)!=null}new TextEncoder;var V6={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kq=function(t){const e=[];let a=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[a++]=s:s<2048?(e[a++]=s>>6|192,e[a++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[a++]=s>>18|240,e[a++]=s>>12&63|128,e[a++]=s>>6&63|128,e[a++]=s&63|128):(e[a++]=s>>12|224,e[a++]=s>>6&63|128,e[a++]=s&63|128)}return e},vre=function(t){const e=[];let a=0,r=0;for(;a<t.length;){const s=t[a++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const l=t[a++];e[r++]=String.fromCharCode((s&31)<<6|l&63)}else if(s>239&&s<365){const l=t[a++],h=t[a++],n=t[a++],w=((s&7)<<18|(l&63)<<12|(h&63)<<6|n&63)-65536;e[r++]=String.fromCharCode(55296+(w>>10)),e[r++]=String.fromCharCode(56320+(w&1023))}else{const l=t[a++],h=t[a++];e[r++]=String.fromCharCode((s&15)<<12|(l&63)<<6|h&63)}}return e.join("")},Bq={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const a=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const l=t[s],h=s+1<t.length,n=h?t[s+1]:0,w=s+2<t.length,T=w?t[s+2]:0,P=l>>2,z=(l&3)<<4|n>>4;let k=(n&15)<<2|T>>6,U=T&63;w||(U=64,h||(k=64)),r.push(a[P],a[z],a[k],a[U])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(kq(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):vre(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const a=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const l=a[t.charAt(s++)],n=s<t.length?a[t.charAt(s)]:0;++s;const T=s<t.length?a[t.charAt(s)]:64;++s;const z=s<t.length?a[t.charAt(s)]:64;if(++s,l==null||n==null||T==null||z==null)throw new wre;const k=l<<2|n>>4;if(r.push(k),T!==64){const U=n<<4&240|T>>2;if(r.push(U),z!==64){const Z=T<<6&192|z;r.push(Z)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class wre extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Rre=function(t){const e=kq(t);return Bq.encodeByteArray(e,!0)},cb=function(t){return Rre(t).replace(/\./g,"")},Gq=function(t){try{return Bq.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tre(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sre=()=>Tre().__FIREBASE_DEFAULTS__,Cre=()=>{if(typeof process>"u"||typeof V6>"u")return;const t=V6.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},bre=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Gq(t[1]);return e&&JSON.parse(e)},jx=()=>{try{return Sre()||Cre()||bre()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},jq=t=>{var e,a;return(a=(e=jx())===null||e===void 0?void 0:e.emulatorHosts)===null||a===void 0?void 0:a[t]},Zq=t=>{const e=jq(t);if(!e)return;const a=e.lastIndexOf(":");if(a<=0||a+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(a+1),10);return e[0]==="["?[e.substring(1,a-1),r]:[e.substring(0,a),r]},qq=()=>{var t;return(t=jx())===null||t===void 0?void 0:t.config},Hq=t=>{var e;return(e=jx())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xre{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,a)=>{this.resolve=e,this.reject=a})}wrapCallback(e){return(a,r)=>{a?this.reject(a):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(a):e(a,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $q(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const a={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},t);return[cb(JSON.stringify(a)),cb(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Pre(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_d())}function Ere(){var t;const e=(t=jx())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Nre(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Vre(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zre(){const t=_d();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Ore(){try{return typeof indexedDB=="object"}catch{return!1}}function Dre(){return new Promise((t,e)=>{try{let a=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),a||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{a=!1},s.onerror=()=>{var l;e(((l=s.error)===null||l===void 0?void 0:l.message)||"")}}catch(a){e(a)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mre="FirebaseError";class Um extends Error{constructor(e,a,r){super(a),this.code=e,this.customData=r,this.name=Mre,Object.setPrototypeOf(this,Um.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yT.prototype.create)}}class yT{constructor(e,a,r){this.service=e,this.serviceName=a,this.errors=r}create(e,...a){const r=a[0]||{},s=`${this.service}/${e}`,l=this.errors[e],h=l?Ire(l,r):"Error",n=`${this.serviceName}: ${h} (${s}).`;return new Um(s,n,r)}}function Ire(t,e){return t.replace(Lre,(a,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Lre=/\{\$([^}]+)}/g;function Fre(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function db(t,e){if(t===e)return!0;const a=Object.keys(t),r=Object.keys(e);for(const s of a){if(!r.includes(s))return!1;const l=t[s],h=e[s];if(z6(l)&&z6(h)){if(!db(l,h))return!1}else if(l!==h)return!1}for(const s of r)if(!a.includes(s))return!1;return!0}function z6(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(t){const e=[];for(const[a,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(a)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(a)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Lw(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,l]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(l)}}),e}function Fw(t){const e=t.indexOf("?");if(!e)return"";const a=t.indexOf("#",e);return t.substring(e,a>0?a:void 0)}function Ure(t,e){const a=new kre(t,e);return a.subscribe.bind(a)}class kre{constructor(e,a){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=a,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(a=>{a.next(e)})}error(e){this.forEachObserver(a=>{a.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,a,r){let s;if(e===void 0&&a===void 0&&r===void 0)throw new Error("Missing Observer.");Bre(e,["next","error","complete"])?s=e:s={next:e,error:a,complete:r},s.next===void 0&&(s.next=LE),s.error===void 0&&(s.error=LE),s.complete===void 0&&(s.complete=LE);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let a=0;a<this.observers.length;a++)this.sendOne(a,e)}sendOne(e,a){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{a(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Bre(t,e){if(typeof t!="object"||t===null)return!1;for(const a of e)if(a in t&&typeof t[a]=="function")return!0;return!1}function LE(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dl(t){return t&&t._delegate?t._delegate:t}class Fg{constructor(e,a,r){this.name=e,this.instanceFactory=a,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gre{constructor(e,a){this.name=e,this.container=a,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const a=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(a)){const r=new xre;if(this.instancesDeferred.set(a,r),this.isInitialized(a)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:a});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(a).promise}getImmediate(e){var a;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(a=e==null?void 0:e.optional)!==null&&a!==void 0?a:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Zre(e))try{this.getOrInitializeService({instanceIdentifier:ZA})}catch{}for(const[a,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(a);try{const l=this.getOrInitializeService({instanceIdentifier:s});r.resolve(l)}catch{}}}}clearInstance(e=ZA){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(a=>"INTERNAL"in a).map(a=>a.INTERNAL.delete()),...e.filter(a=>"_delete"in a).map(a=>a._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ZA){return this.instances.has(e)}getOptions(e=ZA){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:a={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:a});for(const[l,h]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(l);r===n&&h.resolve(s)}return s}onInit(e,a){var r;const s=this.normalizeInstanceIdentifier(a),l=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(s,l);const h=this.instances.get(s);return h&&e(h,s),()=>{l.delete(e)}}invokeOnInitCallbacks(e,a){const r=this.onInitCallbacks.get(a);if(r)for(const s of r)try{s(e,a)}catch{}}getOrInitializeService({instanceIdentifier:e,options:a={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:jre(e),options:a}),this.instances.set(e,r),this.instancesOptions.set(e,a),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ZA){return this.component?this.component.multipleInstances?e:ZA:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jre(t){return t===ZA?void 0:t}function Zre(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qre{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const a=this.getProvider(e.name);if(a.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);a.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const a=new Gre(e,this);return this.providers.set(e,a),a}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fs;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(fs||(fs={}));const Hre={debug:fs.DEBUG,verbose:fs.VERBOSE,info:fs.INFO,warn:fs.WARN,error:fs.ERROR,silent:fs.SILENT},$re=fs.INFO,Kre={[fs.DEBUG]:"log",[fs.VERBOSE]:"log",[fs.INFO]:"info",[fs.WARN]:"warn",[fs.ERROR]:"error"},Wre=(t,e,...a)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Kre[e];if(s)console[s](`[${r}]  ${t.name}:`,...a);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class CI{constructor(e){this.name=e,this._logLevel=$re,this._logHandler=Wre,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fs))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Hre[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fs.DEBUG,...e),this._logHandler(this,fs.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fs.VERBOSE,...e),this._logHandler(this,fs.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fs.INFO,...e),this._logHandler(this,fs.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fs.WARN,...e),this._logHandler(this,fs.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fs.ERROR,...e),this._logHandler(this,fs.ERROR,...e)}}const Yre=(t,e)=>e.some(a=>t instanceof a);let O6,D6;function Xre(){return O6||(O6=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Jre(){return D6||(D6=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Kq=new WeakMap,H5=new WeakMap,Wq=new WeakMap,FE=new WeakMap,bI=new WeakMap;function Qre(t){const e=new Promise((a,r)=>{const s=()=>{t.removeEventListener("success",l),t.removeEventListener("error",h)},l=()=>{a(Og(t.result)),s()},h=()=>{r(t.error),s()};t.addEventListener("success",l),t.addEventListener("error",h)});return e.then(a=>{a instanceof IDBCursor&&Kq.set(a,t)}).catch(()=>{}),bI.set(e,t),e}function ene(t){if(H5.has(t))return;const e=new Promise((a,r)=>{const s=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",h),t.removeEventListener("abort",h)},l=()=>{a(),s()},h=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",l),t.addEventListener("error",h),t.addEventListener("abort",h)});H5.set(t,e)}let $5={get(t,e,a){if(t instanceof IDBTransaction){if(e==="done")return H5.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Wq.get(t);if(e==="store")return a.objectStoreNames[1]?void 0:a.objectStore(a.objectStoreNames[0])}return Og(t[e])},set(t,e,a){return t[e]=a,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function tne(t){$5=t($5)}function ane(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...a){const r=t.call(UE(this),e,...a);return Wq.set(r,e.sort?e.sort():[e]),Og(r)}:Jre().includes(t)?function(...e){return t.apply(UE(this),e),Og(Kq.get(this))}:function(...e){return Og(t.apply(UE(this),e))}}function rne(t){return typeof t=="function"?ane(t):(t instanceof IDBTransaction&&ene(t),Yre(t,Xre())?new Proxy(t,$5):t)}function Og(t){if(t instanceof IDBRequest)return Qre(t);if(FE.has(t))return FE.get(t);const e=rne(t);return e!==t&&(FE.set(t,e),bI.set(e,t)),e}const UE=t=>bI.get(t);function nne(t,e,{blocked:a,upgrade:r,blocking:s,terminated:l}={}){const h=indexedDB.open(t,e),n=Og(h);return r&&h.addEventListener("upgradeneeded",w=>{r(Og(h.result),w.oldVersion,w.newVersion,Og(h.transaction),w)}),a&&h.addEventListener("blocked",w=>a(w.oldVersion,w.newVersion,w)),n.then(w=>{l&&w.addEventListener("close",()=>l()),s&&w.addEventListener("versionchange",T=>s(T.oldVersion,T.newVersion,T))}).catch(()=>{}),n}const ine=["get","getKey","getAll","getAllKeys","count"],sne=["put","add","delete","clear"],kE=new Map;function M6(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(kE.get(e))return kE.get(e);const a=e.replace(/FromIndex$/,""),r=e!==a,s=sne.includes(a);if(!(a in(r?IDBIndex:IDBObjectStore).prototype)||!(s||ine.includes(a)))return;const l=async function(h,...n){const w=this.transaction(h,s?"readwrite":"readonly");let T=w.store;return r&&(T=T.index(n.shift())),(await Promise.all([T[a](...n),s&&w.done]))[0]};return kE.set(e,l),l}tne(t=>({...t,get:(e,a,r)=>M6(e,a)||t.get(e,a,r),has:(e,a)=>!!M6(e,a)||t.has(e,a)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class one{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(a=>{if(lne(a)){const r=a.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(a=>a).join(" ")}}function lne(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const K5="@firebase/app",I6="0.9.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0=new CI("@firebase/app"),une="@firebase/app-compat",cne="@firebase/analytics-compat",dne="@firebase/analytics",hne="@firebase/app-check-compat",fne="@firebase/app-check",pne="@firebase/auth",mne="@firebase/auth-compat",yne="@firebase/database",gne="@firebase/database-compat",Ane="@firebase/functions",_ne="@firebase/functions-compat",vne="@firebase/installations",wne="@firebase/installations-compat",Rne="@firebase/messaging",Tne="@firebase/messaging-compat",Sne="@firebase/performance",Cne="@firebase/performance-compat",bne="@firebase/remote-config",xne="@firebase/remote-config-compat",Pne="@firebase/storage",Ene="@firebase/storage-compat",Nne="@firebase/firestore",Vne="@firebase/firestore-compat",zne="firebase",One="9.23.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W5="[DEFAULT]",Dne={[K5]:"fire-core",[une]:"fire-core-compat",[dne]:"fire-analytics",[cne]:"fire-analytics-compat",[fne]:"fire-app-check",[hne]:"fire-app-check-compat",[pne]:"fire-auth",[mne]:"fire-auth-compat",[yne]:"fire-rtdb",[gne]:"fire-rtdb-compat",[Ane]:"fire-fn",[_ne]:"fire-fn-compat",[vne]:"fire-iid",[wne]:"fire-iid-compat",[Rne]:"fire-fcm",[Tne]:"fire-fcm-compat",[Sne]:"fire-perf",[Cne]:"fire-perf-compat",[bne]:"fire-rc",[xne]:"fire-rc-compat",[Pne]:"fire-gcs",[Ene]:"fire-gcs-compat",[Nne]:"fire-fst",[Vne]:"fire-fst-compat","fire-js":"fire-js",[zne]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb=new Map,Y5=new Map;function Mne(t,e){try{t.container.addComponent(e)}catch(a){h0.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,a)}}function f0(t){const e=t.name;if(Y5.has(e))return h0.debug(`There were multiple attempts to register component ${e}.`),!1;Y5.set(e,t);for(const a of hb.values())Mne(a,t);return!0}function Zx(t,e){const a=t.container.getProvider("heartbeat").getImmediate({optional:!0});return a&&a.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ine={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Dg=new yT("app","Firebase",Ine);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lne{constructor(e,a,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},a),this._name=a.name,this._automaticDataCollectionEnabled=a.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Fg("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Dg.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0=One;function Yq(t,e={}){let a=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:W5,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Dg.create("bad-app-name",{appName:String(s)});if(a||(a=qq()),!a)throw Dg.create("no-options");const l=hb.get(s);if(l){if(db(a,l.options)&&db(r,l.config))return l;throw Dg.create("duplicate-app",{appName:s})}const h=new qre(s);for(const w of Y5.values())h.addComponent(w);const n=new Lne(a,r,h);return hb.set(s,n),n}function xI(t=W5){const e=hb.get(t);if(!e&&t===W5&&qq())return Yq();if(!e)throw Dg.create("no-app",{appName:t});return e}function Pm(t,e,a){var r;let s=(r=Dne[t])!==null&&r!==void 0?r:t;a&&(s+=`-${a}`);const l=s.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const n=[`Unable to register library "${s}" with version "${e}":`];l&&n.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&h&&n.push("and"),h&&n.push(`version name "${e}" contains illegal characters (whitespace or "/")`),h0.warn(n.join(" "));return}f0(new Fg(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fne="firebase-heartbeat-database",Une=1,hR="firebase-heartbeat-store";let BE=null;function Xq(){return BE||(BE=nne(Fne,Une,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(hR)}}}).catch(t=>{throw Dg.create("idb-open",{originalErrorMessage:t.message})})),BE}async function kne(t){try{return await(await Xq()).transaction(hR).objectStore(hR).get(Jq(t))}catch(e){if(e instanceof Um)h0.warn(e.message);else{const a=Dg.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});h0.warn(a.message)}}}async function L6(t,e){try{const r=(await Xq()).transaction(hR,"readwrite");await r.objectStore(hR).put(e,Jq(t)),await r.done}catch(a){if(a instanceof Um)h0.warn(a.message);else{const r=Dg.create("idb-set",{originalErrorMessage:a==null?void 0:a.message});h0.warn(r.message)}}}function Jq(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bne=1024,Gne=30*24*60*60*1e3;class jne{constructor(e){this.container=e,this._heartbeatsCache=null;const a=this.container.getProvider("app").getImmediate();this._storage=new qne(a),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=F6();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const l=new Date(s.date).valueOf();return Date.now()-l<=Gne}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=F6(),{heartbeatsToSend:a,unsentEntries:r}=Zne(this._heartbeatsCache.heartbeats),s=cb(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function F6(){return new Date().toISOString().substring(0,10)}function Zne(t,e=Bne){const a=[];let r=t.slice();for(const s of t){const l=a.find(h=>h.agent===s.agent);if(l){if(l.dates.push(s.date),U6(a)>e){l.dates.pop();break}}else if(a.push({agent:s.agent,dates:[s.date]}),U6(a)>e){a.pop();break}r=r.slice(1)}return{heartbeatsToSend:a,unsentEntries:r}}class qne{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ore()?Dre().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await kne(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var a;if(await this._canUseIndexedDBPromise){const s=await this.read();return L6(this.app,{lastSentHeartbeatDate:(a=e.lastSentHeartbeatDate)!==null&&a!==void 0?a:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var a;if(await this._canUseIndexedDBPromise){const s=await this.read();return L6(this.app,{lastSentHeartbeatDate:(a=e.lastSentHeartbeatDate)!==null&&a!==void 0?a:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function U6(t){return cb(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hne(t){f0(new Fg("platform-logger",e=>new one(e),"PRIVATE")),f0(new Fg("heartbeat",e=>new jne(e),"PRIVATE")),Pm(K5,I6,t),Pm(K5,I6,"esm2017"),Pm("fire-js","")}Hne("");var $ne="firebase",Kne="9.23.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pm($ne,Kne,"app");function PI(t,e){var a={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(a[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(a[r[s]]=t[r[s]]);return a}function Qq(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Wne=Qq,eH=new yT("auth","Firebase",Qq());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb=new CI("@firebase/auth");function Yne(t,...e){fb.logLevel<=fs.WARN&&fb.warn(`Auth (${b0}): ${t}`,...e)}function UC(t,...e){fb.logLevel<=fs.ERROR&&fb.error(`Auth (${b0}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(t,...e){throw EI(t,...e)}function Em(t,...e){return EI(t,...e)}function Xne(t,e,a){const r=Object.assign(Object.assign({},Wne()),{[e]:a});return new yT("auth","Firebase",r).create(e,{appName:t.name})}function EI(t,...e){if(typeof t!="string"){const a=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(a,...r)}return eH.create(t,...e)}function ei(t,e,...a){if(!t)throw EI(e,...a)}function dy(t){const e="INTERNAL ASSERTION FAILED: "+t;throw UC(e),new Error(e)}function Ry(t,e){t||dy(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X5(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Jne(){return k6()==="http:"||k6()==="https:"}function k6(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qne(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Jne()||Nre()||"connection"in navigator)?navigator.onLine:!0}function eie(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,a){this.shortDelay=e,this.longDelay=a,Ry(a>e,"Short delay should be less than long delay!"),this.isMobile=Pre()||Vre()}get(){return Qne()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NI(t,e){Ry(t.emulator,"Emulator should always be set here");const{url:a}=t.emulator;return e?`${a}${e.startsWith("/")?e.slice(1):e}`:a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tH{static initialize(e,a,r){this.fetchImpl=e,a&&(this.headersImpl=a),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;dy("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;dy("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;dy("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tie={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aie=new AT(3e4,6e4);function Zv(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function qv(t,e,a,r,s={}){return aH(t,s,async()=>{let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});const n=gT(Object.assign({key:t.config.apiKey},h)).slice(1),w=await t._getAdditionalHeaders();return w["Content-Type"]="application/json",t.languageCode&&(w["X-Firebase-Locale"]=t.languageCode),tH.fetch()(rH(t,t.config.apiHost,a,n),Object.assign({method:e,headers:w,referrerPolicy:"no-referrer"},l))})}async function aH(t,e,a){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},tie),e);try{const s=new rie(t),l=await Promise.race([a(),s.promise]);s.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw sC(t,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const n=l.ok?h.errorMessage:h.error.message,[w,T]=n.split(" : ");if(w==="FEDERATED_USER_ID_ALREADY_LINKED")throw sC(t,"credential-already-in-use",h);if(w==="EMAIL_EXISTS")throw sC(t,"email-already-in-use",h);if(w==="USER_DISABLED")throw sC(t,"user-disabled",h);const P=r[w]||w.toLowerCase().replace(/[_\s]+/g,"-");if(T)throw Xne(t,P,T);Lp(t,P)}}catch(s){if(s instanceof Um)throw s;Lp(t,"network-request-failed",{message:String(s)})}}async function _T(t,e,a,r,s={}){const l=await qv(t,e,a,r,s);return"mfaPendingCredential"in l&&Lp(t,"multi-factor-auth-required",{_serverResponse:l}),l}function rH(t,e,a,r){const s=`${e}${a}?${r}`;return t.config.emulator?NI(t.config,s):`${t.config.apiScheme}://${s}`}class rie{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((a,r)=>{this.timer=setTimeout(()=>r(Em(this.auth,"network-request-failed")),aie.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function sC(t,e,a){const r={appName:t.name};a.email&&(r.email=a.email),a.phoneNumber&&(r.phoneNumber=a.phoneNumber);const s=Em(t,e,r);return s.customData._tokenResponse=a,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nie(t,e){return qv(t,"POST","/v1/accounts:delete",e)}async function iie(t,e){return qv(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sie(t,e=!1){const a=dl(t),r=await a.getIdToken(e),s=VI(r);ei(s&&s.exp&&s.auth_time&&s.iat,a.auth,"internal-error");const l=typeof s.firebase=="object"?s.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:s,token:r,authTime:Kw(GE(s.auth_time)),issuedAtTime:Kw(GE(s.iat)),expirationTime:Kw(GE(s.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function GE(t){return Number(t)*1e3}function VI(t){const[e,a,r]=t.split(".");if(e===void 0||a===void 0||r===void 0)return UC("JWT malformed, contained fewer than 3 sections"),null;try{const s=Gq(a);return s?JSON.parse(s):(UC("Failed to decode base64 JWT payload"),null)}catch(s){return UC("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function oie(t){const e=VI(t);return ei(e,"internal-error"),ei(typeof e.exp<"u","internal-error"),ei(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fR(t,e,a=!1){if(a)return e;try{return await e}catch(r){throw r instanceof Um&&lie(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function lie({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uie{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var a;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((a=this.user.stsTokenManager.expirationTime)!==null&&a!==void 0?a:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const a=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},a)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nH{constructor(e,a){this.createdAt=e,this.lastLoginAt=a,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kw(this.lastLoginAt),this.creationTime=Kw(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pb(t){var e;const a=t.auth,r=await t.getIdToken(),s=await fR(t,iie(a,{idToken:r}));ei(s==null?void 0:s.users.length,a,"internal-error");const l=s.users[0];t._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?hie(l.providerUserInfo):[],n=die(t.providerData,h),w=t.isAnonymous,T=!(t.email&&l.passwordHash)&&!(n!=null&&n.length),P=w?T:!1,z={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:n,metadata:new nH(l.createdAt,l.lastLoginAt),isAnonymous:P};Object.assign(t,z)}async function cie(t){const e=dl(t);await pb(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function die(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function hie(t){return t.map(e=>{var{providerId:a}=e,r=PI(e,["providerId"]);return{providerId:a,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fie(t,e){const a=await aH(t,{},async()=>{const r=gT({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:l}=t.config,h=rH(t,s,"/v1/token",`key=${l}`),n=await t._getAdditionalHeaders();return n["Content-Type"]="application/x-www-form-urlencoded",tH.fetch()(h,{method:"POST",headers:n,body:r})});return{accessToken:a.access_token,expiresIn:a.expires_in,refreshToken:a.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ei(e.idToken,"internal-error"),ei(typeof e.idToken<"u","internal-error"),ei(typeof e.refreshToken<"u","internal-error");const a="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):oie(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,a)}async getToken(e,a=!1){return ei(!this.accessToken||this.refreshToken,e,"user-token-expired"),!a&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,a){const{accessToken:r,refreshToken:s,expiresIn:l}=await fie(e,a);this.updateTokensAndExpiration(r,s,Number(l))}updateTokensAndExpiration(e,a,r){this.refreshToken=a||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,a){const{refreshToken:r,accessToken:s,expirationTime:l}=a,h=new pR;return r&&(ei(typeof r=="string","internal-error",{appName:e}),h.refreshToken=r),s&&(ei(typeof s=="string","internal-error",{appName:e}),h.accessToken=s),l&&(ei(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pR,this.toJSON())}_performRefresh(){return dy("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(t,e){ei(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class i0{constructor(e){var{uid:a,auth:r,stsTokenManager:s}=e,l=PI(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new uie(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=a,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new nH(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const a=await fR(this,this.stsTokenManager.getToken(this.auth,e));return ei(a,this.auth,"internal-error"),this.accessToken!==a&&(this.accessToken=a,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),a}getIdTokenResult(e){return sie(this,e)}reload(){return cie(this)}_assign(e){this!==e&&(ei(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(a=>Object.assign({},a)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const a=new i0(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return a.metadata._copy(this.metadata),a}_onReload(e){ei(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,a=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),a&&await pb(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await fR(this,nie(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,a){var r,s,l,h,n,w,T,P;const z=(r=a.displayName)!==null&&r!==void 0?r:void 0,k=(s=a.email)!==null&&s!==void 0?s:void 0,U=(l=a.phoneNumber)!==null&&l!==void 0?l:void 0,Z=(h=a.photoURL)!==null&&h!==void 0?h:void 0,H=(n=a.tenantId)!==null&&n!==void 0?n:void 0,q=(w=a._redirectEventId)!==null&&w!==void 0?w:void 0,J=(T=a.createdAt)!==null&&T!==void 0?T:void 0,re=(P=a.lastLoginAt)!==null&&P!==void 0?P:void 0,{uid:ce,emailVerified:ye,isAnonymous:he,providerData:_e,stsTokenManager:me}=a;ei(ce&&me,e,"internal-error");const Re=pR.fromJSON(this.name,me);ei(typeof ce=="string",e,"internal-error"),mg(z,e.name),mg(k,e.name),ei(typeof ye=="boolean",e,"internal-error"),ei(typeof he=="boolean",e,"internal-error"),mg(U,e.name),mg(Z,e.name),mg(H,e.name),mg(q,e.name),mg(J,e.name),mg(re,e.name);const be=new i0({uid:ce,auth:e,email:k,emailVerified:ye,displayName:z,isAnonymous:he,photoURL:Z,phoneNumber:U,tenantId:H,stsTokenManager:Re,createdAt:J,lastLoginAt:re});return _e&&Array.isArray(_e)&&(be.providerData=_e.map(De=>Object.assign({},De))),q&&(be._redirectEventId=q),be}static async _fromIdTokenResponse(e,a,r=!1){const s=new pR;s.updateFromServerResponse(a);const l=new i0({uid:a.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await pb(l),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6=new Map;function hy(t){Ry(t instanceof Function,"Expected a class definition");let e=B6.get(t);return e?(Ry(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,B6.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iH{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,a){this.storage[e]=a}async _get(e){const a=this.storage[e];return a===void 0?null:a}async _remove(e){delete this.storage[e]}_addListener(e,a){}_removeListener(e,a){}}iH.type="NONE";const G6=iH;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(t,e,a){return`firebase:${t}:${e}:${a}`}class Z_{constructor(e,a,r){this.persistence=e,this.auth=a,this.userKey=r;const{config:s,name:l}=this.auth;this.fullUserKey=kC(this.userKey,s.apiKey,l),this.fullPersistenceKey=kC("persistence",s.apiKey,l),this.boundEventHandler=a._onStorageEvent.bind(a),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?i0._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const a=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,a)return this.setCurrentUser(a)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,a,r="authUser"){if(!a.length)return new Z_(hy(G6),e,r);const s=(await Promise.all(a.map(async T=>{if(await T._isAvailable())return T}))).filter(T=>T);let l=s[0]||hy(G6);const h=kC(r,e.config.apiKey,e.name);let n=null;for(const T of a)try{const P=await T._get(h);if(P){const z=i0._fromJSON(e,P);T!==l&&(n=z),l=T;break}}catch{}const w=s.filter(T=>T._shouldAllowMigration);return!l._shouldAllowMigration||!w.length?new Z_(l,e,r):(l=w[0],n&&await l._set(h,n.toJSON()),await Promise.all(a.map(async T=>{if(T!==l)try{await T._remove(h)}catch{}})),new Z_(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j6(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lH(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sH(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cH(e))return"Blackberry";if(dH(e))return"Webos";if(zI(e))return"Safari";if((e.includes("chrome/")||oH(e))&&!e.includes("edge/"))return"Chrome";if(uH(e))return"Android";{const a=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(a);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function sH(t=_d()){return/firefox\//i.test(t)}function zI(t=_d()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function oH(t=_d()){return/crios\//i.test(t)}function lH(t=_d()){return/iemobile/i.test(t)}function uH(t=_d()){return/android/i.test(t)}function cH(t=_d()){return/blackberry/i.test(t)}function dH(t=_d()){return/webos/i.test(t)}function qx(t=_d()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function pie(t=_d()){var e;return qx(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function mie(){return zre()&&document.documentMode===10}function hH(t=_d()){return qx(t)||uH(t)||dH(t)||cH(t)||/windows phone/i.test(t)||lH(t)}function yie(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fH(t,e=[]){let a;switch(t){case"Browser":a=j6(_d());break;case"Worker":a=`${j6(_d())}-${t}`;break;default:a=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${a}/JsCore/${b0}/${r}`}async function pH(t,e){return qv(t,"GET","/v2/recaptchaConfig",Zv(t,e))}function Z6(t){return t!==void 0&&t.enterprise!==void 0}class mH{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(a=>a.provider==="EMAIL_PASSWORD_PROVIDER"&&a.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gie(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function yH(t){return new Promise((e,a)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const l=Em("internal-error");l.customData=s,a(l)},r.type="text/javascript",r.charset="UTF-8",gie().appendChild(r)})}function Aie(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const _ie="https://www.google.com/recaptcha/enterprise.js?render=",vie="recaptcha-enterprise",wie="NO_RECAPTCHA";class gH{constructor(e){this.type=vie,this.auth=Hv(e)}async verify(e="verify",a=!1){async function r(l){if(!a){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,n)=>{pH(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(w=>{if(w.recaptchaKey===void 0)n(new Error("recaptcha Enterprise site key undefined"));else{const T=new mH(w);return l.tenantId==null?l._agentRecaptchaConfig=T:l._tenantRecaptchaConfigs[l.tenantId]=T,h(T.siteKey)}}).catch(w=>{n(w)})})}function s(l,h,n){const w=window.grecaptcha;Z6(w)?w.enterprise.ready(()=>{w.enterprise.execute(l,{action:e}).then(T=>{h(T)}).catch(()=>{h(wie)})}):n(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((l,h)=>{r(this.auth).then(n=>{if(!a&&Z6(window.grecaptcha))s(n,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}yH(_ie+n).then(()=>{s(n,l,h)}).catch(w=>{h(w)})}}).catch(n=>{h(n)})})}}async function mb(t,e,a,r=!1){const s=new gH(t);let l;try{l=await s.verify(a)}catch{l=await s.verify(a,!0)}const h=Object.assign({},e);return r?Object.assign(h,{captchaResp:l}):Object.assign(h,{captchaResponse:l}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rie{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,a){const r=l=>new Promise((h,n)=>{try{const w=e(l);h(w)}catch(w){n(w)}});r.onAbort=a,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const a=[];try{for(const r of this.queue)await r(e),r.onAbort&&a.push(r.onAbort)}catch(r){a.reverse();for(const s of a)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tie{constructor(e,a,r,s){this.app=e,this.heartbeatServiceProvider=a,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new q6(this),this.idTokenSubscription=new q6(this),this.beforeStateQueue=new Rie(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eH,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,a){return a&&(this._popupRedirectResolver=hy(a)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Z_.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(a),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var a;const r=await this.assertedPersistence.getCurrentUser();let s=r,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(a=this.redirectUser)===null||a===void 0?void 0:a._redirectEventId,n=s==null?void 0:s._redirectEventId,w=await this.tryRedirectSignIn(e);(!h||h===n)&&(w!=null&&w.user)&&(s=w.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(h){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ei(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let a=null;try{a=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return a}async reloadAndSetCurrentUserOrClear(e){try{await pb(e)}catch(a){if((a==null?void 0:a.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=eie()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const a=e?dl(e):null;return a&&ei(a.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(a&&a._clone(this))}async _updateCurrentUser(e,a=!1){if(!this._deleted)return e&&ei(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),a||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(hy(e))})}async initializeRecaptchaConfig(){const e=await pH(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),a=new mH(e);this.tenantId==null?this._agentRecaptchaConfig=a:this._tenantRecaptchaConfigs[this.tenantId]=a,a.emailPasswordEnabled&&new gH(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new yT("auth","Firebase",e())}onAuthStateChanged(e,a,r){return this.registerStateListener(this.authStateSubscription,e,a,r)}beforeAuthStateChanged(e,a){return this.beforeStateQueue.pushCallback(e,a)}onIdTokenChanged(e,a,r){return this.registerStateListener(this.idTokenSubscription,e,a,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,a){const r=await this.getOrInitRedirectPersistenceManager(a);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const a=e&&hy(e)||this._popupRedirectResolver;ei(a,this,"argument-error"),this.redirectPersistenceManager=await Z_.create(this,[hy(a._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var a,r;return this._isInitialized&&await this.queue(async()=>{}),((a=this._currentUser)===null||a===void 0?void 0:a._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,a;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(a=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&a!==void 0?a:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,a,r,s){if(this._deleted)return()=>{};const l=typeof a=="function"?a:a.next.bind(a),h=this._isInitialized?Promise.resolve():this._initializationPromise;return ei(h,this,"internal-error"),h.then(()=>l(this.currentUser)),typeof a=="function"?e.addObserver(a,r,s):e.addObserver(a)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ei(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fH(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const a={"X-Client-Version":this.clientVersion};this.app.options.appId&&(a["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(a["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(a["X-Firebase-AppCheck"]=s),a}async _getAppCheckToken(){var e;const a=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return a!=null&&a.error&&Yne(`Error while retrieving App Check token: ${a.error}`),a==null?void 0:a.token}}function Hv(t){return dl(t)}class q6{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ure(a=>this.observer=a)}get next(){return ei(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sie(t,e){const a=Zx(t,"auth");if(a.isInitialized()){const s=a.getImmediate(),l=a.getOptions();if(db(l,e??{}))return s;Lp(s,"already-initialized")}return a.initialize({options:e})}function Cie(t,e){const a=(e==null?void 0:e.persistence)||[],r=(Array.isArray(a)?a:[a]).map(hy);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function bie(t,e,a){const r=Hv(t);ei(r._canInitEmulator,r,"emulator-config-failed"),ei(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,l=AH(e),{host:h,port:n}=xie(e),w=n===null?"":`:${n}`;r.config.emulator={url:`${l}//${h}${w}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:h,port:n,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:s})}),Pie()}function AH(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function xie(t){const e=AH(t),a=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!a)return{host:"",port:null};const r=a[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const l=s[1];return{host:l,port:H6(r.substr(l.length+1))}}else{const[l,h]=r.split(":");return{host:l,port:H6(h)}}}function H6(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Pie(){function t(){const e=document.createElement("p"),a=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",a.position="fixed",a.width="100%",a.backgroundColor="#ffffff",a.border=".1em solid #000000",a.color="#b50000",a.bottom="0px",a.left="0px",a.margin="0px",a.zIndex="10000",a.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e,a){this.providerId=e,this.signInMethod=a}toJSON(){return dy("not implemented")}_getIdTokenResponse(e){return dy("not implemented")}_linkToIdToken(e,a){return dy("not implemented")}_getReauthenticationResolver(e){return dy("not implemented")}}async function Eie(t,e){return qv(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jE(t,e){return _T(t,"POST","/v1/accounts:signInWithPassword",Zv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nie(t,e){return _T(t,"POST","/v1/accounts:signInWithEmailLink",Zv(t,e))}async function Vie(t,e){return _T(t,"POST","/v1/accounts:signInWithEmailLink",Zv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR extends OI{constructor(e,a,r,s=null){super("password",r),this._email=e,this._password=a,this._tenantId=s}static _fromEmailAndPassword(e,a){return new mR(e,a,"password")}static _fromEmailAndCode(e,a,r=null){return new mR(e,a,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const a=typeof e=="string"?JSON.parse(e):e;if(a!=null&&a.email&&(a!=null&&a.password)){if(a.signInMethod==="password")return this._fromEmailAndPassword(a.email,a.password);if(a.signInMethod==="emailLink")return this._fromEmailAndCode(a.email,a.password,a.tenantId)}return null}async _getIdTokenResponse(e){var a;switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((a=e._getRecaptchaConfig())===null||a===void 0)&&a.emailPasswordEnabled){const s=await mb(e,r,"signInWithPassword");return jE(e,s)}else return jE(e,r).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const l=await mb(e,r,"signInWithPassword");return jE(e,l)}else return Promise.reject(s)});case"emailLink":return Nie(e,{email:this._email,oobCode:this._password});default:Lp(e,"internal-error")}}async _linkToIdToken(e,a){switch(this.signInMethod){case"password":return Eie(e,{idToken:a,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return Vie(e,{idToken:a,email:this._email,oobCode:this._password});default:Lp(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q_(t,e){return _T(t,"POST","/v1/accounts:signInWithIdp",Zv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zie="http://localhost";class p0 extends OI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const a=new p0(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(a.idToken=e.idToken),e.accessToken&&(a.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(a.nonce=e.nonce),e.pendingToken&&(a.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(a.accessToken=e.oauthToken,a.secret=e.oauthTokenSecret):Lp("argument-error"),a}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const a=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=a,l=PI(a,["providerId","signInMethod"]);if(!r||!s)return null;const h=new p0(r,s);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const a=this.buildRequest();return q_(e,a)}_linkToIdToken(e,a){const r=this.buildRequest();return r.idToken=a,q_(e,r)}_getReauthenticationResolver(e){const a=this.buildRequest();return a.autoCreate=!1,q_(e,a)}buildRequest(){const e={requestUri:zie,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const a={};this.idToken&&(a.id_token=this.idToken),this.accessToken&&(a.access_token=this.accessToken),this.secret&&(a.oauth_token_secret=this.secret),a.providerId=this.providerId,this.nonce&&!this.pendingToken&&(a.nonce=this.nonce),e.postBody=gT(a)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oie(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Die(t){const e=Lw(Fw(t)).link,a=e?Lw(Fw(e)).deep_link_id:null,r=Lw(Fw(t)).deep_link_id;return(r?Lw(Fw(r)).link:null)||r||a||e||t}class DI{constructor(e){var a,r,s,l,h,n;const w=Lw(Fw(e)),T=(a=w.apiKey)!==null&&a!==void 0?a:null,P=(r=w.oobCode)!==null&&r!==void 0?r:null,z=Oie((s=w.mode)!==null&&s!==void 0?s:null);ei(T&&P&&z,"argument-error"),this.apiKey=T,this.operation=z,this.code=P,this.continueUrl=(l=w.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(h=w.languageCode)!==null&&h!==void 0?h:null,this.tenantId=(n=w.tenantId)!==null&&n!==void 0?n:null}static parseLink(e){const a=Die(e);try{return new DI(a)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(){this.providerId=$v.PROVIDER_ID}static credential(e,a){return mR._fromEmailAndPassword(e,a)}static credentialWithLink(e,a){const r=DI.parseLink(a);return ei(r,"argument-error"),mR._fromEmailAndCode(e,r.code,r.tenantId)}}$v.PROVIDER_ID="password";$v.EMAIL_PASSWORD_SIGN_IN_METHOD="password";$v.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _H{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT extends _H{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg extends vT{constructor(){super("facebook.com")}static credential(e){return p0._fromParams({providerId:Rg.PROVIDER_ID,signInMethod:Rg.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rg.credentialFromTaggedObject(e)}static credentialFromError(e){return Rg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rg.credential(e.oauthAccessToken)}catch{return null}}}Rg.FACEBOOK_SIGN_IN_METHOD="facebook.com";Rg.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg extends vT{constructor(){super("google.com"),this.addScope("profile")}static credential(e,a){return p0._fromParams({providerId:Tg.PROVIDER_ID,signInMethod:Tg.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:a})}static credentialFromResult(e){return Tg.credentialFromTaggedObject(e)}static credentialFromError(e){return Tg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:a,oauthAccessToken:r}=e;if(!a&&!r)return null;try{return Tg.credential(a,r)}catch{return null}}}Tg.GOOGLE_SIGN_IN_METHOD="google.com";Tg.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg extends vT{constructor(){super("github.com")}static credential(e){return p0._fromParams({providerId:Sg.PROVIDER_ID,signInMethod:Sg.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sg.credentialFromTaggedObject(e)}static credentialFromError(e){return Sg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sg.credential(e.oauthAccessToken)}catch{return null}}}Sg.GITHUB_SIGN_IN_METHOD="github.com";Sg.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg extends vT{constructor(){super("twitter.com")}static credential(e,a){return p0._fromParams({providerId:Cg.PROVIDER_ID,signInMethod:Cg.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:a})}static credentialFromResult(e){return Cg.credentialFromTaggedObject(e)}static credentialFromError(e){return Cg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:a,oauthTokenSecret:r}=e;if(!a||!r)return null;try{return Cg.credential(a,r)}catch{return null}}}Cg.TWITTER_SIGN_IN_METHOD="twitter.com";Cg.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZE(t,e){return _T(t,"POST","/v1/accounts:signUp",Zv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,a,r,s=!1){const l=await i0._fromIdTokenResponse(e,r,s),h=$6(r);return new m0({user:l,providerId:h,_tokenResponse:r,operationType:a})}static async _forOperation(e,a,r){await e._updateTokensIfNecessary(r,!0);const s=$6(r);return new m0({user:e,providerId:s,_tokenResponse:r,operationType:a})}}function $6(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb extends Um{constructor(e,a,r,s){var l;super(a.code,a.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,yb.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:a.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,a,r,s){return new yb(e,a,r,s)}}function vH(t,e,a,r){return(e==="reauthenticate"?a._getReauthenticationResolver(t):a._getIdTokenResponse(t)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?yb._fromErrorAndOperation(t,l,e,r):l})}async function Mie(t,e,a=!1){const r=await fR(t,e._linkToIdToken(t.auth,await t.getIdToken()),a);return m0._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iie(t,e,a=!1){const{auth:r}=t,s="reauthenticate";try{const l=await fR(t,vH(r,s,e,t),a);ei(l.idToken,r,"internal-error");const h=VI(l.idToken);ei(h,r,"internal-error");const{sub:n}=h;return ei(t.uid===n,r,"user-mismatch"),m0._forOperation(t,s,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Lp(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wH(t,e,a=!1){const r="signIn",s=await vH(t,r,e),l=await m0._fromIdTokenResponse(t,r,s);return a||await t._updateCurrentUser(l.user),l}async function Lie(t,e){return wH(Hv(t),e)}async function Fie(t,e,a){var r;const s=Hv(t),l={returnSecureToken:!0,email:e,password:a,clientType:"CLIENT_TYPE_WEB"};let h;if(!((r=s._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const T=await mb(s,l,"signUpPassword");h=ZE(s,T)}else h=ZE(s,l).catch(async T=>{if(T.code==="auth/missing-recaptcha-token"){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const P=await mb(s,l,"signUpPassword");return ZE(s,P)}else return Promise.reject(T)});const n=await h.catch(T=>Promise.reject(T)),w=await m0._fromIdTokenResponse(s,"signIn",n);return await s._updateCurrentUser(w.user),w}function Uie(t,e,a){return Lie(dl(t),$v.credential(e,a))}function kie(t,e,a,r){return dl(t).onIdTokenChanged(e,a,r)}function Bie(t,e,a){return dl(t).beforeAuthStateChanged(e,a)}const gb="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RH{constructor(e,a){this.storageRetriever=e,this.type=a}_isAvailable(){try{return this.storage?(this.storage.setItem(gb,"1"),this.storage.removeItem(gb),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,a){return this.storage.setItem(e,JSON.stringify(a)),Promise.resolve()}_get(e){const a=this.storage.getItem(e);return Promise.resolve(a?JSON.parse(a):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gie(){const t=_d();return zI(t)||qx(t)}const jie=1e3,Zie=10;class TH extends RH{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,a)=>this.onStorageEvent(e,a),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Gie()&&yie(),this.fallbackToPolling=hH(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const a of Object.keys(this.listeners)){const r=this.storage.getItem(a),s=this.localCache[a];r!==s&&e(a,s,r)}}onStorageEvent(e,a=!1){if(!e.key){this.forAllChangedKeys((h,n,w)=>{this.notifyListeners(h,w)});return}const r=e.key;if(a?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const h=this.storage.getItem(r);if(e.newValue!==h)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!a)return}const s=()=>{const h=this.storage.getItem(r);!a&&this.localCache[r]===h||this.notifyListeners(r,h)},l=this.storage.getItem(r);mie()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Zie):s()}notifyListeners(e,a){this.localCache[e]=a;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(a&&JSON.parse(a))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,a,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:a,newValue:r}),!0)})},jie)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,a){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(a)}_removeListener(e,a){this.listeners[e]&&(this.listeners[e].delete(a),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,a){await super._set(e,a),this.localCache[e]=JSON.stringify(a)}async _get(e){const a=await super._get(e);return this.localCache[e]=JSON.stringify(a),a}async _remove(e){await super._remove(e),delete this.localCache[e]}}TH.type="LOCAL";const qie=TH;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SH extends RH{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,a){}_removeListener(e,a){}}SH.type="SESSION";const CH=SH;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hie(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(a){return{fulfilled:!1,reason:a}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const a=this.receivers.find(s=>s.isListeningto(e));if(a)return a;const r=new Hx(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const a=e,{eventId:r,eventType:s,data:l}=a.data,h=this.handlersMap[s];if(!(h!=null&&h.size))return;a.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const n=Array.from(h).map(async T=>T(a.origin,l)),w=await Hie(n);a.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:w})}_subscribe(e,a){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(a)}_unsubscribe(e,a){this.handlersMap[e]&&a&&this.handlersMap[e].delete(a),(!a||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Hx.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(t="",e=10){let a="";for(let r=0;r<e;r++)a+=Math.floor(Math.random()*10);return t+a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ie{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,a,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let l,h;return new Promise((n,w)=>{const T=MI("",20);s.port1.start();const P=setTimeout(()=>{w(new Error("unsupported_event"))},r);h={messageChannel:s,onMessage(z){const k=z;if(k.data.eventId===T)switch(k.data.status){case"ack":clearTimeout(P),l=setTimeout(()=>{w(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),n(k.data.response);break;default:clearTimeout(P),clearTimeout(l),w(new Error("invalid_response"));break}}},this.handlers.add(h),s.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:T,data:a},[s.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(){return window}function Kie(t){Nm().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bH(){return typeof Nm().WorkerGlobalScope<"u"&&typeof Nm().importScripts=="function"}async function Wie(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Yie(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Xie(){return bH()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xH="firebaseLocalStorageDb",Jie=1,Ab="firebaseLocalStorage",PH="fbase_key";class wT{constructor(e){this.request=e}toPromise(){return new Promise((e,a)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{a(this.request.error)})})}}function $x(t,e){return t.transaction([Ab],e?"readwrite":"readonly").objectStore(Ab)}function Qie(){const t=indexedDB.deleteDatabase(xH);return new wT(t).toPromise()}function J5(){const t=indexedDB.open(xH,Jie);return new Promise((e,a)=>{t.addEventListener("error",()=>{a(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ab,{keyPath:PH})}catch(s){a(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ab)?e(r):(r.close(),await Qie(),e(await J5()))})})}async function K6(t,e,a){const r=$x(t,!0).put({[PH]:e,value:a});return new wT(r).toPromise()}async function ese(t,e){const a=$x(t,!1).get(e),r=await new wT(a).toPromise();return r===void 0?null:r.value}function W6(t,e){const a=$x(t,!0).delete(e);return new wT(a).toPromise()}const tse=800,ase=3;class EH{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await J5(),this.db)}async _withRetries(e){let a=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(a++>ase)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bH()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hx._getInstance(Xie()),this.receiver._subscribe("keyChanged",async(e,a)=>({keyProcessed:(await this._poll()).includes(a.key)})),this.receiver._subscribe("ping",async(e,a)=>["keyChanged"])}async initializeSender(){var e,a;if(this.activeServiceWorker=await Wie(),!this.activeServiceWorker)return;this.sender=new $ie(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((a=r[0])===null||a===void 0)&&a.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Yie()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await J5();return await K6(e,gb,"1"),await W6(e,gb),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,a){return this._withPendingWrite(async()=>(await this._withRetries(r=>K6(r,e,a)),this.localCache[e]=a,this.notifyServiceWorker(e)))}async _get(e){const a=await this._withRetries(r=>ese(r,e));return this.localCache[e]=a,a}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(a=>W6(a,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const l=$x(s,!1).getAll();return new wT(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const a=[],r=new Set;for(const{fbase_key:s,value:l}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(l)&&(this.notifyListeners(s,l),a.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),a.push(s));return a}notifyListeners(e,a){this.localCache[e]=a;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(a)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),tse)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,a){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(a)}_removeListener(e,a){this.listeners[e]&&(this.listeners[e].delete(a),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}EH.type="LOCAL";const rse=EH;new AT(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nse(t,e){return e?hy(e):(ei(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II extends OI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return q_(e,this._buildIdpRequest())}_linkToIdToken(e,a){return q_(e,this._buildIdpRequest(a))}_getReauthenticationResolver(e){return q_(e,this._buildIdpRequest())}_buildIdpRequest(e){const a={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(a.idToken=e),a}}function ise(t){return wH(t.auth,new II(t),t.bypassAuthState)}function sse(t){const{auth:e,user:a}=t;return ei(a,e,"internal-error"),Iie(a,new II(t),t.bypassAuthState)}async function ose(t){const{auth:e,user:a}=t;return ei(a,e,"internal-error"),Mie(a,new II(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NH{constructor(e,a,r,s,l=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(a)?a:[a]}execute(){return new Promise(async(e,a)=>{this.pendingPromise={resolve:e,reject:a};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:a,sessionId:r,postBody:s,tenantId:l,error:h,type:n}=e;if(h){this.reject(h);return}const w={auth:this.auth,requestUri:a,sessionId:r,tenantId:l||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(n)(w))}catch(T){this.reject(T)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ise;case"linkViaPopup":case"linkViaRedirect":return ose;case"reauthViaPopup":case"reauthViaRedirect":return sse;default:Lp(this.auth,"internal-error")}}resolve(e){Ry(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ry(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lse=new AT(2e3,1e4);class M_ extends NH{constructor(e,a,r,s,l){super(e,a,s,l),this.provider=r,this.authWindow=null,this.pollId=null,M_.currentPopupAction&&M_.currentPopupAction.cancel(),M_.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ei(e,this.auth,"internal-error"),e}async onExecution(){Ry(this.filter.length===1,"Popup operations only handle one event");const e=MI();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(a=>{this.reject(a)}),this.resolver._isIframeWebStorageSupported(this.auth,a=>{a||this.reject(Em(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Em(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,M_.currentPopupAction=null}pollUserCancellation(){const e=()=>{var a,r;if(!((r=(a=this.authWindow)===null||a===void 0?void 0:a.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Em(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,lse.get())};e()}}M_.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const use="pendingRedirect",BC=new Map;class cse extends NH{constructor(e,a,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],a,void 0,r),this.eventId=null}async execute(){let e=BC.get(this.auth._key());if(!e){try{const r=await dse(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(a){e=()=>Promise.reject(a)}BC.set(this.auth._key(),e)}return this.bypassAuthState||BC.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const a=await this.auth._redirectUserForId(e.eventId);if(a)return this.user=a,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function dse(t,e){const a=pse(e),r=fse(t);if(!await r._isAvailable())return!1;const s=await r._get(a)==="true";return await r._remove(a),s}function hse(t,e){BC.set(t._key(),e)}function fse(t){return hy(t._redirectPersistence)}function pse(t){return kC(use,t.config.apiKey,t.name)}async function mse(t,e,a=!1){const r=Hv(t),s=nse(r,e),h=await new cse(r,s,a).execute();return h&&!a&&(delete h.user._redirectEventId,await r._persistUserIfCurrent(h.user),await r._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yse=10*60*1e3;class gse{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let a=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(a=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Ase(e)||(this.hasHandledPotentialRedirect=!0,a||(this.queuedRedirectEvent=e,a=!0)),a}sendToConsumer(e,a){var r;if(e.error&&!VH(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";a.onError(Em(this.auth,s))}else a.onAuthEvent(e)}isEventForConsumer(e,a){const r=a.eventId===null||!!e.eventId&&e.eventId===a.eventId;return a.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=yse&&this.cachedEventUids.clear(),this.cachedEventUids.has(Y6(e))}saveEventToCache(e){this.cachedEventUids.add(Y6(e)),this.lastProcessedEventTime=Date.now()}}function Y6(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function VH({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Ase(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return VH(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _se(t,e={}){return qv(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vse=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wse=/^https?/;async function Rse(t){if(t.config.emulator)return;const{authorizedDomains:e}=await _se(t);for(const a of e)try{if(Tse(a))return}catch{}Lp(t,"unauthorized-domain")}function Tse(t){const e=X5(),{protocol:a,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const h=new URL(t);return h.hostname===""&&r===""?a==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):a==="chrome-extension:"&&h.hostname===r}if(!wse.test(a))return!1;if(vse.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sse=new AT(3e4,6e4);function X6(){const t=Nm().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let a=0;a<t.CP.length;a++)t.CP[a]=null}}function Cse(t){return new Promise((e,a)=>{var r,s,l;function h(){X6(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{X6(),a(Em(t,"network-request-failed"))},timeout:Sse.get()})}if(!((s=(r=Nm().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((l=Nm().gapi)===null||l===void 0)&&l.load)h();else{const n=Aie("iframefcb");return Nm()[n]=()=>{gapi.load?h():a(Em(t,"network-request-failed"))},yH(`https://apis.google.com/js/api.js?onload=${n}`).catch(w=>a(w))}}).catch(e=>{throw GC=null,e})}let GC=null;function bse(t){return GC=GC||Cse(t),GC}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xse=new AT(5e3,15e3),Pse="__/auth/iframe",Ese="emulator/auth/iframe",Nse={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Vse=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zse(t){const e=t.config;ei(e.authDomain,t,"auth-domain-config-required");const a=e.emulator?NI(e,Ese):`https://${t.config.authDomain}/${Pse}`,r={apiKey:e.apiKey,appName:t.name,v:b0},s=Vse.get(t.config.apiHost);s&&(r.eid=s);const l=t._getFrameworks();return l.length&&(r.fw=l.join(",")),`${a}?${gT(r).slice(1)}`}async function Ose(t){const e=await bse(t),a=Nm().gapi;return ei(a,t,"internal-error"),e.open({where:document.body,url:zse(t),messageHandlersFilter:a.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Nse,dontclear:!0},r=>new Promise(async(s,l)=>{await r.restyle({setHideOnLeave:!1});const h=Em(t,"network-request-failed"),n=Nm().setTimeout(()=>{l(h)},xse.get());function w(){Nm().clearTimeout(n),s(r)}r.ping(w).then(w,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dse={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Mse=500,Ise=600,Lse="_blank",Fse="http://localhost";class J6{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Use(t,e,a,r=Mse,s=Ise){const l=Math.max((window.screen.availHeight-s)/2,0).toString(),h=Math.max((window.screen.availWidth-r)/2,0).toString();let n="";const w=Object.assign(Object.assign({},Dse),{width:r.toString(),height:s.toString(),top:l,left:h}),T=_d().toLowerCase();a&&(n=oH(T)?Lse:a),sH(T)&&(e=e||Fse,w.scrollbars="yes");const P=Object.entries(w).reduce((k,[U,Z])=>`${k}${U}=${Z},`,"");if(pie(T)&&n!=="_self")return kse(e||"",n),new J6(null);const z=window.open(e||"",n,P);ei(z,t,"popup-blocked");try{z.focus()}catch{}return new J6(z)}function kse(t,e){const a=document.createElement("a");a.href=t,a.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),a.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bse="__/auth/handler",Gse="emulator/auth/handler",jse=encodeURIComponent("fac");async function Q6(t,e,a,r,s,l){ei(t.config.authDomain,t,"auth-domain-config-required"),ei(t.config.apiKey,t,"invalid-api-key");const h={apiKey:t.config.apiKey,appName:t.name,authType:a,redirectUrl:r,v:b0,eventId:s};if(e instanceof _H){e.setDefaultLanguage(t.languageCode),h.providerId=e.providerId||"",Fre(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[P,z]of Object.entries({}))h[P]=z}if(e instanceof vT){const P=e.getScopes().filter(z=>z!=="");P.length>0&&(h.scopes=P.join(","))}t.tenantId&&(h.tid=t.tenantId);const n=h;for(const P of Object.keys(n))n[P]===void 0&&delete n[P];const w=await t._getAppCheckToken(),T=w?`#${jse}=${encodeURIComponent(w)}`:"";return`${Zse(t)}?${gT(n).slice(1)}${T}`}function Zse({config:t}){return t.emulator?NI(t,Gse):`https://${t.authDomain}/${Bse}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE="webStorageSupport";class qse{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=CH,this._completeRedirectFn=mse,this._overrideRedirectResult=hse}async _openPopup(e,a,r,s){var l;Ry((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await Q6(e,a,r,X5(),s);return Use(e,h,MI())}async _openRedirect(e,a,r,s){await this._originValidation(e);const l=await Q6(e,a,r,X5(),s);return Kie(l),new Promise(()=>{})}_initialize(e){const a=e._key();if(this.eventManagers[a]){const{manager:s,promise:l}=this.eventManagers[a];return s?Promise.resolve(s):(Ry(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[a]={promise:r},r.catch(()=>{delete this.eventManagers[a]}),r}async initAndGetManager(e){const a=await Ose(e),r=new gse(e);return a.register("authEvent",s=>(ei(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=a,r}_isIframeWebStorageSupported(e,a){this.iframes[e._key()].send(qE,{type:qE},s=>{var l;const h=(l=s==null?void 0:s[0])===null||l===void 0?void 0:l[qE];h!==void 0&&a(!!h),Lp(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const a=e._key();return this.originValidationPromises[a]||(this.originValidationPromises[a]=Rse(e)),this.originValidationPromises[a]}get _shouldInitProactively(){return hH()||zI()||qx()}}const Hse=qse;var eU="@firebase/auth",tU="0.23.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $se{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const a=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,a),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const a=this.internalListeners.get(e);a&&(this.internalListeners.delete(e),a(),this.updateProactiveRefresh())}assertAuthConfigured(){ei(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kse(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function Wse(t){f0(new Fg("auth",(e,{options:a})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:n}=r.options;ei(h&&!h.includes(":"),"invalid-api-key",{appName:r.name});const w={apiKey:h,authDomain:n,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fH(t)},T=new Tie(r,s,l,w);return Cie(T,a),T},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,a,r)=>{e.getProvider("auth-internal").initialize()})),f0(new Fg("auth-internal",e=>{const a=Hv(e.getProvider("auth").getImmediate());return(r=>new $se(r))(a)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pm(eU,tU,Kse(t)),Pm(eU,tU,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yse=5*60,Xse=Hq("authIdTokenMaxAge")||Yse;let aU=null;const Jse=t=>async e=>{const a=e&&await e.getIdTokenResult(),r=a&&(new Date().getTime()-Date.parse(a.issuedAtTime))/1e3;if(r&&r>Xse)return;const s=a==null?void 0:a.token;aU!==s&&(aU=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function zH(t=xI()){const e=Zx(t,"auth");if(e.isInitialized())return e.getImmediate();const a=Sie(t,{popupRedirectResolver:Hse,persistence:[rse,qie,CH]}),r=Hq("authTokenSyncURL");if(r){const l=Jse(r);Bie(a,l,()=>l(a.currentUser)),kie(a,h=>l(h))}const s=jq("auth");return s&&bie(a,`http://${s}`),a}Wse("Browser");var Qse=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Br,LI=LI||{},si=Qse||self;function Kx(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Wx(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function eoe(t,e,a){return t.call.apply(t.bind,arguments)}function toe(t,e,a){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function yd(t,e,a){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?yd=eoe:yd=toe,yd.apply(null,arguments)}function oC(t,e){var a=Array.prototype.slice.call(arguments,1);return function(){var r=a.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function nc(t,e){function a(){}a.prototype=e.prototype,t.$=e.prototype,t.prototype=new a,t.prototype.constructor=t,t.ac=function(r,s,l){for(var h=Array(arguments.length-2),n=2;n<arguments.length;n++)h[n-2]=arguments[n];return e.prototype[s].apply(r,h)}}function Hg(){this.s=this.s,this.o=this.o}var aoe=0;Hg.prototype.s=!1;Hg.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),aoe!=0)};Hg.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const OH=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let a=0;a<t.length;a++)if(a in t&&t[a]===e)return a;return-1};function FI(t){const e=t.length;if(0<e){const a=Array(e);for(let r=0;r<e;r++)a[r]=t[r];return a}return[]}function rU(t,e){for(let a=1;a<arguments.length;a++){const r=arguments[a];if(Kx(r)){const s=t.length||0,l=r.length||0;t.length=s+l;for(let h=0;h<l;h++)t[s+h]=r[h]}else t.push(r)}}function gd(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}gd.prototype.h=function(){this.defaultPrevented=!0};var roe=function(){if(!si.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{si.addEventListener("test",()=>{},e),si.removeEventListener("test",()=>{},e)}catch{}return t}();function yR(t){return/^[\s\xa0]*$/.test(t)}function Yx(){var t=si.navigator;return t&&(t=t.userAgent)?t:""}function wm(t){return Yx().indexOf(t)!=-1}function UI(t){return UI[" "](t),t}UI[" "]=function(){};function noe(t,e){var a=Xoe;return Object.prototype.hasOwnProperty.call(a,t)?a[t]:a[t]=e(t)}var ioe=wm("Opera"),nv=wm("Trident")||wm("MSIE"),DH=wm("Edge"),Q5=DH||nv,MH=wm("Gecko")&&!(Yx().toLowerCase().indexOf("webkit")!=-1&&!wm("Edge"))&&!(wm("Trident")||wm("MSIE"))&&!wm("Edge"),soe=Yx().toLowerCase().indexOf("webkit")!=-1&&!wm("Edge");function IH(){var t=si.document;return t?t.documentMode:void 0}var eD;e:{var HE="",$E=function(){var t=Yx();if(MH)return/rv:([^\);]+)(\)|;)/.exec(t);if(DH)return/Edge\/([\d\.]+)/.exec(t);if(nv)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(soe)return/WebKit\/(\S+)/.exec(t);if(ioe)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if($E&&(HE=$E?$E[1]:""),nv){var KE=IH();if(KE!=null&&KE>parseFloat(HE)){eD=String(KE);break e}}eD=HE}var tD;if(si.document&&nv){var nU=IH();tD=nU||parseInt(eD,10)||void 0}else tD=void 0;var ooe=tD;function gR(t,e){if(gd.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var a=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(MH){e:{try{UI(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else a=="mouseover"?e=t.fromElement:a=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:loe[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&gR.$.h.call(this)}}nc(gR,gd);var loe={2:"touch",3:"pen",4:"mouse"};gR.prototype.h=function(){gR.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Xx="closure_listenable_"+(1e6*Math.random()|0),uoe=0;function coe(t,e,a,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=a,this.capture=!!r,this.la=s,this.key=++uoe,this.fa=this.ia=!1}function Jx(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function kI(t,e,a){for(const r in t)e.call(a,t[r],r,t)}function doe(t,e){for(const a in t)e.call(void 0,t[a],a,t)}function LH(t){const e={};for(const a in t)e[a]=t[a];return e}const iU="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function FH(t,e){let a,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(a in r)t[a]=r[a];for(let l=0;l<iU.length;l++)a=iU[l],Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}}function Qx(t){this.src=t,this.g={},this.h=0}Qx.prototype.add=function(t,e,a,r,s){var l=t.toString();t=this.g[l],t||(t=this.g[l]=[],this.h++);var h=rD(t,e,r,s);return-1<h?(e=t[h],a||(e.ia=!1)):(e=new coe(e,this.src,l,!!r,s),e.ia=a,t.push(e)),e};function aD(t,e){var a=e.type;if(a in t.g){var r=t.g[a],s=OH(r,e),l;(l=0<=s)&&Array.prototype.splice.call(r,s,1),l&&(Jx(e),t.g[a].length==0&&(delete t.g[a],t.h--))}}function rD(t,e,a,r){for(var s=0;s<t.length;++s){var l=t[s];if(!l.fa&&l.listener==e&&l.capture==!!a&&l.la==r)return s}return-1}var BI="closure_lm_"+(1e6*Math.random()|0),WE={};function UH(t,e,a,r,s){if(Array.isArray(e)){for(var l=0;l<e.length;l++)UH(t,e[l],a,r,s);return null}return a=GH(a),t&&t[Xx]?t.O(e,a,Wx(r)?!!r.capture:!1,s):hoe(t,e,a,!1,r,s)}function hoe(t,e,a,r,s,l){if(!e)throw Error("Invalid event type");var h=Wx(s)?!!s.capture:!!s,n=jI(t);if(n||(t[BI]=n=new Qx(t)),a=n.add(e,a,r,h,l),a.proxy)return a;if(r=foe(),a.proxy=r,r.src=t,r.listener=a,t.addEventListener)roe||(s=h),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(BH(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return a}function foe(){function t(a){return e.call(t.src,t.listener,a)}const e=poe;return t}function kH(t,e,a,r,s){if(Array.isArray(e))for(var l=0;l<e.length;l++)kH(t,e[l],a,r,s);else r=Wx(r)?!!r.capture:!!r,a=GH(a),t&&t[Xx]?(t=t.i,e=String(e).toString(),e in t.g&&(l=t.g[e],a=rD(l,a,r,s),-1<a&&(Jx(l[a]),Array.prototype.splice.call(l,a,1),l.length==0&&(delete t.g[e],t.h--)))):t&&(t=jI(t))&&(e=t.g[e.toString()],t=-1,e&&(t=rD(e,a,r,s)),(a=-1<t?e[t]:null)&&GI(a))}function GI(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Xx])aD(e.i,t);else{var a=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(a,r,t.capture):e.detachEvent?e.detachEvent(BH(a),r):e.addListener&&e.removeListener&&e.removeListener(r),(a=jI(e))?(aD(a,t),a.h==0&&(a.src=null,e[BI]=null)):Jx(t)}}}function BH(t){return t in WE?WE[t]:WE[t]="on"+t}function poe(t,e){if(t.fa)t=!0;else{e=new gR(e,this);var a=t.listener,r=t.la||t.src;t.ia&&GI(t),t=a.call(r,e)}return t}function jI(t){return t=t[BI],t instanceof Qx?t:null}var YE="__closure_events_fn_"+(1e9*Math.random()>>>0);function GH(t){return typeof t=="function"?t:(t[YE]||(t[YE]=function(e){return t.handleEvent(e)}),t[YE])}function rc(){Hg.call(this),this.i=new Qx(this),this.S=this,this.J=null}nc(rc,Hg);rc.prototype[Xx]=!0;rc.prototype.removeEventListener=function(t,e,a,r){kH(this,t,e,a,r)};function Nc(t,e){var a,r=t.J;if(r)for(a=[];r;r=r.J)a.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new gd(e,t);else if(e instanceof gd)e.target=e.target||t;else{var s=e;e=new gd(r,t),FH(e,s)}if(s=!0,a)for(var l=a.length-1;0<=l;l--){var h=e.g=a[l];s=lC(h,r,!0,e)&&s}if(h=e.g=t,s=lC(h,r,!0,e)&&s,s=lC(h,r,!1,e)&&s,a)for(l=0;l<a.length;l++)h=e.g=a[l],s=lC(h,r,!1,e)&&s}rc.prototype.N=function(){if(rc.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var a=t.g[e],r=0;r<a.length;r++)Jx(a[r]);delete t.g[e],t.h--}}this.J=null};rc.prototype.O=function(t,e,a,r){return this.i.add(String(t),e,!1,a,r)};rc.prototype.P=function(t,e,a,r){return this.i.add(String(t),e,!0,a,r)};function lC(t,e,a,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,l=0;l<e.length;++l){var h=e[l];if(h&&!h.fa&&h.capture==a){var n=h.listener,w=h.la||h.src;h.ia&&aD(t.i,h),s=n.call(w,r)!==!1&&s}}return s&&!r.defaultPrevented}var ZI=si.JSON.stringify;class moe{constructor(e,a){this.i=e,this.j=a,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function yoe(){var t=qI;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class goe{constructor(){this.h=this.g=null}add(e,a){const r=jH.get();r.set(e,a),this.h?this.h.next=r:this.g=r,this.h=r}}var jH=new moe(()=>new Aoe,t=>t.reset());class Aoe{constructor(){this.next=this.g=this.h=null}set(e,a){this.h=e,this.g=a,this.next=null}reset(){this.next=this.g=this.h=null}}function _oe(t){var e=1;t=t.split(":");const a=[];for(;0<e&&t.length;)a.push(t.shift()),e--;return t.length&&a.push(t.join(":")),a}function voe(t){si.setTimeout(()=>{throw t},0)}let AR,_R=!1,qI=new goe,ZH=()=>{const t=si.Promise.resolve(void 0);AR=()=>{t.then(woe)}};var woe=()=>{for(var t;t=yoe();){try{t.h.call(t.g)}catch(a){voe(a)}var e=jH;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}_R=!1};function e2(t,e){rc.call(this),this.h=t||1,this.g=e||si,this.j=yd(this.qb,this),this.l=Date.now()}nc(e2,rc);Br=e2.prototype;Br.ga=!1;Br.T=null;Br.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Nc(this,"tick"),this.ga&&(HI(this),this.start()))}};Br.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function HI(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}Br.N=function(){e2.$.N.call(this),HI(this),delete this.g};function $I(t,e,a){if(typeof t=="function")a&&(t=yd(t,a));else if(t&&typeof t.handleEvent=="function")t=yd(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:si.setTimeout(t,e||0)}function qH(t){t.g=$I(()=>{t.g=null,t.i&&(t.i=!1,qH(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class Roe extends Hg{constructor(e,a){super(),this.m=e,this.j=a,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:qH(this)}N(){super.N(),this.g&&(si.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vR(t){Hg.call(this),this.h=t,this.g={}}nc(vR,Hg);var sU=[];function HH(t,e,a,r){Array.isArray(a)||(a&&(sU[0]=a.toString()),a=sU);for(var s=0;s<a.length;s++){var l=UH(e,a[s],r||t.handleEvent,!1,t.h||t);if(!l)break;t.g[l.key]=l}}function $H(t){kI(t.g,function(e,a){this.g.hasOwnProperty(a)&&GI(e)},t),t.g={}}vR.prototype.N=function(){vR.$.N.call(this),$H(this)};vR.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function t2(){this.g=!0}t2.prototype.Ea=function(){this.g=!1};function Toe(t,e,a,r,s,l){t.info(function(){if(t.g)if(l)for(var h="",n=l.split("&"),w=0;w<n.length;w++){var T=n[w].split("=");if(1<T.length){var P=T[0];T=T[1];var z=P.split("_");h=2<=z.length&&z[1]=="type"?h+(P+"="+T+"&"):h+(P+"=redacted&")}}else h=null;else h=l;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+a+`
`+h})}function Soe(t,e,a,r,s,l,h){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+a+`
`+l+" "+h})}function I_(t,e,a,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+boe(t,a)+(r?" "+r:"")})}function Coe(t,e){t.info(function(){return"TIMEOUT: "+e})}t2.prototype.info=function(){};function boe(t,e){if(!t.g)return e;if(!e)return null;try{var a=JSON.parse(e);if(a){for(t=0;t<a.length;t++)if(Array.isArray(a[t])){var r=a[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var l=s[0];if(l!="noop"&&l!="stop"&&l!="close")for(var h=1;h<s.length;h++)s[h]=""}}}}return ZI(a)}catch{return e}}var x0={},oU=null;function a2(){return oU=oU||new rc}x0.Ta="serverreachability";function KH(t){gd.call(this,x0.Ta,t)}nc(KH,gd);function wR(t){const e=a2();Nc(e,new KH(e))}x0.STAT_EVENT="statevent";function WH(t,e){gd.call(this,x0.STAT_EVENT,t),this.stat=e}nc(WH,gd);function Jd(t){const e=a2();Nc(e,new WH(e,t))}x0.Ua="timingevent";function YH(t,e){gd.call(this,x0.Ua,t),this.size=e}nc(YH,gd);function RT(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return si.setTimeout(function(){t()},e)}var r2={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},XH={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function KI(){}KI.prototype.h=null;function lU(t){return t.h||(t.h=t.i())}function JH(){}var TT={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function WI(){gd.call(this,"d")}nc(WI,gd);function YI(){gd.call(this,"c")}nc(YI,gd);var nD;function n2(){}nc(n2,KI);n2.prototype.g=function(){return new XMLHttpRequest};n2.prototype.i=function(){return{}};nD=new n2;function ST(t,e,a,r){this.l=t,this.j=e,this.m=a,this.W=r||1,this.U=new vR(this),this.P=xoe,t=Q5?125:void 0,this.V=new e2(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new QH}function QH(){this.i=null,this.g="",this.h=!1}var xoe=45e3,iD={},_b={};Br=ST.prototype;Br.setTimeout=function(t){this.P=t};function sD(t,e,a){t.L=1,t.v=s2(Ty(e)),t.s=a,t.S=!0,e$(t,null)}function e$(t,e){t.G=Date.now(),CT(t),t.A=Ty(t.v);var a=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),l$(a.i,"t",r),t.C=0,a=t.l.J,t.h=new QH,t.g=E$(t.l,a?e:null,!t.s),0<t.O&&(t.M=new Roe(yd(t.Pa,t,t.g),t.O)),HH(t.U,t.g,"readystatechange",t.nb),e=t.I?LH(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),wR(),Toe(t.j,t.u,t.A,t.m,t.W,t.s)}Br.nb=function(t){t=t.target;const e=this.M;e&&Rm(t)==3?e.l():this.Pa(t)};Br.Pa=function(t){try{if(t==this.g)e:{const P=Rm(this.g);var e=this.g.Ia();const z=this.g.da();if(!(3>P)&&(P!=3||Q5||this.g&&(this.h.h||this.g.ja()||hU(this.g)))){this.J||P!=4||e==7||(e==8||0>=z?wR(3):wR(2)),i2(this);var a=this.g.da();this.ca=a;t:if(t$(this)){var r=hU(this.g);t="";var s=r.length,l=Rm(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){YA(this),Ww(this);var h="";break t}this.h.i=new si.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:l&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,h=this.h.g}else h=this.g.ja();if(this.i=a==200,Soe(this.j,this.u,this.A,this.m,this.W,P,a),this.i){if(this.aa&&!this.K){t:{if(this.g){var n,w=this.g;if((n=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!yR(n)){var T=n;break t}}T=null}if(a=T)I_(this.j,this.m,a,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,oD(this,a);else{this.i=!1,this.o=3,Jd(12),YA(this),Ww(this);break e}}this.S?(a$(this,P,h),Q5&&this.i&&P==3&&(HH(this.U,this.V,"tick",this.mb),this.V.start())):(I_(this.j,this.m,h,null),oD(this,h)),P==4&&YA(this),this.i&&!this.J&&(P==4?C$(this.l,this):(this.i=!1,CT(this)))}else Koe(this.g),a==400&&0<h.indexOf("Unknown SID")?(this.o=3,Jd(12)):(this.o=0,Jd(13)),YA(this),Ww(this)}}}catch{}finally{}};function t$(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function a$(t,e,a){let r=!0,s;for(;!t.J&&t.C<a.length;)if(s=Poe(t,a),s==_b){e==4&&(t.o=4,Jd(14),r=!1),I_(t.j,t.m,null,"[Incomplete Response]");break}else if(s==iD){t.o=4,Jd(15),I_(t.j,t.m,a,"[Invalid Chunk]"),r=!1;break}else I_(t.j,t.m,s,null),oD(t,s);t$(t)&&s!=_b&&s!=iD&&(t.h.g="",t.C=0),e!=4||a.length!=0||t.h.h||(t.o=1,Jd(16),r=!1),t.i=t.i&&r,r?0<a.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+a.length),a3(e),e.M=!0,Jd(11))):(I_(t.j,t.m,a,"[Invalid Chunked Response]"),YA(t),Ww(t))}Br.mb=function(){if(this.g){var t=Rm(this.g),e=this.g.ja();this.C<e.length&&(i2(this),a$(this,t,e),this.i&&t!=4&&CT(this))}};function Poe(t,e){var a=t.C,r=e.indexOf(`
`,a);return r==-1?_b:(a=Number(e.substring(a,r)),isNaN(a)?iD:(r+=1,r+a>e.length?_b:(e=e.slice(r,r+a),t.C=r+a,e)))}Br.cancel=function(){this.J=!0,YA(this)};function CT(t){t.Y=Date.now()+t.P,r$(t,t.P)}function r$(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=RT(yd(t.lb,t),e)}function i2(t){t.B&&(si.clearTimeout(t.B),t.B=null)}Br.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(Coe(this.j,this.A),this.L!=2&&(wR(),Jd(17)),YA(this),this.o=2,Ww(this)):r$(this,this.Y-t)};function Ww(t){t.l.H==0||t.J||C$(t.l,t)}function YA(t){i2(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,HI(t.V),$H(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function oD(t,e){try{var a=t.l;if(a.H!=0&&(a.g==t||lD(a.i,t))){if(!t.K&&lD(a.i,t)&&a.H==3){try{var r=a.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!a.u){if(a.g)if(a.g.G+3e3<t.G)Rb(a),u2(a);else break e;t3(a),Jd(18)}}else a.Fa=s[1],0<a.Fa-a.V&&37500>s[2]&&a.G&&a.A==0&&!a.v&&(a.v=RT(yd(a.ib,a),6e3));if(1>=d$(a.i)&&a.oa){try{a.oa()}catch{}a.oa=void 0}}else XA(a,11)}else if((t.K||a.g==t)&&Rb(a),!yR(e))for(s=a.Ja.g.parse(e),e=0;e<s.length;e++){let T=s[e];if(a.V=T[0],T=T[1],a.H==2)if(T[0]=="c"){a.K=T[1],a.pa=T[2];const P=T[3];P!=null&&(a.ra=P,a.l.info("VER="+a.ra));const z=T[4];z!=null&&(a.Ga=z,a.l.info("SVER="+a.Ga));const k=T[5];k!=null&&typeof k=="number"&&0<k&&(r=1.5*k,a.L=r,a.l.info("backChannelRequestTimeoutMs_="+r)),r=a;const U=t.g;if(U){const Z=U.g?U.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Z){var l=r.i;l.g||Z.indexOf("spdy")==-1&&Z.indexOf("quic")==-1&&Z.indexOf("h2")==-1||(l.j=l.l,l.g=new Set,l.h&&(XI(l,l.h),l.h=null))}if(r.F){const H=U.g?U.g.getResponseHeader("X-HTTP-Session-Id"):null;H&&(r.Da=H,Eo(r.I,r.F,H))}}a.H=3,a.h&&a.h.Ba(),a.ca&&(a.S=Date.now()-t.G,a.l.info("Handshake RTT: "+a.S+"ms")),r=a;var h=t;if(r.wa=P$(r,r.J?r.pa:null,r.Y),h.K){h$(r.i,h);var n=h,w=r.L;w&&n.setTimeout(w),n.B&&(i2(n),CT(n)),r.g=h}else T$(r);0<a.j.length&&c2(a)}else T[0]!="stop"&&T[0]!="close"||XA(a,7);else a.H==3&&(T[0]=="stop"||T[0]=="close"?T[0]=="stop"?XA(a,7):e3(a):T[0]!="noop"&&a.h&&a.h.Aa(T),a.A=0)}}wR(4)}catch{}}function Eoe(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Kx(t)){for(var e=[],a=t.length,r=0;r<a;r++)e.push(t[r]);return e}e=[],a=0;for(r in t)e[a++]=t[r];return e}function Noe(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Kx(t)||typeof t=="string"){var e=[];t=t.length;for(var a=0;a<t;a++)e.push(a);return e}e=[],a=0;for(const r in t)e[a++]=r;return e}}}function n$(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Kx(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var a=Noe(t),r=Eoe(t),s=r.length,l=0;l<s;l++)e.call(void 0,r[l],a&&a[l],t)}var i$=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Voe(t,e){if(t){t=t.split("&");for(var a=0;a<t.length;a++){var r=t[a].indexOf("="),s=null;if(0<=r){var l=t[a].substring(0,r);s=t[a].substring(r+1)}else l=t[a];e(l,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function s0(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof s0){this.h=t.h,vb(this,t.j),this.s=t.s,this.g=t.g,wb(this,t.m),this.l=t.l;var e=t.i,a=new RR;a.i=e.i,e.g&&(a.g=new Map(e.g),a.h=e.h),uU(this,a),this.o=t.o}else t&&(e=String(t).match(i$))?(this.h=!1,vb(this,e[1]||"",!0),this.s=Uw(e[2]||""),this.g=Uw(e[3]||"",!0),wb(this,e[4]),this.l=Uw(e[5]||"",!0),uU(this,e[6]||"",!0),this.o=Uw(e[7]||"")):(this.h=!1,this.i=new RR(null,this.h))}s0.prototype.toString=function(){var t=[],e=this.j;e&&t.push(kw(e,cU,!0),":");var a=this.g;return(a||e=="file")&&(t.push("//"),(e=this.s)&&t.push(kw(e,cU,!0),"@"),t.push(encodeURIComponent(String(a)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a=this.m,a!=null&&t.push(":",String(a))),(a=this.l)&&(this.g&&a.charAt(0)!="/"&&t.push("/"),t.push(kw(a,a.charAt(0)=="/"?Doe:Ooe,!0))),(a=this.i.toString())&&t.push("?",a),(a=this.o)&&t.push("#",kw(a,Ioe)),t.join("")};function Ty(t){return new s0(t)}function vb(t,e,a){t.j=a?Uw(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function wb(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function uU(t,e,a){e instanceof RR?(t.i=e,Loe(t.i,t.h)):(a||(e=kw(e,Moe)),t.i=new RR(e,t.h))}function Eo(t,e,a){t.i.set(e,a)}function s2(t){return Eo(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Uw(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function kw(t,e,a){return typeof t=="string"?(t=encodeURI(t).replace(e,zoe),a&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function zoe(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var cU=/[#\/\?@]/g,Ooe=/[#\?:]/g,Doe=/[#\?]/g,Moe=/[#\?@]/g,Ioe=/#/g;function RR(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function $g(t){t.g||(t.g=new Map,t.h=0,t.i&&Voe(t.i,function(e,a){t.add(decodeURIComponent(e.replace(/\+/g," ")),a)}))}Br=RR.prototype;Br.add=function(t,e){$g(this),this.i=null,t=Kv(this,t);var a=this.g.get(t);return a||this.g.set(t,a=[]),a.push(e),this.h+=1,this};function s$(t,e){$g(t),e=Kv(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function o$(t,e){return $g(t),e=Kv(t,e),t.g.has(e)}Br.forEach=function(t,e){$g(this),this.g.forEach(function(a,r){a.forEach(function(s){t.call(e,s,r,this)},this)},this)};Br.ta=function(){$g(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),a=[];for(let r=0;r<e.length;r++){const s=t[r];for(let l=0;l<s.length;l++)a.push(e[r])}return a};Br.Z=function(t){$g(this);let e=[];if(typeof t=="string")o$(this,t)&&(e=e.concat(this.g.get(Kv(this,t))));else{t=Array.from(this.g.values());for(let a=0;a<t.length;a++)e=e.concat(t[a])}return e};Br.set=function(t,e){return $g(this),this.i=null,t=Kv(this,t),o$(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};Br.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function l$(t,e,a){s$(t,e),0<a.length&&(t.i=null,t.g.set(Kv(t,e),FI(a)),t.h+=a.length)}Br.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var a=0;a<e.length;a++){var r=e[a];const l=encodeURIComponent(String(r)),h=this.Z(r);for(r=0;r<h.length;r++){var s=l;h[r]!==""&&(s+="="+encodeURIComponent(String(h[r]))),t.push(s)}}return this.i=t.join("&")};function Kv(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Loe(t,e){e&&!t.j&&($g(t),t.i=null,t.g.forEach(function(a,r){var s=r.toLowerCase();r!=s&&(s$(this,r),l$(this,s,a))},t)),t.j=e}var Foe=class{constructor(t,e){this.g=t,this.map=e}};function u$(t){this.l=t||Uoe,si.PerformanceNavigationTiming?(t=si.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(si.g&&si.g.Ka&&si.g.Ka()&&si.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Uoe=10;function c$(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function d$(t){return t.h?1:t.g?t.g.size:0}function lD(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function XI(t,e){t.g?t.g.add(e):t.h=e}function h$(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}u$.prototype.cancel=function(){if(this.i=f$(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function f$(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const a of t.g.values())e=e.concat(a.F);return e}return FI(t.i)}var koe=class{stringify(t){return si.JSON.stringify(t,void 0)}parse(t){return si.JSON.parse(t,void 0)}};function Boe(){this.g=new koe}function Goe(t,e,a){const r=a||"";try{n$(t,function(s,l){let h=s;Wx(s)&&(h=ZI(s)),e.push(r+l+"="+encodeURIComponent(h))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function joe(t,e){const a=new t2;if(si.Image){const r=new Image;r.onload=oC(uC,a,r,"TestLoadImage: loaded",!0,e),r.onerror=oC(uC,a,r,"TestLoadImage: error",!1,e),r.onabort=oC(uC,a,r,"TestLoadImage: abort",!1,e),r.ontimeout=oC(uC,a,r,"TestLoadImage: timeout",!1,e),si.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function uC(t,e,a,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function bT(t){this.l=t.fc||null,this.j=t.ob||!1}nc(bT,KI);bT.prototype.g=function(){return new o2(this.l,this.j)};bT.prototype.i=function(t){return function(){return t}}({});function o2(t,e){rc.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=JI,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}nc(o2,rc);var JI=0;Br=o2.prototype;Br.open=function(t,e){if(this.readyState!=JI)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,TR(this)};Br.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||si).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};Br.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xT(this)),this.readyState=JI};Br.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,TR(this)),this.g&&(this.readyState=3,TR(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof si.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;p$(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function p$(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}Br.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?xT(this):TR(this),this.readyState==3&&p$(this)}};Br.Za=function(t){this.g&&(this.response=this.responseText=t,xT(this))};Br.Ya=function(t){this.g&&(this.response=t,xT(this))};Br.ka=function(){this.g&&xT(this)};function xT(t){t.readyState=4,t.l=null,t.j=null,t.A=null,TR(t)}Br.setRequestHeader=function(t,e){this.v.append(t,e)};Br.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};Br.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var a=e.next();!a.done;)a=a.value,t.push(a[0]+": "+a[1]),a=e.next();return t.join(`\r
`)};function TR(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(o2.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var Zoe=si.JSON.parse;function Sl(t){rc.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=m$,this.L=this.M=!1}nc(Sl,rc);var m$="",qoe=/^https?$/i,Hoe=["POST","PUT"];Br=Sl.prototype;Br.Oa=function(t){this.M=t};Br.ha=function(t,e,a,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():nD.g(),this.C=this.u?lU(this.u):lU(nD),this.g.onreadystatechange=yd(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(l){dU(this,l);return}if(t=a||"",a=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)a.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const l of r.keys())a.set(l,r.get(l));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(a.keys()).find(l=>l.toLowerCase()=="content-type"),s=si.FormData&&t instanceof si.FormData,!(0<=OH(Hoe,e))||r||s||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[l,h]of a)this.g.setRequestHeader(l,h);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{A$(this),0<this.B&&((this.L=$oe(this.g))?(this.g.timeout=this.B,this.g.ontimeout=yd(this.ua,this)):this.A=$I(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(l){dU(this,l)}};function $oe(t){return nv&&typeof t.timeout=="number"&&t.ontimeout!==void 0}Br.ua=function(){typeof LI<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Nc(this,"timeout"),this.abort(8))};function dU(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,y$(t),l2(t)}function y$(t){t.F||(t.F=!0,Nc(t,"complete"),Nc(t,"error"))}Br.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Nc(this,"complete"),Nc(this,"abort"),l2(this))};Br.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),l2(this,!0)),Sl.$.N.call(this)};Br.La=function(){this.s||(this.G||this.v||this.l?g$(this):this.kb())};Br.kb=function(){g$(this)};function g$(t){if(t.h&&typeof LI<"u"&&(!t.C[1]||Rm(t)!=4||t.da()!=2)){if(t.v&&Rm(t)==4)$I(t.La,0,t);else if(Nc(t,"readystatechange"),Rm(t)==4){t.h=!1;try{const h=t.da();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var a;if(!(a=e)){var r;if(r=h===0){var s=String(t.I).match(i$)[1]||null;!s&&si.self&&si.self.location&&(s=si.self.location.protocol.slice(0,-1)),r=!qoe.test(s?s.toLowerCase():"")}a=r}if(a)Nc(t,"complete"),Nc(t,"success");else{t.m=6;try{var l=2<Rm(t)?t.g.statusText:""}catch{l=""}t.j=l+" ["+t.da()+"]",y$(t)}}finally{l2(t)}}}}function l2(t,e){if(t.g){A$(t);const a=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Nc(t,"ready");try{a.onreadystatechange=r}catch{}}}function A$(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(si.clearTimeout(t.A),t.A=null)}Br.isActive=function(){return!!this.g};function Rm(t){return t.g?t.g.readyState:0}Br.da=function(){try{return 2<Rm(this)?this.g.status:-1}catch{return-1}};Br.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};Br.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),Zoe(e)}};function hU(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case m$:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function Koe(t){const e={};t=(t.g&&2<=Rm(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(yR(t[r]))continue;var a=_oe(t[r]);const s=a[0];if(a=a[1],typeof a!="string")continue;a=a.trim();const l=e[s]||[];e[s]=l,l.push(a)}doe(e,function(r){return r.join(", ")})}Br.Ia=function(){return this.m};Br.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function _$(t){let e="";return kI(t,function(a,r){e+=r,e+=":",e+=a,e+=`\r
`}),e}function QI(t,e,a){e:{for(r in a){var r=!1;break e}r=!0}r||(a=_$(a),typeof t=="string"?a!=null&&encodeURIComponent(String(a)):Eo(t,e,a))}function vw(t,e,a){return a&&a.internalChannelParams&&a.internalChannelParams[t]||e}function v$(t){this.Ga=0,this.j=[],this.l=new t2,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=vw("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=vw("baseRetryDelayMs",5e3,t),this.hb=vw("retryDelaySeedMs",1e4,t),this.eb=vw("forwardChannelMaxRetries",2,t),this.xa=vw("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new u$(t&&t.concurrentRequestLimit),this.Ja=new Boe,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}Br=v$.prototype;Br.ra=8;Br.H=1;function e3(t){if(w$(t),t.H==3){var e=t.W++,a=Ty(t.I);if(Eo(a,"SID",t.K),Eo(a,"RID",e),Eo(a,"TYPE","terminate"),PT(t,a),e=new ST(t,t.l,e),e.L=2,e.v=s2(Ty(a)),a=!1,si.navigator&&si.navigator.sendBeacon)try{a=si.navigator.sendBeacon(e.v.toString(),"")}catch{}!a&&si.Image&&(new Image().src=e.v,a=!0),a||(e.g=E$(e.l,null),e.g.ha(e.v)),e.G=Date.now(),CT(e)}x$(t)}function u2(t){t.g&&(a3(t),t.g.cancel(),t.g=null)}function w$(t){u2(t),t.u&&(si.clearTimeout(t.u),t.u=null),Rb(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&si.clearTimeout(t.m),t.m=null)}function c2(t){if(!c$(t.i)&&!t.m){t.m=!0;var e=t.Na;AR||ZH(),_R||(AR(),_R=!0),qI.add(e,t),t.C=0}}function Woe(t,e){return d$(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=RT(yd(t.Na,t,e),b$(t,t.C)),t.C++,!0)}Br.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new ST(this,this.l,t);let l=this.s;if(this.U&&(l?(l=LH(l),FH(l,this.U)):l=this.U),this.o!==null||this.O||(s.I=l,l=null),this.P)e:{for(var e=0,a=0;a<this.j.length;a++){t:{var r=this.j[a];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=a;break e}if(e===4096||a===this.j.length-1){e=a+1;break e}}e=1e3}else e=1e3;e=R$(this,s,e),a=Ty(this.I),Eo(a,"RID",t),Eo(a,"CVER",22),this.F&&Eo(a,"X-HTTP-Session-Id",this.F),PT(this,a),l&&(this.O?e="headers="+encodeURIComponent(String(_$(l)))+"&"+e:this.o&&QI(a,this.o,l)),XI(this.i,s),this.bb&&Eo(a,"TYPE","init"),this.P?(Eo(a,"$req",e),Eo(a,"SID","null"),s.aa=!0,sD(s,a,null)):sD(s,a,e),this.H=2}}else this.H==3&&(t?fU(this,t):this.j.length==0||c$(this.i)||fU(this))};function fU(t,e){var a;e?a=e.m:a=t.W++;const r=Ty(t.I);Eo(r,"SID",t.K),Eo(r,"RID",a),Eo(r,"AID",t.V),PT(t,r),t.o&&t.s&&QI(r,t.o,t.s),a=new ST(t,t.l,a,t.C+1),t.o===null&&(a.I=t.s),e&&(t.j=e.F.concat(t.j)),e=R$(t,a,1e3),a.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),XI(t.i,a),sD(a,r,e)}function PT(t,e){t.na&&kI(t.na,function(a,r){Eo(e,r,a)}),t.h&&n$({},function(a,r){Eo(e,r,a)})}function R$(t,e,a){a=Math.min(t.j.length,a);var r=t.h?yd(t.h.Va,t.h,t):null;e:{var s=t.j;let l=-1;for(;;){const h=["count="+a];l==-1?0<a?(l=s[0].g,h.push("ofs="+l)):l=0:h.push("ofs="+l);let n=!0;for(let w=0;w<a;w++){let T=s[w].g;const P=s[w].map;if(T-=l,0>T)l=Math.max(0,s[w].g-100),n=!1;else try{Goe(P,h,"req"+T+"_")}catch{r&&r(P)}}if(n){r=h.join("&");break e}}}return t=t.j.splice(0,a),e.F=t,r}function T$(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;AR||ZH(),_R||(AR(),_R=!0),qI.add(e,t),t.A=0}}function t3(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=RT(yd(t.Ma,t),b$(t,t.A)),t.A++,!0)}Br.Ma=function(){if(this.u=null,S$(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=RT(yd(this.jb,this),t)}};Br.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Jd(10),u2(this),S$(this))};function a3(t){t.B!=null&&(si.clearTimeout(t.B),t.B=null)}function S$(t){t.g=new ST(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Ty(t.wa);Eo(e,"RID","rpc"),Eo(e,"SID",t.K),Eo(e,"AID",t.V),Eo(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Eo(e,"TO",t.qa),Eo(e,"TYPE","xmlhttp"),PT(t,e),t.o&&t.s&&QI(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var a=t.g;t=t.pa,a.L=1,a.v=s2(Ty(e)),a.s=null,a.S=!0,e$(a,t)}Br.ib=function(){this.v!=null&&(this.v=null,u2(this),t3(this),Jd(19))};function Rb(t){t.v!=null&&(si.clearTimeout(t.v),t.v=null)}function C$(t,e){var a=null;if(t.g==e){Rb(t),a3(t),t.g=null;var r=2}else if(lD(t.i,e))a=e.F,h$(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){a=e.s?e.s.length:0,e=Date.now()-e.G;var s=t.C;r=a2(),Nc(r,new YH(r,a)),c2(t)}else T$(t);else if(s=e.o,s==3||s==0&&0<e.ca||!(r==1&&Woe(t,e)||r==2&&t3(t)))switch(a&&0<a.length&&(e=t.i,e.i=e.i.concat(a)),s){case 1:XA(t,5);break;case 4:XA(t,10);break;case 3:XA(t,6);break;default:XA(t,2)}}}function b$(t,e){let a=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(a*=2),a*e}function XA(t,e){if(t.l.info("Error code "+e),e==2){var a=null;t.h&&(a=null);var r=yd(t.pb,t);a||(a=new s0("//www.google.com/images/cleardot.gif"),si.location&&si.location.protocol=="http"||vb(a,"https"),s2(a)),joe(a.toString(),r)}else Jd(2);t.H=0,t.h&&t.h.za(e),x$(t),w$(t)}Br.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Jd(2)):(this.l.info("Failed to ping google.com"),Jd(1))};function x$(t){if(t.H=0,t.ma=[],t.h){const e=f$(t.i);(e.length!=0||t.j.length!=0)&&(rU(t.ma,e),rU(t.ma,t.j),t.i.i.length=0,FI(t.j),t.j.length=0),t.h.ya()}}function P$(t,e,a){var r=a instanceof s0?Ty(a):new s0(a);if(r.g!="")e&&(r.g=e+"."+r.g),wb(r,r.m);else{var s=si.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var l=new s0(null);r&&vb(l,r),e&&(l.g=e),s&&wb(l,s),a&&(l.l=a),r=l}return a=t.F,e=t.Da,a&&e&&Eo(r,a,e),Eo(r,"VER",t.ra),PT(t,r),r}function E$(t,e,a){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=a&&t.Ha&&!t.va?new Sl(new bT({ob:!0})):new Sl(t.va),e.Oa(t.J),e}Br.isActive=function(){return!!this.h&&this.h.isActive(this)};function N$(){}Br=N$.prototype;Br.Ba=function(){};Br.Aa=function(){};Br.za=function(){};Br.ya=function(){};Br.isActive=function(){return!0};Br.Va=function(){};function Tb(){if(nv&&!(10<=Number(ooe)))throw Error("Environmental error: no available transport.")}Tb.prototype.g=function(t,e){return new pf(t,e)};function pf(t,e){rc.call(this),this.g=new v$(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!yR(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!yR(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Wv(this)}nc(pf,rc);pf.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,a=this.h||void 0;Jd(0),t.Y=e,t.na=a||{},t.G=t.aa,t.I=P$(t,null,t.Y),c2(t)};pf.prototype.close=function(){e3(this.g)};pf.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var a={};a.__data__=t,t=a}else this.v&&(a={},a.__data__=ZI(t),t=a);e.j.push(new Foe(e.fb++,t)),e.H==3&&c2(e)};pf.prototype.N=function(){this.g.h=null,delete this.j,e3(this.g),delete this.g,pf.$.N.call(this)};function V$(t){WI.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const a in e){t=a;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}nc(V$,WI);function z$(){YI.call(this),this.status=1}nc(z$,YI);function Wv(t){this.g=t}nc(Wv,N$);Wv.prototype.Ba=function(){Nc(this.g,"a")};Wv.prototype.Aa=function(t){Nc(this.g,new V$(t))};Wv.prototype.za=function(t){Nc(this.g,new z$)};Wv.prototype.ya=function(){Nc(this.g,"b")};function Yoe(){this.blockSize=-1}function Fp(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}nc(Fp,Yoe);Fp.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function XE(t,e,a){a||(a=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(a++)|e.charCodeAt(a++)<<8|e.charCodeAt(a++)<<16|e.charCodeAt(a++)<<24;else for(s=0;16>s;++s)r[s]=e[a++]|e[a++]<<8|e[a++]<<16|e[a++]<<24;e=t.g[0],a=t.g[1],s=t.g[2];var l=t.g[3],h=e+(l^a&(s^l))+r[0]+3614090360&4294967295;e=a+(h<<7&4294967295|h>>>25),h=l+(s^e&(a^s))+r[1]+3905402710&4294967295,l=e+(h<<12&4294967295|h>>>20),h=s+(a^l&(e^a))+r[2]+606105819&4294967295,s=l+(h<<17&4294967295|h>>>15),h=a+(e^s&(l^e))+r[3]+3250441966&4294967295,a=s+(h<<22&4294967295|h>>>10),h=e+(l^a&(s^l))+r[4]+4118548399&4294967295,e=a+(h<<7&4294967295|h>>>25),h=l+(s^e&(a^s))+r[5]+1200080426&4294967295,l=e+(h<<12&4294967295|h>>>20),h=s+(a^l&(e^a))+r[6]+2821735955&4294967295,s=l+(h<<17&4294967295|h>>>15),h=a+(e^s&(l^e))+r[7]+4249261313&4294967295,a=s+(h<<22&4294967295|h>>>10),h=e+(l^a&(s^l))+r[8]+1770035416&4294967295,e=a+(h<<7&4294967295|h>>>25),h=l+(s^e&(a^s))+r[9]+2336552879&4294967295,l=e+(h<<12&4294967295|h>>>20),h=s+(a^l&(e^a))+r[10]+4294925233&4294967295,s=l+(h<<17&4294967295|h>>>15),h=a+(e^s&(l^e))+r[11]+2304563134&4294967295,a=s+(h<<22&4294967295|h>>>10),h=e+(l^a&(s^l))+r[12]+1804603682&4294967295,e=a+(h<<7&4294967295|h>>>25),h=l+(s^e&(a^s))+r[13]+4254626195&4294967295,l=e+(h<<12&4294967295|h>>>20),h=s+(a^l&(e^a))+r[14]+2792965006&4294967295,s=l+(h<<17&4294967295|h>>>15),h=a+(e^s&(l^e))+r[15]+1236535329&4294967295,a=s+(h<<22&4294967295|h>>>10),h=e+(s^l&(a^s))+r[1]+4129170786&4294967295,e=a+(h<<5&4294967295|h>>>27),h=l+(a^s&(e^a))+r[6]+3225465664&4294967295,l=e+(h<<9&4294967295|h>>>23),h=s+(e^a&(l^e))+r[11]+643717713&4294967295,s=l+(h<<14&4294967295|h>>>18),h=a+(l^e&(s^l))+r[0]+3921069994&4294967295,a=s+(h<<20&4294967295|h>>>12),h=e+(s^l&(a^s))+r[5]+3593408605&4294967295,e=a+(h<<5&4294967295|h>>>27),h=l+(a^s&(e^a))+r[10]+38016083&4294967295,l=e+(h<<9&4294967295|h>>>23),h=s+(e^a&(l^e))+r[15]+3634488961&4294967295,s=l+(h<<14&4294967295|h>>>18),h=a+(l^e&(s^l))+r[4]+3889429448&4294967295,a=s+(h<<20&4294967295|h>>>12),h=e+(s^l&(a^s))+r[9]+568446438&4294967295,e=a+(h<<5&4294967295|h>>>27),h=l+(a^s&(e^a))+r[14]+3275163606&4294967295,l=e+(h<<9&4294967295|h>>>23),h=s+(e^a&(l^e))+r[3]+4107603335&4294967295,s=l+(h<<14&4294967295|h>>>18),h=a+(l^e&(s^l))+r[8]+1163531501&4294967295,a=s+(h<<20&4294967295|h>>>12),h=e+(s^l&(a^s))+r[13]+2850285829&4294967295,e=a+(h<<5&4294967295|h>>>27),h=l+(a^s&(e^a))+r[2]+4243563512&4294967295,l=e+(h<<9&4294967295|h>>>23),h=s+(e^a&(l^e))+r[7]+1735328473&4294967295,s=l+(h<<14&4294967295|h>>>18),h=a+(l^e&(s^l))+r[12]+2368359562&4294967295,a=s+(h<<20&4294967295|h>>>12),h=e+(a^s^l)+r[5]+4294588738&4294967295,e=a+(h<<4&4294967295|h>>>28),h=l+(e^a^s)+r[8]+2272392833&4294967295,l=e+(h<<11&4294967295|h>>>21),h=s+(l^e^a)+r[11]+1839030562&4294967295,s=l+(h<<16&4294967295|h>>>16),h=a+(s^l^e)+r[14]+4259657740&4294967295,a=s+(h<<23&4294967295|h>>>9),h=e+(a^s^l)+r[1]+2763975236&4294967295,e=a+(h<<4&4294967295|h>>>28),h=l+(e^a^s)+r[4]+1272893353&4294967295,l=e+(h<<11&4294967295|h>>>21),h=s+(l^e^a)+r[7]+4139469664&4294967295,s=l+(h<<16&4294967295|h>>>16),h=a+(s^l^e)+r[10]+3200236656&4294967295,a=s+(h<<23&4294967295|h>>>9),h=e+(a^s^l)+r[13]+681279174&4294967295,e=a+(h<<4&4294967295|h>>>28),h=l+(e^a^s)+r[0]+3936430074&4294967295,l=e+(h<<11&4294967295|h>>>21),h=s+(l^e^a)+r[3]+3572445317&4294967295,s=l+(h<<16&4294967295|h>>>16),h=a+(s^l^e)+r[6]+76029189&4294967295,a=s+(h<<23&4294967295|h>>>9),h=e+(a^s^l)+r[9]+3654602809&4294967295,e=a+(h<<4&4294967295|h>>>28),h=l+(e^a^s)+r[12]+3873151461&4294967295,l=e+(h<<11&4294967295|h>>>21),h=s+(l^e^a)+r[15]+530742520&4294967295,s=l+(h<<16&4294967295|h>>>16),h=a+(s^l^e)+r[2]+3299628645&4294967295,a=s+(h<<23&4294967295|h>>>9),h=e+(s^(a|~l))+r[0]+4096336452&4294967295,e=a+(h<<6&4294967295|h>>>26),h=l+(a^(e|~s))+r[7]+1126891415&4294967295,l=e+(h<<10&4294967295|h>>>22),h=s+(e^(l|~a))+r[14]+2878612391&4294967295,s=l+(h<<15&4294967295|h>>>17),h=a+(l^(s|~e))+r[5]+4237533241&4294967295,a=s+(h<<21&4294967295|h>>>11),h=e+(s^(a|~l))+r[12]+1700485571&4294967295,e=a+(h<<6&4294967295|h>>>26),h=l+(a^(e|~s))+r[3]+2399980690&4294967295,l=e+(h<<10&4294967295|h>>>22),h=s+(e^(l|~a))+r[10]+4293915773&4294967295,s=l+(h<<15&4294967295|h>>>17),h=a+(l^(s|~e))+r[1]+2240044497&4294967295,a=s+(h<<21&4294967295|h>>>11),h=e+(s^(a|~l))+r[8]+1873313359&4294967295,e=a+(h<<6&4294967295|h>>>26),h=l+(a^(e|~s))+r[15]+4264355552&4294967295,l=e+(h<<10&4294967295|h>>>22),h=s+(e^(l|~a))+r[6]+2734768916&4294967295,s=l+(h<<15&4294967295|h>>>17),h=a+(l^(s|~e))+r[13]+1309151649&4294967295,a=s+(h<<21&4294967295|h>>>11),h=e+(s^(a|~l))+r[4]+4149444226&4294967295,e=a+(h<<6&4294967295|h>>>26),h=l+(a^(e|~s))+r[11]+3174756917&4294967295,l=e+(h<<10&4294967295|h>>>22),h=s+(e^(l|~a))+r[2]+718787259&4294967295,s=l+(h<<15&4294967295|h>>>17),h=a+(l^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(h<<21&4294967295|h>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+l&4294967295}Fp.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var a=e-this.blockSize,r=this.m,s=this.h,l=0;l<e;){if(s==0)for(;l<=a;)XE(this,t,l),l+=this.blockSize;if(typeof t=="string"){for(;l<e;)if(r[s++]=t.charCodeAt(l++),s==this.blockSize){XE(this,r),s=0;break}}else for(;l<e;)if(r[s++]=t[l++],s==this.blockSize){XE(this,r),s=0;break}}this.h=s,this.i+=e};Fp.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var a=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=a&255,a/=256;for(this.j(t),t=Array(16),e=a=0;4>e;++e)for(var r=0;32>r;r+=8)t[a++]=this.g[e]>>>r&255;return t};function Fs(t,e){this.h=e;for(var a=[],r=!0,s=t.length-1;0<=s;s--){var l=t[s]|0;r&&l==e||(a[s]=l,r=!1)}this.g=a}var Xoe={};function r3(t){return-128<=t&&128>t?noe(t,function(e){return new Fs([e|0],0>e?-1:0)}):new Fs([t|0],0>t?-1:0)}function Tm(t){if(isNaN(t)||!isFinite(t))return H_;if(0>t)return Ec(Tm(-t));for(var e=[],a=1,r=0;t>=a;r++)e[r]=t/a|0,a*=uD;return new Fs(e,0)}function O$(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Ec(O$(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var a=Tm(Math.pow(e,8)),r=H_,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),h=parseInt(t.substring(s,s+l),e);8>l?(l=Tm(Math.pow(e,l)),r=r.R(l).add(Tm(h))):(r=r.R(a),r=r.add(Tm(h)))}return r}var uD=4294967296,H_=r3(0),cD=r3(1),pU=r3(16777216);Br=Fs.prototype;Br.ea=function(){if(Gf(this))return-Ec(this).ea();for(var t=0,e=1,a=0;a<this.g.length;a++){var r=this.D(a);t+=(0<=r?r:uD+r)*e,e*=uD}return t};Br.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(fy(this))return"0";if(Gf(this))return"-"+Ec(this).toString(t);for(var e=Tm(Math.pow(t,6)),a=this,r="";;){var s=Cb(a,e).g;a=Sb(a,s.R(e));var l=((0<a.g.length?a.g[0]:a.h)>>>0).toString(t);if(a=s,fy(a))return l+r;for(;6>l.length;)l="0"+l;r=l+r}};Br.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function fy(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Gf(t){return t.h==-1}Br.X=function(t){return t=Sb(this,t),Gf(t)?-1:fy(t)?0:1};function Ec(t){for(var e=t.g.length,a=[],r=0;r<e;r++)a[r]=~t.g[r];return new Fs(a,~t.h).add(cD)}Br.abs=function(){return Gf(this)?Ec(this):this};Br.add=function(t){for(var e=Math.max(this.g.length,t.g.length),a=[],r=0,s=0;s<=e;s++){var l=r+(this.D(s)&65535)+(t.D(s)&65535),h=(l>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=h>>>16,l&=65535,h&=65535,a[s]=h<<16|l}return new Fs(a,a[a.length-1]&-2147483648?-1:0)};function Sb(t,e){return t.add(Ec(e))}Br.R=function(t){if(fy(this)||fy(t))return H_;if(Gf(this))return Gf(t)?Ec(this).R(Ec(t)):Ec(Ec(this).R(t));if(Gf(t))return Ec(this.R(Ec(t)));if(0>this.X(pU)&&0>t.X(pU))return Tm(this.ea()*t.ea());for(var e=this.g.length+t.g.length,a=[],r=0;r<2*e;r++)a[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var l=this.D(r)>>>16,h=this.D(r)&65535,n=t.D(s)>>>16,w=t.D(s)&65535;a[2*r+2*s]+=h*w,cC(a,2*r+2*s),a[2*r+2*s+1]+=l*w,cC(a,2*r+2*s+1),a[2*r+2*s+1]+=h*n,cC(a,2*r+2*s+1),a[2*r+2*s+2]+=l*n,cC(a,2*r+2*s+2)}for(r=0;r<e;r++)a[r]=a[2*r+1]<<16|a[2*r];for(r=e;r<2*e;r++)a[r]=0;return new Fs(a,0)};function cC(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function ww(t,e){this.g=t,this.h=e}function Cb(t,e){if(fy(e))throw Error("division by zero");if(fy(t))return new ww(H_,H_);if(Gf(t))return e=Cb(Ec(t),e),new ww(Ec(e.g),Ec(e.h));if(Gf(e))return e=Cb(t,Ec(e)),new ww(Ec(e.g),e.h);if(30<t.g.length){if(Gf(t)||Gf(e))throw Error("slowDivide_ only works with positive integers.");for(var a=cD,r=e;0>=r.X(t);)a=mU(a),r=mU(r);var s=R_(a,1),l=R_(r,1);for(r=R_(r,2),a=R_(a,2);!fy(r);){var h=l.add(r);0>=h.X(t)&&(s=s.add(a),l=h),r=R_(r,1),a=R_(a,1)}return e=Sb(t,s.R(e)),new ww(s,e)}for(s=H_;0<=t.X(e);){for(a=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(a)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),l=Tm(a),h=l.R(e);Gf(h)||0<h.X(t);)a-=r,l=Tm(a),h=l.R(e);fy(l)&&(l=cD),s=s.add(l),t=Sb(t,h)}return new ww(s,t)}Br.gb=function(t){return Cb(this,t).h};Br.and=function(t){for(var e=Math.max(this.g.length,t.g.length),a=[],r=0;r<e;r++)a[r]=this.D(r)&t.D(r);return new Fs(a,this.h&t.h)};Br.or=function(t){for(var e=Math.max(this.g.length,t.g.length),a=[],r=0;r<e;r++)a[r]=this.D(r)|t.D(r);return new Fs(a,this.h|t.h)};Br.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),a=[],r=0;r<e;r++)a[r]=this.D(r)^t.D(r);return new Fs(a,this.h^t.h)};function mU(t){for(var e=t.g.length+1,a=[],r=0;r<e;r++)a[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Fs(a,t.h)}function R_(t,e){var a=e>>5;e%=32;for(var r=t.g.length-a,s=[],l=0;l<r;l++)s[l]=0<e?t.D(l+a)>>>e|t.D(l+a+1)<<32-e:t.D(l+a);return new Fs(s,t.h)}Tb.prototype.createWebChannel=Tb.prototype.g;pf.prototype.send=pf.prototype.u;pf.prototype.open=pf.prototype.m;pf.prototype.close=pf.prototype.close;r2.NO_ERROR=0;r2.TIMEOUT=8;r2.HTTP_ERROR=6;XH.COMPLETE="complete";JH.EventType=TT;TT.OPEN="a";TT.CLOSE="b";TT.ERROR="c";TT.MESSAGE="d";rc.prototype.listen=rc.prototype.O;Sl.prototype.listenOnce=Sl.prototype.P;Sl.prototype.getLastError=Sl.prototype.Sa;Sl.prototype.getLastErrorCode=Sl.prototype.Ia;Sl.prototype.getStatus=Sl.prototype.da;Sl.prototype.getResponseJson=Sl.prototype.Wa;Sl.prototype.getResponseText=Sl.prototype.ja;Sl.prototype.send=Sl.prototype.ha;Sl.prototype.setWithCredentials=Sl.prototype.Oa;Fp.prototype.digest=Fp.prototype.l;Fp.prototype.reset=Fp.prototype.reset;Fp.prototype.update=Fp.prototype.j;Fs.prototype.add=Fs.prototype.add;Fs.prototype.multiply=Fs.prototype.R;Fs.prototype.modulo=Fs.prototype.gb;Fs.prototype.compare=Fs.prototype.X;Fs.prototype.toNumber=Fs.prototype.ea;Fs.prototype.toString=Fs.prototype.toString;Fs.prototype.getBits=Fs.prototype.D;Fs.fromNumber=Tm;Fs.fromString=O$;var Joe=function(){return new Tb},Qoe=function(){return a2()},JE=r2,ele=XH,tle=x0,yU={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ale=bT,dC=JH,rle=Sl,nle=Fp,$_=Fs;const gU="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ld=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ld.UNAUTHENTICATED=new ld(null),ld.GOOGLE_CREDENTIALS=new ld("google-credentials-uid"),ld.FIRST_PARTY=new ld("first-party-uid"),ld.MOCK_USER=new ld("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yv="9.23.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0=new CI("@firebase/firestore");function AU(){return y0.logLevel}function hn(t,...e){if(y0.logLevel<=fs.DEBUG){const a=e.map(n3);y0.debug(`Firestore (${Yv}): ${t}`,...a)}}function Sy(t,...e){if(y0.logLevel<=fs.ERROR){const a=e.map(n3);y0.error(`Firestore (${Yv}): ${t}`,...a)}}function iv(t,...e){if(y0.logLevel<=fs.WARN){const a=e.map(n3);y0.warn(`Firestore (${Yv}): ${t}`,...a)}}function n3(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(t="Unexpected state"){const e=`FIRESTORE (${Yv}) INTERNAL ASSERTION FAILED: `+t;throw Sy(e),new Error(e)}function zo(t,e){t||ti()}function pi(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};let Zr=class extends Um{constructor(e,a){super(e,a),this.code=e,this.message=a,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ay=class{constructor(){this.promise=new Promise((e,a)=>{this.resolve=e,this.reject=a})}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let D$=class{constructor(e,a){this.user=a,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},ile=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,a){e.enqueueRetryable(()=>a(ld.UNAUTHENTICATED))}shutdown(){}},sle=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,a){this.changeListener=a,e.enqueueRetryable(()=>a(this.token.user))}shutdown(){this.changeListener=null}},ole=class{constructor(e){this.t=e,this.currentUser=ld.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,a){let r=this.i;const s=w=>this.i!==r?(r=this.i,a(w)):Promise.resolve();let l=new Ay;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ay,e.enqueueRetryable(()=>s(this.currentUser))};const h=()=>{const w=l;e.enqueueRetryable(async()=>{await w.promise,await s(this.currentUser)})},n=w=>{hn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(w=>n(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?n(w):(hn("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ay)}},0),h()}getToken(){const e=this.i,a=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(a).then(r=>this.i!==e?(hn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(zo(typeof r.accessToken=="string"),new D$(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return zo(e===null||typeof e=="string"),new ld(e)}},lle=class{constructor(e,a,r){this.h=e,this.l=a,this.m=r,this.type="FirstParty",this.user=ld.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}},ule=class{constructor(e,a,r){this.h=e,this.l=a,this.m=r}getToken(){return Promise.resolve(new lle(this.h,this.l,this.m))}start(e,a){e.enqueueRetryable(()=>a(ld.FIRST_PARTY))}shutdown(){}invalidateToken(){}},cle=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},dle=class{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,a){const r=l=>{l.error!=null&&hn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.T;return this.T=l.token,hn("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?a(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const s=l=>{hn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.I.onInit(l=>s(l)),setTimeout(()=>{if(!this.appCheck){const l=this.I.getImmediate({optional:!0});l?s(l):hn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(a=>a?(zo(typeof a.token=="string"),this.T=a.token,new cle(a.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hle(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),a=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(a);else for(let r=0;r<t;r++)a[r]=Math.floor(256*Math.random());return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let M$=class{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=hle(40);for(let l=0;l<s.length;++l)r.length<20&&s[l]<a&&(r+=e.charAt(s[l]%e.length))}return r}};function gs(t,e){return t<e?-1:t>e?1:0}function sv(t,e,a){return t.length===e.length&&t.every((r,s)=>a(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ah=class jC{constructor(e,a){if(this.seconds=e,this.nanoseconds=a,a<0)throw new Zr(ar.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+a);if(a>=1e9)throw new Zr(ar.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+a);if(e<-62135596800)throw new Zr(ar.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Zr(ar.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return jC.fromMillis(Date.now())}static fromDate(e){return jC.fromMillis(e.getTime())}static fromMillis(e){const a=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*a));return new jC(a,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?gs(this.nanoseconds,e.nanoseconds):gs(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ci=class ZC{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ZC(e)}static min(){return new ZC(new ah(0,0))}static max(){return new ZC(new ah(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let I$=class dD{constructor(e,a,r){a===void 0?a=0:a>e.length&&ti(),r===void 0?r=e.length-a:r>e.length-a&&ti(),this.segments=e,this.offset=a,this.len=r}get length(){return this.len}isEqual(e){return dD.comparator(this,e)===0}child(e){const a=this.segments.slice(this.offset,this.limit());return e instanceof dD?e.forEach(r=>{a.push(r)}):a.push(e),this.construct(a)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let a=0;a<this.length;a++)if(this.get(a)!==e.get(a))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let a=0;a<this.length;a++)if(this.get(a)!==e.get(a))return!1;return!0}forEach(e){for(let a=this.offset,r=this.limit();a<r;a++)e(this.segments[a])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,a){const r=Math.min(e.length,a.length);for(let s=0;s<r;s++){const l=e.get(s),h=a.get(s);if(l<h)return-1;if(l>h)return 1}return e.length<a.length?-1:e.length>a.length?1:0}},kl=class qC extends I${construct(e,a,r){return new qC(e,a,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const a=[];for(const r of e){if(r.indexOf("//")>=0)throw new Zr(ar.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);a.push(...r.split("/").filter(s=>s.length>0))}return new qC(a)}static emptyPath(){return new qC([])}};const fle=/^[_a-zA-Z][_a-zA-Z0-9]*$/;let Mm=class N_ extends I${construct(e,a,r){return new N_(e,a,r)}static isValidIdentifier(e){return fle.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),N_.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new N_(["__name__"])}static fromServerFormat(e){const a=[];let r="",s=0;const l=()=>{if(r.length===0)throw new Zr(ar.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);a.push(r),r=""};let h=!1;for(;s<e.length;){const n=e[s];if(n==="\\"){if(s+1===e.length)throw new Zr(ar.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[s+1];if(w!=="\\"&&w!=="."&&w!=="`")throw new Zr(ar.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,s+=2}else n==="`"?(h=!h,s++):n!=="."||h?(r+=n,s++):(l(),s++)}if(l(),h)throw new Zr(ar.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new N_(a)}static emptyPath(){return new N_([])}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yn=class Bw{constructor(e){this.path=e}static fromPath(e){return new Bw(kl.fromString(e))}static fromName(e){return new Bw(kl.fromString(e).popFirst(5))}static empty(){return new Bw(kl.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&kl.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,a){return kl.comparator(e.path,a.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Bw(new kl(e.slice()))}};function ple(t,e){const a=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Ci.fromTimestamp(r===1e9?new ah(a+1,0):new ah(a,r));return new SR(s,Yn.empty(),e)}function mle(t){return new SR(t.readTime,t.key,-1)}let SR=class hD{constructor(e,a,r){this.readTime=e,this.documentKey=a,this.largestBatchId=r}static min(){return new hD(Ci.min(),Yn.empty(),-1)}static max(){return new hD(Ci.max(),Yn.empty(),-1)}};function yle(t,e){let a=t.readTime.compareTo(e.readTime);return a!==0?a:(a=Yn.comparator(t.documentKey,e.documentKey),a!==0?a:gs(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gle="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";let Ale=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ET(t){if(t.code!==ar.FAILED_PRECONDITION||t.message!==gle)throw t;hn("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mr=class xh{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(a=>{this.isDone=!0,this.result=a,this.nextCallback&&this.nextCallback(a)},a=>{this.isDone=!0,this.error=a,this.catchCallback&&this.catchCallback(a)})}catch(e){return this.next(void 0,e)}next(e,a){return this.callbackAttached&&ti(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(a,this.error):this.wrapSuccess(e,this.result):new xh((r,s)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,s)},this.catchCallback=l=>{this.wrapFailure(a,l).next(r,s)}})}toPromise(){return new Promise((e,a)=>{this.next(e,a)})}wrapUserFunction(e){try{const a=e();return a instanceof xh?a:xh.resolve(a)}catch(a){return xh.reject(a)}}wrapSuccess(e,a){return e?this.wrapUserFunction(()=>e(a)):xh.resolve(a)}wrapFailure(e,a){return e?this.wrapUserFunction(()=>e(a)):xh.reject(a)}static resolve(e){return new xh((a,r)=>{a(e)})}static reject(e){return new xh((a,r)=>{r(e)})}static waitFor(e){return new xh((a,r)=>{let s=0,l=0,h=!1;e.forEach(n=>{++s,n.next(()=>{++l,h&&l===s&&a()},w=>r(w))}),h=!0,l===s&&a()})}static or(e){let a=xh.resolve(!1);for(const r of e)a=a.next(s=>s?xh.resolve(s):r());return a}static forEach(e,a){const r=[];return e.forEach((s,l)=>{r.push(a.call(this,s,l))}),this.waitFor(r)}static mapArray(e,a){return new xh((r,s)=>{const l=e.length,h=new Array(l);let n=0;for(let w=0;w<l;w++){const T=w;a(e[T]).next(P=>{h[T]=P,++n,n===l&&r(h)},P=>s(P))}})}static doWhile(e,a){return new xh((r,s)=>{const l=()=>{e()===!0?a().next(()=>{l()},s):r()};l()})}};function NT(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let i3=class{constructor(e,a){this.previousValue=e,a&&(a.sequenceNumberHandler=r=>this.ot(r),this.ut=r=>a.writeSequenceNumber(r))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}};i3.ct=-1;function d2(t){return t==null}function bb(t){return t===0&&1/t==-1/0}function _le(t){return typeof t=="number"&&Number.isInteger(t)&&!bb(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _U(t){let e=0;for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&e++;return e}function P0(t,e){for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&e(a,t[a])}function L$(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fu=class fD{constructor(e,a){this.comparator=e,this.root=a||Pc.EMPTY}insert(e,a){return new fD(this.comparator,this.root.insert(e,a,this.comparator).copy(null,null,Pc.BLACK,null,null))}remove(e){return new fD(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pc.BLACK,null,null))}get(e){let a=this.root;for(;!a.isEmpty();){const r=this.comparator(e,a.key);if(r===0)return a.value;r<0?a=a.left:r>0&&(a=a.right)}return null}indexOf(e){let a=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return a+r.left.size;s<0?r=r.left:(a+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((a,r)=>(e(a,r),!1))}toString(){const e=[];return this.inorderTraversal((a,r)=>(e.push(`${a}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hC(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hC(this.root,e,this.comparator,!1)}getReverseIterator(){return new hC(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hC(this.root,e,this.comparator,!0)}};class hC{constructor(e,a,r,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=a?r(e.key,a):1,a&&s&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const a={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return a}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pc{constructor(e,a,r,s,l){this.key=e,this.value=a,this.color=r??Pc.RED,this.left=s??Pc.EMPTY,this.right=l??Pc.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,a,r,s,l){return new Pc(e??this.key,a??this.value,r??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,a,r){let s=this;const l=r(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,a,r),null):l===0?s.copy(null,a,null,null,null):s.copy(null,null,null,null,s.right.insert(e,a,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Pc.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,a){let r,s=this;if(a(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,a),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),a(e,s.key)===0){if(s.right.isEmpty())return Pc.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,a))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),a=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,a)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ti();const e=this.left.check();if(e!==this.right.check())throw ti();return e+(this.isRed()?0:1)}}Pc.EMPTY=null,Pc.RED=!0,Pc.BLACK=!1;Pc.EMPTY=new class{constructor(){this.size=0}get key(){throw ti()}get value(){throw ti()}get color(){throw ti()}get left(){throw ti()}get right(){throw ti()}copy(t,e,a,r,s){return this}insert(t,e,a){return new Pc(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e){this.comparator=e,this.data=new fu(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((a,r)=>(e(a),!1))}forEachInRange(e,a){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;a(s.key)}}forEachWhile(e,a){let r;for(r=a!==void 0?this.data.getIteratorFrom(a):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const a=this.data.getIteratorFrom(e);return a.hasNext()?a.getNext().key:null}getIterator(){return new vU(this.data.getIterator())}getIteratorFrom(e){return new vU(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let a=this;return a.size<e.size&&(a=e,e=this),e.forEach(r=>{a=a.add(r)}),a}isEqual(e){if(!(e instanceof Ad)||this.size!==e.size)return!1;const a=this.data.getIterator(),r=e.data.getIterator();for(;a.hasNext();){const s=a.getNext().key,l=r.getNext().key;if(this.comparator(s,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(a=>{e.push(a)}),e}toString(){const e=[];return this.forEach(a=>e.push(a)),"SortedSet("+e.toString()+")"}copy(e){const a=new Ad(this.comparator);return a.data=e,a}}class vU{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e){this.fields=e,e.sort(Mm.comparator)}static empty(){return new lf([])}unionWith(e){let a=new Ad(Mm.comparator);for(const r of this.fields)a=a.add(r);for(const r of e)a=a.add(r);return new lf(a.toArray())}covers(e){for(const a of this.fields)if(a.isPrefixOf(e))return!0;return!1}isEqual(e){return sv(this.fields,e.fields,(a,r)=>a.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F$ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e){this.binaryString=e}static fromBase64String(e){const a=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new F$("Invalid base64 string: "+s):s}}(e);return new vd(a)}static fromUint8Array(e){const a=function(r){let s="";for(let l=0;l<r.length;++l)s+=String.fromCharCode(r[l]);return s}(e);return new vd(a)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const a=new Uint8Array(e.length);for(let r=0;r<e.length;r++)a[r]=e.charCodeAt(r);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return gs(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vd.EMPTY_BYTE_STRING=new vd("");const vle=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ug(t){if(zo(!!t),typeof t=="string"){let e=0;const a=vle.exec(t);if(zo(!!a),a[1]){let s=a[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:uu(t.seconds),nanos:uu(t.nanos)}}function uu(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function g0(t){return typeof t=="string"?vd.fromBase64String(t):vd.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s3(t){var e,a;return((a=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||a===void 0?void 0:a.stringValue)==="server_timestamp"}function o3(t){const e=t.mapValue.fields.__previous_value__;return s3(e)?o3(e):e}function CR(t){const e=Ug(t.mapValue.fields.__local_write_time__.timestampValue);return new ah(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wle{constructor(e,a,r,s,l,h,n,w,T){this.databaseId=e,this.appId=a,this.persistenceKey=r,this.host=s,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=n,this.longPollingOptions=w,this.useFetchStreams=T}}class bR{constructor(e,a){this.projectId=e,this.database=a||"(default)"}static empty(){return new bR("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof bR&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC={mapValue:{}};function A0(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?s3(t)?4:Rle(t)?9007199254740991:10:ti()}function Im(t,e){if(t===e)return!0;const a=A0(t);if(a!==A0(e))return!1;switch(a){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return CR(t).isEqual(CR(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const l=Ug(r.timestampValue),h=Ug(s.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return g0(r.bytesValue).isEqual(g0(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return uu(r.geoPointValue.latitude)===uu(s.geoPointValue.latitude)&&uu(r.geoPointValue.longitude)===uu(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return uu(r.integerValue)===uu(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const l=uu(r.doubleValue),h=uu(s.doubleValue);return l===h?bb(l)===bb(h):isNaN(l)&&isNaN(h)}return!1}(t,e);case 9:return sv(t.arrayValue.values||[],e.arrayValue.values||[],Im);case 10:return function(r,s){const l=r.mapValue.fields||{},h=s.mapValue.fields||{};if(_U(l)!==_U(h))return!1;for(const n in l)if(l.hasOwnProperty(n)&&(h[n]===void 0||!Im(l[n],h[n])))return!1;return!0}(t,e);default:return ti()}}function xR(t,e){return(t.values||[]).find(a=>Im(a,e))!==void 0}function ov(t,e){if(t===e)return 0;const a=A0(t),r=A0(e);if(a!==r)return gs(a,r);switch(a){case 0:case 9007199254740991:return 0;case 1:return gs(t.booleanValue,e.booleanValue);case 2:return function(s,l){const h=uu(s.integerValue||s.doubleValue),n=uu(l.integerValue||l.doubleValue);return h<n?-1:h>n?1:h===n?0:isNaN(h)?isNaN(n)?0:-1:1}(t,e);case 3:return wU(t.timestampValue,e.timestampValue);case 4:return wU(CR(t),CR(e));case 5:return gs(t.stringValue,e.stringValue);case 6:return function(s,l){const h=g0(s),n=g0(l);return h.compareTo(n)}(t.bytesValue,e.bytesValue);case 7:return function(s,l){const h=s.split("/"),n=l.split("/");for(let w=0;w<h.length&&w<n.length;w++){const T=gs(h[w],n[w]);if(T!==0)return T}return gs(h.length,n.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,l){const h=gs(uu(s.latitude),uu(l.latitude));return h!==0?h:gs(uu(s.longitude),uu(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,l){const h=s.values||[],n=l.values||[];for(let w=0;w<h.length&&w<n.length;++w){const T=ov(h[w],n[w]);if(T)return T}return gs(h.length,n.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,l){if(s===fC.mapValue&&l===fC.mapValue)return 0;if(s===fC.mapValue)return 1;if(l===fC.mapValue)return-1;const h=s.fields||{},n=Object.keys(h),w=l.fields||{},T=Object.keys(w);n.sort(),T.sort();for(let P=0;P<n.length&&P<T.length;++P){const z=gs(n[P],T[P]);if(z!==0)return z;const k=ov(h[n[P]],w[T[P]]);if(k!==0)return k}return gs(n.length,T.length)}(t.mapValue,e.mapValue);default:throw ti()}}function wU(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return gs(t,e);const a=Ug(t),r=Ug(e),s=gs(a.seconds,r.seconds);return s!==0?s:gs(a.nanos,r.nanos)}function lv(t){return pD(t)}function pD(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const s=Ug(r);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?g0(t.bytesValue).toBase64():"referenceValue"in t?(a=t.referenceValue,Yn.fromName(a).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let s="[",l=!0;for(const h of r.values||[])l?l=!1:s+=",",s+=pD(h);return s+"]"}(t.arrayValue):"mapValue"in t?function(r){const s=Object.keys(r.fields||{}).sort();let l="{",h=!0;for(const n of s)h?h=!1:l+=",",l+=`${n}:${pD(r.fields[n])}`;return l+"}"}(t.mapValue):ti();var e,a}function RU(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function mD(t){return!!t&&"integerValue"in t}function l3(t){return!!t&&"arrayValue"in t}function TU(t){return!!t&&"nullValue"in t}function SU(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function HC(t){return!!t&&"mapValue"in t}function Yw(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return P0(t.mapValue.fields,(a,r)=>e.mapValue.fields[a]=Yw(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let a=0;a<(t.arrayValue.values||[]).length;++a)e.arrayValue.values[a]=Yw(t.arrayValue.values[a]);return e}return Object.assign({},t)}function Rle(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e){this.value=e}static empty(){return new Ph({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let a=this.value;for(let r=0;r<e.length-1;++r)if(a=(a.mapValue.fields||{})[e.get(r)],!HC(a))return null;return a=(a.mapValue.fields||{})[e.lastSegment()],a||null}}set(e,a){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yw(a)}setAll(e){let a=Mm.emptyPath(),r={},s=[];e.forEach((h,n)=>{if(!a.isImmediateParentOf(n)){const w=this.getFieldsMap(a);this.applyChanges(w,r,s),r={},s=[],a=n.popLast()}h?r[n.lastSegment()]=Yw(h):s.push(n.lastSegment())});const l=this.getFieldsMap(a);this.applyChanges(l,r,s)}delete(e){const a=this.field(e.popLast());HC(a)&&a.mapValue.fields&&delete a.mapValue.fields[e.lastSegment()]}isEqual(e){return Im(this.value,e.value)}getFieldsMap(e){let a=this.value;a.mapValue.fields||(a.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=a.mapValue.fields[e.get(r)];HC(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},a.mapValue.fields[e.get(r)]=s),a=s}return a.mapValue.fields}applyChanges(e,a,r){P0(a,(s,l)=>e[s]=l);for(const s of r)delete e[s]}clone(){return new Ph(Yw(this.value))}}function U$(t){const e=[];return P0(t.fields,(a,r)=>{const s=new Mm([a]);if(HC(r)){const l=U$(r.mapValue).fields;if(l.length===0)e.push(s);else for(const h of l)e.push(s.child(h))}else e.push(s)}),new lf(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,a,r,s,l,h,n){this.key=e,this.documentType=a,this.version=r,this.readTime=s,this.createTime=l,this.data=h,this.documentState=n}static newInvalidDocument(e){return new dd(e,0,Ci.min(),Ci.min(),Ci.min(),Ph.empty(),0)}static newFoundDocument(e,a,r,s){return new dd(e,1,a,Ci.min(),r,s,0)}static newNoDocument(e,a){return new dd(e,2,a,Ci.min(),Ci.min(),Ph.empty(),0)}static newUnknownDocument(e,a){return new dd(e,3,a,Ci.min(),Ci.min(),Ph.empty(),2)}convertToFoundDocument(e,a){return!this.createTime.isEqual(Ci.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=a,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ph.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ph.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ci.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dd&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dd(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e,a){this.position=e,this.inclusive=a}}function CU(t,e,a){let r=0;for(let s=0;s<t.position.length;s++){const l=e[s],h=t.position[s];if(l.field.isKeyField()?r=Yn.comparator(Yn.fromName(h.referenceValue),a.key):r=ov(h,a.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function bU(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let a=0;a<t.position.length;a++)if(!Im(t.position[a],e.position[a]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e,a="asc"){this.field=e,this.dir=a}}function Tle(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k${}class du extends k${constructor(e,a,r){super(),this.field=e,this.op=a,this.value=r}static create(e,a,r){return e.isKeyField()?a==="in"||a==="not-in"?this.createKeyFieldInFilter(e,a,r):new Cle(e,a,r):a==="array-contains"?new Ple(e,r):a==="in"?new Ele(e,r):a==="not-in"?new Nle(e,r):a==="array-contains-any"?new Vle(e,r):new du(e,a,r)}static createKeyFieldInFilter(e,a,r){return a==="in"?new ble(e,r):new xle(e,r)}matches(e){const a=e.data.field(this.field);return this.op==="!="?a!==null&&this.matchesComparison(ov(a,this.value)):a!==null&&A0(this.value)===A0(a)&&this.matchesComparison(ov(a,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ti()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Up extends k${constructor(e,a){super(),this.filters=e,this.op=a,this.lt=null}static create(e,a){return new Up(e,a)}matches(e){return B$(this)?this.filters.find(a=>!a.matches(e))===void 0:this.filters.find(a=>a.matches(e))!==void 0}getFlattenedFilters(){return this.lt!==null||(this.lt=this.filters.reduce((e,a)=>e.concat(a.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(a=>a.isInequality());return e!==null?e.field:null}ft(e){for(const a of this.getFlattenedFilters())if(e(a))return a;return null}}function B$(t){return t.op==="and"}function G$(t){return Sle(t)&&B$(t)}function Sle(t){for(const e of t.filters)if(e instanceof Up)return!1;return!0}function yD(t){if(t instanceof du)return t.field.canonicalString()+t.op.toString()+lv(t.value);if(G$(t))return t.filters.map(e=>yD(e)).join(",");{const e=t.filters.map(a=>yD(a)).join(",");return`${t.op}(${e})`}}function j$(t,e){return t instanceof du?function(a,r){return r instanceof du&&a.op===r.op&&a.field.isEqual(r.field)&&Im(a.value,r.value)}(t,e):t instanceof Up?function(a,r){return r instanceof Up&&a.op===r.op&&a.filters.length===r.filters.length?a.filters.reduce((s,l,h)=>s&&j$(l,r.filters[h]),!0):!1}(t,e):void ti()}function Z$(t){return t instanceof du?function(e){return`${e.field.canonicalString()} ${e.op} ${lv(e.value)}`}(t):t instanceof Up?function(e){return e.op.toString()+" {"+e.getFilters().map(Z$).join(" ,")+"}"}(t):"Filter"}class Cle extends du{constructor(e,a,r){super(e,a,r),this.key=Yn.fromName(r.referenceValue)}matches(e){const a=Yn.comparator(e.key,this.key);return this.matchesComparison(a)}}class ble extends du{constructor(e,a){super(e,"in",a),this.keys=q$("in",a)}matches(e){return this.keys.some(a=>a.isEqual(e.key))}}class xle extends du{constructor(e,a){super(e,"not-in",a),this.keys=q$("not-in",a)}matches(e){return!this.keys.some(a=>a.isEqual(e.key))}}function q$(t,e){var a;return(((a=e.arrayValue)===null||a===void 0?void 0:a.values)||[]).map(r=>Yn.fromName(r.referenceValue))}class Ple extends du{constructor(e,a){super(e,"array-contains",a)}matches(e){const a=e.data.field(this.field);return l3(a)&&xR(a.arrayValue,this.value)}}class Ele extends du{constructor(e,a){super(e,"in",a)}matches(e){const a=e.data.field(this.field);return a!==null&&xR(this.value.arrayValue,a)}}class Nle extends du{constructor(e,a){super(e,"not-in",a)}matches(e){if(xR(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const a=e.data.field(this.field);return a!==null&&!xR(this.value.arrayValue,a)}}class Vle extends du{constructor(e,a){super(e,"array-contains-any",a)}matches(e){const a=e.data.field(this.field);return!(!l3(a)||!a.arrayValue.values)&&a.arrayValue.values.some(r=>xR(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zle{constructor(e,a=null,r=[],s=[],l=null,h=null,n=null){this.path=e,this.collectionGroup=a,this.orderBy=r,this.filters=s,this.limit=l,this.startAt=h,this.endAt=n,this.dt=null}}function xU(t,e=null,a=[],r=[],s=null,l=null,h=null){return new zle(t,e,a,r,s,l,h)}function u3(t){const e=pi(t);if(e.dt===null){let a=e.path.canonicalString();e.collectionGroup!==null&&(a+="|cg:"+e.collectionGroup),a+="|f:",a+=e.filters.map(r=>yD(r)).join(","),a+="|ob:",a+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),d2(e.limit)||(a+="|l:",a+=e.limit),e.startAt&&(a+="|lb:",a+=e.startAt.inclusive?"b:":"a:",a+=e.startAt.position.map(r=>lv(r)).join(",")),e.endAt&&(a+="|ub:",a+=e.endAt.inclusive?"a:":"b:",a+=e.endAt.position.map(r=>lv(r)).join(",")),e.dt=a}return e.dt}function c3(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let a=0;a<t.orderBy.length;a++)if(!Tle(t.orderBy[a],e.orderBy[a]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let a=0;a<t.filters.length;a++)if(!j$(t.filters[a],e.filters[a]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!bU(t.startAt,e.startAt)&&bU(t.endAt,e.endAt)}function gD(t){return Yn.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,a=null,r=[],s=[],l=null,h="F",n=null,w=null){this.path=e,this.collectionGroup=a,this.explicitOrderBy=r,this.filters=s,this.limit=l,this.limitType=h,this.startAt=n,this.endAt=w,this.wt=null,this._t=null,this.startAt,this.endAt}}function Ole(t,e,a,r,s,l,h,n){return new Xv(t,e,a,r,s,l,h,n)}function h2(t){return new Xv(t)}function PU(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function d3(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function f2(t){for(const e of t.filters){const a=e.getFirstInequalityField();if(a!==null)return a}return null}function H$(t){return t.collectionGroup!==null}function W_(t){const e=pi(t);if(e.wt===null){e.wt=[];const a=f2(e),r=d3(e);if(a!==null&&r===null)a.isKeyField()||e.wt.push(new K_(a)),e.wt.push(new K_(Mm.keyField(),"asc"));else{let s=!1;for(const l of e.explicitOrderBy)e.wt.push(l),l.field.isKeyField()&&(s=!0);if(!s){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new K_(Mm.keyField(),l))}}}return e.wt}function Cy(t){const e=pi(t);if(!e._t)if(e.limitType==="F")e._t=xU(e.path,e.collectionGroup,W_(e),e.filters,e.limit,e.startAt,e.endAt);else{const a=[];for(const l of W_(e)){const h=l.dir==="desc"?"asc":"desc";a.push(new K_(l.field,h))}const r=e.endAt?new xb(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new xb(e.startAt.position,e.startAt.inclusive):null;e._t=xU(e.path,e.collectionGroup,a,e.filters,e.limit,r,s)}return e._t}function AD(t,e){e.getFirstInequalityField(),f2(t);const a=t.filters.concat([e]);return new Xv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),a,t.limit,t.limitType,t.startAt,t.endAt)}function _D(t,e,a){return new Xv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,a,t.startAt,t.endAt)}function p2(t,e){return c3(Cy(t),Cy(e))&&t.limitType===e.limitType}function $$(t){return`${u3(Cy(t))}|lt:${t.limitType}`}function vD(t){return`Query(target=${function(e){let a=e.path.canonicalString();return e.collectionGroup!==null&&(a+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(a+=`, filters: [${e.filters.map(r=>Z$(r)).join(", ")}]`),d2(e.limit)||(a+=", limit: "+e.limit),e.orderBy.length>0&&(a+=`, orderBy: [${e.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),e.startAt&&(a+=", startAt: ",a+=e.startAt.inclusive?"b:":"a:",a+=e.startAt.position.map(r=>lv(r)).join(",")),e.endAt&&(a+=", endAt: ",a+=e.endAt.inclusive?"a:":"b:",a+=e.endAt.position.map(r=>lv(r)).join(",")),`Target(${a})`}(Cy(t))}; limitType=${t.limitType})`}function m2(t,e){return e.isFoundDocument()&&function(a,r){const s=r.key.path;return a.collectionGroup!==null?r.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(s):Yn.isDocumentKey(a.path)?a.path.isEqual(s):a.path.isImmediateParentOf(s)}(t,e)&&function(a,r){for(const s of W_(a))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(a,r){for(const s of a.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(a,r){return!(a.startAt&&!function(s,l,h){const n=CU(s,l,h);return s.inclusive?n<=0:n<0}(a.startAt,W_(a),r)||a.endAt&&!function(s,l,h){const n=CU(s,l,h);return s.inclusive?n>=0:n>0}(a.endAt,W_(a),r))}(t,e)}function Dle(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function K$(t){return(e,a)=>{let r=!1;for(const s of W_(t)){const l=Mle(s,e,a);if(l!==0)return l;r=r||s.field.isKeyField()}return 0}}function Mle(t,e,a){const r=t.field.isKeyField()?Yn.comparator(e.key,a.key):function(s,l,h){const n=l.data.field(s),w=h.data.field(s);return n!==null&&w!==null?ov(n,w):ti()}(t.field,e,a);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ti()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(e,a){this.mapKeyFn=e,this.equalsFn=a,this.inner={},this.innerSize=0}get(e){const a=this.mapKeyFn(e),r=this.inner[a];if(r!==void 0){for(const[s,l]of r)if(this.equalsFn(s,e))return l}}has(e){return this.get(e)!==void 0}set(e,a){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,a]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return void(s[l]=[e,a]);s.push([e,a]),this.innerSize++}delete(e){const a=this.mapKeyFn(e),r=this.inner[a];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[a]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){P0(this.inner,(a,r)=>{for(const[s,l]of r)e(s,l)})}isEmpty(){return L$(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ile=new fu(Yn.comparator);function by(){return Ile}const W$=new fu(Yn.comparator);function Gw(...t){let e=W$;for(const a of t)e=e.insert(a.key,a);return e}function Y$(t){let e=W$;return t.forEach((a,r)=>e=e.insert(a,r.overlayedDocument)),e}function JA(){return Xw()}function X$(){return Xw()}function Xw(){return new Jv(t=>t.toString(),(t,e)=>t.isEqual(e))}const Lle=new fu(Yn.comparator),Fle=new Ad(Yn.comparator);function ki(...t){let e=Fle;for(const a of t)e=e.add(a);return e}const Ule=new Ad(gs);function kle(){return Ule}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J$(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bb(e)?"-0":e}}function Q$(t){return{integerValue:""+t}}function Ble(t,e){return _le(e)?Q$(e):J$(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(){this._=void 0}}function Gle(t,e,a){return t instanceof Pb?function(r,s){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&s3(s)&&(s=o3(s)),s&&(l.fields.__previous_value__=s),{mapValue:l}}(a,e):t instanceof PR?tK(t,e):t instanceof ER?aK(t,e):function(r,s){const l=eK(r,s),h=EU(l)+EU(r.gt);return mD(l)&&mD(r.gt)?Q$(h):J$(r.serializer,h)}(t,e)}function jle(t,e,a){return t instanceof PR?tK(t,e):t instanceof ER?aK(t,e):a}function eK(t,e){return t instanceof Eb?mD(a=e)||function(r){return!!r&&"doubleValue"in r}(a)?e:{integerValue:0}:null;var a}class Pb extends y2{}class PR extends y2{constructor(e){super(),this.elements=e}}function tK(t,e){const a=rK(e);for(const r of t.elements)a.some(s=>Im(s,r))||a.push(r);return{arrayValue:{values:a}}}class ER extends y2{constructor(e){super(),this.elements=e}}function aK(t,e){let a=rK(e);for(const r of t.elements)a=a.filter(s=>!Im(s,r));return{arrayValue:{values:a}}}class Eb extends y2{constructor(e,a){super(),this.serializer=e,this.gt=a}}function EU(t){return uu(t.integerValue||t.doubleValue)}function rK(t){return l3(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Zle(t,e){return t.field.isEqual(e.field)&&function(a,r){return a instanceof PR&&r instanceof PR||a instanceof ER&&r instanceof ER?sv(a.elements,r.elements,Im):a instanceof Eb&&r instanceof Eb?Im(a.gt,r.gt):a instanceof Pb&&r instanceof Pb}(t.transform,e.transform)}class qle{constructor(e,a){this.version=e,this.transformResults=a}}class Nh{constructor(e,a){this.updateTime=e,this.exists=a}static none(){return new Nh}static exists(e){return new Nh(void 0,e)}static updateTime(e){return new Nh(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $C(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class g2{}function nK(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new A2(t.key,Nh.none()):new VT(t.key,t.data,Nh.none());{const a=t.data,r=Ph.empty();let s=new Ad(Mm.comparator);for(let l of e.fields)if(!s.has(l)){let h=a.field(l);h===null&&l.length>1&&(l=l.popLast(),h=a.field(l)),h===null?r.delete(l):r.set(l,h),s=s.add(l)}return new Kg(t.key,r,new lf(s.toArray()),Nh.none())}}function Hle(t,e,a){t instanceof VT?function(r,s,l){const h=r.value.clone(),n=VU(r.fieldTransforms,s,l.transformResults);h.setAll(n),s.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(t,e,a):t instanceof Kg?function(r,s,l){if(!$C(r.precondition,s))return void s.convertToUnknownDocument(l.version);const h=VU(r.fieldTransforms,s,l.transformResults),n=s.data;n.setAll(iK(r)),n.setAll(h),s.convertToFoundDocument(l.version,n).setHasCommittedMutations()}(t,e,a):function(r,s,l){s.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,a)}function Jw(t,e,a,r){return t instanceof VT?function(s,l,h,n){if(!$C(s.precondition,l))return h;const w=s.value.clone(),T=zU(s.fieldTransforms,n,l);return w.setAll(T),l.convertToFoundDocument(l.version,w).setHasLocalMutations(),null}(t,e,a,r):t instanceof Kg?function(s,l,h,n){if(!$C(s.precondition,l))return h;const w=zU(s.fieldTransforms,n,l),T=l.data;return T.setAll(iK(s)),T.setAll(w),l.convertToFoundDocument(l.version,T).setHasLocalMutations(),h===null?null:h.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(P=>P.field))}(t,e,a,r):function(s,l,h){return $C(s.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(t,e,a)}function $le(t,e){let a=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),l=eK(r.transform,s||null);l!=null&&(a===null&&(a=Ph.empty()),a.set(r.field,l))}return a||null}function NU(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(a,r){return a===void 0&&r===void 0||!(!a||!r)&&sv(a,r,(s,l)=>Zle(s,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class VT extends g2{constructor(e,a,r,s=[]){super(),this.key=e,this.value=a,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Kg extends g2{constructor(e,a,r,s,l=[]){super(),this.key=e,this.data=a,this.fieldMask=r,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function iK(t){const e=new Map;return t.fieldMask.fields.forEach(a=>{if(!a.isEmpty()){const r=t.data.field(a);e.set(a,r)}}),e}function VU(t,e,a){const r=new Map;zo(t.length===a.length);for(let s=0;s<a.length;s++){const l=t[s],h=l.transform,n=e.data.field(l.field);r.set(l.field,jle(h,n,a[s]))}return r}function zU(t,e,a){const r=new Map;for(const s of t){const l=s.transform,h=a.data.field(s.field);r.set(s.field,Gle(l,h,e))}return r}class A2 extends g2{constructor(e,a){super(),this.key=e,this.precondition=a,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Kle extends g2{constructor(e,a){super(),this.key=e,this.precondition=a,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wle{constructor(e,a,r,s){this.batchId=e,this.localWriteTime=a,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,a){const r=a.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(e.key)&&Hle(l,e,r[s])}}applyToLocalView(e,a){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(a=Jw(r,e,a,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(a=Jw(r,e,a,this.localWriteTime));return a}applyToLocalDocumentSet(e,a){const r=X$();return this.mutations.forEach(s=>{const l=e.get(s.key),h=l.overlayedDocument;let n=this.applyToLocalView(h,l.mutatedFields);n=a.has(s.key)?null:n;const w=nK(h,n);w!==null&&r.set(s.key,w),h.isValidDocument()||h.convertToNoDocument(Ci.min())}),r}keys(){return this.mutations.reduce((e,a)=>e.add(a.key),ki())}isEqual(e){return this.batchId===e.batchId&&sv(this.mutations,e.mutations,(a,r)=>NU(a,r))&&sv(this.baseMutations,e.baseMutations,(a,r)=>NU(a,r))}}class h3{constructor(e,a,r,s){this.batch=e,this.commitVersion=a,this.mutationResults=r,this.docVersions=s}static from(e,a,r){zo(e.mutations.length===r.length);let s=Lle;const l=e.mutations;for(let h=0;h<l.length;h++)s=s.insert(l[h].key,r[h].version);return new h3(e,a,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yle{constructor(e,a){this.largestBatchId=e,this.mutation=a}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xle{constructor(e,a){this.count=e,this.unchangedNames=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ou,rs;function Jle(t){switch(t){default:return ti();case ar.CANCELLED:case ar.UNKNOWN:case ar.DEADLINE_EXCEEDED:case ar.RESOURCE_EXHAUSTED:case ar.INTERNAL:case ar.UNAVAILABLE:case ar.UNAUTHENTICATED:return!1;case ar.INVALID_ARGUMENT:case ar.NOT_FOUND:case ar.ALREADY_EXISTS:case ar.PERMISSION_DENIED:case ar.FAILED_PRECONDITION:case ar.ABORTED:case ar.OUT_OF_RANGE:case ar.UNIMPLEMENTED:case ar.DATA_LOSS:return!0}}function sK(t){if(t===void 0)return Sy("GRPC error has no .code"),ar.UNKNOWN;switch(t){case ou.OK:return ar.OK;case ou.CANCELLED:return ar.CANCELLED;case ou.UNKNOWN:return ar.UNKNOWN;case ou.DEADLINE_EXCEEDED:return ar.DEADLINE_EXCEEDED;case ou.RESOURCE_EXHAUSTED:return ar.RESOURCE_EXHAUSTED;case ou.INTERNAL:return ar.INTERNAL;case ou.UNAVAILABLE:return ar.UNAVAILABLE;case ou.UNAUTHENTICATED:return ar.UNAUTHENTICATED;case ou.INVALID_ARGUMENT:return ar.INVALID_ARGUMENT;case ou.NOT_FOUND:return ar.NOT_FOUND;case ou.ALREADY_EXISTS:return ar.ALREADY_EXISTS;case ou.PERMISSION_DENIED:return ar.PERMISSION_DENIED;case ou.FAILED_PRECONDITION:return ar.FAILED_PRECONDITION;case ou.ABORTED:return ar.ABORTED;case ou.OUT_OF_RANGE:return ar.OUT_OF_RANGE;case ou.UNIMPLEMENTED:return ar.UNIMPLEMENTED;case ou.DATA_LOSS:return ar.DATA_LOSS;default:return ti()}}(rs=ou||(ou={}))[rs.OK=0]="OK",rs[rs.CANCELLED=1]="CANCELLED",rs[rs.UNKNOWN=2]="UNKNOWN",rs[rs.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rs[rs.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rs[rs.NOT_FOUND=5]="NOT_FOUND",rs[rs.ALREADY_EXISTS=6]="ALREADY_EXISTS",rs[rs.PERMISSION_DENIED=7]="PERMISSION_DENIED",rs[rs.UNAUTHENTICATED=16]="UNAUTHENTICATED",rs[rs.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rs[rs.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rs[rs.ABORTED=10]="ABORTED",rs[rs.OUT_OF_RANGE=11]="OUT_OF_RANGE",rs[rs.UNIMPLEMENTED=12]="UNIMPLEMENTED",rs[rs.INTERNAL=13]="INTERNAL",rs[rs.UNAVAILABLE=14]="UNAVAILABLE",rs[rs.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return pC}static getOrCreateInstance(){return pC===null&&(pC=new f3),pC}onExistenceFilterMismatch(e){const a=Symbol();return this.onExistenceFilterMismatchCallbacks.set(a,e),()=>this.onExistenceFilterMismatchCallbacks.delete(a)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(a=>a(e))}}let pC=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qle(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eue=new $_([4294967295,4294967295],0);function OU(t){const e=Qle().encode(t),a=new nle;return a.update(e),new Uint8Array(a.digest())}function DU(t){const e=new DataView(t.buffer),a=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new $_([a,r],0),new $_([s,l],0)]}class p3{constructor(e,a,r){if(this.bitmap=e,this.padding=a,this.hashCount=r,a<0||a>=8)throw new jw(`Invalid padding: ${a}`);if(r<0)throw new jw(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new jw(`Invalid hash count: ${r}`);if(e.length===0&&a!==0)throw new jw(`Invalid padding when bitmap length is 0: ${a}`);this.It=8*e.length-a,this.Tt=$_.fromNumber(this.It)}Et(e,a,r){let s=e.add(a.multiply($_.fromNumber(r)));return s.compare(eue)===1&&(s=new $_([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Tt).toNumber()}At(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}vt(e){if(this.It===0)return!1;const a=OU(e),[r,s]=DU(a);for(let l=0;l<this.hashCount;l++){const h=this.Et(r,s,l);if(!this.At(h))return!1}return!0}static create(e,a,r){const s=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new p3(l,s,a);return r.forEach(n=>h.insert(n)),h}insert(e){if(this.It===0)return;const a=OU(e),[r,s]=DU(a);for(let l=0;l<this.hashCount;l++){const h=this.Et(r,s,l);this.Rt(h)}}Rt(e){const a=Math.floor(e/8),r=e%8;this.bitmap[a]|=1<<r}}class jw extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e,a,r,s,l){this.snapshotVersion=e,this.targetChanges=a,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,a,r){const s=new Map;return s.set(e,zT.createSynthesizedTargetChangeForCurrentChange(e,a,r)),new _2(Ci.min(),s,new fu(gs),by(),ki())}}class zT{constructor(e,a,r,s,l){this.resumeToken=e,this.current=a,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,a,r){return new zT(r,a,ki(),ki(),ki())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e,a,r,s){this.Pt=e,this.removedTargetIds=a,this.key=r,this.bt=s}}let oK=class{constructor(e,a){this.targetId=e,this.Vt=a}};class lK{constructor(e,a,r=vd.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=a,this.resumeToken=r,this.cause=s}}class MU{constructor(){this.St=0,this.Dt=LU(),this.Ct=vd.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return this.St!==0}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=ki(),a=ki(),r=ki();return this.Dt.forEach((s,l)=>{switch(l){case 0:e=e.add(s);break;case 2:a=a.add(s);break;case 1:r=r.add(s);break;default:ti()}}),new zT(this.Ct,this.xt,e,a,r)}Ft(){this.Nt=!1,this.Dt=LU()}Bt(e,a){this.Nt=!0,this.Dt=this.Dt.insert(e,a)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class tue{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=by(),this.zt=IU(),this.Wt=new fu(gs)}Ht(e){for(const a of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(a,e.bt):this.Yt(a,e.key,e.bt);for(const a of e.removedTargetIds)this.Yt(a,e.key,e.bt)}Xt(e){this.forEachTarget(e,a=>{const r=this.Zt(a);switch(e.state){case 0:this.te(a)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(a);break;case 3:this.te(a)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(a)&&(this.ee(a),r.$t(e.resumeToken));break;default:ti()}})}forEachTarget(e,a){e.targetIds.length>0?e.targetIds.forEach(a):this.Qt.forEach((r,s)=>{this.te(s)&&a(s)})}ne(e){var a;const r=e.targetId,s=e.Vt.count,l=this.se(r);if(l){const h=l.target;if(gD(h))if(s===0){const n=new Yn(h.path);this.Yt(r,n,dd.newNoDocument(n,Ci.min()))}else zo(s===1);else{const n=this.ie(r);if(n!==s){const w=this.re(e,n);if(w!==0){this.ee(r);const T=w===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(r,T)}(a=f3.instance)===null||a===void 0||a.notifyOnExistenceFilterMismatch(function(T,P,z){var k,U,Z,H,q,J;const re={localCacheCount:P,existenceFilterCount:z.count},ce=z.unchangedNames;return ce&&(re.bloomFilter={applied:T===0,hashCount:(k=ce==null?void 0:ce.hashCount)!==null&&k!==void 0?k:0,bitmapLength:(H=(Z=(U=ce==null?void 0:ce.bits)===null||U===void 0?void 0:U.bitmap)===null||Z===void 0?void 0:Z.length)!==null&&H!==void 0?H:0,padding:(J=(q=ce==null?void 0:ce.bits)===null||q===void 0?void 0:q.padding)!==null&&J!==void 0?J:0}),re}(w,n,e.Vt))}}}}re(e,a){const{unchangedNames:r,count:s}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:l="",padding:h=0},hashCount:n=0}=r;let w,T;try{w=g0(l).toUint8Array()}catch(P){if(P instanceof F$)return iv("Decoding the base64 bloom filter in existence filter failed ("+P.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw P}try{T=new p3(w,h,n)}catch(P){return iv(P instanceof jw?"BloomFilter error: ":"Applying bloom filter failed: ",P),1}return T.It===0?1:s!==a-this.oe(e.targetId,T)?2:0}oe(e,a){const r=this.Gt.getRemoteKeysForTarget(e);let s=0;return r.forEach(l=>{const h=this.Gt.ue(),n=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;a.vt(n)||(this.Yt(e,l,null),s++)}),s}ce(e){const a=new Map;this.Qt.forEach((l,h)=>{const n=this.se(h);if(n){if(l.current&&gD(n.target)){const w=new Yn(n.target.path);this.jt.get(w)!==null||this.ae(h,w)||this.Yt(h,w,dd.newNoDocument(w,e))}l.Mt&&(a.set(h,l.Ot()),l.Ft())}});let r=ki();this.zt.forEach((l,h)=>{let n=!0;h.forEachWhile(w=>{const T=this.se(w);return!T||T.purpose==="TargetPurposeLimboResolution"||(n=!1,!1)}),n&&(r=r.add(l))}),this.jt.forEach((l,h)=>h.setReadTime(e));const s=new _2(e,a,this.Wt,this.jt,r);return this.jt=by(),this.zt=IU(),this.Wt=new fu(gs),s}Jt(e,a){if(!this.te(e))return;const r=this.ae(e,a.key)?2:0;this.Zt(e).Bt(a.key,r),this.jt=this.jt.insert(a.key,a),this.zt=this.zt.insert(a.key,this.he(a.key).add(e))}Yt(e,a,r){if(!this.te(e))return;const s=this.Zt(e);this.ae(e,a)?s.Bt(a,1):s.Lt(a),this.zt=this.zt.insert(a,this.he(a).delete(e)),r&&(this.jt=this.jt.insert(a,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const a=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+a.addedDocuments.size-a.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let a=this.Qt.get(e);return a||(a=new MU,this.Qt.set(e,a)),a}he(e){let a=this.zt.get(e);return a||(a=new Ad(gs),this.zt=this.zt.insert(e,a)),a}te(e){const a=this.se(e)!==null;return a||hn("WatchChangeAggregator","Detected inactive target",e),a}se(e){const a=this.Qt.get(e);return a&&a.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new MU),this.Gt.getRemoteKeysForTarget(e).forEach(a=>{this.Yt(e,a,null)})}ae(e,a){return this.Gt.getRemoteKeysForTarget(e).has(a)}}function IU(){return new fu(Yn.comparator)}function LU(){return new fu(Yn.comparator)}const aue={asc:"ASCENDING",desc:"DESCENDING"},rue={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nue={and:"AND",or:"OR"};class iue{constructor(e,a){this.databaseId=e,this.useProto3Json=a}}function wD(t,e){return t.useProto3Json||d2(e)?e:{value:e}}function Nb(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uK(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function sue(t,e){return Nb(t,e.toTimestamp())}function Vm(t){return zo(!!t),Ci.fromTimestamp(function(e){const a=Ug(e);return new ah(a.seconds,a.nanos)}(t))}function m3(t,e){return function(a){return new kl(["projects",a.projectId,"databases",a.database])}(t).child("documents").child(e).canonicalString()}function cK(t){const e=kl.fromString(t);return zo(pK(e)),e}function RD(t,e){return m3(t.databaseId,e.path)}function QE(t,e){const a=cK(e);if(a.get(1)!==t.databaseId.projectId)throw new Zr(ar.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+a.get(1)+" vs "+t.databaseId.projectId);if(a.get(3)!==t.databaseId.database)throw new Zr(ar.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+a.get(3)+" vs "+t.databaseId.database);return new Yn(dK(a))}function TD(t,e){return m3(t.databaseId,e)}function oue(t){const e=cK(t);return e.length===4?kl.emptyPath():dK(e)}function SD(t){return new kl(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function dK(t){return zo(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function FU(t,e,a){return{name:RD(t,e),fields:a.value.mapValue.fields}}function lue(t,e){let a;if("targetChange"in e){e.targetChange;const r=function(w){return w==="NO_CHANGE"?0:w==="ADD"?1:w==="REMOVE"?2:w==="CURRENT"?3:w==="RESET"?4:ti()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],l=function(w,T){return w.useProto3Json?(zo(T===void 0||typeof T=="string"),vd.fromBase64String(T||"")):(zo(T===void 0||T instanceof Uint8Array),vd.fromUint8Array(T||new Uint8Array))}(t,e.targetChange.resumeToken),h=e.targetChange.cause,n=h&&function(w){const T=w.code===void 0?ar.UNKNOWN:sK(w.code);return new Zr(T,w.message||"")}(h);a=new lK(r,s,l,n||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=QE(t,r.document.name),l=Vm(r.document.updateTime),h=r.document.createTime?Vm(r.document.createTime):Ci.min(),n=new Ph({mapValue:{fields:r.document.fields}}),w=dd.newFoundDocument(s,l,h,n),T=r.targetIds||[],P=r.removedTargetIds||[];a=new KC(T,P,w.key,w)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=QE(t,r.document),l=r.readTime?Vm(r.readTime):Ci.min(),h=dd.newNoDocument(s,l),n=r.removedTargetIds||[];a=new KC([],n,h.key,h)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=QE(t,r.document),l=r.removedTargetIds||[];a=new KC([],l,s,null)}else{if(!("filter"in e))return ti();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:l}=r,h=new Xle(s,l),n=r.targetId;a=new oK(n,h)}}return a}function uue(t,e){let a;if(e instanceof VT)a={update:FU(t,e.key,e.value)};else if(e instanceof A2)a={delete:RD(t,e.key)};else if(e instanceof Kg)a={update:FU(t,e.key,e.data),updateMask:Aue(e.fieldMask)};else{if(!(e instanceof Kle))return ti();a={verify:RD(t,e.key)}}return e.fieldTransforms.length>0&&(a.updateTransforms=e.fieldTransforms.map(r=>function(s,l){const h=l.transform;if(h instanceof Pb)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof PR)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof ER)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Eb)return{fieldPath:l.field.canonicalString(),increment:h.gt};throw ti()}(0,r))),e.precondition.isNone||(a.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:sue(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ti()}(t,e.precondition)),a}function cue(t,e){return t&&t.length>0?(zo(e!==void 0),t.map(a=>function(r,s){let l=r.updateTime?Vm(r.updateTime):Vm(s);return l.isEqual(Ci.min())&&(l=Vm(s)),new qle(l,r.transformResults||[])}(a,e))):[]}function due(t,e){return{documents:[TD(t,e.path)]}}function hue(t,e){const a={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(a.parent=TD(t,r),a.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a.parent=TD(t,r.popLast()),a.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(w){if(w.length!==0)return fK(Up.create(w,"and"))}(e.filters);s&&(a.structuredQuery.where=s);const l=function(w){if(w.length!==0)return w.map(T=>function(P){return{field:V_(P.field),direction:mue(P.dir)}}(T))}(e.orderBy);l&&(a.structuredQuery.orderBy=l);const h=wD(t,e.limit);var n;return h!==null&&(a.structuredQuery.limit=h),e.startAt&&(a.structuredQuery.startAt={before:(n=e.startAt).inclusive,values:n.position}),e.endAt&&(a.structuredQuery.endAt=function(w){return{before:!w.inclusive,values:w.position}}(e.endAt)),a}function fue(t){let e=oue(t.parent);const a=t.structuredQuery,r=a.from?a.from.length:0;let s=null;if(r>0){zo(r===1);const P=a.from[0];P.allDescendants?s=P.collectionId:e=e.child(P.collectionId)}let l=[];a.where&&(l=function(P){const z=hK(P);return z instanceof Up&&G$(z)?z.getFilters():[z]}(a.where));let h=[];a.orderBy&&(h=a.orderBy.map(P=>function(z){return new K_(z_(z.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(z.direction))}(P)));let n=null;a.limit&&(n=function(P){let z;return z=typeof P=="object"?P.value:P,d2(z)?null:z}(a.limit));let w=null;a.startAt&&(w=function(P){const z=!!P.before,k=P.values||[];return new xb(k,z)}(a.startAt));let T=null;return a.endAt&&(T=function(P){const z=!P.before,k=P.values||[];return new xb(k,z)}(a.endAt)),Ole(e,s,h,l,n,"F",w,T)}function pue(t,e){const a=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ti()}}(e.purpose);return a==null?null:{"goog-listen-tags":a}}function hK(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const a=z_(e.unaryFilter.field);return du.create(a,"==",{doubleValue:NaN});case"IS_NULL":const r=z_(e.unaryFilter.field);return du.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=z_(e.unaryFilter.field);return du.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=z_(e.unaryFilter.field);return du.create(l,"!=",{nullValue:"NULL_VALUE"});default:return ti()}}(t):t.fieldFilter!==void 0?function(e){return du.create(z_(e.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ti()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return Up.create(e.compositeFilter.filters.map(a=>hK(a)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ti()}}(e.compositeFilter.op))}(t):ti()}function mue(t){return aue[t]}function yue(t){return rue[t]}function gue(t){return nue[t]}function V_(t){return{fieldPath:t.canonicalString()}}function z_(t){return Mm.fromServerFormat(t.fieldPath)}function fK(t){return t instanceof du?function(e){if(e.op==="=="){if(SU(e.value))return{unaryFilter:{field:V_(e.field),op:"IS_NAN"}};if(TU(e.value))return{unaryFilter:{field:V_(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(SU(e.value))return{unaryFilter:{field:V_(e.field),op:"IS_NOT_NAN"}};if(TU(e.value))return{unaryFilter:{field:V_(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:V_(e.field),op:yue(e.op),value:e.value}}}(t):t instanceof Up?function(e){const a=e.getFilters().map(r=>fK(r));return a.length===1?a[0]:{compositeFilter:{op:gue(e.op),filters:a}}}(t):ti()}function Aue(t){const e=[];return t.fields.forEach(a=>e.push(a.canonicalString())),{fieldPaths:e}}function pK(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,a,r,s,l=Ci.min(),h=Ci.min(),n=vd.EMPTY_BYTE_STRING,w=null){this.target=e,this.targetId=a,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=n,this.expectedCount=w}withSequenceNumber(e){return new Pg(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,a){return new Pg(this.target,this.targetId,this.purpose,this.sequenceNumber,a,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Pg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Pg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ue{constructor(e){this.fe=e}}function vue(t){const e=fue({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?_D(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wue{constructor(){this.rn=new Rue}addToCollectionParentIndex(e,a){return this.rn.add(a),Mr.resolve()}getCollectionParents(e,a){return Mr.resolve(this.rn.getEntries(a))}addFieldIndex(e,a){return Mr.resolve()}deleteFieldIndex(e,a){return Mr.resolve()}getDocumentsMatchingTarget(e,a){return Mr.resolve(null)}getIndexType(e,a){return Mr.resolve(0)}getFieldIndexes(e,a){return Mr.resolve([])}getNextCollectionGroupToUpdate(e){return Mr.resolve(null)}getMinOffset(e,a){return Mr.resolve(SR.min())}getMinOffsetFromCollectionGroup(e,a){return Mr.resolve(SR.min())}updateCollectionGroup(e,a,r){return Mr.resolve()}updateIndexEntries(e,a){return Mr.resolve()}}class Rue{constructor(){this.index={}}add(e){const a=e.lastSegment(),r=e.popLast(),s=this.index[a]||new Ad(kl.comparator),l=!s.has(r);return this.index[a]=s.add(r),l}has(e){const a=e.lastSegment(),r=e.popLast(),s=this.index[a];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ad(kl.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new uv(0)}static Mn(){return new uv(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tue{constructor(){this.changes=new Jv(e=>e.toString(),(e,a)=>e.isEqual(a)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,a){this.assertNotApplied(),this.changes.set(e,dd.newInvalidDocument(e).setReadTime(a))}getEntry(e,a){this.assertNotApplied();const r=this.changes.get(a);return r!==void 0?Mr.resolve(r):this.getFromCache(e,a)}getEntries(e,a){return this.getAllFromCache(e,a)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sue{constructor(e,a){this.overlayedDocument=e,this.mutatedFields=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cue{constructor(e,a,r,s){this.remoteDocumentCache=e,this.mutationQueue=a,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,a){let r=null;return this.documentOverlayCache.getOverlay(e,a).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,a))).next(s=>(r!==null&&Jw(r.mutation,s,lf.empty(),ah.now()),s))}getDocuments(e,a){return this.remoteDocumentCache.getEntries(e,a).next(r=>this.getLocalViewOfDocuments(e,r,ki()).next(()=>r))}getLocalViewOfDocuments(e,a,r=ki()){const s=JA();return this.populateOverlays(e,s,a).next(()=>this.computeViews(e,a,s,r).next(l=>{let h=Gw();return l.forEach((n,w)=>{h=h.insert(n,w.overlayedDocument)}),h}))}getOverlayedDocuments(e,a){const r=JA();return this.populateOverlays(e,r,a).next(()=>this.computeViews(e,a,r,ki()))}populateOverlays(e,a,r){const s=[];return r.forEach(l=>{a.has(l)||s.push(l)}),this.documentOverlayCache.getOverlays(e,s).next(l=>{l.forEach((h,n)=>{a.set(h,n)})})}computeViews(e,a,r,s){let l=by();const h=Xw(),n=Xw();return a.forEach((w,T)=>{const P=r.get(T.key);s.has(T.key)&&(P===void 0||P.mutation instanceof Kg)?l=l.insert(T.key,T):P!==void 0?(h.set(T.key,P.mutation.getFieldMask()),Jw(P.mutation,T,P.mutation.getFieldMask(),ah.now())):h.set(T.key,lf.empty())}),this.recalculateAndSaveOverlays(e,l).next(w=>(w.forEach((T,P)=>h.set(T,P)),a.forEach((T,P)=>{var z;return n.set(T,new Sue(P,(z=h.get(T))!==null&&z!==void 0?z:null))}),n))}recalculateAndSaveOverlays(e,a){const r=Xw();let s=new fu((h,n)=>h-n),l=ki();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,a).next(h=>{for(const n of h)n.keys().forEach(w=>{const T=a.get(w);if(T===null)return;let P=r.get(w)||lf.empty();P=n.applyToLocalView(T,P),r.set(w,P);const z=(s.get(n.batchId)||ki()).add(w);s=s.insert(n.batchId,z)})}).next(()=>{const h=[],n=s.getReverseIterator();for(;n.hasNext();){const w=n.getNext(),T=w.key,P=w.value,z=X$();P.forEach(k=>{if(!l.has(k)){const U=nK(a.get(k),r.get(k));U!==null&&z.set(k,U),l=l.add(k)}}),h.push(this.documentOverlayCache.saveOverlays(e,T,z))}return Mr.waitFor(h)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,a){return this.remoteDocumentCache.getEntries(e,a).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,a,r){return function(s){return Yn.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(a)?this.getDocumentsMatchingDocumentQuery(e,a.path):H$(a)?this.getDocumentsMatchingCollectionGroupQuery(e,a,r):this.getDocumentsMatchingCollectionQuery(e,a,r)}getNextDocuments(e,a,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,a,r,s).next(l=>{const h=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,a,r.largestBatchId,s-l.size):Mr.resolve(JA());let n=-1,w=l;return h.next(T=>Mr.forEach(T,(P,z)=>(n<z.largestBatchId&&(n=z.largestBatchId),l.get(P)?Mr.resolve():this.remoteDocumentCache.getEntry(e,P).next(k=>{w=w.insert(P,k)}))).next(()=>this.populateOverlays(e,T,l)).next(()=>this.computeViews(e,w,T,ki())).next(P=>({batchId:n,changes:Y$(P)})))})}getDocumentsMatchingDocumentQuery(e,a){return this.getDocument(e,new Yn(a)).next(r=>{let s=Gw();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,a,r){const s=a.collectionGroup;let l=Gw();return this.indexManager.getCollectionParents(e,s).next(h=>Mr.forEach(h,n=>{const w=function(T,P){return new Xv(P,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(a,n.child(s));return this.getDocumentsMatchingCollectionQuery(e,w,r).next(T=>{T.forEach((P,z)=>{l=l.insert(P,z)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,a,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,a.path,r.largestBatchId).next(l=>(s=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,a,r,s))).next(l=>{s.forEach((n,w)=>{const T=w.getKey();l.get(T)===null&&(l=l.insert(T,dd.newInvalidDocument(T)))});let h=Gw();return l.forEach((n,w)=>{const T=s.get(n);T!==void 0&&Jw(T.mutation,w,lf.empty(),ah.now()),m2(a,w)&&(h=h.insert(n,w))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bue{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,a){return Mr.resolve(this.cs.get(a))}saveBundleMetadata(e,a){var r;return this.cs.set(a.id,{id:(r=a).id,version:r.version,createTime:Vm(r.createTime)}),Mr.resolve()}getNamedQuery(e,a){return Mr.resolve(this.hs.get(a))}saveNamedQuery(e,a){return this.hs.set(a.name,function(r){return{name:r.name,query:vue(r.bundledQuery),readTime:Vm(r.readTime)}}(a)),Mr.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xue{constructor(){this.overlays=new fu(Yn.comparator),this.ls=new Map}getOverlay(e,a){return Mr.resolve(this.overlays.get(a))}getOverlays(e,a){const r=JA();return Mr.forEach(a,s=>this.getOverlay(e,s).next(l=>{l!==null&&r.set(s,l)})).next(()=>r)}saveOverlays(e,a,r){return r.forEach((s,l)=>{this.we(e,a,l)}),Mr.resolve()}removeOverlaysForBatchId(e,a,r){const s=this.ls.get(r);return s!==void 0&&(s.forEach(l=>this.overlays=this.overlays.remove(l)),this.ls.delete(r)),Mr.resolve()}getOverlaysForCollection(e,a,r){const s=JA(),l=a.length+1,h=new Yn(a.child("")),n=this.overlays.getIteratorFrom(h);for(;n.hasNext();){const w=n.getNext().value,T=w.getKey();if(!a.isPrefixOf(T.path))break;T.path.length===l&&w.largestBatchId>r&&s.set(w.getKey(),w)}return Mr.resolve(s)}getOverlaysForCollectionGroup(e,a,r,s){let l=new fu((T,P)=>T-P);const h=this.overlays.getIterator();for(;h.hasNext();){const T=h.getNext().value;if(T.getKey().getCollectionGroup()===a&&T.largestBatchId>r){let P=l.get(T.largestBatchId);P===null&&(P=JA(),l=l.insert(T.largestBatchId,P)),P.set(T.getKey(),T)}}const n=JA(),w=l.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((T,P)=>n.set(T,P)),!(n.size()>=s)););return Mr.resolve(n)}we(e,a,r){const s=this.overlays.get(r.key);if(s!==null){const h=this.ls.get(s.largestBatchId).delete(r.key);this.ls.set(s.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new Yle(a,r));let l=this.ls.get(a);l===void 0&&(l=ki(),this.ls.set(a,l)),this.ls.set(a,l.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(){this.fs=new Ad(Qu.ds),this.ws=new Ad(Qu._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,a){const r=new Qu(e,a);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,a){e.forEach(r=>this.addReference(r,a))}removeReference(e,a){this.ys(new Qu(e,a))}ps(e,a){e.forEach(r=>this.removeReference(r,a))}Is(e){const a=new Yn(new kl([])),r=new Qu(a,e),s=new Qu(a,e+1),l=[];return this.ws.forEachInRange([r,s],h=>{this.ys(h),l.push(h.key)}),l}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const a=new Yn(new kl([])),r=new Qu(a,e),s=new Qu(a,e+1);let l=ki();return this.ws.forEachInRange([r,s],h=>{l=l.add(h.key)}),l}containsKey(e){const a=new Qu(e,0),r=this.fs.firstAfterOrEqual(a);return r!==null&&e.isEqual(r.key)}}class Qu{constructor(e,a){this.key=e,this.As=a}static ds(e,a){return Yn.comparator(e.key,a.key)||gs(e.As,a.As)}static _s(e,a){return gs(e.As,a.As)||Yn.comparator(e.key,a.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pue{constructor(e,a){this.indexManager=e,this.referenceDelegate=a,this.mutationQueue=[],this.vs=1,this.Rs=new Ad(Qu.ds)}checkEmpty(e){return Mr.resolve(this.mutationQueue.length===0)}addMutationBatch(e,a,r,s){const l=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new Wle(l,a,r,s);this.mutationQueue.push(h);for(const n of s)this.Rs=this.Rs.add(new Qu(n.key,l)),this.indexManager.addToCollectionParentIndex(e,n.key.path.popLast());return Mr.resolve(h)}lookupMutationBatch(e,a){return Mr.resolve(this.Ps(a))}getNextMutationBatchAfterBatchId(e,a){const r=a+1,s=this.bs(r),l=s<0?0:s;return Mr.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Mr.resolve(this.mutationQueue.length===0?-1:this.vs-1)}getAllMutationBatches(e){return Mr.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,a){const r=new Qu(a,0),s=new Qu(a,Number.POSITIVE_INFINITY),l=[];return this.Rs.forEachInRange([r,s],h=>{const n=this.Ps(h.As);l.push(n)}),Mr.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,a){let r=new Ad(gs);return a.forEach(s=>{const l=new Qu(s,0),h=new Qu(s,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([l,h],n=>{r=r.add(n.As)})}),Mr.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,a){const r=a.path,s=r.length+1;let l=r;Yn.isDocumentKey(l)||(l=l.child(""));const h=new Qu(new Yn(l),0);let n=new Ad(gs);return this.Rs.forEachWhile(w=>{const T=w.key.path;return!!r.isPrefixOf(T)&&(T.length===s&&(n=n.add(w.As)),!0)},h),Mr.resolve(this.Vs(n))}Vs(e){const a=[];return e.forEach(r=>{const s=this.Ps(r);s!==null&&a.push(s)}),a}removeMutationBatch(e,a){zo(this.Ss(a.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Rs;return Mr.forEach(a.mutations,s=>{const l=new Qu(s.key,a.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,a){const r=new Qu(a,0),s=this.Rs.firstAfterOrEqual(r);return Mr.resolve(a.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Mr.resolve()}Ss(e,a){return this.bs(e)}bs(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Ps(e){const a=this.bs(e);return a<0||a>=this.mutationQueue.length?null:this.mutationQueue[a]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eue{constructor(e){this.Ds=e,this.docs=new fu(Yn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,a){const r=a.key,s=this.docs.get(r),l=s?s.size:0,h=this.Ds(a);return this.docs=this.docs.insert(r,{document:a.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const a=this.docs.get(e);a&&(this.docs=this.docs.remove(e),this.size-=a.size)}getEntry(e,a){const r=this.docs.get(a);return Mr.resolve(r?r.document.mutableCopy():dd.newInvalidDocument(a))}getEntries(e,a){let r=by();return a.forEach(s=>{const l=this.docs.get(s);r=r.insert(s,l?l.document.mutableCopy():dd.newInvalidDocument(s))}),Mr.resolve(r)}getDocumentsMatchingQuery(e,a,r,s){let l=by();const h=a.path,n=new Yn(h.child("")),w=this.docs.getIteratorFrom(n);for(;w.hasNext();){const{key:T,value:{document:P}}=w.getNext();if(!h.isPrefixOf(T.path))break;T.path.length>h.length+1||yle(mle(P),r)<=0||(s.has(P.key)||m2(a,P))&&(l=l.insert(P.key,P.mutableCopy()))}return Mr.resolve(l)}getAllFromCollectionGroup(e,a,r,s){ti()}Cs(e,a){return Mr.forEach(this.docs,r=>a(r))}newChangeBuffer(e){return new Nue(this)}getSize(e){return Mr.resolve(this.size)}}class Nue extends Tue{constructor(e){super(),this.os=e}applyChanges(e){const a=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?a.push(this.os.addEntry(e,s)):this.os.removeEntry(r)}),Mr.waitFor(a)}getFromCache(e,a){return this.os.getEntry(e,a)}getAllFromCache(e,a){return this.os.getEntries(e,a)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vue{constructor(e){this.persistence=e,this.xs=new Jv(a=>u3(a),c3),this.lastRemoteSnapshotVersion=Ci.min(),this.highestTargetId=0,this.Ns=0,this.ks=new y3,this.targetCount=0,this.Ms=uv.kn()}forEachTarget(e,a){return this.xs.forEach((r,s)=>a(s)),Mr.resolve()}getLastRemoteSnapshotVersion(e){return Mr.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Mr.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),Mr.resolve(this.highestTargetId)}setTargetsMetadata(e,a,r){return r&&(this.lastRemoteSnapshotVersion=r),a>this.Ns&&(this.Ns=a),Mr.resolve()}Fn(e){this.xs.set(e.target,e);const a=e.targetId;a>this.highestTargetId&&(this.Ms=new uv(a),this.highestTargetId=a),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,a){return this.Fn(a),this.targetCount+=1,Mr.resolve()}updateTargetData(e,a){return this.Fn(a),Mr.resolve()}removeTargetData(e,a){return this.xs.delete(a.target),this.ks.Is(a.targetId),this.targetCount-=1,Mr.resolve()}removeTargets(e,a,r){let s=0;const l=[];return this.xs.forEach((h,n)=>{n.sequenceNumber<=a&&r.get(n.targetId)===null&&(this.xs.delete(h),l.push(this.removeMatchingKeysForTargetId(e,n.targetId)),s++)}),Mr.waitFor(l).next(()=>s)}getTargetCount(e){return Mr.resolve(this.targetCount)}getTargetData(e,a){const r=this.xs.get(a)||null;return Mr.resolve(r)}addMatchingKeys(e,a,r){return this.ks.gs(a,r),Mr.resolve()}removeMatchingKeys(e,a,r){this.ks.ps(a,r);const s=this.persistence.referenceDelegate,l=[];return s&&a.forEach(h=>{l.push(s.markPotentiallyOrphaned(e,h))}),Mr.waitFor(l)}removeMatchingKeysForTargetId(e,a){return this.ks.Is(a),Mr.resolve()}getMatchingKeysForTargetId(e,a){const r=this.ks.Es(a);return Mr.resolve(r)}containsKey(e,a){return Mr.resolve(this.ks.containsKey(a))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zue{constructor(e,a){this.$s={},this.overlays={},this.Os=new i3(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new Vue(this),this.indexManager=new wue,this.remoteDocumentCache=function(r){return new Eue(r)}(r=>this.referenceDelegate.Ls(r)),this.serializer=new _ue(a),this.qs=new bue(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let a=this.overlays[e.toKey()];return a||(a=new xue,this.overlays[e.toKey()]=a),a}getMutationQueue(e,a){let r=this.$s[e.toKey()];return r||(r=new Pue(a,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,a,r){hn("MemoryPersistence","Starting transaction:",e);const s=new Oue(this.Os.next());return this.referenceDelegate.Us(),r(s).next(l=>this.referenceDelegate.Ks(s).next(()=>l)).toPromise().then(l=>(s.raiseOnCommittedEvent(),l))}Gs(e,a){return Mr.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,a)))}}class Oue extends Ale{constructor(e){super(),this.currentSequenceNumber=e}}class g3{constructor(e){this.persistence=e,this.Qs=new y3,this.js=null}static zs(e){return new g3(e)}get Ws(){if(this.js)return this.js;throw ti()}addReference(e,a,r){return this.Qs.addReference(r,a),this.Ws.delete(r.toString()),Mr.resolve()}removeReference(e,a,r){return this.Qs.removeReference(r,a),this.Ws.add(r.toString()),Mr.resolve()}markPotentiallyOrphaned(e,a){return this.Ws.add(a.toString()),Mr.resolve()}removeTarget(e,a){this.Qs.Is(a.targetId).forEach(s=>this.Ws.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,a.targetId).next(s=>{s.forEach(l=>this.Ws.add(l.toString()))}).next(()=>r.removeTargetData(e,a))}Us(){this.js=new Set}Ks(e){const a=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Mr.forEach(this.Ws,r=>{const s=Yn.fromPath(r);return this.Hs(e,s).next(l=>{l||a.removeEntry(s,Ci.min())})}).next(()=>(this.js=null,a.apply(e)))}updateLimboDocument(e,a){return this.Hs(e,a).next(r=>{r?this.Ws.delete(a.toString()):this.Ws.add(a.toString())})}Ls(e){return 0}Hs(e,a){return Mr.or([()=>Mr.resolve(this.Qs.containsKey(a)),()=>this.persistence.getTargetCache().containsKey(e,a),()=>this.persistence.Gs(e,a)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(e,a,r,s){this.targetId=e,this.fromCache=a,this.Fi=r,this.Bi=s}static Li(e,a){let r=ki(),s=ki();for(const l of a.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new A3(e,a.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Due{constructor(){this.qi=!1}initialize(e,a){this.Ui=e,this.indexManager=a,this.qi=!0}getDocumentsMatchingQuery(e,a,r,s){return this.Ki(e,a).next(l=>l||this.Gi(e,a,s,r)).next(l=>l||this.Qi(e,a))}Ki(e,a){if(PU(a))return Mr.resolve(null);let r=Cy(a);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(a.limit!==null&&s===1&&(a=_D(a,null,"F"),r=Cy(a)),this.indexManager.getDocumentsMatchingTarget(e,r).next(l=>{const h=ki(...l);return this.Ui.getDocuments(e,h).next(n=>this.indexManager.getMinOffset(e,r).next(w=>{const T=this.ji(a,n);return this.zi(a,T,h,w.readTime)?this.Ki(e,_D(a,null,"F")):this.Wi(e,T,a,w)}))})))}Gi(e,a,r,s){return PU(a)||s.isEqual(Ci.min())?this.Qi(e,a):this.Ui.getDocuments(e,r).next(l=>{const h=this.ji(a,l);return this.zi(a,h,r,s)?this.Qi(e,a):(AU()<=fs.DEBUG&&hn("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),vD(a)),this.Wi(e,h,a,ple(s,-1)))})}ji(e,a){let r=new Ad(K$(e));return a.forEach((s,l)=>{m2(e,l)&&(r=r.add(l))}),r}zi(e,a,r,s){if(e.limit===null)return!1;if(r.size!==a.size)return!0;const l=e.limitType==="F"?a.last():a.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}Qi(e,a){return AU()<=fs.DEBUG&&hn("QueryEngine","Using full collection scan to execute query:",vD(a)),this.Ui.getDocumentsMatchingQuery(e,a,SR.min())}Wi(e,a,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(l=>(a.forEach(h=>{l=l.insert(h.key,h)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mue{constructor(e,a,r,s){this.persistence=e,this.Hi=a,this.serializer=s,this.Ji=new fu(gs),this.Yi=new Jv(l=>u3(l),c3),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Cue(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",a=>e.collect(a,this.Ji))}}function Iue(t,e,a,r){return new Mue(t,e,a,r)}async function mK(t,e){const a=pi(t);return await a.persistence.runTransaction("Handle user change","readonly",r=>{let s;return a.mutationQueue.getAllMutationBatches(r).next(l=>(s=l,a.tr(e),a.mutationQueue.getAllMutationBatches(r))).next(l=>{const h=[],n=[];let w=ki();for(const T of s){h.push(T.batchId);for(const P of T.mutations)w=w.add(P.key)}for(const T of l){n.push(T.batchId);for(const P of T.mutations)w=w.add(P.key)}return a.localDocuments.getDocuments(r,w).next(T=>({er:T,removedBatchIds:h,addedBatchIds:n}))})})}function Lue(t,e){const a=pi(t);return a.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),l=a.Zi.newChangeBuffer({trackRemovals:!0});return function(h,n,w,T){const P=w.batch,z=P.keys();let k=Mr.resolve();return z.forEach(U=>{k=k.next(()=>T.getEntry(n,U)).next(Z=>{const H=w.docVersions.get(U);zo(H!==null),Z.version.compareTo(H)<0&&(P.applyToRemoteDocument(Z,w),Z.isValidDocument()&&(Z.setReadTime(w.commitVersion),T.addEntry(Z)))})}),k.next(()=>h.mutationQueue.removeMutationBatch(n,P))}(a,r,e,l).next(()=>l.apply(r)).next(()=>a.mutationQueue.performConsistencyCheck(r)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let n=ki();for(let w=0;w<h.mutationResults.length;++w)h.mutationResults[w].transformResults.length>0&&(n=n.add(h.batch.mutations[w].key));return n}(e))).next(()=>a.localDocuments.getDocuments(r,s))})}function yK(t){const e=pi(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",a=>e.Bs.getLastRemoteSnapshotVersion(a))}function Fue(t,e){const a=pi(t),r=e.snapshotVersion;let s=a.Ji;return a.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=a.Zi.newChangeBuffer({trackRemovals:!0});s=a.Ji;const n=[];e.targetChanges.forEach((P,z)=>{const k=s.get(z);if(!k)return;n.push(a.Bs.removeMatchingKeys(l,P.removedDocuments,z).next(()=>a.Bs.addMatchingKeys(l,P.addedDocuments,z)));let U=k.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(z)!==null?U=U.withResumeToken(vd.EMPTY_BYTE_STRING,Ci.min()).withLastLimboFreeSnapshotVersion(Ci.min()):P.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(P.resumeToken,r)),s=s.insert(z,U),function(Z,H,q){return Z.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=3e8?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(k,U,P)&&n.push(a.Bs.updateTargetData(l,U))});let w=by(),T=ki();if(e.documentUpdates.forEach(P=>{e.resolvedLimboDocuments.has(P)&&n.push(a.persistence.referenceDelegate.updateLimboDocument(l,P))}),n.push(Uue(l,h,e.documentUpdates).next(P=>{w=P.nr,T=P.sr})),!r.isEqual(Ci.min())){const P=a.Bs.getLastRemoteSnapshotVersion(l).next(z=>a.Bs.setTargetsMetadata(l,l.currentSequenceNumber,r));n.push(P)}return Mr.waitFor(n).next(()=>h.apply(l)).next(()=>a.localDocuments.getLocalViewOfDocuments(l,w,T)).next(()=>w)}).then(l=>(a.Ji=s,l))}function Uue(t,e,a){let r=ki(),s=ki();return a.forEach(l=>r=r.add(l)),e.getEntries(t,r).next(l=>{let h=by();return a.forEach((n,w)=>{const T=l.get(n);w.isFoundDocument()!==T.isFoundDocument()&&(s=s.add(n)),w.isNoDocument()&&w.version.isEqual(Ci.min())?(e.removeEntry(n,w.readTime),h=h.insert(n,w)):!T.isValidDocument()||w.version.compareTo(T.version)>0||w.version.compareTo(T.version)===0&&T.hasPendingWrites?(e.addEntry(w),h=h.insert(n,w)):hn("LocalStore","Ignoring outdated watch update for ",n,". Current version:",T.version," Watch version:",w.version)}),{nr:h,sr:s}})}function kue(t,e){const a=pi(t);return a.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),a.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Bue(t,e){const a=pi(t);return a.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return a.Bs.getTargetData(r,e).next(l=>l?(s=l,Mr.resolve(s)):a.Bs.allocateTargetId(r).next(h=>(s=new Pg(e,h,"TargetPurposeListen",r.currentSequenceNumber),a.Bs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=a.Ji.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(a.Ji=a.Ji.insert(r.targetId,r),a.Yi.set(e,r.targetId)),r})}async function CD(t,e,a){const r=pi(t),s=r.Ji.get(e),l=a?"readwrite":"readwrite-primary";try{a||await r.persistence.runTransaction("Release target",l,h=>r.persistence.referenceDelegate.removeTarget(h,s))}catch(h){if(!NT(h))throw h;hn("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(s.target)}function UU(t,e,a){const r=pi(t);let s=Ci.min(),l=ki();return r.persistence.runTransaction("Execute query","readonly",h=>function(n,w,T){const P=pi(n),z=P.Yi.get(T);return z!==void 0?Mr.resolve(P.Ji.get(z)):P.Bs.getTargetData(w,T)}(r,h,Cy(e)).next(n=>{if(n)return s=n.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(h,n.targetId).next(w=>{l=w})}).next(()=>r.Hi.getDocumentsMatchingQuery(h,e,a?s:Ci.min(),a?l:ki())).next(n=>(Gue(r,Dle(e),n),{documents:n,ir:l})))}function Gue(t,e,a){let r=t.Xi.get(e)||Ci.min();a.forEach((s,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),t.Xi.set(e,r)}class kU{constructor(){this.activeTargetIds=kle()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jue{constructor(){this.Hr=new kU,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,a,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,a,r){this.Jr[e]=a}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new kU,Promise.resolve()}handleUserChange(e,a,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zue{Yr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BU{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){hn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){hn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mC=null;function eN(){return mC===null?mC=268435456+Math.round(2147483648*Math.random()):mC++,"0x"+mC.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const que={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hue{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ad="WebChannelConnection";class $ue extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const a=e.ssl?"https":"http";this.mo=a+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,a,r,s,l){const h=eN(),n=this.To(e,a);hn("RestConnection",`Sending RPC '${e}' ${h}:`,n,r);const w={};return this.Eo(w,s,l),this.Ao(e,n,w,r).then(T=>(hn("RestConnection",`Received RPC '${e}' ${h}: `,T),T),T=>{throw iv("RestConnection",`RPC '${e}' ${h} failed with error: `,T,"url: ",n,"request:",r),T})}vo(e,a,r,s,l,h){return this.Io(e,a,r,s,l)}Eo(e,a,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Yv,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),a&&a.headers.forEach((s,l)=>e[l]=s),r&&r.headers.forEach((s,l)=>e[l]=s)}To(e,a){const r=que[e];return`${this.mo}/v1/${a}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,a,r,s){const l=eN();return new Promise((h,n)=>{const w=new rle;w.setWithCredentials(!0),w.listenOnce(ele.COMPLETE,()=>{try{switch(w.getLastErrorCode()){case JE.NO_ERROR:const P=w.getResponseJson();hn(ad,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(P)),h(P);break;case JE.TIMEOUT:hn(ad,`RPC '${e}' ${l} timed out`),n(new Zr(ar.DEADLINE_EXCEEDED,"Request time out"));break;case JE.HTTP_ERROR:const z=w.getStatus();if(hn(ad,`RPC '${e}' ${l} failed with status:`,z,"response text:",w.getResponseText()),z>0){let k=w.getResponseJson();Array.isArray(k)&&(k=k[0]);const U=k==null?void 0:k.error;if(U&&U.status&&U.message){const Z=function(H){const q=H.toLowerCase().replace(/_/g,"-");return Object.values(ar).indexOf(q)>=0?q:ar.UNKNOWN}(U.status);n(new Zr(Z,U.message))}else n(new Zr(ar.UNKNOWN,"Server responded with status "+w.getStatus()))}else n(new Zr(ar.UNAVAILABLE,"Connection failed."));break;default:ti()}}finally{hn(ad,`RPC '${e}' ${l} completed.`)}});const T=JSON.stringify(s);hn(ad,`RPC '${e}' ${l} sending request:`,s),w.send(a,"POST",T,r,15)})}Ro(e,a,r){const s=eN(),l=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=Joe(),n=Qoe(),w={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},T=this.longPollingOptions.timeoutSeconds;T!==void 0&&(w.longPollingTimeout=Math.round(1e3*T)),this.useFetchStreams&&(w.xmlHttpFactory=new ale({})),this.Eo(w.initMessageHeaders,a,r),w.encodeInitMessageHeaders=!0;const P=l.join("");hn(ad,`Creating RPC '${e}' stream ${s}: ${P}`,w);const z=h.createWebChannel(P,w);let k=!1,U=!1;const Z=new Hue({ro:q=>{U?hn(ad,`Not sending because RPC '${e}' stream ${s} is closed:`,q):(k||(hn(ad,`Opening RPC '${e}' stream ${s} transport.`),z.open(),k=!0),hn(ad,`RPC '${e}' stream ${s} sending:`,q),z.send(q))},oo:()=>z.close()}),H=(q,J,re)=>{q.listen(J,ce=>{try{re(ce)}catch(ye){setTimeout(()=>{throw ye},0)}})};return H(z,dC.EventType.OPEN,()=>{U||hn(ad,`RPC '${e}' stream ${s} transport opened.`)}),H(z,dC.EventType.CLOSE,()=>{U||(U=!0,hn(ad,`RPC '${e}' stream ${s} transport closed`),Z.wo())}),H(z,dC.EventType.ERROR,q=>{U||(U=!0,iv(ad,`RPC '${e}' stream ${s} transport errored:`,q),Z.wo(new Zr(ar.UNAVAILABLE,"The operation could not be completed")))}),H(z,dC.EventType.MESSAGE,q=>{var J;if(!U){const re=q.data[0];zo(!!re);const ce=re,ye=ce.error||((J=ce[0])===null||J===void 0?void 0:J.error);if(ye){hn(ad,`RPC '${e}' stream ${s} received error:`,ye);const he=ye.status;let _e=function(Re){const be=ou[Re];if(be!==void 0)return sK(be)}(he),me=ye.message;_e===void 0&&(_e=ar.INTERNAL,me="Unknown error status: "+he+" with message "+ye.message),U=!0,Z.wo(new Zr(_e,me)),z.close()}else hn(ad,`RPC '${e}' stream ${s} received:`,re),Z._o(re)}}),H(n,tle.STAT_EVENT,q=>{q.stat===yU.PROXY?hn(ad,`RPC '${e}' stream ${s} detected buffering proxy`):q.stat===yU.NOPROXY&&hn(ad,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{Z.fo()},0),Z}}function tN(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(t){return new iue(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gK{constructor(e,a,r=1e3,s=1.5,l=6e4){this.ii=e,this.timerId=a,this.Po=r,this.bo=s,this.Vo=l,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const a=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),s=Math.max(0,a-r);s>0&&hn("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.So} ms, delay with jitter: ${a} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,s,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){this.Do!==null&&(this.Do.skipDelay(),this.Do=null)}cancel(){this.Do!==null&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AK{constructor(e,a,r,s,l,h,n,w){this.ii=e,this.$o=r,this.Oo=s,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=n,this.listener=w,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new gK(e,a)}Uo(){return this.state===1||this.state===5||this.Ko()}Ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&this.Bo===null&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,a){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,e!==4?this.qo.reset():a&&a.code===ar.RESOURCE_EXHAUSTED?(Sy(a.toString()),Sy("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):a&&a.code===ar.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(a)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),a=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Fo===a&&this.Zo(r,s)},r=>{e(()=>{const s=new Zr(ar.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(s)})})}Zo(e,a){const r=this.Xo(this.Fo);this.stream=this.eu(e,a),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(s=>{r(()=>this.tu(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return hn("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return a=>{this.ii.enqueueAndForget(()=>this.Fo===e?a():(hn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Kue extends AK{constructor(e,a,r,s,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",a,r,s,h),this.serializer=l}eu(e,a){return this.connection.Ro("Listen",e,a)}onMessage(e){this.qo.reset();const a=lue(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ci.min();const l=s.targetChange;return l.targetIds&&l.targetIds.length?Ci.min():l.readTime?Vm(l.readTime):Ci.min()}(e);return this.listener.nu(a,r)}su(e){const a={};a.database=SD(this.serializer),a.addTarget=function(s,l){let h;const n=l.target;if(h=gD(n)?{documents:due(s,n)}:{query:hue(s,n)},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=uK(s,l.resumeToken);const w=wD(s,l.expectedCount);w!==null&&(h.expectedCount=w)}else if(l.snapshotVersion.compareTo(Ci.min())>0){h.readTime=Nb(s,l.snapshotVersion.toTimestamp());const w=wD(s,l.expectedCount);w!==null&&(h.expectedCount=w)}return h}(this.serializer,e);const r=pue(this.serializer,e);r&&(a.labels=r),this.Wo(a)}iu(e){const a={};a.database=SD(this.serializer),a.removeTarget=e,this.Wo(a)}}class Wue extends AK{constructor(e,a,r,s,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",a,r,s,h),this.serializer=l,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,a){return this.connection.Ro("Write",e,a)}onMessage(e){if(zo(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const a=cue(e.writeResults,e.commitTime),r=Vm(e.commitTime);return this.listener.cu(r,a)}return zo(!e.writeResults||e.writeResults.length===0),this.ru=!0,this.listener.au()}hu(){const e={};e.database=SD(this.serializer),this.Wo(e)}uu(e){const a={streamToken:this.lastStreamToken,writes:e.map(r=>uue(this.serializer,r))};this.Wo(a)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yue extends class{}{constructor(e,a,r,s){super(),this.authCredentials=e,this.appCheckCredentials=a,this.connection=r,this.serializer=s,this.lu=!1}fu(){if(this.lu)throw new Zr(ar.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,a,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection.Io(e,a,r,s,l)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ar.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Zr(ar.UNKNOWN,s.toString())})}vo(e,a,r,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.vo(e,a,r,l,h,s)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ar.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Zr(ar.UNKNOWN,l.toString())})}terminate(){this.lu=!0}}class Xue{constructor(e,a){this.asyncQueue=e,this.onlineStateHandler=a,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){this.wu===0&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){this.state==="Online"?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,e==="Online"&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const a=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Sy(a),this.mu=!1):hn("OnlineStateTracker",a)}Tu(){this._u!==null&&(this._u.cancel(),this._u=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jue{constructor(e,a,r,s,l){this.localStore=e,this.datastore=a,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=l,this.Pu.Yr(h=>{r.enqueueAndForget(async()=>{E0(this)&&(hn("RemoteStore","Restarting streams for network reachability change."),await async function(n){const w=pi(n);w.vu.add(4),await OT(w),w.bu.set("Unknown"),w.vu.delete(4),await w2(w)}(this))})}),this.bu=new Xue(r,s)}}async function w2(t){if(E0(t))for(const e of t.Ru)await e(!0)}async function OT(t){for(const e of t.Ru)await e(!1)}function _K(t,e){const a=pi(t);a.Au.has(e.targetId)||(a.Au.set(e.targetId,e),w3(a)?v3(a):Qv(a).Ko()&&_3(a,e))}function vK(t,e){const a=pi(t),r=Qv(a);a.Au.delete(e),r.Ko()&&wK(a,e),a.Au.size===0&&(r.Ko()?r.jo():E0(a)&&a.bu.set("Unknown"))}function _3(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ci.min())>0){const a=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(a)}Qv(t).su(e)}function wK(t,e){t.Vu.qt(e),Qv(t).iu(e)}function v3(t){t.Vu=new tue({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),Qv(t).start(),t.bu.gu()}function w3(t){return E0(t)&&!Qv(t).Uo()&&t.Au.size>0}function E0(t){return pi(t).vu.size===0}function RK(t){t.Vu=void 0}async function Que(t){t.Au.forEach((e,a)=>{_3(t,e)})}async function ece(t,e){RK(t),w3(t)?(t.bu.Iu(e),v3(t)):t.bu.set("Unknown")}async function tce(t,e,a){if(t.bu.set("Online"),e instanceof lK&&e.state===2&&e.cause)try{await async function(r,s){const l=s.cause;for(const h of s.targetIds)r.Au.has(h)&&(await r.remoteSyncer.rejectListen(h,l),r.Au.delete(h),r.Vu.removeTarget(h))}(t,e)}catch(r){hn("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Vb(t,r)}else if(e instanceof KC?t.Vu.Ht(e):e instanceof oK?t.Vu.ne(e):t.Vu.Xt(e),!a.isEqual(Ci.min()))try{const r=await yK(t.localStore);a.compareTo(r)>=0&&await function(s,l){const h=s.Vu.ce(l);return h.targetChanges.forEach((n,w)=>{if(n.resumeToken.approximateByteSize()>0){const T=s.Au.get(w);T&&s.Au.set(w,T.withResumeToken(n.resumeToken,l))}}),h.targetMismatches.forEach((n,w)=>{const T=s.Au.get(n);if(!T)return;s.Au.set(n,T.withResumeToken(vd.EMPTY_BYTE_STRING,T.snapshotVersion)),wK(s,n);const P=new Pg(T.target,n,w,T.sequenceNumber);_3(s,P)}),s.remoteSyncer.applyRemoteEvent(h)}(t,a)}catch(r){hn("RemoteStore","Failed to raise snapshot:",r),await Vb(t,r)}}async function Vb(t,e,a){if(!NT(e))throw e;t.vu.add(1),await OT(t),t.bu.set("Offline"),a||(a=()=>yK(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{hn("RemoteStore","Retrying IndexedDB access"),await a(),t.vu.delete(1),await w2(t)})}function TK(t,e){return e().catch(a=>Vb(t,a,e))}async function R2(t){const e=pi(t),a=kg(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;ace(e);)try{const s=await kue(e.localStore,r);if(s===null){e.Eu.length===0&&a.jo();break}r=s.batchId,rce(e,s)}catch(s){await Vb(e,s)}SK(e)&&CK(e)}function ace(t){return E0(t)&&t.Eu.length<10}function rce(t,e){t.Eu.push(e);const a=kg(t);a.Ko()&&a.ou&&a.uu(e.mutations)}function SK(t){return E0(t)&&!kg(t).Uo()&&t.Eu.length>0}function CK(t){kg(t).start()}async function nce(t){kg(t).hu()}async function ice(t){const e=kg(t);for(const a of t.Eu)e.uu(a.mutations)}async function sce(t,e,a){const r=t.Eu.shift(),s=h3.from(r,e,a);await TK(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await R2(t)}async function oce(t,e){e&&kg(t).ou&&await async function(a,r){if(s=r.code,Jle(s)&&s!==ar.ABORTED){const l=a.Eu.shift();kg(a).Qo(),await TK(a,()=>a.remoteSyncer.rejectFailedWrite(l.batchId,r)),await R2(a)}var s}(t,e),SK(t)&&CK(t)}async function GU(t,e){const a=pi(t);a.asyncQueue.verifyOperationInProgress(),hn("RemoteStore","RemoteStore received new credentials");const r=E0(a);a.vu.add(3),await OT(a),r&&a.bu.set("Unknown"),await a.remoteSyncer.handleCredentialChange(e),a.vu.delete(3),await w2(a)}async function lce(t,e){const a=pi(t);e?(a.vu.delete(2),await w2(a)):e||(a.vu.add(2),await OT(a),a.bu.set("Unknown"))}function Qv(t){return t.Su||(t.Su=function(e,a,r){const s=pi(e);return s.fu(),new Kue(a,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{uo:Que.bind(null,t),ao:ece.bind(null,t),nu:tce.bind(null,t)}),t.Ru.push(async e=>{e?(t.Su.Qo(),w3(t)?v3(t):t.bu.set("Unknown")):(await t.Su.stop(),RK(t))})),t.Su}function kg(t){return t.Du||(t.Du=function(e,a,r){const s=pi(e);return s.fu(),new Wue(a,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{uo:nce.bind(null,t),ao:oce.bind(null,t),au:ice.bind(null,t),cu:sce.bind(null,t)}),t.Ru.push(async e=>{e?(t.Du.Qo(),await R2(t)):(await t.Du.stop(),t.Eu.length>0&&(hn("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))})),t.Du}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(e,a,r,s,l){this.asyncQueue=e,this.timerId=a,this.targetTimeMs=r,this.op=s,this.removalCallback=l,this.deferred=new Ay,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(e,a,r,s,l){const h=Date.now()+r,n=new R3(e,a,h,s,l);return n.start(r),n}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Zr(ar.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function T3(t,e){if(Sy("AsyncQueue",`${e}: ${t}`),NT(t))return new Zr(ar.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e){this.comparator=e?(a,r)=>e(a,r)||Yn.comparator(a.key,r.key):(a,r)=>Yn.comparator(a.key,r.key),this.keyedMap=Gw(),this.sortedSet=new fu(this.comparator)}static emptySet(e){return new Y_(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const a=this.keyedMap.get(e);return a?this.sortedSet.indexOf(a):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((a,r)=>(e(a),!1))}add(e){const a=this.delete(e.key);return a.copy(a.keyedMap.insert(e.key,e),a.sortedSet.insert(e,null))}delete(e){const a=this.get(e);return a?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(a)):this}isEqual(e){if(!(e instanceof Y_)||this.size!==e.size)return!1;const a=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;a.hasNext();){const s=a.getNext().key,l=r.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(a=>{e.push(a.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,a){const r=new Y_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=a,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU{constructor(){this.Cu=new fu(Yn.comparator)}track(e){const a=e.doc.key,r=this.Cu.get(a);r?e.type!==0&&r.type===3?this.Cu=this.Cu.insert(a,e):e.type===3&&r.type!==1?this.Cu=this.Cu.insert(a,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Cu=this.Cu.insert(a,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Cu=this.Cu.insert(a,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Cu=this.Cu.remove(a):e.type===1&&r.type===2?this.Cu=this.Cu.insert(a,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Cu=this.Cu.insert(a,{type:2,doc:e.doc}):ti():this.Cu=this.Cu.insert(a,e)}xu(){const e=[];return this.Cu.inorderTraversal((a,r)=>{e.push(r)}),e}}class cv{constructor(e,a,r,s,l,h,n,w,T){this.query=e,this.docs=a,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=n,this.excludesMetadataChanges=w,this.hasCachedResults=T}static fromInitialDocuments(e,a,r,s,l){const h=[];return a.forEach(n=>{h.push({type:0,doc:n})}),new cv(e,a,Y_.emptySet(a),h,r,s,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&p2(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const a=this.docChanges,r=e.docChanges;if(a.length!==r.length)return!1;for(let s=0;s<a.length;s++)if(a[s].type!==r[s].type||!a[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uce{constructor(){this.Nu=void 0,this.listeners=[]}}class cce{constructor(){this.queries=new Jv(e=>$$(e),p2),this.onlineState="Unknown",this.ku=new Set}}async function S3(t,e){const a=pi(t),r=e.query;let s=!1,l=a.queries.get(r);if(l||(s=!0,l=new uce),s)try{l.Nu=await a.onListen(r)}catch(h){const n=T3(h,`Initialization of query '${vD(e.query)}' failed`);return void e.onError(n)}a.queries.set(r,l),l.listeners.push(e),e.Mu(a.onlineState),l.Nu&&e.$u(l.Nu)&&b3(a)}async function C3(t,e){const a=pi(t),r=e.query;let s=!1;const l=a.queries.get(r);if(l){const h=l.listeners.indexOf(e);h>=0&&(l.listeners.splice(h,1),s=l.listeners.length===0)}if(s)return a.queries.delete(r),a.onUnlisten(r)}function dce(t,e){const a=pi(t);let r=!1;for(const s of e){const l=s.query,h=a.queries.get(l);if(h){for(const n of h.listeners)n.$u(s)&&(r=!0);h.Nu=s}}r&&b3(a)}function hce(t,e,a){const r=pi(t),s=r.queries.get(e);if(s)for(const l of s.listeners)l.onError(a);r.queries.delete(e)}function b3(t){t.ku.forEach(e=>{e.next()})}class x3{constructor(e,a,r){this.query=e,this.Ou=a,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new cv(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let a=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),a=!0):this.qu(e,this.onlineState)&&(this.Uu(e),a=!0),this.Bu=e,a}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let a=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),a=!0),a}qu(e,a){if(!e.fromCache)return!0;const r=a!=="Offline";return(!this.options.Ku||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||a==="Offline")}Lu(e){if(e.docChanges.length>0)return!0;const a=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!a)&&this.options.includeMetadataChanges===!0}Uu(e){e=cv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bK{constructor(e){this.key=e}}class xK{constructor(e){this.key=e}}class fce{constructor(e,a){this.query=e,this.Yu=a,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=ki(),this.mutatedKeys=ki(),this.tc=K$(e),this.ec=new Y_(this.tc)}get nc(){return this.Yu}sc(e,a){const r=a?a.ic:new jU,s=a?a.ec:this.ec;let l=a?a.mutatedKeys:this.mutatedKeys,h=s,n=!1;const w=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,T=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((P,z)=>{const k=s.get(P),U=m2(this.query,z)?z:null,Z=!!k&&this.mutatedKeys.has(k.key),H=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let q=!1;k&&U?k.data.isEqual(U.data)?Z!==H&&(r.track({type:3,doc:U}),q=!0):this.rc(k,U)||(r.track({type:2,doc:U}),q=!0,(w&&this.tc(U,w)>0||T&&this.tc(U,T)<0)&&(n=!0)):!k&&U?(r.track({type:0,doc:U}),q=!0):k&&!U&&(r.track({type:1,doc:k}),q=!0,(w||T)&&(n=!0)),q&&(U?(h=h.add(U),l=H?l.add(P):l.delete(P)):(h=h.delete(P),l=l.delete(P)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const P=this.query.limitType==="F"?h.last():h.first();h=h.delete(P.key),l=l.delete(P.key),r.track({type:1,doc:P})}return{ec:h,ic:r,zi:n,mutatedKeys:l}}rc(e,a){return e.hasLocalMutations&&a.hasCommittedMutations&&!a.hasLocalMutations}applyChanges(e,a,r){const s=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const l=e.ic.xu();l.sort((T,P)=>function(z,k){const U=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ti()}};return U(z)-U(k)}(T.type,P.type)||this.tc(T.doc,P.doc)),this.oc(r);const h=a?this.uc():[],n=this.Zu.size===0&&this.current?1:0,w=n!==this.Xu;return this.Xu=n,l.length!==0||w?{snapshot:new cv(this.query,e.ec,s,l,e.mutatedKeys,n===0,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:h}:{cc:h}}Mu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ec:this.ec,ic:new jU,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(a=>this.Yu=this.Yu.add(a)),e.modifiedDocuments.forEach(a=>{}),e.removedDocuments.forEach(a=>this.Yu=this.Yu.delete(a)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=ki(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const a=[];return e.forEach(r=>{this.Zu.has(r)||a.push(new xK(r))}),this.Zu.forEach(r=>{e.has(r)||a.push(new bK(r))}),a}hc(e){this.Yu=e.ir,this.Zu=ki();const a=this.sc(e.documents);return this.applyChanges(a,!0)}lc(){return cv.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,this.Xu===0,this.hasCachedResults)}}class pce{constructor(e,a,r){this.query=e,this.targetId=a,this.view=r}}class mce{constructor(e){this.key=e,this.fc=!1}}class yce{constructor(e,a,r,s,l,h){this.localStore=e,this.remoteStore=a,this.eventManager=r,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.dc={},this.wc=new Jv(n=>$$(n),p2),this._c=new Map,this.mc=new Set,this.gc=new fu(Yn.comparator),this.yc=new Map,this.Ic=new y3,this.Tc={},this.Ec=new Map,this.Ac=uv.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return this.vc===!0}}async function gce(t,e){const a=xce(t);let r,s;const l=a.wc.get(e);if(l)r=l.targetId,a.sharedClientState.addLocalQueryTarget(r),s=l.view.lc();else{const h=await Bue(a.localStore,Cy(e)),n=a.sharedClientState.addLocalQueryTarget(h.targetId);r=h.targetId,s=await Ace(a,e,r,n==="current",h.resumeToken),a.isPrimaryClient&&_K(a.remoteStore,h)}return s}async function Ace(t,e,a,r,s){t.Rc=(z,k,U)=>async function(Z,H,q,J){let re=H.view.sc(q);re.zi&&(re=await UU(Z.localStore,H.query,!1).then(({documents:he})=>H.view.sc(he,re)));const ce=J&&J.targetChanges.get(H.targetId),ye=H.view.applyChanges(re,Z.isPrimaryClient,ce);return qU(Z,H.targetId,ye.cc),ye.snapshot}(t,z,k,U);const l=await UU(t.localStore,e,!0),h=new fce(e,l.ir),n=h.sc(l.documents),w=zT.createSynthesizedTargetChangeForCurrentChange(a,r&&t.onlineState!=="Offline",s),T=h.applyChanges(n,t.isPrimaryClient,w);qU(t,a,T.cc);const P=new pce(e,a,h);return t.wc.set(e,P),t._c.has(a)?t._c.get(a).push(e):t._c.set(a,[e]),T.snapshot}async function _ce(t,e){const a=pi(t),r=a.wc.get(e),s=a._c.get(r.targetId);if(s.length>1)return a._c.set(r.targetId,s.filter(l=>!p2(l,e))),void a.wc.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(r.targetId),a.sharedClientState.isActiveQueryTarget(r.targetId)||await CD(a.localStore,r.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(r.targetId),vK(a.remoteStore,r.targetId),bD(a,r.targetId)}).catch(ET)):(bD(a,r.targetId),await CD(a.localStore,r.targetId,!0))}async function vce(t,e,a){const r=Pce(t);try{const s=await function(l,h){const n=pi(l),w=ah.now(),T=h.reduce((k,U)=>k.add(U.key),ki());let P,z;return n.persistence.runTransaction("Locally write mutations","readwrite",k=>{let U=by(),Z=ki();return n.Zi.getEntries(k,T).next(H=>{U=H,U.forEach((q,J)=>{J.isValidDocument()||(Z=Z.add(q))})}).next(()=>n.localDocuments.getOverlayedDocuments(k,U)).next(H=>{P=H;const q=[];for(const J of h){const re=$le(J,P.get(J.key).overlayedDocument);re!=null&&q.push(new Kg(J.key,re,U$(re.value.mapValue),Nh.exists(!0)))}return n.mutationQueue.addMutationBatch(k,w,q,h)}).next(H=>{z=H;const q=H.applyToLocalDocumentSet(P,Z);return n.documentOverlayCache.saveOverlays(k,H.batchId,q)})}).then(()=>({batchId:z.batchId,changes:Y$(P)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(l,h,n){let w=l.Tc[l.currentUser.toKey()];w||(w=new fu(gs)),w=w.insert(h,n),l.Tc[l.currentUser.toKey()]=w}(r,s.batchId,a),await DT(r,s.changes),await R2(r.remoteStore)}catch(s){const l=T3(s,"Failed to persist write");a.reject(l)}}async function PK(t,e){const a=pi(t);try{const r=await Fue(a.localStore,e);e.targetChanges.forEach((s,l)=>{const h=a.yc.get(l);h&&(zo(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?h.fc=!0:s.modifiedDocuments.size>0?zo(h.fc):s.removedDocuments.size>0&&(zo(h.fc),h.fc=!1))}),await DT(a,r,e)}catch(r){await ET(r)}}function ZU(t,e,a){const r=pi(t);if(r.isPrimaryClient&&a===0||!r.isPrimaryClient&&a===1){const s=[];r.wc.forEach((l,h)=>{const n=h.view.Mu(e);n.snapshot&&s.push(n.snapshot)}),function(l,h){const n=pi(l);n.onlineState=h;let w=!1;n.queries.forEach((T,P)=>{for(const z of P.listeners)z.Mu(h)&&(w=!0)}),w&&b3(n)}(r.eventManager,e),s.length&&r.dc.nu(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function wce(t,e,a){const r=pi(t);r.sharedClientState.updateQueryState(e,"rejected",a);const s=r.yc.get(e),l=s&&s.key;if(l){let h=new fu(Yn.comparator);h=h.insert(l,dd.newNoDocument(l,Ci.min()));const n=ki().add(l),w=new _2(Ci.min(),new Map,new fu(gs),h,n);await PK(r,w),r.gc=r.gc.remove(l),r.yc.delete(e),P3(r)}else await CD(r.localStore,e,!1).then(()=>bD(r,e,a)).catch(ET)}async function Rce(t,e){const a=pi(t),r=e.batch.batchId;try{const s=await Lue(a.localStore,e);NK(a,r,null),EK(a,r),a.sharedClientState.updateMutationState(r,"acknowledged"),await DT(a,s)}catch(s){await ET(s)}}async function Tce(t,e,a){const r=pi(t);try{const s=await function(l,h){const n=pi(l);return n.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let T;return n.mutationQueue.lookupMutationBatch(w,h).next(P=>(zo(P!==null),T=P.keys(),n.mutationQueue.removeMutationBatch(w,P))).next(()=>n.mutationQueue.performConsistencyCheck(w)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(w,T,h)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,T)).next(()=>n.localDocuments.getDocuments(w,T))})}(r.localStore,e);NK(r,e,a),EK(r,e),r.sharedClientState.updateMutationState(e,"rejected",a),await DT(r,s)}catch(s){await ET(s)}}function EK(t,e){(t.Ec.get(e)||[]).forEach(a=>{a.resolve()}),t.Ec.delete(e)}function NK(t,e,a){const r=pi(t);let s=r.Tc[r.currentUser.toKey()];if(s){const l=s.get(e);l&&(a?l.reject(a):l.resolve(),s=s.remove(e)),r.Tc[r.currentUser.toKey()]=s}}function bD(t,e,a=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t._c.get(e))t.wc.delete(r),a&&t.dc.Pc(r,a);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach(r=>{t.Ic.containsKey(r)||VK(t,r)})}function VK(t,e){t.mc.delete(e.path.canonicalString());const a=t.gc.get(e);a!==null&&(vK(t.remoteStore,a),t.gc=t.gc.remove(e),t.yc.delete(a),P3(t))}function qU(t,e,a){for(const r of a)r instanceof bK?(t.Ic.addReference(r.key,e),Sce(t,r)):r instanceof xK?(hn("SyncEngine","Document no longer in limbo: "+r.key),t.Ic.removeReference(r.key,e),t.Ic.containsKey(r.key)||VK(t,r.key)):ti()}function Sce(t,e){const a=e.key,r=a.path.canonicalString();t.gc.get(a)||t.mc.has(r)||(hn("SyncEngine","New document in limbo: "+a),t.mc.add(r),P3(t))}function P3(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const a=new Yn(kl.fromString(e)),r=t.Ac.next();t.yc.set(r,new mce(a)),t.gc=t.gc.insert(a,r),_K(t.remoteStore,new Pg(Cy(h2(a.path)),r,"TargetPurposeLimboResolution",i3.ct))}}async function DT(t,e,a){const r=pi(t),s=[],l=[],h=[];r.wc.isEmpty()||(r.wc.forEach((n,w)=>{h.push(r.Rc(w,e,a).then(T=>{if((T||a)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,T!=null&&T.fromCache?"not-current":"current"),T){s.push(T);const P=A3.Li(w.targetId,T);l.push(P)}}))}),await Promise.all(h),r.dc.nu(s),await async function(n,w){const T=pi(n);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",P=>Mr.forEach(w,z=>Mr.forEach(z.Fi,k=>T.persistence.referenceDelegate.addReference(P,z.targetId,k)).next(()=>Mr.forEach(z.Bi,k=>T.persistence.referenceDelegate.removeReference(P,z.targetId,k)))))}catch(P){if(!NT(P))throw P;hn("LocalStore","Failed to update sequence numbers: "+P)}for(const P of w){const z=P.targetId;if(!P.fromCache){const k=T.Ji.get(z),U=k.snapshotVersion,Z=k.withLastLimboFreeSnapshotVersion(U);T.Ji=T.Ji.insert(z,Z)}}}(r.localStore,l))}async function Cce(t,e){const a=pi(t);if(!a.currentUser.isEqual(e)){hn("SyncEngine","User change. New user:",e.toKey());const r=await mK(a.localStore,e);a.currentUser=e,function(s,l){s.Ec.forEach(h=>{h.forEach(n=>{n.reject(new Zr(ar.CANCELLED,l))})}),s.Ec.clear()}(a,"'waitForPendingWrites' promise is rejected due to a user change."),a.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await DT(a,r.er)}}function bce(t,e){const a=pi(t),r=a.yc.get(e);if(r&&r.fc)return ki().add(r.key);{let s=ki();const l=a._c.get(e);if(!l)return s;for(const h of l){const n=a.wc.get(h);s=s.unionWith(n.view.nc)}return s}}function xce(t){const e=pi(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=PK.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bce.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wce.bind(null,e),e.dc.nu=dce.bind(null,e.eventManager),e.dc.Pc=hce.bind(null,e.eventManager),e}function Pce(t){const e=pi(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Rce.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Tce.bind(null,e),e}class HU{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=v2(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,a){return null}createIndexBackfillerScheduler(e,a){return null}createLocalStore(e){return Iue(this.persistence,new Due,e.initialUser,this.serializer)}createPersistence(e){return new zue(g3.zs,this.serializer)}createSharedClientState(e){return new jue}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Ece{async initialize(e,a){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(a),this.remoteStore=this.createRemoteStore(a),this.eventManager=this.createEventManager(a),this.syncEngine=this.createSyncEngine(a,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ZU(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Cce.bind(null,this.syncEngine),await lce(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new cce}createDatastore(e){const a=v2(e.databaseInfo.databaseId),r=(s=e.databaseInfo,new $ue(s));var s;return function(l,h,n,w){return new Yue(l,h,n,w)}(e.authCredentials,e.appCheckCredentials,r,a)}createRemoteStore(e){return a=this.localStore,r=this.datastore,s=e.asyncQueue,l=n=>ZU(this.syncEngine,n,0),h=BU.D()?new BU:new Zue,new Jue(a,r,s,l,h);var a,r,s,l,h}createSyncEngine(e,a){return function(r,s,l,h,n,w,T){const P=new yce(r,s,l,h,n,w);return T&&(P.vc=!0),P}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,a)}terminate(){return async function(e){const a=pi(e);hn("RemoteStore","RemoteStore shutting down."),a.vu.add(5),await OT(a),a.Pu.shutdown(),a.bu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Sy("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,a){this.muted||setTimeout(()=>{this.muted||e(a)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nce{constructor(e,a,r,s){this.authCredentials=e,this.appCheckCredentials=a,this.asyncQueue=r,this.databaseInfo=s,this.user=ld.UNAUTHENTICATED,this.clientId=M$.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async l=>{hn("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(hn("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Zr(ar.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ay;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(a){const r=T3(a,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function aN(t,e){t.asyncQueue.verifyOperationInProgress(),hn("FirestoreClient","Initializing OfflineComponentProvider");const a=await t.getConfiguration();await e.initialize(a);let r=a.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await mK(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function $U(t,e){t.asyncQueue.verifyOperationInProgress();const a=await zce(t);hn("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(a,r),t.setCredentialChangeListener(s=>GU(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,l)=>GU(e.remoteStore,l)),t._onlineComponents=e}function Vce(t){return t.name==="FirebaseError"?t.code===ar.FAILED_PRECONDITION||t.code===ar.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function zce(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){hn("FirestoreClient","Using user provided OfflineComponentProvider");try{await aN(t,t._uninitializedComponentsProvider._offline)}catch(e){const a=e;if(!Vce(a))throw a;iv("Error using user provided cache. Falling back to memory cache: "+a),await aN(t,new HU)}}else hn("FirestoreClient","Using default OfflineComponentProvider"),await aN(t,new HU);return t._offlineComponents}async function zK(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(hn("FirestoreClient","Using user provided OnlineComponentProvider"),await $U(t,t._uninitializedComponentsProvider._online)):(hn("FirestoreClient","Using default OnlineComponentProvider"),await $U(t,new Ece))),t._onlineComponents}function Oce(t){return zK(t).then(e=>e.syncEngine)}async function zb(t){const e=await zK(t),a=e.eventManager;return a.onListen=gce.bind(null,e.syncEngine),a.onUnlisten=_ce.bind(null,e.syncEngine),a}function Dce(t,e,a={}){const r=new Ay;return t.asyncQueue.enqueueAndForget(async()=>function(s,l,h,n,w){const T=new E3({next:z=>{l.enqueueAndForget(()=>C3(s,P));const k=z.docs.has(h);!k&&z.fromCache?w.reject(new Zr(ar.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&z.fromCache&&n&&n.source==="server"?w.reject(new Zr(ar.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(z)},error:z=>w.reject(z)}),P=new x3(h2(h.path),T,{includeMetadataChanges:!0,Ku:!0});return S3(s,P)}(await zb(t),t.asyncQueue,e,a,r)),r.promise}function Mce(t,e,a={}){const r=new Ay;return t.asyncQueue.enqueueAndForget(async()=>function(s,l,h,n,w){const T=new E3({next:z=>{l.enqueueAndForget(()=>C3(s,P)),z.fromCache&&n.source==="server"?w.reject(new Zr(ar.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(z)},error:z=>w.reject(z)}),P=new x3(h,T,{includeMetadataChanges:!0,Ku:!0});return S3(s,P)}(await zb(t),t.asyncQueue,e,a,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OK(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KU=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DK(t,e,a){if(!a)throw new Zr(ar.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Ice(t,e,a,r){if(e===!0&&r===!0)throw new Zr(ar.INVALID_ARGUMENT,`${t} and ${a} cannot be used together.`)}function WU(t){if(!Yn.isDocumentKey(t))throw new Zr(ar.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function YU(t){if(Yn.isDocumentKey(t))throw new Zr(ar.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function T2(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(a){return a.constructor?a.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ti()}function df(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Zr(ar.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const a=T2(t);throw new Zr(ar.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${a}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XU{constructor(e){var a,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Zr(ar.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(a=e.ssl)===null||a===void 0||a;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Zr(ar.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ice("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OK((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Zr(ar.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Zr(ar.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Zr(ar.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(a=this.experimentalLongPollingOptions,r=e.experimentalLongPollingOptions,a.timeoutSeconds===r.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var a,r}}class S2{constructor(e,a,r,s){this._authCredentials=e,this._appCheckCredentials=a,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new XU({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Zr(ar.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Zr(ar.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new XU(e),e.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new ile;switch(a.type){case"firstParty":return new ule(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Zr(ar.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const a=KU.get(e);a&&(hn("ComponentProvider","Removing Datastore"),KU.delete(e),a.terminate())}(this),Promise.resolve()}}function Lce(t,e,a,r={}){var s;const l=(t=df(t,S2))._getSettings(),h=`${e}:${a}`;if(l.host!=="firestore.googleapis.com"&&l.host!==h&&iv("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},l),{host:h,ssl:!1})),r.mockUserToken){let n,w;if(typeof r.mockUserToken=="string")n=r.mockUserToken,w=ld.MOCK_USER;else{n=$q(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new Zr(ar.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new ld(T)}t._authCredentials=new sle(new D$(n,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,a,r){this.converter=a,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mg(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rh(this.firestore,e,this._key)}}class Wg{constructor(e,a,r){this.converter=a,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Wg(this.firestore,e,this._query)}}class Mg extends Wg{constructor(e,a,r){super(e,a,h2(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rh(this.firestore,null,new Yn(e))}withConverter(e){return new Mg(this.firestore,e,this._path)}}function Zn(t,e,...a){if(t=dl(t),DK("collection","path",e),t instanceof S2){const r=kl.fromString(e,...a);return YU(r),new Mg(t,null,r)}{if(!(t instanceof rh||t instanceof Mg))throw new Zr(ar.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(kl.fromString(e,...a));return YU(r),new Mg(t.firestore,null,r)}}function Is(t,e,...a){if(t=dl(t),arguments.length===1&&(e=M$.A()),DK("doc","path",e),t instanceof S2){const r=kl.fromString(e,...a);return WU(r),new rh(t,null,new Yn(r))}{if(!(t instanceof rh||t instanceof Mg))throw new Zr(ar.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(kl.fromString(e,...a));return WU(r),new rh(t.firestore,t instanceof Mg?t.converter:null,new Yn(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fce{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new gK(this,"async_queue_retry"),this.Xc=()=>{const a=tN();a&&hn("AsyncQueue","Visibility state changed to "+a.visibilityState),this.qo.Mo()};const e=tN();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const a=tN();a&&typeof a.removeEventListener=="function"&&a.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const a=new Ay;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(a.resolve,a.reject),a.promise)).then(()=>a.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(this.Qc.length!==0){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!NT(e))throw e;hn("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const a=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{this.Wc=r,this.Hc=!1;const s=function(l){let h=l.message||"";return l.stack&&(h=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),h}(r);throw Sy("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Hc=!1,r))));return this.Gc=a,a}enqueueAfterDelay(e,a,r){this.Zc(),this.Yc.indexOf(e)>-1&&(a=0);const s=R3.createAndSchedule(this,e,a,r,l=>this.na(l));return this.zc.push(s),s}Zc(){this.Wc&&ti()}verifyOperationInProgress(){}async sa(){let e;do e=this.Gc,await e;while(e!==this.Gc)}ia(e){for(const a of this.zc)if(a.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((a,r)=>a.targetTimeMs-r.targetTimeMs);for(const a of this.zc)if(a.skipDelay(),e!=="all"&&a.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const a=this.zc.indexOf(e);this.zc.splice(a,1)}}function JU(t){return function(e,a){if(typeof e!="object"||e===null)return!1;const r=e;for(const s of a)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class xy extends S2{constructor(e,a,r,s){super(e,a,r,s),this.type="firestore",this._queue=new Fce,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||MK(this),this._firestoreClient.terminate()}}function Uce(t,e){const a=typeof t=="object"?t:xI(),r=typeof t=="string"?t:"(default)",s=Zx(a,"firestore").getImmediate({identifier:r});if(!s._initialized){const l=Zq("firestore");l&&Lce(s,...l)}return s}function MT(t){return t._firestoreClient||MK(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function MK(t){var e,a,r;const s=t._freezeSettings(),l=function(h,n,w,T){return new wle(h,n,w,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,OK(T.experimentalLongPollingOptions),T.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new Nce(t._authCredentials,t._appCheckCredentials,t._queue,l),!((a=s.cache)===null||a===void 0)&&a._offlineComponentProvider&&(!((r=s.cache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(e){this._byteString=e}static fromBase64String(e){try{return new dv(vd.fromBase64String(e))}catch(a){throw new Zr(ar.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+a)}}static fromUint8Array(e){return new dv(vd.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(...e){for(let a=0;a<e.length;++a)if(e[a].length===0)throw new Zr(ar.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mm(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e,a){if(!isFinite(e)||e<-90||e>90)throw new Zr(ar.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(a)||a<-180||a>180)throw new Zr(ar.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+a);this._lat=e,this._long=a}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return gs(this._lat,e._lat)||gs(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kce=/^__.*__$/;class Bce{constructor(e,a,r){this.data=e,this.fieldMask=a,this.fieldTransforms=r}toMutation(e,a){return this.fieldMask!==null?new Kg(e,this.data,this.fieldMask,a,this.fieldTransforms):new VT(e,this.data,a,this.fieldTransforms)}}class IK{constructor(e,a,r){this.data=e,this.fieldMask=a,this.fieldTransforms=r}toMutation(e,a){return new Kg(e,this.data,this.fieldMask,a,this.fieldTransforms)}}function LK(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ti()}}class z3{constructor(e,a,r,s,l,h){this.settings=e,this.databaseId=a,this.serializer=r,this.ignoreUndefinedProperties=s,l===void 0&&this.ua(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new z3(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var a;const r=(a=this.path)===null||a===void 0?void 0:a.child(e),s=this.aa({path:r,la:!1});return s.fa(e),s}da(e){var a;const r=(a=this.path)===null||a===void 0?void 0:a.child(e),s=this.aa({path:r,la:!1});return s.ua(),s}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Ob(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return this.fieldMask.find(a=>e.isPrefixOf(a))!==void 0||this.fieldTransforms.find(a=>e.isPrefixOf(a.field))!==void 0}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(e.length===0)throw this._a("Document fields must not be empty");if(LK(this.ca)&&kce.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Gce{constructor(e,a,r){this.databaseId=e,this.ignoreUndefinedProperties=a,this.serializer=r||v2(e)}ya(e,a,r,s=!1){return new z3({ca:e,methodName:a,ga:r,path:Mm.emptyPath(),la:!1,ma:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function C2(t){const e=t._freezeSettings(),a=v2(t._databaseId);return new Gce(t._databaseId,!!e.ignoreUndefinedProperties,a)}function FK(t,e,a,r,s,l={}){const h=t.ya(l.merge||l.mergeFields?2:0,e,a,s);O3("Data must be an object, but it was:",h,r);const n=BK(r,h);let w,T;if(l.merge)w=new lf(h.fieldMask),T=h.fieldTransforms;else if(l.mergeFields){const P=[];for(const z of l.mergeFields){const k=xD(e,z,a);if(!h.contains(k))throw new Zr(ar.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);jK(P,k)||P.push(k)}w=new lf(P),T=h.fieldTransforms.filter(z=>w.covers(z.field))}else w=null,T=h.fieldTransforms;return new Bce(new Ph(n),w,T)}class b2 extends N3{_toFieldTransform(e){if(e.ca!==2)throw e.ca===1?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof b2}}function UK(t,e,a,r){const s=t.ya(1,e,a);O3("Data must be an object, but it was:",s,r);const l=[],h=Ph.empty();P0(r,(w,T)=>{const P=D3(e,w,a);T=dl(T);const z=s.da(P);if(T instanceof b2)l.push(P);else{const k=LT(T,z);k!=null&&(l.push(P),h.set(P,k))}});const n=new lf(l);return new IK(h,n,s.fieldTransforms)}function kK(t,e,a,r,s,l){const h=t.ya(1,e,a),n=[xD(e,r,a)],w=[s];if(l.length%2!=0)throw new Zr(ar.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<l.length;k+=2)n.push(xD(e,l[k])),w.push(l[k+1]);const T=[],P=Ph.empty();for(let k=n.length-1;k>=0;--k)if(!jK(T,n[k])){const U=n[k];let Z=w[k];Z=dl(Z);const H=h.da(U);if(Z instanceof b2)T.push(U);else{const q=LT(Z,H);q!=null&&(T.push(U),P.set(U,q))}}const z=new lf(T);return new IK(P,z,h.fieldTransforms)}function jce(t,e,a,r=!1){return LT(a,t.ya(r?4:3,e))}function LT(t,e){if(GK(t=dl(t)))return O3("Unsupported field value:",e,t),BK(t,e);if(t instanceof N3)return function(a,r){if(!LK(r.ca))throw r._a(`${a._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${a._methodName}() is not currently supported inside arrays`);const s=a._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&e.ca!==4)throw e._a("Nested arrays are not supported");return function(a,r){const s=[];let l=0;for(const h of a){let n=LT(h,r.wa(l));n==null&&(n={nullValue:"NULL_VALUE"}),s.push(n),l++}return{arrayValue:{values:s}}}(t,e)}return function(a,r){if((a=dl(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return Ble(r.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const s=ah.fromDate(a);return{timestampValue:Nb(r.serializer,s)}}if(a instanceof ah){const s=new ah(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Nb(r.serializer,s)}}if(a instanceof V3)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof dv)return{bytesValue:uK(r.serializer,a._byteString)};if(a instanceof rh){const s=r.databaseId,l=a.firestore._databaseId;if(!l.isEqual(s))throw r._a(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:m3(a.firestore._databaseId||r.databaseId,a._key.path)}}throw r._a(`Unsupported field value: ${T2(a)}`)}(t,e)}function BK(t,e){const a={};return L$(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):P0(t,(r,s)=>{const l=LT(s,e.ha(r));l!=null&&(a[r]=l)}),{mapValue:{fields:a}}}function GK(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ah||t instanceof V3||t instanceof dv||t instanceof rh||t instanceof N3)}function O3(t,e,a){if(!GK(a)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(a)){const r=T2(a);throw r==="an object"?e._a(t+" a custom object"):e._a(t+" "+r)}}function xD(t,e,a){if((e=dl(e))instanceof IT)return e._internalPath;if(typeof e=="string")return D3(t,e);throw Ob("Field path arguments must be of type string or ",t,!1,void 0,a)}const Zce=new RegExp("[~\\*/\\[\\]]");function D3(t,e,a){if(e.search(Zce)>=0)throw Ob(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,a);try{return new IT(...e.split("."))._internalPath}catch{throw Ob(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,a)}}function Ob(t,e,a,r,s){const l=r&&!r.isEmpty(),h=s!==void 0;let n=`Function ${e}() called with invalid data`;a&&(n+=" (via `toFirestore()`)"),n+=". ";let w="";return(l||h)&&(w+=" (found",l&&(w+=` in field ${r}`),h&&(w+=` in document ${s}`),w+=")"),new Zr(ar.INVALID_ARGUMENT,n+t+w)}function jK(t,e){return t.some(a=>a.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZK{constructor(e,a,r,s,l){this._firestore=e,this._userDataWriter=a,this._key=r,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new rh(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new qce(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const a=this._document.data.field(x2("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a)}}}class qce extends ZK{data(){return super.data()}}function x2(t,e){return typeof e=="string"?D3(t,e):e instanceof IT?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qK(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Zr(ar.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class M3{}class HK extends M3{}function L_(t,e,...a){let r=[];e instanceof M3&&r.push(e),r=r.concat(a),function(s){const l=s.filter(n=>n instanceof I3).length,h=s.filter(n=>n instanceof P2).length;if(l>1||l>0&&h>0)throw new Zr(ar.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class P2 extends HK{constructor(e,a,r){super(),this._field=e,this._op=a,this._value=r,this.type="where"}static _create(e,a,r){return new P2(e,a,r)}_apply(e){const a=this._parse(e);return KK(e._query,a),new Wg(e.firestore,e.converter,AD(e._query,a))}_parse(e){const a=C2(e.firestore);return function(s,l,h,n,w,T,P){let z;if(w.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new Zr(ar.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){ek(P,T);const k=[];for(const U of P)k.push(QU(n,s,U));z={arrayValue:{values:k}}}else z=QU(n,s,P)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||ek(P,T),z=jce(h,l,P,T==="in"||T==="not-in");return du.create(w,T,z)}(e._query,"where",a,e.firestore._databaseId,this._field,this._op,this._value)}}function yC(t,e,a){const r=e,s=x2("where",t);return P2._create(s,r,a)}class I3 extends M3{constructor(e,a){super(),this.type=e,this._queryConstraints=a}static _create(e,a){return new I3(e,a)}_parse(e){const a=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return a.length===1?a[0]:Up.create(a,this._getOperator())}_apply(e){const a=this._parse(e);return a.getFilters().length===0?e:(function(r,s){let l=r;const h=s.getFlattenedFilters();for(const n of h)KK(l,n),l=AD(l,n)}(e._query,a),new Wg(e.firestore,e.converter,AD(e._query,a)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class L3 extends HK{constructor(e,a){super(),this._field=e,this._direction=a,this.type="orderBy"}static _create(e,a){return new L3(e,a)}_apply(e){const a=function(r,s,l){if(r.startAt!==null)throw new Zr(ar.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new Zr(ar.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new K_(s,l);return function(n,w){if(d3(n)===null){const T=f2(n);T!==null&&WK(n,T,w.field)}}(r,h),h}(e._query,this._field,this._direction);return new Wg(e.firestore,e.converter,function(r,s){const l=r.explicitOrderBy.concat([s]);return new Xv(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,a))}}function $K(t,e="asc"){const a=e,r=x2("orderBy",t);return L3._create(r,a)}function QU(t,e,a){if(typeof(a=dl(a))=="string"){if(a==="")throw new Zr(ar.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!H$(e)&&a.indexOf("/")!==-1)throw new Zr(ar.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${a}' contains a '/' character.`);const r=e.path.child(kl.fromString(a));if(!Yn.isDocumentKey(r))throw new Zr(ar.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return RU(t,new Yn(r))}if(a instanceof rh)return RU(t,a._key);throw new Zr(ar.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${T2(a)}.`)}function ek(t,e){if(!Array.isArray(t)||t.length===0)throw new Zr(ar.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function KK(t,e){if(e.isInequality()){const r=f2(t),s=e.field;if(r!==null&&!r.isEqual(s))throw new Zr(ar.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const l=d3(t);l!==null&&WK(t,s,l)}const a=function(r,s){for(const l of r)for(const h of l.getFlattenedFilters())if(s.indexOf(h.op)>=0)return h.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(a!==null)throw a===e.op?new Zr(ar.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Zr(ar.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${a.toString()}' filters.`)}function WK(t,e,a){if(!a.isEqual(e))throw new Zr(ar.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${a.toString()}' instead.`)}class Hce{convertValue(e,a="none"){switch(A0(e)){case 0:return null;case 1:return e.booleanValue;case 2:return uu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,a);case 5:return e.stringValue;case 6:return this.convertBytes(g0(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,a);case 10:return this.convertObject(e.mapValue,a);default:throw ti()}}convertObject(e,a){return this.convertObjectMap(e.fields,a)}convertObjectMap(e,a="none"){const r={};return P0(e,(s,l)=>{r[s]=this.convertValue(l,a)}),r}convertGeoPoint(e){return new V3(uu(e.latitude),uu(e.longitude))}convertArray(e,a){return(e.values||[]).map(r=>this.convertValue(r,a))}convertServerTimestamp(e,a){switch(a){case"previous":const r=o3(e);return r==null?null:this.convertValue(r,a);case"estimate":return this.convertTimestamp(CR(e));default:return null}}convertTimestamp(e){const a=Ug(e);return new ah(a.seconds,a.nanos)}convertDocumentKey(e,a){const r=kl.fromString(e);zo(pK(r));const s=new bR(r.get(1),r.get(3)),l=new Yn(r.popFirst(5));return s.isEqual(a)||Sy(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${a.projectId}/${a.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YK(t,e,a){let r;return r=t?a&&(a.merge||a.mergeFields)?t.toFirestore(e,a):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e,a){this.hasPendingWrites=e,this.fromCache=a}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class XK extends ZK{constructor(e,a,r,s,l,h){super(e,a,r,s,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const a=new WC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(a,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,a={}){if(this._document){const r=this._document.data.field(x2("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,a.serverTimestamps)}}}class WC extends XK{data(e={}){return super.data(e)}}class JK{constructor(e,a,r,s){this._firestore=e,this._userDataWriter=a,this._snapshot=s,this.metadata=new Zw(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(a=>e.push(a)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,a){this._snapshot.docs.forEach(r=>{e.call(a,new WC(this._firestore,this._userDataWriter,r.key,r,new Zw(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const a=!!e.includeMetadataChanges;if(a&&this._snapshot.excludesMetadataChanges)throw new Zr(ar.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===a||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(h=>{const n=new WC(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Zw(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);return h.doc,{type:"added",doc:n,oldIndex:-1,newIndex:l++}})}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>s||h.type!==3).map(h=>{const n=new WC(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Zw(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,T=-1;return h.type!==0&&(w=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),T=l.indexOf(h.doc.key)),{type:$ce(h.type),doc:n,oldIndex:w,newIndex:T}})}}(this,a),this._cachedChangesIncludeMetadataChanges=a),this._cachedChanges}}function $ce(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ti()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(t){t=df(t,rh);const e=df(t.firestore,xy);return Dce(MT(e),t._key).then(a=>QK(e,t,a))}class F3 extends Hce{constructor(e){super(),this.firestore=e}convertBytes(e){return new dv(e)}convertReference(e){const a=this.convertDocumentKey(e,this.firestore._databaseId);return new rh(this.firestore,null,a)}}function Xi(t){t=df(t,Wg);const e=df(t.firestore,xy),a=MT(e),r=new F3(e);return qK(t._query),Mce(a,t._query).then(s=>new JK(e,r,t,s))}function hd(t,e,a,...r){t=df(t,rh);const s=df(t.firestore,xy),l=C2(s);let h;return h=typeof(e=dl(e))=="string"||e instanceof IT?kK(l,"updateDoc",t._key,e,a,r):UK(l,"updateDoc",t._key,e),E2(s,[h.toMutation(t._key,Nh.exists(!0))])}function U3(t){return E2(df(t.firestore,xy),[new A2(t._key,Nh.none())])}function hv(t,e){const a=df(t.firestore,xy),r=Is(t),s=YK(t.converter,e);return E2(a,[FK(C2(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Nh.exists(!1))]).then(()=>r)}function uy(t,...e){var a,r,s;t=dl(t);let l={includeMetadataChanges:!1},h=0;typeof e[h]!="object"||JU(e[h])||(l=e[h],h++);const n={includeMetadataChanges:l.includeMetadataChanges};if(JU(e[h])){const z=e[h];e[h]=(a=z.next)===null||a===void 0?void 0:a.bind(z),e[h+1]=(r=z.error)===null||r===void 0?void 0:r.bind(z),e[h+2]=(s=z.complete)===null||s===void 0?void 0:s.bind(z)}let w,T,P;if(t instanceof rh)T=df(t.firestore,xy),P=h2(t._key.path),w={next:z=>{e[h]&&e[h](QK(T,t,z))},error:e[h+1],complete:e[h+2]};else{const z=df(t,Wg);T=df(z.firestore,xy),P=z._query;const k=new F3(T);w={next:U=>{e[h]&&e[h](new JK(T,k,z,U))},error:e[h+1],complete:e[h+2]},qK(t._query)}return function(z,k,U,Z){const H=new E3(Z),q=new x3(k,H,U);return z.asyncQueue.enqueueAndForget(async()=>S3(await zb(z),q)),()=>{H.Dc(),z.asyncQueue.enqueueAndForget(async()=>C3(await zb(z),q))}}(MT(T),P,n,w)}function E2(t,e){return function(a,r){const s=new Ay;return a.asyncQueue.enqueueAndForget(async()=>vce(await Oce(a),r,s)),s.promise}(MT(t),e)}function QK(t,e,a){const r=a.docs.get(e._key),s=new F3(t);return new XK(t,s,e._key,r,new Zw(a.hasPendingWrites,a.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kce{constructor(e,a){this._firestore=e,this._commitHandler=a,this._mutations=[],this._committed=!1,this._dataReader=C2(e)}set(e,a,r){this._verifyNotCommitted();const s=rN(e,this._firestore),l=YK(s.converter,a,r),h=FK(this._dataReader,"WriteBatch.set",s._key,l,s.converter!==null,r);return this._mutations.push(h.toMutation(s._key,Nh.none())),this}update(e,a,r,...s){this._verifyNotCommitted();const l=rN(e,this._firestore);let h;return h=typeof(a=dl(a))=="string"||a instanceof IT?kK(this._dataReader,"WriteBatch.update",l._key,a,r,s):UK(this._dataReader,"WriteBatch.update",l._key,a),this._mutations.push(h.toMutation(l._key,Nh.exists(!0))),this}delete(e){this._verifyNotCommitted();const a=rN(e,this._firestore);return this._mutations=this._mutations.concat(new A2(a._key,Nh.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Zr(ar.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function rN(t,e){if((t=dl(t)).firestore!==e)throw new Zr(ar.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wce(t){return MT(t=df(t,xy)),new Kce(t,e=>E2(t,e))}(function(t,e=!0){(function(a){Yv=a})(b0),f0(new Fg("firestore",(a,{instanceIdentifier:r,options:s})=>{const l=a.getProvider("app").getImmediate(),h=new xy(new ole(a.getProvider("auth-internal")),new dle(a.getProvider("app-check-internal")),function(n,w){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Zr(ar.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bR(n.options.projectId,w)}(l,r),l);return s=Object.assign({useFetchStreams:e},s),h._setSettings(s),h},"PUBLIC").setMultipleInstances(!0)),Pm(gU,"3.13.0",t),Pm(gU,"3.13.0","esm2017")})();const Yce={apiKey:"AIzaSyAqEefB5cZ1jVzeqdhxfRYHUzOqgyUqieo",authDomain:"ecp-caps.firebaseapp.com",projectId:"ecp-caps",storageBucket:"ecp-caps.firebasestorage.app",messagingSenderId:"1040391525167",appId:"1:1040391525167:web:c4b9bff139a86daacf47da"},eW=Yq(Yce),e1=zH(eW),zr=Uce(eW);var tW={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},tk=Vt.createContext&&Vt.createContext(tW),Xce=["attr","size","title"];function Jce(t,e){if(t==null)return{};var a=Qce(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Qce(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function Db(){return Db=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Db.apply(this,arguments)}function ak(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function Mb(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?ak(Object(a),!0).forEach(function(r){ede(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ak(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function ede(t,e,a){return e=tde(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function tde(t){var e=ade(t,"string");return typeof e=="symbol"?e:e+""}function ade(t,e){if(typeof t!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function aW(t){return t&&t.map((e,a)=>Vt.createElement(e.tag,Mb({key:a},e.attr),aW(e.child)))}function Ko(t){return e=>Vt.createElement(rde,Db({attr:Mb({},t.attr)},e),aW(t.child))}function rde(t){var e=a=>{var{attr:r,size:s,title:l}=t,h=Jce(t,Xce),n=s||a.size||"1em",w;return a.className&&(w=a.className),t.className&&(w=(w?w+" ":"")+t.className),Vt.createElement("svg",Db({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,r,h,{className:w,style:Mb(Mb({color:t.color||a.color},a.style),t.style),height:n,width:n,xmlns:"http://www.w3.org/2000/svg"}),l&&Vt.createElement("title",null,l),t.children)};return tk!==void 0?Vt.createElement(tk.Consumer,null,a=>e(a)):e(tW)}function nde(t){return Ko({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(t)}function ide(t){return Ko({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"},child:[]}]})(t)}function rk(t){return Ko({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(t)}function sde(t){return Ko({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(t)}function ode(t){return Ko({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(t)}function lde(t){return Ko({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(t)}function Qw(t){return Ko({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(t)}function ude(t){return Ko({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 255.531c.253 136.64-111.18 248.372-247.82 248.468-59.015.042-113.223-20.53-155.822-54.911-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184 0-101.705-82.311-184-184-184-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z"},child:[]}]})(t)}function cde(t){return Ko({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M288 0c-69.59 0-126 56.41-126 126 0 56.26 82.35 158.8 113.9 196.02 6.39 7.54 17.82 7.54 24.2 0C331.65 284.8 414 182.26 414 126 414 56.41 357.59 0 288 0zm0 168c-23.2 0-42-18.8-42-42s18.8-42 42-42 42 18.8 42 42-18.8 42-42 42zM20.12 215.95A32.006 32.006 0 0 0 0 245.66v250.32c0 11.32 11.43 19.06 21.94 14.86L160 448V214.92c-8.84-15.98-16.07-31.54-21.25-46.42L20.12 215.95zM288 359.67c-14.07 0-27.38-6.18-36.51-16.96-19.66-23.2-40.57-49.62-59.49-76.72v182l192 64V266c-18.92 27.09-39.82 53.52-59.49 76.72-9.13 10.77-22.44 16.95-36.51 16.95zm266.06-198.51L416 224v288l139.88-55.95A31.996 31.996 0 0 0 576 426.34V176.02c0-11.32-11.43-19.06-21.94-14.86z"},child:[]}]})(t)}function dde(t){return Ko({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"},child:[]}]})(t)}function k3(t){return Ko({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function rW(t){return Ko({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function nW(t){return Ko({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"},child:[]}]})(t)}function nk(t){return Ko({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(t)}function hde(t){return Ko({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M630.6 364.9l-90.3-90.2c-12-12-28.3-18.7-45.3-18.7h-79.3c-17.7 0-32 14.3-32 32v79.2c0 17 6.7 33.2 18.7 45.2l90.3 90.2c12.5 12.5 32.8 12.5 45.3 0l92.5-92.5c12.6-12.5 12.6-32.7.1-45.2zm-182.8-21c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24c0 13.2-10.7 24-24 24zm-223.8-88c70.7 0 128-57.3 128-128C352 57.3 294.7 0 224 0S96 57.3 96 128c0 70.6 57.3 127.9 128 127.9zm127.8 111.2V294c-12.2-3.6-24.9-6.2-38.2-6.2h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 287.9 0 348.1 0 422.3v41.6c0 26.5 21.5 48 48 48h352c15.5 0 29.1-7.5 37.9-18.9l-58-58c-18.1-18.1-28.1-42.2-28.1-67.9z"},child:[]}]})(t)}const Yg=()=>{const[t,e]=nt.useState("Loading..."),[a,r]=nt.useState([]),[s,l]=nt.useState(!1),[h,n]=nt.useState(0),w="https://ecorideupload.s3.ap-southeast-2.amazonaws.com/uploads/profile/1742829316204_image.png";nt.useEffect(()=>{const U=Zn(zr,"notifications"),Z=L_(U,$K("timestamp","desc")),H=uy(Z,q=>{const J=[];q.forEach(re=>{J.push({id:re.id,...re.data()})}),r(J),n(J.filter(re=>!re.read).length)});return()=>H()},[]),nt.useEffect(()=>{const U=e1.onAuthStateChanged(async Z=>{if(Z)try{const H=Is(zr,"users",Z.uid),q=await Op(H);q.exists()?e(q.data().name):e("Super Admin")}catch(H){console.error("Error fetching user data:",H)}else e("Unknown User")});return()=>U()},[]);const T=()=>{l(!s)},P=async()=>{try{const U=Wce(zr);a.filter(Z=>!Z.read).forEach(Z=>{const H=Is(zr,"notifications",Z.id);U.update(H,{read:!0})}),await U.commit(),r(a.map(Z=>({...Z,read:!0}))),n(0)}catch(U){console.error("Error marking notifications as read:",U)}},z=U=>{if(!U)return"";const Z=U.toDate();return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(Z)},k=U=>{switch(U.type){case"status_update":return K.jsxs("div",{className:"notification-message",children:[K.jsx("p",{children:U.message}),K.jsx("span",{className:`status-badge ${U.status.toLowerCase().replace(" ","-")}`,children:U.status})]});case"battery_update":return K.jsxs("div",{className:"notification-message",children:[K.jsx("p",{children:U.message}),K.jsx("div",{className:"battery-indicator",children:K.jsx("span",{className:"battery-level",style:{width:`${U.batteryLevel}%`}})})]});default:return K.jsx("p",{children:U.message})}};return K.jsx("div",{className:"header",children:K.jsxs("div",{className:"user-profile",children:[K.jsxs("div",{className:"profile",children:[K.jsx("img",{src:w,alt:"Profile",className:"profile-img"}),K.jsxs("div",{className:"profile-name",children:[K.jsx("p",{children:t}),K.jsx("small",{children:"Super Admin"})]})]}),K.jsxs("div",{className:"notification-container",children:[K.jsx(nde,{className:"icon",onClick:T}),h>0&&K.jsx("span",{className:"notification-badge",children:h}),s&&K.jsxs("div",{className:"notifications-modal",children:[K.jsxs("div",{className:"notifications-header",children:[K.jsx("h3",{children:"Notifications"}),K.jsx("button",{className:"mark-all-read",onClick:P,disabled:h===0,children:"Mark all as read"})]}),K.jsx("div",{className:"notifications-list",children:a.length>0?a.map(U=>K.jsx("div",{className:`notification-item ${U.read?"":"unread"}`,children:K.jsxs("div",{className:"notification-content",children:[k(U),K.jsx("span",{className:"notification-time",children:z(U.timestamp)})]})},U.id)):K.jsx("p",{className:"no-notifications",children:"No notifications"})})]})]})]})})};function fde(t){return Ko({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M19 2H6c-1.206 0-3 .799-3 3v14c0 2.201 1.794 3 3 3h15v-2H6.012C5.55 19.988 5 19.806 5 19s.55-.988 1.012-1H21V4c0-1.103-.897-2-2-2zm0 14H5V5c0-.806.55-.988 1-1h13v12z"},child:[]}]})(t)}function pde(t){return Ko({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M11 15.414V20h2v-4.586c0-.526-.214-1.042-.586-1.414l-2-2L13 9.414l2 2c.372.372.888.586 1.414.586H20v-2h-3.586l-3.707-3.707a.999.999 0 0 0-1.414 0L8 9.586c-.378.378-.586.88-.586 1.414s.208 1.036.586 1.414l3 3z"},child:[]},{tag:"circle",attr:{cx:"16",cy:"5",r:"2"},child:[]},{tag:"path",attr:{d:"M18 14c-2.206 0-4 1.794-4 4s1.794 4 4 4 4-1.794 4-4-1.794-4-4-4zm0 6c-1.103 0-2-.897-2-2s.897-2 2-2 2 .897 2 2-.897 2-2 2zM6 22c2.206 0 4-1.794 4-4s-1.794-4-4-4-4 1.794-4 4 1.794 4 4 4zm0-6c1.103 0 2 .897 2 2s-.897 2-2 2-2-.897-2-2 .897-2 2-2z"},child:[]}]})(t)}function mde(t){return Ko({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M3 13h1v7c0 1.103.897 2 2 2h12c1.103 0 2-.897 2-2v-7h1a1 1 0 0 0 .707-1.707l-9-9a.999.999 0 0 0-1.414 0l-9 9A1 1 0 0 0 3 13zm7 7v-5h4v5h-4zm2-15.586 6 6V15l.001 5H16v-5c0-1.103-.897-2-2-2h-4c-1.103 0-2 .897-2 2v5H6v-9.586l6-6z"},child:[]}]})(t)}function yde(t){return Ko({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16 13v-2H7V8l-5 4 5 4v-3z"},child:[]},{tag:"path",attr:{d:"M20 3h-9c-1.103 0-2 .897-2 2v4h2V5h9v14h-9v-4H9v4c0 1.103.897 2 2 2h9c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2z"},child:[]}]})(t)}function gde(t){return Ko({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 12a2 2 0 0 0-.703.133l-2.398-1.963c.059-.214.101-.436.101-.67C17 8.114 15.886 7 14.5 7S12 8.114 12 9.5c0 .396.1.765.262 1.097l-2.909 3.438A2.06 2.06 0 0 0 9 14c-.179 0-.348.03-.512.074l-2.563-2.563C5.97 11.348 6 11.179 6 11c0-1.108-.892-2-2-2s-2 .892-2 2 .892 2 2 2c.179 0 .348-.03.512-.074l2.563 2.563A1.906 1.906 0 0 0 7 16c0 1.108.892 2 2 2s2-.892 2-2c0-.237-.048-.46-.123-.671l2.913-3.442c.227.066.462.113.71.113a2.48 2.48 0 0 0 1.133-.281l2.399 1.963A2.077 2.077 0 0 0 18 14c0 1.108.892 2 2 2s2-.892 2-2-.892-2-2-2z"},child:[]}]})(t)}function Ade(t){return Ko({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M4 21h15.893c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2H4c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2zm0-2v-5h4v5H4zM14 7v5h-4V7h4zM8 7v5H4V7h4zm2 12v-5h4v5h-4zm6 0v-5h3.894v5H16zm3.893-7H16V7h3.893v5z"},child:[]}]})(t)}function _de(t){return Ko({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M5 22h14c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2h-2a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1H5c-1.103 0-2 .897-2 2v15c0 1.103.897 2 2 2zM5 5h2v2h10V5h2v15H5V5z"},child:[]},{tag:"path",attr:{d:"m11 13.586-1.793-1.793-1.414 1.414L11 16.414l5.207-5.207-1.414-1.414z"},child:[]}]})(t)}function vde(t){return Ko({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20.29 8.29 16 12.58l-1.3-1.29-1.41 1.42 2.7 2.7 5.72-5.7zM4 8a3.91 3.91 0 0 0 4 4 3.91 3.91 0 0 0 4-4 3.91 3.91 0 0 0-4-4 3.91 3.91 0 0 0-4 4zm6 0a1.91 1.91 0 0 1-2 2 1.91 1.91 0 0 1-2-2 1.91 1.91 0 0 1 2-2 1.91 1.91 0 0 1 2 2zM4 18a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1h2v-1a5 5 0 0 0-5-5H7a5 5 0 0 0-5 5v1h2z"},child:[]}]})(t)}function wde(t){return Ko({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m20 8-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8zM9 19H7v-9h2v9zm4 0h-2v-6h2v6zm4 0h-2v-3h2v3zM14 9h-1V4l5 5h-4z"},child:[]}]})(t)}const iW=()=>{const t=vI(),e=qg(),a=async()=>{try{await e1.signOut(),t("/login")}catch(s){console.error("Error signing out: ",s.message)}},r=s=>e.pathname===s;return K.jsxs("div",{className:"sidebar",children:[K.jsx("div",{className:"logo",children:K.jsx("img",{src:"/ecpcaps/assets/ecoridelogo2.png",alt:"EcoRide Logo",style:{width:"100%",maxWidth:"100px",height:"auto"}})}),K.jsxs("div",{className:"menu-list",children:[K.jsxs("div",{className:`menu-item ${r("/dashboard")?"active":""}`,onClick:()=>t("/dashboard"),children:[K.jsx(mde,{}),K.jsx("span",{children:"Dashboard"})]}),K.jsxs("div",{className:`menu-item ${r("/stations")?"active":""}`,onClick:()=>t("/stations"),children:[K.jsx(fde,{}),K.jsx("span",{children:"Manage Stations"})]}),K.jsxs("div",{className:`menu-item ${r("/user-management")?"active":""}`,onClick:()=>t("/user-management"),children:[K.jsx(vde,{}),K.jsx("span",{children:"Manage User"})]}),K.jsxs("div",{className:`menu-item ${r("/admin-management")?"active":""}`,onClick:()=>t("/admin-management"),children:[K.jsx(wde,{}),K.jsx("span",{children:"Manage & Create Admin"})]}),K.jsxs("div",{className:`menu-item ${r("/bike-management")?"active":""}`,onClick:()=>t("/bike-management"),children:[K.jsx(pde,{}),K.jsx("span",{children:"Manage Bikes"})]}),K.jsxs("div",{className:`menu-item ${r("/rate-management")?"active":""}`,onClick:()=>t("/rate-management"),children:[K.jsx(_de,{}),K.jsx("span",{children:"Rate Management"})]}),K.jsxs("div",{className:`menu-item ${r("/system-analytics")?"active":""}`,onClick:()=>t("/system-analytics"),children:[K.jsx(gde,{}),K.jsx("span",{children:"System Analytics"})]}),K.jsxs("div",{className:`menu-item ${r("/ride-details")?"active":""}`,onClick:()=>t("/ride-details"),children:[K.jsx(Ade,{}),K.jsx("span",{children:"Ride Details"})]}),K.jsxs("div",{className:"menu-item logout",onClick:a,children:[K.jsx(yde,{}),K.jsx("span",{children:"Logout"})]})]})]})};var YC={exports:{}},Rde=YC.exports,ik;function Tde(){return ik||(ik=1,function(t,e){(function(a,r){t.exports=r()})(Rde,function(){var a,r,s;function l(n,w){if(!a)a=w;else if(!r)r=w;else{var T="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+a+")(sharedChunk); ("+r+")(sharedChunk); self.onerror = null;",P={};a(P),s=w(P),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(s.workerUrl=window.URL.createObjectURL(new Blob([T],{type:"text/javascript"})))}}l(["exports"],function(n){function w(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var T,P={},z={};function k(){if(T)return z;T=1,Object.defineProperty(z,"__esModule",{value:!0}),z.setMatrixArrayType=function(y){z.ARRAY_TYPE=i=y},z.toRadian=function(y){return y*f},z.equals=function(y,m){return Math.abs(y-m)<=d*Math.max(1,Math.abs(y),Math.abs(m))},z.RANDOM=z.ARRAY_TYPE=z.EPSILON=void 0;var d=1e-6;z.EPSILON=d;var i=typeof Float32Array<"u"?Float32Array:Array;z.ARRAY_TYPE=i;var u=Math.random;z.RANDOM=u;var f=Math.PI/180;return Math.hypot||(Math.hypot=function(){for(var y=0,m=arguments.length;m--;)y+=arguments[m]*arguments[m];return Math.sqrt(y)}),z}var U,Z={};function H(){if(U)return Z;function d(m){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},d(m)}U=1,Object.defineProperty(Z,"__esModule",{value:!0}),Z.create=function(){var m=new i.ARRAY_TYPE(4);return i.ARRAY_TYPE!=Float32Array&&(m[1]=0,m[2]=0),m[0]=1,m[3]=1,m},Z.clone=function(m){var _=new i.ARRAY_TYPE(4);return _[0]=m[0],_[1]=m[1],_[2]=m[2],_[3]=m[3],_},Z.copy=function(m,_){return m[0]=_[0],m[1]=_[1],m[2]=_[2],m[3]=_[3],m},Z.identity=function(m){return m[0]=1,m[1]=0,m[2]=0,m[3]=1,m},Z.fromValues=function(m,_,b,N){var D=new i.ARRAY_TYPE(4);return D[0]=m,D[1]=_,D[2]=b,D[3]=N,D},Z.set=function(m,_,b,N,D){return m[0]=_,m[1]=b,m[2]=N,m[3]=D,m},Z.transpose=function(m,_){if(m===_){var b=_[1];m[1]=_[2],m[2]=b}else m[0]=_[0],m[1]=_[2],m[2]=_[1],m[3]=_[3];return m},Z.invert=function(m,_){var b=_[0],N=_[1],D=_[2],S=_[3],V=b*S-D*N;return V?(m[0]=S*(V=1/V),m[1]=-N*V,m[2]=-D*V,m[3]=b*V,m):null},Z.adjoint=function(m,_){var b=_[0];return m[0]=_[3],m[1]=-_[1],m[2]=-_[2],m[3]=b,m},Z.determinant=function(m){return m[0]*m[3]-m[2]*m[1]},Z.multiply=f,Z.rotate=function(m,_,b){var N=_[0],D=_[1],S=_[2],V=_[3],I=Math.sin(b),O=Math.cos(b);return m[0]=N*O+S*I,m[1]=D*O+V*I,m[2]=N*-I+S*O,m[3]=D*-I+V*O,m},Z.scale=function(m,_,b){var N=_[1],D=_[2],S=_[3],V=b[0],I=b[1];return m[0]=_[0]*V,m[1]=N*V,m[2]=D*I,m[3]=S*I,m},Z.fromRotation=function(m,_){var b=Math.sin(_),N=Math.cos(_);return m[0]=N,m[1]=b,m[2]=-b,m[3]=N,m},Z.fromScaling=function(m,_){return m[0]=_[0],m[1]=0,m[2]=0,m[3]=_[1],m},Z.str=function(m){return"mat2("+m[0]+", "+m[1]+", "+m[2]+", "+m[3]+")"},Z.frob=function(m){return Math.hypot(m[0],m[1],m[2],m[3])},Z.LDU=function(m,_,b,N){return m[2]=N[2]/N[0],b[0]=N[0],b[1]=N[1],b[3]=N[3]-m[2]*b[1],[m,_,b]},Z.add=function(m,_,b){return m[0]=_[0]+b[0],m[1]=_[1]+b[1],m[2]=_[2]+b[2],m[3]=_[3]+b[3],m},Z.subtract=y,Z.exactEquals=function(m,_){return m[0]===_[0]&&m[1]===_[1]&&m[2]===_[2]&&m[3]===_[3]},Z.equals=function(m,_){var b=m[0],N=m[1],D=m[2],S=m[3],V=_[0],I=_[1],O=_[2],M=_[3];return Math.abs(b-V)<=i.EPSILON*Math.max(1,Math.abs(b),Math.abs(V))&&Math.abs(N-I)<=i.EPSILON*Math.max(1,Math.abs(N),Math.abs(I))&&Math.abs(D-O)<=i.EPSILON*Math.max(1,Math.abs(D),Math.abs(O))&&Math.abs(S-M)<=i.EPSILON*Math.max(1,Math.abs(S),Math.abs(M))},Z.multiplyScalar=function(m,_,b){return m[0]=_[0]*b,m[1]=_[1]*b,m[2]=_[2]*b,m[3]=_[3]*b,m},Z.multiplyScalarAndAdd=function(m,_,b,N){return m[0]=_[0]+b[0]*N,m[1]=_[1]+b[1]*N,m[2]=_[2]+b[2]*N,m[3]=_[3]+b[3]*N,m},Z.sub=Z.mul=void 0;var i=function(m,_){if(m&&m.__esModule)return m;if(m===null||d(m)!=="object"&&typeof m!="function")return{default:m};var b=u(void 0);if(b&&b.has(m))return b.get(m);var N={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in m)if(S!=="default"&&Object.prototype.hasOwnProperty.call(m,S)){var V=D?Object.getOwnPropertyDescriptor(m,S):null;V&&(V.get||V.set)?Object.defineProperty(N,S,V):N[S]=m[S]}return N.default=m,b&&b.set(m,N),N}(k());function u(m){if(typeof WeakMap!="function")return null;var _=new WeakMap,b=new WeakMap;return(u=function(N){return N?b:_})(m)}function f(m,_,b){var N=_[0],D=_[1],S=_[2],V=_[3],I=b[0],O=b[1],M=b[2],B=b[3];return m[0]=N*I+S*O,m[1]=D*I+V*O,m[2]=N*M+S*B,m[3]=D*M+V*B,m}function y(m,_,b){return m[0]=_[0]-b[0],m[1]=_[1]-b[1],m[2]=_[2]-b[2],m[3]=_[3]-b[3],m}return Z.mul=f,Z.sub=y,Z}var q,J={};function re(){if(q)return J;function d(m){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},d(m)}q=1,Object.defineProperty(J,"__esModule",{value:!0}),J.create=function(){var m=new i.ARRAY_TYPE(6);return i.ARRAY_TYPE!=Float32Array&&(m[1]=0,m[2]=0,m[4]=0,m[5]=0),m[0]=1,m[3]=1,m},J.clone=function(m){var _=new i.ARRAY_TYPE(6);return _[0]=m[0],_[1]=m[1],_[2]=m[2],_[3]=m[3],_[4]=m[4],_[5]=m[5],_},J.copy=function(m,_){return m[0]=_[0],m[1]=_[1],m[2]=_[2],m[3]=_[3],m[4]=_[4],m[5]=_[5],m},J.identity=function(m){return m[0]=1,m[1]=0,m[2]=0,m[3]=1,m[4]=0,m[5]=0,m},J.fromValues=function(m,_,b,N,D,S){var V=new i.ARRAY_TYPE(6);return V[0]=m,V[1]=_,V[2]=b,V[3]=N,V[4]=D,V[5]=S,V},J.set=function(m,_,b,N,D,S,V){return m[0]=_,m[1]=b,m[2]=N,m[3]=D,m[4]=S,m[5]=V,m},J.invert=function(m,_){var b=_[0],N=_[1],D=_[2],S=_[3],V=_[4],I=_[5],O=b*S-N*D;return O?(m[0]=S*(O=1/O),m[1]=-N*O,m[2]=-D*O,m[3]=b*O,m[4]=(D*I-S*V)*O,m[5]=(N*V-b*I)*O,m):null},J.determinant=function(m){return m[0]*m[3]-m[1]*m[2]},J.multiply=f,J.rotate=function(m,_,b){var N=_[0],D=_[1],S=_[2],V=_[3],I=_[4],O=_[5],M=Math.sin(b),B=Math.cos(b);return m[0]=N*B+S*M,m[1]=D*B+V*M,m[2]=N*-M+S*B,m[3]=D*-M+V*B,m[4]=I,m[5]=O,m},J.scale=function(m,_,b){var N=_[1],D=_[2],S=_[3],V=_[4],I=_[5],O=b[0],M=b[1];return m[0]=_[0]*O,m[1]=N*O,m[2]=D*M,m[3]=S*M,m[4]=V,m[5]=I,m},J.translate=function(m,_,b){var N=_[0],D=_[1],S=_[2],V=_[3],I=_[4],O=_[5],M=b[0],B=b[1];return m[0]=N,m[1]=D,m[2]=S,m[3]=V,m[4]=N*M+S*B+I,m[5]=D*M+V*B+O,m},J.fromRotation=function(m,_){var b=Math.sin(_),N=Math.cos(_);return m[0]=N,m[1]=b,m[2]=-b,m[3]=N,m[4]=0,m[5]=0,m},J.fromScaling=function(m,_){return m[0]=_[0],m[1]=0,m[2]=0,m[3]=_[1],m[4]=0,m[5]=0,m},J.fromTranslation=function(m,_){return m[0]=1,m[1]=0,m[2]=0,m[3]=1,m[4]=_[0],m[5]=_[1],m},J.str=function(m){return"mat2d("+m[0]+", "+m[1]+", "+m[2]+", "+m[3]+", "+m[4]+", "+m[5]+")"},J.frob=function(m){return Math.hypot(m[0],m[1],m[2],m[3],m[4],m[5],1)},J.add=function(m,_,b){return m[0]=_[0]+b[0],m[1]=_[1]+b[1],m[2]=_[2]+b[2],m[3]=_[3]+b[3],m[4]=_[4]+b[4],m[5]=_[5]+b[5],m},J.subtract=y,J.multiplyScalar=function(m,_,b){return m[0]=_[0]*b,m[1]=_[1]*b,m[2]=_[2]*b,m[3]=_[3]*b,m[4]=_[4]*b,m[5]=_[5]*b,m},J.multiplyScalarAndAdd=function(m,_,b,N){return m[0]=_[0]+b[0]*N,m[1]=_[1]+b[1]*N,m[2]=_[2]+b[2]*N,m[3]=_[3]+b[3]*N,m[4]=_[4]+b[4]*N,m[5]=_[5]+b[5]*N,m},J.exactEquals=function(m,_){return m[0]===_[0]&&m[1]===_[1]&&m[2]===_[2]&&m[3]===_[3]&&m[4]===_[4]&&m[5]===_[5]},J.equals=function(m,_){var b=m[0],N=m[1],D=m[2],S=m[3],V=m[4],I=m[5],O=_[0],M=_[1],B=_[2],X=_[3],ee=_[4],ue=_[5];return Math.abs(b-O)<=i.EPSILON*Math.max(1,Math.abs(b),Math.abs(O))&&Math.abs(N-M)<=i.EPSILON*Math.max(1,Math.abs(N),Math.abs(M))&&Math.abs(D-B)<=i.EPSILON*Math.max(1,Math.abs(D),Math.abs(B))&&Math.abs(S-X)<=i.EPSILON*Math.max(1,Math.abs(S),Math.abs(X))&&Math.abs(V-ee)<=i.EPSILON*Math.max(1,Math.abs(V),Math.abs(ee))&&Math.abs(I-ue)<=i.EPSILON*Math.max(1,Math.abs(I),Math.abs(ue))},J.sub=J.mul=void 0;var i=function(m,_){if(m&&m.__esModule)return m;if(m===null||d(m)!=="object"&&typeof m!="function")return{default:m};var b=u(void 0);if(b&&b.has(m))return b.get(m);var N={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in m)if(S!=="default"&&Object.prototype.hasOwnProperty.call(m,S)){var V=D?Object.getOwnPropertyDescriptor(m,S):null;V&&(V.get||V.set)?Object.defineProperty(N,S,V):N[S]=m[S]}return N.default=m,b&&b.set(m,N),N}(k());function u(m){if(typeof WeakMap!="function")return null;var _=new WeakMap,b=new WeakMap;return(u=function(N){return N?b:_})(m)}function f(m,_,b){var N=_[0],D=_[1],S=_[2],V=_[3],I=_[4],O=_[5],M=b[0],B=b[1],X=b[2],ee=b[3],ue=b[4],le=b[5];return m[0]=N*M+S*B,m[1]=D*M+V*B,m[2]=N*X+S*ee,m[3]=D*X+V*ee,m[4]=N*ue+S*le+I,m[5]=D*ue+V*le+O,m}function y(m,_,b){return m[0]=_[0]-b[0],m[1]=_[1]-b[1],m[2]=_[2]-b[2],m[3]=_[3]-b[3],m[4]=_[4]-b[4],m[5]=_[5]-b[5],m}return J.mul=f,J.sub=y,J}var ce,ye={};function he(){if(ce)return ye;function d(m){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},d(m)}ce=1,Object.defineProperty(ye,"__esModule",{value:!0}),ye.create=function(){var m=new i.ARRAY_TYPE(9);return i.ARRAY_TYPE!=Float32Array&&(m[1]=0,m[2]=0,m[3]=0,m[5]=0,m[6]=0,m[7]=0),m[0]=1,m[4]=1,m[8]=1,m},ye.fromMat4=function(m,_){return m[0]=_[0],m[1]=_[1],m[2]=_[2],m[3]=_[4],m[4]=_[5],m[5]=_[6],m[6]=_[8],m[7]=_[9],m[8]=_[10],m},ye.clone=function(m){var _=new i.ARRAY_TYPE(9);return _[0]=m[0],_[1]=m[1],_[2]=m[2],_[3]=m[3],_[4]=m[4],_[5]=m[5],_[6]=m[6],_[7]=m[7],_[8]=m[8],_},ye.copy=function(m,_){return m[0]=_[0],m[1]=_[1],m[2]=_[2],m[3]=_[3],m[4]=_[4],m[5]=_[5],m[6]=_[6],m[7]=_[7],m[8]=_[8],m},ye.fromValues=function(m,_,b,N,D,S,V,I,O){var M=new i.ARRAY_TYPE(9);return M[0]=m,M[1]=_,M[2]=b,M[3]=N,M[4]=D,M[5]=S,M[6]=V,M[7]=I,M[8]=O,M},ye.set=function(m,_,b,N,D,S,V,I,O,M){return m[0]=_,m[1]=b,m[2]=N,m[3]=D,m[4]=S,m[5]=V,m[6]=I,m[7]=O,m[8]=M,m},ye.identity=function(m){return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=1,m[5]=0,m[6]=0,m[7]=0,m[8]=1,m},ye.transpose=function(m,_){if(m===_){var b=_[1],N=_[2],D=_[5];m[1]=_[3],m[2]=_[6],m[3]=b,m[5]=_[7],m[6]=N,m[7]=D}else m[0]=_[0],m[1]=_[3],m[2]=_[6],m[3]=_[1],m[4]=_[4],m[5]=_[7],m[6]=_[2],m[7]=_[5],m[8]=_[8];return m},ye.invert=function(m,_){var b=_[0],N=_[1],D=_[2],S=_[3],V=_[4],I=_[5],O=_[6],M=_[7],B=_[8],X=B*V-I*M,ee=-B*S+I*O,ue=M*S-V*O,le=b*X+N*ee+D*ue;return le?(m[0]=X*(le=1/le),m[1]=(-B*N+D*M)*le,m[2]=(I*N-D*V)*le,m[3]=ee*le,m[4]=(B*b-D*O)*le,m[5]=(-I*b+D*S)*le,m[6]=ue*le,m[7]=(-M*b+N*O)*le,m[8]=(V*b-N*S)*le,m):null},ye.adjoint=function(m,_){var b=_[0],N=_[1],D=_[2],S=_[3],V=_[4],I=_[5],O=_[6],M=_[7],B=_[8];return m[0]=V*B-I*M,m[1]=D*M-N*B,m[2]=N*I-D*V,m[3]=I*O-S*B,m[4]=b*B-D*O,m[5]=D*S-b*I,m[6]=S*M-V*O,m[7]=N*O-b*M,m[8]=b*V-N*S,m},ye.determinant=function(m){var _=m[3],b=m[4],N=m[5],D=m[6],S=m[7],V=m[8];return m[0]*(V*b-N*S)+m[1]*(-V*_+N*D)+m[2]*(S*_-b*D)},ye.multiply=f,ye.translate=function(m,_,b){var N=_[0],D=_[1],S=_[2],V=_[3],I=_[4],O=_[5],M=_[6],B=_[7],X=_[8],ee=b[0],ue=b[1];return m[0]=N,m[1]=D,m[2]=S,m[3]=V,m[4]=I,m[5]=O,m[6]=ee*N+ue*V+M,m[7]=ee*D+ue*I+B,m[8]=ee*S+ue*O+X,m},ye.rotate=function(m,_,b){var N=_[0],D=_[1],S=_[2],V=_[3],I=_[4],O=_[5],M=_[6],B=_[7],X=_[8],ee=Math.sin(b),ue=Math.cos(b);return m[0]=ue*N+ee*V,m[1]=ue*D+ee*I,m[2]=ue*S+ee*O,m[3]=ue*V-ee*N,m[4]=ue*I-ee*D,m[5]=ue*O-ee*S,m[6]=M,m[7]=B,m[8]=X,m},ye.scale=function(m,_,b){var N=b[0],D=b[1];return m[0]=N*_[0],m[1]=N*_[1],m[2]=N*_[2],m[3]=D*_[3],m[4]=D*_[4],m[5]=D*_[5],m[6]=_[6],m[7]=_[7],m[8]=_[8],m},ye.fromTranslation=function(m,_){return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=1,m[5]=0,m[6]=_[0],m[7]=_[1],m[8]=1,m},ye.fromRotation=function(m,_){var b=Math.sin(_),N=Math.cos(_);return m[0]=N,m[1]=b,m[2]=0,m[3]=-b,m[4]=N,m[5]=0,m[6]=0,m[7]=0,m[8]=1,m},ye.fromScaling=function(m,_){return m[0]=_[0],m[1]=0,m[2]=0,m[3]=0,m[4]=_[1],m[5]=0,m[6]=0,m[7]=0,m[8]=1,m},ye.fromMat2d=function(m,_){return m[0]=_[0],m[1]=_[1],m[2]=0,m[3]=_[2],m[4]=_[3],m[5]=0,m[6]=_[4],m[7]=_[5],m[8]=1,m},ye.fromQuat=function(m,_){var b=_[0],N=_[1],D=_[2],S=_[3],V=b+b,I=N+N,O=D+D,M=b*V,B=N*V,X=N*I,ee=D*V,ue=D*I,le=D*O,ne=S*V,pe=S*I,we=S*O;return m[0]=1-X-le,m[3]=B-we,m[6]=ee+pe,m[1]=B+we,m[4]=1-M-le,m[7]=ue-ne,m[2]=ee-pe,m[5]=ue+ne,m[8]=1-M-X,m},ye.normalFromMat4=function(m,_){var b=_[0],N=_[1],D=_[2],S=_[3],V=_[4],I=_[5],O=_[6],M=_[7],B=_[8],X=_[9],ee=_[10],ue=_[11],le=_[12],ne=_[13],pe=_[14],we=_[15],Pe=b*I-N*V,Ye=b*O-D*V,je=b*M-S*V,qe=N*O-D*I,mt=N*M-S*I,Xe=D*M-S*O,At=B*ne-X*le,xt=B*pe-ee*le,St=B*we-ue*le,Ot=X*pe-ee*ne,Nt=X*we-ue*ne,kt=ee*we-ue*pe,Mt=Pe*kt-Ye*Nt+je*Ot+qe*St-mt*xt+Xe*At;return Mt?(m[0]=(I*kt-O*Nt+M*Ot)*(Mt=1/Mt),m[1]=(O*St-V*kt-M*xt)*Mt,m[2]=(V*Nt-I*St+M*At)*Mt,m[3]=(D*Nt-N*kt-S*Ot)*Mt,m[4]=(b*kt-D*St+S*xt)*Mt,m[5]=(N*St-b*Nt-S*At)*Mt,m[6]=(ne*Xe-pe*mt+we*qe)*Mt,m[7]=(pe*je-le*Xe-we*Ye)*Mt,m[8]=(le*mt-ne*je+we*Pe)*Mt,m):null},ye.projection=function(m,_,b){return m[0]=2/_,m[1]=0,m[2]=0,m[3]=0,m[4]=-2/b,m[5]=0,m[6]=-1,m[7]=1,m[8]=1,m},ye.str=function(m){return"mat3("+m[0]+", "+m[1]+", "+m[2]+", "+m[3]+", "+m[4]+", "+m[5]+", "+m[6]+", "+m[7]+", "+m[8]+")"},ye.frob=function(m){return Math.hypot(m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8])},ye.add=function(m,_,b){return m[0]=_[0]+b[0],m[1]=_[1]+b[1],m[2]=_[2]+b[2],m[3]=_[3]+b[3],m[4]=_[4]+b[4],m[5]=_[5]+b[5],m[6]=_[6]+b[6],m[7]=_[7]+b[7],m[8]=_[8]+b[8],m},ye.subtract=y,ye.multiplyScalar=function(m,_,b){return m[0]=_[0]*b,m[1]=_[1]*b,m[2]=_[2]*b,m[3]=_[3]*b,m[4]=_[4]*b,m[5]=_[5]*b,m[6]=_[6]*b,m[7]=_[7]*b,m[8]=_[8]*b,m},ye.multiplyScalarAndAdd=function(m,_,b,N){return m[0]=_[0]+b[0]*N,m[1]=_[1]+b[1]*N,m[2]=_[2]+b[2]*N,m[3]=_[3]+b[3]*N,m[4]=_[4]+b[4]*N,m[5]=_[5]+b[5]*N,m[6]=_[6]+b[6]*N,m[7]=_[7]+b[7]*N,m[8]=_[8]+b[8]*N,m},ye.exactEquals=function(m,_){return m[0]===_[0]&&m[1]===_[1]&&m[2]===_[2]&&m[3]===_[3]&&m[4]===_[4]&&m[5]===_[5]&&m[6]===_[6]&&m[7]===_[7]&&m[8]===_[8]},ye.equals=function(m,_){var b=m[0],N=m[1],D=m[2],S=m[3],V=m[4],I=m[5],O=m[6],M=m[7],B=m[8],X=_[0],ee=_[1],ue=_[2],le=_[3],ne=_[4],pe=_[5],we=_[6],Pe=_[7],Ye=_[8];return Math.abs(b-X)<=i.EPSILON*Math.max(1,Math.abs(b),Math.abs(X))&&Math.abs(N-ee)<=i.EPSILON*Math.max(1,Math.abs(N),Math.abs(ee))&&Math.abs(D-ue)<=i.EPSILON*Math.max(1,Math.abs(D),Math.abs(ue))&&Math.abs(S-le)<=i.EPSILON*Math.max(1,Math.abs(S),Math.abs(le))&&Math.abs(V-ne)<=i.EPSILON*Math.max(1,Math.abs(V),Math.abs(ne))&&Math.abs(I-pe)<=i.EPSILON*Math.max(1,Math.abs(I),Math.abs(pe))&&Math.abs(O-we)<=i.EPSILON*Math.max(1,Math.abs(O),Math.abs(we))&&Math.abs(M-Pe)<=i.EPSILON*Math.max(1,Math.abs(M),Math.abs(Pe))&&Math.abs(B-Ye)<=i.EPSILON*Math.max(1,Math.abs(B),Math.abs(Ye))},ye.sub=ye.mul=void 0;var i=function(m,_){if(m&&m.__esModule)return m;if(m===null||d(m)!=="object"&&typeof m!="function")return{default:m};var b=u(void 0);if(b&&b.has(m))return b.get(m);var N={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in m)if(S!=="default"&&Object.prototype.hasOwnProperty.call(m,S)){var V=D?Object.getOwnPropertyDescriptor(m,S):null;V&&(V.get||V.set)?Object.defineProperty(N,S,V):N[S]=m[S]}return N.default=m,b&&b.set(m,N),N}(k());function u(m){if(typeof WeakMap!="function")return null;var _=new WeakMap,b=new WeakMap;return(u=function(N){return N?b:_})(m)}function f(m,_,b){var N=_[0],D=_[1],S=_[2],V=_[3],I=_[4],O=_[5],M=_[6],B=_[7],X=_[8],ee=b[0],ue=b[1],le=b[2],ne=b[3],pe=b[4],we=b[5],Pe=b[6],Ye=b[7],je=b[8];return m[0]=ee*N+ue*V+le*M,m[1]=ee*D+ue*I+le*B,m[2]=ee*S+ue*O+le*X,m[3]=ne*N+pe*V+we*M,m[4]=ne*D+pe*I+we*B,m[5]=ne*S+pe*O+we*X,m[6]=Pe*N+Ye*V+je*M,m[7]=Pe*D+Ye*I+je*B,m[8]=Pe*S+Ye*O+je*X,m}function y(m,_,b){return m[0]=_[0]-b[0],m[1]=_[1]-b[1],m[2]=_[2]-b[2],m[3]=_[3]-b[3],m[4]=_[4]-b[4],m[5]=_[5]-b[5],m[6]=_[6]-b[6],m[7]=_[7]-b[7],m[8]=_[8]-b[8],m}return ye.mul=f,ye.sub=y,ye}var _e,me={};function Re(){if(_e)return me;function d(S){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},d(S)}_e=1,Object.defineProperty(me,"__esModule",{value:!0}),me.create=function(){var S=new i.ARRAY_TYPE(16);return i.ARRAY_TYPE!=Float32Array&&(S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[11]=0,S[12]=0,S[13]=0,S[14]=0),S[0]=1,S[5]=1,S[10]=1,S[15]=1,S},me.clone=function(S){var V=new i.ARRAY_TYPE(16);return V[0]=S[0],V[1]=S[1],V[2]=S[2],V[3]=S[3],V[4]=S[4],V[5]=S[5],V[6]=S[6],V[7]=S[7],V[8]=S[8],V[9]=S[9],V[10]=S[10],V[11]=S[11],V[12]=S[12],V[13]=S[13],V[14]=S[14],V[15]=S[15],V},me.copy=function(S,V){return S[0]=V[0],S[1]=V[1],S[2]=V[2],S[3]=V[3],S[4]=V[4],S[5]=V[5],S[6]=V[6],S[7]=V[7],S[8]=V[8],S[9]=V[9],S[10]=V[10],S[11]=V[11],S[12]=V[12],S[13]=V[13],S[14]=V[14],S[15]=V[15],S},me.fromValues=function(S,V,I,O,M,B,X,ee,ue,le,ne,pe,we,Pe,Ye,je){var qe=new i.ARRAY_TYPE(16);return qe[0]=S,qe[1]=V,qe[2]=I,qe[3]=O,qe[4]=M,qe[5]=B,qe[6]=X,qe[7]=ee,qe[8]=ue,qe[9]=le,qe[10]=ne,qe[11]=pe,qe[12]=we,qe[13]=Pe,qe[14]=Ye,qe[15]=je,qe},me.set=function(S,V,I,O,M,B,X,ee,ue,le,ne,pe,we,Pe,Ye,je,qe){return S[0]=V,S[1]=I,S[2]=O,S[3]=M,S[4]=B,S[5]=X,S[6]=ee,S[7]=ue,S[8]=le,S[9]=ne,S[10]=pe,S[11]=we,S[12]=Pe,S[13]=Ye,S[14]=je,S[15]=qe,S},me.identity=f,me.transpose=function(S,V){if(S===V){var I=V[1],O=V[2],M=V[3],B=V[6],X=V[7],ee=V[11];S[1]=V[4],S[2]=V[8],S[3]=V[12],S[4]=I,S[6]=V[9],S[7]=V[13],S[8]=O,S[9]=B,S[11]=V[14],S[12]=M,S[13]=X,S[14]=ee}else S[0]=V[0],S[1]=V[4],S[2]=V[8],S[3]=V[12],S[4]=V[1],S[5]=V[5],S[6]=V[9],S[7]=V[13],S[8]=V[2],S[9]=V[6],S[10]=V[10],S[11]=V[14],S[12]=V[3],S[13]=V[7],S[14]=V[11],S[15]=V[15];return S},me.invert=function(S,V){var I=V[0],O=V[1],M=V[2],B=V[3],X=V[4],ee=V[5],ue=V[6],le=V[7],ne=V[8],pe=V[9],we=V[10],Pe=V[11],Ye=V[12],je=V[13],qe=V[14],mt=V[15],Xe=I*ee-O*X,At=I*ue-M*X,xt=I*le-B*X,St=O*ue-M*ee,Ot=O*le-B*ee,Nt=M*le-B*ue,kt=ne*je-pe*Ye,Mt=ne*qe-we*Ye,Zt=ne*mt-Pe*Ye,ga=pe*qe-we*je,ma=pe*mt-Pe*je,Ya=we*mt-Pe*qe,Pa=Xe*Ya-At*ma+xt*ga+St*Zt-Ot*Mt+Nt*kt;return Pa?(S[0]=(ee*Ya-ue*ma+le*ga)*(Pa=1/Pa),S[1]=(M*ma-O*Ya-B*ga)*Pa,S[2]=(je*Nt-qe*Ot+mt*St)*Pa,S[3]=(we*Ot-pe*Nt-Pe*St)*Pa,S[4]=(ue*Zt-X*Ya-le*Mt)*Pa,S[5]=(I*Ya-M*Zt+B*Mt)*Pa,S[6]=(qe*xt-Ye*Nt-mt*At)*Pa,S[7]=(ne*Nt-we*xt+Pe*At)*Pa,S[8]=(X*ma-ee*Zt+le*kt)*Pa,S[9]=(O*Zt-I*ma-B*kt)*Pa,S[10]=(Ye*Ot-je*xt+mt*Xe)*Pa,S[11]=(pe*xt-ne*Ot-Pe*Xe)*Pa,S[12]=(ee*Mt-X*ga-ue*kt)*Pa,S[13]=(I*ga-O*Mt+M*kt)*Pa,S[14]=(je*At-Ye*St-qe*Xe)*Pa,S[15]=(ne*St-pe*At+we*Xe)*Pa,S):null},me.adjoint=function(S,V){var I=V[0],O=V[1],M=V[2],B=V[3],X=V[4],ee=V[5],ue=V[6],le=V[7],ne=V[8],pe=V[9],we=V[10],Pe=V[11],Ye=V[12],je=V[13],qe=V[14],mt=V[15];return S[0]=ee*(we*mt-Pe*qe)-pe*(ue*mt-le*qe)+je*(ue*Pe-le*we),S[1]=-(O*(we*mt-Pe*qe)-pe*(M*mt-B*qe)+je*(M*Pe-B*we)),S[2]=O*(ue*mt-le*qe)-ee*(M*mt-B*qe)+je*(M*le-B*ue),S[3]=-(O*(ue*Pe-le*we)-ee*(M*Pe-B*we)+pe*(M*le-B*ue)),S[4]=-(X*(we*mt-Pe*qe)-ne*(ue*mt-le*qe)+Ye*(ue*Pe-le*we)),S[5]=I*(we*mt-Pe*qe)-ne*(M*mt-B*qe)+Ye*(M*Pe-B*we),S[6]=-(I*(ue*mt-le*qe)-X*(M*mt-B*qe)+Ye*(M*le-B*ue)),S[7]=I*(ue*Pe-le*we)-X*(M*Pe-B*we)+ne*(M*le-B*ue),S[8]=X*(pe*mt-Pe*je)-ne*(ee*mt-le*je)+Ye*(ee*Pe-le*pe),S[9]=-(I*(pe*mt-Pe*je)-ne*(O*mt-B*je)+Ye*(O*Pe-B*pe)),S[10]=I*(ee*mt-le*je)-X*(O*mt-B*je)+Ye*(O*le-B*ee),S[11]=-(I*(ee*Pe-le*pe)-X*(O*Pe-B*pe)+ne*(O*le-B*ee)),S[12]=-(X*(pe*qe-we*je)-ne*(ee*qe-ue*je)+Ye*(ee*we-ue*pe)),S[13]=I*(pe*qe-we*je)-ne*(O*qe-M*je)+Ye*(O*we-M*pe),S[14]=-(I*(ee*qe-ue*je)-X*(O*qe-M*je)+Ye*(O*ue-M*ee)),S[15]=I*(ee*we-ue*pe)-X*(O*we-M*pe)+ne*(O*ue-M*ee),S},me.determinant=function(S){var V=S[0],I=S[1],O=S[2],M=S[3],B=S[4],X=S[5],ee=S[6],ue=S[7],le=S[8],ne=S[9],pe=S[10],we=S[11],Pe=S[12],Ye=S[13],je=S[14],qe=S[15];return(V*X-I*B)*(pe*qe-we*je)-(V*ee-O*B)*(ne*qe-we*Ye)+(V*ue-M*B)*(ne*je-pe*Ye)+(I*ee-O*X)*(le*qe-we*Pe)-(I*ue-M*X)*(le*je-pe*Pe)+(O*ue-M*ee)*(le*Ye-ne*Pe)},me.multiply=y,me.translate=function(S,V,I){var O,M,B,X,ee,ue,le,ne,pe,we,Pe,Ye,je=I[0],qe=I[1],mt=I[2];return V===S?(S[12]=V[0]*je+V[4]*qe+V[8]*mt+V[12],S[13]=V[1]*je+V[5]*qe+V[9]*mt+V[13],S[14]=V[2]*je+V[6]*qe+V[10]*mt+V[14],S[15]=V[3]*je+V[7]*qe+V[11]*mt+V[15]):(M=V[1],B=V[2],X=V[3],ee=V[4],ue=V[5],le=V[6],ne=V[7],pe=V[8],we=V[9],Pe=V[10],Ye=V[11],S[0]=O=V[0],S[1]=M,S[2]=B,S[3]=X,S[4]=ee,S[5]=ue,S[6]=le,S[7]=ne,S[8]=pe,S[9]=we,S[10]=Pe,S[11]=Ye,S[12]=O*je+ee*qe+pe*mt+V[12],S[13]=M*je+ue*qe+we*mt+V[13],S[14]=B*je+le*qe+Pe*mt+V[14],S[15]=X*je+ne*qe+Ye*mt+V[15]),S},me.scale=function(S,V,I){var O=I[0],M=I[1],B=I[2];return S[0]=V[0]*O,S[1]=V[1]*O,S[2]=V[2]*O,S[3]=V[3]*O,S[4]=V[4]*M,S[5]=V[5]*M,S[6]=V[6]*M,S[7]=V[7]*M,S[8]=V[8]*B,S[9]=V[9]*B,S[10]=V[10]*B,S[11]=V[11]*B,S[12]=V[12],S[13]=V[13],S[14]=V[14],S[15]=V[15],S},me.rotate=function(S,V,I,O){var M,B,X,ee,ue,le,ne,pe,we,Pe,Ye,je,qe,mt,Xe,At,xt,St,Ot,Nt,kt,Mt,Zt,ga,ma=O[0],Ya=O[1],Pa=O[2],Oa=Math.hypot(ma,Ya,Pa);return Oa<i.EPSILON?null:(ma*=Oa=1/Oa,Ya*=Oa,Pa*=Oa,M=Math.sin(I),B=Math.cos(I),ue=V[1],le=V[2],ne=V[3],we=V[5],Pe=V[6],Ye=V[7],qe=V[9],mt=V[10],Xe=V[11],At=ma*ma*(X=1-B)+B,Ot=ma*Ya*X-Pa*M,Nt=Ya*Ya*X+B,kt=Pa*Ya*X+ma*M,Mt=ma*Pa*X+Ya*M,Zt=Ya*Pa*X-ma*M,ga=Pa*Pa*X+B,S[0]=(ee=V[0])*At+(pe=V[4])*(xt=Ya*ma*X+Pa*M)+(je=V[8])*(St=Pa*ma*X-Ya*M),S[1]=ue*At+we*xt+qe*St,S[2]=le*At+Pe*xt+mt*St,S[3]=ne*At+Ye*xt+Xe*St,S[4]=ee*Ot+pe*Nt+je*kt,S[5]=ue*Ot+we*Nt+qe*kt,S[6]=le*Ot+Pe*Nt+mt*kt,S[7]=ne*Ot+Ye*Nt+Xe*kt,S[8]=ee*Mt+pe*Zt+je*ga,S[9]=ue*Mt+we*Zt+qe*ga,S[10]=le*Mt+Pe*Zt+mt*ga,S[11]=ne*Mt+Ye*Zt+Xe*ga,V!==S&&(S[12]=V[12],S[13]=V[13],S[14]=V[14],S[15]=V[15]),S)},me.rotateX=function(S,V,I){var O=Math.sin(I),M=Math.cos(I),B=V[4],X=V[5],ee=V[6],ue=V[7],le=V[8],ne=V[9],pe=V[10],we=V[11];return V!==S&&(S[0]=V[0],S[1]=V[1],S[2]=V[2],S[3]=V[3],S[12]=V[12],S[13]=V[13],S[14]=V[14],S[15]=V[15]),S[4]=B*M+le*O,S[5]=X*M+ne*O,S[6]=ee*M+pe*O,S[7]=ue*M+we*O,S[8]=le*M-B*O,S[9]=ne*M-X*O,S[10]=pe*M-ee*O,S[11]=we*M-ue*O,S},me.rotateY=function(S,V,I){var O=Math.sin(I),M=Math.cos(I),B=V[0],X=V[1],ee=V[2],ue=V[3],le=V[8],ne=V[9],pe=V[10],we=V[11];return V!==S&&(S[4]=V[4],S[5]=V[5],S[6]=V[6],S[7]=V[7],S[12]=V[12],S[13]=V[13],S[14]=V[14],S[15]=V[15]),S[0]=B*M-le*O,S[1]=X*M-ne*O,S[2]=ee*M-pe*O,S[3]=ue*M-we*O,S[8]=B*O+le*M,S[9]=X*O+ne*M,S[10]=ee*O+pe*M,S[11]=ue*O+we*M,S},me.rotateZ=function(S,V,I){var O=Math.sin(I),M=Math.cos(I),B=V[0],X=V[1],ee=V[2],ue=V[3],le=V[4],ne=V[5],pe=V[6],we=V[7];return V!==S&&(S[8]=V[8],S[9]=V[9],S[10]=V[10],S[11]=V[11],S[12]=V[12],S[13]=V[13],S[14]=V[14],S[15]=V[15]),S[0]=B*M+le*O,S[1]=X*M+ne*O,S[2]=ee*M+pe*O,S[3]=ue*M+we*O,S[4]=le*M-B*O,S[5]=ne*M-X*O,S[6]=pe*M-ee*O,S[7]=we*M-ue*O,S},me.fromTranslation=function(S,V){return S[0]=1,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=1,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[10]=1,S[11]=0,S[12]=V[0],S[13]=V[1],S[14]=V[2],S[15]=1,S},me.fromScaling=function(S,V){return S[0]=V[0],S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=V[1],S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[10]=V[2],S[11]=0,S[12]=0,S[13]=0,S[14]=0,S[15]=1,S},me.fromRotation=function(S,V,I){var O,M,B,X=I[0],ee=I[1],ue=I[2],le=Math.hypot(X,ee,ue);return le<i.EPSILON?null:(X*=le=1/le,ee*=le,ue*=le,O=Math.sin(V),M=Math.cos(V),S[0]=X*X*(B=1-M)+M,S[1]=ee*X*B+ue*O,S[2]=ue*X*B-ee*O,S[3]=0,S[4]=X*ee*B-ue*O,S[5]=ee*ee*B+M,S[6]=ue*ee*B+X*O,S[7]=0,S[8]=X*ue*B+ee*O,S[9]=ee*ue*B-X*O,S[10]=ue*ue*B+M,S[11]=0,S[12]=0,S[13]=0,S[14]=0,S[15]=1,S)},me.fromXRotation=function(S,V){var I=Math.sin(V),O=Math.cos(V);return S[0]=1,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=O,S[6]=I,S[7]=0,S[8]=0,S[9]=-I,S[10]=O,S[11]=0,S[12]=0,S[13]=0,S[14]=0,S[15]=1,S},me.fromYRotation=function(S,V){var I=Math.sin(V),O=Math.cos(V);return S[0]=O,S[1]=0,S[2]=-I,S[3]=0,S[4]=0,S[5]=1,S[6]=0,S[7]=0,S[8]=I,S[9]=0,S[10]=O,S[11]=0,S[12]=0,S[13]=0,S[14]=0,S[15]=1,S},me.fromZRotation=function(S,V){var I=Math.sin(V),O=Math.cos(V);return S[0]=O,S[1]=I,S[2]=0,S[3]=0,S[4]=-I,S[5]=O,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[10]=1,S[11]=0,S[12]=0,S[13]=0,S[14]=0,S[15]=1,S},me.fromRotationTranslation=m,me.fromQuat2=function(S,V){var I=new i.ARRAY_TYPE(3),O=-V[0],M=-V[1],B=-V[2],X=V[3],ee=V[4],ue=V[5],le=V[6],ne=V[7],pe=O*O+M*M+B*B+X*X;return pe>0?(I[0]=2*(ee*X+ne*O+ue*B-le*M)/pe,I[1]=2*(ue*X+ne*M+le*O-ee*B)/pe,I[2]=2*(le*X+ne*B+ee*M-ue*O)/pe):(I[0]=2*(ee*X+ne*O+ue*B-le*M),I[1]=2*(ue*X+ne*M+le*O-ee*B),I[2]=2*(le*X+ne*B+ee*M-ue*O)),m(S,V,I),S},me.getTranslation=function(S,V){return S[0]=V[12],S[1]=V[13],S[2]=V[14],S},me.getScaling=_,me.getRotation=function(S,V){var I=new i.ARRAY_TYPE(3);_(I,V);var O=1/I[0],M=1/I[1],B=1/I[2],X=V[0]*O,ee=V[1]*M,ue=V[2]*B,le=V[4]*O,ne=V[5]*M,pe=V[6]*B,we=V[8]*O,Pe=V[9]*M,Ye=V[10]*B,je=X+ne+Ye,qe=0;return je>0?(qe=2*Math.sqrt(je+1),S[3]=.25*qe,S[0]=(pe-Pe)/qe,S[1]=(we-ue)/qe,S[2]=(ee-le)/qe):X>ne&&X>Ye?(qe=2*Math.sqrt(1+X-ne-Ye),S[3]=(pe-Pe)/qe,S[0]=.25*qe,S[1]=(ee+le)/qe,S[2]=(we+ue)/qe):ne>Ye?(qe=2*Math.sqrt(1+ne-X-Ye),S[3]=(we-ue)/qe,S[0]=(ee+le)/qe,S[1]=.25*qe,S[2]=(pe+Pe)/qe):(qe=2*Math.sqrt(1+Ye-X-ne),S[3]=(ee-le)/qe,S[0]=(we+ue)/qe,S[1]=(pe+Pe)/qe,S[2]=.25*qe),S},me.fromRotationTranslationScale=function(S,V,I,O){var M=V[0],B=V[1],X=V[2],ee=V[3],ue=M+M,le=B+B,ne=X+X,pe=M*ue,we=M*le,Pe=M*ne,Ye=B*le,je=B*ne,qe=X*ne,mt=ee*ue,Xe=ee*le,At=ee*ne,xt=O[0],St=O[1],Ot=O[2];return S[0]=(1-(Ye+qe))*xt,S[1]=(we+At)*xt,S[2]=(Pe-Xe)*xt,S[3]=0,S[4]=(we-At)*St,S[5]=(1-(pe+qe))*St,S[6]=(je+mt)*St,S[7]=0,S[8]=(Pe+Xe)*Ot,S[9]=(je-mt)*Ot,S[10]=(1-(pe+Ye))*Ot,S[11]=0,S[12]=I[0],S[13]=I[1],S[14]=I[2],S[15]=1,S},me.fromRotationTranslationScaleOrigin=function(S,V,I,O,M){var B=V[0],X=V[1],ee=V[2],ue=V[3],le=B+B,ne=X+X,pe=ee+ee,we=B*le,Pe=B*ne,Ye=B*pe,je=X*ne,qe=X*pe,mt=ee*pe,Xe=ue*le,At=ue*ne,xt=ue*pe,St=O[0],Ot=O[1],Nt=O[2],kt=M[0],Mt=M[1],Zt=M[2],ga=(1-(je+mt))*St,ma=(Pe+xt)*St,Ya=(Ye-At)*St,Pa=(Pe-xt)*Ot,Oa=(1-(we+mt))*Ot,va=(qe+Xe)*Ot,Ar=(Ye+At)*Nt,$a=(qe-Xe)*Nt,lr=(1-(we+je))*Nt;return S[0]=ga,S[1]=ma,S[2]=Ya,S[3]=0,S[4]=Pa,S[5]=Oa,S[6]=va,S[7]=0,S[8]=Ar,S[9]=$a,S[10]=lr,S[11]=0,S[12]=I[0]+kt-(ga*kt+Pa*Mt+Ar*Zt),S[13]=I[1]+Mt-(ma*kt+Oa*Mt+$a*Zt),S[14]=I[2]+Zt-(Ya*kt+va*Mt+lr*Zt),S[15]=1,S},me.fromQuat=function(S,V){var I=V[0],O=V[1],M=V[2],B=V[3],X=I+I,ee=O+O,ue=M+M,le=I*X,ne=O*X,pe=O*ee,we=M*X,Pe=M*ee,Ye=M*ue,je=B*X,qe=B*ee,mt=B*ue;return S[0]=1-pe-Ye,S[1]=ne+mt,S[2]=we-qe,S[3]=0,S[4]=ne-mt,S[5]=1-le-Ye,S[6]=Pe+je,S[7]=0,S[8]=we+qe,S[9]=Pe-je,S[10]=1-le-pe,S[11]=0,S[12]=0,S[13]=0,S[14]=0,S[15]=1,S},me.frustum=function(S,V,I,O,M,B,X){var ee=1/(I-V),ue=1/(M-O),le=1/(B-X);return S[0]=2*B*ee,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=2*B*ue,S[6]=0,S[7]=0,S[8]=(I+V)*ee,S[9]=(M+O)*ue,S[10]=(X+B)*le,S[11]=-1,S[12]=0,S[13]=0,S[14]=X*B*2*le,S[15]=0,S},me.perspectiveNO=b,me.perspectiveZO=function(S,V,I,O,M){var B,X=1/Math.tan(V/2);return S[0]=X/I,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=X,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[11]=-1,S[12]=0,S[13]=0,S[15]=0,M!=null&&M!==1/0?(S[10]=M*(B=1/(O-M)),S[14]=M*O*B):(S[10]=-1,S[14]=-O),S},me.perspectiveFromFieldOfView=function(S,V,I,O){var M=Math.tan(V.upDegrees*Math.PI/180),B=Math.tan(V.downDegrees*Math.PI/180),X=Math.tan(V.leftDegrees*Math.PI/180),ee=Math.tan(V.rightDegrees*Math.PI/180),ue=2/(X+ee),le=2/(M+B);return S[0]=ue,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=le,S[6]=0,S[7]=0,S[8]=-(X-ee)*ue*.5,S[9]=(M-B)*le*.5,S[10]=O/(I-O),S[11]=-1,S[12]=0,S[13]=0,S[14]=O*I/(I-O),S[15]=0,S},me.orthoNO=N,me.orthoZO=function(S,V,I,O,M,B,X){var ee=1/(V-I),ue=1/(O-M),le=1/(B-X);return S[0]=-2*ee,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=-2*ue,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[10]=le,S[11]=0,S[12]=(V+I)*ee,S[13]=(M+O)*ue,S[14]=B*le,S[15]=1,S},me.lookAt=function(S,V,I,O){var M,B,X,ee,ue,le,ne,pe,we,Pe,Ye=V[0],je=V[1],qe=V[2],mt=O[0],Xe=O[1],At=O[2],xt=I[0],St=I[1],Ot=I[2];return Math.abs(Ye-xt)<i.EPSILON&&Math.abs(je-St)<i.EPSILON&&Math.abs(qe-Ot)<i.EPSILON?f(S):(ne=Ye-xt,pe=je-St,we=qe-Ot,M=Xe*(we*=Pe=1/Math.hypot(ne,pe,we))-At*(pe*=Pe),B=At*(ne*=Pe)-mt*we,X=mt*pe-Xe*ne,(Pe=Math.hypot(M,B,X))?(M*=Pe=1/Pe,B*=Pe,X*=Pe):(M=0,B=0,X=0),ee=pe*X-we*B,ue=we*M-ne*X,le=ne*B-pe*M,(Pe=Math.hypot(ee,ue,le))?(ee*=Pe=1/Pe,ue*=Pe,le*=Pe):(ee=0,ue=0,le=0),S[0]=M,S[1]=ee,S[2]=ne,S[3]=0,S[4]=B,S[5]=ue,S[6]=pe,S[7]=0,S[8]=X,S[9]=le,S[10]=we,S[11]=0,S[12]=-(M*Ye+B*je+X*qe),S[13]=-(ee*Ye+ue*je+le*qe),S[14]=-(ne*Ye+pe*je+we*qe),S[15]=1,S)},me.targetTo=function(S,V,I,O){var M=V[0],B=V[1],X=V[2],ee=O[0],ue=O[1],le=O[2],ne=M-I[0],pe=B-I[1],we=X-I[2],Pe=ne*ne+pe*pe+we*we;Pe>0&&(ne*=Pe=1/Math.sqrt(Pe),pe*=Pe,we*=Pe);var Ye=ue*we-le*pe,je=le*ne-ee*we,qe=ee*pe-ue*ne;return(Pe=Ye*Ye+je*je+qe*qe)>0&&(Ye*=Pe=1/Math.sqrt(Pe),je*=Pe,qe*=Pe),S[0]=Ye,S[1]=je,S[2]=qe,S[3]=0,S[4]=pe*qe-we*je,S[5]=we*Ye-ne*qe,S[6]=ne*je-pe*Ye,S[7]=0,S[8]=ne,S[9]=pe,S[10]=we,S[11]=0,S[12]=M,S[13]=B,S[14]=X,S[15]=1,S},me.str=function(S){return"mat4("+S[0]+", "+S[1]+", "+S[2]+", "+S[3]+", "+S[4]+", "+S[5]+", "+S[6]+", "+S[7]+", "+S[8]+", "+S[9]+", "+S[10]+", "+S[11]+", "+S[12]+", "+S[13]+", "+S[14]+", "+S[15]+")"},me.frob=function(S){return Math.hypot(S[0],S[1],S[2],S[3],S[4],S[5],S[6],S[7],S[8],S[9],S[10],S[11],S[12],S[13],S[14],S[15])},me.add=function(S,V,I){return S[0]=V[0]+I[0],S[1]=V[1]+I[1],S[2]=V[2]+I[2],S[3]=V[3]+I[3],S[4]=V[4]+I[4],S[5]=V[5]+I[5],S[6]=V[6]+I[6],S[7]=V[7]+I[7],S[8]=V[8]+I[8],S[9]=V[9]+I[9],S[10]=V[10]+I[10],S[11]=V[11]+I[11],S[12]=V[12]+I[12],S[13]=V[13]+I[13],S[14]=V[14]+I[14],S[15]=V[15]+I[15],S},me.subtract=D,me.multiplyScalar=function(S,V,I){return S[0]=V[0]*I,S[1]=V[1]*I,S[2]=V[2]*I,S[3]=V[3]*I,S[4]=V[4]*I,S[5]=V[5]*I,S[6]=V[6]*I,S[7]=V[7]*I,S[8]=V[8]*I,S[9]=V[9]*I,S[10]=V[10]*I,S[11]=V[11]*I,S[12]=V[12]*I,S[13]=V[13]*I,S[14]=V[14]*I,S[15]=V[15]*I,S},me.multiplyScalarAndAdd=function(S,V,I,O){return S[0]=V[0]+I[0]*O,S[1]=V[1]+I[1]*O,S[2]=V[2]+I[2]*O,S[3]=V[3]+I[3]*O,S[4]=V[4]+I[4]*O,S[5]=V[5]+I[5]*O,S[6]=V[6]+I[6]*O,S[7]=V[7]+I[7]*O,S[8]=V[8]+I[8]*O,S[9]=V[9]+I[9]*O,S[10]=V[10]+I[10]*O,S[11]=V[11]+I[11]*O,S[12]=V[12]+I[12]*O,S[13]=V[13]+I[13]*O,S[14]=V[14]+I[14]*O,S[15]=V[15]+I[15]*O,S},me.exactEquals=function(S,V){return S[0]===V[0]&&S[1]===V[1]&&S[2]===V[2]&&S[3]===V[3]&&S[4]===V[4]&&S[5]===V[5]&&S[6]===V[6]&&S[7]===V[7]&&S[8]===V[8]&&S[9]===V[9]&&S[10]===V[10]&&S[11]===V[11]&&S[12]===V[12]&&S[13]===V[13]&&S[14]===V[14]&&S[15]===V[15]},me.equals=function(S,V){var I=S[0],O=S[1],M=S[2],B=S[3],X=S[4],ee=S[5],ue=S[6],le=S[7],ne=S[8],pe=S[9],we=S[10],Pe=S[11],Ye=S[12],je=S[13],qe=S[14],mt=S[15],Xe=V[0],At=V[1],xt=V[2],St=V[3],Ot=V[4],Nt=V[5],kt=V[6],Mt=V[7],Zt=V[8],ga=V[9],ma=V[10],Ya=V[11],Pa=V[12],Oa=V[13],va=V[14],Ar=V[15];return Math.abs(I-Xe)<=i.EPSILON*Math.max(1,Math.abs(I),Math.abs(Xe))&&Math.abs(O-At)<=i.EPSILON*Math.max(1,Math.abs(O),Math.abs(At))&&Math.abs(M-xt)<=i.EPSILON*Math.max(1,Math.abs(M),Math.abs(xt))&&Math.abs(B-St)<=i.EPSILON*Math.max(1,Math.abs(B),Math.abs(St))&&Math.abs(X-Ot)<=i.EPSILON*Math.max(1,Math.abs(X),Math.abs(Ot))&&Math.abs(ee-Nt)<=i.EPSILON*Math.max(1,Math.abs(ee),Math.abs(Nt))&&Math.abs(ue-kt)<=i.EPSILON*Math.max(1,Math.abs(ue),Math.abs(kt))&&Math.abs(le-Mt)<=i.EPSILON*Math.max(1,Math.abs(le),Math.abs(Mt))&&Math.abs(ne-Zt)<=i.EPSILON*Math.max(1,Math.abs(ne),Math.abs(Zt))&&Math.abs(pe-ga)<=i.EPSILON*Math.max(1,Math.abs(pe),Math.abs(ga))&&Math.abs(we-ma)<=i.EPSILON*Math.max(1,Math.abs(we),Math.abs(ma))&&Math.abs(Pe-Ya)<=i.EPSILON*Math.max(1,Math.abs(Pe),Math.abs(Ya))&&Math.abs(Ye-Pa)<=i.EPSILON*Math.max(1,Math.abs(Ye),Math.abs(Pa))&&Math.abs(je-Oa)<=i.EPSILON*Math.max(1,Math.abs(je),Math.abs(Oa))&&Math.abs(qe-va)<=i.EPSILON*Math.max(1,Math.abs(qe),Math.abs(va))&&Math.abs(mt-Ar)<=i.EPSILON*Math.max(1,Math.abs(mt),Math.abs(Ar))},me.sub=me.mul=me.ortho=me.perspective=void 0;var i=function(S,V){if(S&&S.__esModule)return S;if(S===null||d(S)!=="object"&&typeof S!="function")return{default:S};var I=u(void 0);if(I&&I.has(S))return I.get(S);var O={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in S)if(B!=="default"&&Object.prototype.hasOwnProperty.call(S,B)){var X=M?Object.getOwnPropertyDescriptor(S,B):null;X&&(X.get||X.set)?Object.defineProperty(O,B,X):O[B]=S[B]}return O.default=S,I&&I.set(S,O),O}(k());function u(S){if(typeof WeakMap!="function")return null;var V=new WeakMap,I=new WeakMap;return(u=function(O){return O?I:V})(S)}function f(S){return S[0]=1,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=1,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[10]=1,S[11]=0,S[12]=0,S[13]=0,S[14]=0,S[15]=1,S}function y(S,V,I){var O=V[0],M=V[1],B=V[2],X=V[3],ee=V[4],ue=V[5],le=V[6],ne=V[7],pe=V[8],we=V[9],Pe=V[10],Ye=V[11],je=V[12],qe=V[13],mt=V[14],Xe=V[15],At=I[0],xt=I[1],St=I[2],Ot=I[3];return S[0]=At*O+xt*ee+St*pe+Ot*je,S[1]=At*M+xt*ue+St*we+Ot*qe,S[2]=At*B+xt*le+St*Pe+Ot*mt,S[3]=At*X+xt*ne+St*Ye+Ot*Xe,S[4]=(At=I[4])*O+(xt=I[5])*ee+(St=I[6])*pe+(Ot=I[7])*je,S[5]=At*M+xt*ue+St*we+Ot*qe,S[6]=At*B+xt*le+St*Pe+Ot*mt,S[7]=At*X+xt*ne+St*Ye+Ot*Xe,S[8]=(At=I[8])*O+(xt=I[9])*ee+(St=I[10])*pe+(Ot=I[11])*je,S[9]=At*M+xt*ue+St*we+Ot*qe,S[10]=At*B+xt*le+St*Pe+Ot*mt,S[11]=At*X+xt*ne+St*Ye+Ot*Xe,S[12]=(At=I[12])*O+(xt=I[13])*ee+(St=I[14])*pe+(Ot=I[15])*je,S[13]=At*M+xt*ue+St*we+Ot*qe,S[14]=At*B+xt*le+St*Pe+Ot*mt,S[15]=At*X+xt*ne+St*Ye+Ot*Xe,S}function m(S,V,I){var O=V[0],M=V[1],B=V[2],X=V[3],ee=O+O,ue=M+M,le=B+B,ne=O*ee,pe=O*ue,we=O*le,Pe=M*ue,Ye=M*le,je=B*le,qe=X*ee,mt=X*ue,Xe=X*le;return S[0]=1-(Pe+je),S[1]=pe+Xe,S[2]=we-mt,S[3]=0,S[4]=pe-Xe,S[5]=1-(ne+je),S[6]=Ye+qe,S[7]=0,S[8]=we+mt,S[9]=Ye-qe,S[10]=1-(ne+Pe),S[11]=0,S[12]=I[0],S[13]=I[1],S[14]=I[2],S[15]=1,S}function _(S,V){var I=V[4],O=V[5],M=V[6],B=V[8],X=V[9],ee=V[10];return S[0]=Math.hypot(V[0],V[1],V[2]),S[1]=Math.hypot(I,O,M),S[2]=Math.hypot(B,X,ee),S}function b(S,V,I,O,M){var B,X=1/Math.tan(V/2);return S[0]=X/I,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=X,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[11]=-1,S[12]=0,S[13]=0,S[15]=0,M!=null&&M!==1/0?(S[10]=(M+O)*(B=1/(O-M)),S[14]=2*M*O*B):(S[10]=-1,S[14]=-2*O),S}function N(S,V,I,O,M,B,X){var ee=1/(V-I),ue=1/(O-M),le=1/(B-X);return S[0]=-2*ee,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=-2*ue,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[10]=2*le,S[11]=0,S[12]=(V+I)*ee,S[13]=(M+O)*ue,S[14]=(X+B)*le,S[15]=1,S}function D(S,V,I){return S[0]=V[0]-I[0],S[1]=V[1]-I[1],S[2]=V[2]-I[2],S[3]=V[3]-I[3],S[4]=V[4]-I[4],S[5]=V[5]-I[5],S[6]=V[6]-I[6],S[7]=V[7]-I[7],S[8]=V[8]-I[8],S[9]=V[9]-I[9],S[10]=V[10]-I[10],S[11]=V[11]-I[11],S[12]=V[12]-I[12],S[13]=V[13]-I[13],S[14]=V[14]-I[14],S[15]=V[15]-I[15],S}return me.perspective=b,me.ortho=N,me.mul=y,me.sub=D,me}var be,De={},ie={};function ge(){if(be)return ie;function d(M){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},d(M)}be=1,Object.defineProperty(ie,"__esModule",{value:!0}),ie.create=f,ie.clone=function(M){var B=new i.ARRAY_TYPE(3);return B[0]=M[0],B[1]=M[1],B[2]=M[2],B},ie.length=y,ie.fromValues=function(M,B,X){var ee=new i.ARRAY_TYPE(3);return ee[0]=M,ee[1]=B,ee[2]=X,ee},ie.copy=function(M,B){return M[0]=B[0],M[1]=B[1],M[2]=B[2],M},ie.set=function(M,B,X,ee){return M[0]=B,M[1]=X,M[2]=ee,M},ie.add=function(M,B,X){return M[0]=B[0]+X[0],M[1]=B[1]+X[1],M[2]=B[2]+X[2],M},ie.subtract=m,ie.multiply=_,ie.divide=b,ie.ceil=function(M,B){return M[0]=Math.ceil(B[0]),M[1]=Math.ceil(B[1]),M[2]=Math.ceil(B[2]),M},ie.floor=function(M,B){return M[0]=Math.floor(B[0]),M[1]=Math.floor(B[1]),M[2]=Math.floor(B[2]),M},ie.min=function(M,B,X){return M[0]=Math.min(B[0],X[0]),M[1]=Math.min(B[1],X[1]),M[2]=Math.min(B[2],X[2]),M},ie.max=function(M,B,X){return M[0]=Math.max(B[0],X[0]),M[1]=Math.max(B[1],X[1]),M[2]=Math.max(B[2],X[2]),M},ie.round=function(M,B){return M[0]=Math.round(B[0]),M[1]=Math.round(B[1]),M[2]=Math.round(B[2]),M},ie.scale=function(M,B,X){return M[0]=B[0]*X,M[1]=B[1]*X,M[2]=B[2]*X,M},ie.scaleAndAdd=function(M,B,X,ee){return M[0]=B[0]+X[0]*ee,M[1]=B[1]+X[1]*ee,M[2]=B[2]+X[2]*ee,M},ie.distance=N,ie.squaredDistance=D,ie.squaredLength=S,ie.negate=function(M,B){return M[0]=-B[0],M[1]=-B[1],M[2]=-B[2],M},ie.inverse=function(M,B){return M[0]=1/B[0],M[1]=1/B[1],M[2]=1/B[2],M},ie.normalize=function(M,B){var X=B[0],ee=B[1],ue=B[2],le=X*X+ee*ee+ue*ue;return le>0&&(le=1/Math.sqrt(le)),M[0]=B[0]*le,M[1]=B[1]*le,M[2]=B[2]*le,M},ie.dot=V,ie.cross=function(M,B,X){var ee=B[0],ue=B[1],le=B[2],ne=X[0],pe=X[1],we=X[2];return M[0]=ue*we-le*pe,M[1]=le*ne-ee*we,M[2]=ee*pe-ue*ne,M},ie.lerp=function(M,B,X,ee){var ue=B[0],le=B[1],ne=B[2];return M[0]=ue+ee*(X[0]-ue),M[1]=le+ee*(X[1]-le),M[2]=ne+ee*(X[2]-ne),M},ie.hermite=function(M,B,X,ee,ue,le){var ne=le*le,pe=ne*(2*le-3)+1,we=ne*(le-2)+le,Pe=ne*(le-1),Ye=ne*(3-2*le);return M[0]=B[0]*pe+X[0]*we+ee[0]*Pe+ue[0]*Ye,M[1]=B[1]*pe+X[1]*we+ee[1]*Pe+ue[1]*Ye,M[2]=B[2]*pe+X[2]*we+ee[2]*Pe+ue[2]*Ye,M},ie.bezier=function(M,B,X,ee,ue,le){var ne=1-le,pe=ne*ne,we=le*le,Pe=pe*ne,Ye=3*le*pe,je=3*we*ne,qe=we*le;return M[0]=B[0]*Pe+X[0]*Ye+ee[0]*je+ue[0]*qe,M[1]=B[1]*Pe+X[1]*Ye+ee[1]*je+ue[1]*qe,M[2]=B[2]*Pe+X[2]*Ye+ee[2]*je+ue[2]*qe,M},ie.random=function(M,B){B=B||1;var X=2*i.RANDOM()*Math.PI,ee=2*i.RANDOM()-1,ue=Math.sqrt(1-ee*ee)*B;return M[0]=Math.cos(X)*ue,M[1]=Math.sin(X)*ue,M[2]=ee*B,M},ie.transformMat4=function(M,B,X){var ee=B[0],ue=B[1],le=B[2],ne=X[3]*ee+X[7]*ue+X[11]*le+X[15];return M[0]=(X[0]*ee+X[4]*ue+X[8]*le+X[12])/(ne=ne||1),M[1]=(X[1]*ee+X[5]*ue+X[9]*le+X[13])/ne,M[2]=(X[2]*ee+X[6]*ue+X[10]*le+X[14])/ne,M},ie.transformMat3=function(M,B,X){var ee=B[0],ue=B[1],le=B[2];return M[0]=ee*X[0]+ue*X[3]+le*X[6],M[1]=ee*X[1]+ue*X[4]+le*X[7],M[2]=ee*X[2]+ue*X[5]+le*X[8],M},ie.transformQuat=function(M,B,X){var ee=X[0],ue=X[1],le=X[2],ne=B[0],pe=B[1],we=B[2],Pe=ue*we-le*pe,Ye=le*ne-ee*we,je=ee*pe-ue*ne,qe=ue*je-le*Ye,mt=le*Pe-ee*je,Xe=ee*Ye-ue*Pe,At=2*X[3];return Ye*=At,je*=At,mt*=2,Xe*=2,M[0]=ne+(Pe*=At)+(qe*=2),M[1]=pe+Ye+mt,M[2]=we+je+Xe,M},ie.rotateX=function(M,B,X,ee){var ue=[],le=[];return ue[0]=B[0]-X[0],ue[1]=B[1]-X[1],ue[2]=B[2]-X[2],le[0]=ue[0],le[1]=ue[1]*Math.cos(ee)-ue[2]*Math.sin(ee),le[2]=ue[1]*Math.sin(ee)+ue[2]*Math.cos(ee),M[0]=le[0]+X[0],M[1]=le[1]+X[1],M[2]=le[2]+X[2],M},ie.rotateY=function(M,B,X,ee){var ue=[],le=[];return ue[0]=B[0]-X[0],ue[1]=B[1]-X[1],ue[2]=B[2]-X[2],le[0]=ue[2]*Math.sin(ee)+ue[0]*Math.cos(ee),le[1]=ue[1],le[2]=ue[2]*Math.cos(ee)-ue[0]*Math.sin(ee),M[0]=le[0]+X[0],M[1]=le[1]+X[1],M[2]=le[2]+X[2],M},ie.rotateZ=function(M,B,X,ee){var ue=[],le=[];return ue[0]=B[0]-X[0],ue[1]=B[1]-X[1],ue[2]=B[2]-X[2],le[0]=ue[0]*Math.cos(ee)-ue[1]*Math.sin(ee),le[1]=ue[0]*Math.sin(ee)+ue[1]*Math.cos(ee),le[2]=ue[2],M[0]=le[0]+X[0],M[1]=le[1]+X[1],M[2]=le[2]+X[2],M},ie.angle=function(M,B){var X=M[0],ee=M[1],ue=M[2],le=B[0],ne=B[1],pe=B[2],we=Math.sqrt(X*X+ee*ee+ue*ue)*Math.sqrt(le*le+ne*ne+pe*pe),Pe=we&&V(M,B)/we;return Math.acos(Math.min(Math.max(Pe,-1),1))},ie.zero=function(M){return M[0]=0,M[1]=0,M[2]=0,M},ie.str=function(M){return"vec3("+M[0]+", "+M[1]+", "+M[2]+")"},ie.exactEquals=function(M,B){return M[0]===B[0]&&M[1]===B[1]&&M[2]===B[2]},ie.equals=function(M,B){var X=M[0],ee=M[1],ue=M[2],le=B[0],ne=B[1],pe=B[2];return Math.abs(X-le)<=i.EPSILON*Math.max(1,Math.abs(X),Math.abs(le))&&Math.abs(ee-ne)<=i.EPSILON*Math.max(1,Math.abs(ee),Math.abs(ne))&&Math.abs(ue-pe)<=i.EPSILON*Math.max(1,Math.abs(ue),Math.abs(pe))},ie.forEach=ie.sqrLen=ie.len=ie.sqrDist=ie.dist=ie.div=ie.mul=ie.sub=void 0;var i=function(M,B){if(M&&M.__esModule)return M;if(M===null||d(M)!=="object"&&typeof M!="function")return{default:M};var X=u(void 0);if(X&&X.has(M))return X.get(M);var ee={},ue=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var le in M)if(le!=="default"&&Object.prototype.hasOwnProperty.call(M,le)){var ne=ue?Object.getOwnPropertyDescriptor(M,le):null;ne&&(ne.get||ne.set)?Object.defineProperty(ee,le,ne):ee[le]=M[le]}return ee.default=M,X&&X.set(M,ee),ee}(k());function u(M){if(typeof WeakMap!="function")return null;var B=new WeakMap,X=new WeakMap;return(u=function(ee){return ee?X:B})(M)}function f(){var M=new i.ARRAY_TYPE(3);return i.ARRAY_TYPE!=Float32Array&&(M[0]=0,M[1]=0,M[2]=0),M}function y(M){return Math.hypot(M[0],M[1],M[2])}function m(M,B,X){return M[0]=B[0]-X[0],M[1]=B[1]-X[1],M[2]=B[2]-X[2],M}function _(M,B,X){return M[0]=B[0]*X[0],M[1]=B[1]*X[1],M[2]=B[2]*X[2],M}function b(M,B,X){return M[0]=B[0]/X[0],M[1]=B[1]/X[1],M[2]=B[2]/X[2],M}function N(M,B){return Math.hypot(B[0]-M[0],B[1]-M[1],B[2]-M[2])}function D(M,B){var X=B[0]-M[0],ee=B[1]-M[1],ue=B[2]-M[2];return X*X+ee*ee+ue*ue}function S(M){var B=M[0],X=M[1],ee=M[2];return B*B+X*X+ee*ee}function V(M,B){return M[0]*B[0]+M[1]*B[1]+M[2]*B[2]}ie.sub=m,ie.mul=_,ie.div=b,ie.dist=N,ie.sqrDist=D,ie.len=y,ie.sqrLen=S;var I,O=(I=f(),function(M,B,X,ee,ue,le){var ne,pe;for(B||(B=3),X||(X=0),pe=ee?Math.min(ee*B+X,M.length):M.length,ne=X;ne<pe;ne+=B)I[0]=M[ne],I[1]=M[ne+1],I[2]=M[ne+2],ue(I,I,le),M[ne]=I[0],M[ne+1]=I[1],M[ne+2]=I[2];return M});return ie.forEach=O,ie}var Me,ze,Le={};function Ie(){if(Me)return Le;function d(O){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},d(O)}Me=1,Object.defineProperty(Le,"__esModule",{value:!0}),Le.create=f,Le.clone=function(O){var M=new i.ARRAY_TYPE(4);return M[0]=O[0],M[1]=O[1],M[2]=O[2],M[3]=O[3],M},Le.fromValues=function(O,M,B,X){var ee=new i.ARRAY_TYPE(4);return ee[0]=O,ee[1]=M,ee[2]=B,ee[3]=X,ee},Le.copy=function(O,M){return O[0]=M[0],O[1]=M[1],O[2]=M[2],O[3]=M[3],O},Le.set=function(O,M,B,X,ee){return O[0]=M,O[1]=B,O[2]=X,O[3]=ee,O},Le.add=function(O,M,B){return O[0]=M[0]+B[0],O[1]=M[1]+B[1],O[2]=M[2]+B[2],O[3]=M[3]+B[3],O},Le.subtract=y,Le.multiply=m,Le.divide=_,Le.ceil=function(O,M){return O[0]=Math.ceil(M[0]),O[1]=Math.ceil(M[1]),O[2]=Math.ceil(M[2]),O[3]=Math.ceil(M[3]),O},Le.floor=function(O,M){return O[0]=Math.floor(M[0]),O[1]=Math.floor(M[1]),O[2]=Math.floor(M[2]),O[3]=Math.floor(M[3]),O},Le.min=function(O,M,B){return O[0]=Math.min(M[0],B[0]),O[1]=Math.min(M[1],B[1]),O[2]=Math.min(M[2],B[2]),O[3]=Math.min(M[3],B[3]),O},Le.max=function(O,M,B){return O[0]=Math.max(M[0],B[0]),O[1]=Math.max(M[1],B[1]),O[2]=Math.max(M[2],B[2]),O[3]=Math.max(M[3],B[3]),O},Le.round=function(O,M){return O[0]=Math.round(M[0]),O[1]=Math.round(M[1]),O[2]=Math.round(M[2]),O[3]=Math.round(M[3]),O},Le.scale=function(O,M,B){return O[0]=M[0]*B,O[1]=M[1]*B,O[2]=M[2]*B,O[3]=M[3]*B,O},Le.scaleAndAdd=function(O,M,B,X){return O[0]=M[0]+B[0]*X,O[1]=M[1]+B[1]*X,O[2]=M[2]+B[2]*X,O[3]=M[3]+B[3]*X,O},Le.distance=b,Le.squaredDistance=N,Le.length=D,Le.squaredLength=S,Le.negate=function(O,M){return O[0]=-M[0],O[1]=-M[1],O[2]=-M[2],O[3]=-M[3],O},Le.inverse=function(O,M){return O[0]=1/M[0],O[1]=1/M[1],O[2]=1/M[2],O[3]=1/M[3],O},Le.normalize=function(O,M){var B=M[0],X=M[1],ee=M[2],ue=M[3],le=B*B+X*X+ee*ee+ue*ue;return le>0&&(le=1/Math.sqrt(le)),O[0]=B*le,O[1]=X*le,O[2]=ee*le,O[3]=ue*le,O},Le.dot=function(O,M){return O[0]*M[0]+O[1]*M[1]+O[2]*M[2]+O[3]*M[3]},Le.cross=function(O,M,B,X){var ee=B[0]*X[1]-B[1]*X[0],ue=B[0]*X[2]-B[2]*X[0],le=B[0]*X[3]-B[3]*X[0],ne=B[1]*X[2]-B[2]*X[1],pe=B[1]*X[3]-B[3]*X[1],we=B[2]*X[3]-B[3]*X[2],Pe=M[0],Ye=M[1],je=M[2],qe=M[3];return O[0]=Ye*we-je*pe+qe*ne,O[1]=-Pe*we+je*le-qe*ue,O[2]=Pe*pe-Ye*le+qe*ee,O[3]=-Pe*ne+Ye*ue-je*ee,O},Le.lerp=function(O,M,B,X){var ee=M[0],ue=M[1],le=M[2],ne=M[3];return O[0]=ee+X*(B[0]-ee),O[1]=ue+X*(B[1]-ue),O[2]=le+X*(B[2]-le),O[3]=ne+X*(B[3]-ne),O},Le.random=function(O,M){var B,X,ee,ue,le,ne;M=M||1;do le=(B=2*i.RANDOM()-1)*B+(X=2*i.RANDOM()-1)*X;while(le>=1);do ne=(ee=2*i.RANDOM()-1)*ee+(ue=2*i.RANDOM()-1)*ue;while(ne>=1);var pe=Math.sqrt((1-le)/ne);return O[0]=M*B,O[1]=M*X,O[2]=M*ee*pe,O[3]=M*ue*pe,O},Le.transformMat4=function(O,M,B){var X=M[0],ee=M[1],ue=M[2],le=M[3];return O[0]=B[0]*X+B[4]*ee+B[8]*ue+B[12]*le,O[1]=B[1]*X+B[5]*ee+B[9]*ue+B[13]*le,O[2]=B[2]*X+B[6]*ee+B[10]*ue+B[14]*le,O[3]=B[3]*X+B[7]*ee+B[11]*ue+B[15]*le,O},Le.transformQuat=function(O,M,B){var X=M[0],ee=M[1],ue=M[2],le=B[0],ne=B[1],pe=B[2],we=B[3],Pe=we*X+ne*ue-pe*ee,Ye=we*ee+pe*X-le*ue,je=we*ue+le*ee-ne*X,qe=-le*X-ne*ee-pe*ue;return O[0]=Pe*we+qe*-le+Ye*-pe-je*-ne,O[1]=Ye*we+qe*-ne+je*-le-Pe*-pe,O[2]=je*we+qe*-pe+Pe*-ne-Ye*-le,O[3]=M[3],O},Le.zero=function(O){return O[0]=0,O[1]=0,O[2]=0,O[3]=0,O},Le.str=function(O){return"vec4("+O[0]+", "+O[1]+", "+O[2]+", "+O[3]+")"},Le.exactEquals=function(O,M){return O[0]===M[0]&&O[1]===M[1]&&O[2]===M[2]&&O[3]===M[3]},Le.equals=function(O,M){var B=O[0],X=O[1],ee=O[2],ue=O[3],le=M[0],ne=M[1],pe=M[2],we=M[3];return Math.abs(B-le)<=i.EPSILON*Math.max(1,Math.abs(B),Math.abs(le))&&Math.abs(X-ne)<=i.EPSILON*Math.max(1,Math.abs(X),Math.abs(ne))&&Math.abs(ee-pe)<=i.EPSILON*Math.max(1,Math.abs(ee),Math.abs(pe))&&Math.abs(ue-we)<=i.EPSILON*Math.max(1,Math.abs(ue),Math.abs(we))},Le.forEach=Le.sqrLen=Le.len=Le.sqrDist=Le.dist=Le.div=Le.mul=Le.sub=void 0;var i=function(O,M){if(O&&O.__esModule)return O;if(O===null||d(O)!=="object"&&typeof O!="function")return{default:O};var B=u(void 0);if(B&&B.has(O))return B.get(O);var X={},ee=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ue in O)if(ue!=="default"&&Object.prototype.hasOwnProperty.call(O,ue)){var le=ee?Object.getOwnPropertyDescriptor(O,ue):null;le&&(le.get||le.set)?Object.defineProperty(X,ue,le):X[ue]=O[ue]}return X.default=O,B&&B.set(O,X),X}(k());function u(O){if(typeof WeakMap!="function")return null;var M=new WeakMap,B=new WeakMap;return(u=function(X){return X?B:M})(O)}function f(){var O=new i.ARRAY_TYPE(4);return i.ARRAY_TYPE!=Float32Array&&(O[0]=0,O[1]=0,O[2]=0,O[3]=0),O}function y(O,M,B){return O[0]=M[0]-B[0],O[1]=M[1]-B[1],O[2]=M[2]-B[2],O[3]=M[3]-B[3],O}function m(O,M,B){return O[0]=M[0]*B[0],O[1]=M[1]*B[1],O[2]=M[2]*B[2],O[3]=M[3]*B[3],O}function _(O,M,B){return O[0]=M[0]/B[0],O[1]=M[1]/B[1],O[2]=M[2]/B[2],O[3]=M[3]/B[3],O}function b(O,M){return Math.hypot(M[0]-O[0],M[1]-O[1],M[2]-O[2],M[3]-O[3])}function N(O,M){var B=M[0]-O[0],X=M[1]-O[1],ee=M[2]-O[2],ue=M[3]-O[3];return B*B+X*X+ee*ee+ue*ue}function D(O){return Math.hypot(O[0],O[1],O[2],O[3])}function S(O){var M=O[0],B=O[1],X=O[2],ee=O[3];return M*M+B*B+X*X+ee*ee}Le.sub=y,Le.mul=m,Le.div=_,Le.dist=b,Le.sqrDist=N,Le.len=D,Le.sqrLen=S;var V,I=(V=f(),function(O,M,B,X,ee,ue){var le,ne;for(M||(M=4),B||(B=0),ne=X?Math.min(X*M+B,O.length):O.length,le=B;le<ne;le+=M)V[0]=O[le],V[1]=O[le+1],V[2]=O[le+2],V[3]=O[le+3],ee(V,V,ue),O[le]=V[0],O[le+1]=V[1],O[le+2]=V[2],O[le+3]=V[3];return O});return Le.forEach=I,Le}function Ze(){if(ze)return De;function d(Xe){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(At){return typeof At}:function(At){return At&&typeof Symbol=="function"&&At.constructor===Symbol&&At!==Symbol.prototype?"symbol":typeof At},d(Xe)}ze=1,Object.defineProperty(De,"__esModule",{value:!0}),De.create=b,De.identity=function(Xe){return Xe[0]=0,Xe[1]=0,Xe[2]=0,Xe[3]=1,Xe},De.setAxisAngle=N,De.getAxisAngle=function(Xe,At){var xt=2*Math.acos(At[3]),St=Math.sin(xt/2);return St>i.EPSILON?(Xe[0]=At[0]/St,Xe[1]=At[1]/St,Xe[2]=At[2]/St):(Xe[0]=1,Xe[1]=0,Xe[2]=0),xt},De.getAngle=function(Xe,At){var xt=B(Xe,At);return Math.acos(2*xt*xt-1)},De.multiply=D,De.rotateX=function(Xe,At,xt){xt*=.5;var St=At[0],Ot=At[1],Nt=At[2],kt=At[3],Mt=Math.sin(xt),Zt=Math.cos(xt);return Xe[0]=St*Zt+kt*Mt,Xe[1]=Ot*Zt+Nt*Mt,Xe[2]=Nt*Zt-Ot*Mt,Xe[3]=kt*Zt-St*Mt,Xe},De.rotateY=function(Xe,At,xt){xt*=.5;var St=At[0],Ot=At[1],Nt=At[2],kt=At[3],Mt=Math.sin(xt),Zt=Math.cos(xt);return Xe[0]=St*Zt-Nt*Mt,Xe[1]=Ot*Zt+kt*Mt,Xe[2]=Nt*Zt+St*Mt,Xe[3]=kt*Zt-Ot*Mt,Xe},De.rotateZ=function(Xe,At,xt){xt*=.5;var St=At[0],Ot=At[1],Nt=At[2],kt=At[3],Mt=Math.sin(xt),Zt=Math.cos(xt);return Xe[0]=St*Zt+Ot*Mt,Xe[1]=Ot*Zt-St*Mt,Xe[2]=Nt*Zt+kt*Mt,Xe[3]=kt*Zt-Nt*Mt,Xe},De.calculateW=function(Xe,At){var xt=At[0],St=At[1],Ot=At[2];return Xe[0]=xt,Xe[1]=St,Xe[2]=Ot,Xe[3]=Math.sqrt(Math.abs(1-xt*xt-St*St-Ot*Ot)),Xe},De.exp=S,De.ln=V,De.pow=function(Xe,At,xt){return V(Xe,At),M(Xe,Xe,xt),S(Xe,Xe),Xe},De.slerp=I,De.random=function(Xe){var At=i.RANDOM(),xt=i.RANDOM(),St=i.RANDOM(),Ot=Math.sqrt(1-At),Nt=Math.sqrt(At);return Xe[0]=Ot*Math.sin(2*Math.PI*xt),Xe[1]=Ot*Math.cos(2*Math.PI*xt),Xe[2]=Nt*Math.sin(2*Math.PI*St),Xe[3]=Nt*Math.cos(2*Math.PI*St),Xe},De.invert=function(Xe,At){var xt=At[0],St=At[1],Ot=At[2],Nt=At[3],kt=xt*xt+St*St+Ot*Ot+Nt*Nt,Mt=kt?1/kt:0;return Xe[0]=-xt*Mt,Xe[1]=-St*Mt,Xe[2]=-Ot*Mt,Xe[3]=Nt*Mt,Xe},De.conjugate=function(Xe,At){return Xe[0]=-At[0],Xe[1]=-At[1],Xe[2]=-At[2],Xe[3]=At[3],Xe},De.fromMat3=O,De.fromEuler=function(Xe,At,xt,St){var Ot=.5*Math.PI/180;At*=Ot,xt*=Ot,St*=Ot;var Nt=Math.sin(At),kt=Math.cos(At),Mt=Math.sin(xt),Zt=Math.cos(xt),ga=Math.sin(St),ma=Math.cos(St);return Xe[0]=Nt*Zt*ma-kt*Mt*ga,Xe[1]=kt*Mt*ma+Nt*Zt*ga,Xe[2]=kt*Zt*ga-Nt*Mt*ma,Xe[3]=kt*Zt*ma+Nt*Mt*ga,Xe},De.str=function(Xe){return"quat("+Xe[0]+", "+Xe[1]+", "+Xe[2]+", "+Xe[3]+")"},De.setAxes=De.sqlerp=De.rotationTo=De.equals=De.exactEquals=De.normalize=De.sqrLen=De.squaredLength=De.len=De.length=De.lerp=De.dot=De.scale=De.mul=De.add=De.set=De.copy=De.fromValues=De.clone=void 0;var i=_(k()),u=_(he()),f=_(ge()),y=_(Ie());function m(Xe){if(typeof WeakMap!="function")return null;var At=new WeakMap,xt=new WeakMap;return(m=function(St){return St?xt:At})(Xe)}function _(Xe,At){if(Xe&&Xe.__esModule)return Xe;if(Xe===null||d(Xe)!=="object"&&typeof Xe!="function")return{default:Xe};var xt=m(At);if(xt&&xt.has(Xe))return xt.get(Xe);var St={},Ot=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Nt in Xe)if(Nt!=="default"&&Object.prototype.hasOwnProperty.call(Xe,Nt)){var kt=Ot?Object.getOwnPropertyDescriptor(Xe,Nt):null;kt&&(kt.get||kt.set)?Object.defineProperty(St,Nt,kt):St[Nt]=Xe[Nt]}return St.default=Xe,xt&&xt.set(Xe,St),St}function b(){var Xe=new i.ARRAY_TYPE(4);return i.ARRAY_TYPE!=Float32Array&&(Xe[0]=0,Xe[1]=0,Xe[2]=0),Xe[3]=1,Xe}function N(Xe,At,xt){xt*=.5;var St=Math.sin(xt);return Xe[0]=St*At[0],Xe[1]=St*At[1],Xe[2]=St*At[2],Xe[3]=Math.cos(xt),Xe}function D(Xe,At,xt){var St=At[0],Ot=At[1],Nt=At[2],kt=At[3],Mt=xt[0],Zt=xt[1],ga=xt[2],ma=xt[3];return Xe[0]=St*ma+kt*Mt+Ot*ga-Nt*Zt,Xe[1]=Ot*ma+kt*Zt+Nt*Mt-St*ga,Xe[2]=Nt*ma+kt*ga+St*Zt-Ot*Mt,Xe[3]=kt*ma-St*Mt-Ot*Zt-Nt*ga,Xe}function S(Xe,At){var xt=At[0],St=At[1],Ot=At[2],Nt=At[3],kt=Math.sqrt(xt*xt+St*St+Ot*Ot),Mt=Math.exp(Nt),Zt=kt>0?Mt*Math.sin(kt)/kt:0;return Xe[0]=xt*Zt,Xe[1]=St*Zt,Xe[2]=Ot*Zt,Xe[3]=Mt*Math.cos(kt),Xe}function V(Xe,At){var xt=At[0],St=At[1],Ot=At[2],Nt=At[3],kt=Math.sqrt(xt*xt+St*St+Ot*Ot),Mt=kt>0?Math.atan2(kt,Nt)/kt:0;return Xe[0]=xt*Mt,Xe[1]=St*Mt,Xe[2]=Ot*Mt,Xe[3]=.5*Math.log(xt*xt+St*St+Ot*Ot+Nt*Nt),Xe}function I(Xe,At,xt,St){var Ot,Nt,kt,Mt,Zt,ga=At[0],ma=At[1],Ya=At[2],Pa=At[3],Oa=xt[0],va=xt[1],Ar=xt[2],$a=xt[3];return(Nt=ga*Oa+ma*va+Ya*Ar+Pa*$a)<0&&(Nt=-Nt,Oa=-Oa,va=-va,Ar=-Ar,$a=-$a),1-Nt>i.EPSILON?(Ot=Math.acos(Nt),kt=Math.sin(Ot),Mt=Math.sin((1-St)*Ot)/kt,Zt=Math.sin(St*Ot)/kt):(Mt=1-St,Zt=St),Xe[0]=Mt*ga+Zt*Oa,Xe[1]=Mt*ma+Zt*va,Xe[2]=Mt*Ya+Zt*Ar,Xe[3]=Mt*Pa+Zt*$a,Xe}function O(Xe,At){var xt,St=At[0]+At[4]+At[8];if(St>0)xt=Math.sqrt(St+1),Xe[3]=.5*xt,Xe[0]=(At[5]-At[7])*(xt=.5/xt),Xe[1]=(At[6]-At[2])*xt,Xe[2]=(At[1]-At[3])*xt;else{var Ot=0;At[4]>At[0]&&(Ot=1),At[8]>At[3*Ot+Ot]&&(Ot=2);var Nt=(Ot+1)%3,kt=(Ot+2)%3;xt=Math.sqrt(At[3*Ot+Ot]-At[3*Nt+Nt]-At[3*kt+kt]+1),Xe[Ot]=.5*xt,Xe[3]=(At[3*Nt+kt]-At[3*kt+Nt])*(xt=.5/xt),Xe[Nt]=(At[3*Nt+Ot]+At[3*Ot+Nt])*xt,Xe[kt]=(At[3*kt+Ot]+At[3*Ot+kt])*xt}return Xe}De.clone=y.clone,De.fromValues=y.fromValues,De.copy=y.copy,De.set=y.set,De.add=y.add,De.mul=D;var M=y.scale;De.scale=M;var B=y.dot;De.dot=B,De.lerp=y.lerp;var X=y.length;De.length=X,De.len=X;var ee=y.squaredLength;De.squaredLength=ee,De.sqrLen=ee;var ue=y.normalize;De.normalize=ue,De.exactEquals=y.exactEquals,De.equals=y.equals;var le,ne,pe,we=(le=f.create(),ne=f.fromValues(1,0,0),pe=f.fromValues(0,1,0),function(Xe,At,xt){var St=f.dot(At,xt);return St<-.999999?(f.cross(le,ne,At),f.len(le)<1e-6&&f.cross(le,pe,At),f.normalize(le,le),N(Xe,le,Math.PI),Xe):St>.999999?(Xe[0]=0,Xe[1]=0,Xe[2]=0,Xe[3]=1,Xe):(f.cross(le,At,xt),Xe[0]=le[0],Xe[1]=le[1],Xe[2]=le[2],Xe[3]=1+St,ue(Xe,Xe))});De.rotationTo=we;var Pe,Ye,je=(Pe=b(),Ye=b(),function(Xe,At,xt,St,Ot,Nt){return I(Pe,At,Ot,Nt),I(Ye,xt,St,Nt),I(Xe,Pe,Ye,2*Nt*(1-Nt)),Xe});De.sqlerp=je;var qe,mt=(qe=u.create(),function(Xe,At,xt,St){return qe[0]=xt[0],qe[3]=xt[1],qe[6]=xt[2],qe[1]=St[0],qe[4]=St[1],qe[7]=St[2],qe[2]=-At[0],qe[5]=-At[1],qe[8]=-At[2],ue(Xe,O(Xe,qe))});return De.setAxes=mt,De}var ke,tt={};function Ue(){if(ke)return tt;function d(I){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},d(I)}ke=1,Object.defineProperty(tt,"__esModule",{value:!0}),tt.create=function(){var I=new i.ARRAY_TYPE(8);return i.ARRAY_TYPE!=Float32Array&&(I[0]=0,I[1]=0,I[2]=0,I[4]=0,I[5]=0,I[6]=0,I[7]=0),I[3]=1,I},tt.clone=function(I){var O=new i.ARRAY_TYPE(8);return O[0]=I[0],O[1]=I[1],O[2]=I[2],O[3]=I[3],O[4]=I[4],O[5]=I[5],O[6]=I[6],O[7]=I[7],O},tt.fromValues=function(I,O,M,B,X,ee,ue,le){var ne=new i.ARRAY_TYPE(8);return ne[0]=I,ne[1]=O,ne[2]=M,ne[3]=B,ne[4]=X,ne[5]=ee,ne[6]=ue,ne[7]=le,ne},tt.fromRotationTranslationValues=function(I,O,M,B,X,ee,ue){var le=new i.ARRAY_TYPE(8);le[0]=I,le[1]=O,le[2]=M,le[3]=B;var ne=.5*X,pe=.5*ee,we=.5*ue;return le[4]=ne*B+pe*M-we*O,le[5]=pe*B+we*I-ne*M,le[6]=we*B+ne*O-pe*I,le[7]=-ne*I-pe*O-we*M,le},tt.fromRotationTranslation=_,tt.fromTranslation=function(I,O){return I[0]=0,I[1]=0,I[2]=0,I[3]=1,I[4]=.5*O[0],I[5]=.5*O[1],I[6]=.5*O[2],I[7]=0,I},tt.fromRotation=function(I,O){return I[0]=O[0],I[1]=O[1],I[2]=O[2],I[3]=O[3],I[4]=0,I[5]=0,I[6]=0,I[7]=0,I},tt.fromMat4=function(I,O){var M=u.create();f.getRotation(M,O);var B=new i.ARRAY_TYPE(3);return f.getTranslation(B,O),_(I,M,B),I},tt.copy=b,tt.identity=function(I){return I[0]=0,I[1]=0,I[2]=0,I[3]=1,I[4]=0,I[5]=0,I[6]=0,I[7]=0,I},tt.set=function(I,O,M,B,X,ee,ue,le,ne){return I[0]=O,I[1]=M,I[2]=B,I[3]=X,I[4]=ee,I[5]=ue,I[6]=le,I[7]=ne,I},tt.getDual=function(I,O){return I[0]=O[4],I[1]=O[5],I[2]=O[6],I[3]=O[7],I},tt.setDual=function(I,O){return I[4]=O[0],I[5]=O[1],I[6]=O[2],I[7]=O[3],I},tt.getTranslation=function(I,O){var M=O[4],B=O[5],X=O[6],ee=O[7],ue=-O[0],le=-O[1],ne=-O[2],pe=O[3];return I[0]=2*(M*pe+ee*ue+B*ne-X*le),I[1]=2*(B*pe+ee*le+X*ue-M*ne),I[2]=2*(X*pe+ee*ne+M*le-B*ue),I},tt.translate=function(I,O,M){var B=O[0],X=O[1],ee=O[2],ue=O[3],le=.5*M[0],ne=.5*M[1],pe=.5*M[2],we=O[4],Pe=O[5],Ye=O[6],je=O[7];return I[0]=B,I[1]=X,I[2]=ee,I[3]=ue,I[4]=ue*le+X*pe-ee*ne+we,I[5]=ue*ne+ee*le-B*pe+Pe,I[6]=ue*pe+B*ne-X*le+Ye,I[7]=-B*le-X*ne-ee*pe+je,I},tt.rotateX=function(I,O,M){var B=-O[0],X=-O[1],ee=-O[2],ue=O[3],le=O[4],ne=O[5],pe=O[6],we=O[7],Pe=le*ue+we*B+ne*ee-pe*X,Ye=ne*ue+we*X+pe*B-le*ee,je=pe*ue+we*ee+le*X-ne*B,qe=we*ue-le*B-ne*X-pe*ee;return u.rotateX(I,O,M),I[4]=Pe*(ue=I[3])+qe*(B=I[0])+Ye*(ee=I[2])-je*(X=I[1]),I[5]=Ye*ue+qe*X+je*B-Pe*ee,I[6]=je*ue+qe*ee+Pe*X-Ye*B,I[7]=qe*ue-Pe*B-Ye*X-je*ee,I},tt.rotateY=function(I,O,M){var B=-O[0],X=-O[1],ee=-O[2],ue=O[3],le=O[4],ne=O[5],pe=O[6],we=O[7],Pe=le*ue+we*B+ne*ee-pe*X,Ye=ne*ue+we*X+pe*B-le*ee,je=pe*ue+we*ee+le*X-ne*B,qe=we*ue-le*B-ne*X-pe*ee;return u.rotateY(I,O,M),I[4]=Pe*(ue=I[3])+qe*(B=I[0])+Ye*(ee=I[2])-je*(X=I[1]),I[5]=Ye*ue+qe*X+je*B-Pe*ee,I[6]=je*ue+qe*ee+Pe*X-Ye*B,I[7]=qe*ue-Pe*B-Ye*X-je*ee,I},tt.rotateZ=function(I,O,M){var B=-O[0],X=-O[1],ee=-O[2],ue=O[3],le=O[4],ne=O[5],pe=O[6],we=O[7],Pe=le*ue+we*B+ne*ee-pe*X,Ye=ne*ue+we*X+pe*B-le*ee,je=pe*ue+we*ee+le*X-ne*B,qe=we*ue-le*B-ne*X-pe*ee;return u.rotateZ(I,O,M),I[4]=Pe*(ue=I[3])+qe*(B=I[0])+Ye*(ee=I[2])-je*(X=I[1]),I[5]=Ye*ue+qe*X+je*B-Pe*ee,I[6]=je*ue+qe*ee+Pe*X-Ye*B,I[7]=qe*ue-Pe*B-Ye*X-je*ee,I},tt.rotateByQuatAppend=function(I,O,M){var B=M[0],X=M[1],ee=M[2],ue=M[3],le=O[0],ne=O[1],pe=O[2],we=O[3];return I[0]=le*ue+we*B+ne*ee-pe*X,I[1]=ne*ue+we*X+pe*B-le*ee,I[2]=pe*ue+we*ee+le*X-ne*B,I[3]=we*ue-le*B-ne*X-pe*ee,I[4]=(le=O[4])*ue+(we=O[7])*B+(ne=O[5])*ee-(pe=O[6])*X,I[5]=ne*ue+we*X+pe*B-le*ee,I[6]=pe*ue+we*ee+le*X-ne*B,I[7]=we*ue-le*B-ne*X-pe*ee,I},tt.rotateByQuatPrepend=function(I,O,M){var B=O[0],X=O[1],ee=O[2],ue=O[3],le=M[0],ne=M[1],pe=M[2],we=M[3];return I[0]=B*we+ue*le+X*pe-ee*ne,I[1]=X*we+ue*ne+ee*le-B*pe,I[2]=ee*we+ue*pe+B*ne-X*le,I[3]=ue*we-B*le-X*ne-ee*pe,I[4]=B*(we=M[7])+ue*(le=M[4])+X*(pe=M[6])-ee*(ne=M[5]),I[5]=X*we+ue*ne+ee*le-B*pe,I[6]=ee*we+ue*pe+B*ne-X*le,I[7]=ue*we-B*le-X*ne-ee*pe,I},tt.rotateAroundAxis=function(I,O,M,B){if(Math.abs(B)<i.EPSILON)return b(I,O);var X=Math.hypot(M[0],M[1],M[2]);B*=.5;var ee=Math.sin(B),ue=ee*M[0]/X,le=ee*M[1]/X,ne=ee*M[2]/X,pe=Math.cos(B),we=O[0],Pe=O[1],Ye=O[2],je=O[3];I[0]=we*pe+je*ue+Pe*ne-Ye*le,I[1]=Pe*pe+je*le+Ye*ue-we*ne,I[2]=Ye*pe+je*ne+we*le-Pe*ue,I[3]=je*pe-we*ue-Pe*le-Ye*ne;var qe=O[4],mt=O[5],Xe=O[6],At=O[7];return I[4]=qe*pe+At*ue+mt*ne-Xe*le,I[5]=mt*pe+At*le+Xe*ue-qe*ne,I[6]=Xe*pe+At*ne+qe*le-mt*ue,I[7]=At*pe-qe*ue-mt*le-Xe*ne,I},tt.add=function(I,O,M){return I[0]=O[0]+M[0],I[1]=O[1]+M[1],I[2]=O[2]+M[2],I[3]=O[3]+M[3],I[4]=O[4]+M[4],I[5]=O[5]+M[5],I[6]=O[6]+M[6],I[7]=O[7]+M[7],I},tt.multiply=N,tt.scale=function(I,O,M){return I[0]=O[0]*M,I[1]=O[1]*M,I[2]=O[2]*M,I[3]=O[3]*M,I[4]=O[4]*M,I[5]=O[5]*M,I[6]=O[6]*M,I[7]=O[7]*M,I},tt.lerp=function(I,O,M,B){var X=1-B;return D(O,M)<0&&(B=-B),I[0]=O[0]*X+M[0]*B,I[1]=O[1]*X+M[1]*B,I[2]=O[2]*X+M[2]*B,I[3]=O[3]*X+M[3]*B,I[4]=O[4]*X+M[4]*B,I[5]=O[5]*X+M[5]*B,I[6]=O[6]*X+M[6]*B,I[7]=O[7]*X+M[7]*B,I},tt.invert=function(I,O){var M=V(O);return I[0]=-O[0]/M,I[1]=-O[1]/M,I[2]=-O[2]/M,I[3]=O[3]/M,I[4]=-O[4]/M,I[5]=-O[5]/M,I[6]=-O[6]/M,I[7]=O[7]/M,I},tt.conjugate=function(I,O){return I[0]=-O[0],I[1]=-O[1],I[2]=-O[2],I[3]=O[3],I[4]=-O[4],I[5]=-O[5],I[6]=-O[6],I[7]=O[7],I},tt.normalize=function(I,O){var M=V(O);if(M>0){M=Math.sqrt(M);var B=O[0]/M,X=O[1]/M,ee=O[2]/M,ue=O[3]/M,le=O[4],ne=O[5],pe=O[6],we=O[7],Pe=B*le+X*ne+ee*pe+ue*we;I[0]=B,I[1]=X,I[2]=ee,I[3]=ue,I[4]=(le-B*Pe)/M,I[5]=(ne-X*Pe)/M,I[6]=(pe-ee*Pe)/M,I[7]=(we-ue*Pe)/M}return I},tt.str=function(I){return"quat2("+I[0]+", "+I[1]+", "+I[2]+", "+I[3]+", "+I[4]+", "+I[5]+", "+I[6]+", "+I[7]+")"},tt.exactEquals=function(I,O){return I[0]===O[0]&&I[1]===O[1]&&I[2]===O[2]&&I[3]===O[3]&&I[4]===O[4]&&I[5]===O[5]&&I[6]===O[6]&&I[7]===O[7]},tt.equals=function(I,O){var M=I[0],B=I[1],X=I[2],ee=I[3],ue=I[4],le=I[5],ne=I[6],pe=I[7],we=O[0],Pe=O[1],Ye=O[2],je=O[3],qe=O[4],mt=O[5],Xe=O[6],At=O[7];return Math.abs(M-we)<=i.EPSILON*Math.max(1,Math.abs(M),Math.abs(we))&&Math.abs(B-Pe)<=i.EPSILON*Math.max(1,Math.abs(B),Math.abs(Pe))&&Math.abs(X-Ye)<=i.EPSILON*Math.max(1,Math.abs(X),Math.abs(Ye))&&Math.abs(ee-je)<=i.EPSILON*Math.max(1,Math.abs(ee),Math.abs(je))&&Math.abs(ue-qe)<=i.EPSILON*Math.max(1,Math.abs(ue),Math.abs(qe))&&Math.abs(le-mt)<=i.EPSILON*Math.max(1,Math.abs(le),Math.abs(mt))&&Math.abs(ne-Xe)<=i.EPSILON*Math.max(1,Math.abs(ne),Math.abs(Xe))&&Math.abs(pe-At)<=i.EPSILON*Math.max(1,Math.abs(pe),Math.abs(At))},tt.sqrLen=tt.squaredLength=tt.len=tt.length=tt.dot=tt.mul=tt.setReal=tt.getReal=void 0;var i=m(k()),u=m(Ze()),f=m(Re());function y(I){if(typeof WeakMap!="function")return null;var O=new WeakMap,M=new WeakMap;return(y=function(B){return B?M:O})(I)}function m(I,O){if(I&&I.__esModule)return I;if(I===null||d(I)!=="object"&&typeof I!="function")return{default:I};var M=y(O);if(M&&M.has(I))return M.get(I);var B={},X=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ee in I)if(ee!=="default"&&Object.prototype.hasOwnProperty.call(I,ee)){var ue=X?Object.getOwnPropertyDescriptor(I,ee):null;ue&&(ue.get||ue.set)?Object.defineProperty(B,ee,ue):B[ee]=I[ee]}return B.default=I,M&&M.set(I,B),B}function _(I,O,M){var B=.5*M[0],X=.5*M[1],ee=.5*M[2],ue=O[0],le=O[1],ne=O[2],pe=O[3];return I[0]=ue,I[1]=le,I[2]=ne,I[3]=pe,I[4]=B*pe+X*ne-ee*le,I[5]=X*pe+ee*ue-B*ne,I[6]=ee*pe+B*le-X*ue,I[7]=-B*ue-X*le-ee*ne,I}function b(I,O){return I[0]=O[0],I[1]=O[1],I[2]=O[2],I[3]=O[3],I[4]=O[4],I[5]=O[5],I[6]=O[6],I[7]=O[7],I}function N(I,O,M){var B=O[0],X=O[1],ee=O[2],ue=O[3],le=M[4],ne=M[5],pe=M[6],we=M[7],Pe=O[4],Ye=O[5],je=O[6],qe=O[7],mt=M[0],Xe=M[1],At=M[2],xt=M[3];return I[0]=B*xt+ue*mt+X*At-ee*Xe,I[1]=X*xt+ue*Xe+ee*mt-B*At,I[2]=ee*xt+ue*At+B*Xe-X*mt,I[3]=ue*xt-B*mt-X*Xe-ee*At,I[4]=B*we+ue*le+X*pe-ee*ne+Pe*xt+qe*mt+Ye*At-je*Xe,I[5]=X*we+ue*ne+ee*le-B*pe+Ye*xt+qe*Xe+je*mt-Pe*At,I[6]=ee*we+ue*pe+B*ne-X*le+je*xt+qe*At+Pe*Xe-Ye*mt,I[7]=ue*we-B*le-X*ne-ee*pe+qe*xt-Pe*mt-Ye*Xe-je*At,I}tt.getReal=u.copy,tt.setReal=u.copy,tt.mul=N;var D=u.dot;tt.dot=D;var S=u.length;tt.length=S,tt.len=S;var V=u.squaredLength;return tt.squaredLength=V,tt.sqrLen=V,tt}var He,Ce,Se={};function $e(){if(He)return Se;function d(O){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},d(O)}He=1,Object.defineProperty(Se,"__esModule",{value:!0}),Se.create=f,Se.clone=function(O){var M=new i.ARRAY_TYPE(2);return M[0]=O[0],M[1]=O[1],M},Se.fromValues=function(O,M){var B=new i.ARRAY_TYPE(2);return B[0]=O,B[1]=M,B},Se.copy=function(O,M){return O[0]=M[0],O[1]=M[1],O},Se.set=function(O,M,B){return O[0]=M,O[1]=B,O},Se.add=function(O,M,B){return O[0]=M[0]+B[0],O[1]=M[1]+B[1],O},Se.subtract=y,Se.multiply=m,Se.divide=_,Se.ceil=function(O,M){return O[0]=Math.ceil(M[0]),O[1]=Math.ceil(M[1]),O},Se.floor=function(O,M){return O[0]=Math.floor(M[0]),O[1]=Math.floor(M[1]),O},Se.min=function(O,M,B){return O[0]=Math.min(M[0],B[0]),O[1]=Math.min(M[1],B[1]),O},Se.max=function(O,M,B){return O[0]=Math.max(M[0],B[0]),O[1]=Math.max(M[1],B[1]),O},Se.round=function(O,M){return O[0]=Math.round(M[0]),O[1]=Math.round(M[1]),O},Se.scale=function(O,M,B){return O[0]=M[0]*B,O[1]=M[1]*B,O},Se.scaleAndAdd=function(O,M,B,X){return O[0]=M[0]+B[0]*X,O[1]=M[1]+B[1]*X,O},Se.distance=b,Se.squaredDistance=N,Se.length=D,Se.squaredLength=S,Se.negate=function(O,M){return O[0]=-M[0],O[1]=-M[1],O},Se.inverse=function(O,M){return O[0]=1/M[0],O[1]=1/M[1],O},Se.normalize=function(O,M){var B=M[0],X=M[1],ee=B*B+X*X;return ee>0&&(ee=1/Math.sqrt(ee)),O[0]=M[0]*ee,O[1]=M[1]*ee,O},Se.dot=function(O,M){return O[0]*M[0]+O[1]*M[1]},Se.cross=function(O,M,B){var X=M[0]*B[1]-M[1]*B[0];return O[0]=O[1]=0,O[2]=X,O},Se.lerp=function(O,M,B,X){var ee=M[0],ue=M[1];return O[0]=ee+X*(B[0]-ee),O[1]=ue+X*(B[1]-ue),O},Se.random=function(O,M){M=M||1;var B=2*i.RANDOM()*Math.PI;return O[0]=Math.cos(B)*M,O[1]=Math.sin(B)*M,O},Se.transformMat2=function(O,M,B){var X=M[0],ee=M[1];return O[0]=B[0]*X+B[2]*ee,O[1]=B[1]*X+B[3]*ee,O},Se.transformMat2d=function(O,M,B){var X=M[0],ee=M[1];return O[0]=B[0]*X+B[2]*ee+B[4],O[1]=B[1]*X+B[3]*ee+B[5],O},Se.transformMat3=function(O,M,B){var X=M[0],ee=M[1];return O[0]=B[0]*X+B[3]*ee+B[6],O[1]=B[1]*X+B[4]*ee+B[7],O},Se.transformMat4=function(O,M,B){var X=M[0],ee=M[1];return O[0]=B[0]*X+B[4]*ee+B[12],O[1]=B[1]*X+B[5]*ee+B[13],O},Se.rotate=function(O,M,B,X){var ee=M[0]-B[0],ue=M[1]-B[1],le=Math.sin(X),ne=Math.cos(X);return O[0]=ee*ne-ue*le+B[0],O[1]=ee*le+ue*ne+B[1],O},Se.angle=function(O,M){var B=O[0],X=O[1],ee=M[0],ue=M[1],le=Math.sqrt(B*B+X*X)*Math.sqrt(ee*ee+ue*ue);return Math.acos(Math.min(Math.max(le&&(B*ee+X*ue)/le,-1),1))},Se.zero=function(O){return O[0]=0,O[1]=0,O},Se.str=function(O){return"vec2("+O[0]+", "+O[1]+")"},Se.exactEquals=function(O,M){return O[0]===M[0]&&O[1]===M[1]},Se.equals=function(O,M){var B=O[0],X=O[1],ee=M[0],ue=M[1];return Math.abs(B-ee)<=i.EPSILON*Math.max(1,Math.abs(B),Math.abs(ee))&&Math.abs(X-ue)<=i.EPSILON*Math.max(1,Math.abs(X),Math.abs(ue))},Se.forEach=Se.sqrLen=Se.sqrDist=Se.dist=Se.div=Se.mul=Se.sub=Se.len=void 0;var i=function(O,M){if(O&&O.__esModule)return O;if(O===null||d(O)!=="object"&&typeof O!="function")return{default:O};var B=u(void 0);if(B&&B.has(O))return B.get(O);var X={},ee=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ue in O)if(ue!=="default"&&Object.prototype.hasOwnProperty.call(O,ue)){var le=ee?Object.getOwnPropertyDescriptor(O,ue):null;le&&(le.get||le.set)?Object.defineProperty(X,ue,le):X[ue]=O[ue]}return X.default=O,B&&B.set(O,X),X}(k());function u(O){if(typeof WeakMap!="function")return null;var M=new WeakMap,B=new WeakMap;return(u=function(X){return X?B:M})(O)}function f(){var O=new i.ARRAY_TYPE(2);return i.ARRAY_TYPE!=Float32Array&&(O[0]=0,O[1]=0),O}function y(O,M,B){return O[0]=M[0]-B[0],O[1]=M[1]-B[1],O}function m(O,M,B){return O[0]=M[0]*B[0],O[1]=M[1]*B[1],O}function _(O,M,B){return O[0]=M[0]/B[0],O[1]=M[1]/B[1],O}function b(O,M){return Math.hypot(M[0]-O[0],M[1]-O[1])}function N(O,M){var B=M[0]-O[0],X=M[1]-O[1];return B*B+X*X}function D(O){return Math.hypot(O[0],O[1])}function S(O){var M=O[0],B=O[1];return M*M+B*B}Se.len=D,Se.sub=y,Se.mul=m,Se.div=_,Se.dist=b,Se.sqrDist=N,Se.sqrLen=S;var V,I=(V=f(),function(O,M,B,X,ee,ue){var le,ne;for(M||(M=2),B||(B=0),ne=X?Math.min(X*M+B,O.length):O.length,le=B;le<ne;le+=M)V[0]=O[le],V[1]=O[le+1],ee(V,V,ue),O[le]=V[0],O[le+1]=V[1];return O});return Se.forEach=I,Se}function ht(){if(Ce)return P;function d(O){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},d(O)}Ce=1,Object.defineProperty(P,"__esModule",{value:!0}),P.vec4=P.vec3=P.vec2=P.quat2=P.quat=P.mat4=P.mat3=P.mat2d=P.mat2=P.glMatrix=void 0;var i=I(k());P.glMatrix=i;var u=I(H());P.mat2=u;var f=I(re());P.mat2d=f;var y=I(he());P.mat3=y;var m=I(Re());P.mat4=m;var _=I(Ze());P.quat=_;var b=I(Ue());P.quat2=b;var N=I($e());P.vec2=N;var D=I(ge());P.vec3=D;var S=I(Ie());function V(O){if(typeof WeakMap!="function")return null;var M=new WeakMap,B=new WeakMap;return(V=function(X){return X?B:M})(O)}function I(O,M){if(O&&O.__esModule)return O;if(O===null||d(O)!=="object"&&typeof O!="function")return{default:O};var B=V(M);if(B&&B.has(O))return B.get(O);var X={},ee=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ue in O)if(ue!=="default"&&Object.prototype.hasOwnProperty.call(O,ue)){var le=ee?Object.getOwnPropertyDescriptor(O,ue):null;le&&(le.get||le.set)?Object.defineProperty(X,ue,le):X[ue]=O[ue]}return X.default=O,B&&B.set(O,X),X}return P.vec4=S,P}var ft,ut,Rt,We,Ae=ht(),qt=function(){if(ut)return ft;function d(i,u,f,y){this.cx=3*i,this.bx=3*(f-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(y-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=u,this.p2x=f,this.p2y=y}return ut=1,ft=d,d.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,u){if(u===void 0&&(u=1e-6),i<0)return 0;if(i>1)return 1;for(var f=i,y=0;y<8;y++){var m=this.sampleCurveX(f)-i;if(Math.abs(m)<u)return f;var _=this.sampleCurveDerivativeX(f);if(Math.abs(_)<1e-6)break;f-=m/_}var b=0,N=1;for(f=i,y=0;y<20&&(m=this.sampleCurveX(f),!(Math.abs(m-i)<u));y++)i>m?b=f:N=f,f=.5*(N-b)+b;return f},solve:function(i,u){return this.sampleCurveY(this.solveCurveX(i,u))}},ft}(),Gt=w(qt);function Aa(){if(We)return Rt;function d(i,u){this.x=i,this.y=u}return We=1,Rt=d,d.prototype={clone:function(){return new d(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,u){return this.clone()._rotateAround(i,u)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var u=i.x-this.x,f=i.y-this.y;return u*u+f*f},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,u){return Math.atan2(this.x*u-this.y*i,this.x*i+this.y*u)},_matMult:function(i){var u=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=u,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var u=Math.cos(i),f=Math.sin(i),y=f*this.x+u*this.y;return this.x=u*this.x-f*this.y,this.y=y,this},_rotateAround:function(i,u){var f=Math.cos(i),y=Math.sin(i),m=u.y+y*(this.x-u.x)+f*(this.y-u.y);return this.x=u.x+f*(this.x-u.x)-y*(this.y-u.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},d.convert=function(i){return i instanceof d?i:Array.isArray(i)?new d(i[0],i[1]):i},Rt}var It=w(Aa());function ta(d,i){if(Array.isArray(d)){if(!Array.isArray(i)||d.length!==i.length)return!1;for(let u=0;u<d.length;u++)if(!ta(d[u],i[u]))return!1;return!0}if(typeof d=="object"&&d!==null&&i!==null){if(typeof i!="object"||Object.keys(d).length!==Object.keys(i).length)return!1;for(const u in d)if(!ta(d[u],i[u]))return!1;return!0}return d===i}const vt=Math.PI/180,or=180/Math.PI;function Na(d){return d*vt}function za(d){return d*or}const er=[[0,0],[1,0],[1,1],[0,1]];function dr(d){if(d<=0)return 0;if(d>=1)return 1;const i=d*d,u=i*d;return 4*(d<.5?u:3*(d-i)+u-.75)}function cr(d,i,u,f){const y=new Gt(d,i,u,f);return function(m){return y.solve(m)}}const Pr=cr(.25,.1,.25,1);function ka(d,i,u){return Math.min(u,Math.max(i,d))}function jr(d,i,u){return(u=ka((u-d)/(i-d),0,1))*u*(3-2*u)}function pn(d,i,u){const f=u-i,y=((d-i)%f+f)%f+i;return y===i?u:y}function Dn(d,i,u){if(!d.length)return u(null,[]);let f=d.length;const y=new Array(d.length);let m=null;d.forEach((_,b)=>{i(_,(N,D)=>{N&&(m=N),y[b]=D,--f==0&&u(m,y)})})}function Rn(d,...i){for(const u of i)for(const f in u)d[f]=u[f];return d}let wa=1;function Wa(){return wa++}function ca(d){return d<=1?1:Math.pow(2,Math.ceil(Math.log(d)/Math.LN2))}function Qa(d,i){d.forEach(u=>{i[u]&&(i[u]=i[u].bind(i))})}function gr(d,i,u){const f={};for(const y in d)f[y]=i.call(this,d[y],y,d);return f}function qn(d,i,u){const f={};for(const y in d)i.call(this,d[y],y,d)&&(f[y]=d[y]);return f}function Mn(d){return Array.isArray(d)?d.map(Mn):typeof d=="object"&&d?gr(d,Mn):d}const mn={};function en(d){mn[d]||(typeof console<"u"&&console.warn(d),mn[d]=!0)}function Er(d,i,u){return(u.y-d.y)*(i.x-d.x)>(i.y-d.y)*(u.x-d.x)}function As(d){let i=0;for(let u,f,y=0,m=d.length,_=m-1;y<m;_=y++)u=d[y],f=d[_],i+=(f.x-u.x)*(u.y+f.y);return i}function Bi([d,i,u]){const f=Na(i+90),y=Na(u);return{x:d*Math.cos(f)*Math.sin(y),y:d*Math.sin(f)*Math.sin(y),z:d*Math.cos(y),azimuthal:i,polar:u}}function Qi(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Oo(d){const i={};if(d.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,f,y,m)=>{const _=y||m;return i[f]=!_||_.toLowerCase(),""}),i["max-age"]){const u=parseInt(i["max-age"],10);isNaN(u)?delete i["max-age"]:i["max-age"]=u}return i}let Ni=null;function fn(d,i){return[d[4*i],d[4*i+1],d[4*i+2],d[4*i+3]]}function ui(d,i,u,f){for(;i<u;){const y=i+u>>1;d[y]<f?i=y+1:u=y}return i}function Vc(d,i,u,f){for(;i<u;){const y=i+u>>1;d[y]<=f?i=y+1:u=y}return i}function Us(d){return d>0?1/(1.001-d):1+d}function Jt(d){return d>0?1-1/(1.001-d):-d}const xe={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!xe.API_URL)return null;try{const d=new URL(xe.API_URL);return d.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":d.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",RASTERARRAYS_URL_PREFIX:"rasterarrays/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",MESHOPT_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_base_v0.20.wasm",MESHOPT_SIMD_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_simd_v0.20.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",TILES3D_URL_PREFIX:"3dtiles/v1"};function Oe(d){return xe.API_URL_REGEX.test(d)}function rt(d){return xe.API_SPRITE_REGEX.test(d)}let _t,yt,bt,Bt,Et,$t;function Kt(){return _t==null&&(_t=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),_t}const Ht={now:()=>Bt!==void 0?Bt:performance.now(),setNow(d){Bt=d},restoreNow(){Bt=void 0},frame(d){const i=requestAnimationFrame(d);return{cancel:()=>cancelAnimationFrame(i)}},getImageData(d,i=0){const{width:u,height:f}=d;Et||(Et=document.createElement("canvas"));const y=Et.getContext("2d",{willReadFrequently:!0});if(!y)throw new Error("failed to create canvas 2d context");return(u>Et.width||f>Et.height)&&(Et.width=u,Et.height=f),y.clearRect(-i,-i,u+2*i,f+2*i),y.drawImage(d,0,0,u,f),y.getImageData(-i,-i,u+2*i,f+2*i)},resolveURL:d=>(yt||(yt=document.createElement("a")),yt.href=d,yt.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(bt==null&&(bt=window.matchMedia("(prefers-reduced-motion: reduce)")),bt.matches)},hasCanvasFingerprintNoise(){if($t!==void 0)return $t;if(!Kt())return $t=!1,!1;const d=new OffscreenCanvas(85,1),i=d.getContext("2d",{willReadFrequently:!0});let u=0;for(let y=0;y<d.width;++y)i.fillStyle=`rgba(${u++},${u++},${u++}, 255)`,i.fillRect(y,0,1,1);const f=i.getImageData(0,0,d.width,d.height);u=0;for(let y=0;y<f.data.length;++y)if(y%4!=3&&u++!==f.data[y])return $t=!0,!0;return $t=!1,!1}};function Ta(d,i){const u=d.indexOf("?");if(u<0)return`${d}?${new URLSearchParams(i).toString()}`;const f=new URLSearchParams(d.slice(u));for(const y in i)f.set(y,i[y]);return`${d.slice(0,u)}?${f.toString()}`}function Ma(d,i={persistentParams:[]}){const u=d.indexOf("?");if(u<0)return d;const f=new URLSearchParams,y=new URLSearchParams(d.slice(u));for(const _ of i.persistentParams){const b=y.get(_);b&&f.set(_,b)}const m=f.toString();return`${d.slice(0,u)}${m.length>0?`?${m}`:""}`}const Ba="mapbox-tiles";let _r=500,Nr=50;const Vr=["language","worldview","jobid"];let Gr,zn;function Jn(){try{return caches}catch{}}function qr(){const d=Jn();d&&Gr==null&&(Gr=d.open(Ba))}let yn=1/0;const Hr={supported:!1,testSupport:function(d){!Gi&&Vi&&(_s?Do(d):In=d)}};let In,Vi,Gi=!1,_s=!1;const vs=typeof self<"u"?self:{};function Do(d){const i=d.createTexture();d.bindTexture(d.TEXTURE_2D,i);try{if(d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,Vi),d.isContextLost())return;Hr.supported=!0}catch{}d.deleteTexture(i),Gi=!0}vs.document&&(Vi=vs.document.createElement("img"),Vi.onload=function(){In&&Do(In),In=null,_s=!0},Vi.onerror=function(){Gi=!0,In=null},Vi.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const ws={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Iconset:"Iconset",Image:"Image",Model:"Model"};typeof Object.freeze=="function"&&Object.freeze(ws);class ks extends Error{constructor(i,u,f){u===401&&Oe(f)&&(i+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(i),this.status=u,this.url=f}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const sc=Qi()?()=>self.worker&&self.worker.referrer:()=>(location.protocol==="blob:"?parent:self).location.href,Wo=function(d,i){if(!(/^file:/.test(u=d.url)||/^file:/.test(sc())&&!/^\w+:/.test(u))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return function(f,y){const m=new AbortController,_=new Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,referrer:sc(),referrerPolicy:f.referrerPolicy,signal:m.signal});let b=!1,N=!1;const D=(S=_.url).indexOf("sku=")>0&&Oe(S);var S;f.type==="json"&&_.headers.set("Accept","application/json");const V=(O,M,B)=>{if(N)return;if(O&&O.message!=="SecurityError"&&en(O.toString()),M&&B)return I(M);const X=Date.now();fetch(_).then(ee=>{if(ee.ok){const ue=D?ee.clone():null;return I(ee,ue,X)}return y(new ks(ee.statusText,ee.status,f.url))}).catch(ee=>{ee.name!=="AbortError"&&y(new Error(`${ee.message} ${f.url}`))})},I=(O,M,B)=>{(f.type==="arrayBuffer"?O.arrayBuffer():f.type==="json"?O.json():O.text()).then(X=>{N||(M&&B&&function(ee,ue,le){if(qr(),Gr==null)return;const ne=Oo(ue.headers.get("Cache-Control")||"");if(ne["no-store"])return;const pe={status:ue.status,statusText:ue.statusText,headers:new Headers};ue.headers.forEach((Ye,je)=>pe.headers.set(je,Ye)),ne["max-age"]&&pe.headers.set("Expires",new Date(le+1e3*ne["max-age"]).toUTCString());const we=pe.headers.get("Expires");if(!we||new Date(we).getTime()-le<42e4)return;let Pe=Ma(ee.url,{persistentParams:Vr});if(ue.status===206){const Ye=ee.headers.get("Range");if(!Ye)return;pe.status=200,Pe=Ta(Pe,{range:Ye})}(function(Ye,je){if(zn===void 0)try{new Response(new ReadableStream),zn=!0}catch{zn=!1}zn?je(Ye.body):Ye.blob().then(je)})(ue,Ye=>{const je=new Response((qe=ue.status)!==200&&qe!==404&&[101,103,204,205,304].includes(qe)?null:Ye,pe);var qe;qr(),Gr!=null&&Gr.then(mt=>mt.put(Pe,je)).catch(mt=>en(mt.message))})}(_,M,B),b=!0,y(null,X,O.headers.get("Cache-Control"),O.headers.get("Expires")))}).catch(X=>{N||y(new Error(X.message))})};return D?function(O,M){if(qr(),Gr==null)return M(null);Gr.then(B=>{let X=Ma(O.url,{persistentParams:Vr});const ee=O.headers.get("Range");ee&&(X=Ta(X,{range:ee})),B.match(X).then(ue=>{const le=function(ne){if(!ne)return!1;const pe=new Date(ne.headers.get("Expires")||0),we=Oo(ne.headers.get("Cache-Control")||"");return pe>Date.now()&&!we["no-cache"]}(ue);B.delete(X),le&&B.put(X,ue.clone()),M(null,ue,le)}).catch(M)}).catch(M)}(_,V):V(null,null),{cancel:()=>{N=!0,b||m.abort()}}}(d,i);if(Qi()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",d,i,void 0,!0)}var u;return function(f,y){const m=new XMLHttpRequest;m.open(f.method||"GET",f.url,!0),f.type==="arrayBuffer"&&(m.responseType="arraybuffer");for(const _ in f.headers)m.setRequestHeader(_,f.headers[_]);return f.type==="json"&&(m.responseType="text",m.setRequestHeader("Accept","application/json")),m.withCredentials=f.credentials==="include",m.onerror=()=>{y(new Error(m.statusText))},m.onload=()=>{if((m.status>=200&&m.status<300||m.status===0)&&m.response!==null){let _=m.response;if(f.type==="json")try{_=JSON.parse(m.response)}catch(b){return y(b)}y(null,_,m.getResponseHeader("Cache-Control"),m.getResponseHeader("Expires"))}else y(new ks(m.statusText,m.status,f.url))},m.send(f.body),{cancel:()=>m.abort()}}(d,i)},zi=function(d,i){return Wo(Rn(d,{type:"arrayBuffer"}),i)};function ql(d){const i=document.createElement("a");return i.href=d,i.protocol===location.protocol&&i.host===location.host}const Mo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let wd,zc;wd=[],zc=0;const ih=function(d,i){if(Hr.supported&&(d.headers||(d.headers={}),d.headers.accept="image/webp,*/*"),zc>=xe.MAX_PARALLEL_IMAGE_REQUESTS){const m={requestParameters:d,callback:i,cancelled:!1,cancel(){this.cancelled=!0}};return wd.push(m),m}zc++;let u=!1;const f=()=>{if(!u)for(u=!0,zc--;wd.length&&zc<xe.MAX_PARALLEL_IMAGE_REQUESTS;){const m=wd.shift(),{requestParameters:_,callback:b,cancelled:N}=m;N||(m.cancel=ih(_,b).cancel)}},y=zi(d,(m,_,b,N)=>{f(),m?i(m):_&&(self.createImageBitmap?function(D,S){const V=new Blob([new Uint8Array(D)],{type:"image/png"});createImageBitmap(V).then(I=>{S(null,I)}).catch(I=>{S(new Error(`Could not load image because of ${I.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(_,(D,S)=>i(D,S,b,N)):function(D,S){const V=new Image;V.onload=()=>{S(null,V),URL.revokeObjectURL(V.src),V.onload=null,requestAnimationFrame(()=>{V.src=Mo})},V.onerror=()=>S(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const I=new Blob([new Uint8Array(D)],{type:"image/png"});V.src=D.byteLength?URL.createObjectURL(I):Mo}(_,(D,S)=>i(D,S,b,N)))});return{cancel:()=>{y.cancel(),f()}}};var pu,Oc,hl,Xs={exports:{}},Io={exports:{}},Hl={exports:{}},mu=function(){if(hl)return Xs.exports;hl=1;var d=(pu||(pu=1,Io.exports=function(u,f){var y,m,_,b,N,D,S,V;for(m=u.length-(y=3&u.length),_=f,N=3432918353,D=461845907,V=0;V<m;)S=255&u.charCodeAt(V)|(255&u.charCodeAt(++V))<<8|(255&u.charCodeAt(++V))<<16|(255&u.charCodeAt(++V))<<24,++V,_=27492+(65535&(b=5*(65535&(_=(_^=S=(65535&(S=(S=(65535&S)*N+(((S>>>16)*N&65535)<<16)&4294967295)<<15|S>>>17))*D+(((S>>>16)*D&65535)<<16)&4294967295)<<13|_>>>19))+((5*(_>>>16)&65535)<<16)&4294967295))+((58964+(b>>>16)&65535)<<16);switch(S=0,y){case 3:S^=(255&u.charCodeAt(V+2))<<16;case 2:S^=(255&u.charCodeAt(V+1))<<8;case 1:_^=S=(65535&(S=(S=(65535&(S^=255&u.charCodeAt(V)))*N+(((S>>>16)*N&65535)<<16)&4294967295)<<15|S>>>17))*D+(((S>>>16)*D&65535)<<16)&4294967295}return _^=u.length,_=2246822507*(65535&(_^=_>>>16))+((2246822507*(_>>>16)&65535)<<16)&4294967295,_=3266489909*(65535&(_^=_>>>13))+((3266489909*(_>>>16)&65535)<<16)&4294967295,(_^=_>>>16)>>>0}),Io.exports),i=(Oc||(Oc=1,Hl.exports=function(u,f){for(var y,m=u.length,_=f^m,b=0;m>=4;)y=1540483477*(65535&(y=255&u.charCodeAt(b)|(255&u.charCodeAt(++b))<<8|(255&u.charCodeAt(++b))<<16|(255&u.charCodeAt(++b))<<24))+((1540483477*(y>>>16)&65535)<<16),_=1540483477*(65535&_)+((1540483477*(_>>>16)&65535)<<16)^(y=1540483477*(65535&(y^=y>>>24))+((1540483477*(y>>>16)&65535)<<16)),m-=4,++b;switch(m){case 3:_^=(255&u.charCodeAt(b+2))<<16;case 2:_^=(255&u.charCodeAt(b+1))<<8;case 1:_=1540483477*(65535&(_^=255&u.charCodeAt(b)))+((1540483477*(_>>>16)&65535)<<16)}return _=1540483477*(65535&(_^=_>>>13))+((1540483477*(_>>>16)&65535)<<16),(_^=_>>>15)>>>0}),Hl.exports);return Xs.exports=d,Xs.exports.murmur3=d,Xs.exports.murmur2=i,Xs.exports}(),oo=w(mu);class Lo{constructor(i,...u){Rn(this,u[0]||{}),this.type=i}}class Rd extends Lo{constructor(i,u={}){super("error",Rn({error:i},u))}}function ku(d,i,u){u[d]&&u[d].indexOf(i)!==-1||(u[d]=u[d]||[],u[d].push(i))}function mf(d,i,u){if(u&&u[d]){const f=u[d].indexOf(i);f!==-1&&u[d].splice(f,1)}}class $l{on(i,u){return this._listeners=this._listeners||{},ku(i,u,this._listeners),this}off(i,u){return mf(i,u,this._listeners),mf(i,u,this._oneTimeListeners),this}once(i,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},ku(i,u,this._oneTimeListeners),this):new Promise(f=>{this.once(i,f)})}fire(i,u){const f=typeof i=="string"?new Lo(i,u):i,y=f.type;if(this.listens(y)){f.target=this;const m=this._listeners&&this._listeners[y]?this._listeners[y].slice():[];for(const N of m)N.call(this,f);const _=this._oneTimeListeners&&this._oneTimeListeners[y]?this._oneTimeListeners[y].slice():[];for(const N of _)mf(y,N,this._oneTimeListeners),N.call(this,f);const b=this._eventedParent;b&&(Rn(f,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),b.fire(f))}else f instanceof Rd&&console.error(f.error);return this}listens(i){return!!(this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i))}setEventedParent(i,u){return this._eventedParent=i,this._eventedParentData=u,this}}class Fo{constructor(i){typeof i=="string"?this.name=i:(this.name=i.name,this.iconsetId=i.iconsetId)}static from(i){return new Fo(i)}static toString(i){return i.iconsetId?`${i.name}${i.iconsetId}`:i.name}static parse(i){const[u,f]=i.split("");return new Fo({name:u,iconsetId:f})}static isEqual(i,u){return i.name===u.name&&i.iconsetId===u.iconsetId}toString(){return Fo.toString(this)}serialize(){return{name:this.name,iconsetId:this.iconsetId}}}var Bu,sh={},Yo=function(){if(Bu)return sh;Bu=1;var d={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function i(m){return(m=Math.round(m))<0?0:m>255?255:m}function u(m){return i(m[m.length-1]==="%"?parseFloat(m)/100*255:parseInt(m))}function f(m){return(_=m[m.length-1]==="%"?parseFloat(m)/100:parseFloat(m))<0?0:_>1?1:_;var _}function y(m,_,b){return b<0?b+=1:b>1&&(b-=1),6*b<1?m+(_-m)*b*6:2*b<1?_:3*b<2?m+(_-m)*(2/3-b)*6:m}try{sh.parseCSSColor=function(m){var _,b=m.replace(/ /g,"").toLowerCase();if(b in d)return d[b].slice();if(b[0]==="#")return b.length===4?(_=parseInt(b.substr(1),16))>=0&&_<=4095?[(3840&_)>>4|(3840&_)>>8,240&_|(240&_)>>4,15&_|(15&_)<<4,1]:null:b.length===7&&(_=parseInt(b.substr(1),16))>=0&&_<=16777215?[(16711680&_)>>16,(65280&_)>>8,255&_,1]:null;var N=b.indexOf("("),D=b.indexOf(")");if(N!==-1&&D+1===b.length){var S=b.substr(0,N),V=b.substr(N+1,D-(N+1)).split(","),I=1;switch(S){case"rgba":if(V.length!==4)return null;I=f(V.pop());case"rgb":return V.length!==3?null:[u(V[0]),u(V[1]),u(V[2]),I];case"hsla":if(V.length!==4)return null;I=f(V.pop());case"hsl":if(V.length!==3)return null;var O=(parseFloat(V[0])%360+360)%360/360,M=f(V[1]),B=f(V[2]),X=B<=.5?B*(M+1):B+M-B*M,ee=2*B-X;return[i(255*y(ee,X,O+1/3)),i(255*y(ee,X,O)),i(255*y(ee,X,O-1/3)),I];default:return null}}return null}}catch{}return sh}();class bn{constructor(i,u,f,y=1){this.r=i,this.g=u,this.b=f,this.a=y}static parse(i){if(!i)return;if(i instanceof bn)return i;if(typeof i!="string")return;const u=Yo.parseCSSColor(i);return u?new bn(u[0]/255*u[3],u[1]/255*u[3],u[2]/255*u[3],u[3]):void 0}toStringPremultipliedAlpha(){const[i,u,f,y]=this.a===0?[0,0,0,0]:[255*this.r/this.a,255*this.g/this.a,255*this.b/this.a,this.a];return`rgba(${Math.round(i)},${Math.round(u)},${Math.round(f)},${y})`}toString(){const[i,u,f,y]=[this.r,this.g,this.b,this.a];return`rgba(${Math.round(255*i)},${Math.round(255*u)},${Math.round(255*f)},${y})`}toRenderColor(i){const{r:u,g:f,b:y,a:m}=this;return new lo(i,u,f,y,m)}clone(){return new bn(this.r,this.g,this.b,this.a)}}class lo{constructor(i,u,f,y,m){if(i){const _=i.image.height,b=_*_;u=m===0?0:u/m*(_-1),f=m===0?0:f/m*(_-1),y=m===0?0:y/m*(_-1);const N=Math.floor(u),D=Math.floor(f),S=Math.floor(y),V=Math.ceil(u),I=Math.ceil(f),O=Math.ceil(y),M=u-N,B=f-D,X=y-S,ee=i.image.data,ue=4*(N+D*b+S*_),le=4*(N+D*b+O*_),ne=4*(N+I*b+S*_),pe=4*(N+I*b+O*_),we=4*(V+D*b+S*_),Pe=4*(V+D*b+O*_),Ye=4*(V+I*b+S*_),je=4*(V+I*b+O*_);if(ue<0||je>=ee.length)throw new Error("out of range");this.r=fr(fr(fr(ee[ue],ee[le],X),fr(ee[ne],ee[pe],X),B),fr(fr(ee[we],ee[Pe],X),fr(ee[Ye],ee[je],X),B),M)/255*m,this.g=fr(fr(fr(ee[ue+1],ee[le+1],X),fr(ee[ne+1],ee[pe+1],X),B),fr(fr(ee[we+1],ee[Pe+1],X),fr(ee[Ye+1],ee[je+1],X),B),M)/255*m,this.b=fr(fr(fr(ee[ue+2],ee[le+2],X),fr(ee[ne+2],ee[pe+2],X),B),fr(fr(ee[we+2],ee[Pe+2],X),fr(ee[Ye+2],ee[je+2],X),B),M)/255*m,this.a=m}else this.r=u,this.g=f,this.b=y,this.a=m}toArray(){const{r:i,g:u,b:f,a:y}=this;return y===0?[0,0,0,0]:[255*i/y,255*u/y,255*f/y,y]}toHslaArray(){if(this.a===0)return[0,0,0,0];const{r:i,g:u,b:f,a:y}=this,m=Math.min(Math.max(i/y,0),1),_=Math.min(Math.max(u/y,0),1),b=Math.min(Math.max(f/y,0),1),N=Math.min(m,_,b),D=Math.max(m,_,b),S=(N+D)/2;if(N===D)return[0,0,100*S,y];const V=D-N,I=S>.5?V/(2-D-N):V/(D+N);let O=0;return D===m?O=(_-b)/V+(_<b?6:0):D===_?O=(b-m)/V+2:D===b&&(O=(m-_)/V+4),O*=60,[Math.min(Math.max(O,0),360),Math.min(Math.max(100*I,0),100),Math.min(Math.max(100*S,0),100),y]}toArray01(){const{r:i,g:u,b:f,a:y}=this;return y===0?[0,0,0,0]:[i/y,u/y,f/y,y]}toArray01Scaled(i){const{r:u,g:f,b:y,a:m}=this;return m===0?[0,0,0]:[u/m*i,f/m*i,y/m*i]}toArray01PremultipliedAlpha(){const{r:i,g:u,b:f,a:y}=this;return[i,u,f,y]}toArray01Linear(){const{r:i,g:u,b:f,a:y}=this;return y===0?[0,0,0,0]:[Math.pow(i/y,2.2),Math.pow(u/y,2.2),Math.pow(f/y,2.2),y]}}function fr(d,i,u){return d*(1-u)+i*u}function Dc(d,i,u){return d.map((f,y)=>fr(f,i[y],u))}function gn(d){return d*d*d*d*d}bn.black=new bn(0,0,0,1),bn.white=new bn(1,1,1,1),bn.transparent=new bn(0,0,0,0),bn.red=new bn(1,0,0,1),bn.blue=new bn(0,0,1,1);var oh=Object.freeze({__proto__:null,array:Dc,color:function(d,i,u){return new bn(fr(d.r,i.r,u),fr(d.g,i.g,u),fr(d.b,i.b,u),fr(d.a,i.a,u))},easeIn:gn,number:fr});function Tn(d,...i){for(const u of i)for(const f in u)d[f]=u[f];return d}class Bs extends Error{constructor(i,u){super(u),this.message=u,this.key=i}}class oc{constructor(i,u=[]){this.parent=i,this.bindings={};for(const[f,y]of u)this.bindings[f]=y}concat(i){return new oc(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}const lc={kind:"null"},Xa={kind:"number"},an={kind:"string"},An={kind:"boolean"},Gs={kind:"color"},Td={kind:"object"},un={kind:"value"},Uo={kind:"collator"},yu={kind:"formatted"},Rs={kind:"resolvedImage"};function Li(d,i){return{kind:"array",itemType:d,N:i}}function bi(d){if(d.kind==="array"){const i=bi(d.itemType);return typeof d.N=="number"?`array<${i}, ${d.N}>`:d.itemType.kind==="value"?"array":`array<${i}>`}return d.kind}const uo=[lc,Xa,an,An,Gs,yu,Td,Li(un),Rs];function Sd(d,i){if(i.kind==="error")return null;if(d.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!Sd(d.itemType,i.itemType))&&(typeof d.N!="number"||d.N===i.N))return null}else{if(d.kind===i.kind)return null;if(d.kind==="value"){for(const u of uo)if(!Sd(u,i))return null}}return`Expected ${bi(d)} but found ${bi(i)} instead.`}function lh(d,i){return i.some(u=>u.kind===d.kind)}function uc(d,i){return i.some(u=>u==="null"?d===null:u==="array"?Array.isArray(d):u==="object"?d&&!Array.isArray(d)&&typeof d=="object":u===typeof d)}class cc{constructor(i,u,f){this.sensitivity=i?u?"variant":"case":u?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,u){return this.collator.compare(i,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Xo{constructor(i,u,f,y,m){this.text=i.normalize?i.normalize():i,this.image=u,this.scale=f,this.fontStack=y,this.textColor=m}}class us{constructor(i){this.sections=i}static fromString(i){return new us([new Xo(i,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||!!i.image&&i.image.hasPrimary())}static factory(i){return i instanceof us?i:us.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}serialize(){const i=["format"];for(const u of this.sections){if(u.image){const y=u.image.getPrimary().id.toString();i.push(["image",y]);continue}i.push(u.text);const f={};u.fontStack&&(f["text-font"]=["literal",u.fontStack.split(",")]),u.scale&&(f["font-scale"]=u.scale),u.textColor&&(f["text-color"]=["rgba"].concat(u.textColor.toRenderColor(null).toArray())),i.push(f)}return i}}class Gu{constructor(i,u={}){if(this.id=Fo.from(i),this.options=Object.assign({},u),u.transform){const{a:f,b:y,c:m,d:_,e:b,f:N}=u.transform;this.options.transform=new DOMMatrix([f,y,m,_,b,N])}else this.options.transform=new DOMMatrix([1,0,0,1,0,0])}toString(){const{a:i,b:u,c:f,d:y,e:m,f:_}=this.options.transform;return JSON.stringify({name:this.id.name,iconsetId:this.id.iconsetId,params:this.options.params,transform:{a:i,b:u,c:f,d:y,e:m,f:_}})}static parse(i){let u,f,y,m;try{({name:u,iconsetId:f,params:y,transform:m}=JSON.parse(i)||{})}catch{return null}if(!u)return null;const{a:_,b,c:N,d:D,e:S,f:V}=m||{};return new Gu({name:u,iconsetId:f},{params:y,transform:new DOMMatrix([_,b,N,D,S,V])})}scaleSelf(i){return this.options.transform.scaleSelf(i),this}}class Ts{constructor(i,u,f,y,m=!1){this.primaryId=Fo.from(i),this.primaryOptions=u,f&&(this.secondaryId=Fo.from(f)),this.secondaryOptions=y,this.available=m}toString(){return this.primaryId&&this.secondaryId?`[${this.primaryId.name},${this.secondaryId.name}]`:this.primaryId.name}hasPrimary(){return!!this.primaryId}getPrimary(){return new Gu(this.primaryId,this.primaryOptions)}hasSecondary(){return!!this.secondaryId}getSecondary(){return this.secondaryId?new Gu(this.secondaryId,this.secondaryOptions):null}static from(i){return typeof i=="string"?Ts.build({name:i}):i}static build(i,u,f,y){return!i||typeof i=="object"&&!("name"in i)?null:new Ts(i,f,u,y)}}function xl(d,i,u,f){return typeof d=="number"&&d>=0&&d<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof u=="number"&&u>=0&&u<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[d,i,u,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[d,i,u,f]:[d,i,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Jo(d){if(d===null||typeof d=="string"||typeof d=="boolean"||typeof d=="number"||d instanceof bn||d instanceof cc||d instanceof us||d instanceof Ts)return!0;if(Array.isArray(d)){for(const i of d)if(!Jo(i))return!1;return!0}if(typeof d=="object"){for(const i in d)if(!Jo(d[i]))return!1;return!0}return!1}function ji(d){if(d===null)return lc;if(typeof d=="string")return an;if(typeof d=="boolean")return An;if(typeof d=="number")return Xa;if(d instanceof bn)return Gs;if(d instanceof cc)return Uo;if(d instanceof us)return yu;if(d instanceof Ts)return Rs;if(Array.isArray(d)){const i=d.length;let u;for(const f of d){const y=ji(f);if(u){if(u===y)continue;u=un;break}u=y}return Li(u||un,i)}return Td}function js(d){const i=typeof d;return d===null?"":i==="string"||i==="number"||i==="boolean"?String(d):d instanceof bn?d.toStringPremultipliedAlpha():d instanceof us||d instanceof Ts?d.toString():JSON.stringify(d)}class Kl{constructor(i,u){this.type=i,this.value=u}static parse(i,u){if(i.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!Jo(i[1]))return u.error("invalid value");const f=i[1];let y=ji(f);const m=u.expectedType;return y.kind!=="array"||y.N!==0||!m||m.kind!=="array"||typeof m.N=="number"&&m.N!==0||(y=m),new Kl(y,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof bn?["rgba"].concat(this.value.toRenderColor(null).toArray()):this.value instanceof us?this.value.serialize():this.value}}class ns{constructor(i){this.name="ExpressionEvaluationError",this.message=i}toJSON(){return this.message}}const Dh={string:an,number:Xa,boolean:An,object:Td};class ko{constructor(i,u){this.type=i,this.args=u}static parse(i,u){if(i.length<2)return u.error("Expected at least one argument.");let f,y=1;const m=i[0];if(m==="array"){let b,N;if(i.length>2){const D=i[1];if(typeof D!="string"||!(D in Dh)||D==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);b=Dh[D],y++}else b=un;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return u.error('The length argument to "array" must be a positive integer literal',2);N=i[2],y++}f=Li(b,N)}else f=Dh[m];const _=[];for(;y<i.length;y++){const b=u.parse(i[y],y,un);if(!b)return null;_.push(b)}return new ko(f,_)}evaluate(i){for(let u=0;u<this.args.length;u++){const f=this.args[u].evaluate(i);if(!Sd(this.type,ji(f)))return f;if(u===this.args.length-1)throw new ns(`The expression ${JSON.stringify(this.args[u].serialize())} evaluated to ${bi(ji(f))} but was expected to be of type ${bi(this.type)}.`)}return null}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=this.type,u=[i.kind];if(i.kind==="array"){const f=i.itemType;if(f.kind==="string"||f.kind==="number"||f.kind==="boolean"){u.push(f.kind);const y=i.N;(typeof y=="number"||this.args.length>1)&&u.push(y)}}return u.concat(this.args.map(f=>f.serialize()))}}class Cd{constructor(i){this.type=yu,this.sections=i}static parse(i,u){if(i.length<2)return u.error("Expected at least one argument.");const f=i[1];if(!Array.isArray(f)&&typeof f=="object")return u.error("First argument must be an image or text section.");const y=[];let m=!1;for(let _=1;_<=i.length-1;++_){const b=i[_];if(m&&typeof b=="object"&&!Array.isArray(b)){m=!1;let N=null;if(b["font-scale"]&&(N=u.parseObjectValue(b["font-scale"],_,"font-scale",Xa),!N))return null;let D=null;if(b["text-font"]&&(D=u.parseObjectValue(b["text-font"],_,"text-font",Li(an)),!D))return null;let S=null;if(b["text-color"]&&(S=u.parseObjectValue(b["text-color"],_,"text-color",Gs),!S))return null;const V=y[y.length-1];V.scale=N,V.font=D,V.textColor=S}else{const N=u.parse(i[_],_,un);if(!N)return null;const D=N.type.kind;if(D!=="string"&&D!=="value"&&D!=="null"&&D!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");m=!0,y.push({content:N,scale:null,font:null,textColor:null})}}return new Cd(y)}evaluate(i){return new us(this.sections.map(u=>{const f=u.content.evaluate(i);return ji(f)===Rs?new Xo("",f,null,null,null):new Xo(js(f),null,u.scale?u.scale.evaluate(i):null,u.font?u.font.evaluate(i).join(","):null,u.textColor?u.textColor.evaluate(i):null)}))}eachChild(i){for(const u of this.sections)i(u.content),u.scale&&i(u.scale),u.font&&i(u.font),u.textColor&&i(u.textColor)}outputDefined(){return!1}serialize(){const i=["format"];for(const u of this.sections){i.push(u.content.serialize());const f={};u.scale&&(f["font-scale"]=u.scale.serialize()),u.font&&(f["text-font"]=u.font.serialize()),u.textColor&&(f["text-color"]=u.textColor.serialize()),i.push(f)}return i}}class gu{constructor(i,u,f,y){this._imageWarnHistory={},this.type=Rs,this.namePrimary=i,this.nameSecondary=u,f&&(this.paramsPrimary=f.params,this.iconsetIdPrimary=f.iconset?f.iconset.id:void 0),y&&(this.paramsSecondary=y.params,this.iconsetIdSecondary=y.iconset?y.iconset.id:void 0)}static parse(i,u){if(i.length<2)return u.error("Expected two or more arguments.");let f=1;const y=[];function m(){if(f<i.length){const b=u.parse(i[f],f++,an);return b?(y.push({image:b,options:{}}),!0):(u.error(y.length?"Secondary image variant is not a string.":"No image name provided."),!1)}return!0}function _(){if(f<i.length){const N=i[f];if((b=N)===null||typeof b!="object"||Array.isArray(b))return!0;const D=N.params,S=N.iconset,V=u.concat(f);if(!D&&!S)return f++,!0;if(D){if(typeof D!="object"||D.constructor!==Object)return V.error('Image options "params" should be an object'),!1;const I={},O=V.concat(void 0,"params");for(const M in D){if(!M)return O.error("Image parameter name should be non-empty"),!1;const B=O.concat(void 0,M).parse(D[M],void 0,Gs,void 0,{typeAnnotation:"coerce"});if(!B)return!1;I[M]=B}y[y.length-1].options.params=I}if(S){if(typeof S!="object"||S.constructor!==Object)return V.error('Image options "iconset" should be an object'),!1;if(!S.id)return V.error('Image options "iconset" should have an "id" property'),!1;y[y.length-1].options.iconset=S}return f++,!0}var b;return!0}for(let b=0;b<2;b++)if(!m()||!_())return;return new gu(y[0].image,y[1]?y[1].image:void 0,y[0].options,y[1]?y[1].options:void 0)}evaluateParams(i,u){const f={};if(u){for(const y in u)if(u[y])try{f[y]=u[y].evaluate(i)}catch{continue}if(Object.keys(f).length!==0)return{params:f}}}evaluate(i){const u={name:this.namePrimary.evaluate(i),iconsetId:this.iconsetIdPrimary},f=this.nameSecondary?{name:this.nameSecondary.evaluate(i),iconsetId:this.iconsetIdSecondary}:void 0,y=Ts.build(u,f,this.paramsPrimary?this.evaluateParams(i,this.paramsPrimary):void 0,this.paramsSecondary?this.evaluateParams(i,this.paramsSecondary):void 0);if(y&&i.availableImages){const m=y.getPrimary().id;if(y.available=i.availableImages.some(_=>Fo.isEqual(_,m)),y.available){const _=y.getSecondary()?y.getSecondary().id:null;_&&(y.available=i.availableImages.some(b=>Fo.isEqual(b,_)))}}return y}eachChild(i){if(i(this.namePrimary),this.paramsPrimary)for(const u in this.paramsPrimary)this.paramsPrimary[u]&&i(this.paramsPrimary[u]);if(this.nameSecondary&&(i(this.nameSecondary),this.paramsSecondary))for(const u in this.paramsSecondary)this.paramsSecondary[u]&&i(this.paramsSecondary[u])}outputDefined(){return!1}serializeOptions(i,u){const f={};if(u&&(f.iconset={id:u}),i){f.params={};for(const y in i)i[y]&&(f.params[y]=i[y].serialize())}return Object.keys(f).length>0?f:void 0}serialize(){const i=["image",this.namePrimary.serialize()];if(this.paramsPrimary||this.iconsetIdPrimary){const u=this.serializeOptions(this.paramsPrimary,this.iconsetIdPrimary);u&&i.push(u)}if(this.nameSecondary&&(i.push(this.nameSecondary.serialize()),this.paramsSecondary||this.iconsetIdSecondary)){const u=this.serializeOptions(this.paramsSecondary,this.iconsetIdSecondary);u&&i.push(u)}return i}}function Au(d){return d instanceof Number?"number":d instanceof String?"string":d instanceof Boolean?"boolean":Array.isArray(d)?"array":d===null?"null":typeof d}const Yf={"to-boolean":An,"to-color":Gs,"to-number":Xa,"to-string":an};class Wl{constructor(i,u){this.type=i,this.args=u}static parse(i,u){if(i.length<2)return u.error("Expected at least one argument.");const f=i[0],y=[];let m=lc;if(f==="to-array"){if(!Array.isArray(i[1]))return null;const _=i[1].length;if(u.expectedType){if(u.expectedType.kind!=="array")return u.error(`Expected ${u.expectedType.kind} but found array.`);m=Li(u.expectedType.itemType,_)}else{if(!(_>0&&Jo(i[1][0])))return null;m=Li(ji(i[1][0]),_)}for(let b=0;b<_;b++){const N=i[1][b];let D;if(Au(N)==="array")D=u.parse(N,void 0,m.itemType);else{const S=Au(N);if(S!==m.itemType.kind)return u.error(`Expected ${m.itemType.kind} but found ${S}.`);D=u.registry.literal.parse(["literal",N===void 0?null:N],u)}if(!D)return null;y.push(D)}}else{if((f==="to-boolean"||f==="to-string")&&i.length!==2)return u.error("Expected one argument.");m=Yf[f];for(let _=1;_<i.length;_++){const b=u.parse(i[_],_,un);if(!b)return null;y.push(b)}}return new Wl(m,y)}evaluate(i){if(this.type.kind==="boolean")return!!this.args[0].evaluate(i);if(this.type.kind==="color"){let u,f;for(const y of this.args){if(u=y.evaluate(i),f=null,u instanceof bn)return u;if(typeof u=="string"){const m=i.parseColor(u);if(m)return m}else if(Array.isArray(u)&&(f=u.length<3||u.length>4?`Invalid rbga value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:xl(u[0],u[1],u[2],u[3]),!f))return new bn(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new ns(f||`Could not parse color from value '${typeof u=="string"?u:String(JSON.stringify(u))}'`)}if(this.type.kind==="number"){let u=null;for(const f of this.args){if(u=f.evaluate(i),u===null)return 0;const y=Number(u);if(!isNaN(y))return y}throw new ns(`Could not convert ${JSON.stringify(u)} to number.`)}return this.type.kind==="formatted"?us.fromString(js(this.args[0].evaluate(i))):this.type.kind==="resolvedImage"?Ts.build(js(this.args[0].evaluate(i))):this.type.kind==="array"?this.args.map(u=>u.evaluate(i)):js(this.args[0].evaluate(i))}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Cd([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new gu(this.args[0]).serialize();const i=this.type.kind==="array"?[]:[`to-${this.type.kind}`];return this.eachChild(u=>{i.push(u.serialize())}),i}}const jm=["Unknown","Point","LineString","Polygon"];class bd{constructor(i,u){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=i,this.options=u}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?jm[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(i){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const i=this.featureDistanceData.center,u=this.featureDistanceData.scale,{x:f,y}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(f*u-i[0])+this.featureDistanceData.bearing[1]*(y*u-i[1])}return 0}parseColor(i){let u=this._parseColorCache[i];return u||(u=this._parseColorCache[i]=bn.parse(i)),u}getConfig(i){return this.options?this.options.get(i):null}}class Zs{constructor(i,u,f,y,m){this.name=i,this.type=u,this._evaluate=f,this.args=y,this._overloadIndex=m}evaluate(i){if(!this._evaluate){const u=Zs.definitions[this.name];this._evaluate=Array.isArray(u)?u[2]:u.overloads[this._overloadIndex][1]}return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(i=>i.serialize()))}static parse(i,u){const f=i[0],y=Zs.definitions[f];if(!y)return u.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const m=Array.isArray(y)?y[0]:y.type,_=Array.isArray(y)?[[y[1],y[2]]]:y.overloads,b=[];let N=null,D=-1;for(const[S,V]of _){if(Array.isArray(S)&&S.length!==i.length-1)continue;b.push(S),D++,N=new eu(u.registry,u.path,null,u.scope,void 0,u._scope,u.options);const I=[];let O=!1;for(let M=1;M<i.length;M++){const B=i[M],X=Array.isArray(S)?S[M-1]:S.type,ee=N.parse(B,1+I.length,X);if(!ee){O=!0;break}I.push(ee)}if(!O)if(Array.isArray(S)&&S.length!==I.length)N.error(`Expected ${S.length} arguments, but found ${I.length} instead.`);else{for(let M=0;M<I.length;M++){const B=Array.isArray(S)?S[M]:S.type,X=I[M];N.concat(M+1).checkSubtype(B,X.type)}if(N.errors.length===0)return new Zs(f,m,V,I,D)}}if(b.length===1)u.errors.push(...N.errors);else{const S=(b.length?b:_.map(([I])=>I)).map(yf).join(" | "),V=[];for(let I=1;I<i.length;I++){const O=u.parse(i[I],1+V.length);if(!O)return null;V.push(bi(O.type))}u.error(`Expected arguments of type ${S}, but found (${V.join(", ")}) instead.`)}return null}static register(i,u){Zs.definitions=u;for(const f in u)i[f]=Zs}}function yf(d){return Array.isArray(d)?`(${d.map(bi).join(", ")})`:`(${bi(d.type)}...)`}class Yl{constructor(i,u,f){this.type=Uo,this.locale=f,this.caseSensitive=i,this.diacriticSensitive=u}static parse(i,u){if(i.length!==2)return u.error("Expected one argument.");const f=i[1];if(typeof f!="object"||Array.isArray(f))return u.error("Collator options argument must be an object.");const y=f["case-sensitive"]===void 0?u.parse(!1,1,An):u.parseObjectValue(f["case-sensitive"],1,"case-sensitive",An);if(!y)return null;const m=f["diacritic-sensitive"]===void 0?u.parse(!1,1,An):u.parseObjectValue(f["diacritic-sensitive"],1,"diacritic-sensitive",An);if(!m)return null;let _=null;return f.locale&&(_=u.parseObjectValue(f.locale,1,"locale",an),!_)?null:new Yl(y,m,_)}evaluate(i){return new cc(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}serialize(){const i={};return i["case-sensitive"]=this.caseSensitive.serialize(),i["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(i.locale=this.locale.serialize()),["collator",i]}}function gf(d,i,u=0,f=d.length-1,y=Ke){for(;f>u;){if(f-u>600){const N=f-u+1,D=i-u+1,S=Math.log(N),V=.5*Math.exp(2*S/3),I=.5*Math.sqrt(S*V*(N-V)/N)*(D-N/2<0?-1:1);gf(d,i,Math.max(u,Math.floor(i-D*V/N+I)),Math.min(f,Math.floor(i+(N-D)*V/N+I)),y)}const m=d[i];let _=u,b=f;for(oe(d,u,i),y(d[f],m)>0&&oe(d,u,f);_<b;){for(oe(d,_,b),_++,b--;y(d[_],m)<0;)_++;for(;y(d[b],m)>0;)b--}y(d[u],m)===0?oe(d,u,b):(b++,oe(d,b,f)),b<=i&&(u=b+1),i<=b&&(f=b-1)}}function oe(d,i,u){const f=d[i];d[i]=d[u],d[u]=f}function Ke(d,i){return d<i?-1:d>i?1:0}function Dt(d){let i=0;for(let u,f,y=0,m=d.length,_=m-1;y<m;_=y++)u=d[y],f=d[_],i+=(f.x-u.x)*(u.y+f.y);return i}function Yt(d,i){d[0]=Math.min(d[0],i[0]),d[1]=Math.min(d[1],i[1]),d[2]=Math.max(d[2],i[0]),d[3]=Math.max(d[3],i[1])}function ha(d,i){return!(d[0]<=i[0]||d[2]>=i[2]||d[1]<=i[1]||d[3]>=i[3])}function Da(d,i,u){const f=d[0]-i[0],y=d[1]-i[1],m=d[0]-u[0],_=d[1]-u[1];return f*_-m*y==0&&f*m<=0&&y*_<=0}function rr(d,i,u=!1){let f=!1;for(let b=0,N=i.length;b<N;b++){const D=i[b];for(let S=0,V=D.length,I=V-1;S<V;I=S++){const O=D[I],M=D[S];if(Da(d,O,M))return u;(m=O)[1]>(y=d)[1]!=(_=M)[1]>y[1]&&y[0]<(_[0]-m[0])*(y[1]-m[1])/(_[1]-m[1])+m[0]&&(f=!f)}}var y,m,_;return f}function wr(d,i,u,f){const y=f[0]-u[0],m=f[1]-u[1],_=(d[0]-u[0])*m-y*(d[1]-u[1]),b=(i[0]-u[0])*m-y*(i[1]-u[1]);return _>0&&b<0||_<0&&b>0}function $r(d,i,u,f){return(y=[f[0]-u[0],f[1]-u[1]])[0]*(m=[i[0]-d[0],i[1]-d[1]])[1]-y[1]*m[0]!=0&&!(!wr(d,i,u,f)||!wr(u,f,d,i));var y,m}const Sn=8192;function Nn(d,i){const u=(180+d[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d[1]*Math.PI/360)))/360,y=Math.pow(2,i.z);return[Math.round(u*y*Sn),Math.round(f*y*Sn)]}function mi(d,i){for(let u=0;u<i.length;u++)if(rr(d,i[u]))return!0;return!1}function Ss(d,i,u){for(const f of u)for(let y=0,m=f.length,_=m-1;y<m;_=y++)if($r(d,i,f[_],f[y]))return!0;return!1}function Cs(d,i){for(let u=0;u<d.length;++u)if(!rr(d[u],i))return!1;for(let u=0;u<d.length-1;++u)if(Ss(d[u],d[u+1],i))return!1;return!0}function Js(d,i){for(let u=0;u<i.length;u++)if(Cs(d,i[u]))return!0;return!1}function es(d,i,u){const f=[];for(let y=0;y<d.length;y++){const m=[];for(let _=0;_<d[y].length;_++){const b=Nn(d[y][_],u);Yt(i,b),m.push(b)}f.push(m)}return f}function br(d,i,u){const f=[];for(let y=0;y<d.length;y++){const m=es(d[y],i,u);f.push(m)}return f}function ir(d,i,u,f){if(d[0]<u[0]||d[0]>u[2]){const y=.5*f;let m=d[0]-u[0]>y?-f:u[0]-d[0]>y?f:0;m===0&&(m=d[0]-u[2]>y?-f:u[2]-d[0]>y?f:0),d[0]+=m}Yt(i,d)}function fl(d,i,u,f){const y=Math.pow(2,f.z)*Sn,m=[f.x*Sn,f.y*Sn],_=[];if(!d)return _;for(const b of d)for(const N of b){const D=[N.x+m[0],N.y+m[1]];ir(D,i,u,y),_.push(D)}return _}function Rr(d,i,u,f){const y=Math.pow(2,f.z)*Sn,m=[f.x*Sn,f.y*Sn],_=[];if(!d)return _;for(const N of d){const D=[];for(const S of N){const V=[S.x+m[0],S.y+m[1]];Yt(i,V),D.push(V)}_.push(D)}if(i[2]-i[0]<=y/2){(b=i)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(const N of _)for(const D of N)ir(D,i,u,y)}var b;return _}class _u{constructor(i,u){this.type=An,this.geojson=i,this.geometries=u}static parse(i,u){if(i.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(Jo(i[1])){const f=i[1];if(f.type==="FeatureCollection")for(let y=0;y<f.features.length;++y){const m=f.features[y].geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new _u(f,f.features[y].geometry)}else if(f.type==="Feature"){const y=f.geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new _u(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new _u(f,f)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(u,f){const y=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],_=u.canonicalID();if(!_)return!1;if(f.type==="Polygon"){const b=es(f.coordinates,m,_),N=fl(u.geometry(),y,m,_);if(!ha(y,m))return!1;for(const D of N)if(!rr(D,b))return!1}if(f.type==="MultiPolygon"){const b=br(f.coordinates,m,_),N=fl(u.geometry(),y,m,_);if(!ha(y,m))return!1;for(const D of N)if(!mi(D,b))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(u,f){const y=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],_=u.canonicalID();if(!_)return!1;if(f.type==="Polygon"){const b=es(f.coordinates,m,_),N=Rr(u.geometry(),y,m,_);if(!ha(y,m))return!1;for(const D of N)if(!Cs(D,b))return!1}if(f.type==="MultiPolygon"){const b=br(f.coordinates,m,_),N=Rr(u.geometry(),y,m,_);if(!ha(y,m))return!1;for(const D of N)if(!Js(D,b))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}const Xl={kilometers:1,miles:1e3/1609.344,nauticalmiles:1e3/1852,meters:1e3,metres:1e3,yards:1e3/.9144,feet:1e3/.3048,inches:1e3/.0254},vr=1/298.257223563,uh=vr*(2-vr),Jl=Math.PI/180;class dc{static fromTile(i,u,f){const y=Math.PI*(1-2*(i+.5)/Math.pow(2,u)),m=Math.atan(.5*(Math.exp(y)-Math.exp(-y)))/Jl;return new dc(m,f)}static get units(){return Xl}constructor(i,u){if(i===void 0)throw new Error("No latitude given.");if(u&&!Xl[u])throw new Error(`Unknown unit ${u}. Use one of: ${Object.keys(Xl).join(", ")}`);const f=6378.137*Jl*(u?Xl[u]:1),y=Math.cos(i*Jl),m=1/(1-uh*(1-y*y)),_=Math.sqrt(m);this.kx=f*_*y,this.ky=f*_*m*(1-uh)}distance(i,u){const f=Ai(i[0]-u[0])*this.kx,y=(i[1]-u[1])*this.ky;return Math.sqrt(f*f+y*y)}bearing(i,u){const f=Ai(u[0]-i[0])*this.kx;return Math.atan2(f,(u[1]-i[1])*this.ky)/Jl}destination(i,u,f){const y=f*Jl;return this.offset(i,Math.sin(y)*u,Math.cos(y)*u)}offset(i,u,f){return[i[0]+u/this.kx,i[1]+f/this.ky]}lineDistance(i){let u=0;for(let f=0;f<i.length-1;f++)u+=this.distance(i[f],i[f+1]);return u}area(i){let u=0;for(let f=0;f<i.length;f++){const y=i[f];for(let m=0,_=y.length,b=_-1;m<_;b=m++)u+=Ai(y[m][0]-y[b][0])*(y[m][1]+y[b][1])*(f?-1:1)}return Math.abs(u)/2*this.kx*this.ky}along(i,u){let f=0;if(u<=0)return i[0];for(let y=0;y<i.length-1;y++){const m=i[y],_=i[y+1],b=this.distance(m,_);if(f+=b,f>u)return bs(m,_,(u-(f-b))/b)}return i[i.length-1]}pointToSegmentDistance(i,u,f){let[y,m]=u,_=Ai(f[0]-y)*this.kx,b=(f[1]-m)*this.ky;if(_!==0||b!==0){const N=(Ai(i[0]-y)*this.kx*_+(i[1]-m)*this.ky*b)/(_*_+b*b);N>1?(y=f[0],m=f[1]):N>0&&(y+=_/this.kx*N,m+=b/this.ky*N)}return _=Ai(i[0]-y)*this.kx,b=(i[1]-m)*this.ky,Math.sqrt(_*_+b*b)}pointOnLine(i,u){let f=1/0,y=i[0][0],m=i[0][1],_=0,b=0;for(let N=0;N<i.length-1;N++){let D=i[N][0],S=i[N][1],V=Ai(i[N+1][0]-D)*this.kx,I=(i[N+1][1]-S)*this.ky,O=0;V===0&&I===0||(O=(Ai(u[0]-D)*this.kx*V+(u[1]-S)*this.ky*I)/(V*V+I*I),O>1?(D=i[N+1][0],S=i[N+1][1]):O>0&&(D+=V/this.kx*O,S+=I/this.ky*O)),V=Ai(u[0]-D)*this.kx,I=(u[1]-S)*this.ky;const M=V*V+I*I;M<f&&(f=M,y=D,m=S,_=N,b=O)}return{point:[y,m],index:_,t:Math.max(0,Math.min(1,b))}}lineSlice(i,u,f){let y=this.pointOnLine(f,i),m=this.pointOnLine(f,u);if(y.index>m.index||y.index===m.index&&y.t>m.t){const D=y;y=m,m=D}const _=[y.point],b=y.index+1,N=m.index;!xd(f[b],_[0])&&b<=N&&_.push(f[b]);for(let D=b+1;D<=N;D++)_.push(f[D]);return xd(f[N],m.point)||_.push(m.point),_}lineSliceAlong(i,u,f){let y=0;const m=[];for(let _=0;_<f.length-1;_++){const b=f[_],N=f[_+1],D=this.distance(b,N);if(y+=D,y>i&&m.length===0&&m.push(bs(b,N,(i-(y-D))/D)),y>=u)return m.push(bs(b,N,(u-(y-D))/D)),m;y>i&&m.push(N)}return m}bufferPoint(i,u){const f=u/this.ky,y=u/this.kx;return[i[0]-y,i[1]-f,i[0]+y,i[1]+f]}bufferBBox(i,u){const f=u/this.ky,y=u/this.kx;return[i[0]-y,i[1]-f,i[2]+y,i[3]+f]}insideBBox(i,u){return Ai(i[0]-u[0])>=0&&Ai(i[0]-u[2])<=0&&i[1]>=u[1]&&i[1]<=u[3]}}function xd(d,i){return d[0]===i[0]&&d[1]===i[1]}function bs(d,i,u){const f=Ai(i[0]-d[0]);return[d[0]+f*u,d[1]+(i[1]-d[1])*u]}function Ai(d){for(;d<-180;)d+=360;for(;d>180;)d-=360;return d}class hc{constructor(i=[],u=(f,y)=>f<y?-1:f>y?1:0){if(this.data=i,this.length=this.data.length,this.compare=u,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(i){this.data.push(i),this._up(this.length++)}pop(){if(this.length===0)return;const i=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:u,compare:f}=this,y=u[i];for(;i>0;){const m=i-1>>1,_=u[m];if(f(y,_)>=0)break;u[i]=_,i=m}u[i]=y}_down(i){const{data:u,compare:f}=this,y=this.length>>1,m=u[i];for(;i<y;){let _=1+(i<<1);const b=_+1;if(b<this.length&&f(u[b],u[_])<0&&(_=b),f(u[_],m)>=0)break;u[i]=u[_],i=_}u[i]=m}}var Va=8192;function Pd(d,i){return i.dist-d.dist}const qs=100,co=50;function Af(d){const i=[1/0,1/0,-1/0,-1/0];if(i.length!==d.length)return!1;for(let u=0;u<i.length;u++)if(i[u]!==d[u])return!1;return!0}function Mh(d){return d[1]-d[0]+1}function ho(d,i){const u=d[1]>=d[0]&&d[1]<i;return u||console.warn("Distance Expression: Index is out of range"),u}function Os(d,i){if(d[0]>d[1])return[null,null];const u=Mh(d);if(i){if(u===2)return[d,null];const f=Math.floor(u/2);return[[d[0],d[0]+f],[d[0]+f,d[1]]]}{if(u===1)return[d,null];const f=Math.floor(u/2)-1;return[[d[0],d[0]+f],[d[0]+f+1,d[1]]]}}function Pl(d,i){const u=[1/0,1/0,-1/0,-1/0];if(!ho(i,d.length))return u;for(let f=i[0];f<=i[1];++f)Yt(u,d[f]);return u}function Mc(d){const i=[1/0,1/0,-1/0,-1/0];for(let u=0;u<d.length;++u)for(let f=0;f<d[u].length;++f)Yt(i,d[u][f]);return i}function Ql(d,i,u){if(Af(d)||Af(i))return NaN;let f=0,y=0;return d[2]<i[0]&&(f=i[0]-d[2]),d[0]>i[2]&&(f=d[0]-i[2]),d[1]>i[3]&&(y=d[1]-i[3]),d[3]<i[1]&&(y=i[1]-d[3]),u.distance([0,0],[f,y])}function ch(d){return 360*d-180}function El(d){return 360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90}function Ro(d,i){const u=Math.pow(2,i.z),f=(d.y/Va+i.y)/u;return[ch((d.x/Va+i.x)/u),El(f)]}function Ed(d,i){const u=[];for(let f=0;f<d.length;++f)u.push(Ro(d[f],i));return u}function Ic(d,i,u){const f=u.pointOnLine(i,d).point;return u.distance(d,f)}function Nl(d,i,u,f,y){const m=u.slice(f[0],f[1]+1);let _=1/0;for(let b=i[0];b<=i[1];++b)if((_=Math.min(_,Ic(d[b],m,y)))===0)return 0;return _}function fc(d,i,u,f,y){const m=Math.min(y.pointToSegmentDistance(d,u,f),y.pointToSegmentDistance(i,u,f)),_=Math.min(y.pointToSegmentDistance(u,d,i),y.pointToSegmentDistance(f,d,i));return Math.min(m,_)}function vu(d,i,u,f,y){if(!ho(i,d.length)||!ho(f,u.length))return NaN;let m=1/0;for(let _=i[0];_<i[1];++_)for(let b=f[0];b<f[1];++b){if($r(d[_],d[_+1],u[b],u[b+1]))return 0;m=Math.min(m,fc(d[_],d[_+1],u[b],u[b+1],y))}return m}function Zi(d,i,u,f,y){if(!ho(i,d.length)||!ho(f,u.length))return NaN;let m=1/0;for(let _=i[0];_<=i[1];++_)for(let b=f[0];b<=f[1];++b)if((m=Math.min(m,y.distance(d[_],u[b])))===0)return m;return m}function _f(d,i,u){if(rr(d,i,!0))return 0;let f=1/0;for(const y of i){const m=y.length;if(m<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(y[0]!==y[m-1]&&(f=Math.min(f,u.pointToSegmentDistance(d,y[m-1],y[0])))===0||(f=Math.min(f,Ic(d,y,u)))===0)return f}return f}function Qs(d,i,u,f){if(!ho(i,d.length))return NaN;for(let m=i[0];m<=i[1];++m)if(rr(d[m],u,!0))return 0;let y=1/0;for(let m=i[0];m<i[1];++m)for(const _ of u)for(let b=0,N=_.length,D=N-1;b<N;D=b++){if($r(d[m],d[m+1],_[D],_[b]))return 0;y=Math.min(y,fc(d[m],d[m+1],_[D],_[b],f))}return y}function fo(d,i){for(const u of d)for(let f=0;f<=u.length-1;++f)if(rr(u[f],i,!0))return!0;return!1}function Nd(d,i,u,f=1/0){const y=Mc(d),m=Mc(i);if(f!==1/0&&Ql(y,m,u)>=f)return f;if(ha(y,m)){if(fo(d,i))return 0}else if(fo(i,d))return 0;let _=f;for(const b of d)for(let N=0,D=b.length,S=D-1;N<D;S=N++)for(const V of i)for(let I=0,O=V.length,M=O-1;I<O;M=I++){if($r(b[S],b[N],V[M],V[I]))return 0;_=Math.min(_,fc(b[S],b[N],V[M],V[I],u))}return _}function Vd(d,i,u,f,y,m,_){if(m===null||_===null)return;const b=Ql(Pl(f,m),Pl(y,_),u);b<i&&d.push({dist:b,range1:m,range2:_})}function eo(d,i,u,f,y=1/0){let m=Math.min(f.distance(d[0],u[0][0]),y);if(m===0)return m;const _=new hc([{dist:0,range1:[0,d.length-1],range2:[0,0]}],Pd),b=i?co:qs,N=Mc(u);for(;_.length;){const D=_.pop();if(D.dist>=m)continue;const S=D.range1;if(Mh(S)<=b){if(!ho(S,d.length))return NaN;if(i){const V=Qs(d,S,u,f);if((m=Math.min(m,V))===0)return m}else for(let V=S[0];V<=S[1];++V){const I=_f(d[V],u,f);if((m=Math.min(m,I))===0)return m}}else{const V=Os(S,i);if(V[0]!==null){const I=Ql(Pl(d,V[0]),N,f);I<m&&_.push({dist:I,range1:V[0],range2:[0,0]})}if(V[1]!==null){const I=Ql(Pl(d,V[1]),N,f);I<m&&_.push({dist:I,range1:V[1],range2:[0,0]})}}}return m}function Lc(d,i,u,f,y,m=1/0){let _=Math.min(m,y.distance(d[0],u[0]));if(_===0)return _;const b=new hc([{dist:0,range1:[0,d.length-1],range2:[0,u.length-1]}],Pd),N=i?co:qs,D=f?co:qs;for(;b.length;){const S=b.pop();if(S.dist>=_)continue;const V=S.range1,I=S.range2;if(Mh(V)<=N&&Mh(I)<=D){if(!ho(V,d.length)||!ho(I,u.length))return NaN;if(i&&f?_=Math.min(_,vu(d,V,u,I,y)):i||f?i&&!f?_=Math.min(_,Nl(u,I,d,V,y)):!i&&f&&(_=Math.min(_,Nl(d,V,u,I,y))):_=Math.min(_,Zi(d,V,u,I,y)),_===0)return _}else{const O=Os(V,i),M=Os(I,f);Vd(b,_,y,d,u,O[0],M[0]),Vd(b,_,y,d,u,O[0],M[1]),Vd(b,_,y,d,u,O[1],M[0]),Vd(b,_,y,d,u,O[1],M[1])}}return _}function pc(d,i,u,f,y=1/0){let m=y;const _=Pl(d,[0,d.length-1]);for(const b of u)if(!(m!==1/0&&Ql(_,Pl(b,[0,b.length-1]),f)>=m)&&(m=Math.min(m,Lc(d,i,b,!0,f,m)),m===0))return m;return m}function wu(d,i,u,f,y=1/0){let m=y;const _=Pl(d,[0,d.length-1]);for(const b of u){if(m!==1/0&&Ql(_,Mc(b),f)>=m)continue;const N=eo(d,i,b,f,m);if(isNaN(N))return N;if((m=Math.min(m,N))===0)return m}return m}function Fc(d){return d==="Point"||d==="MultiPoint"||d==="LineString"||d==="MultiLineString"||d==="Polygon"||d==="MultiPolygon"}class Ru{constructor(i,u){this.type=Xa,this.geojson=i,this.geometries=u}static parse(i,u){if(i.length!==2)return u.error(`'distance' expression requires either one argument, but found ' ${i.length-1} instead.`);if(Jo(i[1])){const f=i[1];if(f.type==="FeatureCollection"){for(let y=0;y<f.features.length;++y)if(Fc(f.features[y].geometry.type))return new Ru(f,f.features[y].geometry)}else if(f.type==="Feature"){if(Fc(f.geometry.type))return new Ru(f,f.geometry)}else if(Fc(f.type))return new Ru(f,f)}return u.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(i){const u=i.geometry(),f=i.canonicalID();if(u!=null&&f!=null){if(i.geometryType()==="Point")return function(y,m,_){const b=[];for(const D of y)for(const S of D)b.push(Ro(S,m));const N=new dc(b[0][1],"meters");return _.type==="Point"||_.type==="MultiPoint"||_.type==="LineString"?Lc(b,!1,_.type==="Point"?[_.coordinates]:_.coordinates,_.type==="LineString",N):_.type==="MultiLineString"?pc(b,!1,_.coordinates,N):_.type==="Polygon"||_.type==="MultiPolygon"?wu(b,!1,_.type==="Polygon"?[_.coordinates]:_.coordinates,N):null}(u,f,this.geometries);if(i.geometryType()==="LineString")return function(y,m,_){const b=[];for(const D of y){const S=[];for(const V of D)S.push(Ro(V,m));b.push(S)}const N=new dc(b[0][0][1],"meters");if(_.type==="Point"||_.type==="MultiPoint"||_.type==="LineString")return pc(_.type==="Point"?[_.coordinates]:_.coordinates,_.type==="LineString",b,N);if(_.type==="MultiLineString"){let D=1/0;for(let S=0;S<_.coordinates.length;S++){const V=pc(_.coordinates[S],!0,b,N,D);if(isNaN(V))return V;if((D=Math.min(D,V))===0)return D}return D}if(_.type==="Polygon"||_.type==="MultiPolygon"){let D=1/0;for(let S=0;S<b.length;S++){const V=wu(b[S],!0,_.type==="Polygon"?[_.coordinates]:_.coordinates,N,D);if(isNaN(V))return V;if((D=Math.min(D,V))===0)return D}return D}return null}(u,f,this.geometries);if(i.geometryType()==="Polygon")return function(y,m,_){const b=[];for(const D of function(S,V){const I=S.length;if(I<=1)return[S];const O=[];let M,B;for(let X=0;X<I;X++){const ee=Dt(S[X]);ee!==0&&(S[X].area=Math.abs(ee),B===void 0&&(B=ee<0),B===ee<0?(M&&O.push(M),M=[S[X]]):M.push(S[X]))}return M&&O.push(M),O}(y)){const S=[];for(let V=0;V<D.length;++V)S.push(Ed(D[V],m));b.push(S)}const N=new dc(b[0][0][0][1],"meters");if(_.type==="Point"||_.type==="MultiPoint"||_.type==="LineString")return wu(_.type==="Point"?[_.coordinates]:_.coordinates,_.type==="LineString",b,N);if(_.type==="MultiLineString"){let D=1/0;for(let S=0;S<_.coordinates.length;S++){const V=wu(_.coordinates[S],!0,b,N,D);if(isNaN(V))return V;if((D=Math.min(D,V))===0)return D}return D}return _.type==="Polygon"||_.type==="MultiPolygon"?function(D,S,V){let I=1/0;for(const O of D)for(const M of S){const B=Nd(O,M,V,I);if(isNaN(B))return B;if((I=Math.min(I,B))===0)return I}return I}(_.type==="Polygon"?[_.coordinates]:_.coordinates,b,N):null}(u,f,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}function Uc(d,i){switch(d){case"string":return js(i);case"number":return+i;case"boolean":return!!i;case"color":return bn.parse(i);case"formatted":return us.fromString(js(i));case"resolvedImage":return Ts.build(js(i))}return i}function mc(d,i,u,f){return f!==void 0&&(d=f*Math.round(d/f)),i!==void 0&&d<i&&(d=i),u!==void 0&&d>u&&(d=u),d}class ju{constructor(i,u,f){this.type=i,this.key=u,this.scope=f}static parse(i,u){let f=u.expectedType;if(f==null&&(f=un),i.length<2||i.length>3)return u.error("Invalid number of arguments for 'config' expression.");const y=u.parse(i[1],1);if(!(y instanceof Kl))return u.error("Key name of 'config' expression must be a string literal.");if(i.length>=3){const m=u.parse(i[2],2);return m instanceof Kl?new ju(f,js(y.value),js(m.value)):u.error("Scope of 'config' expression must be a string literal.")}return new ju(f,js(y.value))}evaluate(i){const u=[this.key,this.scope,i.scope].filter(Boolean).join(""),f=i.getConfig(u);if(!f)return null;const{type:y,value:m,values:_,minValue:b,maxValue:N,stepValue:D}=f,S=f.default.evaluate(i);let V=S;if(m){const I=i.scope;i.scope=(I||"").split("").slice(1).join(""),V=m.evaluate(i),i.scope=I}return y&&(V=Uc(y,V)),V===void 0||b===void 0&&N===void 0&&D===void 0||(typeof V=="number"?V=mc(V,b,N,D):Array.isArray(V)&&(V=V.map(I=>typeof I=="number"?mc(I,b,N,D):I))),m!==void 0&&V!==void 0&&_&&!_.includes(V)&&(V=S,y&&(V=Uc(y,V))),(y&&y!==this.type||V!==void 0&&ji(V)!==this.type)&&(V=Uc(this.type.kind,V)),V}eachChild(){}outputDefined(){return!1}serialize(){const i=["config",this.key];return this.scope&&i.concat(this.key),i}}function Bo(d){if(d instanceof Zs&&(d.name==="get"&&d.args.length===1||d.name==="feature-state"||d.name==="has"&&d.args.length===1||d.name==="properties"||d.name==="geometry-type"||d.name==="id"||/^filter-/.test(d.name))||d instanceof _u||d instanceof Ru)return!1;let i=!0;return d.eachChild(u=>{i&&!Bo(u)&&(i=!1)}),i}function cs(d){if(d instanceof Zs&&d.name==="feature-state")return!1;let i=!0;return d.eachChild(u=>{i&&!cs(u)&&(i=!1)}),i}function Xn(d){if(d instanceof ju)return new Set([d.key]);let i=new Set;return d.eachChild(u=>{i=new Set([...i,...Xn(u)])}),i}function ai(d,i){if(d instanceof Zs&&i.indexOf(d.name)>=0)return!1;let u=!0;return d.eachChild(f=>{u&&!ai(f,i)&&(u=!1)}),u}class qi{constructor(i,u){this.type=u.type,this.name=i,this.boundExpression=u}static parse(i,u){if(i.length!==2||typeof i[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");const f=i[1];return u.scope.has(f)?new qi(f,u.scope.get(f)):u.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class is{constructor(i,u=[],f,y=new oc,m=[],_,b){this.registry=i,this.path=u,this.key=u.map(N=>typeof N=="string"?`['${N}']`:`[${N}]`).join(""),this.scope=y,this.errors=m,this.expectedType=f,this._scope=_,this.options=b}parse(i,u,f,y,m={}){return u||f?this.concat(u,null,f,y)._parse(i,m):this._parse(i,m)}parseObjectValue(i,u,f,y,m,_={}){return this.concat(u,f,y,m)._parse(i,_)}_parse(i,u){function f(y,m,_){return _==="assert"?new ko(m,[y]):_==="coerce"?new Wl(m,[y]):y}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const y=typeof i[0]=="string"?this.registry[i[0]]:void 0;if(y){let m=y.parse(i,this);if(!m)return null;if(this.expectedType){const _=this.expectedType,b=m.type;if(_.kind!=="string"&&_.kind!=="number"&&_.kind!=="boolean"&&_.kind!=="object"&&_.kind!=="array"||b.kind!=="value")if(_.kind!=="color"&&_.kind!=="formatted"&&_.kind!=="resolvedImage"||b.kind!=="value"&&b.kind!=="string"){if(this.checkSubtype(_,b))return null}else m=f(m,_,u.typeAnnotation||"coerce");else m=f(m,_,u.typeAnnotation||"assert")}if(!(m instanceof Kl)&&m.type.kind!=="resolvedImage"&&kc(m)){const _=new bd(this._scope,this.options);try{m=new Kl(m.type,m.evaluate(_))}catch(b){return this.error(b.message),null}}return m}return Wl.parse(["to-array",i],this)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,u,f,y){let m=typeof i=="number"?this.path.concat(i):this.path;m=typeof u=="string"?m.concat(u):m;const _=y?this.scope.concat(y):this.scope;return new is(this.registry,m,f||null,_,this.errors,this._scope,this.options)}error(i,...u){const f=`${this.key}${u.map(y=>`[${y}]`).join("")}`;this.errors.push(new Bs(f,i))}checkSubtype(i,u){const f=Sd(i,u);return f&&this.error(f),f}}var eu=is;function kc(d){if(d instanceof qi)return kc(d.boundExpression);if(d instanceof Zs&&d.name==="error"||d instanceof Yl||d instanceof _u||d instanceof Ru||d instanceof ju)return!1;const i=d instanceof Wl||d instanceof ko;let u=!0;return d.eachChild(f=>{u=i?u&&kc(f):u&&f instanceof Kl}),!!u&&Bo(d)&&ai(d,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])}function Qo(d,i){const u=d.length-1;let f,y,m=0,_=u,b=0;for(;m<=_;)if(b=Math.floor((m+_)/2),f=d[b],y=d[b+1],f<=i){if(b===u||i<y)return b;m=b+1}else{if(!(f>i))throw new ns("Input is not a number.");_=b-1}return 0}class tu{constructor(i,u,f){this.type=i,this.input=u,this.labels=[],this.outputs=[];for(const[y,m]of f)this.labels.push(y),this.outputs.push(m)}static parse(i,u){if(i.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return u.error("Expected an even number of arguments.");const f=u.parse(i[1],1,Xa);if(!f)return null;const y=[];let m=null;u.expectedType&&u.expectedType.kind!=="value"&&(m=u.expectedType);for(let _=1;_<i.length;_+=2){const b=_===1?-1/0:i[_],N=i[_+1],D=_,S=_+1;if(typeof b!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(y.length&&y[y.length-1][0]>=b)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',D);const V=u.parse(N,S,m);if(!V)return null;m=m||V.type,y.push([b,V])}return new tu(m,f,y)}evaluate(i){const u=this.labels,f=this.outputs;if(u.length===1)return f[0].evaluate(i);const y=this.input.evaluate(i);if(y<=u[0])return f[0].evaluate(i);const m=u.length;return y>=u[m-1]?f[m-1].evaluate(i):f[Qo(u,y)].evaluate(i)}eachChild(i){i(this.input);for(const u of this.outputs)i(u)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){const i=["step",this.input.serialize()];for(let u=0;u<this.labels.length;u++)u>0&&i.push(this.labels[u]),i.push(this.outputs[u].serialize());return i}}const tn=.95047,Bc=1.08883,Vl=4/29,ts=6/29,yc=3*ts*ts,zd=ts*ts*ts,di=Math.PI/180,Ih=180/Math.PI;function el(d){return d>zd?Math.pow(d,1/3):d/yc+Vl}function pl(d){return d>ts?d*d*d:yc*(d-Vl)}function Gc(d){return 255*(d<=.0031308?12.92*d:1.055*Math.pow(d,1/2.4)-.055)}function Tu(d){return(d/=255)<=.04045?d/12.92:Math.pow((d+.055)/1.055,2.4)}function Zu(d){const i=Tu(d.r),u=Tu(d.g),f=Tu(d.b),y=el((.4124564*i+.3575761*u+.1804375*f)/tn),m=el((.2126729*i+.7151522*u+.072175*f)/1);return{l:116*m-16,a:500*(y-m),b:200*(m-el((.0193339*i+.119192*u+.9503041*f)/Bc)),alpha:d.a}}function gc(d){let i=(d.l+16)/116,u=isNaN(d.a)?i:i+d.a/500,f=isNaN(d.b)?i:i-d.b/200;return i=1*pl(i),u=tn*pl(u),f=Bc*pl(f),new bn(Gc(3.2404542*u-1.5371385*i-.4985314*f),Gc(-.969266*u+1.8760108*i+.041556*f),Gc(.0556434*u-.2040259*i+1.0572252*f),d.alpha)}function qp(d,i,u){const f=i-d;return d+u*(f>180||f<-180?f-360*Math.round(f/360):f)}const Lh={forward:Zu,reverse:gc,interpolate:function(d,i,u){return{l:fr(d.l,i.l,u),a:fr(d.a,i.a,u),b:fr(d.b,i.b,u),alpha:fr(d.alpha,i.alpha,u)}}},Fh={forward:function(d){const{l:i,a:u,b:f}=Zu(d),y=Math.atan2(f,u)*Ih;return{h:y<0?y+360:y,c:Math.sqrt(u*u+f*f),l:i,alpha:d.a}},reverse:function(d){const i=d.h*di,u=d.c;return gc({l:d.l,a:Math.cos(i)*u,b:Math.sin(i)*u,alpha:d.alpha})},interpolate:function(d,i,u){return{h:qp(d.h,i.h,u),c:fr(d.c,i.c,u),l:fr(d.l,i.l,u),alpha:fr(d.alpha,i.alpha,u)}}};var tl=Object.freeze({__proto__:null,hcl:Fh,lab:Lh});class Hi{constructor(i,u,f,y,m){this.type=i,this.operator=u,this.interpolation=f,this.input=y,this.labels=[],this.outputs=[];for(const[_,b]of m)this.labels.push(_),this.outputs.push(b)}static interpolationFactor(i,u,f,y){let m=0;if(i.name==="exponential")m=_i(u,i.base,f,y);else if(i.name==="linear")m=_i(u,1,f,y);else if(i.name==="cubic-bezier"){const _=i.controlPoints;m=new Gt(_[0],_[1],_[2],_[3]).solve(_i(u,1,f,y))}return m}static parse(i,u){let[f,y,m,..._]=i;if(!Array.isArray(y)||y.length===0)return u.error("Expected an interpolation type expression.",1);if(y[0]==="linear")y={name:"linear"};else if(y[0]==="exponential"){const D=y[1];if(typeof D!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);y={name:"exponential",base:D}}else{if(y[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(y[0])}`,1,0);{const D=y.slice(1);if(D.length!==4||D.some(S=>typeof S!="number"||S<0||S>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);y={name:"cubic-bezier",controlPoints:D}}}if(i.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length-1>3&&(i.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(m=u.parse(m,2,Xa),!m)return null;const b=[];let N=null;f==="interpolate-hcl"||f==="interpolate-lab"?N=Gs:u.expectedType&&u.expectedType.kind!=="value"&&(N=u.expectedType);for(let D=0;D<_.length;D+=2){const S=_[D],V=_[D+1],I=D+3,O=D+4;if(typeof S!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',I);if(b.length&&b[b.length-1][0]>=S)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',I);const M=u.parse(V,O,N);if(!M)return null;N=N||M.type,b.push([S,M])}return N.kind==="number"||N.kind==="color"||N.kind==="array"&&N.itemType.kind==="number"&&typeof N.N=="number"?new Hi(N,f,y,m,b):u.error(`Type ${bi(N)} is not interpolatable.`)}evaluate(i){const u=this.labels,f=this.outputs;if(u.length===1)return f[0].evaluate(i);const y=this.input.evaluate(i);if(y<=u[0])return f[0].evaluate(i);const m=u.length;if(y>=u[m-1])return f[m-1].evaluate(i);const _=Qo(u,y),b=Hi.interpolationFactor(this.interpolation,y,u[_],u[_+1]),N=f[_].evaluate(i),D=f[_+1].evaluate(i);return this.operator==="interpolate"?oh[this.type.kind.toLowerCase()](N,D,b):this.operator==="interpolate-hcl"?Fh.reverse(Fh.interpolate(Fh.forward(N),Fh.forward(D),b)):Lh.reverse(Lh.interpolate(Lh.forward(N),Lh.forward(D),b))}eachChild(i){i(this.input);for(const u of this.outputs)i(u)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){let i;i=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier",...this.interpolation.controlPoints];const u=[this.operator,i,this.input.serialize()];for(let f=0;f<this.labels.length;f++)u.push(this.labels[f],this.outputs[f].serialize());return u}}function _i(d,i,u,f){const y=f-u,m=d-u;return y===0?0:i===1?m/y:(Math.pow(i,m)-1)/(Math.pow(i,y)-1)}class au{constructor(i,u){this.type=i,this.args=u}static parse(i,u){if(i.length<2)return u.error("Expectected at least one argument.");let f=null;const y=u.expectedType;y&&y.kind!=="value"&&(f=y);const m=[];for(const b of i.slice(1)){const N=u.parse(b,1+m.length,f,void 0,{typeAnnotation:"omit"});if(!N)return null;f=f||N.type,m.push(N)}const _=y&&m.some(b=>Sd(y,b.type));return new au(_?un:f,m)}evaluate(i){let u,f=null,y=0;for(const m of this.args){if(y++,f=m.evaluate(i),f&&f instanceof Ts&&!f.available&&(u||(u=f),f=null,y===this.args.length))return u;if(f!==null)break}return f}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=["coalesce"];return this.eachChild(u=>{i.push(u.serialize())}),i}}class Su{constructor(i,u){this.type=u.type,this.bindings=[].concat(i),this.result=u}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const u of this.bindings)i(u[1]);i(this.result)}static parse(i,u){if(i.length<4)return u.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const f=[];for(let m=1;m<i.length-1;m+=2){const _=i[m];if(typeof _!="string")return u.error(`Expected string, but found ${typeof _} instead.`,m);if(/[^a-zA-Z0-9_]/.test(_))return u.error("Variable names must contain only alphanumeric characters or '_'.",m);const b=u.parse(i[m+1],m+1);if(!b)return null;f.push([_,b])}const y=u.parse(i[i.length-1],i.length-1,u.expectedType,f);return y?new Su(f,y):null}outputDefined(){return this.result.outputDefined()}serialize(){const i=["let"];for(const[u,f]of this.bindings)i.push(u,f.serialize());return i.push(this.result.serialize()),i}}class Xf{constructor(i,u,f){this.type=i,this.index=u,this.input=f}static parse(i,u){if(i.length!==3)return u.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const f=u.parse(i[1],1,Xa),y=u.parse(i[2],2,Li(u.expectedType||un));return f&&y?new Xf(y.type.itemType,f,y):null}evaluate(i){const u=this.index.evaluate(i),f=this.input.evaluate(i);if(u<0)throw new ns(`Array index out of bounds: ${u} < 0.`);if(u>=f.length)throw new ns(`Array index out of bounds: ${u} > ${f.length-1}.`);if(u!==Math.floor(u))throw new ns(`Array index must be an integer, but found ${u} instead. Use at-interpolated to retrieve interpolated result with a fractional index.`);return f[u]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class Ac{constructor(i,u,f){this.type=i,this.index=u,this.input=f}static parse(i,u){if(i.length!==3)return u.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const f=u.parse(i[1],1,Xa),y=u.parse(i[2],2,Li(u.expectedType||un));return f&&y?new Ac(y.type.itemType,f,y):null}evaluate(i){const u=this.index.evaluate(i),f=this.input.evaluate(i);if(u<0)throw new ns(`Array index out of bounds: ${u} < 0.`);if(u>f.length-1)throw new ns(`Array index out of bounds: ${u} > ${f.length-1}.`);if(u===Math.floor(u))return f[u];const y=Math.floor(u),m=Math.ceil(u),_=f[y],b=f[m];if(typeof _!="number"||typeof b!="number")throw new ns(`Cannot interpolate between non-number values at index ${u}.`);const N=u-y;return _*(1-N)+b*N}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}serialize(){return["at-interpolated",this.index.serialize(),this.input.serialize()]}}class vf{constructor(i,u){this.type=An,this.needle=i,this.haystack=u}static parse(i,u){if(i.length!==3)return u.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const f=u.parse(i[1],1,un),y=u.parse(i[2],2,un);return f&&y?lh(f.type,[An,an,Xa,lc,un])?new vf(f,y):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${bi(f.type)} instead`):null}evaluate(i){const u=this.needle.evaluate(i),f=this.haystack.evaluate(i);if(f==null)return!1;if(!uc(u,["boolean","string","number","null"]))throw new ns(`Expected first argument to be of type boolean, string, number or null, but found ${bi(ji(u))} instead.`);if(!uc(f,["string","array"]))throw new ns(`Expected second argument to be of type array or string, but found ${bi(ji(f))} instead.`);return f.indexOf(u)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Od{constructor(i,u,f){this.type=Xa,this.needle=i,this.haystack=u,this.fromIndex=f}static parse(i,u){if(i.length<=2||i.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const f=u.parse(i[1],1,un),y=u.parse(i[2],2,un);if(!f||!y)return null;if(!lh(f.type,[An,an,Xa,lc,un]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${bi(f.type)} instead`);if(i.length===4){const m=u.parse(i[3],3,Xa);return m?new Od(f,y,m):null}return new Od(f,y)}evaluate(i){const u=this.needle.evaluate(i),f=this.haystack.evaluate(i);if(!uc(u,["boolean","string","number","null"]))throw new ns(`Expected first argument to be of type boolean, string, number or null, but found ${bi(ji(u))} instead.`);if(!uc(f,["string","array"]))throw new ns(`Expected second argument to be of type array or string, but found ${bi(ji(f))} instead.`);if(this.fromIndex){const y=this.fromIndex.evaluate(i);return f.indexOf(u,y)}return f.indexOf(u)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const i=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),i]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Uh{constructor(i,u,f,y,m,_){this.inputType=i,this.type=u,this.input=f,this.cases=y,this.outputs=m,this.otherwise=_}static parse(i,u){if(i.length<5)return u.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return u.error("Expected an even number of arguments.");let f,y;u.expectedType&&u.expectedType.kind!=="value"&&(y=u.expectedType);const m={},_=[];for(let D=2;D<i.length-1;D+=2){let S=i[D];const V=i[D+1];Array.isArray(S)||(S=[S]);const I=u.concat(D);if(S.length===0)return I.error("Expected at least one branch label.");for(const M of S){if(typeof M!="number"&&typeof M!="string")return I.error("Branch labels must be numbers or strings.");if(typeof M=="number"&&Math.abs(M)>Number.MAX_SAFE_INTEGER)return I.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof M=="number"&&Math.floor(M)!==M)return I.error("Numeric branch labels must be integer values.");if(f){if(I.checkSubtype(f,ji(M)))return null}else f=ji(M);if(m[String(M)]!==void 0)return I.error("Branch labels must be unique.");m[String(M)]=_.length}const O=u.parse(V,D,y);if(!O)return null;y=y||O.type,_.push(O)}const b=u.parse(i[1],1,un);if(!b)return null;const N=u.parse(i[i.length-1],i.length-1,y);return N?b.type.kind!=="value"&&u.concat(1).checkSubtype(f,b.type)?null:new Uh(f,y,b,m,_,N):null}evaluate(i){const u=this.input.evaluate(i);return(ji(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["match",this.input.serialize()],u=Object.keys(this.cases).sort(),f=[],y={};for(const _ of u){const b=y[this.cases[_]];b===void 0?(y[this.cases[_]]=f.length,f.push([this.cases[_],[_]])):f[b][1].push(_)}const m=_=>this.inputType.kind==="number"?Number(_):_;for(const[_,b]of f)i.push(b.length===1?m(b[0]):b.map(m)),i.push(this.outputs[_].serialize());return i.push(this.otherwise.serialize()),i}}class kh{constructor(i,u,f){this.type=i,this.branches=u,this.otherwise=f}static parse(i,u){if(i.length<4)return u.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return u.error("Expected an odd number of arguments.");let f;u.expectedType&&u.expectedType.kind!=="value"&&(f=u.expectedType);const y=[];for(let _=1;_<i.length-1;_+=2){const b=u.parse(i[_],_,An);if(!b)return null;const N=u.parse(i[_+1],_+1,f);if(!N)return null;y.push([b,N]),f=f||N.type}const m=u.parse(i[i.length-1],i.length-1,f);return m?new kh(f,y,m):null}evaluate(i){for(const[u,f]of this.branches)if(u.evaluate(i))return f.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[u,f]of this.branches)i(u),i(f);i(this.otherwise)}outputDefined(){return this.branches.every(([i,u])=>u.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["case"];return this.eachChild(u=>{i.push(u.serialize())}),i}}class Dd{constructor(i,u,f,y){this.type=i,this.input=u,this.beginIndex=f,this.endIndex=y}static parse(i,u){if(i.length<=2||i.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const f=u.parse(i[1],1,un),y=u.parse(i[2],2,Xa);if(!f||!y)return null;if(!lh(f.type,[Li(un),an,un]))return u.error(`Expected first argument to be of type array or string, but found ${bi(f.type)} instead`);if(i.length===4){const m=u.parse(i[3],3,Xa);return m?new Dd(f.type,f,y,m):null}return new Dd(f.type,f,y)}evaluate(i){const u=this.input.evaluate(i),f=this.beginIndex.evaluate(i);if(!uc(u,["string","array"]))throw new ns(`Expected first argument to be of type array or string, but found ${bi(ji(u))} instead.`);if(this.endIndex){const y=this.endIndex.evaluate(i);return u.slice(f,y)}return u.slice(f)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const i=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),i]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function wf(d,i){return d==="=="||d==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function Zm(d,i,u,f){return f.compare(i,u)===0}function dh(d,i,u){const f=d!=="=="&&d!=="!=";return class sW{constructor(m,_,b){this.type=An,this.lhs=m,this.rhs=_,this.collator=b,this.hasUntypedArgument=m.type.kind==="value"||_.type.kind==="value"}static parse(m,_){if(m.length!==3&&m.length!==4)return _.error("Expected two or three arguments.");const b=m[0];let N=_.parse(m[1],1,un);if(!N)return null;if(!wf(b,N.type))return _.concat(1).error(`"${b}" comparisons are not supported for type '${bi(N.type)}'.`);let D=_.parse(m[2],2,un);if(!D)return null;if(!wf(b,D.type))return _.concat(2).error(`"${b}" comparisons are not supported for type '${bi(D.type)}'.`);if(N.type.kind!==D.type.kind&&N.type.kind!=="value"&&D.type.kind!=="value")return _.error(`Cannot compare types '${bi(N.type)}' and '${bi(D.type)}'.`);f&&(N.type.kind==="value"&&D.type.kind!=="value"?N=new ko(D.type,[N]):N.type.kind!=="value"&&D.type.kind==="value"&&(D=new ko(N.type,[D])));let S=null;if(m.length===4){if(N.type.kind!=="string"&&D.type.kind!=="string"&&N.type.kind!=="value"&&D.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(S=_.parse(m[3],3,Uo),!S)return null}return new sW(N,D,S)}evaluate(m){const _=this.lhs.evaluate(m),b=this.rhs.evaluate(m);if(f&&this.hasUntypedArgument){const N=ji(_),D=ji(b);if(N.kind!==D.kind||N.kind!=="string"&&N.kind!=="number")throw new ns(`Expected arguments for "${d}" to be (string, string) or (number, number), but found (${N.kind}, ${D.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const N=ji(_),D=ji(b);if(N.kind!=="string"||D.kind!=="string")return i(m,_,b)}return this.collator?u(m,_,b,this.collator.evaluate(m)):i(m,_,b)}eachChild(m){m(this.lhs),m(this.rhs),this.collator&&m(this.collator)}outputDefined(){return!0}serialize(){const m=[d];return this.eachChild(_=>{m.push(_.serialize())}),m}}}const Ly=dh("==",function(d,i,u){return i===u},Zm),_c=dh("!=",function(d,i,u){return i!==u},function(d,i,u,f){return!Zm(0,i,u,f)}),qu=dh("<",function(d,i,u){return i<u},function(d,i,u,f){return f.compare(i,u)<0}),Cu=dh(">",function(d,i,u){return i>u},function(d,i,u,f){return f.compare(i,u)>0}),Fy=dh("<=",function(d,i,u){return i<=u},function(d,i,u,f){return f.compare(i,u)<=0}),Bh=dh(">=",function(d,i,u){return i>=u},function(d,i,u,f){return f.compare(i,u)>=0});class ml{constructor(i,u,f,y,m,_){this.type=an,this.number=i,this.locale=u,this.currency=f,this.unit=y,this.minFractionDigits=m,this.maxFractionDigits=_}static parse(i,u){if(i.length!==3)return u.error("Expected two arguments.");const f=u.parse(i[1],1,Xa);if(!f)return null;const y=i[2];if(typeof y!="object"||Array.isArray(y))return u.error("NumberFormat options argument must be an object.");let m=null;if(y.locale&&(m=u.parseObjectValue(y.locale,2,"locale",an),!m))return null;let _=null;if(y.currency&&(_=u.parseObjectValue(y.currency,2,"currency",an),!_))return null;let b=null;if(y.unit&&(b=u.parseObjectValue(y.unit,2,"unit",an),!b))return null;let N=null;if(y["min-fraction-digits"]&&(N=u.parseObjectValue(y["min-fraction-digits"],2,"min-fraction-digits",Xa),!N))return null;let D=null;return y["max-fraction-digits"]&&(D=u.parseObjectValue(y["max-fraction-digits"],2,"max-fraction-digits",Xa),!D)?null:new ml(f,m,_,b,N,D)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(i):void 0,unit:this.unit?this.unit.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.unit&&i(this.unit),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const i={};return this.locale&&(i.locale=this.locale.serialize()),this.currency&&(i.currency=this.currency.serialize()),this.unit&&(i.unit=this.unit.serialize()),this.minFractionDigits&&(i["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(i["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),i]}}class al{constructor(i){this.type=Xa,this.input=i}static parse(i,u){if(i.length!==2)return u.error(`Expected 1 argument, but found ${i.length-1} instead.`);const f=u.parse(i[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${bi(f.type)} instead.`):new al(f):null}evaluate(i){const u=this.input.evaluate(i);if(typeof u=="string"||Array.isArray(u))return u.length;throw new ns(`Expected value to be of type string or array, but found ${bi(ji(u))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}serialize(){const i=["length"];return this.eachChild(u=>{i.push(u.serialize())}),i}}function Gh(d){return function(){d=1831565813+(d|=0)|0;let i=Math.imul(d^d>>>15,1|d);return i=i+Math.imul(i^i>>>7,61|i)^i,((i^i>>>14)>>>0)/4294967296}}const Md={"==":Ly,"!=":_c,">":Cu,"<":qu,">=":Bh,"<=":Fy,array:ko,at:Xf,"at-interpolated":Ac,boolean:ko,case:kh,coalesce:au,collator:Yl,format:Cd,image:gu,in:vf,"index-of":Od,interpolate:Hi,"interpolate-hcl":Hi,"interpolate-lab":Hi,length:al,let:Su,literal:Kl,match:Uh,number:ko,"number-format":ml,object:ko,slice:Dd,step:tu,string:ko,"to-boolean":Wl,"to-color":Wl,"to-number":Wl,"to-string":Wl,var:qi,within:_u,distance:Ru,config:ju};function Hp(d,[i,u,f,y]){i=i.evaluate(d),u=u.evaluate(d),f=f.evaluate(d);const m=y?y.evaluate(d):1,_=xl(i,u,f,m);if(_)throw new ns(_);return new bn(i/255*m,u/255*m,f/255*m,m)}function $p(d,[i,u,f,y]){i=i.evaluate(d),u=u.evaluate(d),f=f.evaluate(d);const m=y?y.evaluate(d):1,_=function(D,S,V,I){return typeof D=="number"&&D>=0&&D<=360?typeof S=="number"&&S>=0&&S<=100&&typeof V=="number"&&V>=0&&V<=100?I===void 0||typeof I=="number"&&I>=0&&I<=1?null:`Invalid hsla value [${[D,S,V,I].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${(typeof I=="number"?[D,S,V,I]:[D,S,V]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${(typeof I=="number"?[D,S,V,I]:[D,S,V]).join(", ")}]: 'h' must be between 0 and 360.`}(i,u,f,m);if(_)throw new ns(_);const b=`hsla(${i}, ${u}%, ${f}%, ${m})`,N=bn.parse(b);if(!N)throw new ns(`Failed to parse HSLA color: ${b}`);return N}function jc(d,i){return d in i}function Rf(d,i){const u=i[d];return u===void 0?null:u}function rl(d){return{type:d}}function Id(d){return{result:"success",value:d}}function bu(d){return{result:"error",value:d}}function Ld(d,i){return!!d&&!!d.parameters&&d.parameters.indexOf(i)>-1}function Zc(d){return d["property-type"]==="data-driven"}function zl(d){return Ld(d.expression,"measure-light")}function Hu(d){return Ld(d.expression,"zoom")}function qc(d){return!!d.expression&&d.expression.interpolated}function Jf(d){return typeof d=="object"&&d!==null&&!Array.isArray(d)}function Fd(d){return d}function Hc(d,i){const u=i.type==="color",f=d.stops&&typeof d.stops[0][0]=="object",y=f||!(f||d.property!==void 0),m=d.type||(qc(i)?"exponential":"interval");if(u&&((d=Tn({},d)).stops&&(d.stops=d.stops.map(D=>[D[0],bn.parse(D[1])])),d.default=bn.parse(d.default?d.default:i.default)),d.colorSpace&&d.colorSpace!=="rgb"&&!tl[d.colorSpace])throw new Error(`Unknown color space: ${d.colorSpace}`);let _,b,N;if(m==="exponential")_=Tf;else if(m==="interval")_=qm;else if(m==="categorical"){_=Kp,b=Object.create(null);for(const D of d.stops)b[D[0]]=D[1];N=typeof d.stops[0][0]}else{if(m!=="identity")throw new Error(`Unknown function type "${m}"`);_=Wp}if(f){const D={},S=[];for(let O=0;O<d.stops.length;O++){const M=d.stops[O],B=M[0].zoom;D[B]===void 0&&(D[B]={zoom:B,type:d.type,property:d.property,default:d.default,stops:[]},S.push(B)),D[B].stops.push([M[0].value,M[1]])}const V=[];for(const O of S)V.push([D[O].zoom,Hc(D[O],i)]);const I={name:"linear"};return{kind:"composite",interpolationType:I,interpolationFactor:Hi.interpolationFactor.bind(void 0,I),zoomStops:V.map(O=>O[0]),evaluate:({zoom:O},M)=>Tf({stops:V,base:d.base},i,O).evaluate(O,M)}}if(y){const D=m==="exponential"?{name:"exponential",base:d.base!==void 0?d.base:1}:null;return{kind:"camera",interpolationType:D,interpolationFactor:Hi.interpolationFactor.bind(void 0,D),zoomStops:d.stops.map(S=>S[0]),evaluate:({zoom:S})=>_(d,i,S,b,N)}}return{kind:"source",evaluate(D,S){const V=S&&S.properties?S.properties[d.property]:void 0;return V===void 0?Ds(d.default,i.default):_(d,i,V,b,N)}}}function Ds(d,i,u){return d!==void 0?d:i!==void 0?i:u!==void 0?u:void 0}function Kp(d,i,u,f,y){return Ds(typeof u===y?f[u]:void 0,d.default,i.default)}function qm(d,i,u){if(Au(u)!=="number")return Ds(d.default,i.default);const f=d.stops.length;if(f===1||u<=d.stops[0][0])return d.stops[0][1];if(u>=d.stops[f-1][0])return d.stops[f-1][1];const y=Qo(d.stops.map(m=>m[0]),u);return d.stops[y][1]}function Tf(d,i,u){const f=d.base!==void 0?d.base:1;if(Au(u)!=="number")return Ds(d.default,i.default);const y=d.stops.length;if(y===1||u<=d.stops[0][0])return d.stops[0][1];if(u>=d.stops[y-1][0])return d.stops[y-1][1];const m=Qo(d.stops.map(S=>S[0]),u),_=function(S,V,I,O){const M=O-I,B=S-I;return M===0?0:V===1?B/M:(Math.pow(V,B)-1)/(Math.pow(V,M)-1)}(u,f,d.stops[m][0],d.stops[m+1][0]),b=d.stops[m][1],N=d.stops[m+1][1];let D=oh[i.type]||Fd;if(d.colorSpace&&d.colorSpace!=="rgb"){const S=tl[d.colorSpace];D=(V,I)=>S.reverse(S.interpolate(S.forward(V),S.forward(I),_))}return typeof b.evaluate=="function"?{evaluate(...S){const V=b.evaluate.apply(void 0,S),I=N.evaluate.apply(void 0,S);if(V!==void 0&&I!==void 0)return D(V,I,_)}}:D(b,N,_)}function Wp(d,i,u){return i.type==="color"?u=bn.parse(u):i.type==="formatted"?u=us.fromString(u.toString()):i.type==="resolvedImage"?u=Ts.build(u.toString()):Au(u)===i.type||i.type==="enum"&&i.values[u]||(u=void 0),Ds(u,d.default,i.default)}Zs.register(Md,{error:[{kind:"error"},[an],(d,[i])=>{throw new ns(i.evaluate(d))}],typeof:[an,[un],(d,[i])=>bi(ji(i.evaluate(d)))],"to-rgba":[Li(Xa,4),[Gs],(d,[i])=>i.evaluate(d).toRenderColor(null).toArray()],"to-hsla":[Li(Xa,4),[Gs],(d,[i])=>i.evaluate(d).toRenderColor(null).toHslaArray()],rgb:[Gs,[Xa,Xa,Xa],Hp],rgba:[Gs,[Xa,Xa,Xa,Xa],Hp],hsl:[Gs,[Xa,Xa,Xa],$p],hsla:[Gs,[Xa,Xa,Xa,Xa],$p],has:{type:An,overloads:[[[an],(d,[i])=>jc(i.evaluate(d),d.properties())],[[an,Td],(d,[i,u])=>jc(i.evaluate(d),u.evaluate(d))]]},get:{type:un,overloads:[[[an],(d,[i])=>Rf(i.evaluate(d),d.properties())],[[an,Td],(d,[i,u])=>Rf(i.evaluate(d),u.evaluate(d))]]},"feature-state":[un,[an],(d,[i])=>Rf(i.evaluate(d),d.featureState||{})],properties:[Td,[],d=>d.properties()],"geometry-type":[an,[],d=>d.geometryType()],id:[un,[],d=>d.id()],zoom:[Xa,[],d=>d.globals.zoom],pitch:[Xa,[],d=>d.globals.pitch||0],"distance-from-center":[Xa,[],d=>d.distanceFromCenter()],"measure-light":[Xa,[an],(d,[i])=>d.measureLight(i.evaluate(d))],"heatmap-density":[Xa,[],d=>d.globals.heatmapDensity||0],"line-progress":[Xa,[],d=>d.globals.lineProgress||0],"raster-value":[Xa,[],d=>d.globals.rasterValue||0],"raster-particle-speed":[Xa,[],d=>d.globals.rasterParticleSpeed||0],"sky-radial-progress":[Xa,[],d=>d.globals.skyRadialProgress||0],accumulated:[un,[],d=>d.globals.accumulated===void 0?null:d.globals.accumulated],"+":[Xa,rl(Xa),(d,i)=>{let u=0;for(const f of i)u+=f.evaluate(d);return u}],"*":[Xa,rl(Xa),(d,i)=>{let u=1;for(const f of i)u*=f.evaluate(d);return u}],"-":{type:Xa,overloads:[[[Xa,Xa],(d,[i,u])=>i.evaluate(d)-u.evaluate(d)],[[Xa],(d,[i])=>-i.evaluate(d)]]},"/":[Xa,[Xa,Xa],(d,[i,u])=>i.evaluate(d)/u.evaluate(d)],"%":[Xa,[Xa,Xa],(d,[i,u])=>i.evaluate(d)%u.evaluate(d)],ln2:[Xa,[],()=>Math.LN2],pi:[Xa,[],()=>Math.PI],e:[Xa,[],()=>Math.E],"^":[Xa,[Xa,Xa],(d,[i,u])=>Math.pow(i.evaluate(d),u.evaluate(d))],sqrt:[Xa,[Xa],(d,[i])=>Math.sqrt(i.evaluate(d))],log10:[Xa,[Xa],(d,[i])=>Math.log(i.evaluate(d))/Math.LN10],ln:[Xa,[Xa],(d,[i])=>Math.log(i.evaluate(d))],log2:[Xa,[Xa],(d,[i])=>Math.log(i.evaluate(d))/Math.LN2],sin:[Xa,[Xa],(d,[i])=>Math.sin(i.evaluate(d))],cos:[Xa,[Xa],(d,[i])=>Math.cos(i.evaluate(d))],tan:[Xa,[Xa],(d,[i])=>Math.tan(i.evaluate(d))],asin:[Xa,[Xa],(d,[i])=>Math.asin(i.evaluate(d))],acos:[Xa,[Xa],(d,[i])=>Math.acos(i.evaluate(d))],atan:[Xa,[Xa],(d,[i])=>Math.atan(i.evaluate(d))],min:[Xa,rl(Xa),(d,i)=>Math.min(...i.map(u=>u.evaluate(d)))],max:[Xa,rl(Xa),(d,i)=>Math.max(...i.map(u=>u.evaluate(d)))],abs:[Xa,[Xa],(d,[i])=>Math.abs(i.evaluate(d))],round:[Xa,[Xa],(d,[i])=>{const u=i.evaluate(d);return u<0?-Math.round(-u):Math.round(u)}],floor:[Xa,[Xa],(d,[i])=>Math.floor(i.evaluate(d))],ceil:[Xa,[Xa],(d,[i])=>Math.ceil(i.evaluate(d))],"filter-==":[An,[an,un],(d,[i,u])=>d.properties()[i.value]===u.value],"filter-id-==":[An,[un],(d,[i])=>d.id()===i.value],"filter-type-==":[An,[an],(d,[i])=>d.geometryType()===i.value],"filter-<":[An,[an,un],(d,[i,u])=>{const f=d.properties()[i.value],y=u.value;return typeof f==typeof y&&f<y}],"filter-id-<":[An,[un],(d,[i])=>{const u=d.id(),f=i.value;return typeof u==typeof f&&u<f}],"filter->":[An,[an,un],(d,[i,u])=>{const f=d.properties()[i.value],y=u.value;return typeof f==typeof y&&f>y}],"filter-id->":[An,[un],(d,[i])=>{const u=d.id(),f=i.value;return typeof u==typeof f&&u>f}],"filter-<=":[An,[an,un],(d,[i,u])=>{const f=d.properties()[i.value],y=u.value;return typeof f==typeof y&&f<=y}],"filter-id-<=":[An,[un],(d,[i])=>{const u=d.id(),f=i.value;return typeof u==typeof f&&u<=f}],"filter->=":[An,[an,un],(d,[i,u])=>{const f=d.properties()[i.value],y=u.value;return typeof f==typeof y&&f>=y}],"filter-id->=":[An,[un],(d,[i])=>{const u=d.id(),f=i.value;return typeof u==typeof f&&u>=f}],"filter-has":[An,[un],(d,[i])=>i.value in d.properties()],"filter-has-id":[An,[],d=>d.id()!==null&&d.id()!==void 0],"filter-type-in":[An,[Li(an)],(d,[i])=>i.value.indexOf(d.geometryType())>=0],"filter-id-in":[An,[Li(un)],(d,[i])=>i.value.indexOf(d.id())>=0],"filter-in-small":[An,[an,Li(un)],(d,[i,u])=>u.value.indexOf(d.properties()[i.value])>=0],"filter-in-large":[An,[an,Li(un)],(d,[i,u])=>function(f,y,m,_){for(;m<=_;){const b=m+_>>1;if(y[b]===f)return!0;y[b]>f?_=b-1:m=b+1}return!1}(d.properties()[i.value],u.value,0,u.value.length-1)],all:{type:An,overloads:[[[An,An],(d,[i,u])=>i.evaluate(d)&&u.evaluate(d)],[rl(An),(d,i)=>{for(const u of i)if(!u.evaluate(d))return!1;return!0}]]},any:{type:An,overloads:[[[An,An],(d,[i,u])=>i.evaluate(d)||u.evaluate(d)],[rl(An),(d,i)=>{for(const u of i)if(u.evaluate(d))return!0;return!1}]]},"!":[An,[An],(d,[i])=>!i.evaluate(d)],"is-supported-script":[An,[an],(d,[i])=>{const u=d.globals&&d.globals.isSupportedScript;return!u||u(i.evaluate(d))}],upcase:[an,[an],(d,[i])=>i.evaluate(d).toUpperCase()],downcase:[an,[an],(d,[i])=>i.evaluate(d).toLowerCase()],concat:[an,rl(un),(d,i)=>i.map(u=>js(u.evaluate(d))).join("")],"resolved-locale":[an,[Uo],(d,[i])=>i.evaluate(d).resolvedLocale()],random:[Xa,[Xa,Xa,un],(d,i)=>{const[u,f,y]=i.map(_=>_.evaluate(d));if(u>f||u===f)return u;let m;if(typeof y=="string")m=function(_){let b=0;if(_.length===0)return b;for(let N=0;N<_.length;N++)b=(b<<5)-b+_.charCodeAt(N),b|=0;return b}(y);else{if(typeof y!="number")throw new ns(`Invalid seed input: ${y}`);m=y}return u+Gh(m)()*(f-u)}]});class to{constructor(i,u,f,y){this.expression=i,this._warningHistory={},this._evaluator=new bd(f,y),this._defaultValue=u?function(m){return m.type==="color"&&(Jf(m.default)||Array.isArray(m.default))?new bn(0,0,0,0):m.type==="color"?bn.parse(m.default)||null:m.default===void 0?null:m.default}(u):null,this._enumValues=u&&u.type==="enum"?u.values:null,this.configDependencies=Xn(i)}evaluateWithoutErrorHandling(i,u,f,y,m,_,b,N){return this._evaluator.globals=i,this._evaluator.feature=u,this._evaluator.featureState=f,this._evaluator.canonical=y||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=_,this._evaluator.featureTileCoord=b||null,this._evaluator.featureDistanceData=N||null,this.expression.evaluate(this._evaluator)}evaluate(i,u,f,y,m,_,b,N){this._evaluator.globals=i,this._evaluator.feature=u||null,this._evaluator.featureState=f||null,this._evaluator.canonical=y||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=_||null,this._evaluator.featureTileCoord=b||null,this._evaluator.featureDistanceData=N||null;try{const D=this.expression.evaluate(this._evaluator);if(D==null||typeof D=="number"&&D!=D)return this._defaultValue;if(this._enumValues&&!(D in this._enumValues))throw new ns(`Expected value to be one of ${Object.keys(this._enumValues).map(S=>JSON.stringify(S)).join(", ")}, but found ${JSON.stringify(D)} instead.`);return D}catch(D){return this._warningHistory[D.message]||(this._warningHistory[D.message]=!0,typeof console<"u"&&console.warn(`Failed to evaluate expression "${JSON.stringify(this.expression.serialize())}". ${D.message}`)),this._defaultValue}}}function jh(d){return Array.isArray(d)&&d.length>0&&typeof d[0]=="string"&&d[0]in Md}function G(d,i,u,f){const y=new eu(Md,[],i?function(_){const b={color:Gs,string:an,number:Xa,enum:an,boolean:An,formatted:yu,resolvedImage:Rs};return _.type==="array"?Li(b[_.value]||un,_.length):b[_.type]}(i):void 0,void 0,void 0,u,f),m=y.parse(d,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?Id(new to(m,i,u,f)):bu(y.errors)}class Q{constructor(i,u,f,y){this.kind=i,this._styleExpression=u,this.isLightConstant=f,this.isLineProgressConstant=y,this.isStateDependent=i!=="constant"&&!cs(u.expression),this.configDependencies=Xn(u.expression)}evaluateWithoutErrorHandling(i,u,f,y,m,_){return this._styleExpression.evaluateWithoutErrorHandling(i,u,f,y,m,_)}evaluate(i,u,f,y,m,_){return this._styleExpression.evaluate(i,u,f,y,m,_)}}class fe{constructor(i,u,f,y,m,_){this.kind=i,this.zoomStops=f,this._styleExpression=u,this.isStateDependent=i!=="camera"&&!cs(u.expression),this.isLightConstant=m,this.isLineProgressConstant=_,this.configDependencies=Xn(u.expression),this.interpolationType=y}evaluateWithoutErrorHandling(i,u,f,y,m,_){return this._styleExpression.evaluateWithoutErrorHandling(i,u,f,y,m,_)}evaluate(i,u,f,y,m,_){return this._styleExpression.evaluate(i,u,f,y,m,_)}interpolationFactor(i,u,f){return this.interpolationType?Hi.interpolationFactor(this.interpolationType,i,u,f):0}}function Ne(d,i,u,f){if((d=G(d,i,u,f)).result==="error")return d;const y=d.value.expression,m=Bo(y);if(!m&&!Zc(i))return bu([new Bs("","data expressions not supported")]);const _=ai(y,["zoom","pitch","distance-from-center"]);if(!_&&!Hu(i))return bu([new Bs("","zoom expressions not supported")]);const b=ai(y,["measure-light"]);if(!b&&!zl(i))return bu([new Bs("","measure-light expression not supported")]);const N=ai(y,["line-progress"]);if(!N&&!function(V){return Ld(V.expression,"line-progress")}(i))return bu([new Bs("","line-progress expression not supported")]);const D=i.expression&&i.expression.relaxZoomRestriction,S=Qe(y);return S||_||D?S instanceof Bs?bu([S]):S instanceof Hi&&!qc(i)?bu([new Bs("",'"interpolate" expressions cannot be used with this property')]):Id(S?new fe(m&&N?"camera":"composite",d.value,S.labels,S instanceof Hi?S.interpolation:void 0,b,N):new Q(m&&N?"constant":"source",d.value,b,N)):bu([new Bs("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class Ge{constructor(i,u){this._parameters=i,this._specification=u,Tn(this,Hc(this._parameters,this._specification))}static deserialize(i){return new Ge(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function Qe(d){let i=null;if(d instanceof Su)i=Qe(d.result);else if(d instanceof au){for(const u of d.args)if(i=Qe(u),i)break}else(d instanceof tu||d instanceof Hi)&&d.input instanceof Zs&&d.input.name==="zoom"&&(i=d);return i instanceof Bs||d.eachChild(u=>{const f=Qe(u);f instanceof Bs?i=f:i&&f&&i!==f&&(i=new Bs("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}var at,lt,pt=function(){if(lt)return at;lt=1,at=i;var d=3;function i(u,f,y){var m=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;var _=new Int32Array(this.arrayBuffer);u=_[0],this.d=(f=_[1])+2*(y=_[2]);for(var b=0;b<this.d*this.d;b++){var N=_[d+b],D=_[d+b+1];m.push(N===D?null:_.subarray(N,D))}var S=_[d+m.length+1];this.keys=_.subarray(_[d+m.length],S),this.bboxes=_.subarray(S),this.insert=this._insertReadonly}else{this.d=f+2*y;for(var V=0;V<this.d*this.d;V++)m.push([]);this.keys=[],this.bboxes=[]}this.n=f,this.extent=u,this.padding=y,this.scale=f/u,this.uid=0;var I=y/f*u;this.min=-I,this.max=u+I}return i.prototype.insert=function(u,f,y,m,_){this._forEachCell(f,y,m,_,this._insertCell,this.uid++),this.keys.push(u),this.bboxes.push(f),this.bboxes.push(y),this.bboxes.push(m),this.bboxes.push(_)},i.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},i.prototype._insertCell=function(u,f,y,m,_,b){this.cells[_].push(b)},i.prototype.query=function(u,f,y,m,_){var b=this.min,N=this.max;if(u<=b&&f<=b&&N<=y&&N<=m&&!_)return Array.prototype.slice.call(this.keys);var D=[];return this._forEachCell(u,f,y,m,this._queryCell,D,{},_),D},i.prototype._queryCell=function(u,f,y,m,_,b,N,D){var S=this.cells[_];if(S!==null)for(var V=this.keys,I=this.bboxes,O=0;O<S.length;O++){var M=S[O];if(N[M]===void 0){var B=4*M;(D?D(I[B+0],I[B+1],I[B+2],I[B+3]):u<=I[B+2]&&f<=I[B+3]&&y>=I[B+0]&&m>=I[B+1])?(N[M]=!0,b.push(V[M])):N[M]=!1}}},i.prototype._forEachCell=function(u,f,y,m,_,b,N,D){for(var S=this._convertToCellCoord(u),V=this._convertToCellCoord(f),I=this._convertToCellCoord(y),O=this._convertToCellCoord(m),M=S;M<=I;M++)for(var B=V;B<=O;B++){var X=this.d*B+M;if((!D||D(this._convertFromCellCoord(M),this._convertFromCellCoord(B),this._convertFromCellCoord(M+1),this._convertFromCellCoord(B+1)))&&_.call(this,u,f,y,m,X,b,N,D))return}},i.prototype._convertFromCellCoord=function(u){return(u-this.padding)/this.scale},i.prototype._convertToCellCoord=function(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))},i.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var u=this.cells,f=d+this.cells.length+1+1,y=0,m=0;m<this.cells.length;m++)y+=this.cells[m].length;var _=new Int32Array(f+y+this.keys.length+this.bboxes.length);_[0]=this.extent,_[1]=this.n,_[2]=this.padding;for(var b=f,N=0;N<u.length;N++){var D=u[N];_[d+N]=b,_.set(D,b),b+=D.length}return _[d+u.length]=b,_.set(this.keys,b),_[d+u.length+1]=b+=this.keys.length,_.set(this.bboxes,b),b+=this.bboxes.length,_.buffer},at}(),Ct=w(pt);const Qt={};function Pt(d,i,u={}){Object.defineProperty(d,"_classRegistryKey",{value:i,writable:!1}),Qt[i]={klass:d,omit:u.omit||[]}}Pt(Object,"Object"),Ct.serialize=function(d,i){const u=d.toArrayBuffer();return i&&i.add(u),{buffer:u}},Ct.deserialize=function(d){return new Ct(d.buffer)},Object.defineProperty(Ct,"name",{value:"Grid"}),Pt(Ct,"Grid"),typeof DOMMatrix<"u"&&Pt(DOMMatrix,"DOMMatrix"),Pt(bn,"Color"),Pt(Error,"Error"),Pt(us,"Formatted"),Pt(Xo,"FormattedSection"),Pt(ks,"AJAXError"),Pt(Ts,"ResolvedImage"),Pt(Ge,"StylePropertyFunction"),Pt(to,"StyleExpression",{omit:["_evaluator"]}),Pt(Fo,"ImageId"),Pt(Gu,"ImageVariant"),Pt(fe,"ZoomDependentExpression"),Pt(Q,"ZoomConstantExpression"),Pt(Zs,"CompoundExpression",{omit:["_evaluate"]});for(const d in Md)Qt[Md[d]._classRegistryKey]||Pt(Md[d],`Expression${d}`);function _a(d){return d&&typeof ArrayBuffer<"u"&&(d instanceof ArrayBuffer||d.constructor&&d.constructor.name==="ArrayBuffer")}function na(d){return self.ImageBitmap&&d instanceof ImageBitmap}function Ra(d,i){if(d==null||typeof d=="boolean"||typeof d=="number"||typeof d=="string"||d instanceof Boolean||d instanceof Number||d instanceof String||d instanceof Date||d instanceof RegExp)return d;if(_a(d)||na(d))return i&&i.add(d),d;if(ArrayBuffer.isView(d))return i&&i.add(d.buffer),d;if(d instanceof ImageData)return i&&i.add(d.data.buffer),d;if(Array.isArray(d)){const u=[];for(const f of d)u.push(Ra(f,i));return u}if(d instanceof Map){const u={$name:"Map",entries:[]};for(const[f,y]of d.entries())u.entries.push(Ra(f),Ra(y));return u}if(d instanceof Set){const u={$name:"Set"};let f=0;for(const y of d.values())u[++f]=Ra(y);return u}if(d instanceof DOMMatrix){const u={$name:"DOMMatrix"},f=["is2D","m11","m12","m13","m14","m21","m22","m23","m24","m31","m32","m33","m34","m41","m42","m43","m44","a","b","c","d","e","f"];for(const y of f)u[y]=d[y];return u}if(typeof d=="bigint")return{$name:"BigInt",value:d.toString()};if(typeof d=="object"){const u=d.constructor,f=u._classRegistryKey;if(!f)throw new Error(`Can't serialize object of unregistered class "${u.name}".`);const y=u.serialize?u.serialize(d,i):{};if(!u.serialize){for(const m in d)d.hasOwnProperty(m)&&(Qt[f].omit.indexOf(m)>=0||(y[m]=Ra(d[m],i)));d instanceof Error&&(y.message=d.message)}if(y.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(y.$name=f),y}throw new Error("can't serialize object of type "+typeof d)}function fa(d){if(d==null||typeof d=="boolean"||typeof d=="number"||typeof d=="string"||d instanceof Boolean||d instanceof Number||d instanceof String||d instanceof Date||d instanceof RegExp||_a(d)||na(d)||ArrayBuffer.isView(d)||d instanceof ImageData)return d;if(Array.isArray(d))return d.map(fa);if(typeof d=="object"){const i=d.$name||"Object";if(i==="Map"){const y=d.entries||[],m=new Map;for(let _=0;_<y.length;_+=2)m.set(fa(y[_]),fa(y[_+1]));return m}if(i==="Set"){const y=new Set;for(const m of Object.keys(d))m!=="$name"&&y.add(fa(d[m]));return y}if(i==="DOMMatrix"){let y;return y=d.is2D?[d.a,d.b,d.c,d.d,d.e,d.f]:[d.m11,d.m12,d.m13,d.m14,d.m21,d.m22,d.m23,d.m24,d.m31,d.m32,d.m33,d.m34,d.m41,d.m42,d.m43,d.m44],new DOMMatrix(y)}if(i==="BigInt")return BigInt(d.value);const{klass:u}=Qt[i];if(!u)throw new Error(`Can't deserialize unregistered class "${i}".`);if(u.deserialize)return u.deserialize(d);const f=Object.create(u.prototype);for(const y of Object.keys(d))y!=="$name"&&(f[y]=fa(d[y]));return f}throw new Error("can't deserialize object of type "+typeof d)}const wt={"Latin-1 Supplement":d=>d>=128&&d<=255,Arabic:d=>d>=1536&&d<=1791,"Arabic Supplement":d=>d>=1872&&d<=1919,"Arabic Extended-A":d=>d>=2208&&d<=2303,"Hangul Jamo":d=>d>=4352&&d<=4607,"Unified Canadian Aboriginal Syllabics":d=>d>=5120&&d<=5759,Khmer:d=>d>=6016&&d<=6143,"Unified Canadian Aboriginal Syllabics Extended":d=>d>=6320&&d<=6399,"General Punctuation":d=>d>=8192&&d<=8303,"Letterlike Symbols":d=>d>=8448&&d<=8527,"Number Forms":d=>d>=8528&&d<=8591,"Miscellaneous Technical":d=>d>=8960&&d<=9215,"Control Pictures":d=>d>=9216&&d<=9279,"Optical Character Recognition":d=>d>=9280&&d<=9311,"Enclosed Alphanumerics":d=>d>=9312&&d<=9471,"Geometric Shapes":d=>d>=9632&&d<=9727,"Miscellaneous Symbols":d=>d>=9728&&d<=9983,"Miscellaneous Symbols and Arrows":d=>d>=11008&&d<=11263,"CJK Radicals Supplement":d=>d>=11904&&d<=12031,"Kangxi Radicals":d=>d>=12032&&d<=12255,"Ideographic Description Characters":d=>d>=12272&&d<=12287,"CJK Symbols and Punctuation":d=>d>=12288&&d<=12351,Hiragana:d=>d>=12352&&d<=12447,Katakana:d=>d>=12448&&d<=12543,Bopomofo:d=>d>=12544&&d<=12591,"Hangul Compatibility Jamo":d=>d>=12592&&d<=12687,Kanbun:d=>d>=12688&&d<=12703,"Bopomofo Extended":d=>d>=12704&&d<=12735,"CJK Strokes":d=>d>=12736&&d<=12783,"Katakana Phonetic Extensions":d=>d>=12784&&d<=12799,"Enclosed CJK Letters and Months":d=>d>=12800&&d<=13055,"CJK Compatibility":d=>d>=13056&&d<=13311,"CJK Unified Ideographs Extension A":d=>d>=13312&&d<=19903,"Yijing Hexagram Symbols":d=>d>=19904&&d<=19967,"CJK Unified Ideographs":d=>d>=19968&&d<=40959,"Yi Syllables":d=>d>=40960&&d<=42127,"Yi Radicals":d=>d>=42128&&d<=42191,"Hangul Jamo Extended-A":d=>d>=43360&&d<=43391,"Hangul Syllables":d=>d>=44032&&d<=55215,"Hangul Jamo Extended-B":d=>d>=55216&&d<=55295,"Private Use Area":d=>d>=57344&&d<=63743,"CJK Compatibility Ideographs":d=>d>=63744&&d<=64255,"Arabic Presentation Forms-A":d=>d>=64336&&d<=65023,"Vertical Forms":d=>d>=65040&&d<=65055,"CJK Compatibility Forms":d=>d>=65072&&d<=65103,"Small Form Variants":d=>d>=65104&&d<=65135,"Arabic Presentation Forms-B":d=>d>=65136&&d<=65279,"Halfwidth and Fullwidth Forms":d=>d>=65280&&d<=65519,Osage:d=>d>=66736&&d<=66815,"CJK Unified Ideographs Extension B":d=>d>=131072&&d<=173791};function aa(d){for(const i of d)if(qa(i.charCodeAt(0)))return!0;return!1}function Ga(d){for(const i of d)if(!Ka(i.charCodeAt(0)))return!1;return!0}function Ka(d){return!(wt.Arabic(d)||wt["Arabic Supplement"](d)||wt["Arabic Extended-A"](d)||wt["Arabic Presentation Forms-A"](d)||wt["Arabic Presentation Forms-B"](d))}function qa(d){return!(d!==746&&d!==747&&(d<4352||!(wt["Bopomofo Extended"](d)||wt.Bopomofo(d)||wt["CJK Compatibility Forms"](d)&&!(d>=65097&&d<=65103)||wt["CJK Compatibility Ideographs"](d)||wt["CJK Compatibility"](d)||wt["CJK Radicals Supplement"](d)||wt["CJK Strokes"](d)||!(!wt["CJK Symbols and Punctuation"](d)||d>=12296&&d<=12305||d>=12308&&d<=12319||d===12336)||wt["CJK Unified Ideographs Extension A"](d)||wt["CJK Unified Ideographs"](d)||wt["Enclosed CJK Letters and Months"](d)||wt["Hangul Compatibility Jamo"](d)||wt["Hangul Jamo Extended-A"](d)||wt["Hangul Jamo Extended-B"](d)||wt["Hangul Jamo"](d)||wt["Hangul Syllables"](d)||wt.Hiragana(d)||wt["Ideographic Description Characters"](d)||wt.Kanbun(d)||wt["Kangxi Radicals"](d)||wt["Katakana Phonetic Extensions"](d)||wt.Katakana(d)&&d!==12540||!(!wt["Halfwidth and Fullwidth Forms"](d)||d===65288||d===65289||d===65293||d>=65306&&d<=65310||d===65339||d===65341||d===65343||d>=65371&&d<=65503||d===65507||d>=65512&&d<=65519)||!(!wt["Small Form Variants"](d)||d>=65112&&d<=65118||d>=65123&&d<=65126)||wt["Unified Canadian Aboriginal Syllabics"](d)||wt["Unified Canadian Aboriginal Syllabics Extended"](d)||wt["Vertical Forms"](d)||wt["Yijing Hexagram Symbols"](d)||wt["Yi Syllables"](d)||wt["Yi Radicals"](d))))}function Sr(d){return!(qa(d)||function(i){return!!(wt["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||wt["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||wt["Letterlike Symbols"](i)||wt["Number Forms"](i)||wt["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||wt["Control Pictures"](i)&&i!==9251||wt["Optical Character Recognition"](i)||wt["Enclosed Alphanumerics"](i)||wt["Geometric Shapes"](i)||wt["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||wt["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||wt["CJK Symbols and Punctuation"](i)||wt.Katakana(i)||wt["Private Use Area"](i)||wt["CJK Compatibility Forms"](i)||wt["Small Form Variants"](i)||wt["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(d))}function pr(d){return wt.Arabic(d)||wt["Arabic Supplement"](d)||wt["Arabic Extended-A"](d)||wt["Arabic Presentation Forms-A"](d)||wt["Arabic Presentation Forms-B"](d)}function rn(d){return d>=1424&&d<=2303||wt["Arabic Presentation Forms-A"](d)||wt["Arabic Presentation Forms-B"](d)}function ur(d,i){return!(!i&&rn(d)||d>=2304&&d<=3583||d>=3840&&d<=4255||wt.Khmer(d))}function vi(d){for(const i of d)if(rn(i.charCodeAt(0)))return!0;return!1}const xi="deferred",Hn="loading",ri="loaded";let $i=null,kn="unavailable",_n=null;const ds=function(d){d&&typeof d=="string"&&d.indexOf("NetworkError")>-1&&(kn="error"),$i&&$i(d)};function Fi(){Bn.fire(new Lo("pluginStateChange",{pluginStatus:kn,pluginURL:_n}))}const Bn=new $l,po=function(){return kn},wi=function(){if(kn!==xi||!_n)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");kn=Hn,Fi(),_n&&zi({url:_n},d=>{d?ds(d):(kn=ri,Fi())})},ss={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>kn===ri||ss.applyArabicShaping!=null,isLoading:()=>kn===Hn,setState(d){kn=d.pluginStatus,_n=d.pluginURL},isParsed:()=>ss.applyArabicShaping!=null&&ss.processBidirectionalText!=null&&ss.processStyledBidirectionalText!=null,getPluginURL:()=>_n};class vn{constructor(i,u){this.zoom=i,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.transition=u.transition,this.pitch=u.pitch,this.brightness=u.brightness):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(i){return function(u,f){for(const y of u)if(!ur(y.charCodeAt(0),f))return!1;return!0}(i,ss.isLoaded())}}class Ii{constructor(i,u,f,y){this.property=i,this.value=u,this.expression=function(m,_,b,N){if(Jf(m))return new Ge(m,_);if(jh(m)||Array.isArray(m)&&m.length>0){const D=Ne(m,_,b,N);if(D.result==="error")throw new Error(D.value.map(S=>`${S.key}: ${S.message}`).join(", "));return D.value}{let D=m;return typeof m=="string"&&_.type==="color"&&(D=bn.parse(m)),{kind:"constant",configDependencies:new Set,evaluate:()=>D}}}(u===void 0?i.specification.default:u,i.specification,f,y)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(i,u,f){return this.property.possiblyEvaluate(this,i,u,f)}}class Hs{constructor(i,u,f){this.property=i,this.value=new Ii(i,void 0,u,f)}transitioned(i,u){return new nl(this.property,this.value,u,Rn({},i.transition,this.transition),i.now)}untransitioned(){return new nl(this.property,this.value,null,{},0)}}class To{constructor(i,u,f){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues),this._scope=u,this._options=f,this.configDependencies=new Set}getValue(i){return Mn(this._values[i].value.value)}setValue(i,u){this._values.hasOwnProperty(i)||(this._values[i]=new Hs(this._values[i].property,this._scope,this._options)),this._values[i].value=new Ii(this._values[i].property,u===null?void 0:Mn(u),this._scope,this._options),this._values[i].value.expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[i].value.expression.configDependencies]))}setTransitionOrValue(i,u){u&&(this._options=u);const f=this._properties.properties;if(i)for(const y in i){const m=i[y];if(y.endsWith("-transition")){const _=y.slice(0,-11);f[_]&&this.setTransition(_,m)}else f.hasOwnProperty(y)&&this.setValue(y,m)}}getTransition(i){return Mn(this._values[i].transition)}setTransition(i,u){this._values.hasOwnProperty(i)||(this._values[i]=new Hs(this._values[i].property)),this._values[i].transition=Mn(u)||void 0}serialize(){const i={};for(const u of Object.keys(this._values)){const f=this.getValue(u);f!==void 0&&(i[u]=f);const y=this.getTransition(u);y!==void 0&&(i[`${u}-transition`]=y)}return i}transitioned(i,u){const f=new Ol(this._properties);for(const y of Object.keys(this._values))f._values[y]=this._values[y].transitioned(i,u._values[y]);return f}untransitioned(){const i=new Ol(this._properties);for(const u of Object.keys(this._values))i._values[u]=this._values[u].untransitioned();return i}}class nl{constructor(i,u,f,y,m){const _=y.delay||0,b=y.duration||0;m=m||0,this.property=i,this.value=u,this.begin=m+_,this.end=this.begin+b,i.specification.transition&&(y.delay||y.duration)&&(this.prior=f)}possiblyEvaluate(i,u,f){const y=i.now||0,m=this.value.possiblyEvaluate(i,u,f),_=this.prior;if(_){if(y>this.end)return this.prior=null,m;if(this.value.isDataDriven())return this.prior=null,m;if(y<this.begin)return _.possiblyEvaluate(i,u,f);{const b=(y-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(i,u,f),m,dr(b))}}return m}}class Ol{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,u,f){const y=new xu(this._properties);for(const m of Object.keys(this._values))y._values[m]=this._values[m].possiblyEvaluate(i,u,f);return y}hasTransition(){for(const i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class xs{constructor(i,u,f){this._properties=i,this._values=Object.create(i.defaultPropertyValues),this._scope=u,this._options=f,this.configDependencies=new Set}getValue(i){return Mn(this._values[i].value)}setValue(i,u){this._values[i]=new Ii(this._values[i].property,u===null?void 0:Mn(u),this._scope,this._options),this._values[i].expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[i].expression.configDependencies]))}serialize(){const i={};for(const u of Object.keys(this._values)){const f=this.getValue(u);f!==void 0&&(i[u]=f)}return i}possiblyEvaluate(i,u,f){const y=new xu(this._properties);for(const m of Object.keys(this._values))y._values[m]=this._values[m].possiblyEvaluate(i,u,f);return y}}class Dl{constructor(i,u,f){this.property=i,this.value=u,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,u,f,y){return this.property.evaluate(this.value,this.parameters,i,u,f,y)}}class xu{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class ba{constructor(i){this.specification=i}possiblyEvaluate(i,u){return i.expression.evaluate(u)}interpolate(i,u,f){const y=oh[this.specification.type];return y?y(i,u,f):i}}class Ua{constructor(i,u){this.specification=i,this.overrides=u}possiblyEvaluate(i,u,f,y){return new Dl(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(u,null,{},f,y)}:i.expression,u)}interpolate(i,u,f){if(i.value.kind!=="constant"||u.value.kind!=="constant")return i;if(i.value.value===void 0||u.value.value===void 0)return new Dl(this,{kind:"constant",value:void 0},i.parameters);const y=oh[this.specification.type];return y?new Dl(this,{kind:"constant",value:y(i.value.value,u.value.value,f)},i.parameters):i}evaluate(i,u,f,y,m,_){return i.kind==="constant"?i.value:i.evaluate(u,f,y,m,_)}}class Ki{constructor(i){this.specification=i}possiblyEvaluate(i,u,f,y){return!!i.expression.evaluate(u,null,{},f,y)}interpolate(){return!1}}class Oi{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const u=new vn(0,{});for(const f in i){const y=i[f];y.specification.overridable&&this.overridableProperties.push(f);const m=this.defaultPropertyValues[f]=new Ii(y,void 0),_=this.defaultTransitionablePropertyValues[f]=new Hs(y);this.defaultTransitioningPropertyValues[f]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[f]=m.possiblyEvaluate(u)}}}Pt(Ua,"DataDrivenProperty"),Pt(ba,"DataConstantProperty"),Pt(Ki,"ColorRampProperty");var jt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"required":false,"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"snow":{"type":"snow","experimental":true},"rain":{"type":"rain","experimental":true},"camera":{"type":"camera"},"color-theme":{"type":"colorTheme"},"indoor":{"type":"indoor","experimental":true},"imports":{"type":"array","value":"import"},"iconsets":{"experimental":true,"type":"iconsets"},"schema":{"type":"schema"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"},"models":{"type":"models"},"featuresets":{"experimental":true,"type":"featuresets"}},"featuresets":{"experimental":true,"*":{"type":"featureset"}},"featureset":{"experimental":true,"metadata":{"experimental":true,"type":"*"},"selectors":{"experimental":true,"type":"array","value":"selector"}},"selector":{"experimental":true,"layer":{"experimental":true,"type":"string","required":true},"properties":{"experimental":true,"type":"selectorProperty","required":false},"featureNamespace":{"experimental":true,"type":"string","required":false},"_uniqueFeatureID":{"experimental":true,"type":"boolean","private":true,"required":false}},"selectorProperty":{"experimental":true,"*":{"experimental":true,"type":"*"}},"model":{"type":"string","required":true},"import":{"id":{"type":"string","required":true},"url":{"type":"string","required":true},"config":{"type":"config"},"data":{"type":"$root"},"color-theme":{"type":"colorTheme","optional":true}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","property-type":"data-constant","expression":{},"required":true},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string","required":true},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false,"property-type":"data-constant"},"shadow-quality":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"parameters":["zoom"]},"experimental":true},"shadow-intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_ambient":{"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"iconsets":{"*":{"type":"iconset"}},"iconset":["iconset_sprite","iconset_source"],"iconset_sprite":{"type":{"required":true,"type":"enum","values":{"sprite":1}},"url":{"required":true,"type":"string"}},"iconset_source":{"type":{"required":true,"type":"enum","values":{"source":1}},"source":{"required":true,"type":"string"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"experimental":true,"type":{"required":true,"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"},"dynamic":{"type":"boolean","default":false}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":1}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":1}},"url":{"required":false,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_model":{"type":{"required":true,"type":"enum","values":{"model":1,"batched-model":1}},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"raster-particle":{"experimental":true},"hillshade":{},"model":{"experimental":true},"background":{},"sky":{},"slot":{},"clip":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_clip","layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_raster-particle","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}}},"layout_clip":{"clip-layer-types":{"type":"array","value":"enum","values":{"model":1,"symbol":1},"default":[],"expression":{},"property-type":"data-constant"},"clip-layer-scope":{"type":"array","value":"string","default":[],"expression":{},"property-type":"data-constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-base":1,"hd-road-markup":1},"default":"none","experimental":true,"private":true,"expression":{},"property-type":"data-constant"},"fill-construct-bridge-guard-rail":{"type":"boolean","default":"true","experimental":true,"private":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"circle-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-markup":1},"default":"none","experimental":true,"expression":{},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1,"none":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-z-offset":{"type":"number","experimental":true,"default":0,"expression":{"parameters":["zoom","feature","line-progress"]},"property-type":"data-driven"},"line-elevation-reference":{"type":"enum","values":{"none":1,"sea":1,"ground":1,"hd-road-markup":1},"default":"none","experimental":true,"expression":{},"property-type":"data-constant"},"line-cross-slope":{"type":"number","experimental":true,"expression":{},"property-type":"constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"line-width-unit":{"type":"enum","values":{"pixels":1,"meters":1},"default":"pixels","experimental":true,"private":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-elevation-reference":{"type":"enum","values":{"sea":1,"ground":1,"hd-road-markup":1},"default":"ground","experimental":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"experimental":true,"private":true,"expression":{},"property-type":"data-constant"},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"experimental":true,"private":true,"expression":{},"property-type":"data-constant"},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster-particle":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_hillshade":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster-particle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_clip":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_model":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"snow":{"density":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,0.85],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"opacity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,0.3],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","property-type":"data-constant","default":"#ffffff","experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"center-thinning":{"type":"number","property-type":"data-constant","default":0.4,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,50],"minimum":0,"maximum":360,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"flake-size":{"type":"number","property-type":"data-constant","default":0.71,"minimum":0,"maximum":5,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"rain":{"density":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,0.5],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["measure-light","brightness"],0,"#03113d",0.3,"#a8adbc"],"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"opacity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["measure-light","brightness"],0,0.88,1,0.7],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,1],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["measure-light","brightness"],0,"#001736",0.3,"#464646"],"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"center-thinning":{"type":"number","property-type":"data-constant","default":0.57,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,80],"minimum":0,"maximum":360,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"droplet-size":{"type":"array","default":[2.6,18.2],"minimum":0,"maximum":50,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"distortion-strength":{"type":"number","property-type":"data-constant","default":0.7,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective","property-type":"data-constant"}},"colorTheme":{"data":{"type":"string","property-type":"data-constant","expression":{}}},"indoor":{"floorplanFeaturesetId":{"type":"string","experimental":true,"property-type":"data-constant","expression":{}},"buildingFeaturesetId":{"type":"string","experimental":true,"property-type":"data-constant","expression":{}}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_raster-particle","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"fill-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-bridge-guard-rail-color":{"type":"color","default":"rgba(241, 236, 225, 255)","experimental":true,"private":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature"]},"property-type":"data-driven"},"fill-tunnel-structure-color":{"type":"color","default":"rgba(241, 236, 225, 255)","transition":true,"experimental":true,"private":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-height-alignment":{"type":"enum","experimental":true,"values":{"terrain":1,"flat":1},"default":"flat","property-type":"data-constant"},"fill-extrusion-base-alignment":{"type":"enum","experimental":true,"values":{"terrain":1,"flat":1},"default":"terrain","property-type":"data-constant"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"property-type":"data-constant","type":"color","experimental":true,"default":"#ffffff","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"property-type":"data-constant","type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"property-type":"data-constant","type":"number","experimental":true,"default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"property-type":"data-constant","type":"boolean","default":true,"experimental":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"fill-extrusion-line-width":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light","line-progress"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"property-type":"constant"},"line-trim-fade-range":{"type":"array","value":"number","experimental":true,"length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-trim-color":{"type":"color","experimental":true,"default":"transparent","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-border-width":{"type":"number","private":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","private":true,"default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-occlusion-opacity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"property-type":"data-constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-image-cross-fade":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"transition":true},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-color-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"symbol-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-value"]},"property-type":"color-ramp"},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"raster-array-band":{"type":"string","required":false,"experimental":true,"property-type":"data-constant"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster-particle":{"raster-particle-array-band":{"type":"string","required":false,"property-type":"data-constant"},"raster-particle-count":{"type":"number","default":512,"minimum":1,"property-type":"data-constant"},"raster-particle-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-particle-speed"]},"property-type":"color-ramp"},"raster-particle-max-speed":{"type":"number","default":1,"minimum":1,"property-type":"data-constant"},"raster-particle-speed-factor":{"type":"number","default":0.2,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-fade-opacity-factor":{"type":"number","default":0.98,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-reset-rate-factor":{"type":"number","default":0.8,"minimum":0,"maximum":1,"property-type":"data-constant"},"raster-particle-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_background":{"background-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":[]},"experimental":true,"property-type":"data-constant"},"background-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"property-type":"data-driven"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d","property-type":"data-constant"},"model-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-receive-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant","transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"model-front-cutoff":{"type":"array","private":true,"value":"number","property-type":"data-constant","expression":{"interpolated":true,"parameters":["zoom"]},"length":3,"default":[0,0,1],"minimum":[0,0,0],"maximum":[1,1,1]}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"*"}}}');function Yp(d){return d instanceof Number||d instanceof String||d instanceof Boolean?d.valueOf():d}function hh(d){if(Array.isArray(d))return d.map(hh);if(d instanceof Object&&!(d instanceof Number||d instanceof String||d instanceof Boolean)){const i={};for(const u in d)i[u]=hh(d[u]);return i}return Yp(d)}function fh(d){if(d===!0||d===!1)return!0;if(!Array.isArray(d)||d.length===0)return!1;switch(d[0]){case"has":return d.length>=2&&d[1]!=="$id"&&d[1]!=="$type";case"in":return d.length>=3&&(typeof d[1]!="string"||Array.isArray(d[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return d.length!==3||Array.isArray(d[1])||Array.isArray(d[2]);case"any":case"all":for(const i of d.slice(1))if(!fh(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}function ph(d,i="",u=null,f="fill"){if(d==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};fh(d)||(d=yh(d));const y=d;let m=!0;try{m=function(S){if(!$u(S))return S;let V=hh(S);return mh(V),V=Pu(V),V}(y)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(y,null,2)}
        `)}let _=null,b=null;if(f!=="background"&&f!=="sky"&&f!=="slot"){b=jt[`filter_${f}`];const S=G(m,b,i,u);if(S.result==="error")throw new Error(S.value.map(V=>`${V.key}: ${V.message}`).join(", "));_=(V,I,O)=>S.value.evaluate(V,I,{},O)}let N=null,D=null;if(m!==y){const S=G(y,b,i,u);if(S.result==="error")throw new Error(S.value.map(V=>`${V.key}: ${V.message}`).join(", "));N=(V,I,O,M,B)=>S.value.evaluate(V,I,{},O,void 0,void 0,M,B),D=!Bo(S.value.expression)}return{filter:_,dynamicFilter:N||void 0,needGeometry:$m(m),needFeature:!!D}}function Pu(d){if(!Array.isArray(d))return d;const i=function(u){if(Hm.has(u[0])){for(let f=1;f<u.length;f++)if($u(u[f]))return!0}return u}(d);return i===!0?i:i.map(u=>Pu(u))}function mh(d){let i=!1;const u=[];if(d[0]==="case"){for(let f=1;f<d.length-1;f+=2)i=i||$u(d[f]),u.push(d[f+1]);u.push(d[d.length-1])}else if(d[0]==="match"){i=i||$u(d[1]);for(let f=2;f<d.length-1;f+=2)u.push(d[f+1]);u.push(d[d.length-1])}else if(d[0]==="step"){i=i||$u(d[1]);for(let f=1;f<d.length-1;f+=2)u.push(d[f+1])}i&&(d.length=0,d.push("any",...u));for(let f=1;f<d.length;f++)mh(d[f])}function $u(d){if(!Array.isArray(d))return!1;if((i=d[0])==="pitch"||i==="distance-from-center")return!0;var i;for(let u=1;u<d.length;u++)if($u(d[u]))return!0;return!1}const Hm=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Qf(d,i){return d<i?-1:d>i?1:0}function $m(d){if(!Array.isArray(d))return!1;if(d[0]==="within"||d[0]==="distance")return!0;for(let i=1;i<d.length;i++)if($m(d[i]))return!0;return!1}function yh(d){if(!d)return!0;const i=d[0];return d.length<=1?i!=="any":i==="=="?Ml(d[1],d[2],"=="):i==="!="?Kc(Ml(d[1],d[2],"==")):i==="<"||i===">"||i==="<="||i===">="?Ml(d[1],d[2],i):i==="any"?(u=d.slice(1),["any"].concat(u.map(yh))):i==="all"?["all"].concat(d.slice(1).map(yh)):i==="none"?["all"].concat(d.slice(1).map(yh).map(Kc)):i==="in"?Zh(d[1],d.slice(2)):i==="!in"?Kc(Zh(d[1],d.slice(2))):i==="has"?$c(d[1]):i!=="!has"||Kc($c(d[1]));var u}function Ml(d,i,u){switch(d){case"$type":return[`filter-type-${u}`,i];case"$id":return[`filter-id-${u}`,i];default:return[`filter-${u}`,d,i]}}function Zh(d,i){if(i.length===0)return!1;switch(d){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(u=>typeof u!=typeof i[0])?["filter-in-large",d,["literal",i.sort(Qf)]]:["filter-in-small",d,["literal",i]]}}function $c(d){switch(d){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",d]}}function Kc(d){return["!",d]}const ep="";function Wc(d,i){return i?`${d}${ep}${i}`:d}const il="-transition",Km=new Set(["fill","line","background","hillshade","raster"]);class ao extends $l{constructor(i,u,f,y,m){if(super(),this.id=i.id,this.fqid=Wc(this.id,f),this.type=i.type,this.scope=f,this.lut=y,this.options=m,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.configDependencies=new Set,i.type!=="custom"){if(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type&&i.type!=="background"&&i.type!=="sky"&&i.type!=="slot"){this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter;const _=G(this.filter,jt[`filter_${i.type}`]);_.result!=="error"&&(this.configDependencies=new Set([...this.configDependencies,..._.value.configDependencies]))}if(i.slot&&(this.slot=i.slot),u.layout&&(this._unevaluatedLayout=new xs(u.layout,this.scope,m),this.configDependencies=new Set([...this.configDependencies,...this._unevaluatedLayout.configDependencies])),u.paint){this._transitionablePaint=new To(u.paint,this.scope,m);for(const _ in i.paint)this.setPaintProperty(_,i.paint[_]);for(const _ in i.layout)this.setLayoutProperty(_,i.layout[_]);this.configDependencies=new Set([...this.configDependencies,...this._transitionablePaint.configDependencies]),this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new xu(u.paint)}}}onAdd(i){}onRemove(i){}isDraped(i){return!this.is3D(!0)&&Km.has(this.type)}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}setLayoutProperty(i,u){if(this.type==="custom"&&i==="visibility")return void(this.visibility=u);const f=this._unevaluatedLayout;f._properties.properties[i]&&(f.setValue(i,u),this.configDependencies=new Set([...this.configDependencies,...f.configDependencies]),i==="visibility"&&this.possiblyEvaluateVisibility())}possiblyEvaluateVisibility(){this._unevaluatedLayout._values.visibility&&(this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0}))}getPaintProperty(i){return i.endsWith(il)?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)}setPaintProperty(i,u){const f=this._transitionablePaint,y=f._properties.properties;if(i.endsWith(il)){const V=i.slice(0,-11);return y[V]&&f.setTransition(V,u||void 0),!1}if(!y[i])return!1;const m=f._values[i],_=m.value.isDataDriven(),b=m.value;f.setValue(i,u),this.configDependencies=new Set([...this.configDependencies,...f.configDependencies]),this._handleSpecialPaintPropertyUpdate(i);const N=f._values[i].value,D=N.isDataDriven(),S=i.endsWith("pattern")||i==="line-dasharray";return D||_||S||this._handleOverridablePaintPropertyUpdate(i,b,N)}_handleSpecialPaintPropertyUpdate(i){}getProgramIds(){return null}getDefaultProgramParams(i,u,f){return null}_handleOverridablePaintPropertyUpdate(i,u,f){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,u){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,u)}serialize(){return qn({id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()},(i,u)=>!(i===void 0||u==="layout"&&!Object.keys(i).length||u==="paint"&&!Object.keys(i).length))}is3D(i){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}tileCoverLift(){return 0}resize(){}isStateDependent(){for(const i in this.paint._values){const u=this.paint.get(i);if(u instanceof Dl&&Zc(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}compileFilter(i){this._filterCompiled||(this._featureFilter=ph(this.filter,this.scope,i),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(i){this._stats&&(i.renderPass==="shadow"?this._stats.numRenderedVerticesInShadowPass=0:this._stats.numRenderedVerticesInTransparentPass=0)}queryRadius(i){}queryIntersectsFeature(i,u,f,y,m,_,b,N,D){}}const Uy={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class gh{constructor(i,u){this._structArray=i,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ni{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,u){return i._trim(),u&&(i.isTransferred=!0,u.add(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){const u=Object.create(this.prototype);return u.arrayBuffer=i.arrayBuffer,u.length=i.length,u.capacity=i.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("StructArray#_refreshViews() must be implemented by each concrete StructArray layout")}emplace(...i){throw new Error("StructArray#emplace() must be implemented by each concrete StructArray layout")}emplaceBack(...i){throw new Error("StructArray#emplaceBack() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function xn(d,i=1){let u=0,f=0;return{members:d.map(y=>{const m=Uy[y.type].BYTES_PER_ELEMENT,_=u=tp(u,Math.max(i,m)),b=y.components||1;return f=Math.max(f,m),u+=m*b,{name:y.name,type:y.type,components:b,offset:_}}),size:tp(u,Math.max(f,i)),alignment:i}}function tp(d,i){return Math.ceil(d/i)*i}class Eu extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u){const f=this.length;return this.resize(f+1),this.emplace(f,i,u)}emplace(i,u,f){const y=2*i;return this.int16[y+0]=u,this.int16[y+1]=f,i}}Eu.prototype.bytesPerElement=4,Pt(Eu,"StructArrayLayout2i4");class Ud extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,f){const y=this.length;return this.resize(y+1),this.emplace(y,i,u,f)}emplace(i,u,f,y){const m=3*i;return this.int16[m+0]=u,this.int16[m+1]=f,this.int16[m+2]=y,i}}Ud.prototype.bytesPerElement=6,Pt(Ud,"StructArrayLayout3i6");class Nu extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,f,y){const m=this.length;return this.resize(m+1),this.emplace(m,i,u,f,y)}emplace(i,u,f,y,m){const _=4*i;return this.int16[_+0]=u,this.int16[_+1]=f,this.int16[_+2]=y,this.int16[_+3]=m,i}}Nu.prototype.bytesPerElement=8,Pt(Nu,"StructArrayLayout4i8");class Yc extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){const u=this.length;return this.resize(u+1),this.emplace(u,i)}emplace(i,u){return this.float32[1*i+0]=u,i}}Yc.prototype.bytesPerElement=4,Pt(Yc,"StructArrayLayout1f4");class Sf extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f){const y=this.length;return this.resize(y+1),this.emplace(y,i,u,f)}emplace(i,u,f,y){const m=4*i,_=2*i;return this.int16[m+0]=u,this.int16[m+1]=f,this.float32[_+1]=y,i}}Sf.prototype.bytesPerElement=8,Pt(Sf,"StructArrayLayout2i1f8");class qh extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,f){const y=this.length;return this.resize(y+1),this.emplace(y,i,u,f)}emplace(i,u,f,y){const m=4*i;return this.int16[m+0]=u,this.int16[m+1]=f,this.int16[m+2]=y,i}}qh.prototype.bytesPerElement=8,Pt(qh,"StructArrayLayout3i8");class Il extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m){const _=this.length;return this.resize(_+1),this.emplace(_,i,u,f,y,m)}emplace(i,u,f,y,m,_){const b=5*i;return this.int16[b+0]=u,this.int16[b+1]=f,this.int16[b+2]=y,this.int16[b+3]=m,this.int16[b+4]=_,i}}Il.prototype.bytesPerElement=10,Pt(Il,"StructArrayLayout5i10");class Cf extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_,b){const N=this.length;return this.resize(N+1),this.emplace(N,i,u,f,y,m,_,b)}emplace(i,u,f,y,m,_,b,N){const D=6*i,S=12*i,V=3*i;return this.int16[D+0]=u,this.int16[D+1]=f,this.uint8[S+4]=y,this.uint8[S+5]=m,this.uint8[S+6]=_,this.uint8[S+7]=b,this.float32[V+2]=N,i}}Cf.prototype.bytesPerElement=12,Pt(Cf,"StructArrayLayout2i4ub1f12");class So extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f){const y=this.length;return this.resize(y+1),this.emplace(y,i,u,f)}emplace(i,u,f,y){const m=3*i;return this.float32[m+0]=u,this.float32[m+1]=f,this.float32[m+2]=y,i}}So.prototype.bytesPerElement=12,Pt(So,"StructArrayLayout3f12");class kd extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m){const _=this.length;return this.resize(_+1),this.emplace(_,i,u,f,y,m)}emplace(i,u,f,y,m,_){const b=6*i,N=3*i;return this.uint16[b+0]=u,this.uint16[b+1]=f,this.uint16[b+2]=y,this.uint16[b+3]=m,this.float32[N+2]=_,i}}kd.prototype.bytesPerElement=12,Pt(kd,"StructArrayLayout4ui1f12");class ap extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,f,y){const m=this.length;return this.resize(m+1),this.emplace(m,i,u,f,y)}emplace(i,u,f,y,m){const _=4*i;return this.uint16[_+0]=u,this.uint16[_+1]=f,this.uint16[_+2]=y,this.uint16[_+3]=m,i}}ap.prototype.bytesPerElement=8,Pt(ap,"StructArrayLayout4ui8");class rp extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_){const b=this.length;return this.resize(b+1),this.emplace(b,i,u,f,y,m,_)}emplace(i,u,f,y,m,_,b){const N=6*i;return this.int16[N+0]=u,this.int16[N+1]=f,this.int16[N+2]=y,this.int16[N+3]=m,this.int16[N+4]=_,this.int16[N+5]=b,i}}rp.prototype.bytesPerElement=12,Pt(rp,"StructArrayLayout6i12");class Ah extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_,b,N,D,S,V,I){const O=this.length;return this.resize(O+1),this.emplace(O,i,u,f,y,m,_,b,N,D,S,V,I)}emplace(i,u,f,y,m,_,b,N,D,S,V,I,O){const M=12*i;return this.int16[M+0]=u,this.int16[M+1]=f,this.int16[M+2]=y,this.int16[M+3]=m,this.uint16[M+4]=_,this.uint16[M+5]=b,this.uint16[M+6]=N,this.uint16[M+7]=D,this.int16[M+8]=S,this.int16[M+9]=V,this.int16[M+10]=I,this.int16[M+11]=O,i}}Ah.prototype.bytesPerElement=24,Pt(Ah,"StructArrayLayout4i4ui4i24");class Xc extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_){const b=this.length;return this.resize(b+1),this.emplace(b,i,u,f,y,m,_)}emplace(i,u,f,y,m,_,b){const N=10*i,D=5*i;return this.int16[N+0]=u,this.int16[N+1]=f,this.int16[N+2]=y,this.float32[D+2]=m,this.float32[D+3]=_,this.float32[D+4]=b,i}}Xc.prototype.bytesPerElement=20,Pt(Xc,"StructArrayLayout3i3f20");class Jc extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f,y){const m=this.length;return this.resize(m+1),this.emplace(m,i,u,f,y)}emplace(i,u,f,y,m){const _=4*i;return this.float32[_+0]=u,this.float32[_+1]=f,this.float32[_+2]=y,this.float32[_+3]=m,i}}Jc.prototype.bytesPerElement=16,Pt(Jc,"StructArrayLayout4f16");class np extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){const u=this.length;return this.resize(u+1),this.emplace(u,i)}emplace(i,u){return this.uint32[1*i+0]=u,i}}np.prototype.bytesPerElement=4,Pt(np,"StructArrayLayout1ul4");class Bd extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u){const f=this.length;return this.resize(f+1),this.emplace(f,i,u)}emplace(i,u,f){const y=2*i;return this.uint16[y+0]=u,this.uint16[y+1]=f,i}}Bd.prototype.bytesPerElement=4,Pt(Bd,"StructArrayLayout2ui4");class Vu extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_,b,N,D,S,V,I,O){const M=this.length;return this.resize(M+1),this.emplace(M,i,u,f,y,m,_,b,N,D,S,V,I,O)}emplace(i,u,f,y,m,_,b,N,D,S,V,I,O,M){const B=20*i,X=10*i;return this.int16[B+0]=u,this.int16[B+1]=f,this.int16[B+2]=y,this.int16[B+3]=m,this.int16[B+4]=_,this.float32[X+3]=b,this.float32[X+4]=N,this.float32[X+5]=D,this.float32[X+6]=S,this.int16[B+14]=V,this.uint32[X+8]=I,this.uint16[B+18]=O,this.uint16[B+19]=M,i}}Vu.prototype.bytesPerElement=40,Pt(Vu,"StructArrayLayout5i4f1i1ul2ui40");class vc extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_,b){const N=this.length;return this.resize(N+1),this.emplace(N,i,u,f,y,m,_,b)}emplace(i,u,f,y,m,_,b,N){const D=8*i;return this.int16[D+0]=u,this.int16[D+1]=f,this.int16[D+2]=y,this.int16[D+4]=m,this.int16[D+5]=_,this.int16[D+6]=b,this.int16[D+7]=N,i}}vc.prototype.bytesPerElement=16,Pt(vc,"StructArrayLayout3i2i2i16");class ru extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m){const _=this.length;return this.resize(_+1),this.emplace(_,i,u,f,y,m)}emplace(i,u,f,y,m,_){const b=4*i,N=8*i;return this.float32[b+0]=u,this.float32[b+1]=f,this.float32[b+2]=y,this.int16[N+6]=m,this.int16[N+7]=_,i}}ru.prototype.bytesPerElement=16,Pt(ru,"StructArrayLayout2f1f2i16");class wc extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_){const b=this.length;return this.resize(b+1),this.emplace(b,i,u,f,y,m,_)}emplace(i,u,f,y,m,_,b){const N=20*i,D=5*i;return this.uint8[N+0]=u,this.uint8[N+1]=f,this.float32[D+1]=y,this.float32[D+2]=m,this.float32[D+3]=_,this.float32[D+4]=b,i}}wc.prototype.bytesPerElement=20,Pt(wc,"StructArrayLayout2ub4f20");class Ps extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,f){const y=this.length;return this.resize(y+1),this.emplace(y,i,u,f)}emplace(i,u,f,y){const m=3*i;return this.uint16[m+0]=u,this.uint16[m+1]=f,this.uint16[m+2]=y,i}}Ps.prototype.bytesPerElement=6,Pt(Ps,"StructArrayLayout3ui6");class nu extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_,b,N,D,S,V,I,O,M,B,X,ee,ue,le,ne,pe){const we=this.length;return this.resize(we+1),this.emplace(we,i,u,f,y,m,_,b,N,D,S,V,I,O,M,B,X,ee,ue,le,ne,pe)}emplace(i,u,f,y,m,_,b,N,D,S,V,I,O,M,B,X,ee,ue,le,ne,pe,we){const Pe=30*i,Ye=15*i,je=60*i;return this.int16[Pe+0]=u,this.int16[Pe+1]=f,this.int16[Pe+2]=y,this.float32[Ye+2]=m,this.float32[Ye+3]=_,this.uint16[Pe+8]=b,this.uint16[Pe+9]=N,this.uint32[Ye+5]=D,this.uint32[Ye+6]=S,this.uint32[Ye+7]=V,this.uint16[Pe+16]=I,this.uint16[Pe+17]=O,this.uint16[Pe+18]=M,this.float32[Ye+10]=B,this.float32[Ye+11]=X,this.uint8[je+48]=ee,this.uint8[je+49]=ue,this.uint8[je+50]=le,this.uint32[Ye+13]=ne,this.int16[Pe+28]=pe,this.uint8[je+58]=we,i}}nu.prototype.bytesPerElement=60,Pt(nu,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Ku extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_,b,N,D,S,V,I,O,M,B,X,ee,ue,le,ne,pe,we,Pe,Ye,je,qe,mt,Xe,At,xt,St,Ot,Nt){const kt=this.length;return this.resize(kt+1),this.emplace(kt,i,u,f,y,m,_,b,N,D,S,V,I,O,M,B,X,ee,ue,le,ne,pe,we,Pe,Ye,je,qe,mt,Xe,At,xt,St,Ot,Nt)}emplace(i,u,f,y,m,_,b,N,D,S,V,I,O,M,B,X,ee,ue,le,ne,pe,we,Pe,Ye,je,qe,mt,Xe,At,xt,St,Ot,Nt,kt){const Mt=20*i,Zt=40*i,ga=80*i;return this.float32[Mt+0]=u,this.float32[Mt+1]=f,this.int16[Zt+4]=y,this.int16[Zt+5]=m,this.int16[Zt+6]=_,this.int16[Zt+7]=b,this.int16[Zt+8]=N,this.int16[Zt+9]=D,this.int16[Zt+10]=S,this.int16[Zt+11]=V,this.int16[Zt+12]=I,this.uint16[Zt+13]=O,this.uint16[Zt+14]=M,this.uint16[Zt+15]=B,this.uint16[Zt+16]=X,this.uint16[Zt+17]=ee,this.uint16[Zt+18]=ue,this.uint16[Zt+19]=le,this.uint16[Zt+20]=ne,this.uint16[Zt+21]=pe,this.uint16[Zt+22]=we,this.uint16[Zt+23]=Pe,this.uint16[Zt+24]=Ye,this.uint16[Zt+25]=je,this.uint16[Zt+26]=qe,this.uint16[Zt+27]=mt,this.uint32[Mt+14]=Xe,this.float32[Mt+15]=At,this.float32[Mt+16]=xt,this.float32[Mt+17]=St,this.float32[Mt+18]=Ot,this.uint8[ga+76]=Nt,this.uint16[Zt+39]=kt,i}}Ku.prototype.bytesPerElement=80,Pt(Ku,"StructArrayLayout2f9i15ui1ul4f1ub1ui80");class $s extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m){const _=this.length;return this.resize(_+1),this.emplace(_,i,u,f,y,m)}emplace(i,u,f,y,m,_){const b=5*i;return this.float32[b+0]=u,this.float32[b+1]=f,this.float32[b+2]=y,this.float32[b+3]=m,this.float32[b+4]=_,i}}$s.prototype.bytesPerElement=20,Pt($s,"StructArrayLayout5f20");class zu extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_,b){const N=this.length;return this.resize(N+1),this.emplace(N,i,u,f,y,m,_,b)}emplace(i,u,f,y,m,_,b,N){const D=7*i;return this.float32[D+0]=u,this.float32[D+1]=f,this.float32[D+2]=y,this.float32[D+3]=m,this.float32[D+4]=_,this.float32[D+5]=b,this.float32[D+6]=N,i}}zu.prototype.bytesPerElement=28,Pt(zu,"StructArrayLayout7f28");class _h extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_,b,N,D,S,V){const I=this.length;return this.resize(I+1),this.emplace(I,i,u,f,y,m,_,b,N,D,S,V)}emplace(i,u,f,y,m,_,b,N,D,S,V,I){const O=11*i;return this.float32[O+0]=u,this.float32[O+1]=f,this.float32[O+2]=y,this.float32[O+3]=m,this.float32[O+4]=_,this.float32[O+5]=b,this.float32[O+6]=N,this.float32[O+7]=D,this.float32[O+8]=S,this.float32[O+9]=V,this.float32[O+10]=I,i}}_h.prototype.bytesPerElement=44,Pt(_h,"StructArrayLayout11f44");class ip extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_,b,N,D){const S=this.length;return this.resize(S+1),this.emplace(S,i,u,f,y,m,_,b,N,D)}emplace(i,u,f,y,m,_,b,N,D,S){const V=9*i;return this.float32[V+0]=u,this.float32[V+1]=f,this.float32[V+2]=y,this.float32[V+3]=m,this.float32[V+4]=_,this.float32[V+5]=b,this.float32[V+6]=N,this.float32[V+7]=D,this.float32[V+8]=S,i}}ip.prototype.bytesPerElement=36,Pt(ip,"StructArrayLayout9f36");class Hh extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u){const f=this.length;return this.resize(f+1),this.emplace(f,i,u)}emplace(i,u,f){const y=2*i;return this.float32[y+0]=u,this.float32[y+1]=f,i}}Hh.prototype.bytesPerElement=8,Pt(Hh,"StructArrayLayout2f8");class vh extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,f,y){const m=this.length;return this.resize(m+1),this.emplace(m,i,u,f,y)}emplace(i,u,f,y,m){const _=6*i;return this.uint32[3*i+0]=u,this.uint16[_+2]=f,this.uint16[_+3]=y,this.uint16[_+4]=m,i}}vh.prototype.bytesPerElement=12,Pt(vh,"StructArrayLayout1ul3ui12");class Gd extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){const u=this.length;return this.resize(u+1),this.emplace(u,i)}emplace(i,u){return this.uint16[1*i+0]=u,i}}Gd.prototype.bytesPerElement=2,Pt(Gd,"StructArrayLayout1ui2");class Wm extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_,b,N,D,S,V,I,O,M,B,X){const ee=this.length;return this.resize(ee+1),this.emplace(ee,i,u,f,y,m,_,b,N,D,S,V,I,O,M,B,X)}emplace(i,u,f,y,m,_,b,N,D,S,V,I,O,M,B,X,ee){const ue=16*i;return this.float32[ue+0]=u,this.float32[ue+1]=f,this.float32[ue+2]=y,this.float32[ue+3]=m,this.float32[ue+4]=_,this.float32[ue+5]=b,this.float32[ue+6]=N,this.float32[ue+7]=D,this.float32[ue+8]=S,this.float32[ue+9]=V,this.float32[ue+10]=I,this.float32[ue+11]=O,this.float32[ue+12]=M,this.float32[ue+13]=B,this.float32[ue+14]=X,this.float32[ue+15]=ee,i}}Wm.prototype.bytesPerElement=64,Pt(Wm,"StructArrayLayout16f64");class Xp extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_,b){const N=this.length;return this.resize(N+1),this.emplace(N,i,u,f,y,m,_,b)}emplace(i,u,f,y,m,_,b,N){const D=10*i,S=5*i;return this.uint16[D+0]=u,this.uint16[D+1]=f,this.uint16[D+2]=y,this.uint16[D+3]=m,this.float32[S+2]=_,this.float32[S+3]=b,this.float32[S+4]=N,i}}Xp.prototype.bytesPerElement=20,Pt(Xp,"StructArrayLayout4ui3f20");class Ym extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i){const u=this.length;return this.resize(u+1),this.emplace(u,i)}emplace(i,u){return this.int16[1*i+0]=u,i}}Ym.prototype.bytesPerElement=2,Pt(Ym,"StructArrayLayout1i2");class ky extends ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(i){const u=this.length;return this.resize(u+1),this.emplace(u,i)}emplace(i,u){return this.uint8[1*i+0]=u,i}}ky.prototype.bytesPerElement=1,Pt(ky,"StructArrayLayout1ub1");class aA extends gh{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}aA.prototype.size=40;class Jp extends Vu{get(i){return new aA(this,i)}}Pt(Jp,"CollisionBoxArray");class sl extends gh{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(i){this._structArray.uint8[this._pos1+49]=i}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(i){this._structArray.uint8[this._pos1+50]=i}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(i){this._structArray.uint32[this._pos4+13]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(i){this._structArray.uint8[this._pos1+58]=i}}sl.prototype.size=60;class yl extends nu{get(i){return new sl(this,i)}}Pt(yl,"PlacedSymbolArray");class rA extends gh{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(i){this._structArray.uint32[this._pos4+14]=i}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(i){this._structArray.float32[this._pos4+18]=i}get hasIconTextFit(){return this._structArray.uint8[this._pos1+76]}get elevationFeatureIndex(){return this._structArray.uint16[this._pos2+39]}}rA.prototype.size=80;class nA extends Ku{get(i){return new rA(this,i)}}Pt(nA,"SymbolInstanceArray");class iA extends Yc{getoffsetX(i){return this.float32[1*i+0]}}Pt(iA,"GlyphOffsetArray");class Qp extends Eu{getx(i){return this.int16[2*i+0]}gety(i){return this.int16[2*i+1]}}Pt(Qp,"SymbolLineVertexArray");class em extends gh{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}em.prototype.size=12;class gl extends vh{get(i){return new em(this,i)}}Pt(gl,"FeatureIndexArray");class sp extends Bd{geta_centroid_pos0(i){return this.uint16[2*i+0]}geta_centroid_pos1(i){return this.uint16[2*i+1]}}Pt(sp,"FillExtrusionCentroidArray");class sA extends gh{get a_join_normal_inside0(){return this._structArray.int16[this._pos2+0]}get a_join_normal_inside1(){return this._structArray.int16[this._pos2+1]}get a_join_normal_inside2(){return this._structArray.int16[this._pos2+2]}}sA.prototype.size=6;class oA extends Ud{get(i){return new sA(this,i)}}Pt(oA,"FillExtrusionWallArray");const U0=xn([{name:"a_pos",components:2,type:"Int16"}],4),lA=xn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Di{constructor(i=[]){this.segments=i}_prepareSegment(i,u,f,y){let m=this.segments[this.segments.length-1];return i>Di.MAX_VERTEX_ARRAY_LENGTH&&en(`Max vertices per segment is ${Di.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}`),(!m||m.vertexLength+i>Di.MAX_VERTEX_ARRAY_LENGTH||m.sortKey!==y)&&(m={vertexOffset:u,primitiveOffset:f,vertexLength:0,primitiveLength:0},y!==void 0&&(m.sortKey=y),this.segments.push(m)),m}prepareSegment(i,u,f,y){return this._prepareSegment(i,u.length,f.length,y)}get(){return this.segments}destroy(){for(const i of this.segments)for(const u in i.vaos)i.vaos[u].destroy()}static simpleSegment(i,u,f,y){return new Di([{vertexOffset:i,primitiveOffset:u,vertexLength:f,primitiveLength:y,vaos:{},sortKey:0}])}}function By(d,i){return 256*(d=ka(Math.floor(d),0,255))+ka(Math.floor(i),0,255)}Di.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Pt(Di,"SegmentVector");const Gy=xn([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),uA=xn([{name:"a_dash",components:4,type:"Uint16"}]);class op{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(i,u,f,y){this.ids.push(Xm(i)),this.positions.push(u,f,y)}eachPosition(i,u){const f=Xm(i);let y=0,m=this.ids.length-1;for(;y<m;){const _=y+m>>1;this.ids[_]>=f?m=_:y=_+1}for(;this.ids[y]===f;)u(this.positions[3*y],this.positions[3*y+1],this.positions[3*y+2]),y++}static serialize(i,u){const f=new Float64Array(i.ids),y=new Uint32Array(i.positions);return tm(f,y,0,f.length-1),u&&(u.add(f.buffer),u.add(y.buffer)),{ids:f,positions:y}}static deserialize(i){const u=new op;let f;u.ids=i.ids,u.positions=i.positions;for(const y of u.ids)y!==f&&u.uniqueIds.push(y),f=y;return u.indexed=!0,u}}function Xm(d){const i=+d;return!isNaN(i)&&Number.MIN_SAFE_INTEGER<=i&&i<=Number.MAX_SAFE_INTEGER?i:oo(String(d))}function tm(d,i,u,f){for(;u<f;){const y=d[u+f>>1];let m=u-1,_=f+1;for(;;){do m++;while(d[m]<y);do _--;while(d[_]>y);if(m>=_)break;am(d,m,_),am(i,3*m,3*_),am(i,3*m+1,3*_+1),am(i,3*m+2,3*_+2)}_-u<f-_?(tm(d,i,u,_),u=_+1):(tm(d,i,_+1,f),f=_)}}function am(d,i,u){const f=d[i];d[i]=d[u],d[u]=f}Pt(op,"FeaturePositionMap");class jd{constructor(i){this.gl=i.gl,this.initialized=!1}fetchUniformLocation(i,u){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(i,u),this.initialized=!0),!!this.location}set(i,u,f){throw new Error("Uniform#set() must be implemented by each concrete Uniform")}}class Rc extends jd{constructor(i){super(i),this.current=0}set(i,u,f){this.fetchUniformLocation(i,u)&&this.current!==f&&(this.current=f,this.gl.uniform1i(this.location,f))}}class ms extends jd{constructor(i){super(i),this.current=0}set(i,u,f){this.fetchUniformLocation(i,u)&&this.current!==f&&(this.current=f,this.gl.uniform1f(this.location,f))}}class Qc extends jd{constructor(i){super(i),this.current=[0,0]}set(i,u,f){this.fetchUniformLocation(i,u)&&(f[0]===this.current[0]&&f[1]===this.current[1]||(this.current=f,this.gl.uniform2f(this.location,f[0],f[1])))}}class lp extends jd{constructor(i){super(i),this.current=[0,0,0]}set(i,u,f){this.fetchUniformLocation(i,u)&&(f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]||(this.current=f,this.gl.uniform3f(this.location,f[0],f[1],f[2])))}}class up extends jd{constructor(i){super(i),this.current=[0,0,0,0]}set(i,u,f){this.fetchUniformLocation(i,u)&&(f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]&&f[3]===this.current[3]||(this.current=f,this.gl.uniform4f(this.location,f[0],f[1],f[2],f[3])))}}class bf extends jd{constructor(i){super(i),this.current=bn.transparent.toRenderColor(null)}set(i,u,f){this.fetchUniformLocation(i,u)&&(f.r===this.current.r&&f.g===this.current.g&&f.b===this.current.b&&f.a===this.current.a||(this.current=f,this.gl.uniform4f(this.location,f.r,f.g,f.b,f.a)))}}const wh=new Float32Array(16);class ed extends jd{constructor(i){super(i),this.current=wh}set(i,u,f){if(this.fetchUniformLocation(i,u)){if(f[12]!==this.current[12]||f[0]!==this.current[0])return this.current=f,void this.gl.uniformMatrix4fv(this.location,!1,f);for(let y=1;y<16;y++)if(f[y]!==this.current[y]){this.current=f,this.gl.uniformMatrix4fv(this.location,!1,f);break}}}}const Zd=new Float32Array(9),cA=new Float32Array(4);class Jm extends jd{constructor(i){super(i),this.current=cA}set(i,u,f){if(this.fetchUniformLocation(i,u)){for(let y=0;y<4;y++)if(f[y]!==this.current[y]){this.current=f,this.gl.uniformMatrix2fv(this.location,!1,f);break}}}}function cp(d){return[By(255*d.r,255*d.g),By(255*d.b,255*d.a)]}class xf{constructor(i,u,f,y){this.value=i,this.uniformNames=u.map(m=>`u_${m}`),this.type=f,this.context=y}setUniform(i,u,f,y,m){const _=y.constantOr(this.value);u.set(i,m,_ instanceof bn?_.toRenderColor(this.lutExpression&&this.lutExpression.value==="none"?null:this.context.lut):_)}getBinding(i,u){return this.type==="color"?new bf(i):new ms(i)}}class Tc{constructor(i,u){this.uniformNames=u.map(f=>`u_${f}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(i){this.pixelRatio=i.pixelRatio||1,this.pattern=i.tl.concat(i.br)}setUniform(i,u,f,y,m){const _=m==="u_pattern"||m==="u_dash"?this.pattern:m==="u_pixel_ratio"?this.pixelRatio:null;_&&u.set(i,m,_)}getBinding(i,u){return u==="u_pattern"||u==="u_dash"?new up(i):new ms(i)}}class Ks{constructor(i,u,f,y){this.expression=i,this.type=f,this.maxValue=0,this.paintVertexAttributes=u.map(m=>({name:`a_${m}`,type:"Float32",components:f==="color"?2:1,offset:0})),this.paintVertexArray=new y}populatePaintArray(i,u,f,y,m,_,b){const N=this.paintVertexArray.length,D=this.expression.kind==="composite"||this.expression.kind==="source"?this.expression.evaluate(new vn(0,{brightness:_}),u,{},m,y,b):this.expression.kind==="constant"&&this.expression.value,S=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new vn(0,{brightness:_}),u,{},m,y,b):this.lutExpression.value)==="none";this.paintVertexArray.resize(i),this._setPaintValue(N,i,D,S?null:this.context.lut)}updatePaintArray(i,u,f,y,m,_,b){const N=this.expression.kind==="composite"||this.expression.kind==="source"?this.expression.evaluate({zoom:0,brightness:b},f,y,void 0,m):this.expression.kind==="constant"&&this.expression.value,D=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new vn(0,{brightness:b}),f,y,void 0,m):this.lutExpression.value)==="none";this._setPaintValue(i,u,N,D?null:this.context.lut)}_setPaintValue(i,u,f,y){if(this.type==="color"){const m=cp(f.toRenderColor(y));for(let _=i;_<u;_++)this.paintVertexArray.emplace(_,m[0],m[1])}else{for(let m=i;m<u;m++)this.paintVertexArray.emplace(m,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.lutExpression&&this.lutExpression.kind!=="constant"&&(this.lutExpression.isStateDependent||!this.lutExpression.isLightConstant)||this.expression.kind!=="constant"&&(this.expression.isStateDependent||!this.expression.isLightConstant)))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Wu{constructor(i,u,f,y,m,_){this.expression=i,this.uniformNames=u.map(b=>`u_${b}_t`),this.type=f,this.useIntegerZoom=y,this.context=m,this.maxValue=0,this.paintVertexAttributes=u.map(b=>({name:`a_${b}`,type:"Float32",components:f==="color"?4:2,offset:0})),this.paintVertexArray=new _}populatePaintArray(i,u,f,y,m,_,b){const N=this.expression.evaluate(new vn(this.context.zoom,{brightness:_}),u,{},m,y,b),D=this.expression.evaluate(new vn(this.context.zoom+1,{brightness:_}),u,{},m,y,b),S=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new vn(0,{brightness:_}),u,{},m,y,b):this.lutExpression.value)==="none",V=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(V,i,N,D,S?null:this.context.lut)}updatePaintArray(i,u,f,y,m,_,b){const N=this.expression.evaluate({zoom:this.context.zoom,brightness:b},f,y,void 0,m),D=this.expression.evaluate({zoom:this.context.zoom+1,brightness:b},f,y,void 0,m),S=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new vn(0,{brightness:b}),f,y,void 0,m):this.lutExpression.value)==="none";this._setPaintValue(i,u,N,D,S?null:this.context.lut)}_setPaintValue(i,u,f,y,m){if(this.type==="color"){const _=cp(f.toRenderColor(m)),b=cp(f.toRenderColor(m));for(let N=i;N<u;N++)this.paintVertexArray.emplace(N,_[0],_[1],b[0],b[1])}else{for(let _=i;_<u;_++)this.paintVertexArray.emplace(_,f,y);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(y))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,u,f,y,m){const _=this.useIntegerZoom?Math.floor(f.zoom):f.zoom,b=ka(this.expression.interpolationFactor(_,this.context.zoom,this.context.zoom+1),0,1);u.set(i,m,b)}getBinding(i,u){return new ms(i)}}class $h{constructor(i,u,f,y,m){this.expression=i,this.layerId=m,this.paintVertexAttributes=(f==="array"?uA:Gy).members;for(let _=0;_<u.length;++_);this.paintVertexArray=new y}populatePaintArray(i,u,f,y){const m=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValues(m,i,u.patterns&&u.patterns[this.layerId],f)}updatePaintArray(i,u,f,y,m,_,b){this._setPaintValues(i,u,f.patterns&&f.patterns[this.layerId],_)}_setPaintValues(i,u,f,y){if(!y||!f)return;const m=y[f];if(!m)return;const{tl:_,br:b,pixelRatio:N}=m;for(let D=i;D<u;D++)this.paintVertexArray.emplace(D,_[0],_[1],b[0],b[1],N)}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Yu{constructor(i,u,f=()=>!0){this.binders={},this._buffers=[],this.context=u;const y=[];for(const m in i.paint._values){const _=i.paint.get(m);if(m.endsWith("-use-theme")||!f(m)||!(_ instanceof Dl&&Zc(_.property.specification)))continue;const b=Pf(m,i.type),N=_.value,D=_.property.specification.type,S=!!_.property.useIntegerZoom,V=m==="line-dasharray"||m.endsWith("pattern"),I=i.paint.get(`${m}-use-theme`),O=m==="line-dasharray"&&i.layout.get("line-cap").value.kind!=="constant"||I&&I.value.kind!=="constant";if(N.kind!=="constant"||O)if(N.kind==="source"||O||V){const M=jy(m,D,"source");this.binders[m]=V?new $h(N,b,D,M,i.id):new Ks(N,b,D,M),y.push(`/a_${m}`)}else{const M=jy(m,D,"composite");this.binders[m]=new Wu(N,b,D,S,u,M),y.push(`/z_${m}`)}else this.binders[m]=V?new Tc(N.value,b):new xf(N.value,b,D,u),y.push(`/u_${m}`);I&&(this.binders[m].lutExpression=I.value)}this.cacheKey=y.sort().join("")}getMaxValue(i){const u=this.binders[i];return u instanceof Ks||u instanceof Wu?u.maxValue:0}populatePaintArrays(i,u,f,y,m,_,b){for(const N in this.binders){const D=this.binders[N];D.context=this.context,(D instanceof Ks||D instanceof Wu||D instanceof $h)&&D.populatePaintArray(i,u,f,y,m,_,b)}}setConstantPatternPositions(i){for(const u in this.binders){const f=this.binders[u];f instanceof Tc&&f.setConstantPatternPositions(i)}}updatePaintArrays(i,u,f,y,m,_,b,N,D){let S=!1;const V=Object.keys(i),I=V.length!==0&&!N,O=I?V:u.uniqueIds;this.context.lut=m.lut;for(const M in this.binders){const B=this.binders[M];if(B.context=this.context,(B instanceof Ks||B instanceof Wu||B instanceof $h)&&B.expression&&B.expression.kind&&B.expression.kind!=="constant"&&(B.expression.isStateDependent===!0||B.expression.isLightConstant===!1)){const X=m.paint.get(M);B.expression=X.value;for(const ee of O){const ue=i[ee.toString()];u.eachPosition(ee,(le,ne,pe)=>{const we=y.feature(le);B.updatePaintArray(ne,pe,we,ue,_,b,D)})}if(!I)for(const ee of f.uniqueIds){const ue=i[ee.toString()];f.eachPosition(ee,(le,ne,pe)=>{const we=y.feature(le);B.updatePaintArray(ne,pe,we,ue,_,b,D)})}S=!0}}return S}defines(){const i=[];for(const u in this.binders){const f=this.binders[u];(f instanceof xf||f instanceof Tc)&&i.push(...f.uniformNames.map(y=>`#define HAS_UNIFORM_${y}`))}return i}getBinderAttributes(){const i=[];for(const u in this.binders){const f=this.binders[u];if(f instanceof Ks||f instanceof Wu||f instanceof $h)for(let y=0;y<f.paintVertexAttributes.length;y++)i.push(f.paintVertexAttributes[y].name)}return i}getBinderUniforms(){const i=[];for(const u in this.binders){const f=this.binders[u];if(f instanceof xf||f instanceof Tc||f instanceof Wu)for(const y of f.uniformNames)i.push(y)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i){const u=[];for(const f in this.binders){const y=this.binders[f];if(y instanceof xf||y instanceof Tc||y instanceof Wu)for(const m of y.uniformNames)u.push({name:m,property:f,binding:y.getBinding(i,m)})}return u}setUniforms(i,u,f,y,m){for(const{name:_,property:b,binding:N}of f)this.binders[b].setUniform(i,N,m,y.get(b),_)}updatePaintBuffers(){this._buffers=[];for(const i in this.binders){const u=this.binders[i];(u instanceof Ks||u instanceof Wu||u instanceof $h)&&u.paintVertexBuffer&&this._buffers.push(u.paintVertexBuffer)}}upload(i){for(const u in this.binders){const f=this.binders[u];(f instanceof Ks||f instanceof Wu||f instanceof $h)&&f.upload(i)}this.updatePaintBuffers()}destroy(){for(const i in this.binders){const u=this.binders[i];(u instanceof Ks||u instanceof Wu||u instanceof $h)&&u.destroy()}}}class Rh{constructor(i,u,f=()=>!0){this.programConfigurations={};for(const y of i)this.programConfigurations[y.id]=new Yu(y,u,f);this.needsUpload=!1,this._featureMap=new op,this._featureMapWithoutIds=new op,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(i,u,f,y,m,_,b,N){for(const D in this.programConfigurations)this.programConfigurations[D].populatePaintArrays(i,u,y,m,_,b,N);u.id!==void 0?this._featureMap.add(u.id,f,this._bufferOffset,i):(this._featureMapWithoutIds.add(this._idlessCounter,f,this._bufferOffset,i),this._idlessCounter+=1),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,u,f,y,m,_,b){for(const N of f)this.needsUpload=this.programConfigurations[N.id].updatePaintArrays(i,this._featureMap,this._featureMapWithoutIds,u,N,y,m,_,b||0)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(i);this.needsUpload=!1}}destroy(){for(const i in this.programConfigurations)this.programConfigurations[i].destroy()}}const dA={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-occlusion-opacity":["occlusion_opacity"],"icon-occlusion-opacity":["occlusion_opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"symbol-z-offset":["z_offset"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function Pf(d,i){return dA[d]||[d.replace(`${i}-`,"").replace(/-/g,"_")]}const Ef={"line-pattern":{source:kd,composite:kd},"fill-pattern":{source:kd,composite:kd},"fill-extrusion-pattern":{source:kd,composite:kd},"line-dasharray":{source:ap,composite:ap}},Nf={color:{source:Hh,composite:Jc},number:{source:Yc,composite:Hh}};function jy(d,i,u){const f=Ef[d];return f&&f[u]||Nf[i][u]}Pt(xf,"ConstantBinder"),Pt(Tc,"PatternConstantBinder"),Pt(Ks,"SourceExpressionBinder"),Pt($h,"PatternCompositeBinder"),Pt(Wu,"CompositeExpressionBinder"),Pt(Yu,"ProgramConfiguration",{omit:["_buffers"]}),Pt(Rh,"ProgramConfigurationSet");const Al=Va/Math.PI/2,Th=5,rm=6,hA=16383,dp=64,Vf=[dp,32,16],Go=-Al,Xu=Al;function hp(d,i,u,f=Al){return u=Na(u),[d*Math.sin(u)*f,-i*f,d*Math.cos(u)*f]}function Sc(d,i,u){return hp(Math.cos(Na(d)),Math.sin(Na(d)),i,u)}const ol=63710088e-1,Zy=2*Math.PI*ol;class Ln{constructor(i,u){if(isNaN(i)||isNaN(u))throw new Error(`Invalid LngLat object: (${i}, ${u})`);if(this.lng=+i,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ln(pn(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){const u=Math.PI/180,f=this.lat*u,y=i.lat*u,m=Math.sin(f)*Math.sin(y)+Math.cos(f)*Math.cos(y)*Math.cos((i.lng-this.lng)*u);return ol*Math.acos(Math.min(m,1))}toBounds(i=0){const u=360*i/40075017,f=u/Math.cos(Math.PI/180*this.lat);return new Kh({lng:this.lng-f,lat:this.lat-u},{lng:this.lng+f,lat:this.lat+u})}toEcef(i){return Sc(this.lat,this.lng,Al+i*Al/ol)}static convert(i){if(i instanceof Ln)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new Ln(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new Ln(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Kh{constructor(i,u){if(i)if(u)this.setSouthWest(i).setNorthEast(u);else if(i.length===4){const f=i;this.setSouthWest([f[0],f[1]]).setNorthEast([f[2],f[3]])}else{const f=i;this.setSouthWest(f[0]).setNorthEast(f[1])}}setNorthEast(i){return this._ne=i instanceof Ln?new Ln(i.lng,i.lat):Ln.convert(i),this}setSouthWest(i){return this._sw=i instanceof Ln?new Ln(i.lng,i.lat):Ln.convert(i),this}extend(i){const u=this._sw,f=this._ne;let y,m;if(i instanceof Ln)y=i,m=i;else{if(!(i instanceof Kh))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Kh.convert(i)):this.extend(Ln.convert(i)):typeof i=="object"&&i!==null&&i.hasOwnProperty("lat")&&(i.hasOwnProperty("lon")||i.hasOwnProperty("lng"))?this.extend(Ln.convert(i)):this;if(y=i._sw,m=i._ne,!y||!m)return this}return u||f?(u.lng=Math.min(y.lng,u.lng),u.lat=Math.min(y.lat,u.lat),f.lng=Math.max(m.lng,f.lng),f.lat=Math.max(m.lat,f.lat)):(this._sw=new Ln(y.lng,y.lat),this._ne=new Ln(m.lng,m.lat)),this}getCenter(){return new Ln((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Ln(this.getWest(),this.getNorth())}getSouthEast(){return new Ln(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:u,lat:f}=Ln.convert(i);let y=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&y}static convert(i){if(i)return i instanceof Kh?i:new Kh(i)}}const fA=0,pA=25.5;function fp(d){return Zy*Math.cos(d*Math.PI/180)}function _l(d){return(180+d)/360}function Pi(d){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360)))/360}function jo(d,i){return d/fp(i)}function Ou(d){return 360*d-180}function Ri(d){return 360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90}function qy(d,i){return d*fp(Ri(i))}const Du=85.051129;function mA(d){return Math.cos(Na(ka(d,-85.051129,Du)))}function Wh(d,i){const u=ka(i,fA,pA),f=Math.pow(2,u);return mA(d)*Zy/(512*f)}function Zo(d){return 1/Math.cos(d*Math.PI/180)}function g(d,i=0){const u=Math.exp(Math.PI*(1-(d.y+i/Va)/(1<<d.z)*2));return 80150034*u/(u*u+1)/Va/(1<<d.z)}class o{constructor(i,u,f=0){this.x=+i,this.y=+u,this.z=+f}static fromLngLat(i,u=0){const f=Ln.convert(i);return new o(_l(f.lng),Pi(f.lat),jo(u,f.lat))}toLngLat(){return new Ln(Ou(this.x),Ri(this.y))}toAltitude(){return qy(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Zy*Zo(Ri(this.y))}}function c(d,i,u,f,y,m,_,b,N){const D=(i+f)/2,S=(u+y)/2,V=new It(D,S);b(V),function(I,O,M,B,X,ee){const ue=M-X,le=B-ee;return Math.abs((B-O)*ue-(M-I)*le)/Math.hypot(ue,le)}(V.x,V.y,m.x,m.y,_.x,_.y)>=N?(c(d,i,u,D,S,m,V,b,N),c(d,D,S,f,y,V,_,b,N)):d.push(_)}function A(d,i,u){let f=d[0],y=f.x,m=f.y;i(f);const _=[f];for(let b=1;b<d.length;b++){const N=d[b],{x:D,y:S}=N;i(N),c(_,y,m,D,S,f,N,i,u),y=D,m=S,f=N}return _}function R(d,i,u,f){if(f(i,u)){const y=i.add(u)._mult(.5);R(d,i,y,f),R(d,y,u,f)}else d.push(u)}function C(d,i){let u=d[0];const f=[u];for(let y=1;y<d.length;y++){const m=d[y];R(f,u,m,i),u=m}return f}const E=Math.pow(2,14)-1,L=-E-1;function j(d,i){const u=Math.round(d.x*i),f=Math.round(d.y*i);return d.x=ka(u,L,E),d.y=ka(f,L,E),(u<d.x||u>d.x+1||f<d.y||f>d.y+1)&&en("Geometry exceeds allowed extent, reduce your vector tile buffer size"),d}function $(d,i,u){const f=d.loadGeometry(),y=d.extent,m=Va/y;if(i&&u&&u.projection.isReprojectedInTileSpace){const _=1<<i.z,{scale:b,x:N,y:D,projection:S}=u,V=I=>{const O=Ou((i.x+I.x/y)/_),M=Ri((i.y+I.y/y)/_),B=S.project(O,M);I.x=(B.x*b-N)*y,I.y=(B.y*b-D)*y};for(let I=0;I<f.length;I++)if(d.type!==1)f[I]=A(f[I],V,1);else{const O=[];for(const M of f[I])M.x<0||M.x>=y||M.y<0||M.y>=y||(V(M),O.push(M));f[I]=O}}for(const _ of f)for(const b of _)j(b,m);return f}function W(d,i){return{type:d.type,id:d.id,properties:d.properties,geometry:i?$(d):[]}}function te(d,i,u,f,y){d.emplaceBack(2*i+(f+1)/2,2*u+(y+1)/2)}function ae(d,i,u){d.emplaceBack(i.x,i.y,i.z,u[0]*16384,u[1]*16384,u[2]*16384)}class de{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=i.index,this.hasPattern=!1,this.projection=i.projection,this.layoutVertexArray=new Eu,this.indexArray=new Ps,this.segments=new Di,this.programConfigurations=new Rh(i.layers,{zoom:i.zoom,lut:i.lut}),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}updateFootprints(i,u){}populate(i,u,f,y){const m=this.layers[0],_=[];let b=null;m.type==="circle"&&(b=m.layout.get("circle-sort-key"));for(const{feature:D,id:S,index:V,sourceLayerIndex:I}of i){const O=this.layers[0]._featureFilter.needGeometry,M=W(D,O);if(!this.layers[0]._featureFilter.filter(new vn(this.zoom),M,f))continue;const B=b?b.evaluate(M,{},f):void 0,X={id:S,properties:D.properties,type:D.type,sourceLayerIndex:I,index:V,geometry:O?M.geometry:$(D,f,y),patterns:{},sortKey:B};_.push(X)}b&&_.sort((D,S)=>D.sortKey-S.sortKey);let N=null;y.projection.name==="globe"&&(this.globeExtVertexArray=new rp,N=y.projection);for(const D of _){const{geometry:S,index:V,sourceLayerIndex:I}=D,O=i[V].feature;this.addFeature(D,S,V,u.availableImages,f,N,u.brightness),u.featureIndex.insert(O,S,V,I,this.index)}}update(i,u,f,y,m,_,b){this.programConfigurations.updatePaintArrays(i,u,m,f,y,_,b)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,U0.members),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=i.createVertexBuffer(this.globeExtVertexArray,lA.members))),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(i,u,f,y,m,_,b){for(const N of u)for(const D of N){const S=D.x,V=D.y;if(S<0||S>=Va||V<0||V>=Va)continue;if(_){const M=_.projectTilePoint(S,V,m),B=_.upVector(m,S,V),X=this.globeExtVertexArray;ae(X,M,B),ae(X,M,B),ae(X,M,B),ae(X,M,B)}const I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,i.sortKey),O=I.vertexLength;te(this.layoutVertexArray,S,V,-1,-1),te(this.layoutVertexArray,S,V,1,-1),te(this.layoutVertexArray,S,V,1,1),te(this.layoutVertexArray,S,V,-1,1),this.indexArray.emplaceBack(O,O+1,O+2),this.indexArray.emplaceBack(O,O+2,O+3),I.vertexLength+=4,I.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,f,{},y,m,b)}}function Te(d,i){for(let u=0;u<d.length;u++)if(st(i,d[u]))return!0;for(let u=0;u<i.length;u++)if(st(d,i[u]))return!0;return!!Be(d,i)}function ve(d,i,u){return!!st(d,i)||!!Je(i,d,u)}function Ee(d,i){if(d.length===1)return it(i,d[0]);for(let u=0;u<i.length;u++){const f=i[u];for(let y=0;y<f.length;y++)if(st(d,f[y]))return!0}for(let u=0;u<d.length;u++)if(it(i,d[u]))return!0;for(let u=0;u<i.length;u++)if(Be(d,i[u]))return!0;return!1}function Ve(d,i,u){if(d.length>1){if(Be(d,i))return!0;for(let f=0;f<i.length;f++)if(Je(i[f],d,u))return!0}for(let f=0;f<d.length;f++)if(Je(d[f],i,u))return!0;return!1}function Be(d,i){if(d.length===0||i.length===0)return!1;for(let u=0;u<d.length-1;u++){const f=d[u],y=d[u+1];for(let m=0;m<i.length-1;m++)if(et(f,y,i[m],i[m+1]))return!0}return!1}function et(d,i,u,f){return Er(d,u,f)!==Er(i,u,f)&&Er(d,i,u)!==Er(d,i,f)}function Je(d,i,u){const f=u*u;if(i.length===1)return d.distSqr(i[0])<f;for(let y=1;y<i.length;y++)if(dt(d,i[y-1],i[y])<f)return!0;return!1}function dt(d,i,u){const f=i.distSqr(u);if(f===0)return d.distSqr(i);const y=((d.x-i.x)*(u.x-i.x)+(d.y-i.y)*(u.y-i.y))/f;return d.distSqr(y<0?i:y>1?u:u.sub(i)._mult(y)._add(i))}function it(d,i){let u,f,y,m=!1;for(let _=0;_<d.length;_++){u=d[_];for(let b=0,N=u.length-1;b<u.length;N=b++)f=u[b],y=u[N],f.y>i.y!=y.y>i.y&&i.x<(y.x-f.x)*(i.y-f.y)/(y.y-f.y)+f.x&&(m=!m)}return m}function st(d,i){let u=!1;for(let f=0,y=d.length-1;f<d.length;y=f++){const m=d[f],_=d[y];m.y>i.y!=_.y>i.y&&i.x<(_.x-m.x)*(i.y-m.y)/(_.y-m.y)+m.x&&(u=!u)}return u}function ot(d,i,u,f,y){for(const _ of d)if(i<=_.x&&u<=_.y&&f>=_.x&&y>=_.y)return!0;const m=[new It(i,u),new It(i,y),new It(f,y),new It(f,u)];if(d.length>2){for(const _ of m)if(st(d,_))return!0}for(let _=0;_<d.length-1;_++)if(gt(d[_],d[_+1],m))return!0;return!1}function gt(d,i,u){const f=u[0],y=u[2];if(d.x<f.x&&i.x<f.x||d.x>y.x&&i.x>y.x||d.y<f.y&&i.y<f.y||d.y>y.y&&i.y>y.y)return!1;const m=Er(d,i,u[0]);return m!==Er(d,i,u[1])||m!==Er(d,i,u[2])||m!==Er(d,i,u[3])}function Tt(d,i,u,f,y,m){let _=i.y-d.y,b=d.x-i.x;if(m=m||0){const N=_*_+b*b;if(N===0)return!0;const D=Math.sqrt(N);_/=D,b/=D}return!((u.x-d.x)*_+(u.y-d.y)*b-m<0||(f.x-d.x)*_+(f.y-d.y)*b-m<0||(y.x-d.x)*_+(y.y-d.y)*b-m<0)}function Xt(d,i,u,f,y,m,_){return!(Tt(d,i,f,y,m,_)||Tt(i,u,f,y,m,_)||Tt(u,d,f,y,m,_)||Tt(f,y,d,i,u,_)||Tt(y,m,d,i,u,_)||Tt(m,f,d,i,u,_))}function Ft(d,i,u){const f=i.paint.get(d).value;return f.kind==="constant"?f.value:u.programConfigurations.get(i.id).getMaxValue(d)}function ra(d){return Math.sqrt(d[0]*d[0]+d[1]*d[1])}function ua(d,i,u,f,y){if(!i[0]&&!i[1])return d;const m=It.convert(i)._mult(y);u==="viewport"&&m._rotate(-f);const _=[];for(let b=0;b<d.length;b++)_.push(d[b].sub(m));return _}function Ca(d,i,u,f){const y=It.convert(d)._mult(f);return i==="viewport"&&y._rotate(-u),y}let Lt,sa;Pt(de,"CircleBucket",{omit:["layers"]});var zt,oa={exports:{}},ea=(zt||(zt=1,function(d,i){(function(u){function f(m,_,b){var N=y(256*m,256*(_=Math.pow(2,b)-_-1),b),D=y(256*(m+1),256*(_+1),b);return N[0]+","+N[1]+","+D[0]+","+D[1]}function y(m,_,b){var N=2*Math.PI*6378137/256/Math.pow(2,b);return[m*N-2*Math.PI*6378137/2,_*N-2*Math.PI*6378137/2]}u.getURL=function(m,_,b,N,D,S){return S=S||{},m+"?"+["bbox="+f(b,N,D),"format="+(S.format||"image/png"),"service="+(S.service||"WMS"),"version="+(S.version||"1.1.1"),"request="+(S.request||"GetMap"),"srs="+(S.srs||"EPSG:3857"),"width="+(S.width||256),"height="+(S.height||256),"layers="+_].join("&")},u.getTileBBox=f,u.getMercCoords=y,Object.defineProperty(u,"__esModule",{value:!0})})(i)}(0,oa.exports)),oa.exports);class da{constructor(i,u,f){this.z=i,this.x=u,this.y=f,this.key=Ia(0,i,i,u,f)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,u){const f=ea.getTileBBox(this.x,this.y,this.z),y=function(m,_,b){let N,D="";for(let S=m;S>0;S--)N=1<<S-1,D+=(_&N?1:0)+(b&N?2:0);return D}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(u==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",y).replace("{bbox-epsg-3857}",f)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Wt{constructor(i,u){this.wrap=i,this.canonical=u,this.key=Ia(i,u.z,u.z,u.x,u.y)}}class pa{constructor(i,u,f,y,m){this.overscaledZ=i,this.wrap=u,this.canonical=new da(f,+y,+m),this.key=u===0&&i===f?this.canonical.key:Ia(u,i,f,y,m)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){const u=this.canonical.z-i;return i>this.canonical.z?new pa(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new pa(i,this.wrap,i,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(i,u=!0){if(this.overscaledZ===i&&u)return this.key;if(i>this.canonical.z)return Ia(this.wrap*+u,i,this.canonical.z,this.canonical.x,this.canonical.y);{const f=this.canonical.z-i;return Ia(this.wrap*+u,i,i,this.canonical.x>>f,this.canonical.y>>f)}}isChildOf(i){if(i.wrap!==this.wrap)return!1;const u=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.z<this.canonical.z&&i.canonical.x===this.canonical.x>>u&&i.canonical.y===this.canonical.y>>u}children(i){if(this.overscaledZ>=i)return[new pa(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,f=2*this.canonical.x,y=2*this.canonical.y;return[new pa(u,this.wrap,u,f,y),new pa(u,this.wrap,u,f+1,y),new pa(u,this.wrap,u,f,y+1),new pa(u,this.wrap,u,f+1,y+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new pa(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new pa(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Wt(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Ia(d,i,u,f,y){const m=1<<Math.min(u,22);let _=m*(y%m)+f%m;return d&&u<22&&(_+=m*m*((d<0?-2*d-1:2*d)%(1<<2*(22-u)))),16*(32*_+u)+(i-u)}const La=[d=>{let i=d.canonical.x-1,u=d.wrap;return i<0&&(i=(1<<d.canonical.z)-1,u--),new pa(d.overscaledZ,u,d.canonical.z,i,d.canonical.y)},d=>{let i=d.canonical.x+1,u=d.wrap;return i===1<<d.canonical.z&&(i=0,u++),new pa(d.overscaledZ,u,d.canonical.z,i,d.canonical.y)},d=>new pa(d.overscaledZ,d.wrap,d.canonical.z,d.canonical.x,(d.canonical.y===0?1<<d.canonical.z:d.canonical.y)-1),d=>new pa(d.overscaledZ,d.wrap,d.canonical.z,d.canonical.x,d.canonical.y===(1<<d.canonical.z)-1?0:d.canonical.y+1)];Pt(da,"CanonicalTileID"),Pt(pa,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});const Ea=xn([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:sr}=Ea,Fr=xn([{name:"a_pos_3",components:3,type:"Int16"}]);var mr=xn([{name:"a_pos",type:"Int16",components:2}]);class Or{constructor(i,u){this.pos=i,this.dir=u}intersectsPlane(i,u,f){const y=Ae.vec2.dot(u,this.dir);if(Math.abs(y)<1e-6)return!1;const m=((i[0]-this.pos[0])*u[0]+(i[1]-this.pos[1])*u[1])/y;return f[0]=this.pos[0]+this.dir[0]*m,f[1]=this.pos[1]+this.dir[1]*m,!0}}class Cr{constructor(i,u){this.pos=i,this.dir=u}intersectsPlane(i,u,f){const y=Ae.vec3.dot(u,this.dir);if(Math.abs(y)<1e-6)return!1;const m=((i[0]-this.pos[0])*u[0]+(i[1]-this.pos[1])*u[1]+(i[2]-this.pos[2])*u[2])/y;return f[0]=this.pos[0]+this.dir[0]*m,f[1]=this.pos[1]+this.dir[1]*m,f[2]=this.pos[2]+this.dir[2]*m,!0}closestPointOnSphere(i,u,f){if(Ae.vec3.equals(this.pos,i)||u===0)return f[0]=f[1]=f[2]=0,!1;const[y,m,_]=this.dir,b=this.pos[0]-i[0],N=this.pos[1]-i[1],D=this.pos[2]-i[2],S=y*y+m*m+_*_,V=2*(b*y+N*m+D*_),I=V*V-4*S*(b*b+N*N+D*D-u*u);if(I<0){const O=Math.max(-V/2,0),M=b+y*O,B=N+m*O,X=D+_*O,ee=Math.hypot(M,B,X);return f[0]=M*u/ee,f[1]=B*u/ee,f[2]=X*u/ee,!1}{const O=(-V-Math.sqrt(I))/(2*S);if(O<0){const M=Math.hypot(b,N,D);return f[0]=b*u/M,f[1]=N*u/M,f[2]=D*u/M,!1}return f[0]=b+y*O,f[1]=N+m*O,f[2]=D+_*O,!0}}}class xr{constructor(i,u,f,y,m){this.TL=i,this.TR=u,this.BR=f,this.BL=y,this.horizon=m}static fromInvProjectionMatrix(i,u,f){const y=[-1,1,1],m=[1,1,1],_=[1,-1,1],b=[-1,-1,1],N=Ae.vec3.transformMat4(y,y,i),D=Ae.vec3.transformMat4(m,m,i),S=Ae.vec3.transformMat4(_,_,i),V=Ae.vec3.transformMat4(b,b,i);return new xr(N,D,S,V,u/f)}}function Ur(d,i,u){let f=1/0,y=-1/0;const m=[];for(const _ of d){Ae.vec3.sub(m,_,i);const b=Ae.vec3.dot(m,u);f=Math.min(f,b),y=Math.max(y,b)}return[f,y]}function Ir(d,i){let u=!0;for(let f=0;f<d.planes.length;f++){const y=d.planes[f];let m=0;for(let _=0;_<i.length;_++)m+=Ae.vec3.dot(y,i[_])+y[3]>=0;if(m===0)return 0;m!==i.length&&(u=!1)}return u?2:1}function hr(d,i){for(const u of d.projections){const f=Ur(i,d.points[0],u.axis);if(u.projection[1]<f[0]||u.projection[0]>f[1])return 0}return 1}function nn(d,i){let u=0;const f=[0,0,0,0];for(let y=0;y<d.length;y++)f[0]=d[y][0],f[1]=d[y][1],f[2]=d[y][2],f[3]=1,Ae.vec4.dot(f,i)>=0&&u++;return u}class Tr{constructor(i,u){this.points=i||new Array(8).fill([0,0,0]),this.planes=u||new Array(6).fill([0,0,0,0]),this.bounds=tr.fromPoints(this.points),this.projections=[],this.frustumEdges=[Ae.vec3.sub([],this.points[2],this.points[3]),Ae.vec3.sub([],this.points[0],this.points[3]),Ae.vec3.sub([],this.points[4],this.points[0]),Ae.vec3.sub([],this.points[5],this.points[1]),Ae.vec3.sub([],this.points[6],this.points[2]),Ae.vec3.sub([],this.points[7],this.points[3])];for(const f of this.frustumEdges){const y=[0,-f[2],f[1]],m=[f[2],0,-f[0]];this.projections.push({axis:y,projection:Ur(this.points,this.points[0],y)}),this.projections.push({axis:m,projection:Ur(this.points,this.points[0],m)})}}static fromInvProjectionMatrix(i,u,f,y){const m=Math.pow(2,f),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(D=>{const S=Ae.vec4.transformMat4([],D,i),V=1/S[3]/u*m;return Ae.vec4.mul(S,S,[V,V,y?1/S[3]:V,V])}),b=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(D=>{const S=Ae.vec3.sub([],_[D[0]],_[D[1]]),V=Ae.vec3.sub([],_[D[2]],_[D[1]]),I=Ae.vec3.normalize([],Ae.vec3.cross([],S,V)),O=-Ae.vec3.dot(I,_[D[1]]);return I.concat(O)}),N=[];for(let D=0;D<_.length;D++)N.push([_[D][0],_[D][1],_[D][2]]);return new Tr(N,b)}intersectsPrecise(i,u,f){for(let y=0;y<u.length;y++)if(!nn(i,u[y]))return 0;for(let y=0;y<this.planes.length;y++)if(!nn(i,this.planes[y]))return 0;for(const y of f)for(const m of this.frustumEdges){const _=Ae.vec3.cross([],y,m),b=Ae.vec3.length(_);if(b===0)continue;Ae.vec3.scale(_,_,1/b);const N=Ur(this.points,this.points[0],_),D=Ur(i,this.points[0],_);if(N[0]>D[1]||D[0]>N[1])return 0}return 1}containsPoint(i){for(const u of this.planes){const f=u[3];if(Ae.vec3.dot([u[0],u[1],u[2]],i)+f<0)return!1}return!0}}class tr{static fromPoints(i){const u=[1/0,1/0,1/0],f=[-1/0,-1/0,-1/0];for(const y of i)Ae.vec3.min(u,u,y),Ae.vec3.max(f,f,y);return new tr(u,f)}static fromTileIdAndHeight(i,u,f){const y=1<<i.canonical.z,m=i.canonical.x,_=i.canonical.y;return new tr([m/y,_/y,u],[(m+1)/y,(_+1)/y,f])}static applyTransform(i,u){const f=i.getCorners();for(let y=0;y<f.length;++y)Ae.vec3.transformMat4(f[y],f[y],u);return tr.fromPoints(f)}static applyTransformFast(i,u){const f=[u[12],u[13],u[14]],y=[...f];for(let m=0;m<3;m++)for(let _=0;_<3;_++){const b=u[4*_+m],N=b*i.min[_],D=b*i.max[_];f[m]+=Math.min(N,D),y[m]+=Math.max(N,D)}return new tr(f,y)}static projectAabbCorners(i,u){const f=i.getCorners();for(let y=0;y<f.length;++y)Ae.vec3.transformMat4(f[y],f[y],u);return f}constructor(i,u){this.min=i,this.max=u,this.center=Ae.vec3.scale([],Ae.vec3.add([],this.min,this.max),.5)}quadrant(i){const u=[i%2==0,i<2],f=Ae.vec3.clone(this.min),y=Ae.vec3.clone(this.max);for(let m=0;m<u.length;m++)f[m]=u[m]?this.min[m]:this.center[m],y[m]=u[m]?this.center[m]:this.max[m];return y[2]=this.max[2],new tr(f,y)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}distanceZ(i){return Math.max(Math.min(this.max[2],i[2]),this.min[2])-i[2]}getCorners(){const i=this.min,u=this.max;return[[i[0],i[1],i[2]],[u[0],i[1],i[2]],[u[0],u[1],i[2]],[i[0],u[1],i[2]],[i[0],i[1],u[2]],[u[0],i[1],u[2]],[u[0],u[1],u[2]],[i[0],u[1],u[2]]]}intersects(i){return this.intersectsAabb(i.bounds)?Ir(i,this.getCorners()):0}intersectsFlat(i){return this.intersectsAabb(i.bounds)?Ir(i,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(i,u){return u||this.intersects(i)?hr(i,this.getCorners()):0}intersectsPreciseFlat(i,u){return u||this.intersectsFlat(i)?hr(i,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(i){for(let u=0;u<3;++u)if(this.min[u]>i.max[u]||i.min[u]>this.max[u])return!1;return!0}intersectsAabbXY(i){return!(this.min[0]>i.max[0]||i.min[0]>this.max[0]||this.min[1]>i.max[1]||i.min[1]>this.max[1])}encapsulate(i){for(let u=0;u<3;u++)this.min[u]=Math.min(this.min[u],i.min[u]),this.max[u]=Math.max(this.max[u],i.max[u])}encapsulatePoint(i){for(let u=0;u<3;u++)this.min[u]=Math.min(this.min[u],i[u]),this.max[u]=Math.max(this.max[u],i[u])}closestPoint(i){return[Math.max(Math.min(this.max[0],i[0]),this.min[0]),Math.max(Math.min(this.max[1],i[1]),this.min[1]),Math.max(Math.min(this.max[2],i[2]),this.min[2])]}}function sn(d){return d*Al/ol}Pt(tr,"Aabb");const $n=[new tr([Go,Go,Go],[Xu,Xu,Xu]),new tr([Go,Go,Go],[0,0,Xu]),new tr([0,Go,Go],[Xu,0,Xu]),new tr([Go,0,Go],[0,Xu,Xu]),new tr([0,0,Go],[Xu,Xu,Xu])];function cn(d,i,u,f=!0){const y=Ae.vec3.scale([],d._camera.position,d.worldSize),m=[i,u,1,1];Ae.vec4.transformMat4(m,m,d.pixelMatrixInverse),Ae.vec4.scale(m,m,1/m[3]);const _=Ae.vec3.sub([],m,y),b=Ae.vec3.normalize([],_),N=d.globeMatrix,D=[N[12],N[13],N[14]],S=Ae.vec3.sub([],D,y),V=Ae.vec3.length(S),I=Ae.vec3.normalize([],S),O=d.worldSize/(2*Math.PI),M=Ae.vec3.dot(I,b),B=Math.asin(O/V);if(B<Math.acos(M)){if(!f)return null;const mt=[],Xe=[];Ae.vec3.scale(mt,b,V/M),Ae.vec3.normalize(Xe,Ae.vec3.sub(Xe,mt,S)),Ae.vec3.normalize(b,Ae.vec3.add(b,S,Ae.vec3.scale(b,Xe,Math.tan(B)*V)))}const X=[];new Cr(y,b).closestPointOnSphere(D,O,X);const ee=Ae.vec3.normalize([],fn(N,0)),ue=Ae.vec3.normalize([],fn(N,1)),le=Ae.vec3.normalize([],fn(N,2)),ne=Ae.vec3.dot(ee,X),pe=Ae.vec3.dot(ue,X),we=Ae.vec3.dot(le,X),Pe=za(Math.asin(-pe/O));let Ye=za(Math.atan2(ne,we));Ye=d.center.lng+function(mt,Xe){const At=(Xe-mt+180)%360-180;return At<-180?At+360:At}(d.center.lng,Ye);const je=_l(Ye),qe=ka(Pi(Pe),0,1);return new o(je,qe)}class Vn{constructor(i,u,f){this.a=Ae.vec3.sub([],i,f),this.b=Ae.vec3.sub([],u,f),this.center=f;const y=Ae.vec3.normalize([],this.a),m=Ae.vec3.normalize([],this.b);this.angle=Math.acos(Ae.vec3.dot(y,m))}}function Wi(d,i){if(d.angle===0)return null;let u;return u=d.a[i]===0?1/d.angle*.5*Math.PI:1/d.angle*Math.atan(d.b[i]/d.a[i]/Math.sin(d.angle)-1/Math.tan(d.angle)),u<0||u>1?null:function(f,y,m,_){const b=Math.sin(m);return f*(Math.sin((1-_)*m)/b)+y*(Math.sin(_*m)/b)}(d.a[i],d.b[i],d.angle,ka(u,0,1))+d.center[i]}function hs(d){if(d.z<=1)return $n[d.z+2*d.y+d.x];const i=ii(Cn(d));return tr.fromPoints(i)}function ro(d,i,u){return Ae.vec3.scale(d,d,1-u),Ae.vec3.scaleAndAdd(d,d,i,u)}function Ws(d,i,u){for(const f of d)Ae.vec3.transformMat4(f,f,i),Ae.vec3.scale(f,f,u)}function mo(d,i,u,f){const y=i/d.worldSize,m=d.globeMatrix;if(u.z<=1){const je=hs(u).getCorners();return Ws(je,m,y),tr.fromPoints(je)}const _=Cn(u,f),b=ii(_,Al+sn(d._tileCoverLift));Ws(b,m,y);const N=Number.MAX_VALUE,D=[-N,-N,-N],S=[N,N,N];if(_.contains(d.center)){for(const mt of b)Ae.vec3.min(S,S,mt),Ae.vec3.max(D,D,mt);D[2]=0;const je=d.point,qe=[je.x*y,je.y*y,0];return Ae.vec3.min(S,S,qe),Ae.vec3.max(D,D,qe),new tr(S,D)}if(d._tileCoverLift>0){for(const je of b)Ae.vec3.min(S,S,je),Ae.vec3.max(D,D,je);return new tr(S,D)}const V=[m[12]*y,m[13]*y,m[14]*y],I=_.getCenter(),O=ka(d.center.lat,-85.051129,Du),M=ka(I.lat,-85.051129,Du),B=_l(d.center.lng),X=Pi(O);let ee=B-_l(I.lng);const ue=X-Pi(M);ee>.5?ee-=1:ee<-.5&&(ee+=1);let le=0;if(Math.abs(ee)>Math.abs(ue))le=ee>=0?1:3;else{le=ue>=0?0:2;const je=[m[4]*y,m[5]*y,m[6]*y],qe=-Math.sin(Na(ue>=0?_.getSouth():_.getNorth()))*Al;Ae.vec3.scaleAndAdd(V,V,je,qe)}const ne=b[le],pe=b[(le+1)%4],we=new Vn(ne,pe,V),Pe=[Wi(we,0)||ne[0],Wi(we,1)||ne[1],Wi(we,2)||ne[2]],Ye=Ll(d.zoom);if(Ye>0){const je=function({x:mt,y:Xe,z:At},xt,St,Ot,Nt){const kt=1/(1<<At);let Mt=mt*kt,Zt=Mt+kt,ga=Xe*kt,ma=ga+kt,Ya=0;const Pa=(Mt+Zt)/2-Ot;return Pa>.5?Ya=-1:Pa<-.5&&(Ya=1),Mt=((Mt+Ya)*xt-(Ot*=xt))*St+Ot,Zt=((Zt+Ya)*xt-Ot)*St+Ot,ga=(ga*xt-(Nt*=xt))*St+Nt,ma=(ma*xt-Nt)*St+Nt,[[Mt,ma,0],[Zt,ma,0],[Zt,ga,0],[Mt,ga,0]]}(u,i,d._pixelsPerMercatorPixel,B,X);for(let mt=0;mt<b.length;mt++)ro(b[mt],je[mt],Ye);const qe=Ae.vec3.add([],je[le],je[(le+1)%4]);Ae.vec3.scale(qe,qe,.5),ro(Pe,qe,Ye)}for(const je of b)Ae.vec3.min(S,S,je),Ae.vec3.max(D,D,je);return S[2]=Math.min(ne[2],pe[2]),Ae.vec3.min(S,S,Pe),Ae.vec3.max(D,D,Pe),new tr(S,D)}function Cn({x:d,y:i,z:u},f=!1){const y=1/(1<<u),m=new Ln(Ou(d*y),i===(1<<u)-1&&f?-90:Ri((i+1)*y)),_=new Ln(Ou((d+1)*y),i===0&&f?90:Ri(i*y));return new Kh(m,_)}function ii(d,i=Al){const u=Na(d.getNorth()),f=Na(d.getSouth()),y=Math.cos(u),m=Math.cos(f),_=Math.sin(u),b=Math.sin(f),N=d.getWest(),D=d.getEast();return[hp(m,b,N,i),hp(m,b,D,i),hp(y,_,D,i),hp(y,_,N,i)]}function On(d,i,u,f){const y=1<<u.z,m=(d/Va+u.x)/y;return Sc(Ri((i/Va+u.y)/y),Ou(m),f)}function oi({min:d,max:i}){return hA/Math.max(i[0]-d[0],i[1]-d[1],i[2]-d[2])}const yo=new Float64Array(16);function Ti(d){const i=oi(d),u=Ae.mat4.fromScaling(yo,[i,i,i]);return Ae.mat4.translate(u,u,Ae.vec3.negate([],d.min))}function os(d){const i=Ae.mat4.fromTranslation(yo,d.min),u=1/oi(d);return Ae.mat4.scale(i,i,[u,u,u])}function Cc(d){const i=Va/(2*Math.PI);return d/(2*Math.PI)/i}function qo(d,i){return Va/(512*Math.pow(2,d))*oi(hs(i))}function iu(d,i,u,f,y){const m=Cc(u),_=[d,i,-u/(2*Math.PI)],b=Ae.mat4.identity(new Float64Array(16));return Ae.mat4.translate(b,b,_),Ae.mat4.scale(b,b,[m,m,m]),Ae.mat4.rotateX(b,b,Na(-y)),Ae.mat4.rotateY(b,b,Na(-f)),b}function Ll(d){return jr(Th,rm,d)}function Ju(d,i){const u=Sc(i.lat,i.lng),f=function(m){const _=Sc(m._center.lat,m._center.lng),b=Ae.vec3.fromValues(0,1,0);let N=Ae.vec3.cross([],b,_);const D=Ae.mat4.fromRotation([],-m.angle,_);N=Ae.vec3.transformMat4(N,N,D),Ae.mat4.fromRotation(D,-m._pitch,N);const S=Ae.vec3.normalize([],_);return Ae.vec3.scale(S,S,sn(m.cameraToCenterDistance/m.pixelsPerMeter)),Ae.vec3.transformMat4(S,S,D),Ae.vec3.add([],_,S)}(d),y=Ae.vec3.subtract([],f,u);return Ae.vec3.angle(y,u)}function vl(d,i){return Ju(d,i)>Math.PI/2*1.01}const qd=Na(85),go=Math.cos(qd),Sh=Math.sin(qd),Fl=Ae.mat4.create(),pp=d=>{const i=[];return d.paint.get("circle-pitch-alignment")==="map"&&i.push("PITCH_WITH_MAP"),d.paint.get("circle-pitch-scale")==="map"&&i.push("SCALE_WITH_MAP"),i};function nm(d,i,u,f,y,m,_,b,N){if(m&&d.queryGeometry.isAboveHorizon)return!1;m&&(N*=d.pixelToTileUnitsFactor);const D=d.tileID.canonical,S=u.projection.upVectorScale(D,u.center.lat,u.worldSize).metersToTile;for(const V of i)for(const I of V){const O=I.add(b),M=y&&u.elevation?u.elevation.exaggeration()*y.getElevationAt(O.x,O.y,!0):0,B=u.projection.projectTilePoint(O.x,O.y,D);if(M>0){const le=u.projection.upVector(D,O.x,O.y);B.x+=le[0]*S*M,B.y+=le[1]*S*M,B.z+=le[2]*S*M}const X=m?O:Hy(B.x,B.y,B.z,f),ee=m?d.tilespaceRays.map(le=>k0(le,M)):d.queryGeometry.screenGeometry,ue=Ae.vec4.transformMat4([],[B.x,B.y,B.z,1],f);if(!_&&m?N*=ue[3]/u.cameraToCenterDistance:_&&!m&&(N*=u.cameraToCenterDistance/ue[3]),m){const le=Ri((I.y/Va+D.y)/(1<<D.z));N/=u.projection.pixelsPerMeter(le,1)/jo(1,le)}if(ve(ee,X,N))return!0}return!1}function Hy(d,i,u,f){const y=Ae.vec4.transformMat4([],[d,i,u,1],f);return new It(y[0]/y[3],y[1]/y[3])}const WT=Ae.vec3.fromValues(0,0,0),mp=Ae.vec3.fromValues(0,0,1);function k0(d,i){const u=Ae.vec3.create();return WT[2]=i,d.intersectsPlane(WT,mp,u),new It(u[0],u[1])}class B0 extends de{}let Qm,h1,f1,p1;function G0(d,{width:i,height:u},f,y){if(y){if(y instanceof Uint8ClampedArray)y=new Uint8Array(y.buffer);else if(y.length!==i*u*f)throw new RangeError("mismatched image size")}else y=new Uint8Array(i*u*f);return d.width=i,d.height=u,d.data=y,d}function j0(d,i,u){const{width:f,height:y}=i;f===d.width&&y===d.height||(m1(d,i,{x:0,y:0},{x:0,y:0},{width:Math.min(d.width,f),height:Math.min(d.height,y)},u,null),d.width=f,d.height=y,d.data=i.data)}function m1(d,i,u,f,y,m,_,b){if(y.width===0||y.height===0)return i;if(y.width>d.width||y.height>d.height||u.x>d.width-y.width||u.y>d.height-y.height)throw new RangeError("out of range source coordinates for image copy");if(y.width>i.width||y.height>i.height||f.x>i.width-y.width||f.y>i.height-y.height)throw new RangeError("out of range destination coordinates for image copy");const N=d.data,D=i.data,S=m===4&&b;for(let V=0;V<y.height;V++){const I=((u.y+V)*d.width+u.x)*m,O=((f.y+V)*i.width+f.x)*m;if(S)for(let M=0;M<y.width;M++){const B=I+M*m+3,X=O+M*m;D[X+0]=255,D[X+1]=255,D[X+2]=255,D[X+3]=N[B]}else if(_)for(let M=0;M<y.width;M++){const B=I+M*m,X=O+M*m,ee=N[B+3],ue=new bn(N[B+0]/255*ee,N[B+1]/255*ee,N[B+2]/255*ee,ee).toRenderColor(_).toArray();D[X+0]=ue[0],D[X+1]=ue[1],D[X+2]=ue[2],D[X+3]=ue[3]}else for(let M=0;M<y.width*m;M++)D[O+M]=N[I+M]}return i}Pt(B0,"HeatmapBucket",{omit:["layers"]});class im{constructor(i,u){G0(this,i,1,u)}resize(i){j0(this,new im(i),1)}clone(){return new im({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,u,f,y,m){m1(i,u,f,y,m,1,null)}}class wl{constructor(i,u){G0(this,i,4,u)}resize(i){j0(this,new wl(i),4)}replace(i,u){u?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new wl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,u,f,y,m,_,b){m1(i,u,f,y,m,4,_,b)}}class y1{constructor(i,u){this.width=i.width,this.height=i.height,this.data=u instanceof Uint8Array?new Float32Array(u.buffer):u}}function $y(d){const i={},u=d.resolution||256,f=d.clips?d.clips.length:1,y=d.image||new wl({width:u,height:f}),m=(_,b,N)=>{i[d.evaluationKey]=N;const D=d.expression.evaluate(i);D&&(y.data[_+b+0]=Math.floor(255*D.r/D.a),y.data[_+b+1]=Math.floor(255*D.g/D.a),y.data[_+b+2]=Math.floor(255*D.b/D.a),y.data[_+b+3]=Math.floor(255*D.a))};if(d.clips)for(let _=0,b=0;_<f;++_,b+=4*u)for(let N=0,D=0;N<u;N++,D+=4){const S=N/(u-1),{start:V,end:I}=d.clips[_];m(b,D,V*(1-S)+I*S)}else for(let _=0,b=0;_<u;_++,b+=4)m(0,b,_/(u-1));return y}Pt(im,"AlphaImage"),Pt(wl,"RGBAImage");const Ky=xn([{name:"a_pos",components:2,type:"Int16"}],4),Z0=xn([{name:"a_road_z_offset",components:1,type:"Float32"}],4),YT=xn([{name:"a_pos",components:2,type:"Int16"},{name:"a_height",components:1,type:"Float32"}],4),XT=xn([{name:"a_pos_normal_3",components:3,type:"Int16"}],4);function yA(d,i,u=2){const f=i&&i.length,y=f?i[0]*u:d.length;let m=g1(d,0,y,u,!0);const _=[];if(!m||m.next===m.prev)return _;let b,N,D;if(f&&(m=function(S,V,I,O){const M=[];for(let B=0,X=V.length;B<X;B++){const ee=g1(S,V[B]*O,B<X-1?V[B+1]*O:S.length,O,!1);ee===ee.next&&(ee.steiner=!0),M.push(Xy(ee))}M.sort(SP);for(let B=0;B<M.length;B++)I=CP(M[B],I);return I}(d,i,m,u)),d.length>80*u){b=1/0,N=1/0;let S=-1/0,V=-1/0;for(let I=u;I<y;I+=u){const O=d[I],M=d[I+1];O<b&&(b=O),M<N&&(N=M),O>S&&(S=O),M>V&&(V=M)}D=Math.max(S-b,V-N),D=D!==0?32767/D:0}return Wy(m,_,u,b,N,D,0),_}function g1(d,i,u,f,y){let m;if(y===function(_,b,N,D){let S=0;for(let V=b,I=N-D;V<N;V+=D)S+=(_[I]-_[V])*(_[V+1]+_[I+1]),I=V;return S}(d,i,u,f)>0)for(let _=i;_<u;_+=f)m=v1(_/f|0,d[_],d[_+1],m);else for(let _=u-f;_>=i;_-=f)m=v1(_/f|0,d[_],d[_+1],m);return m&&zf(m,m.next)&&(gA(m),m=m.next),m}function Ch(d,i){if(!d)return d;i||(i=d);let u,f=d;do if(u=!1,f.steiner||!zf(f,f.next)&&no(f.prev,f,f.next)!==0)f=f.next;else{if(gA(f),f=i=f.prev,f===f.next)break;u=!0}while(u||f!==i);return i}function Wy(d,i,u,f,y,m,_){if(!d)return;!_&&m&&function(N,D,S,V){let I=N;do I.z===0&&(I.z=Yy(I.x,I.y,D,S,V)),I.prevZ=I.prev,I.nextZ=I.next,I=I.next;while(I!==N);I.prevZ.nextZ=null,I.prevZ=null,function(O){let M,B=1;do{let X,ee=O;O=null;let ue=null;for(M=0;ee;){M++;let le=ee,ne=0;for(let we=0;we<B&&(ne++,le=le.nextZ,le);we++);let pe=B;for(;ne>0||pe>0&&le;)ne!==0&&(pe===0||!le||ee.z<=le.z)?(X=ee,ee=ee.nextZ,ne--):(X=le,le=le.nextZ,pe--),ue?ue.nextZ=X:O=X,X.prevZ=ue,ue=X;ee=le}ue.nextZ=null,B*=2}while(M>1)}(I)}(d,f,y,m);let b=d;for(;d.prev!==d.next;){const N=d.prev,D=d.next;if(m?A1(d,f,y,m):Ms(d))i.push(N.i,d.i,D.i),gA(d),d=D.next,b=D.next;else if((d=D)===b){_?_===1?Wy(d=TP(Ch(d),i),i,u,f,y,m,2):_===2&&JT(d,i,u,f,y,m):Wy(Ch(d),i,u,f,y,m,1);break}}}function Ms(d){const i=d.prev,u=d,f=d.next;if(no(i,u,f)>=0)return!1;const y=i.x,m=u.x,_=f.x,b=i.y,N=u.y,D=f.y,S=y<m?y<_?y:_:m<_?m:_,V=b<N?b<D?b:D:N<D?N:D,I=y>m?y>_?y:_:m>_?m:_,O=b>N?b>D?b:D:N>D?N:D;let M=f.next;for(;M!==i;){if(M.x>=S&&M.x<=I&&M.y>=V&&M.y<=O&&sm(y,b,m,N,_,D,M.x,M.y)&&no(M.prev,M,M.next)>=0)return!1;M=M.next}return!0}function A1(d,i,u,f){const y=d.prev,m=d,_=d.next;if(no(y,m,_)>=0)return!1;const b=y.x,N=m.x,D=_.x,S=y.y,V=m.y,I=_.y,O=b<N?b<D?b:D:N<D?N:D,M=S<V?S<I?S:I:V<I?V:I,B=b>N?b>D?b:D:N>D?N:D,X=S>V?S>I?S:I:V>I?V:I,ee=Yy(O,M,i,u,f),ue=Yy(B,X,i,u,f);let le=d.prevZ,ne=d.nextZ;for(;le&&le.z>=ee&&ne&&ne.z<=ue;){if(le.x>=O&&le.x<=B&&le.y>=M&&le.y<=X&&le!==y&&le!==_&&sm(b,S,N,V,D,I,le.x,le.y)&&no(le.prev,le,le.next)>=0||(le=le.prevZ,ne.x>=O&&ne.x<=B&&ne.y>=M&&ne.y<=X&&ne!==y&&ne!==_&&sm(b,S,N,V,D,I,ne.x,ne.y)&&no(ne.prev,ne,ne.next)>=0))return!1;ne=ne.nextZ}for(;le&&le.z>=ee;){if(le.x>=O&&le.x<=B&&le.y>=M&&le.y<=X&&le!==y&&le!==_&&sm(b,S,N,V,D,I,le.x,le.y)&&no(le.prev,le,le.next)>=0)return!1;le=le.prevZ}for(;ne&&ne.z<=ue;){if(ne.x>=O&&ne.x<=B&&ne.y>=M&&ne.y<=X&&ne!==y&&ne!==_&&sm(b,S,N,V,D,I,ne.x,ne.y)&&no(ne.prev,ne,ne.next)>=0)return!1;ne=ne.nextZ}return!0}function TP(d,i){let u=d;do{const f=u.prev,y=u.next.next;!zf(f,y)&&Yh(f,u,u.next,y)&&Jy(f,y)&&Jy(y,f)&&(i.push(f.i,u.i,y.i),gA(u),gA(u.next),u=d=y),u=u.next}while(u!==d);return Ch(u)}function JT(d,i,u,f,y,m){let _=d;do{let b=_.next.next;for(;b!==_.prev;){if(_.i!==b.i&&q0(_,b)){let N=_1(_,b);return _=Ch(_,_.next),N=Ch(N,N.next),Wy(_,i,u,f,y,m,0),void Wy(N,i,u,f,y,m,0)}b=b.next}_=_.next}while(_!==d)}function SP(d,i){return d.x-i.x}function CP(d,i){const u=function(y,m){let _=m;const b=y.x,N=y.y;let D,S=-1/0;do{if(N<=_.y&&N>=_.next.y&&_.next.y!==_.y){const B=_.x+(N-_.y)*(_.next.x-_.x)/(_.next.y-_.y);if(B<=b&&B>S&&(S=B,D=_.x<_.next.x?_:_.next,B===b))return D}_=_.next}while(_!==m);if(!D)return null;const V=D,I=D.x,O=D.y;let M=1/0;_=D;do{if(b>=_.x&&_.x>=I&&b!==_.x&&sm(N<O?b:S,N,I,O,N<O?S:b,N,_.x,_.y)){const B=Math.abs(N-_.y)/(b-_.x);Jy(_,y)&&(B<M||B===M&&(_.x>D.x||_.x===D.x&&bP(D,_)))&&(D=_,M=B)}_=_.next}while(_!==V);return D}(d,i);if(!u)return i;const f=_1(u,d);return Ch(f,f.next),Ch(u,u.next)}function bP(d,i){return no(d.prev,d,i.prev)<0&&no(i.next,d,d.next)<0}function Yy(d,i,u,f,y){return(d=1431655765&((d=858993459&((d=252645135&((d=16711935&((d=(d-u)*y|0)|d<<8))|d<<4))|d<<2))|d<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-f)*y|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function Xy(d){let i=d,u=d;do(i.x<u.x||i.x===u.x&&i.y<u.y)&&(u=i),i=i.next;while(i!==d);return u}function sm(d,i,u,f,y,m,_,b){return(y-_)*(i-b)>=(d-_)*(m-b)&&(d-_)*(f-b)>=(u-_)*(i-b)&&(u-_)*(m-b)>=(y-_)*(f-b)}function q0(d,i){return d.next.i!==i.i&&d.prev.i!==i.i&&!function(u,f){let y=u;do{if(y.i!==u.i&&y.next.i!==u.i&&y.i!==f.i&&y.next.i!==f.i&&Yh(y,y.next,u,f))return!0;y=y.next}while(y!==u);return!1}(d,i)&&(Jy(d,i)&&Jy(i,d)&&function(u,f){let y=u,m=!1;const _=(u.x+f.x)/2,b=(u.y+f.y)/2;do y.y>b!=y.next.y>b&&y.next.y!==y.y&&_<(y.next.x-y.x)*(b-y.y)/(y.next.y-y.y)+y.x&&(m=!m),y=y.next;while(y!==u);return m}(d,i)&&(no(d.prev,d,i.prev)||no(d,i.prev,i))||zf(d,i)&&no(d.prev,d,d.next)>0&&no(i.prev,i,i.next)>0)}function no(d,i,u){return(i.y-d.y)*(u.x-i.x)-(i.x-d.x)*(u.y-i.y)}function zf(d,i){return d.x===i.x&&d.y===i.y}function Yh(d,i,u,f){const y=H0(no(d,i,u)),m=H0(no(d,i,f)),_=H0(no(u,f,d)),b=H0(no(u,f,i));return y!==m&&_!==b||!(y!==0||!om(d,u,i))||!(m!==0||!om(d,f,i))||!(_!==0||!om(u,d,f))||!(b!==0||!om(u,i,f))}function om(d,i,u){return i.x<=Math.max(d.x,u.x)&&i.x>=Math.min(d.x,u.x)&&i.y<=Math.max(d.y,u.y)&&i.y>=Math.min(d.y,u.y)}function H0(d){return d>0?1:d<0?-1:0}function Jy(d,i){return no(d.prev,d,d.next)<0?no(d,i,d.next)>=0&&no(d,d.prev,i)>=0:no(d,i,d.prev)<0||no(d,d.next,i)<0}function _1(d,i){const u=AA(d.i,d.x,d.y),f=AA(i.i,i.x,i.y),y=d.next,m=i.prev;return d.next=i,i.prev=d,u.next=y,y.prev=u,f.next=u,u.prev=f,m.next=f,f.prev=m,f}function v1(d,i,u,f){const y=AA(d,i,u);return f?(y.next=f.next,y.prev=f,f.next.prev=y,f.next=y):(y.prev=y,y.next=y),y}function gA(d){d.next.prev=d.prev,d.prev.next=d.next,d.prevZ&&(d.prevZ.nextZ=d.nextZ),d.nextZ&&(d.nextZ.prevZ=d.prevZ)}function AA(d,i,u){return{i:d,x:i,y:u,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function _A(d,i){const u=d.length;if(u<=1)return[d];const f=[];let y,m;for(let _=0;_<u;_++){const b=As(d[_]);b!==0&&(d[_].area=Math.abs(b),m===void 0&&(m=b<0),m===b<0?(y&&f.push(y),y=[d[_]]):y.push(d[_]))}if(y&&f.push(y),i>1)for(let _=0;_<f.length;_++)f[_].length<=i||(gf(f[_],i,1,f[_].length-1,QT),f[_]=f[_].slice(0,i));return f}function QT(d,i){return i.area-d.area}function eS(d,i,u=1){if(!d)return null;const f=typeof d=="string"?Ts.from(d).getPrimary():d.getPrimary(),y=f.id.toString();return i.has(y)||i.set(y,[]),f.scaleSelf(u),i.get(y).push(f),f.toString()}function vA(d,i,u,f){const y=f.patternDependencies;let m=!1;for(const _ of i){const b=_.paint.get(`${d}-pattern`);b.isConstant()||(m=!0),eS(b.constantOr(null),y,u)&&(m=!0)}return m}function wA(d,i,u,f,y,m){const _=m.patternDependencies;for(const b of i){const N=b.paint.get(`${d}-pattern`).value;if(N.kind!=="constant"){let D=N.evaluate({zoom:f},u,{},m.availableImages);D=D&&D.name?D.name:D;const S=eS(D,_,y);S&&(u.patterns[b.id]=S)}}return u}var w1,tS,ey,aS,$0,Mi,K0,ty={};function W0(){if(tS)return w1;tS=1;var d=Aa();function i(y,m,_,b,N){this.properties={},this.extent=_,this.type=0,this._pbf=y,this._geometry=-1,this._keys=b,this._values=N,y.readFields(u,this,m)}function u(y,m,_){y==1?m.id=_.readVarint():y==2?function(b,N){for(var D=b.readVarint()+b.pos;b.pos<D;){var S=N._keys[b.readVarint()],V=N._values[b.readVarint()];N.properties[S]=V}}(_,m):y==3?m.type=_.readVarint():y==4&&(m._geometry=_.pos)}function f(y){for(var m,_,b=0,N=0,D=y.length,S=D-1;N<D;S=N++)b+=((_=y[S]).x-(m=y[N]).x)*(m.y+_.y);return b}return w1=i,i.types=["Unknown","Point","LineString","Polygon"],i.prototype.loadGeometry=function(){var y=this._pbf;y.pos=this._geometry;for(var m,_=y.readVarint()+y.pos,b=1,N=0,D=0,S=0,V=[];y.pos<_;){if(N<=0){var I=y.readVarint();b=7&I,N=I>>3}if(N--,b===1||b===2)D+=y.readSVarint(),S+=y.readSVarint(),b===1&&(m&&V.push(m),m=[]),m.push(new d(D,S));else{if(b!==7)throw new Error("unknown command "+b);m&&m.push(m[0].clone())}}return m&&V.push(m),V},i.prototype.bbox=function(){var y=this._pbf;y.pos=this._geometry;for(var m=y.readVarint()+y.pos,_=1,b=0,N=0,D=0,S=1/0,V=-1/0,I=1/0,O=-1/0;y.pos<m;){if(b<=0){var M=y.readVarint();_=7&M,b=M>>3}if(b--,_===1||_===2)(N+=y.readSVarint())<S&&(S=N),N>V&&(V=N),(D+=y.readSVarint())<I&&(I=D),D>O&&(O=D);else if(_!==7)throw new Error("unknown command "+_)}return[S,I,V,O]},i.prototype.toGeoJSON=function(y,m,_){var b,N,D=this.extent*Math.pow(2,_),S=this.extent*y,V=this.extent*m,I=this.loadGeometry(),O=i.types[this.type];function M(ee){for(var ue=0;ue<ee.length;ue++){var le=ee[ue];ee[ue]=[360*(le.x+S)/D-180,360/Math.PI*Math.atan(Math.exp((180-360*(le.y+V)/D)*Math.PI/180))-90]}}switch(this.type){case 1:var B=[];for(b=0;b<I.length;b++)B[b]=I[b][0];M(I=B);break;case 2:for(b=0;b<I.length;b++)M(I[b]);break;case 3:for(I=function(ee){var ue=ee.length;if(ue<=1)return[ee];for(var le,ne,pe=[],we=0;we<ue;we++){var Pe=f(ee[we]);Pe!==0&&(ne===void 0&&(ne=Pe<0),ne===Pe<0?(le&&pe.push(le),le=[ee[we]]):le.push(ee[we]))}return le&&pe.push(le),pe}(I),b=0;b<I.length;b++)for(N=0;N<I[b].length;N++)M(I[b][N])}I.length===1?I=I[0]:O="Multi"+O;var X={type:"Feature",geometry:{type:O,coordinates:I},properties:this.properties};return"id"in this&&(X.id=this.id),X},w1}function R1(){if(aS)return ey;aS=1;var d=W0();function i(f,y){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=f,this._keys=[],this._values=[],this._features=[],f.readFields(u,this,y),this.length=this._features.length}function u(f,y,m){f===15?y.version=m.readVarint():f===1?y.name=m.readString():f===5?y.extent=m.readVarint():f===2?y._features.push(m.pos):f===3?y._keys.push(m.readString()):f===4&&y._values.push(function(_){for(var b=null,N=_.readVarint()+_.pos;_.pos<N;){var D=_.readVarint()>>3;b=D===1?_.readString():D===2?_.readFloat():D===3?_.readDouble():D===4?_.readVarint64():D===5?_.readVarint():D===6?_.readSVarint():D===7?_.readBoolean():null}return b}(m))}return ey=i,i.prototype.feature=function(f){if(f<0||f>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[f];var y=this._pbf.readVarint()+this._pbf.pos;return new d(this._pbf,y,this.extent,this._keys,this._values)},ey}function Y0(){return K0||(K0=1,ty.VectorTile=function(){if(Mi)return $0;Mi=1;var d=R1();function i(u,f,y){if(u===3){var m=new d(y,y.readVarint()+y.pos);m.length&&(f[m.name]=m)}}return $0=function(u,f){this.layers=u.readFields(i,{},f)},$0}(),ty.VectorTileFeature=W0(),ty.VectorTileLayer=R1()),ty}var bh=Y0();const Of="3d_elevation_id",ay="level";class rS{constructor(){this._valid=!1}reset(i){return this.feature=i,this._valid=!0,this._geometry=i.loadGeometry(),this._geometry.length!==0&&this._geometry[0].length!==0||(this._valid=!1),this}geometry(i,u){return this._valid&&i(u(this._geometry)),this}require(i,u,f){return this.get(i,!0,u,f)}optional(i,u,f){return this.get(i,!1,u,f)}success(){return this._valid}get(i,u,f,y){const m=this.feature.properties.hasOwnProperty(i)?+this.feature.properties[i]:void 0;return this._valid&&m!==void 0?f(y?y(m):m):u&&(this._valid=!1),this}}class nS{constructor(i,u){this.featureFunc=i,this.vertexFunc=u}parseFeature(i,u,f){return this.featureFunc(i,u,f)}parseVertex(i,u,f){return this.vertexFunc(i,u,f)}}const xP=new nS((d,i,u)=>d.reset(i).require(Of,f=>{u.id=f}).optional("fixed_height_relative",f=>{u.constantHeight=f},Df.decodeRelativeHeight).geometry(f=>{u.bounds=f},Df.computeBounds).success(),(d,i,u)=>d.reset(i).require(Of,f=>{u.id=f}).require("elevation_idx",f=>{u.idx=f}).require("extent",f=>{u.extent=f}).require("height_relative",f=>{u.height=f},Df.decodeRelativeHeight).geometry(f=>{u.position=f},Df.getPoint).success()),iS=new nS((d,i,u)=>d.reset(i).require(Of,f=>{u.id=f}).optional("fixed_height",f=>{u.constantHeight=f},Df.decodeMetricHeight).geometry(f=>{u.bounds=f},Df.computeBounds).success(),(d,i,u)=>d.reset(i).require(Of,f=>{u.id=f}).require("elevation_idx",f=>{u.idx=f}).require("extent",f=>{u.extent=f}).require("height",f=>{u.height=f},Df.decodeMetricHeight).geometry(f=>{u.position=f},Df.getPoint).success());class Df{static computeBounds(i){const u=new It(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),f=new It(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);for(const y of i[0])u.x>y.x&&(u.x=y.x),u.y>y.y&&(u.y=y.y),f.x<y.x&&(f.x=y.x),f.y<y.y&&(f.y=y.y);return{min:u,max:f}}static getPoint(i){return Ae.vec2.fromValues(i[0][0].x,i[0][0].y)}static decodeRelativeHeight(i){return 1e-4*i*5}static decodeMetricHeight(i){return 1e-4*i}static parse(i){const u=[],f=[],y=i.length,m=new rS;for(let b=0;b<y;b++){const N=i.feature(b),D=N.properties.hasOwnProperty("version")?String(N.properties.version):void 0,S=(_=D)?_==="1.0.1"?iS:void 0:xP;if(S===void 0){en(`Unknown elevation feature version number ${D||"(unknown)"}`);continue}const V=N.properties.hasOwnProperty("type")?N.properties.type:void 0;if(V){if(bh.VectorTileFeature.types[N.type]==="Point"&&V==="curve_point"){const I={};S.parseVertex(m,N,I)&&u.push(I)}else if(bh.VectorTileFeature.types[N.type]==="Polygon"&&V==="curve_meta"){const I={};S.parseFeature(m,N,I)&&f.push(I)}}}var _;return{vertices:u,features:f}}}class Qy{constructor(i,u,f,y,m,_){if(this.vertices=new Array,this.vertexProps=new Array,this.edges=new Array,this.edgeProps=new Array,this.id=i,this.heightRange={min:f,max:f},this.safeArea=u,this.constantHeight=f,this.constantHeight==null&&(this.constantHeight!=null||y.length!==0)){this.vertices=y,this.edges=m,this.edges=this.edges.filter(b=>b.a<this.vertices.length&&b.b<this.vertices.length&&!Ae.vec2.exactEquals(this.vertices[b.a].position,this.vertices[b.b].position)),this.heightRange={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};for(const b of this.vertices)this.vertexProps.push({dir:Ae.vec2.fromValues(0,0)}),this.heightRange.min=Math.min(this.heightRange.min,b.height),this.heightRange.max=Math.max(this.heightRange.max,b.height);for(const b of this.edges){const N=this.vertices[b.a].position,D=this.vertices[b.b].position,S=Ae.vec2.subtract(Ae.vec2.create(),D,N),V=Ae.vec2.length(S),I=Ae.vec2.scale(Ae.vec2.create(),S,1/V);this.edgeProps.push({vec:S,dir:I,len:V});const O=this.vertexProps[b.a].dir,M=this.vertexProps[b.b].dir;Ae.vec2.add(O,O,I),Ae.vec2.add(M,M,I)}for(const b of this.vertexProps)b.dir[0]===0&&b.dir[1]===0||Ae.vec2.normalize(b.dir,b.dir);this.tessellate(_)}}pointElevation(i){if(this.constantHeight!=null)return this.constantHeight;const u=this.getClosestEdge(i);if(u==null)return 0;const[f,y]=u;return((m,_,b)=>(1-b)*m+b*_)(this.vertices[this.edges[f].a].height,this.vertices[this.edges[f].b].height,y)}getSafeArea(){return this.safeArea}isTunnel(){return this.heightRange.max<=-5}getClosestEdge(i){if(this.edges.length===0)return;let u=0,f=Number.POSITIVE_INFINITY,y=0;const m=Ae.vec2.fromValues(i.x,i.y);for(let _=0;_<this.edges.length;_++){const b=this.edges[_],N=this.edgeProps[_].dir,D=new Or(m,this.edgeProps[_].dir),S=this.vertices[b.a].position,V=this.vertices[b.b].position,I=Ae.vec2.create(),O=Ae.vec2.create(),M=D.intersectsPlane(S,this.vertexProps[b.a].dir,I),B=D.intersectsPlane(V,this.vertexProps[b.b].dir,O);if(!M||!B)continue;const X=Ae.vec2.subtract(Ae.vec2.create(),O,I),ee=Ae.vec2.subtract(Ae.vec2.create(),m,I),ue=Ae.vec2.dot(X,X),le=ue>0?Ae.vec2.dot(ee,X)/ue:0,ne=ka(le,0,1),pe=Math.abs((le-ne)*this.edgeProps[_].len),we=Ae.vec2.subtract(Ae.vec2.create(),m,S),Pe=pe+Math.abs(Ae.vec2.dot(we,Ae.vec2.fromValues(N[1],-N[0])));Pe<f&&(u=_,f=Pe,y=ne)}return[u,y]}tessellate(i){for(let u=this.edges.length-1;u>=0;--u){const f=this.edges[u].a,y=this.edges[u].b,{position:m,height:_,extent:b}=this.vertices[f],{position:N,height:D,extent:S}=this.vertices[y],V=this.vertexProps[f].dir,I=this.vertexProps[y].dir,O=Ae.vec3.fromValues(m[0]/i,m[1]/i,_),M=Ae.vec3.fromValues(N[0]/i,N[1]/i,D),B=Ae.vec3.fromValues(V[1],-V[0],0);Ae.vec3.scale(B,B,b);const X=Ae.vec3.fromValues(I[1],-I[0],0);if(Ae.vec3.scale(X,X,S),this.distSqLines(Ae.vec3.fromValues(O[0]+.5*B[0],O[1]+.5*B[1],O[2]+.5*B[2]),Ae.vec3.fromValues(M[0]-.5*X[0],M[1]-.5*X[1],M[2]-.5*X[2]),Ae.vec3.fromValues(O[0]-.5*B[0],O[1]-.5*B[1],O[2]-.5*B[2]),Ae.vec3.fromValues(M[0]+.5*X[0],M[1]+.5*X[1],M[2]+.5*X[2]))<=.05*.05)continue;const ee=this.vertices.length,ue=Ae.vec2.add(Ae.vec2.create(),m,N);this.vertices.push({position:Ae.vec2.scale(ue,ue,.5),height:.5*(_+D),extent:.5*(b+S)});const le=Ae.vec2.add(Ae.vec2.create(),V,I);this.vertexProps.push({dir:Ae.vec2.normalize(le,le)}),this.edges.splice(u,1),this.edgeProps.splice(u,1),this.edges.push({a:f,b:ee}),this.edges.push({a:ee,b:y});const ne=Ae.vec2.subtract(Ae.vec2.create(),this.vertices[ee].position,m),pe=Ae.vec2.length(ne),we={vec:ne,dir:Ae.vec2.scale(Ae.vec2.create(),ne,1/pe),len:pe};this.edgeProps.push(we),this.edgeProps.push(we)}}distSqLines(i,u,f,y){const m=Ae.vec3.subtract(Ae.vec3.create(),u,i),_=Ae.vec3.subtract(Ae.vec3.create(),y,f),b=Ae.vec3.subtract(Ae.vec3.create(),i,f),N=Ae.vec3.dot(m,m),D=Ae.vec3.dot(m,_),S=Ae.vec3.dot(m,b),V=Ae.vec3.dot(_,_),I=Ae.vec3.dot(_,b),O=N*V-D*D;if(O===0){const ue=Ae.vec3.dot(b,_)/Ae.vec3.dot(_,_),le=Ae.vec3.lerp(Ae.vec3.create(),f,y,ue);return Ae.vec3.squaredDistance(le,i)}const M=(D*I-S*V)/O,B=(N*I-D*S)/O,X=Ae.vec3.lerp(Ae.vec3.create(),i,u,M),ee=Ae.vec3.lerp(Ae.vec3.create(),f,y,B);return Ae.vec3.squaredDistance(X,ee)}}class Es{constructor(i,u){this.zScale=1,this.xOffset=0,this.yOffset=0,i.equals(u)||(this.zScale=Math.pow(2,u.z-i.z),this.xOffset=(i.x*this.zScale-u.x)*Va,this.yOffset=(i.y*this.zScale-u.y)*Va)}constantElevation(i,u){if(i.constantHeight!=null)return this.computeBiasedHeight(i.constantHeight,u)}pointElevation(i,u,f){const y=this.constantElevation(u,f);return y??(i.x=i.x*this.zScale+this.xOffset,i.y=i.y*this.zScale+this.yOffset,this.computeBiasedHeight(u.pointElevation(i),f))}computeBiasedHeight(i,u){return u<=0?i:i+u*jr(0,u,i>=0?i:Math.abs(.5*i))}}Pt(Qy,"ElevationFeature");class X0{constructor(){this.polygons=new Map}add(i,...u){this.polygons.has(i)?this.polygons.get(i).push(...u):this.polygons.set(i,u)}merge(i){for(const[u,f]of i.polygons)this.add(u,...f)}}class Co{constructor(){this.portals=[]}static evaluate(i){if(i.length===0)return new Co;let u=[];for(const D of i)u.push(...D.portals);if(u.length===0)return new Co;const f=(D,S)=>D<=0&&S<=0||D>=Va&&S>=Va;for(const D of u){const S=D.va,V=D.vb;(f(S.x,V.x)||f(S.y,V.y))&&(D.type="border")}const y=u.filter(D=>D.type!=="unevaluated"),m=u.filter(D=>D.type==="unevaluated");if(m.length===0)return new Co;m.sort((D,S)=>D.hash===S.hash?D.isTunnel===S.isTunnel?0:D.isTunnel?-1:1:D.hash<S.hash?1:-1),u=y.concat(m);let _=y.length,b=_,N=_;do if(b++,b===u.length||u[_].hash!==u[b].hash){if(b-_==2){N<_&&(u[N]=u[_],u[_]=null);const D=u[N],S=u[b-1];D.type=D.isTunnel!==S.isTunnel?"tunnel":"polygon",D.connection={a:D.connection.a,b:S.connection.a},N++}_=b}while(_!==u.length);return u.splice(N),u.sort((D,S)=>D.hash<S.hash?1:-1),{portals:u}}}Pt(Co,"ElevationPortalGraph"),Pt(X0,"ElevationPolygons");class PP{constructor(i,u,f){this.outPositions=i,this.outNormals=u,this.outIndices=f,this.vertexLookup=new Map,this.buffer=new ArrayBuffer(4),this.view=new DataView(this.buffer)}addVertex(i,u,f){let y=i[2];f!=null&&(y*=f);const m=this.getVec3Bits(i)<<96n|this.getVec3Bits(u),_=this.vertexLookup.get(m);if(_!=null)return _;const b=this.outPositions.length;this.vertexLookup.set(m,b);const N=Math.trunc(16384*u[0]),D=Math.trunc(16384*u[1]),S=Math.trunc(16384*u[2]);return this.outPositions.emplaceBack(i[0],i[1],y),this.outNormals.emplaceBack(N,D,S),b}addVertices(i,u,...f){const y=[];for(const m of f){const _=this.addVertex(m,i,u);y.push(_)}return y}addTriangles(i,u,f){if(u&&f){const y=f.length===1,m=Ae.vec3.fromValues(0,0,0);for(let _=0;_<i.length;_+=3){const b=u[i[_+0]],N=u[i[_+1]],D=u[i[_+2]],S=y?f[0]:f[i[_+1]],V=y?f[0]:f[i[_+2]],I=this.addVertex(Ae.vec3.fromValues(b.x,b.y,y?f[0]:f[i[_+0]]),m),O=this.addVertex(Ae.vec3.fromValues(N.x,N.y,S),m),M=this.addVertex(Ae.vec3.fromValues(D.x,D.y,V),m);this.outIndices.emplaceBack(I,O,M)}}else for(let y=0;y<i.length;y+=3)this.outIndices.emplaceBack(i[y+0],i[y+1],i[y+2])}addQuad(i,u){const f=this.addVertices(u,void 0,...i.map(N=>Ae.vec3.fromValues(N.coord.x,N.coord.y,N.height))),[y,m,_,b]=f;this.addTriangles([y,m,_,_,b,y])}getBits(i){return this.view.setFloat32(0,i),BigInt(this.view.getUint32(0))}getVec3Bits(i){return this.getBits(i[0])<<64n|this.getBits(i[1])<<32n|this.getBits(i[2])}}class Hd{constructor(i){this.unevaluatedPortals=new Co,this.portalPolygons=new X0,this.vertexHashLookup=new Map,this.unevalVertices=[],this.unevalHeights=[],this.unevalTriangles=[],this.unevalTunnelTriangles=[],this.unevalEdges=[],this.vertexPositions=new Sf,this.vertexNormals=new qh,this.indexArray=new Ps,this.tileToMeters=g(i)}addVertices(i,u){const f=this.unevalVertices.length;for(let y=0;y<i.length;y++)this.unevalVertices.push(i[y]),this.unevalHeights.push(u[y]);return f}addTriangles(i,u,f){const y=f?this.unevalTunnelTriangles:this.unevalTriangles;for(const m of i)y.push(m+u)}addRenderableRing(i,u,f,y,m){const _=[new It(m.min.x,m.min.y),new It(m.max.x,m.min.y),new It(m.max.x,m.max.y),new It(m.min.x,m.max.y)];for(let b=0;b<f-1;b++){const N=u+b,D=N+1,S=this.unevalVertices[N],V=this.unevalVertices[D];if(!(S.x>=m.min.x&&S.x<=m.max.x&&S.y>=m.min.y&&S.y<=m.max.y||V.x>=m.min.x&&V.x<=m.max.x&&V.y>=m.min.y&&V.y<=m.max.y||gt(S,V,_))||this.isOnBorder(S.x,V.x)||this.isOnBorder(S.y,V.y))continue;const I=Hd.computeEdgeHash(this.unevalVertices[N],this.unevalVertices[D]);let O,M=this.vertexHashLookup.get(Hd.computePosHash(S));M!=null?O=M.next:(M=this.vertexHashLookup.get(Hd.computePosHash(V)),O=M!=null?M.prev:I),this.unevalEdges.push({polygonIdx:i,a:N,b:D,hash:I,portalHash:O,isTunnel:y,type:"unevaluated"})}}addPortalCandidates(i,u,f,y,m){if(u.length===0)return;this.portalPolygons.add(i,{geometry:u,zLevel:m});const _=u[0];this.vertexHashLookup.clear();let b=Hd.computeEdgeHash(_[_.length-2],_[_.length-1]);for(let N=0;N<_.length-1;N++){const D=_[N+0],S=_[N+1],V=Ae.vec2.fromValues(S.x-D.x,S.y-D.y),I=Ae.vec2.length(V);if(I===0)continue;let O="unevaluated";const M=y.pointElevation(D),B=y.pointElevation(S);Math.abs(M)<.01&&Math.abs(B)<.01?O="entrance":(this.isOnBorder(D.x,S.x)||this.isOnBorder(D.y,S.y))&&(O="border");const X=Hd.computeEdgeHash(D,S);this.unevaluatedPortals.portals.push({connection:{a:i,b:void 0},va:D,vb:S,vab:V,length:I,hash:X,isTunnel:f,type:O});const ee=Hd.computePosHash(D);this.vertexHashLookup.set(ee,{prev:b,next:X}),b=X}}construct(i){if(this.unevalVertices.length===0)return;const u=()=>({vertexOffset:0,primitiveOffset:this.indexArray.length}),f=V=>{V.primitiveLength=this.indexArray.length-V.primitiveOffset},y=new PP(this.vertexPositions,this.vertexNormals,this.indexArray);this.prepareEdges(i.portals,this.unevalEdges);const m=u(),_=u(),b=u(),N=(V,I)=>{V.sort((M,B)=>M.type===I&&B.type!==I?-1:M.type!==I&&B.type===I?1:0);const O=V.findIndex(M=>M.type!==I);return O>=0?O:V.length};let D=0;this.unevalEdges.length>0&&(D=N(this.unevalEdges,"none"),this.constructBridgeStructures(y,this.unevalVertices,this.unevalHeights,this.unevalEdges,{min:0,max:D},this.tileToMeters));const S=u();if(this.unevalEdges.length>0){const V=this.unevalEdges.splice(D),I=N(V,"tunnel")+D;this.unevalEdges.push(...V),this.constructTunnelStructures(y,this.unevalVertices,this.unevalHeights,this.unevalEdges,{min:0,max:D},{min:D,max:I})}f(b),y.addTriangles(this.unevalTriangles,this.unevalVertices,this.unevalHeights),f(S),y.addTriangles(this.unevalTunnelTriangles,this.unevalVertices,this.unevalHeights),f(_),y.addTriangles(this.unevalTunnelTriangles,this.unevalVertices,[-.1]),f(m),this.maskSegments=Di.simpleSegment(0,S.primitiveOffset,0,S.primitiveLength),this.depthSegments=Di.simpleSegment(0,_.primitiveOffset,0,_.primitiveLength),this.renderableSegments=Di.simpleSegment(0,b.primitiveOffset,0,b.primitiveLength),this.shadowCasterSegments=Di.simpleSegment(0,m.primitiveOffset,0,m.primitiveLength)}upload(i){this.vertexBuffer||this.vertexPositions.length===0||this.vertexNormals.length===0||this.indexArray.length===0||(this.vertexBuffer=i.createVertexBuffer(this.vertexPositions,YT.members),this.vertexBufferNormal=i.createVertexBuffer(this.vertexNormals,XT.members),this.indexBuffer=i.createIndexBuffer(this.indexArray))}destroy(){this.vertexBuffer&&(this.vertexBuffer.destroy(),this.vertexBufferNormal.destroy(),this.indexBuffer.destroy()),this.maskSegments&&(this.maskSegments.destroy(),this.depthSegments.destroy(),this.renderableSegments.destroy(),this.shadowCasterSegments.destroy())}computeVertexConnections(i,u,f,y){const m=new Map;for(let _=f;_<y;_++){const b=u[_],N=b.a,D=b.b;m.has(N)||m.set(N,{}),m.has(D)||m.set(D,{});const S=m.get(N),V=m.get(D);i[D]>0&&(S.to=D),i[N]>0&&(V.from=N)}return m}constructBridgeStructures(i,u,f,y,m,_){const b=this.computeVertexConnections(f,y,m.min,m.max),N=1/_,D=.5*N,S=I=>Ae.vec3.fromValues(u[I].x,u[I].y,f[I]*N),V=I=>{const O=b.get(I),M=O.from,B=O.to;if(!M||!B)return;const X=S(M),ee=S(I),ue=S(B),le=Ae.vec3.fromValues(0,0,0);if(!Ae.vec3.exactEquals(X,ee)){const pe=Ae.vec3.sub(Ae.vec3.create(),ee,X);Ae.vec3.add(le,le,Ae.vec3.normalize(pe,pe))}if(!Ae.vec3.exactEquals(ue,ee)){const pe=Ae.vec3.sub(Ae.vec3.create(),ue,ee);Ae.vec3.add(le,le,Ae.vec3.normalize(pe,pe))}const ne=Ae.vec3.len(le);return ne>0?Ae.vec3.scale(le,le,1/ne):void 0};for(let I=m.min;I<m.max;I++){const O=y[I],M=this.prepareEdgePoints(u,f,O,(va,Ar)=>va>=Ar);if(M==null)continue;const B=M[0],X=M[1],ee=Ae.vec3.fromValues(B.coord.x,B.coord.y,N*B.height),ue=Ae.vec3.fromValues(X.coord.x,X.coord.y,N*X.height);if(Ae.vec3.exactEquals(ee,ue))continue;const le=Ae.vec3.sub(Ae.vec3.create(),ue,ee);Ae.vec3.normalize(le,le);const ne=va=>Ae.vec3.normalize(va,va),pe=V(O.a)||le,we=V(O.b)||le,Pe=ne(Ae.vec3.fromValues(pe[1],-pe[0],0)),Ye=ne(Ae.vec3.fromValues(we[1],-we[0],0)),je=ne(Ae.vec3.cross(Ae.vec3.create(),Pe,pe)),qe=ne(Ae.vec3.cross(Ae.vec3.create(),Ye,we)),mt=Ae.vec3.create(),Xe=[Ae.vec3.add(Ae.vec3.create(),ee,Ae.vec3.scale(mt,Ae.vec3.sub(mt,Pe,je),D)),Ae.vec3.add(Ae.vec3.create(),ee,Ae.vec3.scale(mt,Ae.vec3.add(mt,Pe,je),D)),Ae.vec3.add(Ae.vec3.create(),ee,Ae.vec3.scale(mt,je,D)),ee],At=[Ae.vec3.add(Ae.vec3.create(),ue,Ae.vec3.scale(mt,Ae.vec3.sub(mt,Ye,qe),D)),Ae.vec3.add(Ae.vec3.create(),ue,Ae.vec3.scale(mt,Ae.vec3.add(mt,Ye,qe),D)),Ae.vec3.add(Ae.vec3.create(),ue,Ae.vec3.scale(mt,qe,D)),ue],[xt,St]=i.addVertices(Pe,_,Xe[0],Xe[1]),[Ot,Nt]=i.addVertices(Ye,_,At[0],At[1]);i.addTriangles([xt,St,Ot,St,Nt,Ot]);const[kt,Mt]=i.addVertices(je,_,Xe[1],Xe[2]),[Zt,ga]=i.addVertices(qe,_,At[1],At[2]);i.addTriangles([kt,Mt,Zt,Mt,ga,Zt]);const[ma,Ya]=i.addVertices(Ae.vec3.negate(Pe,Pe),_,Xe[2],Xe[3]),[Pa,Oa]=i.addVertices(Ae.vec3.negate(Ye,Ye),_,At[2],At[3]);i.addTriangles([ma,Ya,Pa,Ya,Oa,Pa])}}constructTunnelStructures(i,u,f,y,m,_){const b=N=>Ae.vec3.normalize(N,N);for(let N=m.min;N<m.max;N++){const D=this.prepareEdgePoints(u,f,y[N],(O,M)=>O<=M);if(D==null)continue;const[S,V]=D,I=b(Ae.vec3.fromValues(V.coord.y-S.coord.y,-(V.coord.x-S.coord.x),0));i.addQuad([S,V,{coord:V.coord,height:y[N].isTunnel?-.1:0},{coord:S.coord,height:y[N].isTunnel?-.1:0}],I)}for(let N=_.min;N<_.max;N++){const D=y[N],S=u[D.a],V=u[D.b],I=b(Ae.vec3.fromValues(V.y-S.y,-(V.x-S.x),0));i.addQuad([{coord:V,height:0},{coord:S,height:0},{coord:S,height:f[D.a]+4},{coord:V,height:f[D.b]+4}],I),i.addQuad([{coord:S,height:0},{coord:V,height:0},{coord:V,height:f[D.b]+4},{coord:S,height:f[D.a]+4}],I)}}prepareEdgePoints(i,u,f,y){const m=i[f.a],_=i[f.b];let b=u[f.a],N=u[f.b];if(!(b!==0&&y(b,0)||N!==0&&y(N,0)))return;const D=m.clone(),S=_.clone();if(y(b,0)){if(!y(N,0)){const V=N/(N-b);S.x=fr(S.x,D.x,V),S.y=fr(S.y,D.y,V),N=fr(N,b,V)}}else{const V=b/(b-N);D.x=fr(D.x,S.x,V),D.y=fr(D.y,S.y,V),b=fr(b,N,V)}return[{coord:D,height:b},{coord:S,height:N}]}prepareEdges(i,u){if(u.length===0)return;u.sort((b,N)=>b.hash===N.hash?N.polygonIdx-b.polygonIdx:N.hash>b.hash?1:-1);let f=0,y=0,m=0,_=u[f].polygonIdx;do y++,(y===u.length||u[f].hash!==u[y].hash)&&((y-f==1||u[y-1].polygonIdx!==_)&&(m<f&&(u[m]=u[f],u[f]=null),u[m].type="none",m++),f=y,f!==u.length&&(_=u[f].polygonIdx));while(f!==u.length);if(u.splice(m),u.length!==0&&i.length!==0){u.sort((D,S)=>D.hash<S.hash?1:-1);let b=0,N=0;for(;b!==u.length&&N!==i.length;){const D=u[b],S=i[N];D.portalHash>S.hash?b++:S.hash>D.portalHash?N++:(D.type=S.type,b++)}}}isOnBorder(i,u){return i<=0&&u<=0||i>=Va&&u>=Va}static computeEdgeHash(i,u){return(i.y===u.y&&i.x>u.x||i.y>u.y)&&([i,u]=[u,i]),BigInt(Hd.computePosHash(i))<<32n|BigInt(Hd.computePosHash(u))}static computePosHash(i){return((65535&i.x)<<16|65535&i.y)>>>0}}class RA{constructor(i,u){this.layoutVertexArray=new Eu,this.indexArray=new Ps,this.lineIndexArray=new Bd,this.triangleSegments=new Di,this.lineSegments=new Di,this.programConfigurations=new Rh(i.layers,{zoom:i.zoom,lut:i.lut}),this.uploaded=!1,u&&(this.elevatedLayoutVertexArray=new Yc)}update(i,u,f,y,m,_,b){this.programConfigurations.updatePaintArrays(i,u,m,f,y,_,b)}isEmpty(){return this.layoutVertexArray.length===0}needsUpload(){return this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Ky.members),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.lineIndexBuffer=i.createIndexBuffer(this.lineIndexArray),this.elevatedLayoutVertexArray&&this.elevatedLayoutVertexArray.length>0&&(this.elevatedLayoutVertexBuffer=i.createVertexBuffer(this.elevatedLayoutVertexArray,Z0.members))),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.elevatedLayoutVertexBuffer&&this.elevatedLayoutVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.lineIndexBuffer.destroy(),this.programConfigurations.destroy(),this.triangleSegments.destroy(),this.lineSegments.destroy())}populatePaintArrays(i,u,f,y,m,_){this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,u,f,y,m,_)}}class eg{constructor(i){this.zoom=i.zoom,this.pixelRatio=i.pixelRatio,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.bufferData=new RA(i,!1),this.elevationBufferData=new RA(i,!0),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.projection=i.projection,this.elevationMode=this.layers[0].layout.get("fill-elevation-reference")}updateFootprints(i,u){}populate(i,u,f,y){this.hasPattern=vA("fill",this.layers,this.pixelRatio,u);const m=this.layers[0].layout.get("fill-sort-key"),_=[];for(const{feature:b,id:N,index:D,sourceLayerIndex:S}of i){const V=this.layers[0]._featureFilter.needGeometry,I=W(b,V);if(!this.layers[0]._featureFilter.filter(new vn(this.zoom),I,f))continue;const O=m?m.evaluate(I,{},f,u.availableImages):void 0,M={id:N,properties:b.properties,type:b.type,sourceLayerIndex:S,index:D,geometry:V?I.geometry:$(b,f,y),patterns:{},sortKey:O};_.push(M)}m&&_.sort((b,N)=>b.sortKey-N.sortKey);for(const b of _){const{geometry:N,index:D,sourceLayerIndex:S}=b;if(this.hasPattern){const V=wA("fill",this.layers,b,this.zoom,this.pixelRatio,u);this.patternFeatures.push(V)}else this.addFeature(b,N,D,f,{},u.availableImages,u.brightness,u.elevationFeatures);u.featureIndex.insert(i[D].feature,N,D,S,this.index)}}update(i,u,f,y,m,_,b){this.bufferData.update(i,u,f,y,m,_,b),this.elevationBufferData.update(i,u,f,y,m,_,b)}addFeatures(i,u,f,y,m,_){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,u,f,y,_,i.elevationFeatures)}isEmpty(){return this.bufferData.isEmpty()&&this.elevationBufferData.isEmpty()}uploadPending(){return!this.uploaded||this.bufferData.needsUpload()||this.elevationBufferData.needsUpload()}upload(i){this.bufferData.upload(i),this.elevationBufferData.upload(i),this.elevatedStructures&&this.elevatedStructures.upload(i)}destroy(){this.bufferData.destroy(),this.elevationBufferData.destroy(),this.elevatedStructures&&this.elevatedStructures.destroy()}addFeature(i,u,f,y,m,_=[],b,N){const D=_A(u,500);this.elevationMode!=="none"?this.addElevatedRoadFeature(i,D,y,f,N):this.addGeometry(D,this.bufferData),this.bufferData.populatePaintArrays(i,f,m,_,y,b),this.elevationBufferData.populatePaintArrays(i,f,m,_,y,b)}getUnevaluatedPortalGraph(){return this.elevatedStructures?this.elevatedStructures.unevaluatedPortals:void 0}getElevationPolygons(){return this.elevatedStructures?this.elevatedStructures.portalPolygons:void 0}setEvaluatedPortalGraph(i){this.elevatedStructures&&this.elevatedStructures.construct(i)}addElevatedRoadFeature(i,u,f,y,m){const _=new Array,b=this.getElevationFeature(i,m);if(b){_.push({polygons:u,elevationFeature:b,elevationTileID:f});for(const N of _)if(N.elevationFeature){if(this.elevationMode==="hd-road-base"){this.elevatedStructures||(this.elevatedStructures=new Hd(N.elevationTileID));const S=N.elevationFeature.isTunnel();let V=0;i.properties.hasOwnProperty(ay)&&(V=+i.properties[ay]);for(const I of N.polygons)this.elevatedStructures.addPortalCandidates(N.elevationFeature.id,I,S,N.elevationFeature,V)}const D=new Es(f,N.elevationTileID);this.addElevatedGeometry(N.polygons,D,N.elevationFeature,this.elevationMode==="hd-road-base"?0:.05,y)}}else this.addGeometry(u,this.bufferData)}addElevatedGeometry(i,u,f,y,m){const _={elevation:f,elevationSampler:u,bias:y,index:m},[b,N]=this.addGeometry(i,this.elevationBufferData,_);this.elevationBufferData.heightRange==null?this.elevationBufferData.heightRange={min:b,max:N}:(this.elevationBufferData.heightRange.min=Math.min(this.elevationBufferData.heightRange.min,b),this.elevationBufferData.heightRange.max=Math.max(this.elevationBufferData.heightRange.max,N))}addGeometry(i,u,f){let y=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,_=null;f&&(_=f.elevationSampler.constantElevation(f.elevation,f.bias),_!=null&&(y=_,m=_));const b=(N,D,S)=>{if(f!=null)if(D.push(N),_!=null)u.elevatedLayoutVertexArray.emplaceBack(_),S.push(_);else{const V=f.elevationSampler.pointElevation(N,f.elevation,f.bias);u.elevatedLayoutVertexArray.emplaceBack(V),S.push(V),y=Math.min(y,V),m=Math.max(m,V)}};for(const N of i){let D=0;for(const le of N)D+=le.length;const S=u.triangleSegments.prepareSegment(D,u.layoutVertexArray,u.indexArray),V=S.vertexLength,I=[],O=[],M=[],B=[],X=[],ee=u.layoutVertexArray.length;for(const le of N){if(le.length===0)continue;le!==N[0]&&O.push(I.length/2);const ne=u.lineSegments.prepareSegment(le.length,u.layoutVertexArray,u.lineIndexArray),pe=ne.vertexLength;f&&X.push(u.layoutVertexArray.length-ee),b(le[0],M,B),u.layoutVertexArray.emplaceBack(le[0].x,le[0].y),u.lineIndexArray.emplaceBack(pe+le.length-1,pe),I.push(le[0].x),I.push(le[0].y);for(let we=1;we<le.length;we++)b(le[we],M,B),u.layoutVertexArray.emplaceBack(le[we].x,le[we].y),u.lineIndexArray.emplaceBack(pe+we-1,pe+we),I.push(le[we].x),I.push(le[we].y);ne.vertexLength+=le.length,ne.primitiveLength+=le.length}const ue=yA(I,O);for(let le=0;le<ue.length;le+=3)u.indexArray.emplaceBack(V+ue[le],V+ue[le+1],V+ue[le+2]);if(f&&this.elevationMode==="hd-road-base"){const le=f.elevation.isTunnel(),ne=f.elevation.safeArea,pe=this.elevatedStructures.addVertices(M,B);this.elevatedStructures.addTriangles(ue,pe,le);const we=X.length;if(we>0){for(let Pe=0;Pe<we-1;Pe++)this.elevatedStructures.addRenderableRing(f.index,X[Pe]+pe,X[Pe+1]-X[Pe],le,ne);this.elevatedStructures.addRenderableRing(f.index,X[we-1]+pe,M.length-X[we-1],le,ne)}}S.vertexLength+=D,S.primitiveLength+=ue.length/3}return[y,m]}getElevationFeature(i,u){if(!u)return;const f=+i.properties[Of];return f!=null?u.find(y=>y.id===f):void 0}}let T1,S1,J0,Q0;Pt(eg,"FillBucket",{omit:["layers","patternFeatures"]}),Pt(RA,"FillBufferData"),Pt(Hd,"ElevatedStructures");class C1{constructor(i,u,f,y){if(this.triangleCount=u.length/3,this.min=new It(0,0),this.max=new It(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],this.triangleCount===0||i.length===0)return;const[m,_]=[i[0].clone(),i[0].clone()];for(let V=1;V<i.length;++V){const I=i[V];m.x=Math.min(m.x,I.x),m.y=Math.min(m.y,I.y),_.x=Math.max(_.x,I.x),_.y=Math.max(_.y,I.y)}if(y){const V=Math.ceil(Math.max(_.x-m.x,_.y-m.y)/y);f=Math.max(f,V)}if(f===0)return;this.min=m,this.max=_;const b=this.max.sub(this.min);b.x=Math.max(b.x,1),b.y=Math.max(b.y,1);const N=Math.max(b.x,b.y)/f;this.cellsX=Math.max(1,Math.ceil(b.x/N)),this.cellsY=Math.max(1,Math.ceil(b.y/N)),this.xScale=1/N,this.yScale=1/N;const D=[];for(let V=0;V<this.triangleCount;V++){const I=i[u[3*V+0]].sub(this.min),O=i[u[3*V+1]].sub(this.min),M=i[u[3*V+2]].sub(this.min),B=Xh(Math.floor(Math.min(I.x,O.x,M.x)),this.xScale,this.cellsX),X=Xh(Math.floor(Math.max(I.x,O.x,M.x)),this.xScale,this.cellsX),ee=Xh(Math.floor(Math.min(I.y,O.y,M.y)),this.yScale,this.cellsY),ue=Xh(Math.floor(Math.max(I.y,O.y,M.y)),this.yScale,this.cellsY),le=new It(0,0),ne=new It(0,0),pe=new It(0,0),we=new It(0,0);for(let Pe=ee;Pe<=ue;++Pe){le.y=ne.y=Pe*N,pe.y=we.y=(Pe+1)*N;for(let Ye=B;Ye<=X;++Ye)le.x=pe.x=Ye*N,ne.x=we.x=(Ye+1)*N,(Xt(I,O,M,le,ne,we)||Xt(I,O,M,le,we,pe))&&D.push({cellIdx:Pe*this.cellsX+Ye,triIdx:V})}}if(D.length===0)return;D.sort((V,I)=>V.cellIdx-I.cellIdx||V.triIdx-I.triIdx);let S=0;for(;S<D.length;){const V=D[S].cellIdx,I={start:this.payload.length,len:0};for(;S<D.length&&D[S].cellIdx===V;)++I.len,this.payload.push(D[S++].triIdx);this.cells[V]=I}}_lazyInitLookup(){this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8))),this.lookup.fill(0)}queryPoint(i,u){if(this.triangleCount===0||this.cells.length===0||i.x>this.max.x||this.min.x>i.x||i.y>this.max.y||this.min.y>i.y)return;const f=Xh(i.x-this.min.x,this.xScale,this.cellsX),y=Xh(i.y-this.min.y,this.yScale,this.cellsY),m=this.cells[y*this.cellsX+f];if(m){this._lazyInitLookup();for(let _=0;_<m.len;_++){const b=this.payload[m.start+_],N=Math.floor(b/8),D=1<<b%8;if(!(this.lookup[N]&D)&&(this.lookup[N]|=D,u.push(b),u.length===this.triangleCount))return}}}query(i,u,f){if(this.triangleCount===0||this.cells.length===0||i.x>this.max.x||this.min.x>u.x||i.y>this.max.y||this.min.y>u.y)return;this._lazyInitLookup();const y=Xh(i.x-this.min.x,this.xScale,this.cellsX),m=Xh(u.x-this.min.x,this.xScale,this.cellsX),_=Xh(i.y-this.min.y,this.yScale,this.cellsY),b=Xh(u.y-this.min.y,this.yScale,this.cellsY);for(let N=_;N<=b;N++)for(let D=y;D<=m;D++){const S=this.cells[N*this.cellsX+D];if(S)for(let V=0;V<S.len;V++){const I=this.payload[S.start+V],O=Math.floor(I/8),M=1<<I%8;if(!(this.lookup[O]&M)&&(this.lookup[O]|=M,f.push(I),f.length===this.triangleCount))return}}}}function Xh(d,i,u){return Math.max(0,Math.min(u-1,Math.floor(d*i)))}Pt(C1,"TriangleGridIndex");class sS{constructor(i){this.zoom=i.zoom,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=i.index,this.hasPattern=!1,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.footprints=[]}updateFootprints(i,u){for(const f of this.footprints)u.push({footprint:f,id:i})}populate(i,u,f,y){const m=[];for(const{feature:_,id:b,index:N,sourceLayerIndex:D}of i){const S=this.layers[0]._featureFilter.needGeometry,V=W(_,S);if(!this.layers[0]._featureFilter.filter(new vn(this.zoom),V,f))continue;const I={id:b,properties:_.properties,type:_.type,sourceLayerIndex:D,index:N,geometry:S?V.geometry:$(_,f,y),patterns:{}};m.push(I)}for(const _ of m){const{geometry:b,index:N,sourceLayerIndex:D}=_;this.addFeature(_,b,N,f,{},u.availableImages,u.brightness),u.featureIndex.insert(i[N].feature,b,N,D,this.index)}}isEmpty(){return this.footprints.length===0}uploadPending(){return!1}upload(i){}update(i,u,f,y,m,_,b){}destroy(){}addFeature(i,u,f,y,m,_=[],b){for(const N of _A(u,2)){const D=[],S=[],V=[],I=new It(1/0,1/0),O=new It(-1/0,-1/0);for(const X of N)if(X.length!==0){X!==N[0]&&V.push(S.length/2);for(let ee=0;ee<X.length;ee++)S.push(X[ee].x),S.push(X[ee].y),D.push(X[ee]),I.x=Math.min(I.x,X[ee].x),I.y=Math.min(I.y,X[ee].y),O.x=Math.max(O.x,X[ee].x),O.y=Math.max(O.y,X[ee].y)}const M=yA(S,V),B=new C1(D,M,8,256);this.footprints.push({vertices:D,indices:M,grid:B,min:I,max:O})}}}Pt(sS,"ClipBucket",{omit:["layers"]});const oS=xn([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),EP=xn([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),NP=xn([{name:"a_centroid_pos",components:2,type:"Uint16"}]),b1=xn([{name:"a_join_normal_inside",components:3,type:"Int16"}]),x1=xn([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),VP=xn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:zP}=oS;class Mu extends It{constructor(i,u,f){super(i,u),this.z=f}}class P1 extends Mu{constructor(i,u,f,y){super(i,u,f),this.w=y}}function TA(d,i,u,f){const y=[],m=f===0?(_,b,N,D,S,V)=>{_.push(new It(V,N+(V-b)/(D-b)*(S-N)))}:(_,b,N,D,S,V)=>{_.push(new It(b+(V-N)/(S-N)*(D-b),V))};for(const _ of d){const b=[];for(const N of _){if(N.length<=2)continue;const D=[];for(let I=0;I<N.length-1;I++){const O=N[I].x,M=N[I].y,B=N[I+1].x,X=N[I+1].y,ee=f===0?O:M,ue=f===0?B:X;ee<i?ue>i&&m(D,O,M,B,X,i):ee>u?ue<u&&m(D,O,M,B,X,u):D.push(N[I]),ue<i&&ee>=i&&m(D,O,M,B,X,i),ue>u&&ee<=u&&m(D,O,M,B,X,u)}let S=N[N.length-1];const V=f===0?S.x:S.y;V>=i&&V<=u&&D.push(S),D.length&&(S=D[D.length-1],D[0].x===S.x&&D[0].y===S.y||D.push(D[0]),b.push(D))}b.length&&y.push(b)}return y}function $d(d,i,u,f){const y=u==="x"?"y":"x",m=(f-d[u])/(i[u]-d[u]);d[y]=d[y]+(i[y]-d[y])*m,d[u]=f,d.hasOwnProperty("z")&&(d.z=fr(d.z,i.z,m)),d.hasOwnProperty("w")&&(d.w=fr(d.w,i.w,m))}function E1(d,i,u,f){const y=u,m=f;for(const _ of["x","y"]){let b=d,N=i;b[_]>=N[_]&&(b=i,N=d),b[_]<y&&N[_]>y&&$d(b,N,_,y),b[_]<m&&N[_]>m&&$d(N,b,_,m)}}const ry=Number.MAX_SAFE_INTEGER;function Mf(d,i,u,f){return d.order<i||d.order===ry||!(d.clipMask&u)||function(y,m){return m.length!==0&&m.find(_=>_===y)===void 0}(f,d.clipScope)}function e_(d,i){return d.x-i.x||d.y-i.y}function lS(d,i){return e_(d.min,i.min)===0&&e_(d.max,i.max)===0}function lm(d,i){return!(d.min.x>i.max.x||d.max.x<i.min.x||d.min.y>i.max.y||d.max.y<i.min.y)}function t_(d,i){if(d.length!==i.length)return!1;for(let u=0;u<d.length;u++)if(d[u].sourceId!==i[u].sourceId||!lS(d[u],i[u])||d[u].order!==i[u].order||d[u].clipMask!==i[u].clipMask||!ta(d[u].clipScope,i[u].clipScope))return!1;return!0}function uS(d,i,u){const f=1/Va,y=1/(1<<u.canonical.z),m=(i.x*f+u.canonical.x)*y+u.wrap,_=(i.y*f+u.canonical.y)*y;return{min:new It((d.x*f+u.canonical.x)*y+u.wrap,(d.y*f+u.canonical.y)*y),max:new It(m,_)}}function OP(d,i,u){const f=1<<u.canonical.z,y=((i.x-u.wrap)*f-u.canonical.x)*Va,m=(i.y*f-u.canonical.y)*Va;return{min:new It(((d.x-u.wrap)*f-u.canonical.x)*Va,(d.y*f-u.canonical.y)*Va),max:new It(y,m)}}function cS(d,i,u,f,y,m,_){const b=d.indices,N=d.vertices,D=[];for(let S=f;S<f+y;S+=3){const V=i[u[S+0]+m],I=i[u[S+1]+m],O=i[u[S+2]+m],M=Math.min(V.x,I.x,O.x),B=Math.max(V.x,I.x,O.x),X=Math.min(V.y,I.y,O.y),ee=Math.max(V.y,I.y,O.y);D.length=0,d.grid.query(new It(M,X),new It(B,ee),D);for(let ue=0;ue<D.length;ue++){const le=D[ue];if(Xt(N[b[3*le+0]],N[b[3*le+1]],N[b[3*le+2]],V,I,O,_))return!0}}return!1}function dS(d,i,u,f){if(!d||!u)return!1;let y=d.vertices;if(!i.canonical.equals(f.canonical)||i.wrap!==f.wrap){if(u.vertices.length<d.vertices.length)return dS(u,f,d,i);const m=i.canonical,_=f.canonical,b=Math.pow(2,_.z-m.z);y=d.vertices.map(N=>new It((N.x+m.x*Va)*b-_.x*Va,(N.y+m.y*Va)*b-_.y*Va))}return cS(u,y,d.indices,0,d.indices.length,0,0)}function hS(d,i,u,f){const y=Math.pow(2,f.z-u.z);return new It((d+u.x*Va)*y-f.x*Va,(i+u.y*Va)*y-f.y*Va)}function fS(d,i){const u=[];i.grid.queryPoint(d,u);const f=i.indices,y=i.vertices;for(let m=0;m<u.length;m++){const _=u[m];if(st([y[f[3*_+0]],y[f[3*_+1]],y[f[3*_+2]]],d))return!0}return!1}const N1=[new It(0,0),new It(Va,0),new It(Va,Va),new It(0,Va)];function V1(d,i){const u=[];let f=[];if(!i||d.length<2)return[d];if(d.length===2)return gt(d[0],d[1],N1)?[d]:[];for(let y=0;y<d.length+2;y++){const m=d[y%d.length],_=d[(y+1)%d.length],b=gt(y===0?d[d.length-1]:d[(y-1)%d.length],m,N1),N=gt(m,_,N1),D=b||N;D&&f.push(m),D&&N||f.length>0&&(f.length>1&&u.push(f),f=[])}return f.length>1&&u.push(f),u}const um=bh.VectorTileFeature.types,SA=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius","fill-extrusion-line-width","fill-extrusion-emissive-strength"],pS=["fill-extrusion-flood-light-ground-radius"],DP=Math.pow(2,13),tg=Math.pow(2,15)-1,ag=new It(0,1),yp=2147483648;function cm(d,i,u,f,y,m,_,b){d.emplaceBack((i<<1)+_,(u<<1)+m,(Math.floor(f*DP)<<1)+y,Math.round(b))}function ny(d,i,u){d.emplaceBack(i.x*Va,i.y*Va,u?1:0)}function rg(d,i,u,f,y,m){d.emplaceBack(i.x,i.y,(u.x<<1)+f,(u.y<<1)+y,m)}function dm(d,i,u){d.emplaceBack(i.x,i.y,i.z,u[0]*16384,u[1]*16384,u[2]*16384)}class z1{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class O1{constructor(){this.centroidXY=new It(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new It(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new It(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0}span(){return new It(this.max.x-this.min.x,this.max.y-this.min.y)}}class mS{constructor(){this.acc=new It(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(i,u){i.min.x===Number.MAX_VALUE&&(i.min.x=i.max.x=u.x,i.min.y=i.max.y=u.y)}appendEdge(i,u,f){this.accCount++,this.acc._add(u);let y=!!this.borders;u.x<i.min.x?(i.min.x=u.x,y=!0):u.x>i.max.x&&(i.max.x=u.x,y=!0),u.y<i.min.y?(i.min.y=u.y,y=!0):u.y>i.max.y&&(i.max.y=u.y,y=!0),((u.x===0||u.x===Va)&&u.x===f.x)!=((u.y===0||u.y===Va)&&u.y===f.y)&&this.processBorderOverlap(u,f),y&&this.checkBorderIntersection(u,f)}checkBorderIntersection(i,u){u.x<0!=i.x<0&&this.addBorderIntersection(0,fr(u.y,i.y,(0-u.x)/(i.x-u.x))),u.x>Va!=i.x>Va&&this.addBorderIntersection(1,fr(u.y,i.y,(Va-u.x)/(i.x-u.x))),u.y<0!=i.y<0&&this.addBorderIntersection(2,fr(u.x,i.x,(0-u.y)/(i.y-u.y))),u.y>Va!=i.y>Va&&this.addBorderIntersection(3,fr(u.x,i.x,(Va-u.y)/(i.y-u.y)))}addBorderIntersection(i,u){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const f=this.borders[i];u<f[0]&&(f[0]=u),u>f[1]&&(f[1]=u)}processBorderOverlap(i,u){if(i.x===u.x){if(i.y===u.y)return;const f=i.x===0?0:1;this.addBorderIntersection(f,u.y),this.addBorderIntersection(f,i.y)}else{const f=i.y===0?2:3;this.addBorderIntersection(f,u.x),this.addBorderIntersection(f,i.x)}}centroid(){return this.accCount===0?new It(0,0):new It(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((i,u)=>i+ +(u[0]!==Number.MAX_VALUE),0):0}}function D1(d,i){const u=d.add(i)._unit(),f=ka(d.x*u.x+d.y*u.y,-1,1);var y,m,_;return _=Math.acos(f),Math.min(4,Math.max(-4,Math.tan(_)))/4*tg*((y=d).x*(m=i).y-y.y*m.x<0?-1:1)}const CA=[d=>d.x<0,d=>d.x>Va,d=>d.y<0,d=>d.y>Va];function MP(d,i,u,f){const y=[4];if(f===0)return y;u._mult(f);const m=d.sub(u),_=i.sub(u),b=[d,i,m,_];for(let N=0;N<4;N++)for(const D of b)if(CA[N](D)){y.push(N);break}return y}class yS{constructor(i){this.vertexArray=new Il,this.indexArray=new Ps,this.programConfigurations=new Rh(i.layers,{zoom:i.zoom,lut:i.lut},u=>pS.includes(u)),this._segments=new Di,this.hiddenByLandmarkVertexArray=new ky,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new Di}getDefaultSegment(){return this.regionSegments[4]}hasData(){return this.vertexArray.length!==0}addData(i,u,f,y=!1){const m=i.length;if(m>2){let _=Math.max(0,this._segments.get().length-1);const b=this._segments._prepareSegment(4*m,this.vertexArray.length,2*this._segmentToGroundQuads[_].length);let N;_!==this._segments.get().length-1&&(_++,this._segmentToGroundQuads[_]=[],this._segmentToRegionTriCounts[_]=[0,0,0,0,0]);{const D=i[0],S=i[1];N=D1(D.sub(i[m-1])._perp()._unit(),S.sub(D)._perp()._unit())}for(let D=0;D<m;D++){const S=D===m-1?0:D+1,V=i[D],I=i[S],O=i[S===m-1?0:S+1],M=I.sub(V)._perp()._unit(),B=D1(M,O.sub(I)._perp()._unit()),X=N,ee=B;if(M1(V,I,u)||y&&ng(V,u)&&ng(I,u)){N=B;continue}const ue=b.vertexLength;rg(this.vertexArray,V,I,1,1,X),rg(this.vertexArray,V,I,1,0,X),rg(this.vertexArray,V,I,0,1,ee),rg(this.vertexArray,V,I,0,0,ee),b.vertexLength+=4;const le=MP(V,I,M,f);for(const ne of le)this._segmentToGroundQuads[_].push({id:ue,region:ne}),this._segmentToRegionTriCounts[_][ne]+=2,b.primitiveLength+=2;N=B}}}prepareBorderSegments(){if(!this.hasData())return;const i=this._segments.get(),u=i.length;for(let f=0;f<u;f++)this._segmentToGroundQuads[f].sort((y,m)=>y.region-m.region);for(let f=0;f<u;f++){const y=this._segmentToGroundQuads[f],m=i[f],_=this._segmentToRegionTriCounts[f];_.reduce((N,D)=>N+D,0);let b=0;for(let N=0;N<=4;N++){const D=_[N];if(D!==0){let S=this.regionSegments[N];S||(S=this.regionSegments[N]=new Di);const V={vertexOffset:m.vertexOffset,primitiveOffset:m.primitiveOffset+b,vertexLength:m.vertexLength,primitiveLength:D};S.get().push(V)}b+=D}for(let N=0;N<y.length;N++){const D=y[N].id;this.indexArray.emplaceBack(D,D+1,D+3),this.indexArray.emplaceBack(D,D+3,D+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(i,u,f,y,m,_){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,i,u,f,y,m,_)}upload(i){this.hasData()&&(this.vertexBuffer=i.createVertexBuffer(this.vertexArray,EP.members),this.indexBuffer=i.createIndexBuffer(this.indexArray))}uploadPaintProperties(i){this.hasData()&&this.programConfigurations.upload(i)}update(i,u,f,y,m,_,b){this.hasData()&&this.programConfigurations.updatePaintArrays(i,u,f,y,m,_,b)}updateHiddenByLandmark(i){if(!this.hasData())return;const u=i.groundVertexCount+i.groundVertexArrayOffset;if(i.groundVertexCount===0)return;const f=i.flags&yp?1:0;for(let y=i.groundVertexArrayOffset;y<u;++y)this.hiddenByLandmarkVertexArray.emplace(y,f);this._needsHiddenByLandmarkUpdate=!0}uploadHiddenByLandmark(i){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=i.createVertexBuffer(this.hiddenByLandmarkVertexArray,x1.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let i=0;i<=4;i++){const u=this.regionSegments[i];u&&u.destroy()}}}}class a_{constructor(i){this.zoom=i.zoom,this.canonical=i.canonical,this.overscaling=i.overscaling,this.layers=i.layers,this.pixelRatio=i.pixelRatio,this.layerIds=this.layers.map(u=>u.fqid),this.index=i.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=i.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new Ps,this.footprintVertices=new Eu,this.footprintSegments=[],this.layoutVertexArray=new Nu,this.centroidVertexArray=new sp,this.wallVertexArray=new oA,this.indexArray=new Ps,this.programConfigurations=new Rh(i.layers,{zoom:i.zoom,lut:i.lut},u=>SA.includes(u)),this.segments=new Di,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.groundEffect=new yS(i),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[]}updateFootprints(i,u){}populate(i,u,f,y){this.features=[],this.hasPattern=vA("fill-extrusion",this.layers,this.pixelRatio,u),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.selfDEMTileTimestamp=Number.MAX_VALUE,this.borderDEMTileTimestamp=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],this.tileToMeter=g(f),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter,this.wallMode=this.layers[0].paint.get("fill-extrusion-line-width").constantOr(1)!==0;for(const{feature:m,id:_,index:b,sourceLayerIndex:N}of i){const D=this.layers[0]._featureFilter.needGeometry,S=W(m,D);if(!this.layers[0]._featureFilter.filter(new vn(this.zoom),S,f))continue;const V={id:_,sourceLayerIndex:N,index:b,geometry:D?S.geometry:$(m,f,y),properties:m.properties,type:m.type,patterns:{}},I=this.layoutVertexArray.length,O=um[V.type]==="Polygon";if(this.hasPattern)this.features.push(wA("fill-extrusion",this.layers,V,this.zoom,this.pixelRatio,u));else if(this.wallMode)for(const M of V.geometry)for(const B of V1(M,O))this.addFeature(V,[B],b,f,{},u.availableImages,y,u.brightness);else this.addFeature(V,V.geometry,b,f,{},u.availableImages,y,u.brightness);u.featureIndex.insert(m,V.geometry,b,N,this.index,I)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(i,u,f,y,m,_){for(const b of this.features){const N=um[b.type]==="Polygon",{geometry:D}=b;if(this.wallMode)for(const S of D)for(const V of V1(S,N))this.addFeature(b,[V],b.index,u,f,y,m,_);else this.addFeature(b,D,b.index,u,f,y,m,_)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles()}update(i,u,f,y,m,_,b){this.programConfigurations.updatePaintArrays(i,u,m,f,y,_,b),this.groundEffect.update(i,u,m,f,y,_,b)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,zP),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.wallVertexBuffer=i.createVertexBuffer(this.wallVertexArray,b1.members),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=i.createVertexBuffer(this.layoutVertexExtArray,VP.members,!0)),this.groundEffect.upload(i)),this.groundEffect.uploadPaintProperties(i),this.programConfigurations.upload(i),this.uploaded=!0}uploadCentroid(i){this.groundEffect.uploadHiddenByLandmark(i),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,NP.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,u,f,y,m,_,b,N){const D=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(i,{})/this.tileToMeter,S=[new It(0,0),new It(Va,Va)],V=b.projection,I=V.name==="globe",O=this.wallMode||um[i.type]==="Polygon",M=new mS;M.centroidDataIndex=this.centroidData.length;const B=new O1,X=this.layers[0].paint.get("fill-extrusion-base").evaluate(i,{},y)<=0,ee=this.layers[0].paint.get("fill-extrusion-height").evaluate(i,{},y);let ue;if(B.height=ee,B.vertexArrayOffset=this.layoutVertexArray.length,B.groundVertexArrayOffset=this.groundEffect.vertexArray.length,I&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new rp),this.wallMode){if(I)return void en("Non zero fill-extrusion-line-width is not yet supported on globe.");if(u.length!==1)return;ue=function(qe){const mt=qe[0].x===qe[qe.length-1].x&&qe[0].y===qe[qe.length-1].y;(function(Oa){let va=0;const Ar=Oa.length;for(let $a=0;$a<Ar;$a++)va+=(Oa[($a+1)%Ar].x-Oa[$a].x)*(Oa[($a+1)%Ar].y+Oa[$a].y);return va>=0})(qe)||(qe=qe.reverse());const At={geometry:[],joinNormals:[],indices:[]},xt=[],St=[],Ot=[];let Nt=qe.length;for(;Nt>=2&&qe[Nt-1].equals(qe[Nt-2]);)Nt--;if(Nt<(mt?3:2))return At;let kt,Mt,Zt,ga,ma,Ya=0;for(;Ya<Nt-1&&qe[Ya].equals(qe[Ya+1]);)Ya++;mt&&(kt=qe[Nt-2],ma=qe[Ya].sub(kt)._unit()._perp());for(let Oa=Ya;Oa<Nt;Oa++){if(Zt=Oa===Nt-1?mt?qe[Ya+1]:void 0:qe[Oa+1],Zt&&qe[Oa].equals(Zt))continue;ma&&(ga=ma),kt&&(Mt=kt),kt=qe[Oa],ma=Zt?Zt.sub(kt)._unit()._perp():ga,ga=ga||ma;let va=ga.add(ma);va.x===0&&va.y===0||va._unit();const Ar=va.x*ma.x+va.y*ma.y,$a=Ar!==0?1/Ar:1/0,lr=ga.x*ma.y-ga.y*ma.x>0;let Dr="miter";const Jr=2;Dr==="miter"&&$a>Jr&&(Dr="bevel"),Dr==="bevel"&&($a>100&&(Dr="flipbevel"),$a<Jr&&(Dr="miter"));const kr=(dn,Xr,wn,Kn)=>{const Ei=new It(dn.x,dn.y),Lr=new It(dn.x,dn.y);Ei.x+=Xr.x*Kn,Ei.y+=Xr.y*Kn,Lr.x-=Xr.x*Math.max(wn,1),Lr.y-=Xr.y*Math.max(wn,1),Ot.push(Xr),xt.push(Ei),St.push(Lr)};if(Dr==="miter")va._mult($a),kr(kt,va,0,0);else if(Dr==="flipbevel")va=ma.mult(-1),kr(kt,va,0,0),kr(kt,va.mult(-1),0,0);else{const dn=-Math.sqrt($a*$a-1),Xr=lr?dn:0,wn=lr?0:dn;Mt&&kr(kt,ga,Xr,wn),Zt&&kr(kt,ma,Xr,wn)}}At.geometry=[...xt,...St.reverse(),xt[0]],At.joinNormals=[...Ot,...Ot.reverse(),Ot[Ot.length-1]];const Pa=At.geometry.length-1;for(let Oa=0;Oa<Pa/2;Oa++)if(Oa+1<Pa/2){let va=Oa,Ar=Oa+1,$a=Pa-1-Oa,lr=Pa-2-Oa;va=va===0?Pa-1:va-1,Ar=Ar===0?Pa-1:Ar-1,$a=$a===0?Pa-1:$a-1,lr=lr===0?Pa-1:lr-1,At.indices.push($a),At.indices.push(Ar),At.indices.push(va),At.indices.push($a),At.indices.push(lr),At.indices.push(Ar)}return At}(u[0]),u=[ue.geometry]}const le=(qe,mt)=>qe<(mt.length-1)/2||qe===mt.length-1,ne=this.wallMode?[u]:_A(u,500);for(let qe=ne.length-1;qe>=0;qe--){const mt=ne[qe];(mt.length===0||(pe=mt[0]).every(Xe=>Xe.x<=0)||pe.every(Xe=>Xe.x>=Va)||pe.every(Xe=>Xe.y<=0)||pe.every(Xe=>Xe.y>=Va))&&ne.splice(qe,1)}var pe;let we;if(I)we=F1(ne,S,y);else{we=[];for(const qe of ne)we.push({polygon:qe,bounds:S})}const Pe=O?this.edgeRadius:0,Ye=Pe>0&&this.zoom<17,je=(qe,mt)=>{if(qe.length===0)return!1;const Xe=qe[qe.length-1];return mt.x===Xe.x&&mt.y===Xe.y};for(const{polygon:qe,bounds:mt}of we){let Xe=0,At=0;for(const Nt of qe)O&&!Nt[0].equals(Nt[Nt.length-1])&&Nt.push(Nt[0]),At+=O?Nt.length-1:Nt.length;const xt=this.segments.prepareSegment((O?5:4)*At,this.layoutVertexArray,this.indexArray);B.footprintSegIdx<0&&(B.footprintSegIdx=this.footprintSegments.length),B.polygonSegIdx<0&&(B.polygonSegIdx=this.polygonSegments.length);const St={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},Ot=new z1;if(Ot.vertexOffset=this.footprintVertices.length,Ot.indexOffset=3*this.footprintIndices.length,Ot.ringIndices=[],O){const Nt=[],kt=[];Xe=xt.vertexLength;for(let Zt=0;Zt<qe.length;Zt++){const ga=qe[Zt];ga.length&&Zt!==0&&kt.push(Nt.length/2);const ma=[];let Ya,Pa;Ya=ga[1].sub(ga[0])._perp()._unit(),Ot.ringIndices.push(ga.length-1);for(let Oa=1;Oa<ga.length;Oa++){const va=ga[Oa],Ar=ga[Oa===ga.length-1?1:Oa+1],$a=va.clone();if(Pe){Pa=Ar.sub(va)._perp()._unit();const lr=Ya.add(Pa)._unit(),Dr=Pe*Math.min(4,1/(Ya.x*lr.x+Ya.y*lr.y));$a.x+=Dr*lr.x,$a.y+=Dr*lr.y,$a.x=Math.round($a.x),$a.y=Math.round($a.y),Ya=Pa}if(!X||Pe!==0&&!Ye||je(ma,$a)||ma.push($a),cm(this.layoutVertexArray,$a.x,$a.y,0,0,1,1,0),this.wallMode){const lr=le(Oa,ga);ny(this.wallVertexArray,ue.joinNormals[Oa],!lr)}xt.vertexLength++,this.footprintVertices.emplaceBack(va.x,va.y),Nt.push(va.x,va.y),I&&dm(this.layoutVertexExtArray,V.projectTilePoint($a.x,$a.y,y),V.upVector(y,$a.x,$a.y))}X&&(Pe===0||Ye)&&(ma.length!==0&&je(ma,ma[0])&&ma.pop(),this.groundEffect.addData(ma,mt,D))}const Mt=this.wallMode?ue.indices:yA(Nt,kt);for(let Zt=0;Zt<Mt.length;Zt+=3)this.footprintIndices.emplaceBack(Ot.vertexOffset+Mt[Zt+0],Ot.vertexOffset+Mt[Zt+1],Ot.vertexOffset+Mt[Zt+2]),this.indexArray.emplaceBack(Xe+Mt[Zt],Xe+Mt[Zt+2],Xe+Mt[Zt+1]),xt.primitiveLength++;Ot.indexCount+=Mt.length,Ot.vertexCount+=this.footprintVertices.length-Ot.vertexOffset}for(let Nt=0;Nt<qe.length;Nt++){const kt=qe[Nt];M.startRing(B,kt[0]);let Mt=kt.length>4&&gS(kt[kt.length-2],kt[0],kt[1]),Zt=Pe?r_(kt[kt.length-2],kt[0],kt[1],Pe):0;const ga=[];let ma,Ya,Pa;Ya=kt[1].sub(kt[0])._perp()._unit();let Oa=!0;for(let va=1,Ar=0;va<kt.length;va++){let $a=kt[va-1],lr=kt[va];const Dr=kt[va===kt.length-1?1:va+1];if(M.appendEdge(B,lr,$a),M1(lr,$a,mt)){Pe&&(Ya=Dr.sub(lr)._perp()._unit(),Oa=!Oa);continue}const Jr=lr.sub($a)._perp(),kr=Jr.x/(Math.abs(Jr.x)+Math.abs(Jr.y)),dn=Jr.y>0?1:0,Xr=$a.dist(lr);if(Ar+Xr>32768&&(Ar=0),Pe){Pa=Dr.sub(lr)._perp()._unit();let Lr=n_($a,lr,Dr,bA(Ya,Pa),Pe);isNaN(Lr)&&(Lr=0);const En=lr.sub($a)._unit();$a=$a.add(En.mult(Zt))._round(),lr=lr.add(En.mult(-Lr))._round(),Zt=Lr,Ya=Pa,X&&this.zoom>=17&&(je(ga,$a)||ga.push($a),je(ga,lr)||ga.push(lr))}const wn=xt.vertexLength,Kn=kt.length>4&&gS($a,lr,Dr);let Ei=I1(Ar,Mt,Oa);if(cm(this.layoutVertexArray,$a.x,$a.y,kr,dn,0,0,Ei),cm(this.layoutVertexArray,$a.x,$a.y,kr,dn,0,1,Ei),this.wallMode){const Lr=le(va-1,kt),En=ue.joinNormals[va-1];ny(this.wallVertexArray,En,Lr),ny(this.wallVertexArray,En,Lr)}if(Ar+=Xr,Ei=I1(Ar,Kn,!Oa),Mt=Kn,cm(this.layoutVertexArray,lr.x,lr.y,kr,dn,0,0,Ei),cm(this.layoutVertexArray,lr.x,lr.y,kr,dn,0,1,Ei),this.wallMode){const Lr=le(va,kt),En=ue.joinNormals[va];ny(this.wallVertexArray,En,Lr),ny(this.wallVertexArray,En,Lr)}if(xt.vertexLength+=4,this.indexArray.emplaceBack(wn+0,wn+1,wn+2),this.indexArray.emplaceBack(wn+1,wn+3,wn+2),xt.primitiveLength+=2,Pe){const Lr=Xe+(va===1?kt.length-2:va-2),En=va===1?Xe:Lr+1;if(this.indexArray.emplaceBack(wn+1,Lr,wn+3),this.indexArray.emplaceBack(Lr,En,wn+3),xt.primitiveLength+=2,ma===void 0&&(ma=wn),!M1(Dr,kt[va],mt)){const Yi=va===kt.length-1?ma:xt.vertexLength;this.indexArray.emplaceBack(wn+2,wn+3,Yi),this.indexArray.emplaceBack(wn+3,Yi+1,Yi),this.indexArray.emplaceBack(wn+3,En,Yi+1),xt.primitiveLength+=3}Oa=!Oa}if(I){const Lr=this.layoutVertexExtArray,En=V.projectTilePoint($a.x,$a.y,y),Yi=V.projectTilePoint(lr.x,lr.y,y),ls=V.upVector(y,$a.x,$a.y),ys=V.upVector(y,lr.x,lr.y);dm(Lr,En,ls),dm(Lr,En,ls),dm(Lr,Yi,ys),dm(Lr,Yi,ys)}}O&&(Xe+=kt.length-1),X&&Pe&&this.zoom>=17&&(ga.length!==0&&je(ga,ga[0])&&ga.pop(),this.groundEffect.addData(ga,mt,D,Pe>0))}this.footprintSegments.push(Ot),St.triangleCount=this.indexArray.length-St.triangleArrayOffset,this.polygonSegments.push(St),++B.footprintSegLen,++B.polygonSegLen}if(B.vertexCount=this.layoutVertexArray.length-B.vertexArrayOffset,B.groundVertexCount=this.groundEffect.vertexArray.length-B.groundVertexArrayOffset,B.vertexCount!==0){if(B.centroidXY=M.borders?ag:this.encodeCentroid(M,B),this.centroidData.push(B),M.borders){this.featuresOnBorder.push(M);const qe=this.featuresOnBorder.length-1;for(let mt=0;mt<M.borders.length;mt++)M.borders[mt][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[mt].push(qe)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,f,m,_,y,N),this.groundEffect.addPaintPropertiesData(i,f,m,_,y,N),this.maxHeight=Math.max(this.maxHeight,ee)}}sortBorders(){for(let i=0;i<this.borderFeatureIndices.length;i++)this.borderFeatureIndices[i].sort((u,f)=>this.featuresOnBorder[u].borders[i][0]-this.featuresOnBorder[f].borders[i][0])}splitToSubtiles(){const i=[];for(let b=0;b<this.centroidData.length;b++){const N=this.centroidData[b],D=+(N.min.y+N.max.y>Va),S=2*D+(+(N.min.x+N.max.x>Va)^D);for(let V=0;V<N.polygonSegLen;V++){const I=N.polygonSegIdx+V;i.push({centroidIdx:b,subtile:S,polygonSegmentIdx:I,triangleSegmentIdx:this.polygonSegments[I].triangleSegIdx})}}const u=new Ps;i.sort((b,N)=>b.triangleSegmentIdx===N.triangleSegmentIdx?b.subtile-N.subtile:b.triangleSegmentIdx-N.triangleSegmentIdx);let f=0,y=0,m=0;for(const b of i){if(b.triangleSegmentIdx!==f)break;m++}const _=i.length;for(;y!==i.length;){f=i[y].triangleSegmentIdx;let b=0,N=y,D=y;for(let S=N;S<m&&i[S].subtile===b;S++)D++;for(;N!==m;){const S=i[N];b=S.subtile;const V=this.centroidData[S.centroidIdx].min.clone(),I=this.centroidData[S.centroidIdx].max.clone(),O={vertexOffset:this.segments.segments[f].vertexOffset,primitiveOffset:u.length,vertexLength:this.segments.segments[f].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let M=N;M<D;M++){const B=i[M],X=this.polygonSegments[B.polygonSegmentIdx],ee=this.centroidData[B.centroidIdx].min,ue=this.centroidData[B.centroidIdx].max,le=this.indexArray.uint16;for(let ne=X.triangleArrayOffset;ne<X.triangleArrayOffset+X.triangleCount;ne++)u.emplaceBack(le[3*ne],le[3*ne+1],le[3*ne+2]);O.primitiveLength+=X.triangleCount,V.x=Math.min(V.x,ee.x),V.y=Math.min(V.y,ee.y),I.x=Math.max(I.x,ue.x),I.y=Math.max(I.y,ue.y)}O.primitiveLength>0&&this.triangleSubSegments.push({segment:O,min:V,max:I}),N=D;for(let M=N;M<m&&i[M].subtile===i[N].subtile;M++)D++}y=m;for(let S=y;S<_&&i[S].triangleSegmentIdx===i[y].triangleSegmentIdx;S++)m++}u._trim(),this.indexArray=u}getVisibleSegments(i,u,f){const y=new Di;if(this.wallMode){for(const B of this.triangleSubSegments)y.segments.push(B.segment);return y}let m=0,_=0;const b=1<<i.canonical.z;if(u){const B=u.getMinMaxForTile(i);B&&(m=B.min,_=B.max)}_+=this.maxHeight;const N=i.toUnwrapped();let D;const S=[N.canonical.x/b+N.wrap,N.canonical.y/b],V=[(N.canonical.x+1)/b+N.wrap,(N.canonical.y+1)/b],I=(B,X,ee)=>[B[0]*(1-ee[0])+X[0]*ee[0],B[1]*(1-ee[1])+X[1]*ee[1]],O=[],M=[];for(const B of this.triangleSubSegments){O[0]=B.min.x/Va,O[1]=B.min.y/Va,M[0]=B.max.x/Va,M[1]=B.max.y/Va;const X=I(S,V,O),ee=I(S,V,M);if(new tr([X[0],X[1],m],[ee[0],ee[1],_]).intersectsPrecise(f)===0){D&&(y.segments.push(D),D=void 0);continue}const ue=B.segment;D&&D.vertexOffset!==ue.vertexOffset&&(y.segments.push(D),D=void 0),D?(D.vertexLength+=ue.vertexLength,D.primitiveLength+=ue.primitiveLength):D={vertexOffset:ue.vertexOffset,primitiveLength:ue.primitiveLength,vertexLength:ue.vertexLength,primitiveOffset:ue.primitiveOffset,sortKey:void 0,vaos:{}}}return D&&y.segments.push(D),y}encodeCentroid(i,u){const f=i.centroid(),y=u.span(),m=Math.min(7,Math.round(y.x*this.tileToMeter/10)),_=Math.min(7,Math.round(y.y*this.tileToMeter/10));return new It(ka(f.x,1,Va-1)<<3|m,ka(f.y,1,Va-1)<<3|_)}encodeBorderCentroid(i){if(!i.borders)return new It(0,0);const u=i.borders,f=Number.MAX_VALUE;if(u[0][0]!==f||u[1][0]!==f){const y=u[0][0]!==f?0:1;return new It(6|(u[0][0]!==f?0:65528),(u[y][0]+u[y][1])/2<<3|6)}{const y=u[2][0]!==f?2:3;return new It((u[y][0]+u[y][1])/2<<3|6,6|(u[2][0]!==f?0:65528))}}showCentroid(i){const u=this.centroidData[i.centroidDataIndex];u.flags&=yp,u.centroidXY.x=0,u.centroidXY.y=0,this.writeCentroidToBuffer(u)}writeCentroidToBuffer(i){this.groundEffect.updateHiddenByLandmark(i);const u=i.vertexArrayOffset,f=i.vertexCount+i.vertexArrayOffset,y=i.flags&yp?ag:i.centroidXY,m=this.centroidVertexArray.geta_centroid_pos0(u);if(this.centroidVertexArray.geta_centroid_pos1(u)!==y.y||m!==y.x){for(let _=u;_<f;++_)this.centroidVertexArray.emplace(_,y.x,y.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const i of this.centroidData)this.writeCentroidToBuffer(i)}updateReplacement(i,u,f){if(u.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=u.updateTime;const y=u.getReplacementRegionsForTile(i.toUnwrapped());if(t_(this.activeReplacements,y))return;if(this.activeReplacements=y,this.centroidVertexArray.length===0)this.createCentroidsBuffer();else for(const _ of this.centroidData)_.flags&=2147483647;const m=[];for(const _ of this.activeReplacements){if(_.order<f)continue;const b=Math.max(1,Math.pow(2,_.footprintTileId.canonical.z-i.canonical.z));for(const N of this.centroidData)if(!(N.flags&yp||_.min.x>N.max.x||N.min.x>_.max.x||_.min.y>N.max.y||N.min.y>_.max.y))for(let D=0;D<N.footprintSegLen;D++){const S=this.footprintSegments[N.footprintSegIdx+D];if(m.length=0,AS(this.footprintVertices,S.vertexOffset,S.vertexCount,_.footprintTileId.canonical,i.canonical,m),cS(_.footprint,m,this.footprintIndices.uint16,S.indexOffset,S.indexCount,-S.vertexOffset,-b)){N.flags|=yp;break}}}for(const _ of this.centroidData)this.writeCentroidToBuffer(_);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(i,u,f){let y=!1;for(let m=0;m<f.footprintSegLen;m++){const _=this.footprintSegments[f.footprintSegIdx+m];let b=0;for(const N of _.ringIndices){for(let D=b,S=N+b-1;D<N+b;S=D++){const V=this.footprintVertices.int16[2*(D+_.vertexOffset)+0],I=this.footprintVertices.int16[2*(D+_.vertexOffset)+1],O=this.footprintVertices.int16[2*(S+_.vertexOffset)+1];I>u!=O>u&&i<(this.footprintVertices.int16[2*(S+_.vertexOffset)+0]-V)*(u-I)/(O-I)+V&&(y=!y)}b=N}}return y}getHeightAtTileCoord(i,u){let f=Number.NEGATIVE_INFINITY,y=!0;const m=4*(i+Va)*Va+(u+Va);if(this.partLookup.hasOwnProperty(m)){const _=this.partLookup[m];return _?{height:_.height,hidden:!!(_.flags&yp)}:void 0}for(const _ of this.centroidData)i>_.max.x||_.min.x>i||u>_.max.y||_.min.y>u||this.footprintContainsPoint(i,u,_)&&_&&_.height>f&&(f=_.height,this.partLookup[m]=_,y=!!(_.flags&yp));if(f!==Number.NEGATIVE_INFINITY)return{height:f,hidden:y};this.partLookup[m]=void 0}}function bA(d,i){const u=d.add(i)._unit();return d.x*u.x+d.y*u.y}function r_(d,i,u,f){const y=i.sub(d)._perp()._unit(),m=u.sub(i)._perp()._unit();return n_(d,i,u,bA(y,m),f)}function n_(d,i,u,f,y){const m=Math.sqrt(1-f*f);return Math.min(d.dist(i)/3,i.dist(u)/3,y*m/f)}function M1(d,i,u){return d.x<u[0].x&&i.x<u[0].x||d.x>u[1].x&&i.x>u[1].x||d.y<u[0].y&&i.y<u[0].y||d.y>u[1].y&&i.y>u[1].y}function ng(d,i){return d.x<i[0].x||d.x>i[1].x||d.y<i[0].y||d.y>i[1].y}function gS(d,i,u){if(d.x<0||d.x>=Va||i.x<0||i.x>=Va||u.x<0||u.x>=Va)return!1;const f=u.sub(i),y=f.perp(),m=d.sub(i);return(f.x*m.x+f.y*m.y)/Math.sqrt((f.x*f.x+f.y*f.y)*(m.x*m.x+m.y*m.y))>-.866&&y.x*m.x+y.y*m.y<0}function I1(d,i,u){const f=i?2|d:-3&d;return u?1|f:-2&f}function L1(){const d=Math.PI/32,i=Math.tan(d),u=ol;return u*Math.sqrt(1+2*i*i)-u}function F1(d,i,u){const f=1<<u.z,y=Ou(u.x/f),m=Ou((u.x+1)/f),_=Ri(u.y/f),b=Ri((u.y+1)/f);return function(N,D,S,V,I=0,O){const M=[];if(!N.length||!S||!V)return M;const B=(we,Pe)=>{for(const Ye of we)M.push({polygon:Ye,bounds:Pe})},X=Math.ceil(Math.log2(S)),ee=Math.ceil(Math.log2(V)),ue=X-ee,le=[];for(let we=0;we<Math.abs(ue);we++)le.push(ue>0?0:1);for(let we=0;we<Math.min(X,ee);we++)le.push(0),le.push(1);let ne=N;if(ne=TA(ne,D[0].y-I,D[1].y+I,1),ne=TA(ne,D[0].x-I,D[1].x+I,0),!ne.length)return M;const pe=[];for(le.length?pe.push({polygons:ne,bounds:D,depth:0}):B(ne,D);pe.length;){const we=pe.pop(),Pe=we.depth,Ye=le[Pe],je=we.bounds[0],qe=we.bounds[1],mt=Ye===0?je.x:je.y,Xe=Ye===0?qe.x:qe.y,At=O?O(Ye,mt,Xe):.5*(mt+Xe),xt=TA(we.polygons,mt-I,At+I,Ye),St=TA(we.polygons,At-I,Xe+I,Ye);if(xt.length){const Ot=[je,new It(Ye===0?At:qe.x,Ye===1?At:qe.y)];le.length>Pe+1?pe.push({polygons:xt,bounds:Ot,depth:Pe+1}):B(xt,Ot)}if(St.length){const Ot=[new It(Ye===0?At:je.x,Ye===1?At:je.y),qe];le.length>Pe+1?pe.push({polygons:St,bounds:Ot,depth:Pe+1}):B(St,Ot)}}return M}(d,i,Math.ceil((m-y)/11.25),Math.ceil((_-b)/11.25),1,(N,D,S)=>{if(N===0)return .5*(D+S);{const V=Ri((u.y+D/Va)/f);return(Pi(.5*(Ri((u.y+S/Va)/f)+V))*f-u.y)*Va}})}function AS(d,i,u,f,y,m){const _=Math.pow(2,f.z-y.z);for(let b=0;b<u;b++){let N=d.int16[2*(b+i)+0],D=d.int16[2*(b+i)+1];N=(N+y.x*Va)*_-f.x*Va,D=(D+y.y*Va)*_-f.y*Va,m.push(new It(N,D))}}let i_,U1;function hm(d,i){return d.x*i.x+d.y*i.y}function _S(d,i){if(d.length===1){let u=0;const f=i[u++];let y;for(;!y||f.equals(y);)if(y=i[u++],!y)return 1/0;for(;u<i.length;u++){const m=i[u],_=d[0],b=y.sub(f),N=m.sub(f),D=_.sub(f),S=hm(b,b),V=hm(b,N),I=hm(N,N),O=hm(D,b),M=hm(D,N),B=S*I-V*V,X=(I*O-V*M)/B,ee=(S*M-V*O)/B,ue=f.z*(1-X-ee)+y.z*X+m.z*ee;if(isFinite(ue))return ue}return 1/0}{let u=1/0;for(const f of i)u=Math.min(u,f.z);return u}}function vS(d,i,u,f,y,m,_,b){const N=_*y.getElevationAt(d,i,!0,!0),D=m[0]!==0,S=D?m[1]===0?_*(m[0]/7-450):_*function(V,I,O){const M=Math.floor(I[0]/8),B=Math.floor(I[1]/8),X=10*(I[0]-8*M),ee=10*(I[1]-8*B),ue=V.getElevationAt(M,B,!0,!0),le=V.getMeterToDEM(O),ne=Math.floor(.5*(X*le-1)),pe=Math.floor(.5*(ee*le-1)),we=V.tileCoordToPixel(M,B),Pe=2*ne+1,Ye=2*pe+1,je=function(St,Ot,Nt,kt,Mt){return[St.getElevationAtPixel(Ot,Nt,!0),St.getElevationAtPixel(Ot+Mt,Nt,!0),St.getElevationAtPixel(Ot,Nt+Mt,!0),St.getElevationAtPixel(Ot+kt,Nt+Mt,!0)]}(V,we.x-ne,we.y-pe,Pe,Ye),qe=Math.abs(je[0]-je[1]),mt=Math.abs(je[2]-je[3]),Xe=Math.abs(je[0]-je[2])+Math.abs(je[1]-je[3]),At=Math.min(.25,.5*le*(qe+mt)/Pe),xt=Math.min(.25,.5*le*Xe/Ye);return ue+Math.max(At*X,xt*ee)}(y,m,b):N;return{base:N+(u===0?-1:u),top:D?Math.max(S+f,N+u+2):N+f}}Pt(a_,"FillExtrusionBucket",{omit:["layers","features"]}),Pt(O1,"PartData"),Pt(z1,"FootprintSegment"),Pt(mS,"BorderCentroidData"),Pt(yS,"GroundEffect");const k1=xn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),B1=xn([{name:"a_z_offset_width",components:3,type:"Float32"}],4),{members:s_}=k1,G1=xn([{name:"a_packed",components:3,type:"Float32"}]),{members:wS}=G1,j1=xn([{name:"a_pattern_data",components:3,type:"Float32"}]),{members:fm}=j1;class gp{constructor(i,u){this.width=i,this.height=u,this.nextRow=0,this.image=new im({width:i,height:u}),this.positions={},this.uploaded=!1}getDash(i,u){const f=this.getKey(i,u);return this.positions[f]}trim(){const i=this.width,u=this.height=ca(this.nextRow);this.image.resize({width:i,height:u})}getKey(i,u){return i.join(",")+u}getDashRanges(i,u,f){const y=[];let m=i.length%2==1?-i[i.length-1]*f:0,_=i[0]*f,b=!0;y.push({left:m,right:_,isDash:b,zeroLength:i[0]===0});let N=i[0];for(let D=1;D<i.length;D++){b=!b;const S=i[D];m=N*f,N+=S,_=N*f,y.push({left:m,right:_,isDash:b,zeroLength:S===0})}return y}addRoundDash(i,u,f){const y=u/2;for(let m=-f;m<=f;m++){const _=this.width*(this.nextRow+f+m);let b=0,N=i[b];for(let D=0;D<this.width;D++){D/N.right>1&&(N=i[++b]);const S=Math.abs(D-N.left),V=Math.abs(D-N.right),I=Math.min(S,V);let O;const M=m/f*(y+1);if(N.isDash){const B=y-Math.abs(M);O=Math.sqrt(I*I+B*B)}else O=y-Math.sqrt(I*I+M*M);this.image.data[_+D]=Math.max(0,Math.min(255,O+128))}}}addRegularDash(i,u){for(let N=i.length-1;N>=0;--N){const D=i[N],S=i[N+1];D.zeroLength?i.splice(N,1):S&&S.isDash===D.isDash&&(S.left=D.left,i.splice(N,1))}const f=i[0],y=i[i.length-1];f.isDash===y.isDash&&(f.left=y.left-this.width,y.right=f.right+this.width);const m=this.width*this.nextRow;let _=0,b=i[_];for(let N=0;N<this.width;N++){N/b.right>1&&(b=i[++_]);const D=Math.abs(N-b.left),S=Math.abs(N-b.right),V=Math.min(D,S);this.image.data[m+N]=Math.max(0,Math.min(255,(b.isDash?V:-V)+u+128))}}addDash(i,u){const f=this.getKey(i,u);if(this.positions[f])return this.positions[f];const y=u==="round",m=y?7:0,_=2*m+1;if(this.nextRow+_>this.height)return en("LineAtlas out of space"),null;i.length===0&&i.push(1);let b=0;for(let S=0;S<i.length;S++)i[S]<0&&(en("Negative value is found in line dasharray, replacing values with 0"),i[S]=0),b+=i[S];if(b!==0){const S=this.width/b,V=this.getDashRanges(i,this.width,S);y?this.addRoundDash(V,S,m):this.addRegularDash(V,u==="square"?.5*S:0)}const N=this.nextRow+m;this.nextRow+=_;const D={tl:[N,m],br:[b,0]};return this.positions[f]=D,D}}Pt(gp,"LineAtlas");const pm=bh.VectorTileFeature.types,xA=Math.cos(Math.PI/180*37.5),PA=Math.cos(Math.PI/180*5);class If{constructor(i){this.evaluationGlobals={zoom:0,lineProgress:void 0},this.zoom=i.zoom,this.evaluationGlobals.zoom=this.zoom,this.overscaling=i.overscaling,this.pixelRatio=i.pixelRatio,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=i.index,this.projection=i.projection,this.hasPattern=!1,this.hasZOffset=!1,this.hasCrossSlope=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new Cf,this.layoutVertexArray2=new So,this.patternVertexArray=new So,this.indexArray=new Ps,this.programConfigurations=new Rh(i.layers,{zoom:i.zoom,lut:i.lut}),this.segments=new Di,this.maxLineLength=0,this.zOffsetVertexArray=new So,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.tessellationStep=i.tessellationStep?i.tessellationStep:Va/64}updateFootprints(i,u){}populate(i,u,f,y){this.hasPattern=vA("line",this.layers,this.pixelRatio,u);const m=this.layers[0].layout.get("line-sort-key");this.tileToMeter=g(f);const _=this.layers[0].layout.get("line-z-offset"),b=_.isConstant()&&!_.constantOr(0),N=this.layers[0].layout.get("line-elevation-reference");this.hasZOffset=N==="sea"||N==="ground"||!b&&N==="none",this.hasZOffset&&N==="none"&&en(`line-elevation-reference: ground is used for the layer ${this.layerIds[0]} because non-zero line-z-offset value was found.`);const D=this.layers[0].layout.get("line-cross-slope");this.hasCrossSlope=this.hasZOffset&&D!==void 0;const S=[];for(const{feature:M,id:B,index:X,sourceLayerIndex:ee}of i){const ue=this.layers[0]._featureFilter.needGeometry,le=W(M,ue);if(!this.layers[0]._featureFilter.filter(new vn(this.zoom),le,f))continue;const ne=m?m.evaluate(le,{},f):void 0,pe={id:B,properties:M.properties,type:M.type,sourceLayerIndex:ee,index:X,geometry:ue?le.geometry:$(M,f,y),patterns:{},sortKey:ne};S.push(pe)}m&&S.sort((M,B)=>M.sortKey-B.sortKey);const{lineAtlas:V,featureIndex:I}=u,O=this.addConstantDashes(V);for(const M of S){const{geometry:B,index:X,sourceLayerIndex:ee}=M;if(O&&this.addFeatureDashes(M,V),this.hasPattern){const ue=wA("line",this.layers,M,this.zoom,this.pixelRatio,u);this.patternFeatures.push(ue)}else this.addFeature(M,B,X,f,V.positions,u.availableImages,u.brightness);I.insert(i[X].feature,B,X,ee,this.index)}}addConstantDashes(i){let u=!1;for(const f of this.layers){const y=f.paint.get("line-dasharray").value,m=f.layout.get("line-cap").value;if(y.kind!=="constant"||m.kind!=="constant")u=!0;else{const _=m.value,b=y.value;if(!b)continue;i.addDash(b,_)}}return u}addFeatureDashes(i,u){const f=this.zoom;for(const y of this.layers){const m=y.paint.get("line-dasharray").value,_=y.layout.get("line-cap").value;if(m.kind==="constant"&&_.kind==="constant")continue;let b,N;if(m.kind==="constant"){if(b=m.value,!b)continue}else b=m.evaluate({zoom:f},i);N=_.kind==="constant"?_.value:_.evaluate({zoom:f},i),u.addDash(b,N),i.patterns[y.id]=u.getKey(b,N)}}update(i,u,f,y,m,_,b){this.programConfigurations.updatePaintArrays(i,u,m,f,y,_,b)}addFeatures(i,u,f,y,m,_){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,u,f,y,_)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,wS)),this.patternVertexArray.length!==0&&(this.patternVertexBuffer=i.createVertexBuffer(this.patternVertexArray,fm)),!this.zOffsetVertexBuffer&&this.zOffsetVertexArray.length>0&&(this.zOffsetVertexBuffer=i.createVertexBuffer(this.zOffsetVertexArray,B1.members,!0)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,s_),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&i.properties.hasOwnProperty("mapbox_clip_start")&&i.properties.hasOwnProperty("mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,u,f,y,m,_,b){const N=this.layers[0].layout,D=N.get("line-join").evaluate(i,{}),S=N.get("line-cap").evaluate(i,{}),V=N.get("line-miter-limit"),I=N.get("line-round-limit");this.lineClips=this.lineFeatureClips(i),this.lineFeature=i,this.zOffsetValue=N.get("line-z-offset").value;const O=this.layers[0].paint.get("line-width").value;O.kind!=="constant"&&O.isLineProgressConstant===!1&&(this.variableWidthValue=O);for(const M of u)this.addLine(M,i,y,D,S,V,I);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,f,m,_,y,b)}addLine(i,u,f,y,m,_,b){this.distance=0,this.prevDistance=0,this.scaledDistance=0,this.totalDistance=0,this.totalFeatureLength=0,this.lineSoFar=0,this.currentVertex=void 0;const N=y==="none";if(this.patternJoinNone=this.hasPattern&&N,this.segmentStart=0,this.segmentStartf32=0,this.segmentPoints=[],this.lineClips){this.lineClipsArray.push(this.lineClips);for(let le=0;le<i.length-1;le++)this.totalDistance+=i[le].dist(i[le+1]);this.totalFeatureLength=this.totalDistance/(this.lineClips.end-this.lineClips.start),this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const D=pm[u.type]==="Polygon";let S=i.length;for(;S>=2&&i[S-1].equals(i[S-2]);)S--;let V=0;for(;V<S-1&&i[V].equals(i[V+1]);)V++;if(S<(D?3:2))return;y==="bevel"&&(_=1.05);const I=this.segments.prepareSegment(10*S,this.layoutVertexArray,this.indexArray);let O,M,B,X,ee,ue;this.e1=this.e2=-1,D&&(O=i[S-2],ee=i[V].sub(O)._unit()._perp());for(let le=V;le<S;le++){if(B=le===S-1?D?i[V+1]:void 0:i[le+1],B&&i[le].equals(B))continue;ee&&(X=ee),O&&(M=O),O=i[le],ue=this.evaluateLineProgressFeatures(M?M.dist(O):0),ee=B?B.sub(O)._unit()._perp():X,X=X||ee;const ne=M&&B;let pe=ne?y:D||N?"butt":m;const we=X.x*ee.x+X.y*ee.y;if(N){const xt=function(St){if(St.patternJoinNone){const Ot=St.segmentPoints.length/2,Nt=St.lineSoFar-St.segmentStart;for(let kt=0;kt<Ot;++kt){const Mt=St.segmentPoints[2*kt+1],Zt=Math.round(St.segmentPoints[2*kt])+.5+.25*Mt;St.patternVertexArray.emplaceBack(Zt,Nt,St.segmentStart),St.patternVertexArray.emplaceBack(Zt,Nt,St.segmentStart)}St.segmentPoints.length=0}St.e1=St.e2=-1};if(ne&&we<PA){this.updateDistance(M,O),this.addCurrentVertex(O,X,1,1,I,ue),xt(this),this.addCurrentVertex(O,ee,-1,-1,I,ue);continue}if(M){if(!B){this.updateDistance(M,O),this.addCurrentVertex(O,X,1,1,I,ue),xt(this);continue}pe="miter"}}let Pe=X.add(ee);Pe.x===0&&Pe.y===0||Pe._unit();const Ye=Pe.x*ee.x+Pe.y*ee.y,je=Ye!==0?1/Ye:1/0,qe=2*Math.sqrt(2-2*Ye),mt=Ye<xA&&M&&B,Xe=X.x*ee.y-X.y*ee.x>0,At=this.overscaling<=16?15*Va/(512*this.overscaling):0;if(ne&&pe==="round"){if(je<b)pe="miter";else if(je<=2){const xt=Z1(O,-10,Va+10);pe=this.hasZOffset&&(xt||this.hasCrossSlope)?"miter":"fakeround"}}if(pe==="miter"&&je>_&&(pe="bevel"),pe==="bevel"&&(je>2&&(pe="flipbevel"),je<_&&(pe="miter")),M&&!(pe==="miter"&&mt)&&this.updateDistance(M,O),pe==="miter")if(mt){const xt=O.dist(M);if(xt>2*At){const Ot=O.sub(O.sub(M)._mult(At/xt)._round());this.updateDistance(M,Ot),this.addCurrentVertex(Ot,X,0,0,I,ue),M=Ot}this.updateDistance(M,O),Pe._mult(je),this.addCurrentVertex(O,Pe,0,0,I,ue);const St=O.dist(B);if(St>2*At){const Ot=O.add(B.sub(O)._mult(At/St)._round());this.updateDistance(O,Ot),this.addCurrentVertex(Ot,ee,0,0,I,ue),O=Ot}}else Pe._mult(je),this.addCurrentVertex(O,Pe,0,0,I,ue);else if(pe==="flipbevel"){if(je>100)Pe=ee.mult(-1);else{const xt=je*X.add(ee).mag()/X.sub(ee).mag();Pe._perp()._mult(xt*(Xe?-1:1))}this.addCurrentVertex(O,Pe,0,0,I,ue),this.addCurrentVertex(O,Pe.mult(-1),0,0,I,ue)}else if(pe==="bevel"||pe==="fakeround"){ue!=null&&M&&this.addCurrentVertex(O,X,-1,-1,I,ue);const xt=O.dist(M)<=2*At&&pe!=="bevel",St=Pe.mult(Xe?1:-1);St._mult(je);const Ot=ee.mult(Xe?-1:1),Nt=X.mult(Xe?-1:1),kt=this.evaluateLineProgressFeatures(this.distance);if(ue==null&&(this.addHalfVertex(O,St.x,St.y,!1,!Xe,0,I,kt),xt||this.addHalfVertex(O,St.x+2*Nt.x,St.y+2*Nt.y,!1,Xe,0,I,kt)),pe==="fakeround"){const Mt=Math.round(180*qe/Math.PI/20);this.addHalfVertex(O,Nt.x,Nt.y,!1,Xe,0,I,kt);for(let Zt=0;Zt<Mt;Zt++){let ga=Zt/Mt;if(ga!==.5){const Ya=ga-.5;ga+=ga*Ya*(ga-1)*((1.0904+we*(we*(3.55645-1.43519*we)-3.2452))*Ya*Ya+(.848013+we*(.215638*we-1.06021)))}const ma=Ot.sub(Nt)._mult(ga)._add(Nt)._unit();this.addHalfVertex(O,ma.x,ma.y,!1,Xe,0,I,kt)}this.addHalfVertex(O,Ot.x,Ot.y,!1,Xe,0,I,kt)}xt||ue!=null||this.addHalfVertex(O,St.x+2*Ot.x,St.y+2*Ot.y,!1,Xe,0,I,kt),ue!=null&&B&&this.addCurrentVertex(O,ee,1,1,I,ue)}else pe==="butt"?this.addCurrentVertex(O,Pe,0,0,I,ue):pe==="square"?(M||this.addCurrentVertex(O,Pe,-1,-1,I,ue),this.addCurrentVertex(O,Pe,0,0,I,ue),M&&this.addCurrentVertex(O,Pe,1,1,I,ue)):pe==="round"&&(M&&(this.addCurrentVertex(O,X,0,0,I,ue),this.addCurrentVertex(O,X,1,1,I,ue,!0)),B&&(this.addCurrentVertex(O,ee,-1,-1,I,ue,!0),this.addCurrentVertex(O,ee,0,0,I,ue)))}}addVerticesTo(i,u,f,y,m,_,b,N,D,S){const V=(u.w-i.w)/this.tessellationStep|0;let I=0;const O=this.scaledDistance;if(V>1){this.lineSoFar=i.w;const B=(u.x-i.x)/V,X=(u.y-i.y)/V,ee=(u.z-i.z)/V,ue=(u.w-i.w)/V;for(let le=1;le<V;++le){i.x+=B,i.y+=X,i.z+=ee,this.lineSoFar+=ue,I+=ue;const ne=this.evaluateLineProgressFeatures(this.prevDistance+I);this.scaledDistance=(this.prevDistance+I)/this.totalDistance,this.addHalfVertex(i,f,y,S,!1,b,D,ne),this.addHalfVertex(i,m,_,S,!0,-N,D,ne)}}this.lineSoFar=u.w,this.scaledDistance=O;const M=this.evaluateLineProgressFeatures(this.distance);this.addHalfVertex(u,f,y,S,!1,b,D,M),this.addHalfVertex(u,m,_,S,!0,-N,D,M)}evaluateLineProgressFeatures(i){if(!this.variableWidthValue&&!this.hasZOffset)return null;this.evaluationGlobals.lineProgress=0,this.lineClips?this.evaluationGlobals.lineProgress=Math.min(1,(this.totalFeatureLength*this.lineClips.start+i)/this.totalFeatureLength):en(`line-progress evaluation for ${this.layerIds[0]} requires enabling 'lineMetrics' for the source.`);let u=0;return this.variableWidthValue&&this.variableWidthValue.kind!=="constant"&&(u=this.variableWidthValue.evaluate(this.evaluationGlobals,this.lineFeature)||0),this.hasZOffset?this.zOffsetValue.kind==="constant"?{zOffset:this.zOffsetValue.value,variableWidth:u}:{zOffset:this.zOffsetValue.evaluate(this.evaluationGlobals,this.lineFeature)||0,variableWidth:u}:{zOffset:0,variableWidth:u}}addCurrentVertex(i,u,f,y,m,_,b=!1){const N=u.x+u.y*f,D=u.y-u.x*f,S=u.y*y-u.x,V=-u.y-u.x*y;if(_!=null){const I=this.hasZOffset,O=-10,M=Va+10,B=_.zOffset,X=new P1(i.x,i.y,B,this.lineSoFar),ee=!!I&&Z1(i,O,M),ue=this.lineSoFar,le=this.distance;if(this.currentVertex)if(ee){const ne=this.currentVertexIsOutside,pe=this.currentVertex,we=new P1(i.x,i.y,B,this.lineSoFar);if(E1(pe,we,O,M),!Z1(we,O,M)){if(ne){this.e1=this.e2=-1,this.distance-=pe.dist(X),this.lineSoFar=pe.w;const Pe=this.evaluateLineProgressFeatures(pe.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(pe,N,D,b,!1,f,m,Pe),this.addHalfVertex(pe,S,V,b,!0,-y,m,Pe),this.prevDistance=this.distance}this.distance=this.prevDistance+pe.dist(we),this.scaledDistance=this.distance/this.totalDistance,this.addVerticesTo(pe,we,N,D,S,V,f,y,m,b),this.distance=le,this.scaledDistance=this.distance/this.totalDistance}}else{const ne=this.currentVertex;if(this.currentVertexIsOutside){E1(ne,X,O,M),this.e1=this.e2=-1,this.distance-=ne.dist(X),this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=ne.w;const pe=this.evaluateLineProgressFeatures(ne.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(ne,N,D,b,!1,f,m,pe),this.addHalfVertex(ne,S,V,b,!0,-y,m,pe),this.prevDistance=this.distance,this.distance=le,this.scaledDistance=this.distance/this.totalDistance}this.addVerticesTo(ne,X,N,D,S,V,f,y,m,b)}else ee||(this.addHalfVertex(i,N,D,b,!1,f,m,_),this.addHalfVertex(i,S,V,b,!0,-y,m,_));this.currentVertex=X,this.currentVertexIsOutside=ee,this.lineSoFar=ue}else this.addHalfVertex(i,N,D,b,!1,f,m,_),this.addHalfVertex(i,S,V,b,!0,-y,m,_)}addHalfVertex({x:i,y:u},f,y,m,_,b,N,D){if(this.patternJoinNone&&(this.segmentPoints.length===0&&(this.segmentStart=this.lineSoFar,this.segmentStartf32=Math.fround(this.lineSoFar)),_||this.segmentPoints.push(this.lineSoFar-this.segmentStart,b)),this.layoutVertexArray.emplaceBack((i<<1)+(m?1:0),(u<<1)+(_?1:0),Math.round(63*f)+128,Math.round(63*y)+128,1+(b===0?0:b<0?-1:1),0,this.lineSoFar-this.segmentStartf32),this.lineClips){const V=fr(this.lineClips.start,this.lineClips.end,this.scaledDistance);this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,V)}const S=N.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,S),N.primitiveLength++),_?this.e2=S:this.e1=S,D!=null&&this.zOffsetVertexArray.emplaceBack(D.zOffset,D.variableWidth,D.variableWidth)}updateScaledDistance(){this.lineClips?(this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=this.totalFeatureLength*this.lineClips.start+this.distance):this.lineSoFar=this.distance}updateDistance(i,u){this.prevDistance=this.distance,this.distance+=i.dist(u),this.updateScaledDistance()}}function Z1(d,i,u){return d.x<i||d.x>u||d.y<i||d.y>u}let q1,ig;function RS(d,i,u){return i*(Va/(d.tileSize*Math.pow(2,u-d.tileID.overscaledZ)))}Pt(If,"LineBucket",{omit:["layers","patternFeatures","currentVertex","currentVertexIsOutside"]});const H1=(d,i,u)=>(1-u)*d+u*i;function EA(d,i){return 1/RS(d,1,i.tileZoom)}function $1(d,i,u,f){return d.translatePosMatrix(f||i.tileID.projMatrix,i,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const TS=d=>{const i=[];NA(d)&&i.push("RENDER_LINE_DASH"),d.paint.get("line-gradient")&&i.push("RENDER_LINE_GRADIENT");const u=d.paint.get("line-trim-offset");u[0]===0&&u[1]===0||i.push("RENDER_LINE_TRIM_OFFSET"),d.paint.get("line-border-width").constantOr(1)!==0&&i.push("RENDER_LINE_BORDER");const f=d.layout.get("line-join").constantOr("miter")==="none",y=!!d.paint.get("line-pattern").constantOr(1);return f&&y&&i.push("LINE_JOIN_NONE"),i};function NA(d){const i=d.paint.get("line-dasharray").value;return i.value||i.kind!=="constant"}let sg;const K1=()=>sg||(sg={layout:q1||(q1=new Oi({"line-cap":new Ua(jt.layout_line["line-cap"]),"line-join":new Ua(jt.layout_line["line-join"]),"line-miter-limit":new ba(jt.layout_line["line-miter-limit"]),"line-round-limit":new ba(jt.layout_line["line-round-limit"]),"line-sort-key":new Ua(jt.layout_line["line-sort-key"]),"line-z-offset":new Ua(jt.layout_line["line-z-offset"]),"line-elevation-reference":new ba(jt.layout_line["line-elevation-reference"]),"line-cross-slope":new ba(jt.layout_line["line-cross-slope"]),visibility:new ba(jt.layout_line.visibility),"line-width-unit":new ba(jt.layout_line["line-width-unit"])})),paint:ig||(ig=new Oi({"line-opacity":new Ua(jt.paint_line["line-opacity"]),"line-color":new Ua(jt.paint_line["line-color"]),"line-translate":new ba(jt.paint_line["line-translate"]),"line-translate-anchor":new ba(jt.paint_line["line-translate-anchor"]),"line-width":new Ua(jt.paint_line["line-width"]),"line-gap-width":new Ua(jt.paint_line["line-gap-width"]),"line-offset":new Ua(jt.paint_line["line-offset"]),"line-blur":new Ua(jt.paint_line["line-blur"]),"line-dasharray":new Ua(jt.paint_line["line-dasharray"]),"line-pattern":new Ua(jt.paint_line["line-pattern"]),"line-gradient":new Ki(jt.paint_line["line-gradient"]),"line-trim-offset":new ba(jt.paint_line["line-trim-offset"]),"line-trim-fade-range":new ba(jt.paint_line["line-trim-fade-range"]),"line-trim-color":new ba(jt.paint_line["line-trim-color"]),"line-emissive-strength":new ba(jt.paint_line["line-emissive-strength"]),"line-border-width":new Ua(jt.paint_line["line-border-width"]),"line-border-color":new Ua(jt.paint_line["line-border-color"]),"line-occlusion-opacity":new ba(jt.paint_line["line-occlusion-opacity"]),"line-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"line-gradient-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"line-trim-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"line-border-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},sg);class VA extends Ua{possiblyEvaluate(i,u){return u=new vn(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,transition:u.transition}),super.possiblyEvaluate(i,u)}evaluate(i,u,f,y){return u=Rn({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(i,u,f,y)}}let iy;function zA(d,i){return i>0?i+2*d:d}const SS=xn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),IP=xn([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),o_=xn([{name:"a_projected_pos",components:4,type:"Float32"}],4);xn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const p=xn([{name:"a_auto_z_offset",components:1,type:"Float32"}],4),v=xn([{name:"a_texb",components:2,type:"Uint16"}]),x=xn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_elevation_from_sea",components:2,type:"Float32"}]),F=xn([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_auto_z_offset",components:1,type:"Float32"}]);xn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Y=xn([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),se=xn([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);xn([{name:"triangle",components:3,type:"Uint16"}]),xn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),xn([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Uint8",name:"hasIconTextFit"},{type:"Uint16",name:"elevationFeatureIndex"}]),xn([{type:"Float32",name:"offsetX"}]),xn([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Fe=24;const ct=128;function Ut(d,i,u,f,y){if(d.kind==="camera")return d.maxSize;if(d.kind==="composite"){const m=i.possiblyEvaluate(new vn(d.maxZoom),u).evaluate(y,{},u),_=i.possiblyEvaluate(new vn(d.minZoom),u).evaluate(y,{},u);return Math.max(m,_)}return i.possiblyEvaluate(new vn(f)).evaluate(y,{},u)}function la(d,i){const{expression:u}=i;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new vn(d+1))};if(u.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:y}=u;let m=0;for(;m<f.length&&f[m]<=d;)m++;m=Math.max(0,m-1);let _=m;for(;_<f.length&&f[_]<d+1;)_++;_=Math.min(f.length-1,_);const b=f[m],N=f[_];return u.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:N,interpolationType:y}:{kind:"camera",minZoom:b,maxZoom:N,minSize:u.evaluate(new vn(b)),maxSize:u.evaluate(new vn(N)),interpolationType:y}}}function ja(d,{uSize:i,uSizeT:u},{lowerSize:f,upperSize:y}){return d.kind==="source"?f/ct:d.kind==="composite"?fr(f/ct,y/ct,u):i}function nr(d,i,u=1){let f=0,y=0;if(d.kind==="constant")y=d.layoutSize*u;else if(d.kind!=="source"){const{interpolationType:m,minZoom:_,maxZoom:b}=d,N=m?ka(Hi.interpolationFactor(m,i,_,b),0,1):0;d.kind==="camera"?y=fr(d.minSize,d.maxSize,N)*u:f=N*u}return{uSizeT:f,uSize:y}}var xa=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:ct,evaluateSizeForFeature:ja,evaluateSizeForZoom:nr,getRasterizedIconSize:Ut,getSizeData:la});function Za(d,i,u){return d.sections.forEach(f=>{f.text=function(y,m,_){const b=m.layout.get("text-transform").evaluate(_,{});return b==="uppercase"?y=y.toLocaleUpperCase():b==="lowercase"&&(y=y.toLocaleLowerCase()),ss.applyArabicShaping&&(y=ss.applyArabicShaping(y)),y}(f.text,i,u)}),d}const Yr={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function Qn(d){return d===""||d===""||d===""||d===""||d===""||d===""||d===""||d===""||d===""||d===""||d===""||d===""||d===""||d===""||d===""||d===""||d===""}function Ho(d){return d===""||d===""||d===""||d===""||d===""||d===""||d===""||d===""||d===""||d===""}var ya,ia,Sa,Ja={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Kr(){return ya||(ya=1,Ja.read=function(d,i,u,f,y){var m,_,b=8*y-f-1,N=(1<<b)-1,D=N>>1,S=-7,V=u?y-1:0,I=u?-1:1,O=d[i+V];for(V+=I,m=O&(1<<-S)-1,O>>=-S,S+=b;S>0;m=256*m+d[i+V],V+=I,S-=8);for(_=m&(1<<-S)-1,m>>=-S,S+=f;S>0;_=256*_+d[i+V],V+=I,S-=8);if(m===0)m=1-D;else{if(m===N)return _?NaN:1/0*(O?-1:1);_+=Math.pow(2,f),m-=D}return(O?-1:1)*_*Math.pow(2,m-f)},Ja.write=function(d,i,u,f,y,m){var _,b,N,D=8*m-y-1,S=(1<<D)-1,V=S>>1,I=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,O=f?0:m-1,M=f?1:-1,B=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(b=isNaN(i)?1:0,_=S):(_=Math.floor(Math.log(i)/Math.LN2),i*(N=Math.pow(2,-_))<1&&(_--,N*=2),(i+=_+V>=1?I/N:I*Math.pow(2,1-V))*N>=2&&(_++,N/=2),_+V>=S?(b=0,_=S):_+V>=1?(b=(i*N-1)*Math.pow(2,y),_+=V):(b=i*Math.pow(2,V-1)*Math.pow(2,y),_=0));y>=8;d[u+O]=255&b,O+=M,b/=256,y-=8);for(_=_<<y|b,D+=y;D>0;d[u+O]=255&_,O+=M,_/=256,D-=8);d[u+O-M]|=128*B}),Ja}function yi(){if(Sa)return ia;Sa=1,ia=i;var d=Kr();function i(ne){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(ne)?ne:new Uint8Array(ne||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var u=4294967296,f=1/u,y=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function m(ne){return ne.type===i.Bytes?ne.readVarint()+ne.pos:ne.pos+1}function _(ne,pe,we){return we?4294967296*pe+(ne>>>0):4294967296*(pe>>>0)+(ne>>>0)}function b(ne,pe,we){var Pe=pe<=16383?1:pe<=2097151?2:pe<=268435455?3:Math.floor(Math.log(pe)/(7*Math.LN2));we.realloc(Pe);for(var Ye=we.pos-1;Ye>=ne;Ye--)we.buf[Ye+Pe]=we.buf[Ye]}function N(ne,pe){for(var we=0;we<ne.length;we++)pe.writeVarint(ne[we])}function D(ne,pe){for(var we=0;we<ne.length;we++)pe.writeSVarint(ne[we])}function S(ne,pe){for(var we=0;we<ne.length;we++)pe.writeFloat(ne[we])}function V(ne,pe){for(var we=0;we<ne.length;we++)pe.writeDouble(ne[we])}function I(ne,pe){for(var we=0;we<ne.length;we++)pe.writeBoolean(ne[we])}function O(ne,pe){for(var we=0;we<ne.length;we++)pe.writeFixed32(ne[we])}function M(ne,pe){for(var we=0;we<ne.length;we++)pe.writeSFixed32(ne[we])}function B(ne,pe){for(var we=0;we<ne.length;we++)pe.writeFixed64(ne[we])}function X(ne,pe){for(var we=0;we<ne.length;we++)pe.writeSFixed64(ne[we])}function ee(ne,pe){return(ne[pe]|ne[pe+1]<<8|ne[pe+2]<<16)+16777216*ne[pe+3]}function ue(ne,pe,we){ne[we]=pe,ne[we+1]=pe>>>8,ne[we+2]=pe>>>16,ne[we+3]=pe>>>24}function le(ne,pe){return(ne[pe]|ne[pe+1]<<8|ne[pe+2]<<16)+(ne[pe+3]<<24)}return i.prototype={destroy:function(){this.buf=null},readFields:function(ne,pe,we){for(we=we||this.length;this.pos<we;){var Pe=this.readVarint(),Ye=Pe>>3,je=this.pos;this.type=7&Pe,ne(Ye,pe,this),this.pos===je&&this.skip(Pe)}return pe},readMessage:function(ne,pe){return this.readFields(ne,pe,this.readVarint()+this.pos)},readFixed32:function(){var ne=ee(this.buf,this.pos);return this.pos+=4,ne},readSFixed32:function(){var ne=le(this.buf,this.pos);return this.pos+=4,ne},readFixed64:function(){var ne=ee(this.buf,this.pos)+ee(this.buf,this.pos+4)*u;return this.pos+=8,ne},readSFixed64:function(){var ne=ee(this.buf,this.pos)+le(this.buf,this.pos+4)*u;return this.pos+=8,ne},readFloat:function(){var ne=d.read(this.buf,this.pos,!0,23,4);return this.pos+=4,ne},readDouble:function(){var ne=d.read(this.buf,this.pos,!0,52,8);return this.pos+=8,ne},readVarint:function(ne){var pe,we,Pe=this.buf;return pe=127&(we=Pe[this.pos++]),we<128?pe:(pe|=(127&(we=Pe[this.pos++]))<<7,we<128?pe:(pe|=(127&(we=Pe[this.pos++]))<<14,we<128?pe:(pe|=(127&(we=Pe[this.pos++]))<<21,we<128?pe:function(Ye,je,qe){var mt,Xe,At=qe.buf;if(mt=(112&(Xe=At[qe.pos++]))>>4,Xe<128||(mt|=(127&(Xe=At[qe.pos++]))<<3,Xe<128)||(mt|=(127&(Xe=At[qe.pos++]))<<10,Xe<128)||(mt|=(127&(Xe=At[qe.pos++]))<<17,Xe<128)||(mt|=(127&(Xe=At[qe.pos++]))<<24,Xe<128)||(mt|=(1&(Xe=At[qe.pos++]))<<31,Xe<128))return _(Ye,mt,je);throw new Error("Expected varint not more than 10 bytes")}(pe|=(15&(we=Pe[this.pos]))<<28,ne,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var ne=this.readVarint();return ne%2==1?(ne+1)/-2:ne/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var ne=this.readVarint()+this.pos,pe=this.pos;return this.pos=ne,ne-pe>=12&&y?function(we,Pe,Ye){return y.decode(we.subarray(Pe,Ye))}(this.buf,pe,ne):function(we,Pe,Ye){for(var je="",qe=Pe;qe<Ye;){var mt,Xe,At,xt=we[qe],St=null,Ot=xt>239?4:xt>223?3:xt>191?2:1;if(qe+Ot>Ye)break;Ot===1?xt<128&&(St=xt):Ot===2?(192&(mt=we[qe+1]))==128&&(St=(31&xt)<<6|63&mt)<=127&&(St=null):Ot===3?(Xe=we[qe+2],(192&(mt=we[qe+1]))==128&&(192&Xe)==128&&((St=(15&xt)<<12|(63&mt)<<6|63&Xe)<=2047||St>=55296&&St<=57343)&&(St=null)):Ot===4&&(Xe=we[qe+2],At=we[qe+3],(192&(mt=we[qe+1]))==128&&(192&Xe)==128&&(192&At)==128&&((St=(15&xt)<<18|(63&mt)<<12|(63&Xe)<<6|63&At)<=65535||St>=1114112)&&(St=null)),St===null?(St=65533,Ot=1):St>65535&&(St-=65536,je+=String.fromCharCode(St>>>10&1023|55296),St=56320|1023&St),je+=String.fromCharCode(St),qe+=Ot}return je}(this.buf,pe,ne)},readBytes:function(){var ne=this.readVarint()+this.pos,pe=this.buf.subarray(this.pos,ne);return this.pos=ne,pe},readPackedVarint:function(ne,pe){if(this.type!==i.Bytes)return ne.push(this.readVarint(pe));var we=m(this);for(ne=ne||[];this.pos<we;)ne.push(this.readVarint(pe));return ne},readPackedSVarint:function(ne){if(this.type!==i.Bytes)return ne.push(this.readSVarint());var pe=m(this);for(ne=ne||[];this.pos<pe;)ne.push(this.readSVarint());return ne},readPackedBoolean:function(ne){if(this.type!==i.Bytes)return ne.push(this.readBoolean());var pe=m(this);for(ne=ne||[];this.pos<pe;)ne.push(this.readBoolean());return ne},readPackedFloat:function(ne){if(this.type!==i.Bytes)return ne.push(this.readFloat());var pe=m(this);for(ne=ne||[];this.pos<pe;)ne.push(this.readFloat());return ne},readPackedDouble:function(ne){if(this.type!==i.Bytes)return ne.push(this.readDouble());var pe=m(this);for(ne=ne||[];this.pos<pe;)ne.push(this.readDouble());return ne},readPackedFixed32:function(ne){if(this.type!==i.Bytes)return ne.push(this.readFixed32());var pe=m(this);for(ne=ne||[];this.pos<pe;)ne.push(this.readFixed32());return ne},readPackedSFixed32:function(ne){if(this.type!==i.Bytes)return ne.push(this.readSFixed32());var pe=m(this);for(ne=ne||[];this.pos<pe;)ne.push(this.readSFixed32());return ne},readPackedFixed64:function(ne){if(this.type!==i.Bytes)return ne.push(this.readFixed64());var pe=m(this);for(ne=ne||[];this.pos<pe;)ne.push(this.readFixed64());return ne},readPackedSFixed64:function(ne){if(this.type!==i.Bytes)return ne.push(this.readSFixed64());var pe=m(this);for(ne=ne||[];this.pos<pe;)ne.push(this.readSFixed64());return ne},skip:function(ne){var pe=7&ne;if(pe===i.Varint)for(;this.buf[this.pos++]>127;);else if(pe===i.Bytes)this.pos=this.readVarint()+this.pos;else if(pe===i.Fixed32)this.pos+=4;else{if(pe!==i.Fixed64)throw new Error("Unimplemented type: "+pe);this.pos+=8}},writeTag:function(ne,pe){this.writeVarint(ne<<3|pe)},realloc:function(ne){for(var pe=this.length||16;pe<this.pos+ne;)pe*=2;if(pe!==this.length){var we=new Uint8Array(pe);we.set(this.buf),this.buf=we,this.length=pe}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(ne){this.realloc(4),ue(this.buf,ne,this.pos),this.pos+=4},writeSFixed32:function(ne){this.realloc(4),ue(this.buf,ne,this.pos),this.pos+=4},writeFixed64:function(ne){this.realloc(8),ue(this.buf,-1&ne,this.pos),ue(this.buf,Math.floor(ne*f),this.pos+4),this.pos+=8},writeSFixed64:function(ne){this.realloc(8),ue(this.buf,-1&ne,this.pos),ue(this.buf,Math.floor(ne*f),this.pos+4),this.pos+=8},writeVarint:function(ne){(ne=+ne||0)>268435455||ne<0?function(pe,we){var Pe,Ye;if(pe>=0?(Pe=pe%4294967296|0,Ye=pe/4294967296|0):(Ye=~(-pe/4294967296),4294967295^(Pe=~(-pe%4294967296))?Pe=Pe+1|0:(Pe=0,Ye=Ye+1|0)),pe>=18446744073709552e3||pe<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");we.realloc(10),function(je,qe,mt){mt.buf[mt.pos++]=127&je|128,je>>>=7,mt.buf[mt.pos++]=127&je|128,je>>>=7,mt.buf[mt.pos++]=127&je|128,je>>>=7,mt.buf[mt.pos++]=127&je|128,mt.buf[mt.pos]=127&(je>>>=7)}(Pe,0,we),function(je,qe){var mt=(7&je)<<4;qe.buf[qe.pos++]|=mt|((je>>>=3)?128:0),je&&(qe.buf[qe.pos++]=127&je|((je>>>=7)?128:0),je&&(qe.buf[qe.pos++]=127&je|((je>>>=7)?128:0),je&&(qe.buf[qe.pos++]=127&je|((je>>>=7)?128:0),je&&(qe.buf[qe.pos++]=127&je|((je>>>=7)?128:0),je&&(qe.buf[qe.pos++]=127&je)))))}(Ye,we)}(ne,this):(this.realloc(4),this.buf[this.pos++]=127&ne|(ne>127?128:0),ne<=127||(this.buf[this.pos++]=127&(ne>>>=7)|(ne>127?128:0),ne<=127||(this.buf[this.pos++]=127&(ne>>>=7)|(ne>127?128:0),ne<=127||(this.buf[this.pos++]=ne>>>7&127))))},writeSVarint:function(ne){this.writeVarint(ne<0?2*-ne-1:2*ne)},writeBoolean:function(ne){this.writeVarint(!!ne)},writeString:function(ne){ne=String(ne),this.realloc(4*ne.length),this.pos++;var pe=this.pos;this.pos=function(Pe,Ye,je){for(var qe,mt,Xe=0;Xe<Ye.length;Xe++){if((qe=Ye.charCodeAt(Xe))>55295&&qe<57344){if(!mt){qe>56319||Xe+1===Ye.length?(Pe[je++]=239,Pe[je++]=191,Pe[je++]=189):mt=qe;continue}if(qe<56320){Pe[je++]=239,Pe[je++]=191,Pe[je++]=189,mt=qe;continue}qe=mt-55296<<10|qe-56320|65536,mt=null}else mt&&(Pe[je++]=239,Pe[je++]=191,Pe[je++]=189,mt=null);qe<128?Pe[je++]=qe:(qe<2048?Pe[je++]=qe>>6|192:(qe<65536?Pe[je++]=qe>>12|224:(Pe[je++]=qe>>18|240,Pe[je++]=qe>>12&63|128),Pe[je++]=qe>>6&63|128),Pe[je++]=63&qe|128)}return je}(this.buf,ne,this.pos);var we=this.pos-pe;we>=128&&b(pe,we,this),this.pos=pe-1,this.writeVarint(we),this.pos+=we},writeFloat:function(ne){this.realloc(4),d.write(this.buf,ne,this.pos,!0,23,4),this.pos+=4},writeDouble:function(ne){this.realloc(8),d.write(this.buf,ne,this.pos,!0,52,8),this.pos+=8},writeBytes:function(ne){var pe=ne.length;this.writeVarint(pe),this.realloc(pe);for(var we=0;we<pe;we++)this.buf[this.pos++]=ne[we]},writeRawMessage:function(ne,pe){this.pos++;var we=this.pos;ne(pe,this);var Pe=this.pos-we;Pe>=128&&b(we,Pe,this),this.pos=we-1,this.writeVarint(Pe),this.pos+=Pe},writeMessage:function(ne,pe,we){this.writeTag(ne,i.Bytes),this.writeRawMessage(pe,we)},writePackedVarint:function(ne,pe){pe.length&&this.writeMessage(ne,N,pe)},writePackedSVarint:function(ne,pe){pe.length&&this.writeMessage(ne,D,pe)},writePackedBoolean:function(ne,pe){pe.length&&this.writeMessage(ne,I,pe)},writePackedFloat:function(ne,pe){pe.length&&this.writeMessage(ne,S,pe)},writePackedDouble:function(ne,pe){pe.length&&this.writeMessage(ne,V,pe)},writePackedFixed32:function(ne,pe){pe.length&&this.writeMessage(ne,O,pe)},writePackedSFixed32:function(ne,pe){pe.length&&this.writeMessage(ne,M,pe)},writePackedFixed64:function(ne,pe){pe.length&&this.writeMessage(ne,B,pe)},writePackedSFixed64:function(ne,pe){pe.length&&this.writeMessage(ne,X,pe)},writeBytesField:function(ne,pe){this.writeTag(ne,i.Bytes),this.writeBytes(pe)},writeFixed32Field:function(ne,pe){this.writeTag(ne,i.Fixed32),this.writeFixed32(pe)},writeSFixed32Field:function(ne,pe){this.writeTag(ne,i.Fixed32),this.writeSFixed32(pe)},writeFixed64Field:function(ne,pe){this.writeTag(ne,i.Fixed64),this.writeFixed64(pe)},writeSFixed64Field:function(ne,pe){this.writeTag(ne,i.Fixed64),this.writeSFixed64(pe)},writeVarintField:function(ne,pe){this.writeTag(ne,i.Varint),this.writeVarint(pe)},writeSVarintField:function(ne,pe){this.writeTag(ne,i.Varint),this.writeSVarint(pe)},writeStringField:function(ne,pe){this.writeTag(ne,i.Bytes),this.writeString(pe)},writeFloatField:function(ne,pe){this.writeTag(ne,i.Fixed32),this.writeFloat(pe)},writeDoubleField:function(ne,pe){this.writeTag(ne,i.Fixed64),this.writeDouble(pe)},writeBooleanField:function(ne,pe){this.writeVarintField(ne,!!pe)}},ia}var on=w(yi());const Pn=3;function su(d,i,u){i.glyphs=[],d===1&&u.readMessage(as,i)}function as(d,i,u){if(d===3){const{id:f,bitmap:y,width:m,height:_,left:b,top:N,advance:D}=u.readMessage(mm,{});i.glyphs.push({id:f,bitmap:new im({width:m+2*Pn,height:_+2*Pn},y),metrics:{width:m,height:_,left:b,top:N,advance:D}})}else d===4?i.ascender=u.readSVarint():d===5&&(i.descender=u.readSVarint())}function mm(d,i,u){d===1?i.id=u.readVarint():d===2?i.bitmap=u.readBytes():d===3?i.width=u.readVarint():d===4?i.height=u.readVarint():d===5?i.left=u.readSVarint():d===6?i.top=u.readSVarint():d===7&&(i.advance=u.readVarint())}const LP=Pn,Kd={horizontal:1,vertical:2,horizontalOnly:3};class W1{constructor(){this.scale=1,this.fontStack="",this.image=null}static forText(i,u){const f=new W1;return f.scale=i||1,f.fontStack=u,f}static forImage(i){const u=new W1;return u.image=i,u}}class l_{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,u,f){const y=new l_;for(let m=0;m<i.sections.length;m++){const _=i.sections[m];_.image?y.addImageSection(_,f):y.addTextSection(_,u)}return y}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSections(){return this.sections}getSectionIndex(i){return this.sectionIndex[i]}getCodePoint(i){return this.text.codePointAt(i)}verticalizePunctuation(i){this.text=function(u,f){let y="";for(let m=0;m<u.length;m++){const _=u.charCodeAt(m+1)||null,b=u.charCodeAt(m-1)||null;y+=!f&&(_&&Sr(_)&&!Yr[u[m+1]]||b&&Sr(b)&&!Yr[u[m-1]])||!Yr[u[m]]?u[m]:Yr[u[m]]}return y}(this.text,i)}trim(){let i=0;for(let f=0;f<this.text.length&&CS[this.text.charCodeAt(f)];f++)i++;let u=this.text.length;for(let f=this.text.length-1;f>=0&&f>=i&&CS[this.text.charCodeAt(f)];f--)u--;this.text=this.text.substring(i,u),this.sectionIndex=this.sectionIndex.slice(i,u)}substring(i,u){const f=new l_;return f.text=this.text.substring(i,u),f.sectionIndex=this.sectionIndex.slice(i,u),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,u)=>Math.max(i,this.sections[u].scale),0)}addTextSection(i,u){this.text+=i.text,this.sections.push(W1.forText(i.scale,i.fontStack||u));const f=this.sections.length-1;for(let y=0;y<i.text.length;++y)this.sectionIndex.push(f)}addImageSection(i,u){const f=i.image?i.image.getPrimary():null;if(!f)return void en("Can't add FormattedSection with an empty image.");f.scaleSelf(u);const y=this.getNextImageSectionCharCode();y?(this.text+=String.fromCodePoint(y),this.sections.push(W1.forImage(f)),this.sectionIndex.push(this.sections.length-1)):en("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function FP(d,i,u,f,y,m,_,b,N,D,S,V,I,O,M,B=1){const X=l_.fromFeature(d,y,B);V===Kd.vertical&&X.verticalizePunctuation(I);let ee=[];const ue=function(Pe,Ye,je,qe,mt,Xe){if(!Pe)return[];const At=[],xt=function(kt,Mt,Zt,ga,ma,Ya){let Pa=0;for(let Oa=0;Oa<kt.length();Oa++){const va=kt.getSection(Oa);Pa+=tL(kt.getCodePoint(Oa),va,ga,ma,Mt,Ya)}return Pa/Math.max(1,Math.ceil(Pa/Zt))}(Pe,Ye,je,qe,mt,Xe),St=Pe.text.indexOf("")>=0;let Ot=0;for(let kt=0;kt<Pe.length();kt++){const Mt=Pe.getSection(kt),Zt=Pe.getCodePoint(kt);if(CS[Zt]||(Ot+=tL(Zt,Mt,qe,mt,Ye,Xe)),kt<Pe.length()-1){const ga=!((Nt=Zt)<11904||!(wt["Bopomofo Extended"](Nt)||wt.Bopomofo(Nt)||wt["CJK Compatibility Forms"](Nt)||wt["CJK Compatibility Ideographs"](Nt)||wt["CJK Compatibility"](Nt)||wt["CJK Radicals Supplement"](Nt)||wt["CJK Strokes"](Nt)||wt["CJK Symbols and Punctuation"](Nt)||wt["CJK Unified Ideographs Extension A"](Nt)||wt["CJK Unified Ideographs"](Nt)||wt["Enclosed CJK Letters and Months"](Nt)||wt["Halfwidth and Fullwidth Forms"](Nt)||wt.Hiragana(Nt)||wt["Ideographic Description Characters"](Nt)||wt["Kangxi Radicals"](Nt)||wt["Katakana Phonetic Extensions"](Nt)||wt.Katakana(Nt)||wt["Vertical Forms"](Nt)||wt["Yi Radicals"](Nt)||wt["Yi Syllables"](Nt)));(JQ[Zt]||ga||Mt.image)&&At.push(rL(kt+1,Ot,xt,At,QQ(Zt,Pe.getCodePoint(kt+1),ga&&St),!1))}}var Nt;return nL(rL(Pe.length(),Ot,xt,At,0,!0))}(X,D,m,i,f,O),{processBidirectionalText:le,processStyledBidirectionalText:ne}=ss;if(le&&X.sections.length===1){const Pe=le(X.toString(),ue);for(const Ye of Pe){const je=new l_;je.text=Ye,je.sections=X.sections;for(let qe=0;qe<Ye.length;qe++)je.sectionIndex.push(0);ee.push(je)}}else if(ne){const Pe=ne(X.text,X.sectionIndex,ue);for(const Ye of Pe){const je=new l_;je.text=Ye[0],je.sectionIndex=Ye[1],je.sections=X.sections,ee.push(je)}}else ee=function(Pe,Ye){const je=[],qe=Pe.text;let mt=0;for(const Xe of Ye)je.push(Pe.substring(mt,Xe)),mt=Xe;return mt<qe.length&&je.push(Pe.substring(mt,qe.length)),je}(X,ue);const pe=[],we={positionedLines:pe,text:X.toString(),top:S[1],bottom:S[1],left:S[0],right:S[0],writingMode:V,iconsInText:!1,verticalizable:!1,hasBaseline:!1};if(function(Pe,Ye,je,qe,mt,Xe,At,xt,St,Ot,Nt,kt){let Mt=0,Zt=0,ga=0;const ma=xt==="right"?1:xt==="left"?0:.5;let Ya=!1;for(const lr of mt){const Dr=lr.getSections();for(const Jr of Dr){if(Jr.image)continue;const kr=Ye[Jr.fontStack];if(kr&&(Ya=kr.ascender!==void 0&&kr.descender!==void 0,!Ya))break}if(!Ya)break}let Pa=0;for(const lr of mt){lr.trim();const Dr=lr.getMaxScale(),Jr=(Dr-1)*Fe,kr={positionedGlyphs:[],lineOffset:0};Pe.positionedLines[Pa]=kr;const dn=kr.positionedGlyphs;let Xr=0;if(!lr.length()){Zt+=Xe,++Pa;continue}let wn=0,Kn=0;for(let Lr=0;Lr<lr.length();Lr++){const En=lr.getSection(Lr),Yi=lr.getSectionIndex(Lr),ls=lr.getCodePoint(Lr);let ys=En.scale,Ns=null,Si=null,ll=null,bc=Fe,Ao=0;St===Kd.vertical&&((Oa=ls)===12312||Oa===12313||Oa===12316||Oa===12540||Oa===12448)&&(St=Kd.horizontal);const xo=!(St===Kd.horizontal||!Nt&&!qa(ls)||Nt&&(CS[ls]||pr(ls)));if(En.image){const Iu=qe.get(En.image.toString());if(!Iu)continue;ll=En.image,Pe.iconsInText=Pe.iconsInText||!0,Si=Iu.paddedRect;const Ul=Iu.displaySize;ys=ys*Fe/kt,Ns={width:Ul[0],height:Ul[1],left:0,top:-3,advance:xo?Ul[1]:Ul[0],localGlyph:!1},Ao=Ya?-Ns.height*ys:Dr*Fe-17-Ul[1]*ys,bc=Ns.advance;const Qh=(xo?Ul[0]:Ul[1])*ys-Fe*Dr;Qh>0&&Qh>Xr&&(Xr=Qh)}else{const Iu=je[En.fontStack];if(!Iu)continue;Iu[ls]&&(Si=Iu[ls]);const Ul=Ye[En.fontStack];if(!Ul)continue;const Qh=Ul.glyphs[ls];if(!Qh)continue;if(Ns=Qh.metrics,bc=ls!==8203?Fe:0,Ya){const dg=Ul.ascender!==void 0?Math.abs(Ul.ascender):0,Ff=Ul.descender!==void 0?Math.abs(Ul.descender):0,Rp=(dg+Ff)*ys;wn<Rp&&(wn=Rp,Kn=(dg-Ff)/2*ys),Ao=-dg*ys}else Ao=(Dr-ys)*Fe-17}xo?(Pe.verticalizable=!0,dn.push({glyph:ls,image:ll,x:Mt,y:Zt+Ao,vertical:xo,scale:ys,localGlyph:Ns.localGlyph,fontStack:En.fontStack,sectionIndex:Yi,metrics:Ns,rect:Si}),Mt+=bc*ys+Ot):(dn.push({glyph:ls,image:ll,x:Mt,y:Zt+Ao,vertical:xo,scale:ys,localGlyph:Ns.localGlyph,fontStack:En.fontStack,sectionIndex:Yi,metrics:Ns,rect:Si}),Mt+=Ns.advance*ys+Ot)}dn.length!==0&&(ga=Math.max(Mt-Ot,ga),Ya?iL(dn,ma,Xr,Kn,Xe*Dr/2):iL(dn,ma,Xr,0,Xe/2)),Mt=0;const Ei=Xe*Dr+Xr;kr.lineOffset=Math.max(Xr,Jr),Zt+=Ei,++Pa}var Oa;const va=Zt,{horizontalAlign:Ar,verticalAlign:$a}=UP(At);(function(lr,Dr,Jr,kr,dn,Xr){const wn=(Dr-Jr)*dn,Kn=-Xr*kr;for(const Ei of lr)for(const Lr of Ei.positionedGlyphs)Lr.x+=wn,Lr.y+=Kn})(Pe.positionedLines,ma,Ar,$a,ga,va),Pe.top+=-$a*va,Pe.bottom=Pe.top+va,Pe.left+=-Ar*ga,Pe.right=Pe.left+ga,Pe.hasBaseline=Ya}(we,i,u,f,ee,_,b,N,V,D,I,M),!function(Pe){for(const Ye of Pe)if(Ye.positionedGlyphs.length!==0)return!1;return!0}(pe))return we}const CS={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},JQ={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function tL(d,i,u,f,y,m){if(i.image){const _=f.get(i.image.toString());return _?_.displaySize[0]*i.scale*Fe/m+y:0}{const _=u[i.fontStack],b=_&&_.glyphs[d];return b?b.metrics.advance*i.scale+y:0}}function aL(d,i,u,f){const y=Math.pow(d-i,2);return f?d<i?y/2:2*y:y+Math.abs(u)*u}function QQ(d,i,u){let f=0;return d===10&&(f-=1e4),u&&(f+=150),d!==40&&d!==65288||(f+=50),i!==41&&i!==65289||(f+=50),f}function rL(d,i,u,f,y,m){let _=null,b=aL(i,u,y,m);for(const N of f){const D=aL(i-N.x,u,y,m)+N.badness;D<=b&&(_=N,b=D)}return{index:d,x:i,priorBreak:_,badness:b}}function nL(d){return d?nL(d.priorBreak).concat(d.index):[]}function UP(d){let i=.5,u=.5;switch(d){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(d){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:i,verticalAlign:u}}function iL(d,i,u,f,y){if(!(i||u||f||y))return;const m=d.length-1,_=d[m],b=(_.x+_.metrics.advance*_.scale)*i;for(let N=0;N<=m;N++)d[N].x-=b,d[N].y+=u+f+y}function eee(d,i,u,f){const{horizontalAlign:y,verticalAlign:m}=UP(f),_=u[0]-d.displaySize[0]*y,b=u[1]-d.displaySize[1]*m;return{imagePrimary:d,imageSecondary:i,top:b,bottom:b+d.displaySize[1],left:_,right:_+d.displaySize[0]}}function sL(d,i,u,f,y,m){const _=d.imagePrimary;let b;if(_.content){const X=_.content,ee=_.pixelRatio||1;b=[X[0]/ee,X[1]/ee,_.displaySize[0]-X[2]/ee,_.displaySize[1]-X[3]/ee]}const N=i.left*m,D=i.right*m;let S,V,I,O;u==="width"||u==="both"?(O=y[0]+N-f[3],V=y[0]+D+f[1]):(O=y[0]+(N+D-_.displaySize[0])/2,V=O+_.displaySize[0]);const M=i.top*m,B=i.bottom*m;return u==="height"||u==="both"?(S=y[1]+M-f[0],I=y[1]+B+f[2]):(S=y[1]+(M+B-_.displaySize[1])/2,I=S+_.displaySize[1]),{imagePrimary:_,imageSecondary:void 0,top:S,right:V,bottom:I,left:O,collisionPadding:b}}class sy extends It{constructor(i,u,f,y,m){super(i,u),this.angle=y,this.z=f,m!==void 0&&(this.segment=m)}clone(){return new sy(this.x,this.y,this.z,this.angle,this.segment)}}function oL(d,i,u,f,y){if(i.segment===void 0)return!0;let m=i,_=i.segment+1,b=0;for(;b>-u/2;){if(_--,_<0)return!1;b-=d[_].dist(m),m=d[_]}b+=d[_].dist(d[_+1]),_++;const N=[];let D=0;for(;b<u/2;){const S=d[_],V=d[_+1];if(!V)return!1;let I=d[_-1].angleTo(S)-S.angleTo(V);for(I=Math.abs((I+3*Math.PI)%(2*Math.PI)-Math.PI),N.push({distance:b,angleDelta:I}),D+=I;b-N[0].distance>f;)D-=N.shift().angleDelta;if(D>y)return!1;_++,b+=S.dist(V)}return!0}function lL(d){let i=0;for(let u=0;u<d.length-1;u++)i+=d[u].dist(d[u+1]);return i}function uL(d,i,u){return d?.6*i*u:0}function cL(d,i){return Math.max(d?d.right-d.left:0,i?i.right-i.left:0)}function tee(d,i,u,f,y,m){const _=uL(u,y,m),b=cL(u,f)*m;let N=0;const D=lL(d)/2;for(let S=0;S<d.length-1;S++){const V=d[S],I=d[S+1],O=V.dist(I);if(N+O>D){const M=(D-N)/O,B=fr(V.x,I.x,M),X=fr(V.y,I.y,M),ee=new sy(B,X,0,I.angleTo(V),S);return!_||oL(d,ee,b,_,i)?ee:void 0}N+=O}}function aee(d,i,u,f,y,m,_,b,N){const D=uL(f,m,_),S=cL(f,y),V=S*_,I=d[0].x===0||d[0].x===N||d[0].y===0||d[0].y===N;return i-V<i/4&&(i=V+i/4),dL(d,I?i/2*b%i:(S/2+2*m)*_*b%i,i,D,u,V,I,!1,N)}function dL(d,i,u,f,y,m,_,b,N){const D=m/2,S=lL(d);let V=0,I=i-u,O=[];for(let M=0;M<d.length-1;M++){const B=d[M],X=d[M+1],ee=B.dist(X),ue=X.angleTo(B);for(;I+u<V+ee;){I+=u;const le=(I-V)/ee,ne=fr(B.x,X.x,le),pe=fr(B.y,X.y,le);if(ne>=0&&ne<N&&pe>=0&&pe<N&&I-D>=0&&I+D<=S){const we=new sy(ne,pe,0,ue,M);f&&!oL(d,we,m,f,y)||O.push(we)}}V+=ee}return b||O.length||_||(O=dL(d,V/2,u,f,y,m,_,!0,N)),O}function hL(d,i,u,f,y){const m=[];for(let _=0;_<d.length;_++){const b=d[_];let N;for(let D=0;D<b.length-1;D++){let S=b[D],V=b[D+1];S.x<i&&V.x<i||(S.x<i?S=new It(i,S.y+(i-S.x)/(V.x-S.x)*(V.y-S.y))._round():V.x<i&&(V=new It(i,S.y+(i-S.x)/(V.x-S.x)*(V.y-S.y))._round()),S.y<u&&V.y<u||(S.y<u?S=new It(S.x+(u-S.y)/(V.y-S.y)*(V.x-S.x),u)._round():V.y<u&&(V=new It(S.x+(u-S.y)/(V.y-S.y)*(V.x-S.x),u)._round()),S.x>=f&&V.x>=f||(S.x>=f?S=new It(f,S.y+(f-S.x)/(V.x-S.x)*(V.y-S.y))._round():V.x>=f&&(V=new It(f,S.y+(f-S.x)/(V.x-S.x)*(V.y-S.y))._round()),S.y>=y&&V.y>=y||(S.y>=y?S=new It(S.x+(y-S.y)/(V.y-S.y)*(V.x-S.x),y)._round():V.y>=y&&(V=new It(S.x+(y-S.y)/(V.y-S.y)*(V.x-S.x),y)._round()),N&&S.equals(N[N.length-1])||(N=[S],m.push(N)),N.push(V)))))}}return m}function fL(d){let i=0,u=0;for(const _ of d)i+=_.w*_.h,u=Math.max(u,_.w);d.sort((_,b)=>b.h-_.h);const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),u),h:1/0}];let y=0,m=0;for(const _ of d)for(let b=f.length-1;b>=0;b--){const N=f[b];if(!(_.w>N.w||_.h>N.h)){if(_.x=N.x,_.y=N.y,m=Math.max(m,_.y+_.h),y=Math.max(y,_.x+_.w),_.w===N.w&&_.h===N.h){const D=f.pop();b<f.length&&(f[b]=D)}else _.h===N.h?(N.x+=_.w,N.w-=_.w):_.w===N.w?(N.y+=_.h,N.h-=_.h):(f.push({x:N.x+_.w,y:N.y,w:N.w-_.w,h:_.h}),N.y+=_.h,N.h-=_.h);break}}return{w:y,h:m,fill:i/(y*m)||0}}Pt(sy,"Anchor");const u_=1;class Y1{static getImagePositionScale(i,u,f){if(u&&i&&i.options&&i.options.transform){const y=i.options.transform;return{x:y.a,y:y.d}}return{x:f,y:f}}constructor(i,u,f,y){this.paddedRect=i;const{pixelRatio:m,version:_,stretchX:b,stretchY:N,content:D,sdf:S,usvg:V}=u;this.pixelRatio=m,this.stretchX=b,this.stretchY=N,this.content=D,this.version=_,this.padding=f,this.sdf=S,this.scale=Y1.getImagePositionScale(y,V,m)}get tl(){return[this.paddedRect.x+this.padding,this.paddedRect.y+this.padding]}get br(){return[this.paddedRect.x+this.paddedRect.w-this.padding,this.paddedRect.y+this.paddedRect.h-this.padding]}get displaySize(){return[(this.paddedRect.w-2*this.padding)/this.scale.x,(this.paddedRect.h-2*this.padding)/this.scale.y]}}function pL(d,i,u){const f=Gu.parse(d),y=function(m,_,b=[1,1]){return{x:0,y:0,w:(m.data?m.data.width:m.width*b[0])+2*_,h:(m.data?m.data.height:m.height*b[1])+2*_}}(i,u,[f.options.transform.a,f.options.transform.d]);return{bin:y,imagePosition:new Y1(y,i,u,f),imageVariant:f}}class mL{constructor(i,u,f){const y=new Map,m=new Map;this.haveRenderCallbacks=[];const _=[];this.addImages(i,y,u_,_),this.addImages(u,m,2,_);const{w:b,h:N}=fL(_),D=new wl({width:b||1,height:N||1});for(const[S,V]of i.entries()){const I=y.get(S).paddedRect;wl.copy(V.data,D,{x:0,y:0},{x:I.x+u_,y:I.y+u_},V.data,f,V.sdf)}for(const[S,V]of u.entries()){const I=m.get(S),O=I.paddedRect;let M=I.padding;const B=O.x+M,X=O.y+M,ee=V.data.width,ue=V.data.height;M=M>1?M-1:M,wl.copy(V.data,D,{x:0,y:0},{x:B,y:X},V.data,f),wl.copy(V.data,D,{x:0,y:ue-M},{x:B,y:X-M},{width:ee,height:M},f),wl.copy(V.data,D,{x:0,y:0},{x:B,y:X+ue},{width:ee,height:M},f),wl.copy(V.data,D,{x:ee-M,y:0},{x:B-M,y:X},{width:M,height:ue},f),wl.copy(V.data,D,{x:0,y:0},{x:B+ee,y:X},{width:M,height:ue},f),wl.copy(V.data,D,{x:ee-M,y:ue-M},{x:B-M,y:X-M},{width:M,height:M},f),wl.copy(V.data,D,{x:0,y:ue-M},{x:B+ee,y:X-M},{width:M,height:M},f),wl.copy(V.data,D,{x:0,y:0},{x:B+ee,y:X+ue},{width:M,height:M},f),wl.copy(V.data,D,{x:ee-M,y:0},{x:B-M,y:X+ue},{width:M,height:M},f)}this.lut=f,this.image=D,this.iconPositions=y,this.patternPositions=m}addImages(i,u,f,y){for(const[m,_]of i.entries()){const{bin:b,imagePosition:N,imageVariant:D}=pL(m,_,f);u.set(m,N),y.push(b),_.hasRenderCallback&&this.haveRenderCallbacks.push(D.id)}}patchUpdatedImages(i,u,f){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(y=>i.hasImage(y,f)),i.dispatchRenderCallbacks(this.haveRenderCallbacks,f);for(const y of i.getUpdatedImages(f)){for(const m of this.iconPositions.keys()){const _=Gu.parse(m);if(Fo.isEqual(_.id,y)){const b=i.getImage(y,f);this.patchUpdatedImage(this.iconPositions.get(m),b,u)}}for(const m of this.patternPositions.keys()){const _=Gu.parse(m);if(Fo.isEqual(_.id,y)){const b=i.getImage(y,f);this.patchUpdatedImage(this.patternPositions.get(m),b,u)}}}}patchUpdatedImage(i,u,f){if(!i||!u||i.version===u.version)return;i.version=u.version;const[y,m]=i.tl,_=i.sdf;if(this.lut||_){const b={width:u.data.width,height:u.data.height},N=new wl(b);wl.copy(u.data,N,{x:0,y:0},{x:0,y:0},b,this.lut,_),f.update(N,{position:{x:y,y:m}})}else f.update(u.data,{position:{x:y,y:m}})}}Pt(Y1,"ImagePosition"),Pt(mL,"ImageAtlas");const bS=1e20;function yL(d,i,u,f,y,m,_,b,N){for(let D=i;D<i+f;D++)gL(d,u*m+D,m,y,_,b,N);for(let D=u;D<u+y;D++)gL(d,D*m+i,1,f,_,b,N)}function gL(d,i,u,f,y,m,_){m[0]=0,_[0]=-1e20,_[1]=bS,y[0]=d[i];for(let b=1,N=0,D=0;b<f;b++){y[b]=d[i+b*u];const S=b*b;do{const V=m[N];D=(y[b]-y[V]+S-V*V)/(b-V)/2}while(D<=_[N]&&--N>-1);N++,m[N]=b,_[N]=D,_[N+1]=bS}for(let b=0,N=0;b<f;b++){for(;_[N+1]<b;)N++;const D=m[N],S=b-D;d[i+b*u]=y[D]+S*S}}const Ap=2,kP={none:0,ideographs:1,all:2};class c_{constructor(i,u,f){this.requestManager=i,this.localGlyphMode=u,this.localFontFamily=f,this.urls={},this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(i,u){this.urls[u]=i}getGlyphs(i,u,f){const y=[],m=this.urls[u]||xe.GLYPHS_URL;for(const _ in i)for(const b of i[_])y.push({stack:_,id:b});Dn(y,({stack:_,id:b},N)=>{let D=this.entries[_];D||(D=this.entries[_]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let S=D.glyphs[b];if(S!==void 0)return void N(null,{stack:_,id:b,glyph:S});if(S=this._tinySDF(D,_,b),S)return D.glyphs[b]=S,void N(null,{stack:_,id:b,glyph:S});const V=Math.floor(b/256);if(256*V>65535)return en("glyphs > 65535 not supported"),void N(null,{stack:_,id:b,glyph:S});if(D.ranges[V])return void N(null,{stack:_,id:b,glyph:S});let I=D.requests[V];I||(I=D.requests[V]=[],c_.loadGlyphRange(_,V,m,this.requestManager,(O,M)=>{if(M){D.ascender=M.ascender,D.descender=M.descender;for(const B in M.glyphs)this._doesCharSupportLocalGlyph(+B)||(D.glyphs[+B]=M.glyphs[+B]);D.ranges[V]=!0}for(const B of I)B(O,M);delete D.requests[V]})),I.push((O,M)=>{O?N(O):M&&N(null,{stack:_,id:b,glyph:M.glyphs[b]||null})})},(_,b)=>{if(_)f(_);else if(b){const N={};for(const{stack:D,id:S,glyph:V}of b)N[D]===void 0&&(N[D]={}),N[D].glyphs===void 0&&(N[D].glyphs={}),N[D].glyphs[S]=V&&{id:V.id,bitmap:V.bitmap.clone(),metrics:V.metrics},N[D].ascender=this.entries[D].ascender,N[D].descender=this.entries[D].descender;f(null,N)}})}_doesCharSupportLocalGlyph(i){return this.localGlyphMode!==kP.none&&(this.localGlyphMode===kP.all?!!this.localFontFamily:!!this.localFontFamily&&(wt["CJK Unified Ideographs"](i)||wt["Hangul Syllables"](i)||wt.Hiragana(i)||wt.Katakana(i)||wt["CJK Symbols and Punctuation"](i)||wt["CJK Unified Ideographs Extension A"](i)||wt["CJK Unified Ideographs Extension B"](i)||wt.Osage(i)))}_tinySDF(i,u,f){const y=this.localFontFamily;if(!y||!this._doesCharSupportLocalGlyph(f))return;let m=i.tinySDF;if(!m){let B="400";/bold/i.test(u)?B="900":/medium/i.test(u)?B="500":/light/i.test(u)&&(B="200"),m=i.tinySDF=new c_.TinySDF({fontFamily:y,fontWeight:B,fontSize:24*Ap,buffer:3*Ap,radius:8*Ap}),m.fontWeight=B}if(this.localGlyphs[m.fontWeight][f])return this.localGlyphs[m.fontWeight][f];const _=String.fromCodePoint(f),{data:b,width:N,height:D,glyphWidth:S,glyphHeight:V,glyphLeft:I,glyphTop:O,glyphAdvance:M}=m.draw(_);return this.localGlyphs[m.fontWeight][f]={id:f,bitmap:new im({width:N,height:D},b),metrics:{width:S/Ap,height:V/Ap,left:I/Ap,top:O/Ap-27,advance:M/Ap,localGlyph:!0}}}}c_.loadGlyphRange=function(d,i,u,f,y){const m=256*i,_=m+255,b=f.transformRequest(f.normalizeGlyphsURL(u).replace("{fontstack}",d).replace("{range}",`${m}-${_}`),ws.Glyphs);zi(b,(N,D)=>{if(N)y(N);else if(D){const S={},V=function(I){return new on(I).readFields(su,{})}(D);for(const I of V.glyphs)S[I.id]=I;y(null,{glyphs:S,ascender:V.ascender,descender:V.descender})}})},c_.TinySDF=class{constructor({fontSize:d=24,buffer:i=3,radius:u=8,cutoff:f=.25,fontFamily:y="sans-serif",fontWeight:m="normal",fontStyle:_="normal"}={}){this.buffer=i,this.cutoff=f,this.radius=u;const b=this.size=d+4*i,N=this._createCanvas(b),D=this.ctx=N.getContext("2d",{willReadFrequently:!0});D.font=`${_} ${m} ${d}px ${y}`,D.textBaseline="alphabetic",D.textAlign="left",D.fillStyle="black",this.gridOuter=new Float64Array(b*b),this.gridInner=new Float64Array(b*b),this.f=new Float64Array(b),this.z=new Float64Array(b+1),this.v=new Uint16Array(b)}_createCanvas(d){const i=document.createElement("canvas");return i.width=i.height=d,i}draw(d){const{width:i,actualBoundingBoxAscent:u,actualBoundingBoxDescent:f,actualBoundingBoxLeft:y,actualBoundingBoxRight:m}=this.ctx.measureText(d),_=Math.ceil(u),b=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(m-y))),N=Math.min(this.size-this.buffer,_+Math.ceil(f)),D=b+2*this.buffer,S=N+2*this.buffer,V=Math.max(D*S,0),I=new Uint8ClampedArray(V),O={data:I,width:D,height:S,glyphWidth:b,glyphHeight:N,glyphTop:_,glyphLeft:0,glyphAdvance:i};if(b===0||N===0)return O;const{ctx:M,buffer:B,gridInner:X,gridOuter:ee}=this;M.clearRect(B,B,b,N),M.fillText(d,B,B+_);const ue=M.getImageData(B,B,b,N);ee.fill(bS,0,V),X.fill(0,0,V);for(let le=0;le<N;le++)for(let ne=0;ne<b;ne++){const pe=ue.data[4*(le*b+ne)+3]/255;if(pe===0)continue;const we=(le+B)*D+ne+B;if(pe===1)ee[we]=0,X[we]=bS;else{const Pe=.5-pe;ee[we]=Pe>0?Pe*Pe:0,X[we]=Pe<0?Pe*Pe:0}}yL(ee,0,0,D,S,D,this.f,this.v,this.z),yL(X,B,B,b,N,D,this.f,this.v,this.z);for(let le=0;le<V;le++){const ne=Math.sqrt(ee[le])-Math.sqrt(X[le]);I[le]=Math.round(255-255*(ne/this.radius+this.cutoff))}return O}};const OA=u_;function AL(d,i){return d+i[1]-i[0]}function _L(d,i,u,f,y=1){const m=[],_=d.imagePrimary,b=_.pixelRatio,N=_.paddedRect.w-2*OA,D=_.paddedRect.h-2*OA,S=(d.right-d.left)*y,V=(d.bottom-d.top)*y,I=_.stretchX||[[0,N]],O=_.stretchY||[[0,D]],M=I.reduce(AL,0),B=O.reduce(AL,0),X=N-M,ee=D-B;let ue=0,le=M,ne=0,pe=B,we=0,Pe=X,Ye=0,je=ee;if(_.content&&f){const mt=_.content;ue=xS(I,0,mt[0]),ne=xS(O,0,mt[1]),le=xS(I,mt[0],mt[2]),pe=xS(O,mt[1],mt[3]),we=mt[0]-ue,Ye=mt[1]-ne,Pe=mt[2]-mt[0]-le,je=mt[3]-mt[1]-pe}const qe=(mt,Xe,At,xt)=>{const St=PS(mt.stretch-ue,le,S,d.left*y),Ot=ES(mt.fixed-we,Pe,mt.stretch,M),Nt=PS(Xe.stretch-ne,pe,V,d.top*y),kt=ES(Xe.fixed-Ye,je,Xe.stretch,B),Mt=PS(At.stretch-ue,le,S,d.left*y),Zt=ES(At.fixed-we,Pe,At.stretch,M),ga=PS(xt.stretch-ne,pe,V,d.top*y),ma=ES(xt.fixed-Ye,je,xt.stretch,B),Ya=new It(St,Nt),Pa=new It(Mt,Nt),Oa=new It(Mt,ga),va=new It(St,ga),Ar=new It(Ot/b,kt/b),$a=new It(Zt/b,ma/b),lr=i*Math.PI/180;if(lr){const wn=Math.sin(lr),Kn=Math.cos(lr),Ei=[Kn,-wn,wn,Kn];Ya._matMult(Ei),Pa._matMult(Ei),va._matMult(Ei),Oa._matMult(Ei)}const Dr=mt.stretch+mt.fixed,Jr=At.stretch+At.fixed,kr=Xe.stretch+Xe.fixed,dn=xt.stretch+xt.fixed,Xr=d.imageSecondary;return{tl:Ya,tr:Pa,bl:va,br:Oa,texPrimary:{x:_.paddedRect.x+OA+Dr,y:_.paddedRect.y+OA+kr,w:Jr-Dr,h:dn-kr},texSecondary:Xr?{x:Xr.paddedRect.x+OA+Dr,y:Xr.paddedRect.y+OA+kr,w:Jr-Dr,h:dn-kr}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ar,pixelOffsetBR:$a,minFontScaleX:Pe/b/S,minFontScaleY:je/b/V,isSDF:u}};if(f&&(_.stretchX||_.stretchY)){const mt=vL(I,X,M),Xe=vL(O,ee,B);for(let At=0;At<mt.length-1;At++){const xt=mt[At],St=mt[At+1];for(let Ot=0;Ot<Xe.length-1;Ot++)m.push(qe(xt,Xe[Ot],St,Xe[Ot+1]))}}else m.push(qe({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:N+1},{fixed:0,stretch:D+1}));return m}function xS(d,i,u){let f=0;for(const y of d)f+=Math.max(i,Math.min(u,y[1]))-Math.max(i,Math.min(u,y[0]));return f}function vL(d,i,u){const f=[{fixed:-1,stretch:0}];for(const[y,m]of d){const _=f[f.length-1];f.push({fixed:y-_.stretch,stretch:_.stretch}),f.push({fixed:y-_.stretch,stretch:_.stretch+(m-y)})}return f.push({fixed:i+OA,stretch:u}),f}function PS(d,i,u,f){return d/i*u+f}function ES(d,i,u,f){return d-i*u/f}function ree(d,i,u,f){const y=i+d.positionedLines[f].lineOffset;return f===0?u+y/2:u+(y+(i+d.positionedLines[f-1].lineOffset))/2}function nee(d,i=1,u=!1){let f=1/0,y=1/0,m=-1/0,_=-1/0;const b=d[0];for(let O=0;O<b.length;O++){const M=b[O];(!O||M.x<f)&&(f=M.x),(!O||M.y<y)&&(y=M.y),(!O||M.x>m)&&(m=M.x),(!O||M.y>_)&&(_=M.y)}const N=Math.min(m-f,_-y);let D=N/2;const S=new hc([],iee);if(N===0)return new It(f,y);for(let O=f;O<m;O+=N)for(let M=y;M<_;M+=N)S.push(new d_(O+D,M+D,D,d));let V=function(O){let M=0,B=0,X=0;const ee=O[0];for(let ue=0,le=ee.length,ne=le-1;ue<le;ne=ue++){const pe=ee[ue],we=ee[ne],Pe=pe.x*we.y-we.x*pe.y;B+=(pe.x+we.x)*Pe,X+=(pe.y+we.y)*Pe,M+=3*Pe}return new d_(B/M,X/M,0,O)}(d),I=S.length;for(;S.length;){const O=S.pop();(O.d>V.d||!V.d)&&(V=O,u&&console.log("found best %d after %d probes",Math.round(1e4*O.d)/1e4,I)),O.max-V.d<=i||(D=O.h/2,S.push(new d_(O.p.x-D,O.p.y-D,D,d)),S.push(new d_(O.p.x+D,O.p.y-D,D,d)),S.push(new d_(O.p.x-D,O.p.y+D,D,d)),S.push(new d_(O.p.x+D,O.p.y+D,D,d)),I+=4)}return u&&(console.log(`num probes: ${I}`),console.log(`best distance: ${V.d}`)),V.p}function iee(d,i){return i.max-d.max}class d_{constructor(i,u,f,y){this.p=new It(i,u),this.h=f,this.d=function(m,_){let b=!1,N=1/0;for(let D=0;D<_.length;D++){const S=_[D];for(let V=0,I=S.length,O=I-1;V<I;O=V++){const M=S[V],B=S[O];M.y>m.y!=B.y>m.y&&m.x<(B.x-M.x)*(m.y-M.y)/(B.y-M.y)+M.x&&(b=!b),N=Math.min(N,dt(m,M,B))}}return(b?1:-1)*Math.sqrt(N)}(this.p,y),this.max=this.d+this.h*Math.SQRT2}}const BP=Number.POSITIVE_INFINITY,see=Math.sqrt(2);function wL(d,[i,u]){let f=0,y=0;if(u===BP){i<0&&(i=0);const m=i/see;switch(d){case"top-right":case"top-left":y=m-7;break;case"bottom-right":case"bottom-left":y=7-m;break;case"bottom":y=7-i;break;case"top":y=i-7}switch(d){case"top-right":case"bottom-right":f=-m;break;case"top-left":case"bottom-left":f=m;break;case"left":f=i;break;case"right":f=-i}}else{switch(i=Math.abs(i),u=Math.abs(u),d){case"top-right":case"top-left":case"top":y=u-7;break;case"bottom-right":case"bottom-left":case"bottom":y=7-u}switch(d){case"top-right":case"bottom-right":case"right":f=-i;break;case"top-left":case"bottom-left":case"left":f=i}}return[f,y]}function RL(d,i,u,f,y,m,_,b){if(!d)return;const N=Ut(i,u,f,y,m);return d.scaleSelf(N*b*_)}function TL(d,i,u,f,y,m,_,b){return{iconPrimary:RL(d.getPrimary(),i,u,f,y,m,_,b),iconSecondary:RL(d.getSecondary(),i,u,f,y,m,_,b)}}function SL(d,i,u,f){if(!d)return;const y=i.get(u.toString());if(d.imagePrimary=y,f){const m=i.get(f.toString());d.imageSecondary=m}}function oee(d,i){for(const u in d.horizontal)CL(d.horizontal[u],i);CL(d.vertical,i)}function CL(d,i){if(d){for(const u of d.positionedLines)for(const f of u.positionedGlyphs)if(f.image!==null){const y=f.image.toString();f.rect=i.get(y).paddedRect}}}function GP(d){switch(d){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function lee(d,i,u,f,y,m,_,b,N){const D=jP(m.horizontal)||m.vertical,S=u.get("icon-text-fit-padding").evaluate(f,{},y);let V,I=i;return i&&N!=="none"&&(d.allowVerticalPlacement&&m.vertical&&(V=sL(i,m.vertical,N,S,b,_)),D&&(I=sL(i,D,N,S,b,_))),{defaultShapedIcon:I,verticallyShapedIcon:V}}function uee(d,i,u,f,y,m,_,b,N,D,S,V,I,O,M,B,X,ee,ue,le){let ne=_.textMaxSize.evaluate(i,{},I);ne===void 0?ne=b*_.textScaleFactor:ne*=_.textScaleFactor;const pe=d.layers[0].layout,we=jP(u.horizontal)||u.vertical,Pe=O.name==="globe",Ye=Fe,je=d.tilePixelRatio*ne/Ye,qe=(Ot=d.overscaling,d.zoom>18&&Ot>2&&(Ot>>=1),Math.max(Va/(512*Ot),1)*pe.get("symbol-spacing")),mt=pe.get("text-padding")*d.tilePixelRatio,Xe=pe.get("icon-padding")*d.tilePixelRatio,At=Na(pe.get("text-max-angle")),xt=pe.get("icon-rotation-alignment")==="map"&&le!=="point",St=qe/2;var Ot;d.hasAnyIconTextFit===!1&&X!=="none"&&(d.hasAnyIconTextFit=!0);const Nt=i.properties?+i.properties[Of]:null,kt=Nt&&d.elevationFeatureIdToIndex?d.elevationFeatureIdToIndex.get(Nt):65535,Mt=(Zt,ga,ma)=>{if(ga.x<0||ga.x>=Va||ga.y<0||ga.y>=Va)return;let Ya=null;if(Pe){const{x:Pa,y:Oa,z:va}=O.projectTilePoint(ga.x,ga.y,ma);Ya={anchor:new sy(Pa,Oa,va,0,void 0),up:O.upVector(ma,ga.x,ga.y)}}(function(Pa,Oa,va,Ar,$a,lr,Dr,Jr,kr,dn,Xr,wn,Kn,Ei,Lr,En,Yi,ls,ys,Ns,Si,ll,bc,Ao,xo,Iu,Ul,Qh,dg){const Ff=Pa.addToLineVertexArray(Oa,Ar);let Rp,hg,fg,FA,o6,l6,u6,c6=0,d6=0,h6=0,f6=0,RE=-1,TE=-1;const ym={};let p6=oo("");const UA=va?va.anchor:Oa,SE=Qh!=="none";let CE=0,bE=0;if(kr._unevaluatedLayout.getValue("text-radial-offset")===void 0?[CE,bE]=kr.layout.get("text-offset").evaluate(Si,{},xo).map(ef=>ef*Fe):(CE=kr.layout.get("text-radial-offset").evaluate(Si,{},xo)*Fe,bE=BP),Pa.allowVerticalPlacement&&$a.vertical){const ef=$a.vertical;if(Lr)l6=ZP(ef),Jr&&(u6=ZP(Jr));else{const Wd=kr.layout.get("text-rotate").evaluate(Si,{},xo)+90;fg=NS(dn,UA,Oa,Xr,wn,Kn,ef,Ei,Wd,En),Jr&&(FA=NS(dn,UA,Oa,Xr,wn,Kn,Jr,ls,Wd))}}if(lr){const ef=Pa.iconSizeData,Wd=kr.layout.get("icon-rotate").evaluate(Si,{},xo),mw=_L(lr,Wd,bc,SE,ll.iconScaleFactor),PE=Jr?_L(Jr,Wd,bc,SE,ll.iconScaleFactor):void 0;hg=NS(dn,UA,Oa,Xr,wn,Kn,lr,ls,Wd,null),c6=4*mw.length;let kA=null;ef.kind==="source"?(kA=[ct*kr.layout.get("icon-size").evaluate(Si,{},xo)*ll.iconScaleFactor],kA[0]>og&&en(`${Pa.layerIds[0]}: Value for "icon-size" is >= ${X1}. Reduce your "icon-size".`)):ef.kind==="composite"&&(kA=[ct*ll.compositeIconSizes[0].evaluate(Si,{},xo)*ll.iconScaleFactor,ct*ll.compositeIconSizes[1].evaluate(Si,{},xo)*ll.iconScaleFactor],(kA[0]>og||kA[1]>og)&&en(`${Pa.layerIds[0]}: Value for "icon-size" is >= ${X1}. Reduce your "icon-size".`)),Pa.addSymbols(Pa.icon,mw,kA,Ns,ys,Si,!1,va,Oa,Ff.lineStartIndex,Ff.lineLength,-1,Ao,xo,Iu,Ul),RE=Pa.icon.placedSymbolArray.length-1,PE&&(d6=4*PE.length,Pa.addSymbols(Pa.icon,PE,kA,Ns,ys,Si,Kd.vertical,va,Oa,Ff.lineStartIndex,Ff.lineLength,-1,Ao,xo,Iu,Ul),TE=Pa.icon.placedSymbolArray.length-1)}for(const ef in $a.horizontal){const Wd=$a.horizontal[ef];Rp||(p6=oo(Wd.text),Lr?o6=ZP(Wd):Rp=NS(dn,UA,Oa,Xr,wn,Kn,Wd,Ei,kr.layout.get("text-rotate").evaluate(Si,{},xo),En));const mw=Wd.positionedLines.length===1;if(h6+=bL(Pa,va,Oa,Wd,Dr,kr,Lr,Si,En,Ff,$a.vertical?Kd.horizontal:Kd.horizontalOnly,mw?Object.keys($a.horizontal):[ef],ym,RE,ll,Ao,xo,Iu),mw)break}$a.vertical&&(f6+=bL(Pa,va,Oa,$a.vertical,Dr,kr,Lr,Si,En,Ff,Kd.vertical,["vertical"],ym,TE,ll,Ao,xo,Iu));let pg=-1;const xE=(ef,Wd)=>ef?Math.max(ef,Wd):Wd;pg=xE(o6,pg),pg=xE(l6,pg),pg=xE(u6,pg);const Bte=pg>-1?1:0;Pa.glyphOffsetArray.length>=65535&&en("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Si.sortKey!==void 0&&Pa.addToSortKeyRanges(Pa.symbolInstances.length,Si.sortKey),Pa.symbolInstances.emplaceBack(Oa.x,Oa.y,UA.x,UA.y,UA.z,ym.right>=0?ym.right:-1,ym.center>=0?ym.center:-1,ym.left>=0?ym.left:-1,ym.vertical>=0?ym.vertical:-1,RE,TE,p6,Rp!==void 0?Rp:Pa.collisionBoxArray.length,Rp!==void 0?Rp+1:Pa.collisionBoxArray.length,fg!==void 0?fg:Pa.collisionBoxArray.length,fg!==void 0?fg+1:Pa.collisionBoxArray.length,hg!==void 0?hg:Pa.collisionBoxArray.length,hg!==void 0?hg+1:Pa.collisionBoxArray.length,FA||Pa.collisionBoxArray.length,FA?FA+1:Pa.collisionBoxArray.length,Xr,h6,f6,c6,d6,Bte,0,CE,bE,pg,0,SE?1:0,dg)})(d,ga,Ya,Zt,u,f,m,y,d.layers[0],d.collisionBoxArray,i.index,i.sourceLayerIndex,d.index,mt,ue,D,0,Xe,xt,ee,i,_,S,V,I,M,B,X,kt)};if(le==="line")for(const Zt of hL(i.geometry,0,0,Va,Va)){const ga=aee(Zt,qe,At,u.vertical||we,f,Ye,je,d.overscaling,Va);for(const ma of ga)we&&cee(d,we.text,St,ma)||Mt(Zt,ma,I)}else if(le==="line-center"){for(const Zt of i.geometry)if(Zt.length>1){const ga=tee(Zt,At,u.vertical||we,f,Ye,je);ga&&Mt(Zt,ga,I)}}else if(i.type==="Polygon")for(const Zt of _A(i.geometry,0)){const ga=nee(Zt,16);Mt(Zt[0],new sy(ga.x,ga.y,0,0,void 0),I)}else if(i.type==="LineString")for(const Zt of i.geometry)Mt(Zt,new sy(Zt[0].x,Zt[0].y,0,0,void 0),I);else if(i.type==="Point")for(const Zt of i.geometry)for(const ga of Zt)Mt([ga],new sy(ga.x,ga.y,0,0,void 0),I)}const X1=255,og=X1*ct;function bL(d,i,u,f,y,m,_,b,N,D,S,V,I,O,M,B,X,ee){const ue=function(pe,we,Pe,Ye,je,qe,mt,Xe){const At=[];if(we.positionedLines.length===0)return At;const xt=Ye.layout.get("text-rotate").evaluate(qe,{})*Math.PI/180,St=function(Zt){const ga=Zt[0],ma=Zt[1],Ya=ga*ma;return Ya>0?[ga,-ma]:Ya<0?[-ga,ma]:ga===0?[ma,ga]:[ma,-ga]}(Pe);let Ot=Math.abs(we.top-we.bottom);for(const Zt of we.positionedLines)Ot-=Zt.lineOffset;const Nt=we.positionedLines.length,kt=Ot/Nt;let Mt=we.top-Pe[1];for(let Zt=0;Zt<Nt;++Zt){const ga=we.positionedLines[Zt];Mt=ree(we,kt,Mt,Zt);for(const ma of ga.positionedGlyphs){if(!ma.rect)continue;const Ya=ma.rect||{};let Pa=LP+1,Oa=!0,va=1,Ar=0;if(ma.image){const Si=mt.get(ma.image.toString());if(!Si)continue;if(Si.sdf){en("SDF images are not supported in formatted text and will be ignored.");continue}Oa=!1,va=Si.pixelRatio,Pa=u_/va}const $a=(je||Xe)&&ma.vertical,lr=ma.metrics.advance*ma.scale/2,Dr=ma.metrics,Jr=ma.rect;if(Jr===null)continue;Xe&&we.verticalizable&&(Ar=ma.image?lr-ma.metrics.width*ma.scale/2:0);const kr=je?[ma.x+lr,ma.y]:[0,0];let dn=[0,0],Xr=[0,0],wn=!1;je||($a?(Xr=[ma.x+lr+St[0],ma.y+St[1]-Ar],wn=!0):dn=[ma.x+lr+Pe[0],ma.y+Pe[1]-Ar]);const Kn=Jr.w*ma.scale/(va*(ma.localGlyph?Ap:1)),Ei=Jr.h*ma.scale/(va*(ma.localGlyph?Ap:1));let Lr,En,Yi,ls;if($a){const Si=ma.y-Mt,ll=new It(-lr,lr-Si),bc=-Math.PI/2,Ao=new It(...Xr);Lr=new It(-lr+dn[0],dn[1]),Lr._rotateAround(bc,ll)._add(Ao),Lr.x+=-Si+lr,Lr.y-=(Dr.left-Pa)*ma.scale;const xo=ma.image?Dr.advance*ma.scale:Fe*ma.scale,Iu=String.fromCodePoint(ma.glyph);Qn(Iu)?Lr.x+=(1-Pa)*ma.scale:Ho(Iu)?Lr.x+=xo-Dr.height*ma.scale+(-Pa-1)*ma.scale:Lr.x+=ma.image||Dr.width+2*Pa===Jr.w&&Dr.height+2*Pa===Jr.h?(xo-Ei)/2:(xo-(Dr.height+2*Pa)*ma.scale)/2,En=new It(Lr.x,Lr.y-Kn),Yi=new It(Lr.x+Ei,Lr.y),ls=new It(Lr.x+Ei,Lr.y-Kn)}else{const Si=(Dr.left-Pa)*ma.scale-lr+dn[0],ll=(-Dr.top-Pa)*ma.scale+dn[1],bc=Si+Kn,Ao=ll+Ei;Lr=new It(Si,ll),En=new It(bc,ll),Yi=new It(Si,Ao),ls=new It(bc,Ao)}if(xt){let Si;Si=je?new It(0,0):wn?new It(St[0],St[1]):new It(Pe[0],Pe[1]),Lr._rotateAround(xt,Si),En._rotateAround(xt,Si),Yi._rotateAround(xt,Si),ls._rotateAround(xt,Si)}const ys=new It(0,0),Ns=new It(0,0);At.push({tl:Lr,tr:En,bl:Yi,br:ls,texPrimary:Ya,texSecondary:void 0,writingMode:we.writingMode,glyphOffset:kr,sectionIndex:ma.sectionIndex,isSDF:Oa,pixelOffsetTL:ys,pixelOffsetBR:Ns,minFontScaleX:0,minFontScaleY:0})}}return At}(0,f,N,m,_,b,y,d.allowVerticalPlacement),le=d.textSizeData;let ne=null;le.kind==="source"?(ne=[ct*m.layout.get("text-size").evaluate(b,{},X)*M.textScaleFactor],ne[0]>og&&en(`${d.layerIds[0]}: Value for "text-size" is >= ${X1}. Reduce your "text-size".`)):le.kind==="composite"&&(ne=[ct*M.compositeTextSizes[0].evaluate(b,{},X)*M.textScaleFactor,ct*M.compositeTextSizes[1].evaluate(b,{},X)*M.textScaleFactor],(ne[0]>og||ne[1]>og)&&en(`${d.layerIds[0]}: Value for "text-size" is >= ${X1}. Reduce your "text-size".`)),d.addSymbols(d.text,ue,ne,N,_,b,S,i,u,D.lineStartIndex,D.lineLength,O,B,X,ee,!1);for(const pe of V)I[pe]=d.text.placedSymbolArray.length-1;return 4*ue.length}function jP(d){for(const i in d)return d[i];return null}function NS(d,i,u,f,y,m,_,b,N,D){let S=_.top,V=_.bottom,I=_.left,O=_.right;const M=_.collisionPadding;if(M&&(I-=M[0],S-=M[1],O+=M[2],V+=M[3]),N){const B=new It(I,S),X=new It(O,S),ee=new It(I,V),ue=new It(O,V),le=Na(N);let ne=new It(0,0);D&&(ne=new It(D[0],D[1])),B._rotateAround(le,ne),X._rotateAround(le,ne),ee._rotateAround(le,ne),ue._rotateAround(le,ne),I=Math.min(B.x,X.x,ee.x,ue.x),O=Math.max(B.x,X.x,ee.x,ue.x),S=Math.min(B.y,X.y,ee.y,ue.y),V=Math.max(B.y,X.y,ee.y,ue.y)}return d.emplaceBack(i.x,i.y,i.z,u.x,u.y,I,S,O,V,b,f,y,m),d.length-1}function ZP(d){d.collisionPadding&&(d.top-=d.collisionPadding[1],d.bottom+=d.collisionPadding[3]);const i=d.bottom-d.top;return i>0?Math.max(10,i):null}function cee(d,i,u,f){const y=d.compareText;if(i in y){const m=y[i];for(let _=m.length-1;_>=0;_--)if(f.dist(m[_])<u)return!0}else y[i]=[];return y[i].push(f),!1}function xL(d,i){const u=d.fovAboveCenter,f=d.elevation?d.elevation.getMinElevationBelowMSL()*i:0,y=(d._camera.position[2]*d.worldSize-f)/Math.cos(d._pitch),m=Math.sin(u)*y/Math.sin(Math.max(Math.PI/2-d._pitch-u,.01));let _=Math.sin(d._pitch)*m+y;const b=y*(1/d._horizonShift);if(!d.elevation||d.elevation.exaggeration()===0){let N=Math.max(d.zoom-17,0);d.isOrthographic&&(N/=10),_*=1+N}return Math.min(1.01*_,b)}function J1(d,i){if(!i.isReprojectedInTileSpace)return{scale:1<<d.z,x:d.x,y:d.y,x2:d.x+1,y2:d.y+1,projection:i};const u=Math.pow(2,-d.z),f=d.x*u,y=(d.x+1)*u,m=d.y*u,_=(d.y+1)*u,b=Ou(f),N=Ou(y),D=Ri(m),S=Ri(_),V=i.project(b,D),I=i.project(N,D),O=i.project(N,S),M=i.project(b,S);let B=Math.min(V.x,I.x,O.x,M.x),X=Math.min(V.y,I.y,O.y,M.y),ee=Math.max(V.x,I.x,O.x,M.x),ue=Math.max(V.y,I.y,O.y,M.y);const le=u/16;function ne(we,Pe,Ye,je,qe,mt){const Xe=(Ye+qe)/2,At=(je+mt)/2,xt=i.project(Ou(Xe),Ri(At)),St=Math.max(0,B-xt.x,X-xt.y,xt.x-ee,xt.y-ue);B=Math.min(B,xt.x),ee=Math.max(ee,xt.x),X=Math.min(X,xt.y),ue=Math.max(ue,xt.y),St>le&&(ne(we,xt,Ye,je,Xe,At),ne(xt,Pe,Xe,At,qe,mt))}ne(V,I,f,m,y,m),ne(I,O,y,m,y,_),ne(O,M,y,_,f,_),ne(M,V,f,_,f,m),B-=le,X-=le,ee+=le,ue+=le;const pe=1/Math.max(ee-B,ue-X);return{scale:pe,x:B*pe,y:X*pe,x2:ee*pe,y2:ue*pe,projection:i}}function PL(d,{x:i,y:u},f=0){return new It(((i-f)*d.scale-d.x)*Va,(u*d.scale-d.y)*Va)}const dee=Ae.mat4.identity(new Float32Array(16));class lg{constructor(i){this.spec=i,this.name=i.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(i,u){return{x:0,y:0,z:0}}unproject(i,u){return new Ln(0,0)}projectTilePoint(i,u,f){return{x:i,y:u,z:0}}locationPoint(i,u,f,y=!0){return i._coordinatePoint(i.locationCoordinate(u,f),y)}pixelsPerMeter(i,u){return jo(1,i)*u}pixelSpaceConversion(i,u,f){return 1}farthestPixelDistance(i){return xL(i,i.pixelsPerMeter)}pointCoordinate(i,u,f,y){const m=i.horizonLineFromTop(!1),_=new It(u,Math.max(m,f));return i.rayIntersectionCoordinate(i.pointRayIntersection(_,y))}pointCoordinate3D(i,u,f){const y=new It(u,f);if(i.elevation)return i.elevation.pointCoordinate(y);{const m=this.pointCoordinate(i,y.x,y.y,0);return[m.x,m.y,m.z]}}isPointAboveHorizon(i,u){if(i.elevation&&i.elevation.visibleDemTiles.length)return!this.pointCoordinate3D(i,u.x,u.y);const f=i.horizonLineFromTop();return u.y<f}createInversionMatrix(i,u){return dee}createTileMatrix(i,u,f){let y,m,_;const b=f.canonical,N=Ae.mat4.identity(new Float64Array(16));if(this.isReprojectedInTileSpace){const D=J1(b,this);y=1,m=D.x+f.wrap*D.scale,_=D.y,Ae.mat4.scale(N,N,[y/D.scale,y/D.scale,i.pixelsPerMeter/u])}else y=u/i.zoomScale(b.z),m=(b.x+Math.pow(2,b.z)*f.wrap)*y,_=b.y*y;return Ae.mat4.translate(N,N,[m,_,0]),Ae.mat4.scale(N,N,[y/Va,y/Va,1]),N}upVector(i,u,f){return[0,0,1]}upVectorScale(i,u,f){return{metersToTile:1}}}class hee extends lg{constructor(i){super(i),this.range=[4,7],this.center=i.center||[-96,37.5];const[u,f]=this.parallels=i.parallels||[29.5,45.5],y=Math.sin(Na(u));this.n=(y+Math.sin(Na(f)))/2,this.c=1+y*(2*this.n-y),this.r0=Math.sqrt(this.c)/this.n}project(i,u){const{n:f,c:y,r0:m}=this,_=Na(i-this.center[0]),b=Na(u),N=Math.sqrt(y-2*f*Math.sin(b))/f;return{x:N*Math.sin(_*f),y:N*Math.cos(_*f)-m,z:0}}unproject(i,u){const{n:f,c:y,r0:m}=this,_=m+u;let b=Math.atan2(i,Math.abs(_))*Math.sign(_);_*f<0&&(b-=Math.PI*Math.sign(i)*Math.sign(_));const N=Na(this.center[0])*f;b=pn(b,-Math.PI-N,Math.PI-N);const D=ka(za(b/f)+this.center[0],-180,180),S=Math.asin(ka((y-(i*i+_*_)*f*f)/(2*f),-1,1)),V=ka(za(S),-85.051129,Du);return new Ln(D,V)}}const Q1=1.340264,ew=-.081106,tw=893e-6,aw=.003796,VS=Math.sqrt(3)/2;class fee extends lg{project(i,u){u=u/180*Math.PI,i=i/180*Math.PI;const f=Math.asin(VS*Math.sin(u)),y=f*f,m=y*y*y;return{x:.5*(i*Math.cos(f)/(VS*(Q1+3*ew*y+m*(7*tw+9*aw*y)))/Math.PI+.5),y:1-.5*(f*(Q1+ew*y+m*(tw+aw*y))/Math.PI+1),z:0}}unproject(i,u){i=(2*i-.5)*Math.PI;let f=u=(2*(1-u)-1)*Math.PI,y=f*f,m=y*y*y;for(let S,V,I,O=0;O<12&&(V=f*(Q1+ew*y+m*(tw+aw*y))-u,I=Q1+3*ew*y+m*(7*tw+9*aw*y),S=V/I,f=ka(f-S,-Math.PI/3,Math.PI/3),y=f*f,m=y*y*y,!(Math.abs(S)<1e-12));++O);const _=VS*i*(Q1+3*ew*y+m*(7*tw+9*aw*y))/Math.cos(f),b=Math.asin(Math.sin(f)/VS),N=ka(180*_/Math.PI,-180,180),D=ka(180*b/Math.PI,-85.051129,Du);return new Ln(N,D)}}class pee extends lg{constructor(i){super(i),this.wrap=!0,this.supportsWorldCopies=!0}project(i,u){return{x:.5+i/360,y:.5-u/360,z:0}}unproject(i,u){const f=360*(i-.5),y=ka(360*(.5-u),-85.051129,Du);return new Ln(f,y)}}const h_=Math.PI/2;function zS(d){return Math.tan((h_+d)/2)}class mee extends lg{constructor(i){super(i),this.center=i.center||[0,30];const[u,f]=this.parallels=i.parallels||[30,30];let y=Na(u),m=Na(f);this.southernCenter=y+m<0,this.southernCenter&&(y=-y,m=-m);const _=Math.cos(y),b=zS(y);this.n=y===m?Math.sin(y):Math.log(_/Math.cos(m))/Math.log(zS(m)/b),this.f=_*Math.pow(zS(y),this.n)/this.n}project(i,u){u=Na(u),this.southernCenter&&(u=-u),i=Na(i-this.center[0]);const f=1e-6,{n:y,f:m}=this;m>0?u<-h_+f&&(u=-h_+f):u>h_-f&&(u=h_-f);const _=m/Math.pow(zS(u),y);let b=_*Math.sin(y*i),N=m-_*Math.cos(y*i);return b=.5*(b/Math.PI+.5),N=.5*(N/Math.PI+.5),{x:b,y:this.southernCenter?N:1-N,z:0}}unproject(i,u){i=(2*i-.5)*Math.PI,this.southernCenter&&(u=1-u),u=(2*(1-u)-.5)*Math.PI;const{n:f,f:y}=this,m=y-u,_=Math.sign(m),b=Math.sign(f)*Math.sqrt(i*i+m*m);let N=Math.atan2(i,Math.abs(m))*_;m*f<0&&(N-=Math.PI*Math.sign(i)*_);const D=ka(za(N/f)+this.center[0],-180,180),S=ka(za(2*Math.atan(Math.pow(y/b,1/f))-h_),-85.051129,Du);return new Ln(D,this.southernCenter?-S:S)}}class EL extends lg{constructor(i){super(i),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(i,u){return{x:_l(i),y:Pi(u),z:0}}unproject(i,u){const f=Ou(i),y=Ri(u);return new Ln(f,y)}}const NL=Na(Du);class yee extends lg{project(i,u){const f=(u=Na(u))*u,y=f*f;return{x:.5*((i=Na(i))*(.8707-.131979*f+y*(y*(.003971*f-.001529*y)-.013791))/Math.PI+.5),y:1-.5*(u*(1.007226+f*(.015085+y*(.028874*f-.044475-.005916*y)))/Math.PI+1),z:0}}unproject(i,u){i=(2*i-.5)*Math.PI;let f=u=(2*(1-u)-1)*Math.PI,y=25,m=0,_=f*f;do{_=f*f;const D=_*_;m=(f*(1.007226+_*(.015085+D*(.028874*_-.044475-.005916*D)))-u)/(1.007226+_*(.045255+D*(.259866*_-.311325-.005916*11*D))),f=ka(f-m,-NL,NL)}while(Math.abs(m)>1e-6&&--y>0);_=f*f;const b=ka(za(i/(.8707+_*(_*(_*_*_*(.003971-.001529*_)-.013791)-.131979))),-180,180),N=za(f);return new Ln(b,N)}}const VL=Na(Du);class gee extends lg{project(i,u){u=Na(u),i=Na(i);const f=Math.cos(u),y=2/Math.PI,m=Math.acos(f*Math.cos(i/2)),_=Math.sin(m)/m,b=.5*(i*y+2*f*Math.sin(i/2)/_)||0,N=.5*(u+Math.sin(u)/_)||0;return{x:.5*(b/Math.PI+.5),y:1-.5*(N/Math.PI+1),z:0}}unproject(i,u){let f=i=(2*i-.5)*Math.PI,y=u=(2*(1-u)-1)*Math.PI,m=25;const _=1e-6;let b=0,N=0;do{const D=Math.cos(y),S=Math.sin(y),V=2*S*D,I=S*S,O=D*D,M=Math.cos(f/2),B=Math.sin(f/2),X=2*M*B,ee=B*B,ue=1-O*M*M,le=ue?1/ue:0,ne=ue?Math.acos(D*M)*Math.sqrt(1/ue):0,pe=.5*(2*ne*D*B+2*f/Math.PI)-i,we=.5*(ne*S+y)-u,Pe=.5*le*(O*ee+ne*D*M*I)+1/Math.PI,Ye=le*(X*V/4-ne*S*B),je=.125*le*(V*B-ne*S*O*X),qe=.5*le*(I*M+ne*ee*D)+.5,mt=Ye*je-qe*Pe;b=(we*Ye-pe*qe)/mt,N=(pe*je-we*Pe)/mt,f=ka(f-b,-Math.PI,Math.PI),y=ka(y-N,-VL,VL)}while((Math.abs(b)>_||Math.abs(N)>_)&&--m>0);return new Ln(za(f),za(y))}}class zL extends lg{constructor(i){super(i),this.center=i.center||[0,0],this.parallels=i.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(Na(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(i,u){const{scale:f,cosPhi:y}=this;return{x:Na(i)*y*f+.5,y:-Math.sin(Na(u))/y*f+.5,z:0}}unproject(i,u){const{scale:f,cosPhi:y}=this,m=-(u-.5)/f,_=ka(za((i-.5)/f)/y,-180,180),b=Math.asin(ka(m*y,-1,1)),N=ka(za(b),-85.051129,Du);return new Ln(_,N)}}class Aee extends EL{constructor(i){super(i),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(i,u,f){const y=On(i,u,f),m=Ti(hs(f));return Ae.vec3.transformMat4(y,y,m),{x:y[0],y:y[1],z:y[2]}}locationPoint(i,u,f){const y=Sc(u.lat,u.lng),m=Ae.vec3.normalize([],y),_=f?i._centerAltitude+f:i.elevation?i.elevation.getAtPointOrZero(i.locationCoordinate(u),i._centerAltitude):i._centerAltitude,b=jo(1,0)*Va*_;Ae.vec3.scaleAndAdd(y,y,m,b);const N=Ae.mat4.identity(new Float64Array(16));return Ae.mat4.multiply(N,i.pixelMatrix,i.globeMatrix),Ae.vec3.transformMat4(y,y,N),new It(y[0],y[1])}pixelsPerMeter(i,u){return jo(1,0)*u}pixelSpaceConversion(i,u,f){const y=jo(1,i)*u,m=fr(jo(1,45)*u,y,f);return this.pixelsPerMeter(i,u)/m}createTileMatrix(i,u,f){const y=os(hs(f.canonical));return Ae.mat4.multiply(new Float64Array(16),i.globeMatrix,y)}createInversionMatrix(i,u){const{center:f}=i,y=Ti(hs(u));return Ae.mat4.rotateY(y,y,Na(f.lng)),Ae.mat4.rotateX(y,y,Na(f.lat)),Ae.mat4.scale(y,y,[i._pixelsPerMercatorPixel,i._pixelsPerMercatorPixel,1]),Float32Array.from(y)}pointCoordinate(i,u,f,y){return cn(i,u,f,!0)||new o(0,0)}pointCoordinate3D(i,u,f){const y=this.pointCoordinate(i,u,f,0);return[y.x,y.y,y.z]}isPointAboveHorizon(i,u){return!cn(i,u.x,u.y,!1)}farthestPixelDistance(i){const u=function(y,m){const _=y.cameraToCenterDistance,b=y._centerAltitude*m,N=y._camera,D=y._camera.forward(),S=Ae.vec3.add([],Ae.vec3.scale([],D,-_),[0,0,b]),V=y.worldSize/(2*Math.PI),I=[0,0,-V],O=y.width/y.height,M=Math.tan(y.fovAboveCenter),B=Ae.vec3.scale([],N.up(),M),X=Ae.vec3.scale([],N.right(),M*O),ee=Ae.vec3.normalize([],Ae.vec3.add([],Ae.vec3.add([],D,B),X)),ue=[];let le;if(new Cr(S,ee).closestPointOnSphere(I,V,ue)){const ne=Ae.vec3.add([],ue,I),pe=Ae.vec3.sub([],ne,S);le=Math.cos(y.fovAboveCenter)*Ae.vec3.length(pe)}else{const ne=Ae.vec3.sub([],S,I),pe=Ae.vec3.sub([],I,S);Ae.vec3.normalize(pe,pe);const we=Ae.vec3.length(ne)-V;le=Math.sqrt(we*(we+2*V));const Pe=Math.acos(le/(V+we))-Math.acos(Ae.vec3.dot(D,pe));le*=Math.cos(Pe)}return 1.01*le}(i,this.pixelsPerMeter(i.center.lat,i.worldSize)),f=Ll(i.zoom);if(f>0){const y=xL(i,jo(1,i.center.lat)*i.worldSize),m=i.worldSize/(2*Math.PI),_=Math.max(i.width,i.height)/i.worldSize*Math.PI;return fr(u,y+m*(1-Math.cos(_)),Math.pow(f,10))}return u}upVector(i,u,f){return On(u,f,i,1)}upVectorScale(i){return{metersToTile:sn(oi(hs(i)))}}}function OL(d){const i=d.parallels,u=!!i&&Math.abs(i[0]+i[1])<.01;switch(d.name){case"mercator":return new EL(d);case"equirectangular":return new pee(d);case"naturalEarth":return new yee(d);case"equalEarth":return new fee(d);case"winkelTripel":return new gee(d);case"albers":return u?new zL(d):new hee(d);case"lambertConformalConic":return u?new zL(d):new mee(d);case"globe":return new Aee(d)}throw new Error(`Invalid projection name: ${d.name}`)}const _ee=bh.VectorTileFeature.types,vee=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function OS(d,i,u,f,y,m,_,b,N,D,S,V,I){const O=b?Math.min(og,Math.round(b[0])):0,M=b?Math.min(og,Math.round(b[1])):0;d.emplaceBack(i,u,Math.round(32*f),Math.round(32*y),m,_,(O<<1)+(N?1:0),M,16*D,16*S,256*V,256*I)}function DS(d,i,u){d.emplaceBack(i,u)}function MS(d,i,u,f,y,m,_){d.emplaceBack(i,u,f,y,m,_)}function IS(d,i,u,f,y){d.emplaceBack(i,u,f,y),d.emplaceBack(i,u,f,y),d.emplaceBack(i,u,f,y),d.emplaceBack(i,u,f,y)}function wee(d){for(const i of d.sections)if(vi(i.text))return!0;return!1}class qP{constructor(i){this.layoutVertexArray=new Ah,this.indexArray=new Ps,this.programConfigurations=i,this.segments=new Di,this.dynamicLayoutVertexArray=new Jc,this.opacityVertexArray=new np,this.placedSymbolArray=new yl,this.iconTransitioningVertexArray=new Bd,this.globeExtVertexArray=new Xc,this.zOffsetVertexArray=new Yc}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0&&this.iconTransitioningVertexArray.length===0}upload(i,u,f,y,m){this.isEmpty()||(f&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,SS.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,o_.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,vee,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=i.createVertexBuffer(this.iconTransitioningVertexArray,v.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=i.createVertexBuffer(this.globeExtVertexArray,IP.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||m)&&(this.zOffsetVertexBuffer=i.createVertexBuffer(this.zOffsetVertexArray,p.members,!0)),this.opacityVertexBuffer.itemSize=1),(f||y)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy())}}Pt(qP,"SymbolBuffers");class HP{constructor(i,u,f){this.layoutVertexArray=new i,this.layoutAttributes=u,this.indexArray=new f,this.segments=new Di,this.collisionVertexArray=new wc,this.collisionVertexArrayExt=new Jc}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,x.members,!0),this.collisionVertexBufferExt=i.createVertexBuffer(this.collisionVertexArrayExt,F.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Pt(HP,"CollisionBuffers");class LS{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.lut=i.lut,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(_=>_.fqid),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ae.mat4.identity([]),this.placementViewportMatrix=Ae.mat4.identity([]);const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=la(this.zoom,u["text-size"]),this.iconSizeData=la(this.zoom,u["icon-size"]);const f=this.layers[0].layout,y=f.get("symbol-sort-key"),m=f.get("symbol-z-order");this.canOverlap=f.get("text-allow-overlap")||f.get("icon-allow-overlap")||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=m!=="viewport-y"&&y.constantOr(1)!==void 0,this.sortFeaturesByY=(m==="viewport-y"||m==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=f.get("text-writing-mode").map(_=>Kd[_]),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id),this.sourceID=i.sourceID,this.projection=i.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=!1,this.elevationType="none",this.elevationStateComplete=!1,this.activeReplacements=[],this.replacementUpdateTime=0}createArrays(){this.text=new qP(new Rh(this.layers,{zoom:this.zoom,lut:this.lut},i=>i.startsWith("text")||i.startsWith("symbol"))),this.icon=new qP(new Rh(this.layers,{zoom:this.zoom,lut:this.lut},i=>i.startsWith("icon")||i.startsWith("symbol"))),this.glyphOffsetArray=new iA,this.lineVertexArray=new Qp,this.symbolInstances=new nA}calculateGlyphDependencies(i,u,f,y,m){for(const _ of i){const b=_.codePointAt(0);if(b===void 0)break;if(u[b]=!0,y&&m&&b<=65535){const N=Yr[_];N&&(u[N.charCodeAt(0)]=!0)}}}updateFootprints(i,u){}updateReplacement(i,u){if(u.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=u.updateTime;const f=u.getReplacementRegionsForTile(i.toUnwrapped(),!0);return!t_(this.activeReplacements,f)&&(this.activeReplacements=f,!0)}populate(i,u,f,y){const m=this.layers[0],_=m.layout,b=this.projection.name==="globe",N=_.get("text-font"),D=_.get("text-field"),S=_.get("icon-image"),[V,I]=_.get("icon-size-scale-range"),O=ka(u.scaleFactor||1,V,I),M=(D.value.kind!=="constant"||D.value.value instanceof us&&!D.value.value.isEmpty()||D.value.value.toString().length>0)&&(N.value.kind!=="constant"||N.value.value.length>0),B=S.value.kind!=="constant"||!!S.value.value||Object.keys(S.parameters).length>0,X=_.get("symbol-sort-key");if(this.features=[],!M&&!B)return;const ee=u.iconDependencies,ue=u.glyphDependencies,le=u.availableImages,ne=new vn(this.zoom);for(const{feature:pe,id:we,index:Pe,sourceLayerIndex:Ye}of i){const je=m._featureFilter.needGeometry,qe=W(pe,je);if(!m._featureFilter.filter(ne,qe,f))continue;if(je||(qe.geometry=$(pe,f,y)),b&&pe.type!==1&&f.z<=5){const St=qe.geometry,Ot=.98078528056,Nt=(kt,Mt)=>{const Zt=On(kt.x,kt.y,f,1),ga=On(Mt.x,Mt.y,f,1);return Ae.vec3.dot(Zt,ga)<Ot};for(let kt=0;kt<St.length;kt++)St[kt]=C(St[kt],Nt)}let mt,Xe;if(M){const St=m.getValueAndResolveTokens("text-field",qe,f,le),Ot=us.factory(St);wee(Ot)&&(this.hasRTLText=!0),(!this.hasRTLText||po()==="unavailable"||this.hasRTLText&&ss.isParsed())&&(mt=Za(Ot,m,qe))}if(B){const St=m.getValueAndResolveTokens("icon-image",qe,f,le);Xe=St instanceof Ts?St:Ts.build(St)}if(!mt&&!Xe)continue;const At=this.sortFeaturesByKey?X.evaluate(qe,{},f):void 0,xt={id:we,text:mt,icon:Xe,index:Pe,sourceLayerIndex:Ye,geometry:qe.geometry,properties:pe.properties,type:_ee[pe.type],sortKey:At};if(this.features.push(xt),Xe){const St=this.layers[0]._unevaluatedLayout._values,{iconPrimary:Ot,iconSecondary:Nt}=TL(Xe,this.iconSizeData,St["icon-size"],f,this.zoom,xt,this.pixelRatio,O),kt=Ot.id.toString();if(ee.has(kt)?ee.get(kt).push(Ot):ee.set(kt,[Ot]),Nt){const Mt=Nt.id.toString();ee.has(Mt)?ee.get(Mt).push(Nt):ee.set(Mt,[Nt])}}if(mt){const St=N.evaluate(qe,{},f).join(","),Ot=_.get("text-rotation-alignment")==="map"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Kd.vertical)>=0;for(const Nt of mt.sections)if(Nt.image){const kt=Nt.image.getPrimary().scaleSelf(this.pixelRatio),Mt=kt.id.toString(),Zt=ee.get(Mt)||[];Zt.push(kt),ee.set(Mt,Zt)}else{const kt=aa(mt.toString()),Mt=Nt.fontStack||St,Zt=ue[Mt]=ue[Mt]||{};this.calculateGlyphDependencies(Nt.text,Zt,Ot,this.allowVerticalPlacement,kt)}}}if(_.get("symbol-placement")==="line"&&(this.features=function(pe){const we={},Pe={},Ye=[];let je=0;function qe(xt){Ye.push(pe[xt]),je++}function mt(xt,St,Ot){const Nt=Pe[xt];return delete Pe[xt],Pe[St]=Nt,Ye[Nt].geometry[0].pop(),Ye[Nt].geometry[0]=Ye[Nt].geometry[0].concat(Ot[0]),Nt}function Xe(xt,St,Ot){const Nt=we[St];return delete we[St],we[xt]=Nt,Ye[Nt].geometry[0].shift(),Ye[Nt].geometry[0]=Ot[0].concat(Ye[Nt].geometry[0]),Nt}function At(xt,St,Ot){const Nt=Ot?St[0][St[0].length-1]:St[0][0];return`${xt}:${Nt.x}:${Nt.y}`}for(let xt=0;xt<pe.length;xt++){const St=pe[xt],Ot=St.geometry,Nt=St.text?St.text.toString():null;if(!Nt){qe(xt);continue}const kt=At(Nt,Ot),Mt=At(Nt,Ot,!0);if(kt in Pe&&Mt in we&&Pe[kt]!==we[Mt]){const Zt=Xe(kt,Mt,Ot),ga=mt(kt,Mt,Ye[Zt].geometry);delete we[kt],delete Pe[Mt],Pe[At(Nt,Ye[ga].geometry,!0)]=ga,Ye[Zt].geometry=null}else kt in Pe?mt(kt,Mt,Ot):Mt in we?Xe(kt,Mt,Ot):(qe(xt),we[kt]=je-1,Pe[Mt]=je-1)}return Ye.filter(xt=>xt.geometry)}(this.features)),_.get("symbol-elevation-reference")==="hd-road-markup"){if(this.elevationType="road",u.elevationFeatures){!this.elevationFeatures&&u.elevationFeatures.length>0&&(this.elevationFeatures=[],this.elevationFeatureIdToIndex=new Map);for(const pe of u.elevationFeatures)this.elevationFeatureIdToIndex.set(pe.id,this.elevationFeatures.length),this.elevationFeatures.push(pe)}}else _.get("symbol-z-elevate")&&(this.elevationType="offset");this.elevationType!=="none"&&(this.zOffsetBuffersNeedUpload=!0),this.sortFeaturesByKey&&this.features.sort((pe,we)=>pe.sortKey-we.sortKey)}update(i,u,f,y,m,_,b){this.text.programConfigurations.updatePaintArrays(i,u,m,f,y,_,b),this.icon.programConfigurations.updatePaintArrays(i,u,m,f,y,_,b)}updateRoadElevation(){if(this.elevationType!=="road"||!this.elevationFeatures||this.elevationStateComplete)return;this.elevationStateComplete=!0,this.hasAnyZOffset=!1;let i=!1;for(let u=0;u<this.symbolInstances.length;u++){const f=this.symbolInstances.get(u);if(f.elevationFeatureIndex===65535)continue;const y=this.elevationFeatures[f.elevationFeatureIndex];if(y){const m=.05+y.pointElevation(new It(f.tileAnchorX,f.tileAnchorY));f.zOffset!==m&&(i=!0,f.zOffset=m)}}i&&(this.zOffsetBuffersNeedUpload=!0,this.zOffsetSortDirty=!0)}updateZOffset(){const i=(m,_,b)=>{f+=_,f>m.length&&m.resize(f);for(let N=-_;N<0;N++)m.emplace(N+f,b)},u=(m,_,b)=>{y+=_,y>m.length&&m.resize(y);for(let N=-_;N<0;N++)m.emplace(N+y,b)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let f=0,y=0;for(let m=0;m<this.symbolInstances.length;m++){const _=this.symbolInstances.get(m),{numHorizontalGlyphVertices:b,numVerticalGlyphVertices:N,numIconVertices:D}=_,S=_.zOffset,V=D>0;if((b>0||N>0)&&(i(this.text.zOffsetVertexArray,b,S),i(this.text.zOffsetVertexArray,N,S)),V){const{placedIconSymbolIndex:I,verticalPlacedIconSymbolIndex:O}=_;I>=0&&u(this.icon.zOffsetVertexArray,D,S),O>=0&&u(this.icon.zOffsetVertexArray,_.numVerticalIconVertices,S)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=OL(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,u){const f=this.lineVertexArray.length;if(i.segment!==void 0)for(const{x:y,y:m}of u)this.lineVertexArray.emplaceBack(y,m);return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(i,u,f,y,m,_,b,N,D,S,V,I,O,M,B,X){const ee=i.indexArray,ue=i.layoutVertexArray,le=i.globeExtVertexArray,ne=i.segments.prepareSegment(4*u.length,ue,ee,this.canOverlap?_.sortKey:void 0),pe=this.glyphOffsetArray.length,we=ne.vertexLength,Pe=this.allowVerticalPlacement&&b===Kd.vertical?Math.PI/2:0,Ye=_.text&&_.text.sections;for(let qe=0;qe<u.length;qe++){const{tl:mt,tr:Xe,bl:At,br:xt,texPrimary:St,texSecondary:Ot,pixelOffsetTL:Nt,pixelOffsetBR:kt,minFontScaleX:Mt,minFontScaleY:Zt,glyphOffset:ga,isSDF:ma,sectionIndex:Ya}=u[qe],Pa=ne.vertexLength,Oa=ga[1];if(OS(ue,D.x,D.y,mt.x,Oa+mt.y,St.x,St.y,f,ma,Nt.x,Nt.y,Mt,Zt),OS(ue,D.x,D.y,Xe.x,Oa+Xe.y,St.x+St.w,St.y,f,ma,kt.x,Nt.y,Mt,Zt),OS(ue,D.x,D.y,At.x,Oa+At.y,St.x,St.y+St.h,f,ma,Nt.x,kt.y,Mt,Zt),OS(ue,D.x,D.y,xt.x,Oa+xt.y,St.x+St.w,St.y+St.h,f,ma,kt.x,kt.y,Mt,Zt),N){const{x:va,y:Ar,z:$a}=N.anchor,[lr,Dr,Jr]=N.up;MS(le,va,Ar,$a,lr,Dr,Jr),MS(le,va,Ar,$a,lr,Dr,Jr),MS(le,va,Ar,$a,lr,Dr,Jr),MS(le,va,Ar,$a,lr,Dr,Jr),IS(i.dynamicLayoutVertexArray,va,Ar,$a,Pe)}else IS(i.dynamicLayoutVertexArray,D.x,D.y,D.z,Pe);if(X){const va=Ot||St;DS(i.iconTransitioningVertexArray,va.x,va.y),DS(i.iconTransitioningVertexArray,va.x+va.w,va.y),DS(i.iconTransitioningVertexArray,va.x,va.y+va.h),DS(i.iconTransitioningVertexArray,va.x+va.w,va.y+va.h)}ee.emplaceBack(Pa,Pa+1,Pa+2),ee.emplaceBack(Pa+1,Pa+2,Pa+3),ne.vertexLength+=4,ne.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ga[0]),qe!==u.length-1&&Ya===u[qe+1].sectionIndex||i.programConfigurations.populatePaintArrays(ue.length,_,_.index,{},O,M,B,Ye&&Ye[Ya])}const je=N?N.anchor:D;i.placedSymbolArray.emplaceBack(je.x,je.y,je.z,D.x,D.y,pe,this.glyphOffsetArray.length-pe,we,S,V,D.segment,f?f[0]:0,f?f[1]:0,y[0],y[1],b,0,!1,0,I,0)}_commitLayoutVertex(i,u,f,y,m,_,b){i.emplaceBack(u,f,y,m,_,Math.round(b.x),Math.round(b.y))}_addCollisionDebugVertices(i,u,f,y,m,_,b){const N=f.segments.prepareSegment(4,f.layoutVertexArray,f.indexArray),D=N.vertexLength,S=b.tileAnchorX,V=b.tileAnchorY;for(let O=0;O<4;O++)f.collisionVertexArray.emplaceBack(0,0,0,0,0,0);this._commitDebugCollisionVertexUpdate(f.collisionVertexArrayExt,u,i.padding,b.zOffset),this._commitLayoutVertex(f.layoutVertexArray,y,m,_,S,V,new It(i.x1,i.y1)),this._commitLayoutVertex(f.layoutVertexArray,y,m,_,S,V,new It(i.x2,i.y1)),this._commitLayoutVertex(f.layoutVertexArray,y,m,_,S,V,new It(i.x2,i.y2)),this._commitLayoutVertex(f.layoutVertexArray,y,m,_,S,V,new It(i.x1,i.y2)),N.vertexLength+=4;const I=f.indexArray;I.emplaceBack(D,D+1),I.emplaceBack(D+1,D+2),I.emplaceBack(D+2,D+3),I.emplaceBack(D+3,D),N.primitiveLength+=4}_addTextDebugCollisionBoxes(i,u,f,y,m,_){for(let b=y;b<m;b++){const N=f.get(b),D=this.getSymbolInstanceTextSize(i,_,u,b);this._addCollisionDebugVertices(N,D,this.textCollisionBox,N.projectedAnchorX,N.projectedAnchorY,N.projectedAnchorZ,_)}}_addIconDebugCollisionBoxes(i,u,f,y,m,_){for(let b=y;b<m;b++){const N=f.get(b),D=this.getSymbolInstanceIconSize(i,u,_.placedIconSymbolIndex);this._addCollisionDebugVertices(N,D,this.iconCollisionBox,N.projectedAnchorX,N.projectedAnchorY,N.projectedAnchorZ,_)}}generateCollisionDebugBuffers(i,u,f){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new HP(vc,Y.members,Bd),this.iconCollisionBox=new HP(vc,Y.members,Bd);const y=nr(this.iconSizeData,i),m=nr(this.textSizeData,i,f);for(let _=0;_<this.symbolInstances.length;_++){const b=this.symbolInstances.get(_);this._addTextDebugCollisionBoxes(m,i,u,b.textBoxStartIndex,b.textBoxEndIndex,b),this._addTextDebugCollisionBoxes(m,i,u,b.verticalTextBoxStartIndex,b.verticalTextBoxEndIndex,b),this._addIconDebugCollisionBoxes(y,i,u,b.iconBoxStartIndex,b.iconBoxEndIndex,b),this._addIconDebugCollisionBoxes(y,i,u,b.verticalIconBoxStartIndex,b.verticalIconBoxEndIndex,b)}}getSymbolInstanceTextSize(i,u,f,y){const m=this.text.placedSymbolArray.get(u.rightJustifiedTextSymbolIndex>=0?u.rightJustifiedTextSymbolIndex:u.centerJustifiedTextSymbolIndex>=0?u.centerJustifiedTextSymbolIndex:u.leftJustifiedTextSymbolIndex>=0?u.leftJustifiedTextSymbolIndex:u.verticalPlacedTextSymbolIndex>=0?u.verticalPlacedTextSymbolIndex:y),_=ja(this.textSizeData,i,m)/Fe;return this.tilePixelRatio*_}getSymbolInstanceIconSize(i,u,f){const y=this.icon.placedSymbolArray.get(f),m=ja(this.iconSizeData,i,y);return this.tilePixelRatio*m}_commitDebugCollisionVertexUpdate(i,u,f,y){i.emplaceBack(u,-f,-f,y),i.emplaceBack(u,f,-f,y),i.emplaceBack(u,f,f,y),i.emplaceBack(u,-f,f,y)}_updateTextDebugCollisionBoxes(i,u,f,y,m,_,b){for(let N=y;N<m;N++){const D=f.get(N),S=this.getSymbolInstanceTextSize(i,_,u,N);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,S,D.padding,_.zOffset)}}_updateIconDebugCollisionBoxes(i,u,f,y,m,_,b){for(let N=y;N<m;N++){const D=f.get(N),S=this.getSymbolInstanceIconSize(i,u,_.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,S,D.padding,_.zOffset)}}updateCollisionDebugBuffers(i,u,f,y){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const m=nr(this.iconSizeData,i,y),_=nr(this.textSizeData,i,f);for(let b=0;b<this.symbolInstances.length;b++){const N=this.symbolInstances.get(b);this._updateTextDebugCollisionBoxes(_,i,u,N.textBoxStartIndex,N.textBoxEndIndex,N,f),this._updateTextDebugCollisionBoxes(_,i,u,N.verticalTextBoxStartIndex,N.verticalTextBoxEndIndex,N,f),this._updateIconDebugCollisionBoxes(m,i,u,N.iconBoxStartIndex,N.iconBoxEndIndex,N,y),this._updateIconDebugCollisionBoxes(m,i,u,N.verticalIconBoxStartIndex,N.verticalIconBoxEndIndex,N,y)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(i,u,f,y,m,_,b,N,D){const S={};if(u<f){const{x1:V,y1:I,x2:O,y2:M,padding:B,projectedAnchorX:X,projectedAnchorY:ee,projectedAnchorZ:ue,tileAnchorX:le,tileAnchorY:ne,featureIndex:pe}=i.get(u);S.textBox={x1:V,y1:I,x2:O,y2:M,padding:B,projectedAnchorX:X,projectedAnchorY:ee,projectedAnchorZ:ue,tileAnchorX:le,tileAnchorY:ne},S.textFeatureIndex=pe}if(y<m){const{x1:V,y1:I,x2:O,y2:M,padding:B,projectedAnchorX:X,projectedAnchorY:ee,projectedAnchorZ:ue,tileAnchorX:le,tileAnchorY:ne,featureIndex:pe}=i.get(y);S.verticalTextBox={x1:V,y1:I,x2:O,y2:M,padding:B,projectedAnchorX:X,projectedAnchorY:ee,projectedAnchorZ:ue,tileAnchorX:le,tileAnchorY:ne},S.verticalTextFeatureIndex=pe}if(_<b){const{x1:V,y1:I,x2:O,y2:M,padding:B,projectedAnchorX:X,projectedAnchorY:ee,projectedAnchorZ:ue,tileAnchorX:le,tileAnchorY:ne,featureIndex:pe}=i.get(_);S.iconBox={x1:V,y1:I,x2:O,y2:M,padding:B,projectedAnchorX:X,projectedAnchorY:ee,projectedAnchorZ:ue,tileAnchorX:le,tileAnchorY:ne},S.iconFeatureIndex=pe}if(N<D){const{x1:V,y1:I,x2:O,y2:M,padding:B,projectedAnchorX:X,projectedAnchorY:ee,projectedAnchorZ:ue,tileAnchorX:le,tileAnchorY:ne,featureIndex:pe}=i.get(N);S.verticalIconBox={x1:V,y1:I,x2:O,y2:M,padding:B,projectedAnchorX:X,projectedAnchorY:ee,projectedAnchorZ:ue,tileAnchorX:le,tileAnchorY:ne},S.verticalIconFeatureIndex=pe}return S}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const f=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(i,u){const f=i.placedSymbolArray.get(u),y=f.vertexStartIndex+4*f.numGlyphs;for(let m=f.vertexStartIndex;m<y;m+=4)i.indexArray.emplaceBack(m,m+1,m+2),i.indexArray.emplaceBack(m+1,m+2,m+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const u=Math.sin(i),f=Math.cos(i),y=[],m=[],_=[];for(let b=0;b<this.symbolInstances.length;++b){_.push(b);const N=this.symbolInstances.get(b);y.push(0|Math.round(u*N.tileAnchorX+f*N.tileAnchorY)),m.push(N.featureIndex)}return _.sort((b,N)=>y[b]-y[N]||m[N]-m[b]),_}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let i=0;i<this.symbolInstances.length;++i)this.symbolInstanceIndexesSortedZOffset.push(i)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((i,u)=>this.symbolInstances.get(u).zOffset-this.symbolInstances.get(i).zOffset)}addToSortKeyRanges(i,u){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===u?f.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const f=this.symbolInstances.get(u);this.featureSortOrder.push(f.featureIndex);const{rightJustifiedTextSymbolIndex:y,centerJustifiedTextSymbolIndex:m,leftJustifiedTextSymbolIndex:_,verticalPlacedTextSymbolIndex:b,placedIconSymbolIndex:N,verticalPlacedIconSymbolIndex:D}=f;y>=0&&this.addIndicesForPlacedSymbol(this.text,y),m>=0&&m!==y&&this.addIndicesForPlacedSymbol(this.text,m),_>=0&&_!==m&&_!==y&&this.addIndicesForPlacedSymbol(this.text,_),b>=0&&this.addIndicesForPlacedSymbol(this.text,b),N>=0&&this.addIndicesForPlacedSymbol(this.icon,N),D>=0&&this.addIndicesForPlacedSymbol(this.icon,D)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let DL,ML,$P;Pt(LS,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),LS.addDynamicAttributes=IS;class IL{constructor(i){this.type=i.property.overrides?i.property.overrides.runtimeType:lc,this.defaultValue=i}evaluate(i){if(i.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(i.formattedSection))return u.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Pt(IL,"FormatSectionOverride",{omit:["defaultValue"]});const KP=()=>$P||($P={layout:DL||(DL=new Oi({"symbol-placement":new ba(jt.layout_symbol["symbol-placement"]),"symbol-spacing":new ba(jt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ba(jt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ua(jt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ba(jt.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new ba(jt.layout_symbol["symbol-z-elevate"]),"symbol-elevation-reference":new ba(jt.layout_symbol["symbol-elevation-reference"]),"icon-allow-overlap":new ba(jt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new ba(jt.layout_symbol["icon-ignore-placement"]),"icon-optional":new ba(jt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ba(jt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ua(jt.layout_symbol["icon-size"]),"icon-size-scale-range":new ba(jt.layout_symbol["icon-size-scale-range"]),"icon-text-fit":new Ua(jt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ua(jt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ua(jt.layout_symbol["icon-image"]),"icon-rotate":new Ua(jt.layout_symbol["icon-rotate"]),"icon-padding":new ba(jt.layout_symbol["icon-padding"]),"icon-keep-upright":new ba(jt.layout_symbol["icon-keep-upright"]),"icon-offset":new Ua(jt.layout_symbol["icon-offset"]),"icon-anchor":new Ua(jt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ba(jt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ba(jt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ba(jt.layout_symbol["text-rotation-alignment"]),"text-field":new Ua(jt.layout_symbol["text-field"]),"text-font":new Ua(jt.layout_symbol["text-font"]),"text-size":new Ua(jt.layout_symbol["text-size"]),"text-size-scale-range":new ba(jt.layout_symbol["text-size-scale-range"]),"text-max-width":new Ua(jt.layout_symbol["text-max-width"]),"text-line-height":new Ua(jt.layout_symbol["text-line-height"]),"text-letter-spacing":new Ua(jt.layout_symbol["text-letter-spacing"]),"text-justify":new Ua(jt.layout_symbol["text-justify"]),"text-radial-offset":new Ua(jt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ba(jt.layout_symbol["text-variable-anchor"]),"text-anchor":new Ua(jt.layout_symbol["text-anchor"]),"text-max-angle":new ba(jt.layout_symbol["text-max-angle"]),"text-writing-mode":new ba(jt.layout_symbol["text-writing-mode"]),"text-rotate":new Ua(jt.layout_symbol["text-rotate"]),"text-padding":new ba(jt.layout_symbol["text-padding"]),"text-keep-upright":new ba(jt.layout_symbol["text-keep-upright"]),"text-transform":new Ua(jt.layout_symbol["text-transform"]),"text-offset":new Ua(jt.layout_symbol["text-offset"]),"text-allow-overlap":new ba(jt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new ba(jt.layout_symbol["text-ignore-placement"]),"text-optional":new ba(jt.layout_symbol["text-optional"]),visibility:new ba(jt.layout_symbol.visibility)})),paint:ML||(ML=new Oi({"icon-opacity":new Ua(jt.paint_symbol["icon-opacity"]),"icon-occlusion-opacity":new Ua(jt.paint_symbol["icon-occlusion-opacity"]),"icon-emissive-strength":new Ua(jt.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new Ua(jt.paint_symbol["text-emissive-strength"]),"icon-color":new Ua(jt.paint_symbol["icon-color"]),"icon-halo-color":new Ua(jt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ua(jt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ua(jt.paint_symbol["icon-halo-blur"]),"icon-translate":new ba(jt.paint_symbol["icon-translate"]),"icon-translate-anchor":new ba(jt.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new Ua(jt.paint_symbol["icon-image-cross-fade"]),"text-opacity":new Ua(jt.paint_symbol["text-opacity"]),"text-occlusion-opacity":new Ua(jt.paint_symbol["text-occlusion-opacity"]),"text-color":new Ua(jt.paint_symbol["text-color"],{runtimeType:Gs,getOverride:d=>d.textColor,hasOverride:d=>!!d.textColor}),"text-halo-color":new Ua(jt.paint_symbol["text-halo-color"]),"text-halo-width":new Ua(jt.paint_symbol["text-halo-width"]),"text-halo-blur":new Ua(jt.paint_symbol["text-halo-blur"]),"text-translate":new ba(jt.paint_symbol["text-translate"]),"text-translate-anchor":new ba(jt.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new ba(jt.paint_symbol["icon-color-saturation"]),"icon-color-contrast":new ba(jt.paint_symbol["icon-color-contrast"]),"icon-color-brightness-min":new ba(jt.paint_symbol["icon-color-brightness-min"]),"icon-color-brightness-max":new ba(jt.paint_symbol["icon-color-brightness-max"]),"symbol-z-offset":new Ua(jt.paint_symbol["symbol-z-offset"]),"icon-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"icon-halo-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"text-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"text-halo-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},$P);class FS extends ao{constructor(i,u,f,y){super(i,KP(),u,f,y),this._colorAdjustmentMatrix=Ae.mat4.identity([]),this.hasInitialOcclusionOpacityProperties=i.paint!==void 0&&("icon-occlusion-opacity"in i.paint||"text-occlusion-opacity"in i.paint)}recalculate(i,u){super.recalculate(i,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const f=this.layout.get("text-writing-mode");if(f){const y=[];for(const m of f)y.indexOf(m)<0&&y.push(m);this.layout._values["text-writing-mode"]=y}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getColorAdjustmentMatrix(i,u,f,y){return this._saturation===i&&this._contrast===u&&this._brightnessMin===f&&this._brightnessMax===y||(this._colorAdjustmentMatrix=function(m,_,b,N){m=Jt(m),_=Us(_);const D=Ae.mat4.create(),S=m/3,V=1-2*S,I=[V,S,S,0,S,V,S,0,S,S,V,0,0,0,0,1],O=.5-.5*_,M=N-b;return Ae.mat4.multiply(D,[M,0,0,0,0,M,0,0,0,0,M,0,b,b,b,1],[_,0,0,0,0,_,0,0,0,0,_,0,O,O,O,1]),Ae.mat4.multiply(D,D,I),D}(i,u,f,y),this._saturation=i,this._contrast=u,this._brightnessMin=f,this._brightnessMax=y),this._colorAdjustmentMatrix}getValueAndResolveTokens(i,u,f,y){const m=this.layout.get(i).evaluate(u,{},f,y),_=this._unevaluatedLayout._values[i];return _.isDataDriven()||jh(_.value)||!m?m:function(b,N){return N.replace(/{([^{}]+)}/g,(D,S)=>S in b?String(b[S]):"")}(u.properties,m)}createBucket(i){return new LS(i)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const i of KP().paint.overridableProperties){if(!FS.hasPaintOverride(this.layout,i))continue;const u=this.paint.get(i),f=new IL(u),y=new to(f,u.property.specification,this.scope,this.options);let m=null;m=u.value.kind==="constant"||u.value.kind==="source"?new Q("source",y):new fe("composite",y,u.value.zoomStops,u.value._interpolationType),this.paint._values[i]=new Dl(u.property,m,u.parameters)}}_handleOverridablePaintPropertyUpdate(i,u,f){return!(!this.layout||u.isDataDriven()||f.isDataDriven())&&FS.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,u){const f=i.get("text-field"),y=KP().paint.properties[u];let m=!1;const _=b=>{for(const N of b)if(y.overrides&&y.overrides.hasOverride(N))return void(m=!0)};if(f.value.kind==="constant"&&f.value.value instanceof us)_(f.value.value.sections);else if(f.value.kind==="source"){const b=D=>{m||(D instanceof Kl&&ji(D.value)===yu?_(D.value.sections):D instanceof Cd?_(D.sections):D.eachChild(b))},N=f.value;N._styleExpression&&b(N._styleExpression.expression)}return m}getProgramIds(){return["symbol"]}getDefaultProgramParams(i,u,f){return{config:new Yu(this,{zoom:u,lut:f}),overrideFog:!1}}}let LL,FL,UL,kL;var WP=xn([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);function YP(d){switch(d){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.RGBA;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.DEPTH_COMPONENT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.DEPTH_STENCIL;case WebGL2RenderingContext.R8:case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.RED}}function XP(d){switch(d){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.UNSIGNED_SHORT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.UNSIGNED_INT_24_8;case WebGL2RenderingContext.R8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.FLOAT}}class JP{constructor(i,u,f,y){this.context=i,this.format=f,this.useMipmap=y&&y.useMipmap,this.texture=i.gl.createTexture(),this.update(u,{premultiply:y&&y.premultiply})}update(i,u){const f=i&&i instanceof HTMLVideoElement&&i.width===0?i.videoWidth:i.width,y=i&&i instanceof HTMLVideoElement&&i.height===0?i.videoHeight:i.height,{context:m}=this,{gl:_}=m,{x:b,y:N}=u&&u.position?u.position:{x:0,y:0},D=b+f,S=N+y;!this.size||this.size[0]===D&&this.size[1]===S||(_.bindTexture(_.TEXTURE_2D,null),_.deleteTexture(this.texture),this.texture=_.createTexture(),this.size=null),_.bindTexture(_.TEXTURE_2D,this.texture),m.pixelStoreUnpackFlipY.set(!1),m.pixelStoreUnpack.set(1),m.pixelStoreUnpackPremultiplyAlpha.set(this.format===_.RGBA8&&(!u||u.premultiply!==!1));const V=i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||ImageBitmap&&i instanceof ImageBitmap;if(!this.size&&D>0&&S>0){const I=this.useMipmap?Math.floor(Math.log2(Math.max(D,S)))+1:1;_.texStorage2D(_.TEXTURE_2D,I,this.format,D,S),this.size=[D,S]}if(this.size)if(V)_.texSubImage2D(_.TEXTURE_2D,0,b,N,YP(this.format),XP(this.format),i);else{const I=i.data;I&&_.texSubImage2D(_.TEXTURE_2D,0,b,N,f,y,YP(this.format),XP(this.format),I)}this.useMipmap&&_.generateMipmap(_.TEXTURE_2D)}bind(i,u,f=!1){const{context:y}=this,{gl:m}=y;m.bindTexture(m.TEXTURE_2D,this.texture),i!==this.minFilter&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,i),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,this.useMipmap&&!f?i===m.NEAREST?m.NEAREST_MIPMAP_NEAREST:m.LINEAR_MIPMAP_LINEAR:i),this.minFilter=i),u!==this.wrapS&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,u),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,u),this.wrapS=u)}bindExtraParam(i,u,f,y){const{context:m}=this,{gl:_}=m;_.bindTexture(_.TEXTURE_2D,this.texture),u!==this.magFilter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,u),this.magFilter=u),i!==this.minFilter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,this.useMipmap?i===_.NEAREST?_.NEAREST_MIPMAP_NEAREST:_.LINEAR_MIPMAP_LINEAR:i),this.minFilter=i),f!==this.wrapS&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,f),this.wrapS=f),y!==this.wrapT&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,y),this.wrapT=y)}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}class US{constructor(i,u){this.context=i,this.texture=u}bind(i,u){const{context:f}=this,{gl:y}=f;y.bindTexture(y.TEXTURE_2D,this.texture),i!==this.minFilter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,i),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,i),this.minFilter=i),u!==this.wrapS&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,u),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,u),this.wrapS=u)}}function kS(d,i,u,f,y,m,_,b){const N=[d,i,1,u,f,1,y,m,1],D=[_,b,1],S=Ae.mat3.adjoint([],N),[V,I,O]=Ae.vec3.transformMat3(D,D,S);return Ae.mat3.multiply(N,N,[V,0,0,0,I,0,0,0,O])}function BL(d,i,u,f,y,m,_,b){const N=function(D,S,V,I,O,M,B,X){const ee=kS(0,0,1,0,1,1,0,1),ue=kS(D,S,V,I,O,M,B,X),le=Ae.mat3.adjoint([],ee);return Ae.mat3.multiply(ue,ue,le)}(d,i,u,f,y,m,_,b);return[N[2]/N[8]/Va,N[5]/N[8]/Va]}function BS(d){return[d[0],Math.min(Math.max(d[1],-85.051129),Du)]}class GL extends $l{constructor(i,u,f,y){super(),this.id=i,this.dispatcher=f,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(y),this.options=u,this._dirty=!1}load(i,u){if(this._loaded=u||!1,this.fire(new Lo("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return i&&(this.coordinates=i),this._loaded=!0,void this._finishLoading();this._imageRequest=ih(this.map._requestManager.transformRequest(this.url,ws.Image),(f,y)=>{this._imageRequest=null,this._loaded=!0,f?this.fire(new Rd(f)):y&&(this.image=y instanceof HTMLImageElement?Ht.getImageData(y):y,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,i&&(this.coordinates=i),this._finishLoading())})}loaded(){return this._loaded}updateImage(i){return i.url?(this._imageRequest&&i.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=i.url,this.load(i.coordinates,this._loaded),this):this}setTexture(i){if(!(i.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new US(this.map.painter.context,i.handle),this.width=i.dimensions[0],this.height=i.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new Lo("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(i){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof US||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(i){if(this.coordinates=i,this._boundsArray=void 0,this._unsupportedCoords=!1,!i.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let u=i[0][1],f=i[0][1];for(const m of i)m[1]>f&&(f=m[1]),m[1]<u&&(u=m[1]);const y=(f+u)/2;if(y>Du?this.onNorthPole=!0:y<-85.051129&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){const m=i.map(o.fromLngLat);this.tileID=function(_){let b=1/0,N=1/0,D=-1/0,S=-1/0;for(const B of _)b=Math.min(b,B.x),N=Math.min(N,B.y),D=Math.max(D,B.x),S=Math.max(S,B.y);const V=Math.max(D-b,S-N),I=Math.max(0,Math.floor(-Math.log(V)/Math.LN2)),O=Math.pow(2,I);let M=Math.floor((b+D)/2*O);return M>1&&(M-=1),new da(I,M,Math.floor((N+S)/2*O))}(m),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new Lo("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(i){for(const ee in this.tiles){const ue=this.tiles[ee];ue.state!=="loaded"&&(ue.state="loaded",ue.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;const u=J1(new da(0,0,0),this.map.transform.projection),f=[u.projection.project(this.coordinates[0][0],this.coordinates[0][1]),u.projection.project(this.coordinates[1][0],this.coordinates[1][1]),u.projection.project(this.coordinates[2][0],this.coordinates[2][1]),u.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!function(ee){const ue=ee[1].x-ee[0].x,le=ee[1].y-ee[0].y,ne=ee[2].x-ee[1].x,pe=ee[2].y-ee[1].y,we=ee[3].x-ee[2].x,Pe=ee[3].y-ee[2].y,Ye=ee[0].x-ee[3].x,je=ee[0].y-ee[3].y,qe=ue*pe-ne*le,mt=ne*Pe-we*pe,Xe=we*je-Ye*Pe,At=Ye*le-ue*je;return qe>0&&mt>0&&Xe>0&&At>0||qe<0&&mt<0&&Xe<0&&At<0}(f))return console.warn("Image source coordinates are defining non-convex area in the Mercator projection"),void(this._unsupportedCoords=!0);const y=J1(this.tileID,this.map.transform.projection),[m,_,b,N]=this.coordinates.map(ee=>{const ue=y.projection.project(ee[0],ee[1]);return PL(y,ue)._round()});this.perspectiveTransform=BL(m.x,m.y,_.x,_.y,b.x,b.y,N.x,N.y);const D=this._boundsArray=new Nu;D.emplaceBack(m.x,m.y,0,0),D.emplaceBack(_.x,_.y,Va,0),D.emplaceBack(N.x,N.y,0,Va),D.emplaceBack(b.x,b.y,Va,Va),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=i.createVertexBuffer(D,WP.members),this.boundsSegments=Di.simpleSegment(0,0,4,2);const S=[],V=[BS((I=this.coordinates)[0]),BS(I[1]),BS(I[2]),BS(I[3])];var I;const[O,M,B,X]=function(ee){let ue=ee[0][0],le=ue,ne=ee[0][1],pe=ne;for(let we=1;we<ee.length;we++)ee[we][0]<ue?ue=ee[we][0]:ee[we][0]>le&&(le=ee[we][0]),ee[we][1]<ne?ne=ee[we][1]:ee[we][1]>pe&&(pe=ee[we][1]);return[ue,ne,le-ue,pe-ne]}(V);{const ee=new Nu,[ue,le,ne,pe]=function(Nt){let kt=Nt[0].x,Mt=kt,Zt=Nt[0].y,ga=Zt;for(let ma=1;ma<Nt.length;ma++)Nt[ma].x<kt?kt=Nt[ma].x:Nt[ma].x>Mt&&(Mt=Nt[ma].x),Nt[ma].y<Zt?Zt=Nt[ma].y:Nt[ma].y>ga&&(ga=Nt[ma].y);return[kt,Zt,Mt-kt,ga-Zt]}(f),we=Nt=>[(Nt.x-ue)/ne,(Nt.y-le)/pe],[Pe,Ye,je,qe]=f.map(we),mt=function(Nt,kt,Mt,Zt,ga,ma,Ya,Pa){const Oa=kS(0,0,1,0,1,1,0,1),va=kS(Nt,kt,Mt,Zt,ga,ma,Ya,Pa),Ar=Ae.mat3.adjoint([],va);return Ae.mat3.multiply(Oa,Oa,Ar)}(Pe[0],Pe[1],Ye[0],Ye[1],je[0],je[1],qe[0],qe[1]);this.elevatedGlobePerspectiveTransform=BL(Pe[0],Pe[1],Ye[0],Ye[1],je[0],je[1],qe[0],qe[1]);const Xe=(Nt,kt)=>{S.push(Nt.lng);const Mt=Math.round((Nt.lng-O)/B*Va),Zt=Math.round((Nt.lat-M)/X*Va),ga=we(kt),ma=Ae.vec3.transformMat3([],[ga[0],ga[1],1],mt),Ya=Math.round(ma[0]/ma[2]*Va),Pa=Math.round(ma[1]/ma[2]*Va);ee.emplaceBack(Mt,Zt,Ya,Pa)},At=f[3].x-f[0].x,xt=f[3].y-f[0].y,St=f[2].x-f[1].x,Ot=f[2].y-f[1].y;for(let Nt=0;Nt<65;Nt++){const kt=Nt/64,Mt=[f[0].x+kt*At,f[0].y+kt*xt],Zt=[f[1].x+kt*St,f[1].y+kt*Ot],ga=Zt[0]-Mt[0],ma=Zt[1]-Mt[1];for(let Ya=0;Ya<65;Ya++){const Pa=Ya/64,Oa={x:Mt[0]+ga*Pa,y:Mt[1]+ma*Pa};Xe(u.projection.unproject(Oa.x,Oa.y),Oa)}}this.elevatedGlobeVertexBuffer=i.createVertexBuffer(ee,WP.members)}{this.maxLongitudeTriangleSize=0;let ee=[],ue=new Ps;const le=(ne,pe,we)=>{ue.emplaceBack(ne,pe,we);const Pe=S[ne],Ye=S[pe],je=S[we],qe=Math.min(Math.min(Pe,Ye),je),mt=Math.max(Math.max(Pe,Ye),je)-qe;mt>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=mt),ee.push(qe+mt/2)};for(let ne=0;ne<64;ne++)for(let pe=0;pe<64;pe++){const we=65*ne+pe,Pe=we+1,Ye=we+65,je=Ye+1;le(we,Ye,Pe),le(Pe,Ye,je)}[ee,ue]=function(ne,pe){const we=Array.from({length:ne.length},(je,qe)=>qe);we.sort((je,qe)=>ne[je]-ne[qe]);const Pe=[],Ye=new Ps;for(let je=0;je<we.length;je++){const qe=we[je];Pe.push(ne[qe]);const mt=3*qe,Xe=mt+1;Ye.emplaceBack(pe.uint16[mt],pe.uint16[Xe],pe.uint16[Xe+1])}return[Pe,Ye]}(ee,ue),this.elevatedGlobeTrianglesCenterLongitudes=ee,this.elevatedGlobeIndexBuffer=i.createIndexBuffer(ue)}this.elevatedGlobeSegments=Di.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,B/Va,0,X/Va,0,0,M,O,0])}prepare(){const i=Object.keys(this.tiles).length!==0;if(this.tileID&&!i)return;const u=this.map.painter.context,f=u.gl;!this._dirty||this.texture instanceof US||(this.texture?this.texture.update(this.image):(this.texture=new JP(u,this.image,f.RGBA8),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE)),this._dirty=!1),i&&this._prepareData(u)}loadTile(i,u){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},u(null)):(i.state="errored",u(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(i){const u=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!u)return null;const f=this.elevatedGlobeTrianglesCenterLongitudes;let y=(m=i+180)+360*Math.round((f[0]-m)/360);var m;const _=new Di,b=(V,I)=>{_.segments.push({vertexOffset:0,primitiveOffset:V,vertexLength:u.segments[0].vertexLength,primitiveLength:I,sortKey:void 0,vaos:{}})},N=.51*this.maxLongitudeTriangleSize;if(Math.abs(f[0]-y)<=N){const V=Vc(f,0,f.length,y+N);return V===f.length||b(V,ui(f,V+1,f.length,y+360-N)-V),_}y<f[0]&&(y+=360);const D=ui(f,0,f.length,y-N);if(D===f.length)return b(0,f.length),_;b(0,D-0);const S=Vc(f,D+1,f.length,y+N);return S!==f.length&&b(S,f.length-S),_}}const Ree=(Math.pow(256,2)-1)/16907520;class jL extends ao{constructor(i,u,f,y){super(i,{layout:UL||(UL=new Oi({visibility:new ba(jt.layout_raster.visibility)})),paint:kL||(kL=new Oi({"raster-opacity":new ba(jt.paint_raster["raster-opacity"]),"raster-color":new Ki(jt.paint_raster["raster-color"]),"raster-color-mix":new ba(jt.paint_raster["raster-color-mix"]),"raster-color-range":new ba(jt.paint_raster["raster-color-range"]),"raster-hue-rotate":new ba(jt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ba(jt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ba(jt.paint_raster["raster-brightness-max"]),"raster-saturation":new ba(jt.paint_raster["raster-saturation"]),"raster-contrast":new ba(jt.paint_raster["raster-contrast"]),"raster-resampling":new ba(jt.paint_raster["raster-resampling"]),"raster-fade-duration":new ba(jt.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new ba(jt.paint_raster["raster-emissive-strength"]),"raster-array-band":new ba(jt.paint_raster["raster-array-band"]),"raster-elevation":new ba(jt.paint_raster["raster-elevation"]),"raster-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},u,f,y),this.updateColorRamp(),this._curRampRange=[NaN,NaN]}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}tileCoverLift(){return this.paint.get("raster-elevation")}isDraped(i){return!(i&&i._source instanceof GL&&(i._source.onNorthPole||i._source.onSouthPole))&&this.paint.get("raster-elevation")===0}_handleSpecialPaintPropertyUpdate(i){i!=="raster-color"&&i!=="raster-color-range"||(this._curRampRange=[NaN,NaN],this.updateColorRamp())}updateColorRamp(i){if(!this.hasColorMap()||!this._curRampRange)return;const u=this._transitionablePaint._values["raster-color"].value.expression,[f,y]=i||this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0})||[NaN,NaN];isNaN(f)&&isNaN(y)||f===this._curRampRange[0]&&y===this._curRampRange[1]||(this.colorRamp=$y({expression:u,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:f,end:y}],resolution:256}),this.colorRampTexture=null,this._curRampRange=[f,y])}}let ZL,qL,HL,$L,KL;class WL extends ao{constructor(i,u,f,y){super(i,{layout:ZL||(ZL=new Oi({visibility:new ba(jt["layout_raster-particle"].visibility)})),paint:qL||(qL=new Oi({"raster-particle-array-band":new ba(jt["paint_raster-particle"]["raster-particle-array-band"]),"raster-particle-count":new ba(jt["paint_raster-particle"]["raster-particle-count"]),"raster-particle-color":new Ki(jt["paint_raster-particle"]["raster-particle-color"]),"raster-particle-max-speed":new ba(jt["paint_raster-particle"]["raster-particle-max-speed"]),"raster-particle-speed-factor":new ba(jt["paint_raster-particle"]["raster-particle-speed-factor"]),"raster-particle-fade-opacity-factor":new ba(jt["paint_raster-particle"]["raster-particle-fade-opacity-factor"]),"raster-particle-reset-rate-factor":new ba(jt["paint_raster-particle"]["raster-particle-reset-rate-factor"]),"raster-particle-elevation":new ba(jt["paint_raster-particle"]["raster-particle-elevation"]),"raster-particle-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},u,f,y),this._updateColorRamp(),this.lastInvalidatedAt=Ht.now()}onRemove(i){this.colorRampTexture&&this.colorRampTexture.destroy(),this.tileFramebuffer&&this.tileFramebuffer.destroy(),this.particleFramebuffer&&this.particleFramebuffer.destroy()}hasColorMap(){return!!this._transitionablePaint._values["raster-particle-color"].value.value}getProgramIds(){return["rasterParticle"]}hasOffscreenPass(){return this.visibility!=="none"}isDraped(i){return!1}_handleSpecialPaintPropertyUpdate(i){i!=="raster-particle-color"&&i!=="raster-particle-max-speed"||(this._updateColorRamp(),this._invalidateAnimationState()),i==="raster-particle-count"&&this._invalidateAnimationState()}_updateColorRamp(){if(!this.hasColorMap())return;const i=this._transitionablePaint._values["raster-particle-color"].value.expression,u=this._transitionablePaint._values["raster-particle-max-speed"].value.expression.evaluate({zoom:0});this.colorRamp=$y({expression:i,evaluationKey:"rasterParticleSpeed",image:this.colorRamp,clips:[{start:0,end:u}],resolution:256}),this.colorRampTexture=null}_invalidateAnimationState(){this.lastInvalidatedAt=Ht.now()}tileCoverLift(){return this.paint.get("raster-particle-elevation")}}class Tee extends ao{constructor(i,u){super(i,{},u,null),this.implementation=i,i.slot&&(this.slot=i.slot)}is3D(i){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isDraped(i){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)}onRemove(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)}}function QP(d,i,u){const f=[0,0,1],y=Ae.quat.identity([]);return Ae.quat.rotateY(y,y,u?-Na(d)+Math.PI:Na(d)),Ae.quat.rotateX(y,y,-Na(i)),Ae.vec3.transformQuat(f,f,y),Ae.vec3.normalize(f,f)}function YL(d,i){const u=GS(d.projection,d.zoom,d.width,d.height),f=function(m,_,b,N,D){const S=new Ln(b.lng-180*ug,b.lat),V=new Ln(b.lng+180*ug,b.lat),I=m.project(S.lng,S.lat),O=m.project(V.lng,V.lat),M=-Math.atan2(O.y-I.y,O.x-I.x),B=o.fromLngLat(b);B.y=ka(B.y,-1+ug,1-ug);const X=B.toLngLat(),ee=m.project(X.lng,X.lat),ue=o.fromLngLat(X);ue.x+=ug;const le=ue.toLngLat(),ne=m.project(le.lng,le.lat),pe=JL(ne.x-ee.x,ne.y-ee.y,M),we=o.fromLngLat(X);we.y+=ug;const Pe=we.toLngLat(),Ye=m.project(Pe.lng,Pe.lat),je=JL(Ye.x-ee.x,Ye.y-ee.y,M),qe=Math.abs(pe.x)/Math.abs(je.y),mt=Ae.mat4.identity([]);Ae.mat4.rotateZ(mt,mt,-M*(1-(D?0:N)));const Xe=Ae.mat4.identity([]);return Ae.mat4.scale(Xe,Xe,[1,1-(1-qe)*N,1]),Xe[4]=-je.x/je.y*N,Ae.mat4.rotateZ(Xe,Xe,M),Ae.mat4.multiply(Xe,mt,Xe),Xe}(d.projection,0,d.center,u,i),y=XL(d);return Ae.mat4.scale(f,f,[y,y,1]),f}function XL(d){const i=d.projection,u=GS(d.projection,d.zoom,d.width,d.height),f=eE(i,d.center),y=eE(i,Ln.convert(i.center));return Math.pow(2,f*u+(1-u)*y)}function GS(d,i,u,f,y=1/0){const m=d.range;if(!m)return 0;const _=Math.min(y,Math.max(u,f)),b=Math.log(_/1024)/Math.LN2;return jr(m[0]+b,m[1]+b,i)}const ug=1/4e4;function eE(d,i){const u=ka(i.lat,-85.051129,Du),f=new Ln(i.lng-180*ug,u),y=new Ln(i.lng+180*ug,u),m=d.project(f.lng,u),_=d.project(y.lng,u),b=o.fromLngLat(f),N=o.fromLngLat(y),D=_.x-m.x,S=_.y-m.y,V=N.x-b.x,I=N.y-b.y,O=Math.sqrt((V*V+I*I)/(D*D+S*S));return Math.log(O)/Math.LN2}function JL(d,i,u){const f=Math.cos(u),y=Math.sin(u);return{x:d*f-i*y,y:d*y+i*f}}function QL(d,i,u){Ae.mat4.identity(d),Ae.mat4.rotateZ(d,d,Na(i[2])),Ae.mat4.rotateX(d,d,Na(i[0])),Ae.mat4.rotateY(d,d,Na(i[1])),Ae.mat4.scale(d,d,u),Ae.mat4.multiply(d,d,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function jS(d,i,u,f,y,m,_,b){const N=[u[0]-i[0],u[1]-i[1],0],D=[f[0]-i[0],f[1]-i[1],0];if(Ae.vec3.length(N)<1e-12||Ae.vec3.length(D)<1e-12)return Ae.quat.identity(d);const S=Ae.vec3.cross([],N,D);Ae.vec3.normalize(S,S),Ae.vec3.subtract(D,f,i),N[2]=(m-y)*b,D[2]=(_-y)*b;const V=N;return Ae.vec3.cross(V,N,D),Ae.vec3.normalize(V,V),Ae.quat.rotationTo(d,S,V)}function tE(d,i,u=!1){const f=Ll(i.zoom),y=function(m,_,b){const N=_.worldSize,D=[m[12],m[13],m[14]],S=Ri(D[1]/N),V=Ou(D[0]/N),I=Ae.mat4.identity([]),O=jo(1,S)*N,M=jo(1,0)*N*Wh(S,_.zoom),B=1/Cc(N);let X=M*B;if(b){const ne=GS(_.projection,_.zoom,_.width,_.height,1024);X=B*_.projection.pixelSpaceConversion(_.center.lat,N,ne)}const ee=Sc(S,V);Ae.vec3.add(ee,ee,Ae.vec3.scale([],Ae.vec3.normalize([],ee),O*X*D[2]));const ue=function(ne){const pe=[ne[0],ne[1],ne[2]];let we=[0,1,0];const Pe=Ae.vec3.cross([],we,pe);return Ae.vec3.cross(we,pe,Pe),Ae.vec3.squaredLength(we)===0&&(we=[0,1,0],Ae.vec3.cross(Pe,pe,we)),Ae.vec3.normalize(Pe,Pe),Ae.vec3.normalize(we,we),Ae.vec3.normalize(pe,pe),[Pe[0],Pe[1],Pe[2],0,we[0],we[1],we[2],0,pe[0],pe[1],pe[2],0,ne[0],ne[1],ne[2],1]}(ee);Ae.mat4.scale(I,I,[X,X,X*O]),Ae.mat4.translate(I,I,[-D[0],-D[1],-D[2]]);const le=Ae.mat4.multiply([],_.globeMatrix,ue);return Ae.mat4.multiply(le,le,I),Ae.mat4.multiply(le,le,m),le}(d,i,u);if(f>0){const m=function(_,b){const N=b.worldSize,D=jo(1,0)*N*Wh(b.center.lat,b.zoom)/Cc(N),S=jo(1,b.center.lat)*N,V=Ae.mat4.identity([]);return Ae.mat4.rotateY(V,V,Na(b.center.lng)),Ae.mat4.rotateX(V,V,Na(b.center.lat)),Ae.mat4.translate(V,V,[0,0,Al]),Ae.mat4.scale(V,V,[D,D,D*S]),Ae.mat4.translate(V,V,[b.point.x-.5*N,b.point.y-.5*N,0]),Ae.mat4.multiply(V,V,_),Ae.mat4.multiply(V,b.globeMatrix,V)}(d,i);return function(_,b,N){const D=(M,B,X)=>{const ee=Ae.vec3.length(M),ue=Ae.vec3.length(B),le=ro(M,B,X);return Ae.vec3.scale(le,le,1/Ae.vec3.length(le)*fr(ee,ue,X))},S=D([_[0],_[1],_[2]],[b[0],b[1],b[2]],N),V=D([_[4],_[5],_[6]],[b[4],b[5],b[6]],N),I=D([_[8],_[9],_[10]],[b[8],b[9],b[10]],N),O=ro([_[12],_[13],_[14]],[b[12],b[13],b[14]],N);return[S[0],S[1],S[2],0,V[0],V[1],V[2],0,I[0],I[1],I[2],0,O[0],O[1],O[2],1]}(y,m,f)}return y}function eF(d,i,u,f){const y=tr.projectAabbCorners(f,u);let m=Number.MAX_VALUE,_=-1;for(let D=0;D<y.length;++D){const S=y[D];S[0]=(.5*S[0]+.5)*i.width,S[1]=(.5-.5*S[1])*i.height,S[2]<m&&(_=D,m=S[2])}const b=D=>new It(y[D][0],y[D][1]);let N;switch(_){case 0:case 6:N=[b(1),b(5),b(4),b(7),b(3),b(2),b(1)];break;case 1:case 7:N=[b(0),b(4),b(5),b(6),b(2),b(3),b(0)];break;case 3:case 5:N=[b(1),b(0),b(4),b(7),b(6),b(2),b(1)];break;default:N=[b(1),b(5),b(6),b(7),b(3),b(0),b(1)]}if(Te(d,N))return m}const See=xn([{name:"a_pos_3f",components:3,type:"Float32"}]),Cee=xn([{name:"a_color_3f",components:3,type:"Float32"}]),bee=xn([{name:"a_color_4f",components:4,type:"Float32"}]),xee=xn([{name:"a_uv_2f",components:2,type:"Float32"}]),Pee=xn([{name:"a_normal_3f",components:3,type:"Float32"}]),Eee=xn([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),Nee=xn([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]),tF={None:0,Model:1,Symbol:2,FillExtrusion:4,All:7};class ZS{constructor(i,u,f,y){this.message=(i?`${i}: `:"")+f,y&&(this.identifier=y),u!=null&&u.__line__&&(this.line=u.__line__)}}function aF(d,i){const u=d.indexOf("://")===-1;try{return new URL(d,u&&i?"http://example.com":void 0),!0}catch{return!1}}class rF{constructor(i,u){this.feature=i,this.instancedDataOffset=u,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class nF{constructor(){this.instancedDataArray=new Wm,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}}class aE{constructor(i){this.zoom=i.zoom,this.canonical=i.canonical,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.fqid),this.projection=i.projection,this.index=i.index,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0},this.modelUris=[],this.modelsRequested=!1,this.activeReplacements=[],this.replacementUpdateTime=0}updateFootprints(i,u){}populate(i,u,f,y){this.tileToMeter=g(f);const m=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);for(const{feature:_,id:b,index:N,sourceLayerIndex:D}of i){const S=b??(_.properties&&_.properties.hasOwnProperty("id")?_.properties.id:void 0),V=W(_,m);if(!this.layers[0]._featureFilter.filter(new vn(this.zoom),V,f))continue;const I={id:S,sourceLayerIndex:D,index:N,geometry:m?V.geometry:$(_,f,y),properties:_.properties,type:_.type,patterns:{}},O=this.addFeature(I,I.geometry,V);O&&u.featureIndex.insert(_,I.geometry,N,D,this.index,this.instancesPerModel[O].instancedDataArray.length,Va/32)}this.lookup=null}update(i,u,f,y){for(const m in this.instancesPerModel){const _=this.instancesPerModel[m];for(const b in i)_.idToFeaturesIndex.hasOwnProperty(b)&&(this.evaluate(_.features[_.idToFeaturesIndex[b]],i[b],_,!0),this.uploaded=!1)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let i=!1;for(const u in this.instancesPerModel){const f=this.instancesPerModel[u];for(const y of f.features){const m=this.layers[0],_=y.feature,b=this.canonical,N=m.paint.get("model-rotation").evaluate(_,{},b),D=m.paint.get("model-scale").evaluate(_,{},b),S=m.paint.get("model-translation").evaluate(_,{},b);Ae.vec3.exactEquals(y.rotation,N)&&Ae.vec3.exactEquals(y.scale,D)&&Ae.vec3.exactEquals(y.translation,S)||(this.evaluate(y,y.featureStates,f,!0),i=!0)}}return i}updateReplacement(i,u,f,y){if(u.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=u.updateTime;const m=u.getReplacementRegionsForTile(i.toUnwrapped(),!0);if(t_(this.activeReplacements,m))return!1;this.activeReplacements=m;let _=!1;for(const b in this.instancesPerModel){const N=this.instancesPerModel[b],D=N.instancedDataArray;for(const S of N.features){const V=S.instancedDataOffset,I=S.instancedDataCount;for(let O=0;O<I;O++){const M=16*(O+V);let B=D.float32[M+0];const X=B>Va;B=X?B-Va:B;const ee=Math.floor(B),ue=D.float32[M+1];let le=!1;for(const ne of this.activeReplacements)if(!Mf(ne,f,tF.Model,y)&&!(ne.min.x>ee||ee>ne.max.x||ne.min.y>ue||ue>ne.max.y)&&(le=fS(hS(ee,ue,i.canonical,ne.footprintTileId.canonical),ne.footprint),le))break;D.float32[M]=le?B+Va:B,_=_||le!==X}}}return _}isEmpty(){for(const i in this.instancesPerModel)if(this.instancesPerModel[i].instancedDataArray.length!==0)return!1;return!0}uploadPending(){return!this.uploaded}upload(i){if(!this.uploaded)for(const u in this.instancesPerModel){const f=this.instancesPerModel[u];f.instancedDataArray.length<0||f.instancedDataArray.length===0||(f.instancedDataBuffer?f.instancedDataBuffer.updateData(f.instancedDataArray):f.instancedDataBuffer=i.createVertexBuffer(f.instancedDataArray,Eee.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(){for(const u in this.instancesPerModel){const f=this.instancesPerModel[u];f.instancedDataArray.length!==0&&f.instancedDataBuffer&&f.instancedDataBuffer.destroy()}const i=this.layers[0].modelManager;if(i&&this.modelUris)for(const u of this.modelUris)i.removeModel(u,"")}addFeature(i,u,f){const y=this.layers[0],m=y.layout.get("model-id").evaluate(f,{},this.canonical);if(!m)return en(`modelId is not evaluated for layer ${y.id} and it is not going to get rendered.`),m;aF(m,!1)&&(this.modelUris.includes(m)||this.modelUris.push(m)),this.instancesPerModel[m]||(this.instancesPerModel[m]=new nF);const _=this.instancesPerModel[m],b=_.instancedDataArray,N=new rF(f,b.length);for(const D of u)for(const S of D){if(S.x<0||S.x>=Va||S.y<0||S.y>=Va)continue;const V=(this.lookupDim-1)/Va,I=this.lookupDim*(S.y*V|0)+S.x*V|0;if(this.lookup){if(this.lookup[I]!==0)continue;this.lookup[I]=1}this.instanceCount++;const O=b.length;b.resize(O+1),_.instancesEvaluatedElevation.push(0),b.float32[16*O]=S.x,b.float32[16*O+1]=S.y}return N.instancedDataCount=_.instancedDataArray.length-N.instancedDataOffset,N.instancedDataCount>0&&(i.id&&(_.idToFeaturesIndex[i.id]=_.features.length),_.features.push(N),this.evaluate(N,{},_,!1)),m}getModelUris(){return this.modelUris}evaluate(i,u,f,y){const m=this.layers[0],_=i.feature,b=this.canonical,N=i.rotation=m.paint.get("model-rotation").evaluate(_,u,b),D=i.scale=m.paint.get("model-scale").evaluate(_,u,b),S=i.translation=m.paint.get("model-translation").evaluate(_,u,b),V=m.paint.get("model-color").evaluate(_,u,b);V.a=m.paint.get("model-color-mix-intensity").evaluate(_,u,b);const I=[];this.maxVerticalOffset<S[2]&&(this.maxVerticalOffset=S[2]),this.maxScale=Math.max(Math.max(this.maxScale,D[0]),Math.max(D[1],D[2])),QL(I,N,D);const O=Math.round(100*V.a)+V.b/1.05;for(let M=0;M<i.instancedDataCount;++M){const B=i.instancedDataOffset+M,X=16*B,ee=f.instancedDataArray.float32;let ue=0;y&&(ue=ee[X+6]-f.instancesEvaluatedElevation[B]);const le=0|ee[X+1];ee[X]=(0|ee[X])+V.r/1.05,ee[X+1]=le+V.g/1.05,ee[X+2]=O,ee[X+3]=1/(b.z>10?this.tileToMeter:g(b,le)),ee[X+4]=S[0],ee[X+5]=S[1],ee[X+6]=S[2]+ue,ee[X+7]=I[0],ee[X+8]=I[1],ee[X+9]=I[2],ee[X+10]=I[4],ee[X+11]=I[5],ee[X+12]=I[6],ee[X+13]=I[8],ee[X+14]=I[9],ee[X+15]=I[10],f.instancesEvaluatedElevation[B]=S[2]}}}let iF,sF;Pt(aE,"ModelBucket",{omit:["layers"]}),Pt(nF,"PerModelAttributes"),Pt(rF,"ModelFeature");const DA=64,f_={CoordinateSpaceTile:1,CoordinateSpaceYUp:2,HasMapboxMeshFeatures:4,HasMeshoptCompression:8};function oF(d,i,u,f,y,m,_,b,N,D=!1){const S=u.zoom,V=u.project(f),I=Wh(f.lat,S),O=1/I;Ae.mat4.identity(d),Ae.mat4.translate(d,d,[V.x+_[0]*O,V.y+_[1]*O,_[2]]);let M=1,B=1;const X=u.worldSize;if(D){if(u.projection.name==="mercator"){let ne=0;u.elevation&&(ne=u.elevation.getAtPointOrZero(new o(V.x/X,V.y/X),0));const pe=Ae.vec4.transformMat4([],[V.x,V.y,ne,1],u.projMatrix)[3]/u.cameraToCenterDistance;M=pe,B=pe*Wh(u.center.lat,S)}else if(u.projection.name==="globe"){const ne=tE(d,u),pe=Ae.mat4.multiply([],u.projMatrix,ne),we=[0,0,0,1];Ae.vec4.transformMat4(we,we,pe);const Pe=we[3]/u.cameraToCenterDistance,Ye=Ll(S),je=u.projection.pixelsPerMeter(f.lat,X)*Wh(f.lat,S),qe=u.projection.pixelsPerMeter(u.center.lat,X)*Wh(u.center.lat,S);M=Pe/fr(je,mA(u.center.lat),Ye),B=Pe*I/je,M*=qe,B*=qe}}else M=O;Ae.mat4.scale(d,d,[M,M,B]);const ee=[...d],ue=i.orientation,le=[];if(QL(le,[ue[0]+y[0],ue[1]+y[1],ue[2]+y[2]],m),Ae.mat4.multiply(d,ee,le),b&&u.elevation){let ne=0;const pe=[];if(N&&u.elevation){ne=function(Ye,je,qe,mt,Xe){const At=je.elevation;if(!At)return 0;const xt=tr.projectAabbCorners(qe,mt),St=jo(1,Xe.lat)*je.worldSize,Ot=function(Ar,$a){const lr=[0,0,1],Dr=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(const Jr of Dr){const kr=Ar[Jr.corners[0]],dn=Ar[Jr.corners[1]],Xr=Ar[Jr.corners[2]],wn=[dn[0]-kr[0],dn[1]-kr[1],$a*(dn[2]-kr[2])],Kn=Ae.vec3.cross(wn,wn,[Xr[0]-kr[0],Xr[1]-kr[1],$a*(Xr[2]-kr[2])]);Ae.vec3.normalize(Kn,Kn),Jr.dotProductWithUp=Ae.vec3.dot(Kn,lr)}return Dr.sort((Jr,kr)=>Jr.dotProductWithUp-kr.dotProductWithUp),Dr[0].corners}(xt,St),Nt=xt[Ot[0]],kt=xt[Ot[1]],Mt=xt[Ot[2]],Zt=xt[Ot[3]],ga=At.getAtPointOrZero(new o(Nt[0]/je.worldSize,Nt[1]/je.worldSize),0),ma=At.getAtPointOrZero(new o(kt[0]/je.worldSize,kt[1]/je.worldSize),0),Ya=At.getAtPointOrZero(new o(Mt[0]/je.worldSize,Mt[1]/je.worldSize),0),Pa=At.getAtPointOrZero(new o(Zt[0]/je.worldSize,Zt[1]/je.worldSize),0),Oa=(ga+Pa)/2,va=(ma+Ya)/2;return Oa>va?ma<Ya?jS(Ye,kt,Zt,Nt,ma,Pa,ga,St):jS(Ye,Mt,Nt,Zt,Ya,ga,Pa,St):ga<Pa?jS(Ye,Nt,kt,Mt,ga,ma,Ya,St):jS(Ye,Zt,Mt,kt,Pa,Ya,ma,St),Math.max(Oa,va)}(pe,u,i.aabb,d,f);const we=Ae.mat4.fromQuat([],pe),Pe=Ae.mat4.multiply([],we,le);Ae.mat4.multiply(d,ee,Pe)}else ne=u.elevation.getAtPointOrZero(new o(V.x/X,V.y/X),0);ne!==0&&(d[14]+=ne)}}function rw(d,i,u=!1){d.uploaded||(d.gfxTexture=new JP(i,d.image,u?i.gl.R8:i.gl.RGBA8,{useMipmap:d.sampler.minFilter>=i.gl.NEAREST_MIPMAP_NEAREST}),d.uploaded=!0,d.image=null)}function Vee(d,i,u){d.indexBuffer=i.createIndexBuffer(d.indexArray,!1,!0),d.vertexBuffer=i.createVertexBuffer(d.vertexArray,See.members,!1,!0),d.normalArray&&(d.normalBuffer=i.createVertexBuffer(d.normalArray,Pee.members,!1,!0)),d.texcoordArray&&(d.texcoordBuffer=i.createVertexBuffer(d.texcoordArray,xee.members,!1,!0)),d.colorArray&&(d.colorBuffer=i.createVertexBuffer(d.colorArray,(d.colorArray.bytesPerElement===12?Cee:bee).members,!1,!0)),d.featureArray&&(d.pbrBuffer=i.createVertexBuffer(d.featureArray,Nee.members,!0)),d.segments=Di.simpleSegment(0,0,d.vertexArray.length,d.indexArray.length);const f=d.material;f.pbrMetallicRoughness.baseColorTexture&&rw(f.pbrMetallicRoughness.baseColorTexture,i),f.pbrMetallicRoughness.metallicRoughnessTexture&&rw(f.pbrMetallicRoughness.metallicRoughnessTexture,i),f.normalTexture&&rw(f.normalTexture,i),f.occlusionTexture&&rw(f.occlusionTexture,i,u),f.emissionTexture&&rw(f.emissionTexture,i)}function rE(d,i,u){if(d.meshes)for(const f of d.meshes)Vee(f,i,u);if(d.children)for(const f of d.children)rE(f,i,u)}function qS(d){if(d.meshes)for(const i of d.meshes)i.indexArray.destroy(),i.vertexArray.destroy(),i.colorArray&&i.colorArray.destroy(),i.normalArray&&i.normalArray.destroy(),i.texcoordArray&&i.texcoordArray.destroy(),i.featureArray&&i.featureArray.destroy();if(d.children)for(const i of d.children)qS(i)}function nE(d){if(d.meshes)for(const u of d.meshes)u.vertexBuffer&&(u.vertexBuffer.destroy(),u.indexBuffer.destroy(),u.normalBuffer&&u.normalBuffer.destroy(),u.texcoordBuffer&&u.texcoordBuffer.destroy(),u.colorBuffer&&u.colorBuffer.destroy(),u.pbrBuffer&&u.pbrBuffer.destroy(),u.segments.destroy(),u.material&&((i=u.material).pbrMetallicRoughness.baseColorTexture&&i.pbrMetallicRoughness.baseColorTexture.gfxTexture&&i.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),i.pbrMetallicRoughness.metallicRoughnessTexture&&i.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&i.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),i.normalTexture&&i.normalTexture.gfxTexture&&i.normalTexture.gfxTexture.destroy(),i.emissionTexture&&i.emissionTexture.gfxTexture&&i.emissionTexture.gfxTexture.destroy(),i.occlusionTexture&&i.occlusionTexture.gfxTexture&&i.occlusionTexture.gfxTexture.destroy()));var i;if(d.children)for(const u of d.children)nE(u)}class p_{constructor(i,u,f){this._demTile=i,this._dem=this._demTile.dem,this._scale=u,this._offset=f}static create(i,u,f){const y=f||i.findDEMTileFor(u);if(!y||!y.dem)return;const m=y.dem,_=y.tileID,b=1<<u.canonical.z-_.canonical.z;return new p_(y,m.dim/Va/b,[(u.canonical.x/b-_.canonical.x)*m.dim,(u.canonical.y/b-_.canonical.y)*m.dim])}tileCoordToPixel(i,u){const f=u*this._scale+this._offset[1],y=Math.floor(i*this._scale+this._offset[0]),m=Math.floor(f);return new It(y,m)}getElevationAt(i,u,f,y){const m=i*this._scale+this._offset[0],_=u*this._scale+this._offset[1],b=Math.floor(m),N=Math.floor(_),D=this._dem;return y=!!y,f?fr(fr(D.get(b,N,y),D.get(b,N+1,y),_-N),fr(D.get(b+1,N,y),D.get(b+1,N+1,y),_-N),m-b):D.get(b,N,y)}getElevationAtPixel(i,u,f){return this._dem.get(i,u,!!f)}getMeterToDEM(i){return(1<<this._demTile.tileID.canonical.z)*jo(1,i)*this._dem.stride}}const iE=new Float32Array(262144),MA=new Uint8Array(262144);function lF(d){let i=0;if(d.meshes)for(const u of d.meshes)i=Math.max(i,u.aabb.max[2]);if(d.children)for(const u of d.children)i=Math.max(i,lF(u));return i}function uF(d,i,u){if(d.meshes)for(const f of d.meshes){if(f.aabb.min[0]===1/0)continue;const y=tr.applyTransform(f.aabb,d.matrix);u.insert(i,y.min[0],y.min[1],y.max[0],y.max[1])}if(d.children)for(const f of d.children)uF(f,i,u)}const cF=["","wall","door","roof","window","lamp","logo"];class dF{constructor(i){this.node=i,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.cameraCollisionOpacity=1,this.feature={type:"Point",id:i.id,geometry:[],properties:{height:lF(i)}},this.aabb=this._getLocalBounds(),this.state=null}_getLocalBounds(){if(!this.node.meshes)return new tr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);if(!this.aabb){let i=0;const u=new tr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);for(const f of this.node.meshes)this.node.lightMeshIndex!==i&&(f.transformedAabb=tr.applyTransformFast(f.aabb,this.node.matrix),u.encapsulate(f.transformedAabb)),i++;this.aabb=u}return this.aabb}}class HS{constructor(i,u,f,y,m,_,b){this.id=f,this.layers=i,this.layerIds=this.layers.map(N=>N.fqid),this.stateDependentLayerIds=this.layers.filter(N=>N.isStateDependent()).map(N=>N.id),this.modelTraits|=f_.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,y&&(this.modelTraits|=f_.HasMapboxMeshFeatures),m&&(this.modelTraits|=f_.HasMeshoptCompression),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=_,this.dirty=!0,this.needsUpload=!1,this.filter=null,this.nodesInfo=[];for(const N of u)this.nodesInfo.push(new dF(N)),uF(N,b.featureIndexArray.length,b.grid),b.featureIndexArray.emplaceBack(this.nodesInfo.length-1,0,b.bucketLayerIDs.length-1,0);this.states={}}updateFootprints(i,u){for(const f of this.getNodesInfo()){const y=f.node;y.footprint&&u.push({footprint:y.footprint,id:i})}}update(i){const u=Object.keys(i).length!==0;if(u&&!this.stateDependentLayers.length)return;const f=u?this.stateDependentLayers:this.layers;if(!ta(i,this.states))for(const y of f)this.evaluate(y,i);this.states=structuredClone(i)}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(i){if(!this.needsUpload)return;const u=this.getNodesInfo();for(const f of u){const y=f.node;this.uploaded?this.updatePbrBuffer(y):rE(y,i,!0)}for(const f of u)qS(f.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(i){let u=!1;if(!i.meshes)return u;for(const f of i.meshes)f.pbrBuffer&&(f.pbrBuffer.updateData(f.featureArray),u=!0);return u}needsReEvaluation(i,u,f){const y=i.transform.projectionOptions,m=i.style.getBrightness(),_=this.brightness!==m;if(!this.uploaded||this.dirty||y.name!==this.projection.name||nw(f.paint.get("model-color").value,_)||nw(f.paint.get("model-color-mix-intensity").value,_)||nw(f.paint.get("model-roughness").value,_)||nw(f.paint.get("model-emissive-strength").value,_)||nw(f.paint.get("model-height-based-emissive-strength-multiplier").value,_)){this.projection=y,this.brightness=m;const b=this.getNodesInfo();for(const N of b)N.state=null;return!0}return!1}evaluateScale(i,u){if(i.transform.zoom===this.zoom)return;this.zoom=i.transform.zoom;const f=this.getNodesInfo(),y=this.id.canonical;for(const m of f){const _=m.feature;m.evaluatedScale=u.paint.get("model-scale").evaluate(_,{},y)}}evaluate(i,u){const f=this.getNodesInfo();for(const y of f){if(!y.node.meshes)continue;const m=y.feature,_=u&&u[m.id];if(ta(_,y.state))continue;y.state=structuredClone(_);const b=y.node.meshes&&y.node.meshes[0].featureData,N=y.evaluatedColor[2],D=y.evaluatedRMEA[2],S=this.id.canonical;if(y.hasTranslucentParts=!1,b){for(let V=0;V<cF.length;V++){const I=cF[V];I.length&&(m.properties.part=I);const O=i.paint.get("model-color").evaluate(m,_,S).toRenderColor(null),M=i.paint.get("model-color-mix-intensity").evaluate(m,_,S);y.evaluatedColor[V]=[O.r,O.g,O.b,M],y.evaluatedRMEA[V][0]=i.paint.get("model-roughness").evaluate(m,_,S),y.evaluatedRMEA[V][2]=i.paint.get("model-emissive-strength").evaluate(m,_,S),y.evaluatedRMEA[V][3]=O.a,y.emissionHeightBasedParams[V]=i.paint.get("model-height-based-emissive-strength-multiplier").evaluate(m,_,S),!y.hasTranslucentParts&&O.a<1&&(y.hasTranslucentParts=!0)}delete m.properties.part,Oee(y,N!==y.evaluatedColor[2]||D!==y.evaluatedRMEA[2],this.modelTraits)}else y.evaluatedRMEA[0][2]=i.paint.get("model-emissive-strength").evaluate(m,_,S);y.evaluatedScale=i.paint.get("model-scale").evaluate(m,_,S),this.updatePbrBuffer(y.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(i,u,f,y){const m=i.findDEMTileFor(f);if(m&&(m.tileID.canonical!==this.terrainTile||u!==this.terrainExaggeration)){if(m.dem&&m.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=m.tileID.overscaledZ;const _=p_.create(i,f,m);if(!_)return;this.modelTraits&f_.HasMapboxMeshFeatures&&this.updateDEM(i,_,f,y);for(const b of this.getNodesInfo()){const N=b.node;if(!N.footprint||!N.footprint.vertices||!N.footprint.vertices.length)continue;const D=N.footprint.vertices;let S=_.getElevationAt(D[0].x,D[0].y,!0,!0);for(let V=1;V<D.length;V++)S=Math.min(S,_.getElevationAt(D[V].x,D[V].y,!0,!0));N.elevation=S}}this.terrainTile=m.tileID.canonical,this.terrainExaggeration=u}}updateDEM(i,u,f,y){let m=u._dem._modifiedForSources[y];if(m===void 0&&(u._dem._modifiedForSources[y]=[],m=u._dem._modifiedForSources[y]),m.includes(f.canonical))return;const _=u._dem.dim;m.push(f.canonical);let b=!1;for(const N of this.getNodesInfo()){const D=N.node;if(!D.footprint||!D.footprint.grid)continue;const S=D.footprint.grid,V=u.tileCoordToPixel(S.min.x,S.min.y),I=u.tileCoordToPixel(S.max.x,S.max.y),O=Math.min(Math.min(_-I.y,V.x),Math.min(V.y,_-I.x));if(O<0)continue;const M=ka(O,2,5);let B=Math.max(0,V.x-M),X=Math.max(0,V.y-M),ee=Math.min(I.x+M,_-1),ue=Math.min(I.y+M,_-1);for(let we=X;we<=ue;++we)for(let Pe=B;Pe<=ee;++Pe)MA[we*_+Pe]=255;let le=0,ne=0;for(let we=0;we<S.cellsY;++we)for(let Pe=0;Pe<S.cellsX;++Pe){if(!S.cells[we*S.cellsX+Pe])continue;const Ye=u.tileCoordToPixel(S.min.x+Pe/S.xScale,S.min.y+we/S.yScale),je=u.tileCoordToPixel(S.min.x+(Pe+1)/S.xScale,S.min.y+(we+1)/S.yScale);for(let qe=Ye.y;qe<=Math.min(je.y+1,_-1);++qe)for(let mt=Ye.x;mt<=Math.min(je.x+1,_-1);++mt)MA[qe*_+mt]===255&&(MA[qe*_+mt]=0,le+=u.getElevationAtPixel(mt,qe),ne++)}const pe=le/ne;B=Math.max(1,V.x-M),X=Math.max(1,V.y-M),ee=Math.min(I.x+M,_-2),ue=Math.min(I.y+M,_-2),b=!0;for(let we=X;we<=ue;++we)for(let Pe=B;Pe<=ee;++Pe)MA[we*_+Pe]===0&&(iE[we*_+Pe]=u._dem.set(Pe,we,pe));for(let we=1;we<M;++we){B=Math.max(1,V.x-we),X=Math.max(1,V.y-we),ee=Math.min(I.x+we,_-2),ue=Math.min(I.y+we,_-2);for(let Pe=X;Pe<=ue;++Pe)for(let Ye=B;Ye<=ee;++Ye){const je=Pe*_+Ye;if(MA[je]===255){let qe=0,mt=0,Xe=-1,At=-1;for(let xt=-1;xt<=1;++xt)for(let St=-1;St<=1;++St){const Ot=(Pe+xt)*_+Ye+St;if(MA[Ot]>=we)continue;const Nt=iE[Ot],kt=Math.abs(Nt);kt>mt&&(qe=Nt,mt=kt,Xe=St,At=xt)}if(mt>.1){const xt=1-(we+.5*Math.abs(Xe*At))/M;let St=u._dem.get(Ye,Pe)+qe*xt;const Ot=u._dem.get(Ye+Xe,Pe+At),Nt=u._dem.get(Ye-Xe,Pe-At,!0);(St-Ot)*(St-Nt)>0&&(St=(Ot+Nt)/2),iE[je]=u._dem.set(Ye,Pe,St),MA[je]=we}}}}}b&&(u._demTile.needsDEMTextureUpload=!0,u._dem._timestamp=Ht.now())}setFilter(i){this.filter=i?ph(i):null}getNodesInfo(){return this.filter?this.nodesInfo.filter(i=>this.filter.filter(new vn(this.id.overscaledZ),i.feature,this.id.canonical)):this.nodesInfo}destroy(){const i=this.getNodesInfo();for(const u of i)qS(u.node),nE(u.node)}isEmpty(){return!this.nodesInfo.length}updateReplacement(i,u){if(u.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=u.updateTime;const f=u.getReplacementRegionsForTile(i.toUnwrapped()),y=this.getNodesInfo();for(let m=0;m<this.nodesInfo.length;m++){const _=y[m].node;y[m].hiddenByReplacement=!!_.footprint&&!f.find(b=>b.footprint===_.footprint)}}getHeightAtTileCoord(i,u){const f=this.getNodesInfo(),y=[],m=[0,0,0],_=Ae.mat4.identity([]);for(let b=0;b<this.nodesInfo.length;b++){const N=f[b],D=N.node.meshes[0],S=D.transformedAabb;if(i<S.min[0]||u<S.min[1]||i>S.max[0]||u>S.max[1])continue;if(N.node.hidden===!0)return{height:1/0,maxHeight:N.feature.properties.height,hidden:!1,verticalScale:N.evaluatedScale[2]};Ae.mat4.invert(_,N.node.matrix),m[0]=i,m[1]=u,Ae.vec3.transformMat4(m,m,_);const V=(m[0]-D.aabb.min[0])/(D.aabb.max[0]-D.aabb.min[0])*DA|0,I=Math.min(63,(m[1]-D.aabb.min[1])/(D.aabb.max[1]-D.aabb.min[1])*DA|0)*DA+Math.min(63,V),O=D.heightmap[I];if(!(O<0&&N.node.footprint))return N.hiddenByReplacement?void 0:{height:O,maxHeight:N.feature.properties.height,hidden:!1,verticalScale:N.evaluatedScale[2]};if(N.node.footprint.grid.query(new It(i,u),new It(i,u),y),y.length>0)return{height:void 0,maxHeight:N.feature.properties.height,hidden:N.hiddenByReplacement,verticalScale:N.evaluatedScale[2]}}}}function nw(d,i){return!d.isLightConstant&&i}function zee(d,i,u,f,y,m,_,b){let N=(61440&i|(61440&i)>>4)>>8,D=(3840&i|(3840&i)>>4)>>4,S=240&i|(240&i)>>4;u[3]>0&&(N=fr(N,255*u[0],u[3]),D=fr(D,255*u[1],u[3]),S=fr(S,255*u[2],u[3]));const V=N<<8|D,I=S<<8|Math.floor(255*f[3]),O=function(we){const Pe=ka(we,0,2);return Math.min(Math.round(.5*Pe*255),255)}(f[2])<<8|15*f[0]<<4|15*f[1],M=ka(y[0],0,1),B=ka(y[1],0,1),X=ka(y[2],0,1),ee=ka(y[3],0,1);let ue,le,ne,pe;if(M!==B&&_!==m&&B!==M){const we=_-m;le=1/(we*(B-M)),ne=-(m+we*M)/(we*(B-M));const Pe=ka(y[4],-1,1);pe=Math.pow(10,Pe),ue=255*X<<8|255*ee}else ue=65535,le=0,ne=1,pe=1;if(d.emplaceBack(V,I,O,ue,le,ne,pe),b){const we=b.length;b.clear();for(let Pe=0;Pe<we;Pe++)b.emplaceBack(V,I,O,ue,le,ne,pe)}}function Oee(d,i,u){const f=d.node;let y=0;const m=u&f_.HasMeshoptCompression;for(const _ of f.meshes){if(f.lights&&f.lightMeshIndex===y||!_.featureData)continue;_.featureArray=new Xp,_.featureArray.reserve(_.featureData.length);let b=i;for(const N of _.featureData){const D=m?65535&N:N>>16&65535,S=m?N>>16&65535:65535&N,V=(15&S)<8?15&S:0,I=d.evaluatedRMEA[V],O=d.evaluatedColor[V],M=d.emissionHeightBasedParams[V];let B;if(b&&V===2&&f.lights&&(B=new Xp,B.resize(10*f.lights.length)),zee(_.featureArray,D,O,I,M,_.aabb.min[2],_.aabb.max[2],B),B&&b){b=!1;const X=f.meshes[f.lightMeshIndex];X.featureArray=B,X.featureArray._trim()}}_.featureArray._trim(),y++}}function hF(d,i,u,f){const y=1<<d.z;i.lat=Ri((f/Va+d.y)/y),i.lng=Ou((u/Va+d.x)/y)}Pt(HS,"Tiled3dModelBucket",{omit:["layers"]}),Pt(dF,"Tiled3dModelFeature");const Dee={circle:class extends ao{constructor(d,i,u,f){super(d,{layout:Lt||(Lt=new Oi({"circle-sort-key":new Ua(jt.layout_circle["circle-sort-key"]),"circle-elevation-reference":new ba(jt.layout_circle["circle-elevation-reference"]),visibility:new ba(jt.layout_circle.visibility)})),paint:sa||(sa=new Oi({"circle-radius":new Ua(jt.paint_circle["circle-radius"]),"circle-color":new Ua(jt.paint_circle["circle-color"]),"circle-blur":new Ua(jt.paint_circle["circle-blur"]),"circle-opacity":new Ua(jt.paint_circle["circle-opacity"]),"circle-translate":new ba(jt.paint_circle["circle-translate"]),"circle-translate-anchor":new ba(jt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ba(jt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ba(jt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ua(jt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ua(jt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ua(jt.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new ba(jt.paint_circle["circle-emissive-strength"]),"circle-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"circle-stroke-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},i,u,f)}createBucket(d){return new de(d)}queryRadius(d){const i=d;return Ft("circle-radius",this,i)+Ft("circle-stroke-width",this,i)+ra(this.paint.get("circle-translate"))}queryIntersectsFeature(d,i,u,f,y,m,_,b){const N=Ca(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),m.angle,d.pixelToTileUnitsFactor),D=this.paint.get("circle-radius").evaluate(i,u)+this.paint.get("circle-stroke-width").evaluate(i,u);return nm(d,f,m,_,b,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",N,D)}getProgramIds(){return["circle"]}getDefaultProgramParams(d,i,u){const f=pp(this);return{config:new Yu(this,{zoom:i,lut:u}),defines:f,overrideFog:!1}}},heatmap:class extends ao{createBucket(d){return new B0(d)}constructor(d,i,u,f){super(d,{layout:Qm||(Qm=new Oi({visibility:new ba(jt.layout_heatmap.visibility)})),paint:h1||(h1=new Oi({"heatmap-radius":new Ua(jt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ua(jt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ba(jt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ki(jt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ba(jt.paint_heatmap["heatmap-opacity"]),"heatmap-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},i,u,f),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(d){d==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=$y({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(d){return Ft("heatmap-radius",this,d)}queryIntersectsFeature(d,i,u,f,y,m,_,b){const N=this.paint.get("heatmap-radius").evaluate(i,u);return nm(d,f,m,_,b,!0,!0,new It(0,0),N)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(d,i,u){return d==="heatmap"?{config:new Yu(this,{zoom:i,lut:u}),overrideFog:!1}:{}}},hillshade:class extends ao{constructor(d,i,u,f){super(d,{layout:f1||(f1=new Oi({visibility:new ba(jt.layout_hillshade.visibility)})),paint:p1||(p1=new Oi({"hillshade-illumination-direction":new ba(jt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ba(jt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ba(jt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ba(jt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ba(jt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ba(jt.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new ba(jt.paint_hillshade["hillshade-emissive-strength"]),"hillshade-shadow-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"hillshade-highlight-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"hillshade-accent-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},i,u,f)}shouldRedrape(){return this.hasOffscreenPass()&&this.paint.get("hillshade-illumination-anchor")==="viewport"}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(d,i,u){return{overrideFog:!1}}},fill:class extends ao{constructor(d,i,u,f){super(d,{layout:T1||(T1=new Oi({"fill-sort-key":new Ua(jt.layout_fill["fill-sort-key"]),visibility:new ba(jt.layout_fill.visibility),"fill-elevation-reference":new ba(jt.layout_fill["fill-elevation-reference"]),"fill-construct-bridge-guard-rail":new Ua(jt.layout_fill["fill-construct-bridge-guard-rail"])})),paint:S1||(S1=new Oi({"fill-antialias":new ba(jt.paint_fill["fill-antialias"]),"fill-opacity":new Ua(jt.paint_fill["fill-opacity"]),"fill-color":new Ua(jt.paint_fill["fill-color"]),"fill-outline-color":new Ua(jt.paint_fill["fill-outline-color"]),"fill-translate":new ba(jt.paint_fill["fill-translate"]),"fill-translate-anchor":new ba(jt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ua(jt.paint_fill["fill-pattern"]),"fill-emissive-strength":new ba(jt.paint_fill["fill-emissive-strength"]),"fill-z-offset":new Ua(jt.paint_fill["fill-z-offset"]),"fill-bridge-guard-rail-color":new Ua(jt.paint_fill["fill-bridge-guard-rail-color"]),"fill-tunnel-structure-color":new Ua(jt.paint_fill["fill-tunnel-structure-color"]),"fill-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"fill-outline-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"fill-bridge-guard-rail-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"fill-tunnel-structure-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},i,u,f)}getProgramIds(){const d=this.paint.get("fill-pattern"),i=d&&d.constantOr(1),u=[i?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&u.push(i&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),u}getDefaultProgramParams(d,i,u){return{config:new Yu(this,{zoom:i,lut:u}),overrideFog:!1}}recalculate(d,i){super.recalculate(d,i);const u=this.paint._values["fill-outline-color"];u.value.kind==="constant"&&u.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(d){return new eg(d)}queryRadius(){return ra(this.paint.get("fill-translate"))}queryIntersectsFeature(d,i,u,f,y,m){return!d.queryGeometry.isAboveHorizon&&Ee(ua(d.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),m.angle,d.pixelToTileUnitsFactor),f)}isTileClipped(){return this.paint.get("fill-z-offset").constantOr(1)===0}is3D(d){if(this.paint.get("fill-z-offset").constantOr(1)!==0)return!0;const i=this.layout&&this.layout.get("fill-elevation-reference")!=="none";return d!=null?i&&!d:i}},"fill-extrusion":class extends ao{constructor(d,i,u,f){super(d,{layout:i_||(i_=new Oi({visibility:new ba(jt["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new ba(jt["layout_fill-extrusion"]["fill-extrusion-edge-radius"])})),paint:U1||(U1=new Oi({"fill-extrusion-opacity":new ba(jt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ua(jt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ba(jt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ba(jt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ua(jt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ua(jt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ua(jt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-height-alignment":new ba(jt["paint_fill-extrusion"]["fill-extrusion-height-alignment"]),"fill-extrusion-base-alignment":new ba(jt["paint_fill-extrusion"]["fill-extrusion-base-alignment"]),"fill-extrusion-vertical-gradient":new ba(jt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new ba(jt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new ba(jt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new ba(jt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new ba(jt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new ba(jt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new ba(jt["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new ba(jt["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new Ua(jt["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new Ua(jt["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new ba(jt["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new ba(jt["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new ba(jt["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new ba(jt["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new Ua(jt["paint_fill-extrusion"]["fill-extrusion-emissive-strength"]),"fill-extrusion-line-width":new Ua(jt["paint_fill-extrusion"]["fill-extrusion-line-width"]),"fill-extrusion-cast-shadows":new ba(jt["paint_fill-extrusion"]["fill-extrusion-cast-shadows"]),"fill-extrusion-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"fill-extrusion-flood-light-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},i,u,f),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(d){return new a_(d)}queryRadius(){return ra(this.paint.get("fill-extrusion-translate"))}is3D(d){return!0}hasShadowPass(){return this.paint.get("fill-extrusion-cast-shadows")}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(d,i,u,f,y,m,_,b,N){const D=Ca(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),m.angle,d.pixelToTileUnitsFactor),S=this.paint.get("fill-extrusion-height").evaluate(i,u),V=this.paint.get("fill-extrusion-base").evaluate(i,u),I=[0,0],O=b&&m.elevation,M=m.elevation?m.elevation.exaggeration():1,B=d.tile.getBucket(this);if(O&&B instanceof a_){const ne=B.centroidVertexArray,pe=N+1;pe<ne.length&&(I[0]=ne.geta_centroid_pos0(pe),I[1]=ne.geta_centroid_pos1(pe))}if(I[0]===0&&I[1]===1)return!1;m.projection.name==="globe"&&(f=F1([f],[new It(0,0),new It(Va,Va)],d.tileID.canonical).map(ne=>ne.polygon).flat());const X=O?b:null,[ee,ue]=function(ne,pe,we,Pe,Ye,je,qe,mt,Xe,At,xt){return ne.projection.name==="globe"?function(St,Ot,Nt,kt,Mt,Zt,ga,ma,Ya,Pa,Oa){const va=[],Ar=[],$a=St.projection.upVectorScale(Oa,St.center.lat,St.worldSize).metersToTile,lr=[0,0,0,1],Dr=[0,0,0,1],Jr=(dn,Xr,wn,Kn)=>{dn[0]=Xr,dn[1]=wn,dn[2]=Kn,dn[3]=1},kr=L1();Nt>0&&(Nt+=kr),kt+=kr;for(const dn of Ot){const Xr=[],wn=[];for(const Kn of dn){const Ei=Kn.x+Mt.x,Lr=Kn.y+Mt.y,En=St.projection.projectTilePoint(Ei,Lr,Oa),Yi=St.projection.upVector(Oa,Kn.x,Kn.y);let ls=Nt,ys=kt;if(ga){const Ns=vS(Ei,Lr,Nt,kt,ga,ma,Ya,Pa);ls+=Ns.base,ys+=Ns.top}Nt!==0?Jr(lr,En.x+Yi[0]*$a*ls,En.y+Yi[1]*$a*ls,En.z+Yi[2]*$a*ls):Jr(lr,En.x,En.y,En.z),Jr(Dr,En.x+Yi[0]*$a*ys,En.y+Yi[1]*$a*ys,En.z+Yi[2]*$a*ys),Ae.vec3.transformMat4(lr,lr,Zt),Ae.vec3.transformMat4(Dr,Dr,Zt),Xr.push(new Mu(lr[0],lr[1],lr[2])),wn.push(new Mu(Dr[0],Dr[1],Dr[2]))}va.push(Xr),Ar.push(wn)}return[va,Ar]}(ne,pe,we,Pe,Ye,je,qe,mt,Xe,At,xt):qe?function(St,Ot,Nt,kt,Mt,Zt,ga,ma,Ya){const Pa=[],Oa=[],va=[0,0,0,1];for(const Ar of St){const $a=[],lr=[];for(const Dr of Ar){const Jr=Dr.x+kt.x,kr=Dr.y+kt.y,dn=vS(Jr,kr,Ot,Nt,Zt,ga,ma,Ya);va[0]=Jr,va[1]=kr,va[2]=dn.base,va[3]=1,Ae.vec4.transformMat4(va,va,Mt),va[3]=Math.max(va[3],1e-5);const Xr=new Mu(va[0]/va[3],va[1]/va[3],va[2]/va[3]);va[0]=Jr,va[1]=kr,va[2]=dn.top,va[3]=1,Ae.vec4.transformMat4(va,va,Mt),va[3]=Math.max(va[3],1e-5);const wn=new Mu(va[0]/va[3],va[1]/va[3],va[2]/va[3]);$a.push(Xr),lr.push(wn)}Pa.push($a),Oa.push(lr)}return[Pa,Oa]}(pe,we,Pe,Ye,je,qe,mt,Xe,At):function(St,Ot,Nt,kt,Mt){const Zt=[],ga=[],ma=Mt[8]*Ot,Ya=Mt[9]*Ot,Pa=Mt[10]*Ot,Oa=Mt[11]*Ot,va=Mt[8]*Nt,Ar=Mt[9]*Nt,$a=Mt[10]*Nt,lr=Mt[11]*Nt;for(const Dr of St){const Jr=[],kr=[];for(const dn of Dr){const Xr=dn.x+kt.x,wn=dn.y+kt.y,Kn=Mt[0]*Xr+Mt[4]*wn+Mt[12],Ei=Mt[1]*Xr+Mt[5]*wn+Mt[13],Lr=Mt[2]*Xr+Mt[6]*wn+Mt[14],En=Mt[3]*Xr+Mt[7]*wn+Mt[15],Yi=Kn+ma,ls=Ei+Ya,ys=Lr+Pa,Ns=Math.max(En+Oa,1e-5),Si=Kn+va,ll=Ei+Ar,bc=Lr+$a,Ao=Math.max(En+lr,1e-5);Jr.push(new Mu(Yi/Ns,ls/Ns,ys/Ns)),kr.push(new Mu(Si/Ao,ll/Ao,bc/Ao))}Zt.push(Jr),ga.push(kr)}return[Zt,ga]}(pe,we,Pe,Ye,je)}(m,f,V,S,D,_,X,I,M,m.center.lat,d.tileID.canonical),le=d.queryGeometry;return function(ne,pe,we){let Pe=1/0;Ee(we,pe)&&(Pe=_S(we,pe[0]));for(let Ye=0;Ye<pe.length;Ye++){const je=pe[Ye],qe=ne[Ye];for(let mt=0;mt<je.length-1;mt++){const Xe=je[mt],At=[Xe,je[mt+1],qe[mt+1],qe[mt],Xe];Te(we,At)&&(Pe=Math.min(Pe,_S(we,At)))}}return Pe!==1/0&&Pe}(ee,ue,le.isPointQuery()?le.screenBounds:le.screenGeometry)}},line:class extends ao{constructor(d,i,u,f){const y=K1();super(d,y,i,u,f),y.layout&&(this.layout=new xu(y.layout)),this.gradientVersion=0,this.hasElevatedBuckets=!1,this.hasNonElevatedBuckets=!1}_handleSpecialPaintPropertyUpdate(d){if(d==="line-gradient"){const i=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=i._styleExpression&&i._styleExpression.expression instanceof tu,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(d,i){super.recalculate(d,i),this.paint._values["line-floorwidth"]=(()=>{if(iy)return iy;const u=K1();return iy=new VA(u.paint.properties["line-width"].specification),iy.useIntegerZoom=!0,iy})().possiblyEvaluate(this._transitioningPaint._values["line-width"].value,d)}createBucket(d){return new If(d)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(d,i,u){const f=TS(this);return{config:new Yu(this,{zoom:i,lut:u}),defines:f,overrideFog:!1}}queryRadius(d){const i=d,u=zA(Ft("line-width",this,i),Ft("line-gap-width",this,i)),f=Ft("line-offset",this,i);return u/2+Math.abs(f)+ra(this.paint.get("line-translate"))}queryIntersectsFeature(d,i,u,f,y,m){if(d.queryGeometry.isAboveHorizon)return!1;const _=ua(d.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),m.angle,d.pixelToTileUnitsFactor),b=d.pixelToTileUnitsFactor/2*zA(this.paint.get("line-width").evaluate(i,u),this.paint.get("line-gap-width").evaluate(i,u)),N=this.paint.get("line-offset").evaluate(i,u);return N&&(f=function(D,S){const V=[],I=new It(0,0);for(let O=0;O<D.length;O++){const M=D[O],B=[];for(let X=0;X<M.length;X++){const ee=M[X],ue=M[X+1],le=X===0?I:ee.sub(M[X-1])._unit()._perp(),ne=X===M.length-1?I:ue.sub(ee)._unit()._perp(),pe=le._add(ne)._unit();pe._mult(1/(pe.x*ne.x+pe.y*ne.y)),B.push(pe._mult(S)._add(ee))}V.push(B)}return V}(f,N*d.pixelToTileUnitsFactor)),function(D,S,V){for(let I=0;I<S.length;I++){const O=S[I];if(D.length>=3){for(let M=0;M<O.length;M++)if(st(D,O[M]))return!0}if(Ve(D,O,V))return!0}return!1}(_,f,b)}isTileClipped(){return this.hasNonElevatedBuckets}isDraped(d){return!this.hasElevatedBuckets}},symbol:FS,background:class extends ao{constructor(d,i,u,f){super(d,{layout:LL||(LL=new Oi({visibility:new ba(jt.layout_background.visibility)})),paint:FL||(FL=new Oi({"background-pitch-alignment":new ba(jt.paint_background["background-pitch-alignment"]),"background-color":new ba(jt.paint_background["background-color"]),"background-pattern":new ba(jt.paint_background["background-pattern"]),"background-opacity":new ba(jt.paint_background["background-opacity"]),"background-emissive-strength":new ba(jt.paint_background["background-emissive-strength"]),"background-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},i,u,f)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(d,i,u){return{overrideFog:!1}}is3D(d){return this.paint.get("background-pitch-alignment")==="viewport"}},raster:jL,"raster-particle":WL,sky:class extends ao{constructor(d,i,u,f){super(d,{layout:HL||(HL=new Oi({visibility:new ba(jt.layout_sky.visibility)})),paint:$L||($L=new Oi({"sky-type":new ba(jt.paint_sky["sky-type"]),"sky-atmosphere-sun":new ba(jt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new ba(jt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new ba(jt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new ba(jt.paint_sky["sky-gradient-radius"]),"sky-gradient":new Ki(jt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new ba(jt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new ba(jt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new ba(jt.paint_sky["sky-opacity"]),"sky-gradient-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-halo-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},i,u,f),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(d){d==="sky-gradient"?this._updateColorRamp():d!=="sky-atmosphere-sun"&&d!=="sky-atmosphere-halo-color"&&d!=="sky-atmosphere-color"&&d!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=$y({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(d){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const i=d.style.light.properties.get("position");return this._lightPosition.azimuthal!==i.azimuthal||this._lightPosition.polar!==i.polar}return!1}getCenter(d,i){if(this.paint.get("sky-type")==="atmosphere"){const f=this.paint.get("sky-atmosphere-sun"),y=!f,m=d.style.light,_=m.properties.get("position");return y&&m.properties.get("anchor")==="viewport"&&en("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),y?QP(_.azimuthal,90-_.polar,i):QP(f[0],90-f[1],i)}const u=this.paint.get("sky-gradient-center");return QP(u[0],90-u[1],i)}isSky(){return!0}markSkyboxValid(d){this._skyboxInvalidated=!1,this._lightPosition=d.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const d=this.paint.get("sky-type");return d==="atmosphere"?["skyboxCapture","skybox"]:d==="gradient"?["skyboxGradient"]:null}},slot:class extends ao{constructor(d,i,u,f){super(d,{paint:KL||(KL=new Oi({}))},i,null)}},model:class extends ao{constructor(d,i,u,f){super(d,{layout:iF||(iF=new Oi({visibility:new ba(jt.layout_model.visibility),"model-id":new Ua(jt.layout_model["model-id"])})),paint:sF||(sF=new Oi({"model-opacity":new Ua(jt.paint_model["model-opacity"]),"model-rotation":new Ua(jt.paint_model["model-rotation"]),"model-scale":new Ua(jt.paint_model["model-scale"]),"model-translation":new Ua(jt.paint_model["model-translation"]),"model-color":new Ua(jt.paint_model["model-color"]),"model-color-mix-intensity":new Ua(jt.paint_model["model-color-mix-intensity"]),"model-type":new ba(jt.paint_model["model-type"]),"model-cast-shadows":new ba(jt.paint_model["model-cast-shadows"]),"model-receive-shadows":new ba(jt.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new ba(jt.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new Ua(jt.paint_model["model-emissive-strength"]),"model-roughness":new Ua(jt.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new Ua(jt.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new ba(jt.paint_model["model-cutoff-fade-range"]),"model-front-cutoff":new ba(jt.paint_model["model-front-cutoff"]),"model-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},i,u,f),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(d){return new aE(d)}getProgramIds(){return["model"]}is3D(d){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(d){return d instanceof HS?Va-1:0}queryIntersectsFeature(d,i,u,f,y,m){if(!this.modelManager)return!1;const _=this.modelManager,b=d.tile.getBucket(this);if(!(b&&b instanceof aE))return!1;for(const N in b.instancesPerModel){const D=b.instancesPerModel[N],S=i.id!==void 0?i.id:i.properties&&i.properties.hasOwnProperty("id")?i.properties.id:void 0;if(D.idToFeaturesIndex.hasOwnProperty(S)){const V=D.features[D.idToFeaturesIndex[S]],I=_.getModel(N,this.scope);if(!I)return!1;let O=Ae.mat4.create();const M=new Ln(0,0),B=b.canonical;let X=Number.MAX_VALUE;for(let ee=0;ee<V.instancedDataCount;++ee){const ue=16*(V.instancedDataOffset+ee),le=D.instancedDataArray.float32,ne=[le[ue+4],le[ue+5],le[ue+6]];hF(B,M,le[ue],0|le[ue+1]),oF(O,I,m,M,V.rotation,V.scale,ne,!1,!1,!1),m.projection.name==="globe"&&(O=tE(O,m));const pe=Ae.mat4.multiply([],m.projMatrix,O),we=d.queryGeometry,Pe=eF(we.isPointQuery()?we.screenBounds:we.screenGeometry,m,pe,I.aabb);Pe!=null&&(X=Math.min(Pe,X))}return X!==Number.MAX_VALUE&&X}}return!1}_handleOverridablePaintPropertyUpdate(d,i,u){return!(!this.layout||i.isDataDriven()||u.isDataDriven()||d!=="model-color"&&d!=="model-color-mix-intensity"&&d!=="model-rotation"&&d!=="model-scale"&&d!=="model-translation"&&d!=="model-emissive-strength")}_isPropertyZoomDependent(d){const i=this._transitionablePaint._values[d];return i!=null&&i.value!=null&&i.value.expression!=null&&i.value.expression instanceof fe}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}},clip:class extends ao{constructor(d,i,u,f){super(d,{layout:J0||(J0=new Oi({"clip-layer-types":new ba(jt.layout_clip["clip-layer-types"]),"clip-layer-scope":new ba(jt.layout_clip["clip-layer-scope"])})),paint:Q0||(Q0=new Oi({}))},i,u,f)}recalculate(d,i){super.recalculate(d,i)}createBucket(d){return new sS(d)}is3D(d){return!0}}};class Mee{constructor(i){this._callback=i,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class Iee{constructor(){this.tasks={},this.taskQueue=[],Qa(["process"],this),this.invoker=new Mee(this.process),this.nextId=0}add(i,u){const f=this.nextId++,y=function({type:m,isSymbolTile:_,zoom:b}){return b=b||0,m==="message"?0:m!=="maybePrepare"||_?m!=="parseTile"||_?m==="parseTile"&&_?300-b:m==="maybePrepare"&&_?400-b:500:200-b:100-b}(u);if(y===0){try{i()}finally{}return null}return this.tasks[f]={fn:i,metadata:u,priority:y,id:f},this.taskQueue.push(f),this.invoker.trigger(),{cancel:()=>{delete this.tasks[f]}}}process(){try{if(this.taskQueue=this.taskQueue.filter(f=>!!this.tasks[f]),!this.taskQueue.length)return;const i=this.pick();if(i===null)return;const u=this.tasks[i];if(delete this.tasks[i],this.taskQueue.length&&this.invoker.trigger(),!u)return;u.fn()}finally{}}pick(){let i=null,u=1/0;for(let y=0;y<this.taskQueue.length;y++){const m=this.tasks[this.taskQueue[y]];m.priority<u&&(u=m.priority,i=y)}if(i===null)return null;const f=this.taskQueue[i];return this.taskQueue.splice(i,1),f}remove(){this.invoker.remove()}}class fF{constructor(i,u,f){this.target=i,this.parent=u,this.mapId=f,this.callbacks={},this.cancelCallbacks={},Qa(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new Iee}send(i,u,f,y,m=!1,_){const b=Math.round(1e18*Math.random()).toString(36).substring(0,10);f&&(f.metadata=_,this.callbacks[b]=f);const N=new Set;return this.target.postMessage({id:b,type:i,hasCallback:!!f,targetMapId:y,mustQueue:m,sourceMapId:this.mapId,data:Ra(u,N)},N),{cancel:()=>{f&&delete this.callbacks[b],this.target.postMessage({id:b,type:"<cancel>",targetMapId:y,sourceMapId:this.mapId})}}}receive(i){const u=i.data;if(!u)return;const f=u.id;if(f&&(!u.targetMapId||this.mapId===u.targetMapId))if(u.type==="<cancel>"){const y=this.cancelCallbacks[f];delete this.cancelCallbacks[f],y&&y.cancel()}else if(u.mustQueue||Qi()){const y=this.callbacks[f],m=this.scheduler.add(()=>this.processTask(f,u),y&&y.metadata||{type:"message"});m&&(this.cancelCallbacks[f]=m)}else this.processTask(f,u)}processTask(i,u){if(delete this.cancelCallbacks[i],u.type==="<response>"){const f=this.callbacks[i];delete this.callbacks[i],f&&(u.error?f(fa(u.error)):f(null,fa(u.data)))}else{const f=new Set,y=u.hasCallback?(_,b)=>{this.target.postMessage({id:i,type:"<response>",sourceMapId:this.mapId,error:_?Ra(_):null,data:Ra(b,f)},f)}:()=>{},m=fa(u.data);if(this.parent[u.type])this.parent[u.type](u.sourceMapId,m,y);else if(this.parent.getWorkerSource){const _=u.type.split(".");this.parent.getWorkerSource(u.sourceMapId,_[0],m.source,m.scope)[_[1]](m,y)}else y(new Error(`Could not find function ${u.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}var iw={workerUrl:"",workerClass:null,workerParams:void 0};const sE="mapboxgl_preloaded_worker_pool";class IA{constructor(){this.active={}}acquire(i,u=IA.workerCount){if(!this.workers)for(this.workers=[];this.workers.length<u;)this.workers.push(iw.workerClass!=null?new iw.workerClass:new self.Worker(iw.workerUrl,iw.workerParams));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.workers&&this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[sE]}numActive(){return Object.keys(this.active).length}}IA.workerCount=2;class m_{constructor(i,u,f="Worker",y=IA.workerCount){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=Wa();const m=this.workerPool.acquire(this.id,y);for(let _=0;_<m.length;_++){const b=new m_.Actor(m[_],u,this.id);b.name=`${f} ${_}`,this.actors.push(b)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(i,u,f){Dn(this.actors,(y,m)=>{y.send(i,u,m)},f=f||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(i=>{i.remove()}),this.actors=[],this.workerPool.release(this.id)}}let sw,oE;function $S(){return sw||(sw=new IA),sw}m_.Actor=fF;const lE=new bn(0,0,0);var uE=(d=>(d[d.PATH_RULE_UNSPECIFIED=0]="PATH_RULE_UNSPECIFIED",d[d.PATH_RULE_NON_ZERO=1]="PATH_RULE_NON_ZERO",d[d.PATH_RULE_EVEN_ODD=2]="PATH_RULE_EVEN_ODD",d))(uE||{}),KS=(d=>(d[d.LINE_CAP_UNSPECIFIED=0]="LINE_CAP_UNSPECIFIED",d[d.LINE_CAP_BUTT=1]="LINE_CAP_BUTT",d[d.LINE_CAP_ROUND=2]="LINE_CAP_ROUND",d[d.LINE_CAP_SQUARE=3]="LINE_CAP_SQUARE",d))(KS||{}),ow=(d=>(d[d.LINE_JOIN_UNSPECIFIED=0]="LINE_JOIN_UNSPECIFIED",d[d.LINE_JOIN_MITER=1]="LINE_JOIN_MITER",d[d.LINE_JOIN_MITER_CLIP=2]="LINE_JOIN_MITER_CLIP",d[d.LINE_JOIN_ROUND=3]="LINE_JOIN_ROUND",d[d.LINE_JOIN_BEVEL=4]="LINE_JOIN_BEVEL",d))(ow||{}),pF=(d=>(d[d.PAINT_ORDER_UNSPECIFIED=0]="PAINT_ORDER_UNSPECIFIED",d[d.PAINT_ORDER_FILL_AND_STROKE=1]="PAINT_ORDER_FILL_AND_STROKE",d[d.PAINT_ORDER_STROKE_AND_FILL=2]="PAINT_ORDER_STROKE_AND_FILL",d))(pF||{}),y_=(d=>(d[d.PATH_COMMAND_UNSPECIFIED=0]="PATH_COMMAND_UNSPECIFIED",d[d.PATH_COMMAND_MOVE=1]="PATH_COMMAND_MOVE",d[d.PATH_COMMAND_LINE=2]="PATH_COMMAND_LINE",d[d.PATH_COMMAND_QUAD=3]="PATH_COMMAND_QUAD",d[d.PATH_COMMAND_CUBIC=4]="PATH_COMMAND_CUBIC",d[d.PATH_COMMAND_CLOSE=5]="PATH_COMMAND_CLOSE",d))(y_||{}),mF=(d=>(d[d.MASK_TYPE_UNSPECIFIED=0]="MASK_TYPE_UNSPECIFIED",d[d.MASK_TYPE_LUMINANCE=1]="MASK_TYPE_LUMINANCE",d[d.MASK_TYPE_ALPHA=2]="MASK_TYPE_ALPHA",d))(mF||{});function Lee(d,i,u){d===1&&i.icons.push(function(f,y){return function(m){if(m.usvg_tree.height||(m.usvg_tree.height=m.usvg_tree.width),!m.metadata)return m;const{metadata:_}=m;if(_.content_area){const{content_area:b}=_;b.top==null&&(b.top=b.left),b.width==null&&(b.width=m.usvg_tree.width),b.height==null&&(b.height=b.width)}return _.stretch_x&&_.stretch_x.length&&yF(_,"x"),_.stretch_y&&_.stretch_y.length&&yF(_,"y"),m}(f.readFields(Fee,{name:void 0},y))}(u,u.readVarint()+u.pos))}function yF(d,i){const u=[],f=d[`stretch_${i}`];let y=null;for(let m=0;m<f.length;m++)y===null?y=u.length===0?f[0]:u[u.length-1][1]+f[m]:(u.push([y,y+f[m]]),y=null);d[`stretch_${i}_areas`]=u}function Fee(d,i,u){d===1?i.name=u.readString():d===2?i.metadata=function(f,y){return f.readFields(Uee,{stretch_x:null,stretch_y:null,stretch_x_areas:null,stretch_y_areas:null,variables:[]},y)}(u,u.readVarint()+u.pos):d===3&&(i.usvg_tree=function(f,y){return f.readFields(Gee,{width:20,children:[],linear_gradients:[],radial_gradients:[],clip_paths:[],masks:[]},y)}(u,u.readVarint()+u.pos),i.data="usvg_tree")}function Uee(d,i,u){d===1?i.stretch_x=u.readPackedVarint():d===2?i.stretch_y=u.readPackedVarint():d===3?i.content_area=function(f,y){return f.readFields(kee,{left:0},y)}(u,u.readVarint()+u.pos):d===4&&i.variables.push(function(f,y){return f.readFields(Bee,{name:void 0},y)}(u,u.readVarint()+u.pos))}function kee(d,i,u){d===1?i.left=u.readVarint():d===2?i.width=u.readVarint():d===3?i.top=u.readVarint():d===4&&(i.height=u.readVarint())}function Bee(d,i,u){d===1?i.name=u.readString():d===2&&(i.rgb_color=XS(u.readVarint()),i.value="rgb_color")}function Gee(d,i,u){d===1?i.width=i.height=u.readVarint():d===2?i.height=u.readVarint():d===3?i.children.push(WS(u,u.readVarint()+u.pos)):d===4?i.linear_gradients.push(function(f,y){return f.readFields(Wee,{spread_method:1,stops:[],x1:0,y1:0,x2:1,y2:0},y)}(u,u.readVarint()+u.pos)):d===5?i.radial_gradients.push(function(f,y){return f.readFields(Xee,{spread_method:1,stops:[],cx:.5,cy:.5,r:.5,fx:.5,fy:.5,fr:0},y)}(u,u.readVarint()+u.pos)):d===7?i.clip_paths.push(function(f,y){return f.readFields(Jee,{children:[]},y)}(u,u.readVarint()+u.pos)):d===8&&i.masks.push(function(f,y){const m=f.readFields(Qee,{left:0,width:20,mask_type:1,children:[]},y);return m.height==null&&(m.height=m.width),m.top==null&&(m.top=m.left),m}(u,u.readVarint()+u.pos))}function WS(d,i){return d.readFields(jee,{},i)}function jee(d,i,u){d===1?(i.group=function(f,y){return f.readFields(Zee,{opacity:255,children:[]},y)}(u,u.readVarint()+u.pos),i.node="group"):d===2&&(i.path=function(f,y){return f.readFields(Hee,{paint_order:1,commands:[],step:1,diffs:[],rule:1},y)}(u,u.readVarint()+u.pos),i.node="path")}function Zee(d,i,u){d===1?i.transform=YS(u,u.readVarint()+u.pos):d===2?i.opacity=u.readVarint():d===5?i.clip_path_idx=u.readVarint():d===6?i.mask_idx=u.readVarint():d===7&&i.children.push(WS(u,u.readVarint()+u.pos))}function YS(d,i){return d.readFields(qee,{sx:1,ky:0,kx:0,sy:1,tx:0,ty:0},i)}function qee(d,i,u){d===1?i.sx=u.readFloat():d===2?i.ky=u.readFloat():d===3?i.kx=u.readFloat():d===4?i.sy=u.readFloat():d===5?i.tx=u.readFloat():d===6&&(i.ty=u.readFloat())}function Hee(d,i,u){d===1?i.fill=function(f,y){return f.readFields($ee,{rgb_color:lE,paint:"rgb_color",opacity:255},y)}(u,u.readVarint()+u.pos):d===2?i.stroke=function(f,y){return f.readFields(Kee,{rgb_color:lE,paint:"rgb_color",dasharray:[],dashoffset:0,miterlimit:4,opacity:255,width:1,linecap:1,linejoin:1},y)}(u,u.readVarint()+u.pos):d===3?i.paint_order=u.readVarint():d===5?u.readPackedVarint(i.commands):d===6?i.step=u.readFloat():d===7?u.readPackedSVarint(i.diffs):d===8&&(i.rule=u.readVarint())}function $ee(d,i,u){d===1?(i.rgb_color=XS(u.readVarint()),i.paint="rgb_color"):d===2?(i.linear_gradient_idx=u.readVarint(),i.paint="linear_gradient_idx"):d===3?(i.radial_gradient_idx=u.readVarint(),i.paint="radial_gradient_idx"):d===5&&(i.opacity=u.readVarint())}function XS(d){return new bn((d>>16&255)/255,(d>>8&255)/255,(255&d)/255,1)}function Kee(d,i,u){d===1?(i.rgb_color=XS(u.readVarint()),i.paint="rgb_color"):d===2?(i.linear_gradient_idx=u.readVarint(),i.paint="linear_gradient_idx"):d===3?(i.radial_gradient_idx=u.readVarint(),i.paint="radial_gradient_idx"):d===5?u.readPackedFloat(i.dasharray):d===6?i.dashoffset=u.readFloat():d===7?i.miterlimit=u.readFloat():d===8?i.opacity=u.readVarint():d===9?i.width=u.readFloat():d===10?i.linecap=u.readVarint():d===11&&(i.linejoin=u.readVarint())}function Wee(d,i,u){d===1?i.transform=YS(u,u.readVarint()+u.pos):d===2?i.spread_method=u.readVarint():d===3?i.stops.push(gF(u,u.readVarint()+u.pos)):d===4?i.x1=u.readFloat():d===5?i.y1=u.readFloat():d===6?i.x2=u.readFloat():d===7&&(i.y2=u.readFloat())}function gF(d,i){return d.readFields(Yee,{offset:0,opacity:255,rgb_color:lE},i)}function Yee(d,i,u){d===1?i.offset=u.readFloat():d===2?i.opacity=u.readVarint():d===3&&(i.rgb_color=XS(u.readVarint()))}function Xee(d,i,u){d===1?i.transform=YS(u,u.readVarint()+u.pos):d===2?i.spread_method=u.readVarint():d===3?i.stops.push(gF(u,u.readVarint()+u.pos)):d===4?i.cx=u.readFloat():d===5?i.cy=u.readFloat():d===6?i.r=u.readFloat():d===7?i.fx=u.readFloat():d===8?i.fy=u.readFloat():d===9&&(i.fr=u.readFloat())}function Jee(d,i,u){d===1?i.transform=YS(u,u.readVarint()+u.pos):d===2?i.clip_path_idx=u.readVarint():d===3&&i.children.push(WS(u,u.readVarint()+u.pos))}function Qee(d,i,u){d===1?i.left=i.top=u.readFloat():d===2?i.width=i.height=u.readFloat():d===3?i.top=u.readFloat():d===4?i.height=u.readFloat():d===5?i.mask_type=u.readVarint():d===6?i.mask_idx=u.readVarint():d===7&&i.children.push(WS(u,u.readVarint()+u.pos))}class ete{static calculate(i={},u=[]){const f=new Map,y=new Map;if(Object.keys(i).length===0)return f;u.forEach(m=>{y.set(m.name,m.rgb_color||new bn(0,0,0))});for(const[m,_]of Object.entries(i))y.has(m)?f.set(y.get(m).toStringPremultipliedAlpha(),_):console.warn(`Ignoring unknown image variable "${m}"`);return f}}function g_(d,i=255,u){const f=i/255,y=d.toStringPremultipliedAlpha(),m=u.has(y)?u.get(y).clone():d.clone();return m.a*=f,m.toString()}function lw(d,i){if(!Kt()){const u=document.createElement("canvas");return u.width=d,u.height=i,u}return new OffscreenCanvas(d,i)}function tte(d,i){const u=ete.calculate(i.params,d.metadata?d.metadata.variables:[]),f=d.usvg_tree,y=f.width,m=f.height,_=i.transform?i.transform:new DOMMatrix,b=Math.max(1,Math.round(y*_.a)),N=Math.max(1,Math.round(m*_.d)),D=new DOMMatrix([b/y,0,0,N/m,0,0]),S=lw(b,N).getContext("2d");return cE(S,D,f,f,u),S.getImageData(0,0,b,N)}function cE(d,i,u,f,y){for(const m of f.children)AF(d,i,u,m,y)}function AF(d,i,u,f,y){f.group?(d.save(),function(m,_,b,N,D){const S=N.mask_idx!=null?b.masks[N.mask_idx]:null,V=N.clip_path_idx!=null?b.clip_paths[N.clip_path_idx]:null;if(N.transform&&(_=JS(N.transform).preMultiplySelf(_)),!function(M,B,X){return M.opacity!==255||B||X}(N,V!=null,S!=null))return void cE(m,_,b,N,D);const I=lw(m.canvas.width,m.canvas.height),O=I.getContext("2d");cE(O,_,b,N,D),V&&CF(O,_,b,V),S&&bF(O,_,b,S,D),m.globalAlpha=N.opacity/255,m.drawImage(I,0,0)}(d,i,u,f.group,y),d.restore()):f.path&&(d.save(),function(m,_,b,N,D){const S=xF(N);m.setTransform(_),N.paint_order===pF.PAINT_ORDER_FILL_AND_STROKE?(_F(m,b,N,S,D),wF(m,b,N,S,D)):(wF(m,b,N,S,D),_F(m,b,N,S,D))}(d,i,u,f.path,y),d.restore())}function _F(d,i,u,f,y){const m=u.fill;if(!m)return;const _=m.opacity/255;switch(m.paint){case"rgb_color":d.fillStyle=g_(m.rgb_color,m.opacity,y);break;case"linear_gradient_idx":d.fillStyle=RF(d,i.linear_gradients[m.linear_gradient_idx],_,y);break;case"radial_gradient_idx":d.fillStyle=TF(d,i.radial_gradients[m.radial_gradient_idx],_,y)}d.fill(f,vF(u))}function vF(d){return d.rule===uE.PATH_RULE_NON_ZERO?"nonzero":d.rule===uE.PATH_RULE_EVEN_ODD?"evenodd":void 0}function wF(d,i,u,f,y){const m=u.stroke;if(!m)return;d.lineWidth=m.width,d.miterLimit=m.miterlimit,d.setLineDash(m.dasharray),d.lineDashOffset=m.dashoffset;const _=m.opacity/255;switch(m.paint){case"rgb_color":d.strokeStyle=g_(m.rgb_color,m.opacity,y);break;case"linear_gradient_idx":d.strokeStyle=RF(d,i.linear_gradients[m.linear_gradient_idx],_,y);break;case"radial_gradient_idx":d.strokeStyle=TF(d,i.radial_gradients[m.radial_gradient_idx],_,y)}switch(m.linejoin){case ow.LINE_JOIN_MITER_CLIP:case ow.LINE_JOIN_MITER:d.lineJoin="miter";break;case ow.LINE_JOIN_ROUND:d.lineJoin="round";break;case ow.LINE_JOIN_BEVEL:d.lineJoin="bevel"}switch(m.linecap){case KS.LINE_CAP_BUTT:d.lineCap="butt";break;case KS.LINE_CAP_ROUND:d.lineCap="round";break;case KS.LINE_CAP_SQUARE:d.lineCap="square"}d.stroke(f)}function RF(d,i,u,f){if(i.stops.length===1){const I=i.stops[0];return g_(I.rgb_color,I.opacity*u,f)}const y=JS(i.transform),{x1:m,y1:_,x2:b,y2:N}=i,D=y.transformPoint(new DOMPoint(m,_)),S=y.transformPoint(new DOMPoint(b,N)),V=d.createLinearGradient(D.x,D.y,S.x,S.y);for(const I of i.stops)V.addColorStop(I.offset,g_(I.rgb_color,I.opacity*u,f));return V}function TF(d,i,u,f){if(i.stops.length===1){const I=i.stops[0];return g_(I.rgb_color,I.opacity*u,f)}const y=JS(i.transform),{fx:m,fy:_,cx:b,cy:N}=i,D=y.transformPoint(new DOMPoint(m,_)),S=y.transformPoint(new DOMPoint(b,N)),V=d.createRadialGradient(D.x,D.y,0,S.x,S.y,i.r*((y.a+y.d)/2));for(const I of i.stops)V.addColorStop(I.offset,g_(I.rgb_color,I.opacity*u,f));return V}function SF(d,i,u,f){const y=f.transform?JS(f.transform).preMultiplySelf(i):i,m=lw(d.canvas.width,d.canvas.height),_=m.getContext("2d");for(const N of f.children)if(N.group)SF(_,y,u,N.group);else if(N.path){const D=N.path,S=new Path2D;S.addPath(xF(D),y),_.fill(S,vF(D))}const b=f.clip_path_idx!=null?u.clip_paths[f.clip_path_idx]:null;b&&CF(_,y,u,b),d.globalCompositeOperation="source-over",d.drawImage(m,0,0)}function CF(d,i,u,f){const y=lw(d.canvas.width,d.canvas.height);SF(y.getContext("2d"),i,u,f),d.globalCompositeOperation="destination-in",d.drawImage(y,0,0)}function bF(d,i,u,f,y){if(f.children.length===0)return;const m=f.mask_idx!=null?u.masks[f.mask_idx]:null;m&&bF(d,i,u,m,y);const _=d.canvas.width,b=d.canvas.height,N=lw(_,b),D=N.getContext("2d"),S=f.width,V=f.height,I=f.left,O=f.top,M=new Path2D,B=new Path2D;B.rect(I,O,S,V),M.addPath(B,i),D.clip(M);for(const ue of f.children)AF(D,i,u,ue,y);const X=D.getImageData(0,0,_,b),ee=X.data;if(f.mask_type===mF.MASK_TYPE_LUMINANCE)for(let ue=0;ue<ee.length;ue+=4)ee[ue+3]=ee[ue+3]/255*(.2126*ee[ue]+.7152*ee[ue+1]+.0722*ee[ue+2]);D.putImageData(X,0,0),d.globalCompositeOperation="destination-in",d.drawImage(N,0,0)}function JS(d){return d?new DOMMatrix([d.sx,d.ky,d.kx,d.sy,d.tx,d.ty]):new DOMMatrix}function xF(d){const i=new Path2D,u=d.step;let f=d.diffs[0]*u,y=d.diffs[1]*u;i.moveTo(f,y);for(let m=0,_=2;m<d.commands.length;m++)switch(d.commands[m]){case y_.PATH_COMMAND_MOVE:f+=d.diffs[_++]*u,y+=d.diffs[_++]*u,i.moveTo(f,y);break;case y_.PATH_COMMAND_LINE:f+=d.diffs[_++]*u,y+=d.diffs[_++]*u,i.lineTo(f,y);break;case y_.PATH_COMMAND_QUAD:{const b=f+d.diffs[_++]*u,N=y+d.diffs[_++]*u;f=b+d.diffs[_++]*u,y=N+d.diffs[_++]*u,i.quadraticCurveTo(b,N,f,y);break}case y_.PATH_COMMAND_CUBIC:{const b=f+d.diffs[_++]*u,N=y+d.diffs[_++]*u,D=b+d.diffs[_++]*u,S=N+d.diffs[_++]*u;f=D+d.diffs[_++]*u,y=S+d.diffs[_++]*u,i.bezierCurveTo(b,N,D,S,f,y);break}case y_.PATH_COMMAND_CLOSE:i.closePath()}return i}class QS{constructor(i){this.capacity=i,this.cache=new Map}get(i){if(!this.cache.has(i))return;const u=this.cache.get(i);return this.cache.delete(i),this.cache.set(i,u),u}put(i,u){this.cache.has(i)?this.cache.delete(i):this.cache.size===this.capacity&&this.cache.delete(this.cache.keys().next().value),this.cache.set(i,u)}delete(i){this.cache.delete(i)}}Pt(QS,"LRUCache");class dE{constructor(){this.cacheMap=new Map,this.cacheDependenciesMap=new Map}static _getImage(i){return new wl(i,i.data)}getFromCache(i,u,f){return this.cacheMap.has(f)||this.cacheMap.set(f,new QS(150)),this.cacheMap.get(f).get(Wc(i.toString(),u))}setInCache(i,u,f,y){this.cacheDependenciesMap.has(y)||this.cacheDependenciesMap.set(y,new Map),this.cacheMap.has(y)||this.cacheMap.set(y,new QS(150));const m=this.cacheDependenciesMap.get(y),_=Wc(i.id.toString(),f);m.get(_)||m.set(_,new Set);const b=this.cacheMap.get(y),N=i.toString();m.get(_).add(N),b.put(Wc(i.toString(),f),u)}removeImagesFromCacheByIds(i,u,f=0){if(!this.cacheMap.has(f)||!this.cacheDependenciesMap.has(f))return;const y=this.cacheMap.get(f),m=this.cacheDependenciesMap.get(f);for(const _ of i){const b=Wc(_.toString(),u);if(m.has(b)){for(const N of m.get(b))y.delete(N);m.delete(b)}}}rasterize(i,u,f,y,m=tte){const _=this.getFromCache(i,f,y);if(_)return _.clone();const b=m(u.icon,i.options),N=dE._getImage(b);return this.setInCache(i,N,f,y),N.clone()}}class PF{constructor(i){this.size=i,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(i,u){const f=this.toIdx(i,u);return{min:this.minimums[f],max:this.maximums[f]}}isLeaf(i,u){return this.leaves[this.toIdx(i,u)]}toIdx(i,u){return u*this.size+i}}function EF(d,i,u,f){let y=0,m=Number.MAX_VALUE;for(let _=0;_<3;_++)if(Math.abs(f[_])<1e-15){if(u[_]<d[_]||u[_]>i[_])return null}else{const b=1/f[_];let N=(d[_]-u[_])*b,D=(i[_]-u[_])*b;if(N>D){const S=N;N=D,D=S}if(N>y&&(y=N),D<m&&(m=D),y>m)return null}return y}function NF(d,i,u,f,y,m,_,b,N,D,S){const V=f-d,I=y-i,O=m-u,M=_-d,B=b-i,X=N-u,ee=S[1]*X-S[2]*B,ue=S[2]*M-S[0]*X,le=S[0]*B-S[1]*M,ne=V*ee+I*ue+O*le;if(Math.abs(ne)<1e-15)return null;const pe=1/ne,we=D[0]-d,Pe=D[1]-i,Ye=D[2]-u,je=(we*ee+Pe*ue+Ye*le)*pe;if(je<0||je>1)return null;const qe=Pe*O-Ye*I,mt=Ye*V-we*O,Xe=we*I-Pe*V,At=(S[0]*qe+S[1]*mt+S[2]*Xe)*pe;return At<0||je+At>1?null:(M*qe+B*mt+X*Xe)*pe}function VF(d,i,u){return(d-i)/(u-i)}function zF(d,i,u,f,y,m,_,b,N){const D=1<<u,S=m-f,V=_-y,I=(d+1)/D*S+f,O=(i+0)/D*V+y,M=(i+1)/D*V+y;b[0]=(d+0)/D*S+f,b[1]=O,N[0]=I,N[1]=M}class OF{constructor(i){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=i,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const u=function(m){const _=Math.ceil(Math.log2(m.dim/8)),b=[];let N=Math.ceil(Math.pow(2,_));const D=1/N,S=(O,M,B,X,ee)=>{const ue=X?1:0,le=(O+1)*B-ue,ne=M*B,pe=(M+1)*B-ue;ee[0]=O*B,ee[1]=ne,ee[2]=le,ee[3]=pe};let V=new PF(N);const I=[];for(let O=0;O<N*N;O++){S(O%N,Math.floor(O/N),D,!1,I);const M=cg(I[0],I[1],m),B=cg(I[2],I[1],m),X=cg(I[2],I[3],m),ee=cg(I[0],I[3],m);V.minimums.push(Math.min(M,B,X,ee)),V.maximums.push(Math.max(M,B,X,ee)),V.leaves.push(1)}for(b.push(V),N/=2;N>=1;N/=2){const O=b[b.length-1];V=new PF(N);for(let M=0;M<N*N;M++){S(M%N,Math.floor(M/N),2,!0,I);const B=O.getElevation(I[0],I[1]),X=O.getElevation(I[2],I[1]),ee=O.getElevation(I[2],I[3]),ue=O.getElevation(I[0],I[3]),le=O.isLeaf(I[0],I[1]),ne=O.isLeaf(I[2],I[1]),pe=O.isLeaf(I[2],I[3]),we=O.isLeaf(I[0],I[3]),Pe=Math.min(B.min,X.min,ee.min,ue.min),Ye=Math.max(B.max,X.max,ee.max,ue.max),je=le&&ne&&pe&&we;V.maximums.push(Ye),V.minimums.push(Pe),V.leaves.push(Ye-Pe<=5&&je?1:0)}b.push(V)}return b}(this.dem),f=u.length-1,y=u[f];this._addNode(y.minimums[0],y.maximums[0],y.leaves[0]),this._construct(u,0,0,f,0)}raycastRoot(i,u,f,y,m,_,b=1){return EF([i,u,-100],[f,y,this.maximums[0]*b],m,_)}raycast(i,u,f,y,m,_,b=1){if(!this.nodeCount)return null;const N=this.raycastRoot(i,u,f,y,m,_,b);if(N==null)return null;const D=[],S=[],V=[],I=[],O=[{idx:0,t:N,nodex:0,nodey:0,depth:0}];for(;O.length>0;){const{idx:M,t:B,nodex:X,nodey:ee,depth:ue}=O.pop();if(this.leaves[M]){zF(X,ee,ue,i,u,f,y,V,I);const ne=1<<ue,pe=(X+0)/ne,we=(X+1)/ne,Pe=(ee+0)/ne,Ye=(ee+1)/ne,je=cg(pe,Pe,this.dem)*b,qe=cg(we,Pe,this.dem)*b,mt=cg(we,Ye,this.dem)*b,Xe=cg(pe,Ye,this.dem)*b,At=NF(V[0],V[1],je,I[0],V[1],qe,I[0],I[1],mt,m,_),xt=NF(I[0],I[1],mt,V[0],I[1],Xe,V[0],V[1],je,m,_),St=Math.min(At!==null?At:Number.MAX_VALUE,xt!==null?xt:Number.MAX_VALUE);if(St!==Number.MAX_VALUE)return St;{const Ot=Ae.vec3.scaleAndAdd([],m,_,B);if(DF(je,qe,Xe,mt,VF(Ot[0],V[0],I[0]),VF(Ot[1],V[1],I[1]))>=Ot[2])return B}continue}let le=0;for(let ne=0;ne<this._siblingOffset.length;ne++){zF((X<<1)+this._siblingOffset[ne][0],(ee<<1)+this._siblingOffset[ne][1],ue+1,i,u,f,y,V,I),V[2]=-100,I[2]=this.maximums[this.childOffsets[M]+ne]*b;const pe=EF(V,I,m,_);if(pe!=null){const we=pe;D[ne]=we;let Pe=!1;for(let Ye=0;Ye<le&&!Pe;Ye++)we>=D[S[Ye]]&&(S.splice(Ye,0,ne),Pe=!0);Pe||(S[le]=ne),le++}}for(let ne=0;ne<le;ne++){const pe=S[ne];O.push({idx:this.childOffsets[M]+pe,t:D[pe],nodex:(X<<1)+this._siblingOffset[pe][0],nodey:(ee<<1)+this._siblingOffset[pe][1],depth:ue+1})}}return null}_addNode(i,u,f){return this.minimums.push(i),this.maximums.push(u),this.leaves.push(f),this.childOffsets.push(0),this.nodeCount++}_construct(i,u,f,y,m){if(i[y].isLeaf(u,f)===1)return;this.childOffsets[m]||(this.childOffsets[m]=this.nodeCount);const _=y-1,b=i[_];let N=0,D=0;for(let S=0;S<this._siblingOffset.length;S++){const V=2*u+this._siblingOffset[S][0],I=2*f+this._siblingOffset[S][1],O=b.getElevation(V,I),M=b.isLeaf(V,I),B=this._addNode(O.min,O.max,M);M&&(N|=1<<S),D||(D=B)}for(let S=0;S<this._siblingOffset.length;S++)N&1<<S||this._construct(i,2*u+this._siblingOffset[S][0],2*f+this._siblingOffset[S][1],_,D+S)}}function DF(d,i,u,f,y,m){return fr(fr(d,u,m),fr(i,f,m),y)}function cg(d,i,u){const f=u.dim,y=ka(d*f-.5,0,f-1),m=ka(i*f-.5,0,f-1),_=Math.floor(y),b=Math.floor(m),N=Math.min(_+1,f-1),D=Math.min(b+1,f-1);return DF(u.get(_,b),u.get(N,b),u.get(_,D),u.get(N,D),y-_,m-b)}const ate={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function rte(d,i,u){return(256*d*256+256*i+u)/10-1e4}function nte(d,i,u){return 256*d+i+u/256-32768}class eC{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(i,u,f,y=!1){if(this.uid=i,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(f&&f!=="mapbox"&&f!=="terrarium")return void en(`"${f}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=u.height;const m=this.dim=u.height-2,_=new Uint32Array(u.data.buffer);if(this.pixels=new Uint8Array(u.data.buffer),this.floatView=new Float32Array(u.data.buffer),this.borderReady=y,this._modifiedForSources={},!y){for(let N=0;N<m;N++)_[this._idx(-1,N)]=_[this._idx(0,N)],_[this._idx(m,N)]=_[this._idx(m-1,N)],_[this._idx(N,-1)]=_[this._idx(N,0)],_[this._idx(N,m)]=_[this._idx(N,m-1)];_[this._idx(-1,-1)]=_[this._idx(0,0)],_[this._idx(m,-1)]=_[this._idx(m-1,0)],_[this._idx(-1,m)]=_[this._idx(0,m-1)],_[this._idx(m,m)]=_[this._idx(m-1,m-1)]}const b=f==="terrarium"?nte:rte;for(let N=0;N<_.length;++N){const D=4*N;this.floatView[N]=b(this.pixels[D],this.pixels[D+1],this.pixels[D+2])}this._timestamp=Ht.now()}_buildQuadTree(){this._tree=new OF(this)}get(i,u,f=!1){f&&(i=ka(i,-1,this.dim),u=ka(u,-1,this.dim));const y=this._idx(i,u);return this.floatView[y]}set(i,u,f){const y=this._idx(i,u),m=this.floatView[y];return this.floatView[y]=f,f-m}static getUnpackVector(i){return ate[i]}_idx(i,u){if(i<-1||i>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(i+1)}static pack(i,u){const f=[0,0,0,0],y=eC.getUnpackVector(u);let m=Math.floor((i+y[3])/y[2]);return f[2]=m%256,m=Math.floor(m/256),f[1]=m%256,m=Math.floor(m/256),f[0]=m,f}getPixels(){return new y1({width:this.stride,height:this.stride},this.pixels)}backfillBorder(i,u,f){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let y=u*this.dim,m=u*this.dim+this.dim,_=f*this.dim,b=f*this.dim+this.dim;switch(u){case-1:y=m-1;break;case 1:m=y+1}switch(f){case-1:_=b-1;break;case 1:b=_+1}const N=-u*this.dim,D=-f*this.dim;for(let S=_;S<b;S++)for(let V=y;V<m;V++){const I=4*this._idx(V,S),O=4*this._idx(V+N,S+D);this.pixels[I+0]=i.pixels[O+0],this.pixels[I+1]=i.pixels[O+1],this.pixels[I+2]=i.pixels[O+2],this.pixels[I+3]=i.pixels[O+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}function ite(d,i,u){d===1?i.headerLength=u.readFixed32():d===2?i.x=u.readVarint():d===3?i.y=u.readVarint():d===4?i.z=u.readVarint():d===5&&i.layers.push(function(f,y){return f.readFields(cte,{version:0,name:"",units:"",tileSize:0,buffer:0,pixelFormat:0,dataIndex:[]},y)}(u,u.readVarint()+u.pos))}function ste(d,i,u){d===1?(i.delta_filter=function(f,y){return f.readFields(ote,{blockSize:0},y)}(u,u.readVarint()+u.pos),i.filter="delta_filter"):d===2?(u.readVarint(),i.filter="zigzag_filter"):d===3?(u.readVarint(),i.filter="bitshuffle_filter"):d===4&&(u.readVarint(),i.filter="byteshuffle_filter")}function ote(d,i,u){d===1&&(i.blockSize=u.readVarint())}function lte(d,i,u){d===1?(u.readVarint(),i.codec="gzip_data"):d===2?(u.readVarint(),i.codec="jpeg_image"):d===3?(u.readVarint(),i.codec="webp_image"):d===4&&(u.readVarint(),i.codec="png_image")}function ute(d,i,u){let f=0,y=0;d===1?i.firstByte=u.readFixed64():d===2?i.lastByte=u.readFixed64():d===3?i.filters.push(function(m,_){return m.readFields(ste,{},_)}(u,u.readVarint()+u.pos)):d===4?i.codec=function(m,_){return m.readFields(lte,{},_)}(u,u.readVarint()+u.pos):d===5?y=u.readFloat():d===6?f=u.readFloat():d===7?i.bands.push(u.readString()):d===8?i.offset=u.readDouble():d===9&&(i.scale=u.readDouble()),i.offset===0&&(i.offset=y),i.scale===0&&(i.scale=f)}function cte(d,i,u){d===1?i.version=u.readVarint():d===2?i.name=u.readString():d===3?i.units=u.readString():d===4?i.tileSize=u.readVarint():d===5?i.buffer=u.readVarint():d===6?i.pixelFormat=u.readVarint():d===7&&i.dataIndex.push(function(f,y){return f.readFields(ute,{firstByte:0,lastByte:0,filters:[],codec:null,offset:0,scale:0,bands:[]},y)}(u,u.readVarint()+u.pos))}function dte(d,i,u){if(d===2)(function(f,y,m){f.readFields(hte,m,y)})(u,u.readVarint()+u.pos,i);else if(d===3)throw new Error("Not implemented")}function hte(d,i,u){if(d===1){let f=0;const y=u.readVarint()+u.pos;for(;u.pos<y;)i[f++]=u.readVarint()}}function fte(d,i){if(i.length!==4)throw new Error(`Expected data of dimension 4 but got ${i.length}.`);let u=i[3];for(let f=2;f>=1;f--){const y=f===1?1:0,m=f===2?1:0;for(let _=0;_<i[0];_++){const b=i[1]*_;for(let N=y;N<i[1];N++){const D=i[2]*(N+b);for(let S=m;S<i[2];S++){const V=i[3]*(S+D);for(let I=0;I<i[3];I++){const O=V+I;d[O]+=d[O-u]}}}}u*=i[f]}return d}function pte(d){for(let i=0,u=d.length;i<u;i++)d[i]=d[i]>>>1^-(1&d[i]);return d}function mte(d,i){switch(i){case"uint32":return d;case"uint16":for(let u=0;u<d.length;u+=2){const f=d[u],y=d[u+1];d[u]=(240&f)>>4|(61440&f)>>8|(240&y)<<4|61440&y,d[u+1]=15&f|(3840&f)>>4|(15&y)<<8|(3840&y)<<4}return d;case"uint8":for(let u=0;u<d.length;u+=4){const f=d[u],y=d[u+1],m=d[u+2],_=d[u+3];d[u+0]=(192&f)>>6|(192&y)>>4|(192&m)>>2|192&_,d[u+1]=(48&f)>>4|(48&y)>>2|48&m|(48&_)<<2,d[u+2]=(12&f)>>2|12&y|(12&m)<<2|(12&_)<<4,d[u+3]=3&f|(3&y)<<2|(3&m)<<4|(3&_)<<6}return d;default:throw new Error(`Invalid pixel format, "${i}"`)}}Pt(eC,"DEMData"),Pt(OF,"DemMinMaxQuadTree",{omit:["dem"]});var Jh=Uint8Array,uw=Uint16Array,yte=Int32Array,MF=new Jh([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),IF=new Jh([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),gte=new Jh([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),LF=function(d,i){for(var u=new uw(31),f=0;f<31;++f)u[f]=i+=1<<d[f-1];var y=new yte(u[30]);for(f=1;f<30;++f)for(var m=u[f];m<u[f+1];++m)y[m]=m-u[f]<<5|f;return{b:u,r:y}},FF=LF(MF,2),UF=FF.b,Ate=FF.r;UF[28]=258,Ate[258]=28;for(var _te=LF(IF,0).b,kF=new uw(32768),bo=0;bo<32768;++bo){var A_=(43690&bo)>>1|(21845&bo)<<1;kF[bo]=((65280&(A_=(61680&(A_=(52428&A_)>>2|(13107&A_)<<2))>>4|(3855&A_)<<4))>>8|(255&A_)<<8)>>1}var cw=function(d,i,u){for(var f=d.length,y=0,m=new uw(i);y<f;++y)d[y]&&++m[d[y]-1];var _,b=new uw(i);for(y=1;y<i;++y)b[y]=b[y-1]+m[y-1]<<1;_=new uw(1<<i);var N=15-i;for(y=0;y<f;++y)if(d[y])for(var D=y<<4|d[y],S=i-d[y],V=b[d[y]-1]++<<S,I=V|(1<<S)-1;V<=I;++V)_[kF[V]>>N]=D;return _},dw=new Jh(288);for(bo=0;bo<144;++bo)dw[bo]=8;for(bo=144;bo<256;++bo)dw[bo]=9;for(bo=256;bo<280;++bo)dw[bo]=7;for(bo=280;bo<288;++bo)dw[bo]=8;var BF=new Jh(32);for(bo=0;bo<32;++bo)BF[bo]=5;var vte=cw(dw,9),wte=cw(BF,5),hE=function(d){for(var i=d[0],u=1;u<d.length;++u)d[u]>i&&(i=d[u]);return i},_p=function(d,i,u){var f=i/8|0;return(d[f]|d[f+1]<<8)>>(7&i)&u},fE=function(d,i){var u=i/8|0;return(d[u]|d[u+1]<<8|d[u+2]<<16)>>(7&i)},Rte=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],vp=function(d,i,u){var f=new Error(i||Rte[d]);if(f.code=d,Error.captureStackTrace&&Error.captureStackTrace(f,vp),!u)throw f;return f},Tte=new Jh(0),Ste=typeof TextDecoder<"u"&&new TextDecoder;try{Ste.decode(Tte,{stream:!0})}catch{}const Cte={gzip_data:"gzip"};class Lf extends Error{constructor(i){super(i),this.name="MRTError"}}const bte={0:"uint32",1:"uint32",2:"uint16",3:"uint8"},GF={uint32:1,uint16:2,uint8:4},xte={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array};let pE;class tC{constructor(i=5){this.x=NaN,this.y=NaN,this.z=NaN,this.layers={},this._cacheSize=i}getLayer(i){const u=this.layers[i];if(!u)throw new Lf(`Layer '${i}' not found`);return u}getHeaderLength(i){const u=new Uint8Array(i),f=new DataView(i);if(u[0]!==13)throw new Lf("File is not a valid MRT.");return f.getUint32(1,!0)}parseHeader(i){const u=new Uint8Array(i),f=this.getHeaderLength(i);if(u.length<f)throw new Lf(`Expected header with length >= ${f} but got buffer of length ${u.length}`);const y=function(m,_){return m.readFields(ite,{headerLength:0,x:0,y:0,z:0,layers:[]},void 0)}(new pE(u.subarray(0,f)));if(!isNaN(this.x)&&(this.x!==y.x||this.y!==y.y||this.z!==y.z))throw new Lf(`Invalid attempt to parse header ${y.z}/${y.x}/${y.y} for tile ${this.z}/${this.x}/${this.y}`);this.x=y.x,this.y=y.y,this.z=y.z;for(const m of y.layers)this.layers[m.name]=new jF(m,{cacheSize:this._cacheSize});return this}createDecodingTask(i){const u=[],f=this.getLayer(i.layerName);for(let y of i.blockIndices){const m=f.dataIndex[y],_=m.firstByte-i.firstByte,b=m.lastByte-i.firstByte;if(f._blocksInProgress.has(y))continue;const N={layerName:f.name,firstByte:_,lastByte:b,pixelFormat:f.pixelFormat,blockIndex:y,blockShape:[m.bands.length].concat(f.bandShape),buffer:f.buffer,codec:m.codec.codec,filters:m.filters.map(D=>D.filter)};f._blocksInProgress.add(y),u.push(N)}return new ZF(u,()=>{u.forEach(y=>f._blocksInProgress.delete(y.blockIndex))},(y,m)=>{if(u.forEach(_=>f._blocksInProgress.delete(_.blockIndex)),y)throw y;m.forEach(_=>{this.getLayer(_.layerName).processDecodedData(_)})})}}class jF{constructor({version:i,name:u,units:f,tileSize:y,pixelFormat:m,buffer:_,dataIndex:b},N){if(this.version=i,this.version!==1)throw new Lf(`Cannot parse raster layer encoded with MRT version ${i}`);this.name=u,this.units=f,this.tileSize=y,this.buffer=_,this.pixelFormat=bte[m],this.dataIndex=b,this.bandShape=[y+2*_,y+2*_,GF[this.pixelFormat]],this._decodedBlocks=new QS(N?N.cacheSize:5),this._blocksInProgress=new Set}get dimension(){return GF[this.pixelFormat]}get cacheSize(){return this._decodedBlocks.capacity}getBandList(){return this.dataIndex.map(({bands:i})=>i).flat()}processDecodedData(i){const u=i.blockIndex.toString();this._decodedBlocks.get(u)||this._decodedBlocks.put(u,i.data)}getBlockForBand(i){let u=0;switch(typeof i){case"string":for(const[f,y]of this.dataIndex.entries()){for(const[m,_]of y.bands.entries())if(_===i)return{bandIndex:u+m,blockIndex:f,blockBandIndex:m};u+=y.bands.length}break;case"number":for(const[f,y]of this.dataIndex.entries()){if(i>=u&&i<u+y.bands.length)return{bandIndex:i,blockIndex:f,blockBandIndex:i-u};u+=y.bands.length}break;default:throw new Lf(`Invalid band \`${JSON.stringify(i)}\`. Expected string or integer.`)}throw new Lf(`Band not found: ${JSON.stringify(i)}`)}getDataRange(i){let u=1/0,f=-1/0;const y=[],m=new Set;for(const _ of i){const{blockIndex:b}=this.getBlockForBand(_);if(b<0)throw new Lf(`Invalid band: ${JSON.stringify(_)}`);const N=this.dataIndex[b];y.includes(b)||y.push(b),m.add(b),u=Math.min(u,N.firstByte),f=Math.max(f,N.lastByte)}if(m.size>this.cacheSize)throw new Lf(`Number of blocks to decode (${m.size}) exceeds cache size (${this.cacheSize}).`);return{layerName:this.name,firstByte:u,lastByte:f,blockIndices:y}}hasBand(i){const{blockIndex:u}=this.getBlockForBand(i);return u>=0}hasDataForBand(i){const{blockIndex:u}=this.getBlockForBand(i);return u>=0&&!!this._decodedBlocks.get(u.toString())}getBandView(i){const{blockIndex:u,blockBandIndex:f}=this.getBlockForBand(i),y=this._decodedBlocks.get(u.toString());if(!y)throw new Lf(`Data for band ${JSON.stringify(i)} of layer "${this.name}" not decoded.`);const m=this.dataIndex[u],_=this.bandShape.reduce((D,S)=>D*S,1),b=f*_,N=y.subarray(b,b+_);return{data:N,bytes:new Uint8Array(N.buffer).subarray(N.byteOffset,N.byteOffset+N.byteLength),tileSize:this.tileSize,buffer:this.buffer,pixelFormat:this.pixelFormat,dimension:this.dimension,offset:m.offset,scale:m.scale}}}tC.setPbf=function(d){pE=d};class ZF{constructor(i,u,f){this.tasks=i,this._onCancel=u,this._onComplete=f,this._finalized=!1}cancel(){this._finalized||(this._onCancel(),this._finalized=!0)}complete(i,u){this._finalized||(this._onComplete(i,u),this._finalized=!0)}}tC.performDecoding=function(d,i){const u=new Uint8Array(d);return Promise.all(i.tasks.map(f=>{const{layerName:y,firstByte:m,lastByte:_,pixelFormat:b,blockShape:N,blockIndex:D,filters:S,codec:V}=f,I=u.subarray(m,_+1),O=new Uint32Array(N[0]*N[1]*N[2]);let M;if(V!=="gzip_data")throw new Lf(`Unhandled codec: ${V}`);return M=function(B,X){if(!globalThis.DecompressionStream&&X==="gzip_data")return Promise.resolve(((ne=function(Pe){Pe[0]==31&&Pe[1]==139&&Pe[2]==8||vp(6,"invalid gzip data");var Ye=Pe[3],je=10;4&Ye&&(je+=2+(Pe[10]|Pe[11]<<8));for(var qe=(Ye>>3&1)+(Ye>>4&1);qe>0;qe-=!Pe[je++]);return je+(2&Ye)}(le=B))+8>le.length&&vp(6,"invalid gzip data"),function(Pe,Ye,je,qe){var mt=Pe.length;if(!mt||Ye.f&&!Ye.l)return je||new Jh(0);var Xe=!je,At=Xe||Ye.i!=2,xt=Ye.i;Xe&&(je=new Jh(3*mt));var St,Ot,Nt=function(hg){var fg=je.length;if(hg>fg){var FA=new Jh(Math.max(2*fg,hg));FA.set(je),je=FA}},kt=Ye.f||0,Mt=Ye.p||0,Zt=Ye.b||0,ga=Ye.l,ma=Ye.d,Ya=Ye.m,Pa=Ye.n,Oa=8*mt;do{if(!ga){kt=_p(Pe,Mt,1);var va=_p(Pe,Mt+1,3);if(Mt+=3,!va){var Ar=Pe[(Lr=4+((Mt+7)/8|0))-4]|Pe[Lr-3]<<8,$a=Lr+Ar;if($a>mt){xt&&vp(0);break}At&&Nt(Zt+Ar),je.set(Pe.subarray(Lr,$a),Zt),Ye.b=Zt+=Ar,Ye.p=Mt=8*$a,Ye.f=kt;continue}if(va==1)ga=vte,ma=wte,Ya=9,Pa=5;else if(va==2){var lr=_p(Pe,Mt,31)+257,Dr=_p(Pe,Mt+10,15)+4,Jr=lr+_p(Pe,Mt+5,31)+1;Mt+=14;for(var kr=new Jh(Jr),dn=new Jh(19),Xr=0;Xr<Dr;++Xr)dn[gte[Xr]]=_p(Pe,Mt+3*Xr,7);Mt+=3*Dr;var wn=hE(dn),Kn=(1<<wn)-1,Ei=cw(dn,wn);for(Xr=0;Xr<Jr;){var Lr,En=Ei[_p(Pe,Mt,Kn)];if(Mt+=15&En,(Lr=En>>4)<16)kr[Xr++]=Lr;else{var Yi=0,ls=0;for(Lr==16?(ls=3+_p(Pe,Mt,3),Mt+=2,Yi=kr[Xr-1]):Lr==17?(ls=3+_p(Pe,Mt,7),Mt+=3):Lr==18&&(ls=11+_p(Pe,Mt,127),Mt+=7);ls--;)kr[Xr++]=Yi}}var ys=kr.subarray(0,lr),Ns=kr.subarray(lr);Ya=hE(ys),Pa=hE(Ns),ga=cw(ys,Ya),ma=cw(Ns,Pa)}else vp(1);if(Mt>Oa){xt&&vp(0);break}}At&&Nt(Zt+131072);for(var Si=(1<<Ya)-1,ll=(1<<Pa)-1,bc=Mt;;bc=Mt){var Ao=(Yi=ga[fE(Pe,Mt)&Si])>>4;if((Mt+=15&Yi)>Oa){xt&&vp(0);break}if(Yi||vp(2),Ao<256)je[Zt++]=Ao;else{if(Ao==256){bc=Mt,ga=null;break}var xo=Ao-254;Ao>264&&(xo=_p(Pe,Mt,(1<<(Qh=MF[Xr=Ao-257]))-1)+UF[Xr],Mt+=Qh);var Iu=ma[fE(Pe,Mt)&ll],Ul=Iu>>4;if(Iu||vp(3),Mt+=15&Iu,Ns=_te[Ul],Ul>3){var Qh=IF[Ul];Ns+=fE(Pe,Mt)&(1<<Qh)-1,Mt+=Qh}if(Mt>Oa){xt&&vp(0);break}At&&Nt(Zt+131072);var dg=Zt+xo;if(Zt<Ns){var Ff=0-Ns,Rp=Math.min(Ns,dg);for(Ff+Zt<0&&vp(3);Zt<Rp;++Zt)je[Zt]=(void 0)[Ff+Zt]}for(;Zt<dg;++Zt)je[Zt]=je[Zt-Ns]}}Ye.l=ga,Ye.p=bc,Ye.b=Zt,Ye.f=kt,ga&&(kt=1,Ye.m=Ya,Ye.d=ma,Ye.n=Pa)}while(!kt);return Zt!=je.length&&Xe?(St=je,((Ot=Zt)==null||Ot>St.length)&&(Ot=St.length),new Jh(St.subarray(0,Ot))):je.subarray(0,Zt)}(le.subarray(ne,-8),{i:2},new Jh(((ee=le)[(ue=ee.length)-4]|ee[ue-3]<<8|ee[ue-2]<<16|ee[ue-1]<<24)>>>0))));var ee,ue,le,ne;const pe=Cte[X];if(!pe)throw new Error(`Unhandled codec: ${X}`);const we=new globalThis.DecompressionStream(pe);return new Response(new Blob([B]).stream().pipeThrough(we)).arrayBuffer().then(Pe=>new Uint8Array(Pe))}(I,V).then(B=>(function(X,ee){X.readFields(dte,ee)}(new pE(B),O),new xte[b](O.buffer))),M.then(B=>{for(let X=S.length-1;X>=0;X--)switch(S[X]){case"delta_filter":fte(B,N);break;case"zigzag_filter":pte(B);break;case"bitshuffle_filter":mte(B,b);break;default:throw new Lf(`Unhandled filter "${S[X]}"`)}return{layerName:y,blockIndex:D,data:B}}).catch(B=>{throw B})}))},Pt(ZF,"MRTDecodingBatch",{omit:["_onCancel","_onComplete"]}),Pt(tC,"MapboxRasterTile"),Pt(jF,"MapboxRasterLayer",{omit:["_blocksInProgress"]});let hw,mE,wp,__,yE,v_=null;function qF(){return Qi()&&self.worker&&self.worker.dracoUrl?self.worker.dracoUrl:mE||xe.DRACO_URL}function HF(){if(Qi()&&self.worker&&self.worker.meshoptUrl)return self.worker.meshoptUrl;if(__)return __;const d=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);if(typeof WebAssembly!="object")throw new Error("WebAssembly not supported, cannot instantiate meshoptimizer");return __=WebAssembly.validate(d)?xe.MESHOPT_SIMD_URL:xe.MESHOPT_URL,__}const aC={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Pte={5120:"DT_INT8",5121:"DT_UINT8",5122:"DT_INT16",5123:"DT_UINT16",5125:"DT_UINT32",5126:"DT_FLOAT32"},fw={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function $F(d,i,u){const f=u.json.bufferViews.length,y=u.buffers.length;i.bufferView=f,u.json.bufferViews[f]={buffer:y,byteLength:d.byteLength},u.buffers[y]=d}const gE="KHR_draco_mesh_compression";function Ete(d,i){const u=d.extensions&&d.extensions[gE];if(!u)return;const f=new wp.Decoder,y=XF(i,u.bufferView),m=new wp.Mesh;if(!f.DecodeArrayToMesh(y,y.byteLength,m))throw new Error("Failed to decode Draco mesh");const _=i.json.accessors[d.indices],b=aC[_.componentType],N=_.count*b.BYTES_PER_ELEMENT,D=wp._malloc(N);b===Uint16Array?f.GetTrianglesUInt16Array(m,N,D):f.GetTrianglesUInt32Array(m,N,D),$F(wp.memory.buffer.slice(D,D+N),_,i),wp._free(D);for(const S of Object.keys(u.attributes)){const V=f.GetAttributeByUniqueId(m,u.attributes[S]),I=i.json.accessors[d.attributes[S]],O=Pte[I.componentType],M=I.count*fw[I.type]*aC[I.componentType].BYTES_PER_ELEMENT,B=wp._malloc(M);f.GetAttributeDataArrayForAllPoints(m,V,wp[O],M,B),$F(wp.memory.buffer.slice(B,B+M),I,i),wp._free(B)}f.destroy(),m.destroy(),delete d.extensions[gE]}const rC="EXT_meshopt_compression";function Nte(d,i){if(!d.extensions||!d.extensions[rC])return;const u=d.extensions[rC],f=new Uint8Array(i.buffers[u.buffer],u.byteOffset||0,u.byteLength||0),y=new Uint8Array(u.count*u.byteStride);yE.decodeGltfBuffer(y,u.count,u.byteStride,f,u.mode,u.filter),d.buffer=i.buffers.length,d.byteOffset=0,i.buffers[d.buffer]=y.buffer,delete d.extensions[rC]}const KF=1179937895,WF=new TextDecoder("utf8");function YF(d,i){return new URL(d,i).href}function Vte(d,i,u,f){return fetch(YF(d.uri,f)).then(y=>y.arrayBuffer()).then(y=>{i.buffers[u]=y})}function XF(d,i){const u=d.json.bufferViews[i];return new Uint8Array(d.buffers[u.buffer],u.byteOffset||0,u.byteLength)}function zte(d,i,u,f){if(d.uri){const y=YF(d.uri,f);return fetch(y).then(m=>m.blob()).then(m=>createImageBitmap(m)).then(m=>{i.images[u]=m})}if(d.bufferView!==void 0){const y=XF(i,d.bufferView),m=new Blob([y],{type:d.mimeType});return createImageBitmap(m).then(_=>{i.images[u]=_})}}function JF(d,i=0,u){const f={json:null,images:[],buffers:[]};if(new Uint32Array(d,i,1)[0]===KF){const S=new Uint32Array(d,i);let V=2;const I=(S[V++]>>2)-3,O=S[V++]>>2;if(V++,f.json=JSON.parse(WF.decode(S.subarray(V,V+O))),V+=O,V<I){const M=S[V++];V++;const B=i+(V<<2);f.buffers[0]=d.slice(B,B+M)}}else f.json=JSON.parse(WF.decode(new Uint8Array(d,i)));const{buffers:y,images:m,meshes:_,extensionsUsed:b,bufferViews:N}=f.json;let D=Promise.resolve();if(y){const S=[];for(let V=0;V<y.length;V++){const I=y[V];I.uri?S.push(Vte(I,f,V,u)):f.buffers[V]||(f.buffers[V]=null)}D=Promise.all(S)}return D.then(()=>{const S=[],V=b&&b.includes(gE),I=b&&b.includes(rC);if(V&&S.push(function(){if(!wp)return hw??(hw=function(O){let M,B=null;function X(){M=new Uint8Array(B.buffer)}function ee(){throw new Error("Unexpected Draco error.")}const ue={a:{a:ee,d:function(le,ne,pe){return M.copyWithin(le,ne,ne+pe)},c:function(le){const ne=M.length,pe=Math.max(le>>>0,Math.ceil(1.2*ne)),we=Math.ceil((pe-ne)/65536);try{return B.grow(we),X(),!0}catch{return!1}},b:ee}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(O,ue):O.then(le=>le.arrayBuffer()).then(le=>WebAssembly.instantiate(le,ue))).then(le=>{const{Rb:ne,Qb:pe,P:we,T:Pe,X:Ye,Ja:je,La:qe,Qa:mt,Va:Xe,Wa:At,eb:xt,jb:St,f:Ot,e:Nt,yb:kt,zb:Mt,Ab:Zt,Bb:ga,Db:ma,Gb:Ya}=le.instance.exports;B=Nt;const Pa=(()=>{let Oa=0,va=0,Ar=0,$a=0;return lr=>{Ar&&(ne($a),ne(Oa),va+=Ar,Ar=Oa=0),Oa||(va+=128,Oa=pe(va));const Dr=lr.length+7&-8;let Jr=Oa;Dr>=va&&(Ar=Dr,Jr=$a=pe(Dr));for(let kr=0;kr<lr.length;kr++)M[Jr+kr]=lr[kr];return Jr}})();return X(),Ot(),{memory:Nt,_free:ne,_malloc:pe,Mesh:class{constructor(){this.ptr=we()}destroy(){Pe(this.ptr)}},Decoder:class{constructor(){this.ptr=je()}destroy(){St(this.ptr)}DecodeArrayToMesh(Oa,va,Ar){const $a=Pa(Oa),lr=qe(this.ptr,$a,va,Ar.ptr);return!!Ye(lr)}GetAttributeByUniqueId(Oa,va){return{ptr:mt(this.ptr,Oa.ptr,va)}}GetTrianglesUInt16Array(Oa,va,Ar){Xe(this.ptr,Oa.ptr,va,Ar)}GetTrianglesUInt32Array(Oa,va,Ar){At(this.ptr,Oa.ptr,va,Ar)}GetAttributeDataArrayForAllPoints(Oa,va,Ar,$a,lr){xt(this.ptr,Oa.ptr,va.ptr,Ar,$a,lr)}},DT_INT8:kt(),DT_UINT8:Mt(),DT_INT16:Zt(),DT_UINT16:ga(),DT_UINT32:ma(),DT_FLOAT32:Ya()}})}(fetch(qF())),hw.then(O=>{wp=O,hw=void 0}))}()),I&&S.push(function(){if(yE)return;const O=function(M){let B;const X=WebAssembly.instantiateStreaming(M,{}).then(le=>{B=le.instance,B.exports.__wasm_call_ctors()}),ee={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},ue={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:X,supported:!0,decodeGltfBuffer(le,ne,pe,we,Pe,Ye){(function(je,qe,mt,Xe,At,xt,St){const Ot=je.exports.sbrk,Nt=Xe+3&-4,kt=Ot(Nt*At),Mt=Ot(xt.length),Zt=new Uint8Array(je.exports.memory.buffer);Zt.set(xt,Mt);const ga=qe(kt,Xe,At,Mt,xt.length);if(ga===0&&St&&St(kt,Nt,At),mt.set(Zt.subarray(kt,kt+Xe*At)),Ot(kt-Ot(0)),ga!==0)throw new Error(`Malformed buffer data: ${ga}`)})(B,B.exports[ue[Pe]],le,ne,pe,we,B.exports[ee[Ye]])}}}(fetch(HF()));return O.ready.then(()=>{yE=O})}()),m)for(let O=0;O<m.length;O++)S.push(zte(m[O],f,O,u));return(S.length?Promise.all(S):Promise.resolve()).then(()=>{if(V&&_)for(const{primitives:O}of _)for(const M of O)Ete(M,f);if(I&&_&&N)for(const O of N)Nte(O,f);return f})})}function LA(d,i){const u=d.json.bufferViews[i.bufferView],f=aC[i.componentType];return new f(d.buffers[u.buffer],(i.byteOffset||0)+(u.byteOffset||0),i.count*(u.byteStride&&u.byteStride!==fw[i.type]*f.BYTES_PER_ELEMENT?u.byteStride/f.BYTES_PER_ELEMENT:fw[i.type]))}function AE(d,i,u,f){const y=aC[i.componentType],m=function(S){switch(S){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:return 1}}(y),_=d.json.bufferViews[i.bufferView],b=_.byteStride?_.byteStride/y.BYTES_PER_ELEMENT:fw[i.type],N=u.float32,D=N.length/u.capacity;for(let S=0,V=0;S<i.count*b;S+=b,V+=D)for(let I=0;I<D;I++)N[V+I]=f[S+I]*m;u._trim()}function Ote(d,i,u){const f=d.indices,y=d.attributes,m={};m.indexArray=new Ps;const _=i.json.accessors[f],b=_.count/3;m.indexArray.reserve(b);const N=LA(i,_);for(let I=0;I<b;I++)m.indexArray.emplaceBack(N[3*I],N[3*I+1],N[3*I+2]);m.indexArray._trim(),m.vertexArray=new So;const D=i.json.accessors[y.POSITION];m.vertexArray.reserve(D.count);const S=LA(i,D);for(let I=0;I<D.count;I++)m.vertexArray.emplaceBack(S[3*I],S[3*I+1],S[3*I+2]);if(m.vertexArray._trim(),m.aabb=new tr(D.min,D.max),m.centroid=function(I,O){const M=[0,0,0],B=I.length;if(B>0){for(let X=0;X<B;X++){const ee=3*I[X];M[0]+=O[ee],M[1]+=O[ee+1],M[2]+=O[ee+2]}M[0]/=B,M[1]/=B,M[2]/=B}return M}(N,S),y.COLOR_0!==void 0){const I=i.json.accessors[y.COLOR_0],O=fw[I.type],M=LA(i,I);m.colorArray=O===3?new So:new Jc,m.colorArray.resize(I.count),AE(i,I,m.colorArray,M)}if(y.NORMAL!==void 0){m.normalArray=new So;const I=i.json.accessors[y.NORMAL];m.normalArray.resize(I.count);const O=LA(i,I);AE(i,I,m.normalArray,O)}if(y.TEXCOORD_0!==void 0&&u.length>0){m.texcoordArray=new Hh;const I=i.json.accessors[y.TEXCOORD_0];m.texcoordArray.resize(I.count);const O=LA(i,I);AE(i,I,m.texcoordArray,O)}if(y._FEATURE_ID_RGBA4444!==void 0){const I=i.json.accessors[y._FEATURE_ID_RGBA4444];i.json.extensionsUsed&&i.json.extensionsUsed.includes("EXT_meshopt_compression")&&(m.featureData=LA(i,I))}y._FEATURE_RGBA4444!==void 0&&(m.featureData=new Uint32Array(LA(i,i.json.accessors[y._FEATURE_RGBA4444]).buffer));const V=d.material;return m.material=function(I,O){const{emissiveFactor:M=[0,0,0],alphaMode:B="OPAQUE",alphaCutoff:X=.5,normalTexture:ee,occlusionTexture:ue,emissiveTexture:le,doubleSided:ne}=I,{baseColorFactor:pe=[1,1,1,1],metallicFactor:we=1,roughnessFactor:Pe=1,baseColorTexture:Ye,metallicRoughnessTexture:je}=I.pbrMetallicRoughness||{},qe=ue?O[ue.index]:void 0;if(ue&&ue.extensions&&ue.extensions.KHR_texture_transform&&qe){const mt=ue.extensions.KHR_texture_transform;qe.offsetScale=[mt.offset[0],mt.offset[1],mt.scale[0],mt.scale[1]]}return{pbrMetallicRoughness:{baseColorFactor:new bn(...pe),metallicFactor:we,roughnessFactor:Pe,baseColorTexture:Ye?O[Ye.index]:void 0,metallicRoughnessTexture:je?O[je.index]:void 0},doubleSided:ne,emissiveFactor:M,alphaMode:B,alphaCutoff:X,normalTexture:ee?O[ee.index]:void 0,occlusionTexture:qe,emissionTexture:le?O[le.index]:void 0,defined:I.defined===void 0}}(V!==void 0?i.json.materials[V]:{defined:!1},u),m}function QF(d,i,u){const{matrix:f,rotation:y,translation:m,scale:_,mesh:b,extras:N,children:D}=d,S={};if(S.matrix=f||Ae.mat4.fromRotationTranslationScale([],y||[0,0,0,1],m||[0,0,0],_||[1,1,1]),b!==void 0){S.meshes=u[b];const V=S.anchor=[0,0];for(const I of S.meshes){const{min:O,max:M}=I.aabb;V[0]+=O[0]+M[0],V[1]+=O[1]+M[1]}V[0]=Math.floor(V[0]/S.meshes.length/2),V[1]=Math.floor(V[1]/S.meshes.length/2)}if(N&&(N.id&&(S.id=N.id),N.lights&&(S.lights=function(V){if(!V.length)return[];const I=function(ee){const ue=atob(ee),le=new Uint8Array(ue.length);for(let ne=0;ne<ue.length;ne++)le[ne]=ue.codePointAt(ne);return le}(V),O=[],M=I.length/24,B=new Uint16Array(I.buffer),X=new Float32Array(I.buffer);for(let ee=0;ee<M;ee++){const ue=B[2*ee*6]/30,le=B[2*ee*6+1]/30,ne=B[2*ee*6+10]/100,pe=X[6*ee+1],we=X[6*ee+2],Pe=X[6*ee+3],Ye=X[6*ee+4],je=Pe-pe,qe=Ye-we,mt=Math.hypot(je,qe);O.push({pos:[pe+.5*je,we+.5*qe,le],normal:[qe/mt,-je/mt,0],width:mt,height:ue,depth:ne,points:[pe,we,Pe,Ye]})}return O}(N.lights))),D){const V=[];for(const I of D)V.push(QF(i.json.nodes[I],i,u));S.children=V}return S}function Dte(d){if(d.vertices.length===0||d.indices.length===0)return null;const i=new C1(d.vertices,d.indices,8,256),[u,f]=[i.min.clone(),i.max.clone()];return{vertices:d.vertices,indices:d.indices,grid:i,min:u,max:f}}function Mte(d){if(!d.extras||!d.extras.ground)return null;const i=d.extras.ground;if(!i||!Array.isArray(i)||i.length===0)return null;const u=i[0];if(!u||!Array.isArray(u)||u.length===0)return null;const f=[];for(const _ of u){if(!Array.isArray(_)||_.length!==2)continue;const b=_[0],N=_[1];typeof b=="number"&&typeof N=="number"&&f.push(new It(b,N))}if(f.length<3)return null;f.length>1&&f[f.length-1].equals(f[0])&&f.pop();let y=0;for(let _=0;_<f.length;_++){const b=f[_],N=f[(_+1)%f.length],D=f[(_+2)%f.length];y+=(b.x-N.x)*(D.y-N.y)-(D.x-N.x)*(b.y-N.y)}y>0&&f.reverse();const m=yA(f.flatMap(_=>[_.x,_.y]),[]);return m.length===0?null:{vertices:f,indices:m}}function Ite(d,i){const u=[],f=[];let y=0;const m=[];for(const _ of d){y=u.length;const b=_.vertexArray.float32,N=_.indexArray.uint16;for(let D=0;D<_.vertexArray.length;D++)m[0]=b[3*D+0],m[1]=b[3*D+1],m[2]=b[3*D+2],Ae.vec3.transformMat4(m,m,i),u.push(new It(m[0],m[1]));for(let D=0;D<3*_.indexArray.length;D++)f.push(N[D]+y)}if(f.length%3!=0)return null;for(let _=0;_<f.length;_+=3){const b=u[f[_+0]],N=u[f[_+1]],D=u[f[_+2]];(b.x-N.x)*(D.y-N.y)-(D.x-N.x)*(b.y-N.y)>0&&([f[_+1],f[_+2]]=[f[_+2],f[_+1]])}return{vertices:u,indices:f}}function e6(d){const i=function(N,D){const S=[],V=WebGL2RenderingContext;if(N.json.textures)for(const I of N.json.textures){const O={magFilter:V.LINEAR,minFilter:V.NEAREST,wrapS:V.REPEAT,wrapT:V.REPEAT};I.sampler!==void 0&&Object.assign(O,N.json.samplers[I.sampler]),S.push({image:D[I.source],sampler:O,uploaded:!1})}return S}(d,d.images),u=function(N,D){const S=[];for(const V of N.json.meshes){const I=[];for(const O of V.primitives)I.push(Ote(O,N,D));S.push(I)}return S}(d,i),{scenes:f,scene:y,nodes:m}=d.json,_=f?f[y||0].nodes:m,b=[];for(const N of _)b.push(QF(m[N],d,u));return function(N,D,S){const V={},I=new Set;for(let O=0;O<N.length;O++){const M=S[D[O]];if(!M.extras)continue;const B=M.extras["mapbox:footprint:version"],X=M.extras["mapbox:footprint:id"];(B||X)&&I.add(O),B==="1.0.0"&&X&&(V[X]=O)}for(let O=0;O<N.length;O++){if(I.has(O))continue;const M=N[O],B=S[D[O]];if(!B.extras)continue;let X=null;M.id in V&&(X=Ite(N[V[M.id]].meshes,M.matrix)),X||(X=Mte(B)),X&&(M.footprint=Dte(X))}if(I.size>0){const O=Array.from(I.values()).sort((M,B)=>M-B);for(let M=O.length-1;M>=0;M--)N.splice(O[M],1)}}(b,_,d.json.nodes),b}function Lte(d){d.heightmap=new Float32Array(4096),d.heightmap.fill(-1);const i=d.vertexArray.float32,u=d.aabb.min[0]-1,f=d.aabb.min[1]-1,y=DA/(d.aabb.max[0]-u+2),m=DA/(d.aabb.max[1]-f+2);for(let _=0;_<i.length;_+=3){const b=i[_+2],N=(i[_+0]-u)*y|0,D=(i[_+1]-f)*m|0;b>d.heightmap[D*DA+N]&&(d.heightmap[D*DA+N]=b)}}function Fte(d,i){const u={};u.indexArray=new Ps,u.indexArray.reserve(4*d.length),u.vertexArray=new So,u.vertexArray.reserve(10*d.length),u.colorArray=new Jc,u.vertexArray.reserve(10*d.length);let f=0;for(const _ of d){const b=Math.min(10,Math.max(4,1.3*_.height))*i,N=[-_.normal[1],_.normal[0],0],D=Math.min(.29,.1*_.width/_.depth),S=_.width-2*_.depth*i*(D+.01),V=Ae.vec3.scaleAndAdd([],_.pos,N,S/2),I=Ae.vec3.scaleAndAdd([],_.pos,N,-S/2),O=[V[0],V[1],V[2]+_.height],M=[I[0],I[1],I[2]+_.height],B=Ae.vec3.scaleAndAdd([],_.normal,N,D);Ae.vec3.scale(B,B,b);const X=Ae.vec3.scaleAndAdd([],_.normal,N,-D);Ae.vec3.scale(X,X,b),Ae.vec3.add(B,V,B),Ae.vec3.add(X,I,X),V[2]+=.1,I[2]+=.1,u.vertexArray.emplaceBack(B[0],B[1],B[2]),u.vertexArray.emplaceBack(X[0],X[1],X[2]),u.vertexArray.emplaceBack(V[0],V[1],V[2]),u.vertexArray.emplaceBack(I[0],I[1],I[2]),u.vertexArray.emplaceBack(O[0],O[1],O[2]),u.vertexArray.emplaceBack(M[0],M[1],M[2]),u.vertexArray.emplaceBack(V[0],V[1],V[2]),u.vertexArray.emplaceBack(I[0],I[1],I[2]),u.vertexArray.emplaceBack(B[0],B[1],B[2]),u.vertexArray.emplaceBack(X[0],X[1],X[2]);const ee=S/b/2;u.colorArray.emplaceBack(-ee-D,-1,ee,.8),u.colorArray.emplaceBack(ee+D,-1,ee,.8),u.colorArray.emplaceBack(-ee,0,ee,1.3),u.colorArray.emplaceBack(ee,0,ee,1.3),u.colorArray.emplaceBack(ee+D,-.8,ee,.7),u.colorArray.emplaceBack(ee+D,-.8,ee,.7),u.colorArray.emplaceBack(0,0,ee,1.3),u.colorArray.emplaceBack(0,0,ee,1.3),u.colorArray.emplaceBack(ee+D,-1.2,ee,.8),u.colorArray.emplaceBack(ee+D,-1.2,ee,.8),u.indexArray.emplaceBack(6+f,4+f,8+f),u.indexArray.emplaceBack(7+f,9+f,5+f),u.indexArray.emplaceBack(0+f,1+f,2+f),u.indexArray.emplaceBack(1+f,3+f,2+f),f+=10}const y={defined:!0,emissiveFactor:[0,0,0]},m={};return m.baseColorFactor=bn.white,y.pbrMetallicRoughness=m,u.material=y,u.aabb=new tr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),u}class t6{constructor(i){this._stringToNumber={},this._numberToString=[];for(let u=0;u<i.length;u++){const f=i[u];this._stringToNumber[f]=u,this._numberToString[u]=f}}encode(i){return this._stringToNumber[i]}decode(i){return this._numberToString[i]}}const Ute=["id","tile","layer","source","sourceLayer","state"];class w_{constructor(i,u,f,y,m){this.type="Feature",this._vectorTileFeature=i,this._z=u,this._x=f,this._y=y,this.properties=i.properties,this.id=m}clone(){const i=new w_(this._vectorTileFeature,this._z,this._x,this._y,this.id);return this.state&&(i.state=Object.assign({},this.state)),this.layer&&(i.layer=Object.assign({},this.layer)),this.source&&(i.source=this.source),this.sourceLayer&&(i.sourceLayer=this.sourceLayer),i}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){const i={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};for(const u of Ute)this[u]!==void 0&&(i[u]=this[u]);return i}}class a6{constructor(i,u){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new Ct(Va,16,0),this.featureIndexArray=new gl,this.promoteId=u,this.is3DTile=!1,this.serializedLayersCache=new Map}insert(i,u,f,y,m,_=0,b=0){const N=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,y,m,_);const D=this.grid;for(let S=0;S<u.length;S++){const V=u[S],I=[1/0,1/0,-1/0,-1/0];for(let O=0;O<V.length;O++){const M=V[O];I[0]=Math.min(I[0],M.x),I[1]=Math.min(I[1],M.y),I[2]=Math.max(I[2],M.x),I[3]=Math.max(I[3],M.y)}b!==0&&(I[0]-=b,I[1]-=b,I[2]+=b,I[3]+=b),I[0]<Va&&I[1]<Va&&I[2]>=0&&I[3]>=0&&D.insert(N,I[0],I[1],I[2],I[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new bh.VectorTile(new on(this.rawTileData)).layers,this.sourceLayerCoder=new t6(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const i in this.vtLayers)this.vtFeatures[i]=[]}return this.vtLayers}query(i,u){const{tilespaceGeometry:f,transform:y,tileTransform:m,pixelPosMatrix:_,availableImages:b}=u;this.loadVTLayers(),this.serializedLayersCache.clear();const N=f.bufferedTilespaceBounds,D=this.grid.query(N.min.x,N.min.y,N.max.x,N.max.y,(O,M,B,X)=>ot(f.bufferedTilespaceGeometry,O,M,B,X));D.sort(kte);let S=null;y.elevation&&D.length>0&&(S=p_.create(y.elevation,this.tileID));const V={};let I;for(let O=0;O<D.length;O++){const M=D[O];if(M===I)continue;I=M;const B=this.featureIndexArray.get(M);let X=null;this.is3DTile?this.loadMatchingModelFeature(V,B,i,f,y):this.loadMatchingFeature(V,B,i,b,(ee,ue,le,ne=0)=>(X||(X=$(ee,this.tileID.canonical,m)),ue.queryIntersectsFeature(f,ee,le,X,this.z,y,_,S,ne)))}return V}loadMatchingFeature(i,u,f,y,m){const{featureIndex:_,bucketIndex:b,sourceLayerIndex:N,layoutVertexArrayOffset:D}=u,S=this.bucketLayerIDs[b],V=f.layers,I=Object.keys(V);if(I.length&&!function(ee,ue){for(let le=0;le<ee.length;le++)if(ue.indexOf(ee[le])>=0)return!0;return!1}(I,S))return;const O=f.sourceCache,M=this.sourceLayerCoder.decode(N),B=this.vtLayers[M].feature(_),X=this.getId(B,M);for(let ee=0;ee<S.length;ee++){const ue=S[ee];if(!V[ue])continue;const{styleLayer:le,targets:ne}=V[ue];let pe={};X!==void 0&&(pe=O.getFeatureState(le.sourceLayer,X));const we=!m||m(B,le,pe,D);if(!we)continue;const Pe=new w_(B,this.z,this.x,this.y,X);Pe.tile=this.tileID.canonical,Pe.state=pe;let Ye=this.serializedLayersCache.get(ue);Ye||(Ye=le.serialize(),Ye.id=ue,this.serializedLayersCache.set(ue,Ye)),Pe.source=Ye.source,Pe.sourceLayer=Ye["source-layer"],Pe.layer=Rn({},Ye),Pe.layer.paint=r6(Ye.paint,le.paint,B,pe,y),Pe.layer.layout=r6(Ye.layout,le.layout,B,pe,y);let je=!1;for(const qe of ne){this.updateFeatureProperties(Pe,qe);const{filter:mt}=qe;if(mt){if(B.properties=Pe.properties,mt.needGeometry){const Xe=W(B,!0);if(!mt.filter(new vn(this.tileID.overscaledZ),Xe,this.tileID.canonical))continue}else if(!mt.filter(new vn(this.tileID.overscaledZ),B))continue}je=!0,qe.targetId&&this.addFeatureVariant(Pe,qe)}je&&this.appendToResult(i,ue,_,Pe,we)}}loadMatchingModelFeature(i,u,f,y,m){const _=this.bucketLayerIDs[0][0],b=f.layers;if(!b[_])return;const{styleLayer:N,targets:D}=b[_];if(N.type!=="model")return;const S=y.tile,V=u.featureIndex,I=S.getBucket(N);if(!(I&&I instanceof HS))return;const O=function(Ye,je,qe,mt){const Xe=Ye.getNodesInfo()[je];if(Xe.hiddenByReplacement||!Xe.node.meshes)return;let At=Number.MAX_VALUE;const xt=Xe.node,St=qe.tile,Ot=mt.calculatePosMatrix(St.tileID.toUnwrapped(),mt.worldSize),Nt=Xe.evaluatedScale;let kt=0;mt.elevation&&xt.elevation&&(kt=xt.elevation*mt.elevation.exaggeration()),Ae.mat4.translate(Ot,Ot,[(xt.anchor?xt.anchor[0]:0)*(Nt[0]-1),(xt.anchor?xt.anchor[1]:0)*(Nt[1]-1),kt]),Ae.mat4.scale(Ot,Ot,Nt);const Mt=qe.queryGeometry,Zt=Mt.isPointQuery()?Mt.screenBounds:Mt.screenGeometry,ga=function(Ya){const Pa=Ae.mat4.multiply([],Ot,Ya.matrix);Ae.mat4.multiply(Pa,mt.expandedFarZProjMatrix,Pa);for(let Oa=0;Oa<Ya.meshes.length;++Oa){const va=Ya.meshes[Oa];if(Oa===Ya.lightMeshIndex)continue;const Ar=eF(Zt,mt,Pa,va.aabb);Ar!=null&&(At=Math.min(Ar,At))}if(Ya.children)for(const Oa of Ya.children)ga(Oa)};if(ga(xt),At===Number.MAX_VALUE)return;const ma=new Ln(0,0);return hF(St.tileID.canonical,ma,Xe.node.anchor[0],Xe.node.anchor[1]),{intersectionZ:At,position:ma,feature:Xe.feature}}(I,V,y,m);if(!O)return;const{z:M,x:B,y:X}=S.tileID.canonical,{feature:ee,intersectionZ:ue,position:le}=O;let ne={};ee.id!==void 0&&(ne=f.sourceCache.getFeatureState(N.sourceLayer,ee.id));const pe=new w_({},M,B,X,ee.id);pe.tile=this.tileID.canonical,pe.state=ne,pe.properties=ee.properties,pe.geometry={type:"Point",coordinates:[le.lng,le.lat]};let we=this.serializedLayersCache.get(_);we||(we=N.serialize(),we.id=_,this.serializedLayersCache.set(_,we)),pe.source=we.source,pe.sourceLayer=we["source-layer"],pe.layer=Rn({},we);let Pe=!1;for(const Ye of D){this.updateFeatureProperties(pe,Ye);const{filter:je}=Ye;if(je){if(ee.properties=pe.properties,je.needGeometry){if(!je.filter(new vn(this.tileID.overscaledZ),ee,this.tileID.canonical))continue}else if(!je.filter(new vn(this.tileID.overscaledZ),ee))continue}Pe=!0,Ye.targetId&&this.addFeatureVariant(pe,Ye)}Pe&&this.appendToResult(i,_,V,pe,ue)}updateFeatureProperties(i,u,f){if(u.properties){const y={};for(const m in u.properties){const _=u.properties[m].evaluate({zoom:this.z},i._vectorTileFeature,i.state,i.tile,f);_!=null&&(y[m]=_)}i.properties=y}}addFeatureVariant(i,u,f){const y={target:u.target,namespace:u.namespace,uniqueFeatureID:u.uniqueFeatureID};u.properties&&(y.properties=i.properties),i.variants=i.variants||{},i.variants[u.targetId]=i.variants[u.targetId]||[],i.variants[u.targetId].push(y)}appendToResult(i,u,f,y,m){let _=i[u];_===void 0&&(_=i[u]=[]),_.push({featureIndex:f,feature:y,intersectionZ:m})}lookupSymbolFeatures(i,u,f,y,m){const _={};this.loadVTLayers();for(const b of i)this.loadMatchingFeature(_,{bucketIndex:u,sourceLayerIndex:f,featureIndex:b,layoutVertexArrayOffset:0},y,m);return _}loadFeature(i){const{featureIndex:u,sourceLayerIndex:f}=i;this.loadVTLayers();const y=this.sourceLayerCoder.decode(f),m=this.vtFeatures[y];if(m[u])return m[u];const _=this.vtLayers[y].feature(u);return m[u]=_,_}hasLayer(i){for(const u of this.bucketLayerIDs)for(const f of u)if(i===f)return!0;return!1}getId(i,u){let f=i.id;if(this.promoteId){const y=Array.isArray(this.promoteId)||typeof this.promoteId!="object"?this.promoteId:this.promoteId[u];if(y!=null)if(Array.isArray(y)){if(!this.promoteIdExpression){const m=G(y);if(m.result!=="success"){const _=m.value.map(b=>`${b.key}: ${b.message}`).join(", ");return void en(`Failed to create expression for promoteId: ${_}`)}this.promoteIdExpression=m.value}this.promoteIdExpression._evaluator||(this.promoteIdExpression._evaluator=new bd),f=this.promoteIdExpression.evaluate({zoom:0},i)}else f=i.properties[y];typeof f=="boolean"&&(f=Number(f))}return f}}function r6(d,i,u,f,y){return gr(d,(m,_)=>{const b=i instanceof xu?i.get(_):null;return b&&b.evaluate?b.evaluate(u,f,y):b})}function kte(d,i){return i-d}Pt(a6,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});const n6=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class _E{static from(i){if(!(i instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[u,f]=new Uint8Array(i,0,2);if(u!==219)throw new Error("Data does not appear to be in a KDBush format.");const y=f>>4;if(y!==1)throw new Error(`Got v${y} data when expected v1.`);const m=n6[15&f];if(!m)throw new Error("Unrecognized array type.");const[_]=new Uint16Array(i,2,1),[b]=new Uint32Array(i,4,1);return new _E(b,_,m,i)}constructor(i,u=64,f=Float64Array,y){if(isNaN(i)||i<0)throw new Error(`Unpexpected numItems value: ${i}.`);this.numItems=+i,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=f,this.IndexArrayType=i<65536?Uint16Array:Uint32Array;const m=n6.indexOf(this.ArrayType),_=2*i*this.ArrayType.BYTES_PER_ELEMENT,b=i*this.IndexArrayType.BYTES_PER_ELEMENT,N=(8-b%8)%8;if(m<0)throw new Error(`Unexpected typed array class: ${f}.`);y&&y instanceof ArrayBuffer?(this.data=y,this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+b+N,2*i),this._pos=2*i,this._finished=!0):(this.data=new ArrayBuffer(8+_+b+N),this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+b+N,2*i),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+m]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=i)}add(i,u){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=i,this.coords[this._pos++]=u,f}finish(){const i=this._pos>>1;if(i!==this.numItems)throw new Error(`Added ${i} items when expected ${this.numItems}.`);return vE(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(i,u,f,y){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:_,nodeSize:b}=this,N=[0,m.length-1,0],D=[];for(;N.length;){const S=N.pop()||0,V=N.pop()||0,I=N.pop()||0;if(V-I<=b){for(let X=I;X<=V;X++){const ee=_[2*X],ue=_[2*X+1];ee>=i&&ee<=f&&ue>=u&&ue<=y&&D.push(m[X])}continue}const O=I+V>>1,M=_[2*O],B=_[2*O+1];M>=i&&M<=f&&B>=u&&B<=y&&D.push(m[O]),(S===0?i<=M:u<=B)&&(N.push(I),N.push(O-1),N.push(1-S)),(S===0?f>=M:y>=B)&&(N.push(O+1),N.push(V),N.push(1-S))}return D}within(i,u,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:y,coords:m,nodeSize:_}=this,b=[0,y.length-1,0],N=[],D=f*f;for(;b.length;){const S=b.pop()||0,V=b.pop()||0,I=b.pop()||0;if(V-I<=_){for(let X=I;X<=V;X++)s6(m[2*X],m[2*X+1],i,u)<=D&&N.push(y[X]);continue}const O=I+V>>1,M=m[2*O],B=m[2*O+1];s6(M,B,i,u)<=D&&N.push(y[O]),(S===0?i-f<=M:u-f<=B)&&(b.push(I),b.push(O-1),b.push(1-S)),(S===0?i+f>=M:u+f>=B)&&(b.push(O+1),b.push(V),b.push(1-S))}return N}}function vE(d,i,u,f,y,m){if(y-f<=u)return;const _=f+y>>1;i6(d,i,_,f,y,m),vE(d,i,u,f,_-1,1-m),vE(d,i,u,_+1,y,1-m)}function i6(d,i,u,f,y,m){for(;y>f;){if(y-f>600){const D=y-f+1,S=u-f+1,V=Math.log(D),I=.5*Math.exp(2*V/3),O=.5*Math.sqrt(V*I*(D-I)/D)*(S-D/2<0?-1:1);i6(d,i,u,Math.max(f,Math.floor(u-S*I/D+O)),Math.min(y,Math.floor(u+(D-S)*I/D+O)),m)}const _=i[2*u+m];let b=f,N=y;for(pw(d,i,f,u),i[2*y+m]>_&&pw(d,i,f,y);b<N;){for(pw(d,i,b,N),b++,N--;i[2*b+m]<_;)b++;for(;i[2*N+m]>_;)N--}i[2*f+m]===_?pw(d,i,f,N):(N++,pw(d,i,N,y)),N<=u&&(f=N+1),u<=N&&(y=N-1)}}function pw(d,i,u,f){wE(d,u,f),wE(i,2*u,2*f),wE(i,2*u+1,2*f+1)}function wE(d,i,u){const f=d[i];d[i]=d[u],d[u]=f}function s6(d,i,u,f){const y=d-u,m=i-f;return y*y+m*m}n.$=Zs,n.A=Lo,n.B=Gu,n.C=Wc,n.D=m_,n.E=$l,n.F=2,n.G=Y1,n.H=fL,n.I=Fo,n.J=class extends ZS{},n.K=Au,n.L=Tn,n.M=Yp,n.N=qc,n.O=Zc,n.P=It,n.Q=Hu,n.R=ws,n.S=jh,n.T=JP,n.U=hh,n.V=ZS,n.W=Ne,n.X=G,n.Y=cs,n.Z=ai,n._=Bo,n.a=function(d){return xe.API_CDN_URL_REGEX.test(d)},n.a$=W,n.a0=Yo,n.a1=fh,n.a2=Jf,n.a3=zl,n.a4=function(d){const i=d.value;let u=[];if(!i)return u;const f=Au(i);return f!=="string"?(u=u.concat([new ZS(d.key,i,`string expected, "${f}" found`)]),u):(aF(i,!0)||(u=u.concat([new ZS(d.key,i,`invalid url "${i}"`)])),u)},n.a5=jt,n.a6=To,n.a7=Oi,n.a8=ba,n.a9=class{constructor(d){this.specification=d}possiblyEvaluate(d,i){return Bi(d.expression.evaluate(i))}interpolate(d,i,u){return{x:fr(d.x,i.x,u),y:fr(d.y,i.y,u),z:fr(d.z,i.z,u),azimuthal:fr(d.azimuthal,i.azimuthal,u),polar:fr(d.polar,i.polar,u)}}},n.aA=function(d,i){const u={};for(let f=0;f<i.length;f++){const y=i[f];y in d&&(u[y]=d[y])}return u},n.aB=Kh,n.aC=Pi,n.aD=class{constructor(d){this.entries={},this.scheduler=d}request(d,i,u,f){const y=this.entries[d]=this.entries[d]||{callbacks:[]};if(y.result){const[m,_]=y.result;return this.scheduler?this.scheduler.add(()=>{f(m,_)},i):f(m,_),()=>{}}return y.callbacks.push(f),y.cancel||(y.cancel=u((m,_)=>{y.result=[m,_];for(const b of y.callbacks)this.scheduler?this.scheduler.add(()=>{b(m,_)},i):b(m,_);setTimeout(()=>delete this.entries[d],3e3)})),()=>{y.result||(y.callbacks=y.callbacks.filter(m=>m!==f),y.callbacks.length||(y.cancel(),delete this.entries[d]))}}},n.aE=function(d,i,u){const f=JSON.stringify(d.request);return d.data&&(this.deduped.entries[f]={result:[null,d.data]}),this.deduped.request(f,{type:"parseTile",isSymbolTile:d.isSymbolTile,zoom:d.tileZoom},y=>{const m=zi(d.request,(_,b,N,D)=>{_?y(_):b&&y(null,{vectorTile:u?void 0:new bh.VectorTile(new on(b)),rawData:b,cacheControl:N,expires:D})});return()=>{m.cancel(),y()}},i)},n.aF=function(d){yn++,yn>Nr&&(d.getActor().send("enforceCacheSizeLimit",_r),yn=0)},n.aG=function(d){return d<=1?1:Math.pow(2,Math.floor(Math.log(d)/Math.LN2))},n.aH=pa,n.aI=jL,n.aJ=WL,n.aK=GL,n.aL=function(d,i){const u=document.createElement("video");u.muted=!0,u.onloadstart=function(){i(null,u)};for(let f=0;f<d.length;f++){const y=document.createElement("source");ql(d[f])||(u.crossOrigin="Anonymous"),y.src=d[f],u.appendChild(y)}return{cancel:()=>{}}},n.aM=US,n.aN=function(d){return fetch(d).then(i=>i.arrayBuffer()).then(i=>JF(i,0,d))},n.aO=e6,n.aP=class{constructor(d,i,u,f){this.id=d,this.position=i!=null?new Ln(i[0],i[1]):new Ln(0,0),this.orientation=u??[0,0,0],this.nodes=f,this.uploaded=!1,this.aabb=new tr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(d,i){if(Ae.mat4.multiply(d.matrix,i,d.matrix),d.meshes)for(const u of d.meshes){const f=tr.applyTransformFast(u.aabb,d.matrix);this.aabb.encapsulate(f)}if(d.children)for(const u of d.children)this._applyTransformations(u,d.matrix)}computeBoundsAndApplyParent(){const d=Ae.mat4.identity([]);for(const i of this.nodes)this._applyTransformations(i,d)}computeModelMatrix(d,i,u,f,y,m,_=!1){oF(this.matrix,this,d.transform,this.position,i,u,f,y,m,_)}upload(d){if(!this.uploaded){for(const i of this.nodes)rE(i,d);for(const i of this.nodes)qS(i);this.uploaded=!0}}destroy(){for(const d of this.nodes)nE(d)}},n.aQ=Qa,n.aR=J1,n.aS=Ou,n.aT=Ri,n.aU=Nu,n.aV=Ps,n.aW=Wa,n.aX=Jp,n.aY=LS,n.aZ=function(){ss.isLoading()||ss.isLoaded()||po()!=="deferred"||wi()},n.a_=ph,n.aa=vn,n.ab=fe,n.ac=o,n.ad=Ae,n.ae=jr,n.af=xu,n.ag=Ll,n.ah=fr,n.ai=Va,n.aj=Dc,n.ak=Na,n.al=bn,n.am=class{constructor(d){this.specification=d}possiblyEvaluate(d,i){return function([u,f]){const y=Bi([1,u,f]);return{x:y.x,y:y.y,z:y.z}}(d.expression.evaluate(i))}interpolate(d,i,u){return{x:fr(d.x,i.x,u),y:fr(d.y,i.y,u),z:fr(d.z,i.z,u)}}},n.an=function(d,i,u=0,f=!0){const y=new It(u,u),m=d.sub(y),_=i.add(y),b=[m,new It(_.x,m.y),_,new It(m.x,_.y)];return f&&b.push(m.clone()),b},n.ao=function(d,i){const u=[];for(let f=0;f<d.length;f++){const y=pn(f-1,-1,d.length-1),m=pn(f+1,-1,d.length-1),_=d[f],b=d[m],N=d[y].sub(_).unit(),D=b.sub(_).unit(),S=D.angleWithSep(N.x,N.y),V=N.add(D).unit().mult(-1*i/Math.sin(S/2));u.push(_.add(V))}return u},n.ap=PL,n.aq=ot,n.ar=function(d,i,u=0){return Ae.vec3.fromValues(((i.x-u)*d.scale-d.x)*Va,(i.y*d.scale-d.y)*Va,qy(i.z,i.y))},n.as=Cr,n.at=RS,n.au=function(d){let i=1/0,u=1/0,f=-1/0,y=-1/0;for(const m of d)i=Math.min(i,m.x),u=Math.min(u,m.y),f=Math.max(f,m.x),y=Math.max(y,m.y);return{min:new It(i,u),max:new It(f,y)}},n.av=_l,n.aw=st,n.ax=A,n.ay=ka,n.az=Al,n.b=function(d){return xe.API_FONTS_REGEX.test(d)},n.b$=GS,n.b0=w_,n.b1=Oo,n.b2=If,n.b3=eg,n.b4=$,n.b5=Eu,n.b6=Gd,n.b7=mr,n.b8=Di,n.b9=yA,n.bA=fS,n.bB=GP,n.bC=wL,n.bD=UP,n.bE=_E,n.bF=pn,n.bG=fn,n.bH=jo,n.bI=function(d,i,u){d[4*i+0]=u[0],d[4*i+1]=u[1],d[4*i+2]=u[2],d[4*i+3]=u[3]},n.bJ=ed,n.bK=Qc,n.bL=lp,n.bM=ms,n.bN=Rc,n.bO=Ln,n.bP=OL,n.bQ=Wt,n.bR=Tr,n.bS=XL,n.bT=da,n.bU=mo,n.bV=function(d,i,u,f,y,m,_,b,N){if(N.name==="globe")return mo(d,i,new da(u,f,y),!1);const D=J1({z:u,x:f,y},N);return new tr([(m+D.x/D.scale)*i,i*(D.y/D.scale),_],[(m+D.x2/D.scale)*i,i*(D.y2/D.scale),b])},n.bW=function(d,i,u){let f=0;for(let y=0;y<2;++y)d[y]>0&&(f+=(d[y]-0)*(d[y]-0)),i[y]<0&&(f+=(0-i[y])*(0-i[y]));return f},n.bX=Du,n.bY=rm,n.bZ=function(d){const i=Ae.mat4.identity(new Float64Array(16));Ae.mat4.multiply(i,d.pixelMatrix,d.globeMatrix);const u=[0,Go,0],f=[0,Xu,0];return Ae.vec3.transformMat4(u,u,i),Ae.vec3.transformMat4(f,f,i),[u[0]>0&&u[0]<=d.width&&u[1]>0&&u[1]<=d.height&&!vl(d,new Ln(d.center.lat,90)),f[0]>0&&f[0]<=d.width&&f[1]>0&&f[1]<=d.height&&!vl(d,new Ln(d.center.lat,-90))]},n.b_=function(d,i){const{scale:u}=d.tileTransform,f=u*Va/(d.tileSize*Math.pow(2,i.zoom-d.tileID.overscaledZ+d.tileID.canonical.z));return Ae.mat2.scale(new Float32Array(4),i.inverseAdjustmentMatrix,[f,f])},n.ba=WP,n.bb=function(d,i){const u=Ll(i.zoom);if(u===0)return hs(d);const f=Cn(d),y=ii(f),m=_l(f.getWest())*i.worldSize,_=_l(f.getEast())*i.worldSize,b=Pi(f.getNorth())*i.worldSize,N=Pi(f.getSouth())*i.worldSize,D=[m,b,0],S=[_,b,0],V=[m,N,0],I=[_,N,0],O=Ae.mat4.invert([],i.globeMatrix);return Ae.vec3.transformMat4(D,D,O),Ae.vec3.transformMat4(S,S,O),Ae.vec3.transformMat4(V,V,O),Ae.vec3.transformMat4(I,I,O),y[0]=ro(y[0],V,u),y[1]=ro(y[1],I,u),y[2]=ro(y[2],S,u),y[3]=ro(y[3],D,u),tr.fromPoints(y)},n.bc=Ti,n.bd=On,n.be=ro,n.bf=Ud,n.bg=Fr,n.bh=tC,n.bi=on,n.bj=zi,n.bk=function(d,i){const u=[];for(const f in d)f in i||u.push(f);return u},n.bl=Dn,n.bm=["type","source","source-layer","minzoom","maxzoom","filter","layout"],n.bn=ta,n.bo=function(d,i){const{x:u,y:f}=d.point,y=iu(u,f,d.worldSize/d._pixelsPerMercatorPixel,0,0);return Ae.mat4.multiply(y,y,os(hs(i)))},n.bp=nr,n.bq=Kd,n.br=ja,n.bs=function(d,i,u,f,y){const m=5*i+2;d.float32[m+0]=u,d.float32[m+1]=f,d.float32[m+2]=y},n.bt=IS,n.bu=hL,n.bv=Te,n.bw=Fe,n.bx=Mf,n.by=tF,n.bz=hS,n.c=rt,n.c$=TS,n.c0=YL,n.c1=function(d){const i=YL(d,!0);return Ae.mat2.invert([],[i[0],i[1],i[4],i[5]])},n.c2=xr,n.c3=function(d){const{x:i,y:u}=d.point,{lng:f,lat:y}=d._center;return iu(i,u,d.worldSize,f,y)},n.c4=za,n.c5=Ia,n.c6=Th,n.c7=function(d){const i=Math.round((d+45+360)%360/90)%4;return er[i]},n.c8=45,n.c9=gn,n.cA=bf,n.cB=class extends jd{constructor(d){super(d),this.current=Zd}set(d,i,u){if(this.fetchUniformLocation(d,i)){for(let f=0;f<9;f++)if(u[f]!==this.current[f]){this.current=u,this.gl.uniformMatrix3fv(this.location,!1,u);break}}}},n.cC=dr,n.cD=function(d,i,u){const f=Ll(u.zoom),y=d.style.map._antialias,m=d.terrain&&d.terrain.exaggeration()>0;return f===0&&!y&&!m},n.cE=function(d){const i=d.pixelsPerMeter,u=i/jo(1,d.center.lat),f=Ae.mat4.identity(new Float64Array(16));return Ae.mat4.translate(f,f,[d.point.x,d.point.y,0]),Ae.mat4.scale(f,f,[u,u,i]),Float32Array.from(f)},n.cF=Cn,n.cG=function(d){const i=Du-5;d=ka(d,-80.051129,i)/i*90;const u=Math.pow(Math.abs(Math.sin(Na(d))),3);return Math.round(u*(Vf.length-1))},n.cH=function(d,i,u,f){const y=i.getNorth(),m=i.getSouth(),_=i.getWest(),b=i.getEast(),N=1<<d.z,D=b-_,S=y-m,V=D/dp,I=-S/Vf[u],O=[0,V,0,I,0,0,y,_,0];if(d.z>0){const M=180/f;Ae.mat3.multiply(O,O,[M/D+1,0,0,0,M/S+1,0,-.5*M/V,.5*M/I,1])}return O[2]=N,O[5]=d.x,O[8]=d.y,O},n.cI=hs,n.cJ=function(d,i,u){const f=Ae.mat4.identity(new Float64Array(16)),y=(i/(1<<d)-.5)*Math.PI*2;return Ae.mat4.rotateY(f,u.globeMatrix,y),Float32Array.from(f)},n.cK=class{isDataAvailableAtPoint(d){const i=this._source();if(this.isUsingMockSource()||!i||d.y<0||d.y>1)return!1;const u=i.getSource().maxzoom,f=1<<u,y=Math.floor(d.x),m=Math.floor((d.x-y)*f),_=Math.floor(d.y*f),b=this.findDEMTileFor(new pa(u,y,u,m,_));return!(!b||!b.dem)}getAtPointOrZero(d,i=0){return this.getAtPoint(d,i)||0}getAtPoint(d,i,u=!0){if(this.isUsingMockSource())return null;i==null&&(i=null);const f=this._source();if(!f||d.y<0||d.y>1)return i;const y=f.getSource().maxzoom,m=1<<y,_=Math.floor(d.x),b=d.x-_,N=new pa(y,_,y,Math.floor(b*m),Math.floor(d.y*m)),D=this.findDEMTileFor(N);if(!D||!D.dem)return i;const S=D.dem,V=1<<D.tileID.canonical.z,I=(b*V-D.tileID.canonical.x)*S.dim,O=(d.y*V-D.tileID.canonical.y)*S.dim,M=Math.floor(I),B=Math.floor(O);return(u?this.exaggeration():1)*fr(fr(S.get(M,B),S.get(M,B+1),O-B),fr(S.get(M+1,B),S.get(M+1,B+1),O-B),I-M)}getAtTileOffset(d,i,u){const f=1<<d.canonical.z;return this.getAtPointOrZero(new o(d.wrap+(d.canonical.x+i/Va)/f,(d.canonical.y+u/Va)/f))}getAtTileOffsetFunc(d,i,u,f){return y=>{const m=this.getAtTileOffset(d,y.x,y.y),_=f.upVector(d.canonical,y.x,y.y),b=f.upVectorScale(d.canonical,i,u).metersToTile;return Ae.vec3.scale(_,_,m*b),_}}getForTilePoints(d,i,u,f){if(this.isUsingMockSource())return!1;const y=p_.create(this,d,f);return!!y&&(i.forEach(m=>{m[2]=this.exaggeration()*y.getElevationAt(m[0],m[1],u)}),!0)}getMinMaxForTile(d){if(this.isUsingMockSource())return null;const i=this.findDEMTileFor(d);if(!i||!i.dem)return null;const u=i.dem.tree,f=i.tileID,y=1<<d.canonical.z-f.canonical.z;let m=d.canonical.x/y-f.canonical.x,_=d.canonical.y/y-f.canonical.y,b=0;for(let N=0;N<d.canonical.z-f.canonical.z&&!u.leaves[b];N++){m*=2,_*=2;const D=2*Math.floor(_)+Math.floor(m);b=u.childOffsets[b]+D,m%=1,_%=1}return{min:this.exaggeration()*u.minimums[b],max:this.exaggeration()*u.maximums[b]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(d,i,u){throw new Error("Pure virtual method called.")}pointCoordinate(d){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(d){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){const d=this.visibleDemTiles;if(d.length===0)return null;let i=!1,u=Number.MAX_VALUE,f=Number.MIN_VALUE;for(const y of d){const m=this.getMinMaxForTile(y.tileID);m&&(u=Math.min(u,m.min),f=Math.max(f,m.max),i=!0)}return i?{min:u,max:f}:null}},n.cL=y1,n.cM=sn,n.cN=function(d,i){return[Math.pow(d[0],2.2)*i,Math.pow(d[1],2.2)*i,Math.pow(d[2],2.2)*i]},n.cO=qo,n.cP=Jt,n.cQ=Us,n.cR=256,n.cS=function(d,i){const u=[0,0,0],f=Ti(hs(i.canonical));return Ae.vec3.transformMat4(u,u,f),Ae.vec3.transformMat4(u,u,d),u},n.cT=d=>({u_camera_to_center_distance:new ms(d),u_extrude_scale:new Jm(d),u_device_pixel_ratio:new ms(d),u_matrix:new ed(d),u_inv_rot_matrix:new ed(d),u_merc_center:new Qc(d),u_tile_id:new lp(d),u_zoom_transition:new ms(d),u_up_dir:new lp(d),u_emissive_strength:new ms(d)}),n.cU=d=>({u_matrix:new ed(d),u_pixels_to_tile_units:new Jm(d),u_device_pixel_ratio:new ms(d),u_width_scale:new ms(d),u_floor_width_scale:new ms(d),u_units_to_pixels:new Qc(d),u_dash_image:new Rc(d),u_gradient_image:new Rc(d),u_image_height:new ms(d),u_texsize:new Qc(d),u_tile_units_to_pixels:new ms(d),u_alpha_discard_threshold:new ms(d),u_trim_offset:new Qc(d),u_trim_fade_range:new Qc(d),u_trim_color:new up(d),u_emissive_strength:new ms(d),u_zbias_factor:new ms(d),u_tile_to_meter:new ms(d)}),n.cV=d=>({u_matrix:new ed(d),u_texsize:new Qc(d),u_pixels_to_tile_units:new Jm(d),u_device_pixel_ratio:new ms(d),u_width_scale:new ms(d),u_floor_width_scale:new ms(d),u_image:new Rc(d),u_units_to_pixels:new Qc(d),u_tile_units_to_pixels:new ms(d),u_alpha_discard_threshold:new ms(d),u_trim_offset:new Qc(d),u_trim_fade_range:new Qc(d),u_trim_color:new up(d),u_emissive_strength:new ms(d),u_zbias_factor:new ms(d),u_tile_to_meter:new ms(d)}),n.cW=ru,n.cX=se,n.cY=xa,n.cZ=pp,n.c_=(d,i,u,f,y,m)=>{const _=d.transform,b=_.projection.name==="globe";let N;if(m.paint.get("circle-pitch-alignment")==="map")if(b){const S=qo(_.zoom,i.canonical)*_._pixelsPerMercatorPixel;N=Float32Array.from([S,0,0,S])}else N=_.calculatePixelsToTileUnitsMatrix(u);else N=new Float32Array([_.pixelsToGLUnits[0],0,0,_.pixelsToGLUnits[1]]);const D={u_camera_to_center_distance:d.transform.getCameraToCenterDistance(_.projection),u_matrix:d.translatePosMatrix(i.projMatrix,u,m.paint.get("circle-translate"),m.paint.get("circle-translate-anchor")),u_device_pixel_ratio:Ht.devicePixelRatio,u_extrude_scale:N,u_inv_rot_matrix:Fl,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:m.paint.get("circle-emissive-strength")};if(b){D.u_inv_rot_matrix=f,D.u_merc_center=y,D.u_tile_id=[i.canonical.x,i.canonical.y,1<<i.canonical.z],D.u_zoom_transition=Ll(_.zoom);const S=y[0]*Va,V=y[1]*Va;D.u_up_dir=_.projection.upVector(new da(0,0,0),S,V)}return D},n.ca=fp,n.cb=up,n.cc=function(d,i,u){const f=Math.sqrt(d*d+i*i+u*u),y=f>0?Math.acos(u/f)*or:0;let m=d!==0||i!==0?Math.atan2(-i,-d)*or+90:0;return m<0&&(m+=360),[f,m,y]},n.cd=g,n.ce=tr,n.cf=Bi,n.cg=function(d){return[Math.pow(d[0],1/2.2),Math.pow(d[1],1/2.2),Math.pow(d[2],1/2.2)]},n.ch=function(d,i){return d.readFields(Lee,{icons:[]},i)},n.ci=function(d){return d({pluginStatus:kn,pluginURL:_n}),Bn.on("pluginStateChange",d),d},n.cj=$S,n.ck=c_,n.cl=kP,n.cm=sc,n.cn=ds,n.co=Ma,n.cp=oo,n.cq=Mn,n.cr=function(d){const i=d.indexOf(ep);return i>=0?d.slice(0,i):d},n.cs=function(d){return d.indexOf(ep)>=0},n.ct=function(d){const i=d.indexOf(ep);return i>=0?d.slice(i+1):""},n.cu=function(d){const i=[],u=d.id;return u===void 0&&i.push({message:`layers.${u}: missing required property "id"`}),d.render===void 0&&i.push({message:`layers.${u}: missing required method "render"`}),d.renderingMode&&d.renderingMode!=="2d"&&d.renderingMode!=="3d"&&i.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),i},n.cv=function(d,i,u,f){return d.type==="custom"?new Tee(d,i):new Dee[d.type](d,i,u,f)},n.cw=qn,n.cx=class extends w_{constructor(d,i){super(d._vectorTileFeature,d._z,d._x,d._y,d.id),d.state&&(this.state=Object.assign({},d.state)),this.target=i.target,this.namespace=i.namespace,i.properties&&(this.properties=i.properties),this.target&&("featuresetId"in this.target&&!this.target.importId||"layerId"in this.target)&&(this.source=d.source,this.sourceLayer=d.sourceLayer,this.layer=d.layer)}toJSON(){const d=super.toJSON();return d.target=this.target,d.namespace=this.namespace,d}},n.cy=Bn,n.cz=Wo,n.d=function(d){return xe.API_TILEJSON_REGEX.test(d)},n.d$=t6,n.d0=Ts,n.d1=(d,i,u,f,y,m,_,b)=>{const N=d.transform,D=N.pitch<15?H1(.07,.7,ka((14-N.zoom)/5,0,1)):.07,S=u.paint.get("line-trim-color-use-theme").constantOr("default")==="none";return{u_matrix:$1(d,i,u,f),u_texsize:i.imageAtlasTexture?i.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:N.calculatePixelsToTileUnitsMatrix(i),u_device_pixel_ratio:y,u_width_scale:m,u_floor_width_scale:_,u_image:0,u_tile_units_to_pixels:EA(i,N),u_units_to_pixels:[1/N.pixelsToGLUnits[0],1/N.pixelsToGLUnits[1]],u_alpha_discard_threshold:0,u_trim_offset:b,u_trim_fade_range:u.paint.get("line-trim-fade-range"),u_trim_color:u.paint.get("line-trim-color").toRenderColor(S?null:u.lut).toArray01(),u_emissive_strength:u.paint.get("line-emissive-strength"),u_zbias_factor:D,u_tile_to_meter:g(i.tileID.canonical,0)}},n.d2=(d,i,u,f,y,m,_,b,N)=>{const D=d.transform,S=D.calculatePixelsToTileUnitsMatrix(i),V=u.paint.get("line-trim-color-use-theme").constantOr("default")==="none",I=D.pitch<15?H1(.07,.7,ka((14-D.zoom)/5,0,1)):.07;return{u_matrix:$1(d,i,u,f),u_pixels_to_tile_units:S,u_device_pixel_ratio:m,u_width_scale:_,u_floor_width_scale:b,u_units_to_pixels:[1/D.pixelsToGLUnits[0],1/D.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:y,u_texsize:NA(u)&&i.lineAtlasTexture?i.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:EA(i,d.transform),u_alpha_discard_threshold:0,u_trim_offset:N,u_trim_fade_range:u.paint.get("line-trim-fade-range"),u_trim_color:u.paint.get("line-trim-color").toRenderColor(V?null:u.lut).toArray01(),u_emissive_strength:u.paint.get("line-emissive-strength"),u_zbias_factor:I,u_tile_to_meter:g(i.tileID.canonical,0)}},n.d3=ca,n.d4=$y,n.d5=qy,n.d6=L1,n.d7=La,n.d8=a_,n.d9=yp,n.dA=ry,n.dB=cr,n.dC=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},n.dD=Pr,n.dE=Zo,n.dF=Sc,n.dG=function([d,i,u]){const f=Math.hypot(d,i,u),y=Math.atan2(d,u),m=.5*Math.PI-Math.acos(-i/f);return new Ln(za(y),za(m))},n.dH=eE,n.dI=function(d){const i=d.navigator?d.navigator.userAgent:null;return!!function(u){if(Ni==null){const f=u.navigator?u.navigator.userAgent:null;Ni=!!u.safari||!(!f||!(/\b(iPad|iPhone|iPod)\b/.test(f)||f.match("Safari")&&!f.match("Chrome")))}return Ni}(d)&&i&&(i.match("Version/15.4")||i.match("Version/15.5")||i.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},n.dJ=function(d,i){_r=d,Nr=i},n.dK=vl,n.dL=Ju,n.dM=function(d){const i=[0,0,0],u=Ae.mat4.identity(new Float64Array(16));return Ae.mat4.multiply(u,d.pixelMatrix,d.globeMatrix),Ae.vec3.transformMat4(i,i,u),new It(i[0],i[1])},n.dN=function(d,i,u=!1){if(kn===xi||kn===Hn||kn===ri)throw new Error("setRTLTextPlugin cannot be called multiple times.");_n=Ht.resolveURL(d),kn=xi,$i=i,Fi(),u||wi()},n.dO=po,n.dP=function(){$S().acquire(sE)},n.dQ=function(){const d=sw;d&&(d.isPreloaded()&&d.numActive()===1?(d.release(sE),sw=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},n.dR=IA,n.dS=function(d){const i=Jn();if(!i)return;const u=i.delete(Ba);d&&u.catch(d).then(()=>d())},n.dT=iw,n.dU=qF,n.dV=function(d){mE=Ht.resolveURL(d),v_||(v_=new m_($S(),new $l)),v_.broadcast("setDracoUrl",mE)},n.dW=HF,n.dX=function(d){__=Ht.resolveURL(d),v_||(v_=new m_($S(),new $l)),v_.broadcast("setMeshoptUrl",__)},n.dY=Pt,n.dZ=im,n.d_=Ap,n.da=450,n.db=7,n.dc=Ree,n.dd=xn,n.de=Ym,n.df=256,n.dg=os,n.dh=So,n.di=$s,n.dj=zu,n.dk=function(d,i,u,f,y){return ka((d-i)/(u-i)*(y-f)+f,f,y)},n.dl=Gh,n.dm=Wh,n.dn=class{constructor(d,i,u,f){this.context=d,this.format=f,this.size=u,this.texture=d.gl.createTexture();const[y,m,_]=this.size,{gl:b}=d;b.bindTexture(b.TEXTURE_3D,this.texture),d.pixelStoreUnpackFlipY.set(!1),d.pixelStoreUnpack.set(1),d.pixelStoreUnpackPremultiplyAlpha.set(!1),b.texImage3D(b.TEXTURE_3D,0,this.format,y,m,_,0,YP(this.format),XP(this.format),i.data)}bind(d,i){const{context:u}=this,{gl:f}=u;f.bindTexture(f.TEXTURE_3D,this.texture),d!==this.minFilter&&(f.texParameteri(f.TEXTURE_3D,f.TEXTURE_MAG_FILTER,d),f.texParameteri(f.TEXTURE_3D,f.TEXTURE_MIN_FILTER,d),this.minFilter=d),i!==this.wrapS&&(f.texParameteri(f.TEXTURE_3D,f.TEXTURE_WRAP_S,i),f.texParameteri(f.TEXTURE_3D,f.TEXTURE_WRAP_T,i),this.wrapS=i)}destroy(){const{gl:d}=this.context;d.deleteTexture(this.texture),this.texture=null}},n.dp=tE,n.dq=[1,1,1],n.dr=p_,n.ds=f_,n.dt=Bd,n.du=Hh,n.dv=ol,n.dw=ip,n.dx=_h,n.dy=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[],this._globalClipBounds={min:new It(1/0,1/0),max:new It(-1/0,-1/0)}}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(d,i=!1){const u=uS(new It(0,0),new It(Va,Va),d),f=[];if(i&&!lm(u,this._globalClipBounds))return f;for(const y of this._activeRegions){if(y.hiddenByOverlap||!lm(u,y))continue;const m=OP(y.min,y.max,d);f.push({min:m.min,max:m.max,sourceId:this._sourceIds[y.priority],footprint:y.footprint,footprintTileId:y.tileId,order:y.order,clipMask:y.clipMask,clipScope:y.clipScope})}return f}setSources(d){this._setSources(d.map(i=>({getSourceId:()=>i.cache.id,getFootprints:()=>{const u=[];for(const f of i.cache.getVisibleCoordinates()){const y=i.cache.getTile(f).buckets[i.layer];y&&y.updateFootprints(f.toUnwrapped(),u)}return u},getOrder:()=>i.order,getClipMask:()=>i.clipMask,getClipScope:()=>i.clipScope})))}_addSource(d){const i=d.getFootprints();if(i.length===0)return;const u=d.getOrder(),f=d.getClipMask(),y=d.getClipScope();for(const m of i){if(!m.footprint)continue;const _=uS(m.footprint.min,m.footprint.max,m.id);this._activeRegions.push({min:_.min,max:_.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:m.id,footprint:m.footprint,order:u,clipMask:f,clipScope:y})}this._sourceIds.push(d.getSourceId())}_computeReplacement(){this._activeRegions.sort((i,u)=>i.priority-u.priority||e_(i.min,u.min)||e_(i.max,u.max)||i.order-u.order||i.clipMask-u.clipMask||function(f,y){const m=(_,b)=>_+b;return f.length-y.length||f.reduce(m,"").localeCompare(y.reduce(m,""))}(i.clipScope,u.clipScope));let d=this._activeRegions.length!==this._prevRegions.length;if(!d){let i=0;for(;!d&&i!==this._activeRegions.length;){const u=this._activeRegions[i],f=this._prevRegions[i];d=u.priority!==f.priority||!lS(u,f)||u.order!==f.order||u.clipMask!==f.clipMask||!ta(u.clipScope,f.clipScope),++i}}if(d){++this._updateTime;for(const u of this._activeRegions)u.order!==ry&&(this._globalClipBounds.min.x=Math.min(this._globalClipBounds.min.x,u.min.x),this._globalClipBounds.min.y=Math.min(this._globalClipBounds.min.y,u.min.y),this._globalClipBounds.max.x=Math.max(this._globalClipBounds.max.x,u.max.x),this._globalClipBounds.max.y=Math.max(this._globalClipBounds.max.y,u.max.y));const i=u=>{const f=this._activeRegions;if(u>=f.length)return u;const y=f[u].priority;for(;u<f.length&&f[u].priority===y;)++u;return u};if(this._sourceIds.length>1){let u=0,f=i(u);for(;u!==f;){let y=u;const m=u;for(;y!==f;){const _=this._activeRegions[y];_.hiddenByOverlap=!1;for(let b=0;b<m;b++){const N=this._activeRegions[b];if(!N.hiddenByOverlap&&_.order===ry&&lm(_,N)&&(_.hiddenByOverlap=dS(_.footprint,_.tileId,N.footprint,N.tileId),_.hiddenByOverlap))break}++y}u=f,f=i(u)}}}}_setSources(d){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let i=d.length-1;i>=0;i--)this._addSource(d[i]);this._computeReplacement()}},n.dz=class{constructor(d){this._createGrid(d),this._createPoles(d)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const d of this._poleSegments)d.destroy();for(const d of this._gridSegments)d.withSkirts.destroy(),d.withoutSkirts.destroy()}_fillGridMeshWithLods(d,i){const u=new Eu,f=new Ps,y=[],m=d+1+2,_=i[0]+1,b=i[0]+1+(1+i.length),N=(D,S,V)=>{let I=D===m-1?D-2:D===0?D:D-1;return I+=V?24575:0,[I,S]};for(let D=0;D<m;++D)u.emplaceBack(...N(D,0,!0));for(let D=0;D<_;++D)for(let S=0;S<m;++S)u.emplaceBack(...N(S,D,(S===0||S===m-1)&&!0));for(let D=0;D<i.length;++D){const S=i[D];for(let V=0;V<m;++V)u.emplaceBack(...N(V,S,!0))}for(let D=0;D<i.length;++D){const S=f.length,V=i[D]+1+2,I=new Ps;for(let B=0;B<V-1;B++){const X=B===V-2,ee=X?m*(b-i.length+D-B):m;for(let ue=0;ue<m-1;ue++){const le=B*m+ue;B===0||X||ue===0||ue===m-2?(I.emplaceBack(le+1,le,le+ee),I.emplaceBack(le+ee,le+ee+1,le+1)):(f.emplaceBack(le+1,le,le+ee),f.emplaceBack(le+ee,le+ee+1,le+1))}}const O=Di.simpleSegment(0,S,u.length,f.length-S);for(let B=0;B<I.uint16.length;B+=3)f.emplaceBack(I.uint16[B],I.uint16[B+1],I.uint16[B+2]);const M=Di.simpleSegment(0,S,u.length,f.length-S);y.push({withoutSkirts:O,withSkirts:M})}return{vertices:u,indices:f,segments:y}}_createGrid(d){const i=this._fillGridMeshWithLods(dp,Vf);this._gridSegments=i.segments,this._gridBuffer=d.createVertexBuffer(i.vertices,mr.members),this._gridIndexBuffer=d.createIndexBuffer(i.indices,!0)}_createPoles(d){const i=new Ps;for(let _=0;_<=dp;_++)i.emplaceBack(0,_+1,_+2);this._poleIndexBuffer=d.createIndexBuffer(i,!0);const u=new $s,f=new $s,y=new $s,m=new $s;this._poleSegments=[];for(let _=0,b=0;_<Th;_++){const N=360/(1<<_);u.emplaceBack(0,-Al,0,.5,0),f.emplaceBack(0,-Al,0,.5,1),y.emplaceBack(0,-Al,0,.5,.5),m.emplaceBack(0,-Al,0,.5,.5);for(let D=0;D<=dp;D++){let S=D/dp,V=0;const I=fr(0,N,S),[O,M,B]=hp(go,Sh,I,Al);u.emplaceBack(O,M,B,S,V),f.emplaceBack(O,M,B,S,1-V);const X=Na(I);S=.5+.5*Math.sin(X),V=.5+.5*Math.cos(X),y.emplaceBack(O,M,B,S,V),m.emplaceBack(O,M,B,S,1-V)}this._poleSegments.push(Di.simpleSegment(b,0,66,64)),b+=66}this._poleNorthVertexBuffer=d.createVertexBuffer(u,sr,!1),this._poleSouthVertexBuffer=d.createVertexBuffer(f,sr,!1),this._texturedPoleNorthVertexBuffer=d.createVertexBuffer(y,sr,!1),this._texturedPoleSouthVertexBuffer=d.createVertexBuffer(m,sr,!1)}getGridBuffers(d,i){return[this._gridBuffer,this._gridIndexBuffer,i?this._gridSegments[d].withSkirts:this._gridSegments[d].withoutSkirts]}getPoleBuffers(d,i){return[i?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,i?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[d]]}},n.e=xe,n.e0=a6,n.e1=gp,n.e2=Of,n.e3="hd_road_elevation",n.e4=class{static parseFrom(d,i){const u=Df.parse(d);if(!u)return[];let{vertices:f,features:y}=u;const m=1/g(i);y.sort((D,S)=>D.id-S.id),f.sort((D,S)=>D.id-S.id||D.idx-S.idx),f=f.filter((D,S,V)=>S===V.findIndex(I=>I.id===D.id&&I.idx===D.idx));const _=new Array;let b=0;const N=f.length;for(const D of y){if(D.constantHeight){_.push(new Qy(D.id,D.bounds,D.constantHeight));continue}for(;b!==N&&f[b].id<D.id;)b++;if(b===N||f[b].id!==D.id)continue;const S=new Array,V=new Array,I=b;for(;b!==N&&f[b].id===D.id;){const O=f[b];if(S.push({position:O.position,height:O.height,extent:O.extent}),b!==I&&f[b-1].idx===O.idx-1){const M=b-I;V.push({a:M-1,b:M})}b++}_.push(new Qy(D.id,D.bounds,void 0,S,V,m))}return _}},n.e5=gr,n.e6=Co,n.e7=pL,n.e8=u_,n.e9=function(d,i,u,f,y,m,_,b=1,N){d.createArrays(),d.tilePixelRatio=Va/(512*d.overscaling),d.compareText={},d.iconsNeedLinear=!1;const D=d.layers[0].layout,S=d.layers[0]._unevaluatedLayout._values,V={};V.scaleFactor=b,V.textSizeScaleRange=D.get("text-size-scale-range"),V.iconSizeScaleRange=D.get("icon-size-scale-range");const[I,O]=V.textSizeScaleRange,[M,B]=V.iconSizeScaleRange;V.textScaleFactor=ka(V.scaleFactor,I,O),V.iconScaleFactor=ka(V.scaleFactor,M,B);const X=S["text-size"],ee=S["icon-size"];if(d.textSizeData.kind==="composite"){const{minZoom:Pe,maxZoom:Ye}=d.textSizeData;V.compositeTextSizes=[X.possiblyEvaluate(new vn(Pe),m),X.possiblyEvaluate(new vn(Ye),m)]}if(d.iconSizeData.kind==="composite"){const{minZoom:Pe,maxZoom:Ye}=d.iconSizeData;V.compositeIconSizes=[ee.possiblyEvaluate(new vn(Pe),m),ee.possiblyEvaluate(new vn(Ye),m)]}V.layoutTextSize=X.possiblyEvaluate(new vn(_+1),m),V.layoutIconSize=ee.possiblyEvaluate(new vn(_+1),m),V.textMaxSize=X.possiblyEvaluate(new vn(18),m);const ue=D.get("symbol-placement"),le=D.get("text-rotation-alignment")==="map"&&ue!=="point",ne=D.get("text-size");let pe=!1;const we=[];for(const Pe of d.features){const Ye=D.get("text-font").evaluate(Pe,{},m).join(","),je=ne.evaluate(Pe,{},m)*V.textScaleFactor,qe=V.layoutTextSize.evaluate(Pe,{},m)*V.textScaleFactor,mt=V.layoutIconSize.evaluate(Pe,{},m)*V.iconScaleFactor,Xe={horizontal:{},vertical:void 0},At=Pe.text;let xt,St=[0,0];if(At){const va=At.toString(),Ar=D.get("text-letter-spacing").evaluate(Pe,{},m)*Fe,$a=D.get("text-line-height").evaluate(Pe,{},m)*Fe,lr=Ga(va)?Ar:0,Dr=D.get("text-anchor").evaluate(Pe,{},m),Jr=D.get("text-variable-anchor");if(!Jr){const Kn=D.get("text-radial-offset").evaluate(Pe,{},m);St=Kn?wL(Dr,[Kn*Fe,BP]):D.get("text-offset").evaluate(Pe,{},m).map(Ei=>Ei*Fe)}let kr=le?"center":D.get("text-justify").evaluate(Pe,{},m);const dn=ue==="point",Xr=dn?D.get("text-max-width").evaluate(Pe,{},m)*Fe:1/0,wn=Kn=>{d.allowVerticalPlacement&&aa(va)&&(Xe.vertical=FP(At,i,u,y,Ye,Xr,$a,Dr,Kn,lr,St,Kd.vertical,!0,qe,je,N))};if(!le&&Jr){const Kn=kr==="auto"?Jr.map(Lr=>GP(Lr)):[kr];let Ei=!1;for(let Lr=0;Lr<Kn.length;Lr++){const En=Kn[Lr];if(!Xe.horizontal[En])if(Ei)Xe.horizontal[En]=Xe.horizontal[0];else{const Yi=FP(At,i,u,y,Ye,Xr,$a,"center",En,lr,St,Kd.horizontal,!1,qe,je,N);Yi&&(Xe.horizontal[En]=Yi,Ei=Yi.positionedLines.length===1)}}wn("left")}else{if(kr==="auto"&&(kr=GP(Dr)),dn||D.get("text-writing-mode").indexOf("horizontal")>=0||!aa(va)){const Kn=FP(At,i,u,y,Ye,Xr,$a,Dr,kr,lr,St,Kd.horizontal,!1,qe,je,N);Kn&&(Xe.horizontal[kr]=Kn)}wn(dn?"left":kr)}}let Ot,Nt,kt,Mt,Zt,ga=!1;if(Pe.icon&&Pe.icon.hasPrimary()){const va=TL(Pe.icon,d.iconSizeData,S["icon-size"],m,d.zoom,Pe,N,V.iconScaleFactor);Ot=va.iconPrimary,Nt=va.iconSecondary;const Ar=Ot.toString(),$a=f.get(Ar);$a&&(kt=D.get("icon-offset").evaluate(Pe,{},m),Mt=D.get("icon-anchor").evaluate(Pe,{},m),Zt=D.get("icon-text-fit").evaluate(Pe,{},m),xt=eee(y.get(Ar),Nt?y.get(Nt.toString()):void 0,kt,Mt),ga=$a.sdf,d.sdfIcons===void 0?d.sdfIcons=$a.sdf:d.sdfIcons!==$a.sdf&&en("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),($a.pixelRatio!==d.pixelRatio||D.get("icon-rotate").constantOr(1)!==0)&&(d.iconsNeedLinear=!0))}pe=pe||!(!Pe.icon||!Pe.icon.hasSecondary());const ma=jP(Xe.horizontal)||Xe.vertical;d.iconsInText||(d.iconsInText=!!ma&&ma.iconsInText);const Ya=qe*V.textScaleFactor/Fe,{defaultShapedIcon:Pa,verticallyShapedIcon:Oa}=lee(d,xt,D,Pe,m,Xe,Ya,kt,Zt);xt=Pa,we.push({feature:Pe,shapedTextOrientations:Xe,shapedText:ma,shapedIcon:xt,iconPrimary:Ot,iconSecondary:Nt,iconOffset:kt,iconAnchor:Mt,verticallyShapedIcon:Oa,layoutTextSize:qe,layoutIconSize:mt,textOffset:St,isSDFIcon:ga,iconTextFit:Zt})}return{featureData:we,sizes:V,hasAnySecondaryIcon:pe,textAlongLine:le,symbolPlacement:ue}},n.ea=mL,n.eb=function(d,i,u,f,y,m,_,b,N,D){const{featureData:S,hasAnySecondaryIcon:V,sizes:I,textAlongLine:O,symbolPlacement:M}=i;for(const B of S){const{shapedIcon:X,verticallyShapedIcon:ee,feature:ue,shapedTextOrientations:le,shapedText:ne,layoutTextSize:pe,textOffset:we,isSDFIcon:Pe,iconPrimary:Ye,iconSecondary:je,iconTextFit:qe,iconOffset:mt}=B;SL(X,D.iconPositions,Ye,je),SL(ee,D.iconPositions,Ye,je),oee(le,D.iconPositions),(ne||X)&&uee(d,ue,le,X,ee,N,I,pe,0,we,Pe,f,y,_,b,V,qe,mt,O,M)}u&&d.generateCollisionDebugBuffers(m,d.collisionBoxArray,I.textScaleFactor)},n.ec=bh,n.ed=eC,n.ee=Aa,n.ef=Y0,n.eg=yi,n.eh=w,n.ei=function(d){let i=0;if(new Uint32Array(d,0,1)[0]!==KF){const u=new Uint32Array(d,0,7),[,,f,y,m,_]=u;i=u.byteLength+y+m+_+m,(f!==d.byteLength||i>=d.byteLength)&&en("Invalid b3dm header information.")}return JF(d,i)},n.ej=function(d,i){const u=e6(d);for(const f of u){for(const y of f.meshes)Lte(y);f.lights&&(f.lightMeshIndex=f.meshes.length,f.meshes.push(Fte(f.lights,i)))}return u},n.ek=HS,n.el=fF,n.em=ss,n.en=function(d){qr(),Gr!=null&&Gr.then(i=>{i.keys().then(u=>{for(let f=0;f<u.length-d;f++)i.delete(u[f])})})},n.f=function(d){return d.indexOf("mapbox:")===0},n.g=function(d,i){return Wo(Rn(d,{method:"GET"}),i)},n.h=Oe,n.i=function(d){return xe.API_STYLE_REGEX.test(d)&&!rt(d)},n.j=function(d){return decodeURIComponent(atob(d).split("").map(i=>"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)).join(""))},n.k=function(d){return btoa(encodeURIComponent(d).replace(/%([0-9A-F]{2})/g,(i,u)=>String.fromCharCode(+("0x"+u))))},n.l=Rn,n.m=Hr,n.n=function(d,i){return Wo(Rn(d,{type:"json"}),i)},n.o=ih,n.p=function(d,i){return Wo(Rn(d,{method:"POST"}),i)},n.q=Ht,n.r=wl,n.s=function(d){try{const i=self[d];return i.setItem("_mapbox_test_",1),i.removeItem("_mapbox_test_"),!0}catch{return!1}},n.t=Kt,n.u=function(){return function d(i){return i?(i^Math.random()*(16>>i/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,d)}()},n.v=function(d){return!!d&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(d)},n.w=en,n.x=function(){return oE||(oE=new IA),oE},n.y=dE,n.z=Rd}),l(["./shared"],function(n){function w(Jt){const xe=Jt?Jt.url.toString():void 0;return xe?performance.getEntriesByName(xe):[]}function T(Jt){if(typeof Jt=="number"||typeof Jt=="boolean"||typeof Jt=="string"||Jt==null)return JSON.stringify(Jt);if(Array.isArray(Jt)){let Oe="[";for(const rt of Jt)Oe+=`${T(rt)},`;return`${Oe}]`}let xe="{";for(const Oe of Object.keys(Jt).sort())xe+=`${Oe}:${T(Jt[Oe])},`;return`${xe}}`}function P(Jt){let xe="";for(const Oe of n.bm)(Jt.type!=="model"||Oe!=="minzoom"&&Oe!=="maxzoom")&&(xe+=`/${T(Jt[Oe])}`);return xe}class z{constructor(xe){this.keyCache={},this._layers={},this._layerConfigs={},xe&&this.replace(xe)}replace(xe,Oe){this._layerConfigs={},this._layers={},this.update(xe,[],Oe)}update(xe,Oe,rt){this._options=rt;for(const yt of xe)this._layerConfigs[yt.id]=yt,(this._layers[yt.id]=n.cv(yt,this.scope,null,this._options)).compileFilter(rt),this.keyCache[yt.id]&&delete this.keyCache[yt.id];for(const yt of Oe)delete this.keyCache[yt],delete this._layerConfigs[yt],delete this._layers[yt];this.familiesBySource={};const _t=function(yt,bt){const Bt={};for(let $t=0;$t<yt.length;$t++){const Kt=yt[$t];let Ht=bt&&bt[Kt.id];!Ht&&(Ht=P(Kt),Kt.type==="line"&&Kt.paint)&&function Ma(Ba){return typeof Ba=="string"&&Ba==="line-progress"||(Array.isArray(Ba)?Ba.some(Ma):!(!Ba||typeof Ba!="object")&&Object.values(Ba).some(Ma))}(Kt.paint["line-width"])&&(Ht+=`/${T(Kt.paint["line-width"])}`),bt&&(bt[Kt.id]=Ht);let Ta=Bt[Ht];Ta||(Ta=Bt[Ht]=[]),Ta.push(Kt)}const Et=[];for(const $t in Bt)Et.push(Bt[$t]);return Et}(Object.values(this._layerConfigs),this.keyCache);for(const yt of _t){const bt=yt.map(Ta=>this._layers[Ta.id]),Bt=bt[0];if(Bt.visibility==="none")continue;const Et=Bt.source||"";let $t=this.familiesBySource[Et];$t||($t=this.familiesBySource[Et]={});const Kt=Bt.sourceLayer||"_geojsonTileLayer";let Ht=$t[Kt];Ht||(Ht=$t[Kt]=[]),Ht.push(bt)}}}const k=1*n.d_;class U{constructor(xe){const Oe={},rt=[];for(const Bt in xe){const Et=xe[Bt],$t=Oe[Bt]={};for(const Kt in Et.glyphs){const Ht=Et.glyphs[+Kt];if(!Ht||Ht.bitmap.width===0||Ht.bitmap.height===0)continue;const Ta=Ht.metrics.localGlyph?k:1,Ma={x:0,y:0,w:Ht.bitmap.width+2*Ta,h:Ht.bitmap.height+2*Ta};rt.push(Ma),$t[Kt]=Ma}}const{w:_t,h:yt}=n.H(rt),bt=new n.dZ({width:_t||1,height:yt||1});for(const Bt in xe){const Et=xe[Bt];for(const $t in Et.glyphs){const Kt=Et.glyphs[+$t];if(!Kt||Kt.bitmap.width===0||Kt.bitmap.height===0)continue;const Ht=Oe[Bt][$t],Ta=Kt.metrics.localGlyph?k:1;n.dZ.copy(Kt.bitmap,bt,{x:0,y:0},{x:Ht.x+Ta,y:Ht.y+Ta},Kt.bitmap)}}this.image=bt,this.positions=Oe}}n.dY(U,"GlyphAtlas");class Z{constructor(xe){this.tileID=new n.aH(xe.tileID.overscaledZ,xe.tileID.wrap,xe.tileID.canonical.z,xe.tileID.canonical.x,xe.tileID.canonical.y),this.tileZoom=xe.tileZoom,this.uid=xe.uid,this.zoom=xe.zoom,this.lut=xe.lut,this.canonical=xe.tileID.canonical,this.pixelRatio=xe.pixelRatio,this.tileSize=xe.tileSize,this.source=xe.source,this.scope=xe.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=xe.showCollisionBoxes,this.collectResourceTiming=!!xe.request&&xe.request.collectResourceTiming,this.promoteId=xe.promoteId,this.isSymbolTile=xe.isSymbolTile,this.tileTransform=n.aR(xe.tileID.canonical,xe.projection),this.projection=xe.projection,this.worldview=xe.worldview,this.localizableLayerIds=xe.localizableLayerIds,this.brightness=xe.brightness,this.extraShadowCaster=!!xe.extraShadowCaster,this.tessellationStep=xe.tessellationStep,this.scaleFactor=xe.scaleFactor}parse(xe,Oe,rt,_t,yt){this.status="parsing",this.data=xe,this.collisionBoxArray=new n.aX;const bt=new n.d$(Object.keys(xe.layers).sort()),Bt=new n.e0(this.tileID,this.promoteId);Bt.bucketLayerIDs=[];const Et={},$t=new n.e1(256,256),Kt={featureIndex:Bt,iconDependencies:new Map,patternDependencies:new Map,glyphDependencies:{},lineAtlas:$t,availableImages:rt,brightness:this.brightness,scaleFactor:this.scaleFactor,elevationFeatures:void 0},Ht=Oe.familiesBySource[this.source];for(const qr in Ht){const yn=xe.layers[qr];if(!yn)continue;let Hr=!1,In=!1,Vi=!1;for(const Do of Ht[qr])Do[0].type==="symbol"?Hr=!0:In=!0,Do[0].is3D()&&Do[0].type!=="model"&&(Vi=!0);if(this.extraShadowCaster&&!Vi||this.isSymbolTile===!0&&!Hr||this.isSymbolTile===!1&&!In)continue;yn.version===1&&n.w(`Vector tile source "${this.source}" layer "${qr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Gi=bt.encode(qr),_s=[];let vs=!1;for(let Do=0,ws=0;Do<yn.length;Do++){const ks=yn.feature(Do),sc=Bt.getId(ks,qr);if(this.localizableLayerIds&&this.localizableLayerIds.has(qr)){const Wo=ks.properties?ks.properties.worldview:null;if(this.worldview&&typeof Wo=="string")if(Wo==="all")ks.properties.$localized=!0;else{if(!Wo.split(",").includes(this.worldview))continue;ks.properties.$localized=!0,ks.properties.worldview=this.worldview}}!vs&&ks.properties&&ks.properties.hasOwnProperty(n.e2)&&(vs=!0),_s.push({feature:ks,id:sc,index:ws,sourceLayerIndex:Gi}),ws++}vs&&!Kt.elevationFeatures&&xe.layers.hasOwnProperty(n.e3)&&(Kt.elevationFeatures=n.e4.parseFrom(xe.layers[n.e3],this.canonical));for(const Do of Ht[qr]){const ws=Do[0];(!this.extraShadowCaster||ws.is3D()&&ws.type!=="model")&&(this.isSymbolTile!==void 0&&ws.type==="symbol"!==this.isSymbolTile||ws.minzoom&&this.zoom<Math.floor(ws.minzoom)||ws.maxzoom&&this.zoom>=ws.maxzoom||ws.visibility!=="none"&&(H(Do,this.zoom,Kt.brightness,rt),(Et[ws.id]=ws.createBucket({index:Bt.bucketLayerIDs.length,layers:Do,zoom:this.zoom,lut:this.lut,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Gi,sourceID:this.source,projection:this.projection.spec,tessellationStep:this.tessellationStep})).populate(_s,Kt,this.tileID.canonical,this.tileTransform),Bt.bucketLayerIDs.push(Do.map(ks=>n.C(ks.id,ks.scope)))))}}let Ta,Ma,Ba,_r,Nr,Vr;$t.trim();const Gr={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},zn=()=>{if(Ta)return this.status="done",yt(Ta);if(this.extraShadowCaster)this.status="done",yt(null,{buckets:Object.values(Et).filter(qr=>!qr.isEmpty()),featureIndex:Bt,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:Kt.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(Ma&&Ba&&_r){const qr=new U(Ma),yn=new Map;for(const[Vi,Gi]of Ba.entries()){const{imagePosition:_s}=n.e7(Vi,Gi,n.e8);yn.set(Vi,_s)}const Hr={};for(const Vi in Et){const Gi=Et[Vi];Gi instanceof n.aY&&(H(Gi.layers,this.zoom,Kt.brightness,rt),Hr[Vi]=n.e9(Gi,Ma,qr.positions,Ba,yn,this.tileID.canonical,this.tileZoom,this.scaleFactor,this.pixelRatio))}const In={iconsPending:!0,patternsPending:!0};this.rasterizeIfNeeded(_t,Ba,Nr,()=>{In.iconsPending=!1,Jn(Hr,qr,In)}),this.rasterizeIfNeeded(_t,_r,Vr,()=>{In.patternsPending=!1,Jn(Hr,qr,In)})}},Jn=(qr,yn,Hr,In)=>{if(Hr.iconsPending||Hr.patternsPending)return;const Vi=new n.ea(Ba,_r,this.lut);for(const Gi in Et){const _s=Et[Gi];if(Gi in qr)n.eb(_s,qr[Gi],this.showCollisionBoxes,rt,this.tileID.canonical,this.tileZoom,this.projection,this.brightness,Ba,Vi);else if(_s.hasPattern&&(_s instanceof n.b2||_s instanceof n.b3||_s instanceof n.d8)){H(_s.layers,this.zoom,Kt.brightness,rt);const vs=Object.fromEntries(Vi.patternPositions);_s.addFeatures(Kt,this.tileID.canonical,vs,rt,this.tileTransform,this.brightness)}}this.status="done",yt(null,{buckets:Object.values(Et).filter(Gi=>!Gi.isEmpty()),featureIndex:Bt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:yn.image,lineAtlas:$t,imageAtlas:Vi,brightness:Kt.brightness})};if(!this.extraShadowCaster){const qr=n.e5(Kt.glyphDependencies,In=>Object.keys(In).map(Number));Object.keys(qr).length?_t.send("getGlyphs",{uid:this.uid,stacks:qr,scope:this.scope},(In,Vi)=>{Ta||(Ta=In,Ma=Vi,zn())},void 0,!1,Gr):Ma={};const yn=Array.from(Kt.iconDependencies.keys()).map(In=>n.I.parse(In));yn.length?_t.send("getImages",{images:yn,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},(In,Vi)=>{Ta||(Ta=In,Ba=new Map,Nr=this.updateImageMapAndGetImageTaskQueue(Ba,Vi,Kt.iconDependencies),zn())},void 0,!1,Gr):(Ba=new Map,Nr=new Map);const Hr=Array.from(Kt.patternDependencies.keys()).map(In=>n.I.parse(In));Hr.length?_t.send("getImages",{images:Hr,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},(In,Vi)=>{Ta||(Ta=In,_r=new Map,Vr=this.updateImageMapAndGetImageTaskQueue(_r,Vi,Kt.patternDependencies),zn())},void 0,!1,Gr):(_r=new Map,Vr=new Map)}if(Kt.elevationFeatures&&Kt.elevationFeatures.length>0){const qr=[];for(const Hr of Object.values(Et))if(Hr instanceof n.b3){const In=Hr.getUnevaluatedPortalGraph();In&&qr.push(In)}const yn=n.e6.evaluate(qr);for(const Hr of Object.values(Et))Hr instanceof n.b3&&Hr.setEvaluatedPortalGraph(yn)}zn()}rasterizeIfNeeded(xe,Oe,rt,_t){Array.from(Oe.values()).some(yt=>yt.usvg)?this.rasterize(xe,Oe,rt,_t):_t()}updateImageMapAndGetImageTaskQueue(xe,Oe,rt){const _t=new Map;for(const yt of Oe.keys()){const bt=rt.get(yt)||[];for(const Bt of bt){const Et=Bt.toString(),$t=Oe.get(Bt.id.toString());$t.usvg?_t.has(Et)||(_t.set(Et,Bt),xe.set(Et,Object.assign({},$t))):xe.set(Et,$t)}}return _t}rasterize(xe,Oe,rt,_t){this.rasterizeTask=xe.send("rasterizeImages",{scope:this.scope,tasks:rt},(yt,bt)=>{if(!yt)for(const[Bt,Et]of bt.entries()){const $t=Object.assign(Oe.get(Bt),{data:Et});Oe.set(Bt,$t)}_t()})}cancelRasterize(){this.rasterizeTask&&this.rasterizeTask.cancel()}}function H(Jt,xe,Oe,rt){const _t=new n.aa(xe,{brightness:Oe});for(const yt of Jt)yt.recalculate(_t,rt)}class q extends n.E{constructor(xe,Oe,rt,_t,yt,bt){super(),this.actor=xe,this.layerIndex=Oe,this.availableImages=rt,this.loadVectorData=yt||n.aE,this.loading={},this.loaded={},this.deduped=new n.aD(xe.scheduler),this.isSpriteLoaded=_t,this.scheduler=xe.scheduler,this.brightness=bt}loadTile(xe,Oe){const rt=xe.uid,_t=xe&&xe.request,yt=_t&&_t.collectResourceTiming,bt=this.loading[rt]=new Z(xe);bt.abort=this.loadVectorData(xe,(Bt,Et)=>{const $t=!this.loading[rt];if(delete this.loading[rt],bt.cancelRasterize(),$t||Bt||!Et)return bt.status="done",$t||(this.loaded[rt]=bt),Oe(Bt);const Kt=Et.rawData,Ht={};Et.expires&&(Ht.expires=Et.expires),Et.cacheControl&&(Ht.cacheControl=Et.cacheControl),bt.vectorTile=Et.vectorTile||new n.ec.VectorTile(new n.bi(Kt));const Ta=()=>{bt.parse(bt.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ma,Ba)=>{if(Ma||!Ba)return Oe(Ma);const _r={};if(yt){const Nr=w(_t);Nr.length>0&&(_r.resourceTiming=JSON.parse(JSON.stringify(Nr)))}Oe(null,n.l({rawTileData:Kt.slice(0)},Ba,Ht,_r))})};this.isSpriteLoaded?Ta():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(Ta,{type:"parseTile",isSymbolTile:xe.isSymbolTile,zoom:xe.tileZoom}):Ta()}),this.loaded=this.loaded||{},this.loaded[rt]=bt})}reloadTile(xe,Oe){const rt=this.loaded,_t=xe.uid;if(rt&&rt[_t]){const yt=rt[_t];yt.scaleFactor=xe.scaleFactor,yt.showCollisionBoxes=xe.showCollisionBoxes,yt.projection=xe.projection,yt.brightness=xe.brightness,yt.tileTransform=n.aR(xe.tileID.canonical,xe.projection),yt.extraShadowCaster=xe.extraShadowCaster,yt.lut=xe.lut;const bt=(Bt,Et)=>{const $t=yt.reloadCallback;$t&&(delete yt.reloadCallback,yt.parse(yt.vectorTile,this.layerIndex,this.availableImages,this.actor,$t)),Oe(Bt,Et)};yt.status==="parsing"?yt.reloadCallback=bt:yt.status==="done"&&(yt.vectorTile?yt.parse(yt.vectorTile,this.layerIndex,this.availableImages,this.actor,bt):bt())}else Oe(null,void 0)}abortTile(xe,Oe){const rt=xe.uid,_t=this.loading[rt];_t&&(_t.abort&&_t.abort(),delete this.loading[rt]),Oe()}removeTile(xe,Oe){const rt=this.loaded,_t=xe.uid;rt&&rt[_t]&&delete rt[_t],Oe()}}class J{loadTile(xe,Oe){const{uid:rt,encoding:_t,rawImageData:yt,padding:bt}=xe,Bt=ImageBitmap&&yt instanceof ImageBitmap?this.getImageData(yt,bt):yt;Oe(null,new n.ed(rt,Bt,_t,bt<1))}reloadTile(xe,Oe){Oe(null,null)}abortTile(xe,Oe){Oe()}removeTile(xe,Oe){Oe()}getImageData(xe,Oe){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(xe.width,xe.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=xe.width,this.offscreenCanvas.height=xe.height,this.offscreenCanvasContext.drawImage(xe,0,0,xe.width,xe.height);const rt=this.offscreenCanvasContext.getImageData(-Oe,-Oe,xe.width+2*Oe,xe.height+2*Oe);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),rt}}n.bh.setPbf(n.bi);class re{constructor(xe){this._mrt=new n.bh(xe.partial?30:1/0),this._isHeaderLoaded=!1,this.uid=xe.uid,this.tileID=xe.tileID,this.source=xe.source}parse(xe,Oe){const rt=this._mrt;this.status="parsing",this._entireBuffer=xe;try{rt.parseHeader(xe),this._isHeaderLoaded=!0;const _t=[];for(const yt in rt.layers){const bt=rt.getLayer(yt),Bt=bt.getDataRange(bt.getBandList()),Et=rt.createDecodingTask(Bt),$t=xe.slice(Bt.firstByte,Bt.lastByte+1),Kt=n.bh.performDecoding($t,Et).then(Ht=>Et.complete(null,Ht)).catch(Ht=>Et.complete(Ht,null));_t.push(Kt)}Promise.allSettled(_t).then(()=>Oe(null,rt))}catch(_t){Oe(_t)}}}class ce{constructor(xe){this.actor=xe,this.loading={},this.loaded={}}loadTile(xe,Oe){const rt=xe.uid,_t=xe.request,yt=this.loading[rt]=new re(xe),{cancel:bt}=n.bj(_t,(Bt,Et,$t,Kt)=>{const Ht=!this.loading[rt];if(delete this.loading[rt],Ht||Bt||!Et)return yt.status="done",Ht||(this.loaded[rt]=yt),Oe(Bt);yt.parse(Et,(Ta,Ma)=>{if(Ta||!Ma)return Oe(Ta);Oe(null,Ma,$t,Kt)}),this.loaded[rt]=yt});yt.abort=bt}reloadTile(xe,Oe){Oe(null,void 0)}abortTile(xe,Oe){const rt=xe.uid,_t=this.loading[rt];_t&&(_t.abort&&_t.abort(),delete this.loading[rt]),Oe()}removeTile(xe,Oe){const rt=xe.uid;this.loaded[rt]&&delete this.loaded[rt],Oe()}decodeRasterArray({task:xe,buffer:Oe},rt){n.bh.performDecoding(Oe,xe).then(_t=>rt(null,_t)).catch(_t=>rt(_t))}}const ye=n.ec.VectorTileFeature.prototype.toGeoJSON;class he{constructor(xe){this._feature=xe,this.extent=n.ai,this.type=xe.type,this.properties=xe.tags,"id"in xe&&!isNaN(xe.id)&&(this.id=parseInt(xe.id,10))}loadGeometry(){if(this._feature.type===1){const xe=[];for(const Oe of this._feature.geometry)xe.push([new n.P(Oe[0],Oe[1])]);return xe}{const xe=[];for(const Oe of this._feature.geometry){const rt=[];for(const _t of Oe)rt.push(new n.P(_t[0],_t[1]));xe.push(rt)}return xe}}toGeoJSON(xe,Oe,rt){return ye.call(this,xe,Oe,rt)}}class _e{constructor(xe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=n.ai,this.length=xe.length,this._features=xe}feature(xe){return new he(this._features[xe])}}const me=64/4096,Re=128;class be{constructor(){this.features=new Map}clear(){this.features.clear()}load(xe=[],Oe){for(const rt of xe){const _t=rt.id;if(_t==null)continue;let yt=this.features.get(_t);yt&&this.updateCache(yt,Oe),rt.geometry?(yt=ie(rt),this.updateCache(yt,Oe),this.features.set(_t,yt)):this.features.delete(_t),this.updateCache(yt,Oe)}}updateCache(xe,Oe){for(const{canonical:rt,uid:_t}of Object.values(Oe)){const{z:yt,x:bt,y:Bt}=rt;De(xe,Math.pow(2,yt),bt,Bt)&&delete Oe[_t]}}getTile(xe,Oe,rt){const _t=Math.pow(2,xe),yt=[];for(const bt of this.features.values())De(bt,_t,Oe,rt)&&yt.push(Le(bt,_t,Oe,rt));return{features:yt}}getFeatures(){return[...this.features.values()]}}function De({minX:Jt,minY:xe,maxX:Oe,maxY:rt},_t,yt,bt){return Jt<(yt+1+me)/_t&&xe<(bt+1+me)/_t&&Oe>(yt-me)/_t&&rt>(bt-me)/_t}function ie(Jt){const{id:xe,geometry:Oe,properties:rt}=Jt;if(!Oe)return;if(Oe.type==="GeometryCollection")throw new Error("GeometryCollection not supported in dynamic mode.");const{type:_t,coordinates:yt}=Oe,bt={id:xe,type:1,geometry:[],tags:rt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},Bt=bt.geometry;if(_t==="Point")ge(yt,Bt,bt);else if(_t==="MultiPoint")for(const Et of yt)ge(Et,Bt,bt);else if(_t==="LineString")bt.type=2,Me(yt,Bt,bt);else if(_t==="MultiLineString")bt.type=2,ze(yt,Bt,bt);else if(_t==="Polygon")bt.type=3,ze(yt,Bt,bt,!0);else{if(_t!=="MultiPolygon")throw new Error("Input data is not a valid GeoJSON object.");bt.type=3;for(const Et of yt)ze(Et,Bt,bt,!0)}return bt}function ge([Jt,xe],Oe,rt){const _t=n.av(Jt);let yt=n.aC(xe);yt=yt<0?0:yt>1?1:yt,Oe.push(_t,yt),rt.minX=Math.min(rt.minX,_t),rt.minY=Math.min(rt.minY,yt),rt.maxX=Math.max(rt.maxX,_t),rt.maxY=Math.max(rt.maxY,yt)}function Me(Jt,xe,Oe,rt=!1,_t=!1){const yt=[];for(const bt of Jt)ge(bt,yt,Oe);xe.push(yt),rt&&function(bt,Bt){let Et=0;for(let $t=0,Kt=bt.length,Ht=Kt-2;$t<Kt;Ht=$t,$t+=2)Et+=(bt[$t]-bt[Ht])*(bt[$t+1]+bt[Ht+1]);if(Et>0===Bt)for(let $t=0,Kt=bt.length;$t<Kt/2;$t+=2){const Ht=bt[$t],Ta=bt[$t+1];bt[$t]=bt[Kt-2-$t],bt[$t+1]=bt[Kt-1-$t],bt[Kt-2-$t]=Ht,bt[Kt-1-$t]=Ta}}(yt,_t)}function ze(Jt,xe,Oe,rt=!1){for(let _t=0;_t<Jt.length;_t++)Me(Jt[_t],xe,Oe,rt,_t===0)}function Le(Jt,xe,Oe,rt){const{id:_t,type:yt,geometry:bt,tags:Bt}=Jt,Et=[];if(yt===1)(function($t,Kt,Ht,Ta,Ma){for(let Ba=0;Ba<$t.length;Ba+=2){const _r=Math.round(n.ai*($t[Ba+0]*Kt-Ht)),Nr=Math.round(n.ai*($t[Ba+1]*Kt-Ta));Ma.push([_r,Nr])}})(bt,xe,Oe,rt,Et);else for(const $t of bt)Ie($t,xe,Oe,rt,Et);return{id:_t,type:yt,geometry:Et,tags:Bt}}function Ie(Jt,xe,Oe,rt,_t){const bt=n.ai+Re;let Bt;for(let Et=0;Et<Jt.length-2;Et+=2){let $t=Math.round(n.ai*(Jt[Et+0]*xe-Oe)),Kt=Math.round(n.ai*(Jt[Et+1]*xe-rt)),Ht=Math.round(n.ai*(Jt[Et+2]*xe-Oe)),Ta=Math.round(n.ai*(Jt[Et+3]*xe-rt));const Ma=Ht-$t,Ba=Ta-Kt;$t<-128&&Ht<-128||($t<-128?(Kt+=Math.round(Ba*((-128-$t)/Ma)),$t=-128):Ht<-128&&(Ta=Kt+Math.round(Ba*((-128-$t)/Ma)),Ht=-128),Kt<-128&&Ta<-128||(Kt<-128?($t+=Math.round(Ma*((-128-Kt)/Ba)),Kt=-128):Ta<-128&&(Ht=$t+Math.round(Ma*((-128-Kt)/Ba)),Ta=-128),$t>=bt&&Ht>=bt||($t>=bt?(Kt+=Math.round(Ba*((bt-$t)/Ma)),$t=bt):Ht>=bt&&(Ta=Kt+Math.round(Ba*((bt-$t)/Ma)),Ht=bt),Kt>=bt&&Ta>=bt||(Kt>=bt?($t+=Math.round(Ma*((bt-Kt)/Ba)),Kt=bt):Ta>=bt&&(Ht=$t+Math.round(Ma*((bt-Kt)/Ba)),Ta=bt),Bt&&$t===Bt[Bt.length-1][0]&&Kt===Bt[Bt.length-1][1]||(Bt=[[$t,Kt]],_t.push(Bt)),Bt.push([Ht,Ta])))))}}var Ze,ke,tt,Ue={exports:{}},He=function(){if(tt)return Ue.exports;tt=1;var Jt=n.eg(),xe=function(){if(ke)return Ze;ke=1;var Kt=n.ee(),Ht=n.ef().VectorTileFeature;function Ta(Ba,_r){this.options=_r||{},this.features=Ba,this.length=Ba.length}function Ma(Ba,_r){this.id=typeof Ba.id=="number"?Ba.id:void 0,this.type=Ba.type,this.rawGeometry=Ba.type===1?[Ba.geometry]:Ba.geometry,this.properties=Ba.tags,this.extent=_r||4096}return Ze=Ta,Ta.prototype.feature=function(Ba){return new Ma(this.features[Ba],this.options.extent)},Ma.prototype.loadGeometry=function(){var Ba=this.rawGeometry;this.geometry=[];for(var _r=0;_r<Ba.length;_r++){for(var Nr=Ba[_r],Vr=[],Gr=0;Gr<Nr.length;Gr++)Vr.push(new Kt(Nr[Gr][0],Nr[Gr][1]));this.geometry.push(Vr)}return this.geometry},Ma.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ba=this.geometry,_r=1/0,Nr=-1/0,Vr=1/0,Gr=-1/0,zn=0;zn<Ba.length;zn++)for(var Jn=Ba[zn],qr=0;qr<Jn.length;qr++){var yn=Jn[qr];_r=Math.min(_r,yn.x),Nr=Math.max(Nr,yn.x),Vr=Math.min(Vr,yn.y),Gr=Math.max(Gr,yn.y)}return[_r,Vr,Nr,Gr]},Ma.prototype.toGeoJSON=Ht.prototype.toGeoJSON,Ze}();function Oe(Kt){var Ht=new Jt;return function(Ta,Ma){for(var Ba in Ta.layers)Ma.writeMessage(3,rt,Ta.layers[Ba])}(Kt,Ht),Ht.finish()}function rt(Kt,Ht){var Ta;Ht.writeVarintField(15,Kt.version||1),Ht.writeStringField(1,Kt.name||""),Ht.writeVarintField(5,Kt.extent||4096);var Ma={keys:[],values:[],keycache:{},valuecache:{}};for(Ta=0;Ta<Kt.length;Ta++)Ma.feature=Kt.feature(Ta),Ht.writeMessage(2,_t,Ma);var Ba=Ma.keys;for(Ta=0;Ta<Ba.length;Ta++)Ht.writeStringField(3,Ba[Ta]);var _r=Ma.values;for(Ta=0;Ta<_r.length;Ta++)Ht.writeMessage(4,$t,_r[Ta])}function _t(Kt,Ht){var Ta=Kt.feature;Ta.id!==void 0&&Ht.writeVarintField(1,Ta.id),Ht.writeMessage(2,yt,Kt),Ht.writeVarintField(3,Ta.type),Ht.writeMessage(4,Et,Ta)}function yt(Kt,Ht){var Ta=Kt.feature,Ma=Kt.keys,Ba=Kt.values,_r=Kt.keycache,Nr=Kt.valuecache;for(var Vr in Ta.properties){var Gr=Ta.properties[Vr],zn=_r[Vr];if(Gr!==null){zn===void 0&&(Ma.push(Vr),_r[Vr]=zn=Ma.length-1),Ht.writeVarint(zn);var Jn=typeof Gr;Jn!=="string"&&Jn!=="boolean"&&Jn!=="number"&&(Gr=JSON.stringify(Gr));var qr=Jn+":"+Gr,yn=Nr[qr];yn===void 0&&(Ba.push(Gr),Nr[qr]=yn=Ba.length-1),Ht.writeVarint(yn)}}}function bt(Kt,Ht){return(Ht<<3)+(7&Kt)}function Bt(Kt){return Kt<<1^Kt>>31}function Et(Kt,Ht){for(var Ta=Kt.loadGeometry(),Ma=Kt.type,Ba=0,_r=0,Nr=Ta.length,Vr=0;Vr<Nr;Vr++){var Gr=Ta[Vr],zn=1;Ma===1&&(zn=Gr.length),Ht.writeVarint(bt(1,zn));for(var Jn=Ma===3?Gr.length-1:Gr.length,qr=0;qr<Jn;qr++){qr===1&&Ma!==1&&Ht.writeVarint(bt(2,Jn-1));var yn=Gr[qr].x-Ba,Hr=Gr[qr].y-_r;Ht.writeVarint(Bt(yn)),Ht.writeVarint(Bt(Hr)),Ba+=yn,_r+=Hr}Ma===3&&Ht.writeVarint(bt(7,1))}}function $t(Kt,Ht){var Ta=typeof Kt;Ta==="string"?Ht.writeStringField(1,Kt):Ta==="boolean"?Ht.writeBooleanField(7,Kt):Ta==="number"&&(Kt%1!=0?Ht.writeDoubleField(3,Kt):Kt<0?Ht.writeSVarintField(6,Kt):Ht.writeVarintField(5,Kt))}return Ue.exports=Oe,Ue.exports.fromVectorTileJs=Oe,Ue.exports.fromGeojsonVt=function(Kt,Ht){Ht=Ht||{};var Ta={};for(var Ma in Kt)Ta[Ma]=new xe(Kt[Ma].features,Ht),Ta[Ma].name=Ma,Ta[Ma].version=Ht.version,Ta[Ma].extent=Ht.extent;return Oe({layers:Ta})},Ue.exports.GeoJSONWrapper=xe,Ue.exports}(),Ce=n.eh(He);const Se={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Jt=>Jt},$e=Math.fround||(ht=new Float32Array(1),Jt=>(ht[0]=+Jt,ht[0]));var ht;const ft=3,ut=5,Rt=6;class We{constructor(xe){this.options=Object.assign(Object.create(Se),xe),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(xe){const{log:Oe,minZoom:rt,maxZoom:_t}=this.options;Oe&&console.time("total time");const yt=`prepare ${xe.length} points`;Oe&&console.time(yt),this.points=xe;const bt=[];for(let Et=0;Et<xe.length;Et++){const $t=xe[Et];if(!$t.geometry)continue;const[Kt,Ht]=$t.geometry.coordinates,Ta=$e(Gt(Kt)),Ma=$e(Aa(Ht));bt.push(Ta,Ma,1/0,Et,-1,1),this.options.reduce&&bt.push(0)}let Bt=this.trees[_t+1]=this._createTree(bt);Oe&&console.timeEnd(yt);for(let Et=_t;Et>=rt;Et--){const $t=+Date.now();Bt=this.trees[Et]=this._createTree(this._cluster(Bt,Et)),Oe&&console.log("z%d: %d clusters in %dms",Et,Bt.numItems,+Date.now()-$t)}return Oe&&console.timeEnd("total time"),this}getClusters(xe,Oe){let rt=((xe[0]+180)%360+360)%360-180;const _t=Math.max(-90,Math.min(90,xe[1]));let yt=xe[2]===180?180:((xe[2]+180)%360+360)%360-180;const bt=Math.max(-90,Math.min(90,xe[3]));if(xe[2]-xe[0]>=360)rt=-180,yt=180;else if(rt>yt){const Ht=this.getClusters([rt,_t,180,bt],Oe),Ta=this.getClusters([-180,_t,yt,bt],Oe);return Ht.concat(Ta)}const Bt=this.trees[this._limitZoom(Oe)],Et=Bt.range(Gt(rt),Aa(bt),Gt(yt),Aa(_t)),$t=Bt.data,Kt=[];for(const Ht of Et){const Ta=this.stride*Ht;Kt.push($t[Ta+ut]>1?Ae($t,Ta,this.clusterProps):this.points[$t[Ta+ft]])}return Kt}getChildren(xe){const Oe=this._getOriginId(xe),rt=this._getOriginZoom(xe),_t="No cluster with the specified id.",yt=this.trees[rt];if(!yt)throw new Error(_t);const bt=yt.data;if(Oe*this.stride>=bt.length)throw new Error(_t);const Bt=this.options.radius/(this.options.extent*Math.pow(2,rt-1)),Et=yt.within(bt[Oe*this.stride],bt[Oe*this.stride+1],Bt),$t=[];for(const Kt of Et){const Ht=Kt*this.stride;bt[Ht+4]===xe&&$t.push(bt[Ht+ut]>1?Ae(bt,Ht,this.clusterProps):this.points[bt[Ht+ft]])}if($t.length===0)throw new Error(_t);return $t}getLeaves(xe,Oe,rt){const _t=[];return this._appendLeaves(_t,xe,Oe=Oe||10,rt=rt||0,0),_t}getTile(xe,Oe,rt){const _t=this.trees[this._limitZoom(xe)],yt=Math.pow(2,xe),{extent:bt,radius:Bt}=this.options,Et=Bt/bt,$t=(rt-Et)/yt,Kt=(rt+1+Et)/yt,Ht={features:[]};return this._addTileFeatures(_t.range((Oe-Et)/yt,$t,(Oe+1+Et)/yt,Kt),_t.data,Oe,rt,yt,Ht),Oe===0&&this._addTileFeatures(_t.range(1-Et/yt,$t,1,Kt),_t.data,yt,rt,yt,Ht),Oe===yt-1&&this._addTileFeatures(_t.range(0,$t,Et/yt,Kt),_t.data,-1,rt,yt,Ht),Ht.features.length?Ht:null}getClusterExpansionZoom(xe){let Oe=this._getOriginZoom(xe)-1;for(;Oe<=this.options.maxZoom;){const rt=this.getChildren(xe);if(Oe++,rt.length!==1)break;xe=rt[0].properties.cluster_id}return Oe}_appendLeaves(xe,Oe,rt,_t,yt){const bt=this.getChildren(Oe);for(const Bt of bt){const Et=Bt.properties;if(Et&&Et.cluster?yt+Et.point_count<=_t?yt+=Et.point_count:yt=this._appendLeaves(xe,Et.cluster_id,rt,_t,yt):yt<_t?yt++:xe.push(Bt),xe.length===rt)break}return yt}_createTree(xe){const Oe=new n.bE(xe.length/this.stride|0,this.options.nodeSize,Float32Array);for(let rt=0;rt<xe.length;rt+=this.stride)Oe.add(xe[rt],xe[rt+1]);return Oe.finish(),Oe.data=xe,Oe}_addTileFeatures(xe,Oe,rt,_t,yt,bt){for(const Bt of xe){const Et=Bt*this.stride,$t=Oe[Et+ut]>1;let Kt,Ht,Ta;if($t)Kt=qt(Oe,Et,this.clusterProps),Ht=Oe[Et],Ta=Oe[Et+1];else{const _r=this.points[Oe[Et+ft]];Kt=_r.properties;const[Nr,Vr]=_r.geometry.coordinates;Ht=Gt(Nr),Ta=Aa(Vr)}const Ma={type:1,geometry:[[Math.round(this.options.extent*(Ht*yt-rt)),Math.round(this.options.extent*(Ta*yt-_t))]],tags:Kt};let Ba;Ba=$t||this.options.generateId?Oe[Et+ft]:this.points[Oe[Et+ft]].id,Ba!==void 0&&(Ma.id=Ba),bt.features.push(Ma)}}_limitZoom(xe){return Math.max(this.options.minZoom,Math.min(Math.floor(+xe),this.options.maxZoom+1))}_cluster(xe,Oe){const{radius:rt,extent:_t,reduce:yt,minPoints:bt}=this.options,Bt=rt/(_t*Math.pow(2,Oe)),Et=xe.data,$t=[],Kt=this.stride;for(let Ht=0;Ht<Et.length;Ht+=Kt){if(Et[Ht+2]<=Oe)continue;Et[Ht+2]=Oe;const Ta=Et[Ht],Ma=Et[Ht+1],Ba=xe.within(Et[Ht],Et[Ht+1],Bt),_r=Et[Ht+ut];let Nr=_r;for(const Vr of Ba){const Gr=Vr*Kt;Et[Gr+2]>Oe&&(Nr+=Et[Gr+ut])}if(Nr>_r&&Nr>=bt){let Vr,Gr=Ta*_r,zn=Ma*_r,Jn=-1;const qr=(Ht/Kt<<5)+(Oe+1)+this.points.length;for(const yn of Ba){const Hr=yn*Kt;if(Et[Hr+2]<=Oe)continue;Et[Hr+2]=Oe;const In=Et[Hr+ut];Gr+=Et[Hr]*In,zn+=Et[Hr+1]*In,Et[Hr+4]=qr,yt&&(Vr||(Vr=this._map(Et,Ht,!0),Jn=this.clusterProps.length,this.clusterProps.push(Vr)),yt(Vr,this._map(Et,Hr)))}Et[Ht+4]=qr,$t.push(Gr/Nr,zn/Nr,1/0,qr,-1,Nr),yt&&$t.push(Jn)}else{for(let Vr=0;Vr<Kt;Vr++)$t.push(Et[Ht+Vr]);if(Nr>1)for(const Vr of Ba){const Gr=Vr*Kt;if(!(Et[Gr+2]<=Oe)){Et[Gr+2]=Oe;for(let zn=0;zn<Kt;zn++)$t.push(Et[Gr+zn])}}}}return $t}_getOriginId(xe){return xe-this.points.length>>5}_getOriginZoom(xe){return(xe-this.points.length)%32}_map(xe,Oe,rt){if(xe[Oe+ut]>1){const bt=this.clusterProps[xe[Oe+Rt]];return rt?Object.assign({},bt):bt}const _t=this.points[xe[Oe+ft]].properties,yt=this.options.map(_t);return rt&&yt===_t?Object.assign({},yt):yt}}function Ae(Jt,xe,Oe){return{type:"Feature",id:Jt[xe+ft],properties:qt(Jt,xe,Oe),geometry:{type:"Point",coordinates:[(rt=Jt[xe],360*(rt-.5)),It(Jt[xe+1])]}};var rt}function qt(Jt,xe,Oe){const rt=Jt[xe+ut],_t=rt>=1e4?`${Math.round(rt/1e3)}k`:rt>=1e3?Math.round(rt/100)/10+"k":rt,yt=Jt[xe+Rt],bt=yt===-1?{}:Object.assign({},Oe[yt]);return Object.assign(bt,{cluster:!0,cluster_id:Jt[xe+ft],point_count:rt,point_count_abbreviated:_t})}function Gt(Jt){return Jt/360+.5}function Aa(Jt){const xe=Math.sin(Jt*Math.PI/180),Oe=.5-.25*Math.log((1+xe)/(1-xe))/Math.PI;return Oe<0?0:Oe>1?1:Oe}function It(Jt){const xe=(180-360*Jt)*Math.PI/180;return 360*Math.atan(Math.exp(xe))/Math.PI-90}function ta(Jt,xe,Oe,rt){let _t=rt;const yt=xe+(Oe-xe>>1);let bt,Bt=Oe-xe;const Et=Jt[xe],$t=Jt[xe+1],Kt=Jt[Oe],Ht=Jt[Oe+1];for(let Ta=xe+3;Ta<Oe;Ta+=3){const Ma=vt(Jt[Ta],Jt[Ta+1],Et,$t,Kt,Ht);if(Ma>_t)bt=Ta,_t=Ma;else if(Ma===_t){const Ba=Math.abs(Ta-yt);Ba<Bt&&(bt=Ta,Bt=Ba)}}_t>rt&&(bt-xe>3&&ta(Jt,xe,bt,rt),Jt[bt+2]=_t,Oe-bt>3&&ta(Jt,bt,Oe,rt))}function vt(Jt,xe,Oe,rt,_t,yt){let bt=_t-Oe,Bt=yt-rt;if(bt!==0||Bt!==0){const Et=((Jt-Oe)*bt+(xe-rt)*Bt)/(bt*bt+Bt*Bt);Et>1?(Oe=_t,rt=yt):Et>0&&(Oe+=bt*Et,rt+=Bt*Et)}return bt=Jt-Oe,Bt=xe-rt,bt*bt+Bt*Bt}function or(Jt,xe,Oe,rt){const _t={id:Jt??null,type:xe,geometry:Oe,tags:rt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(xe==="Point"||xe==="MultiPoint"||xe==="LineString")Na(_t,Oe);else if(xe==="Polygon")Na(_t,Oe[0]);else if(xe==="MultiLineString")for(const yt of Oe)Na(_t,yt);else if(xe==="MultiPolygon")for(const yt of Oe)Na(_t,yt[0]);return _t}function Na(Jt,xe){for(let Oe=0;Oe<xe.length;Oe+=3)Jt.minX=Math.min(Jt.minX,xe[Oe]),Jt.minY=Math.min(Jt.minY,xe[Oe+1]),Jt.maxX=Math.max(Jt.maxX,xe[Oe]),Jt.maxY=Math.max(Jt.maxY,xe[Oe+1])}function za(Jt,xe,Oe,rt){if(!xe.geometry)return;const _t=xe.geometry.coordinates;if(_t&&_t.length===0)return;const yt=xe.geometry.type,bt=Math.pow(Oe.tolerance/((1<<Oe.maxZoom)*Oe.extent),2);let Bt=[],Et=xe.id;if(Oe.promoteId?Et=xe.properties[Oe.promoteId]:Oe.generateId&&(Et=rt||0),yt==="Point")er(_t,Bt);else if(yt==="MultiPoint")for(const $t of _t)er($t,Bt);else if(yt==="LineString")dr(_t,Bt,bt,!1);else if(yt==="MultiLineString"){if(Oe.lineMetrics){for(const $t of _t)Bt=[],dr($t,Bt,bt,!1),Jt.push(or(Et,"LineString",Bt,xe.properties));return}cr(_t,Bt,bt,!1)}else if(yt==="Polygon")cr(_t,Bt,bt,!0);else{if(yt!=="MultiPolygon"){if(yt==="GeometryCollection"){for(const $t of xe.geometry.geometries)za(Jt,{id:Et,geometry:$t,properties:xe.properties},Oe,rt);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const $t of _t){const Kt=[];cr($t,Kt,bt,!0),Bt.push(Kt)}}Jt.push(or(Et,yt,Bt,xe.properties))}function er(Jt,xe){xe.push(Pr(Jt[0]),ka(Jt[1]),0)}function dr(Jt,xe,Oe,rt){let _t,yt,bt=0;for(let Et=0;Et<Jt.length;Et++){const $t=Pr(Jt[Et][0]),Kt=ka(Jt[Et][1]);xe.push($t,Kt,0),Et>0&&(bt+=rt?(_t*Kt-$t*yt)/2:Math.sqrt(Math.pow($t-_t,2)+Math.pow(Kt-yt,2))),_t=$t,yt=Kt}const Bt=xe.length-3;xe[2]=1,ta(xe,0,Bt,Oe),xe[Bt+2]=1,xe.size=Math.abs(bt),xe.start=0,xe.end=xe.size}function cr(Jt,xe,Oe,rt){for(let _t=0;_t<Jt.length;_t++){const yt=[];dr(Jt[_t],yt,Oe,rt),xe.push(yt)}}function Pr(Jt){return Jt/360+.5}function ka(Jt){const xe=Math.sin(Jt*Math.PI/180),Oe=.5-.25*Math.log((1+xe)/(1-xe))/Math.PI;return Oe<0?0:Oe>1?1:Oe}function jr(Jt,xe,Oe,rt,_t,yt,bt,Bt){if(rt/=xe,yt>=(Oe/=xe)&&bt<rt)return Jt;if(bt<Oe||yt>=rt)return null;const Et=[];for(const $t of Jt){const Kt=$t.geometry;let Ht=$t.type;const Ta=_t===0?$t.minX:$t.minY,Ma=_t===0?$t.maxX:$t.maxY;if(Ta>=Oe&&Ma<rt){Et.push($t);continue}if(Ma<Oe||Ta>=rt)continue;let Ba=[];if(Ht==="Point"||Ht==="MultiPoint")pn(Kt,Ba,Oe,rt,_t);else if(Ht==="LineString")Dn(Kt,Ba,Oe,rt,_t,!1,Bt.lineMetrics);else if(Ht==="MultiLineString")wa(Kt,Ba,Oe,rt,_t,!1);else if(Ht==="Polygon")wa(Kt,Ba,Oe,rt,_t,!0);else if(Ht==="MultiPolygon")for(const _r of Kt){const Nr=[];wa(_r,Nr,Oe,rt,_t,!0),Nr.length&&Ba.push(Nr)}if(Ba.length){if(Bt.lineMetrics&&Ht==="LineString"){for(const _r of Ba)Et.push(or($t.id,Ht,_r,$t.tags));continue}Ht!=="LineString"&&Ht!=="MultiLineString"||(Ba.length===1?(Ht="LineString",Ba=Ba[0]):Ht="MultiLineString"),Ht!=="Point"&&Ht!=="MultiPoint"||(Ht=Ba.length===3?"Point":"MultiPoint"),Et.push(or($t.id,Ht,Ba,$t.tags))}}return Et.length?Et:null}function pn(Jt,xe,Oe,rt,_t){for(let yt=0;yt<Jt.length;yt+=3){const bt=Jt[yt+_t];bt>=Oe&&bt<=rt&&Wa(xe,Jt[yt],Jt[yt+1],Jt[yt+2])}}function Dn(Jt,xe,Oe,rt,_t,yt,bt){let Bt=Rn(Jt);const Et=_t===0?ca:Qa;let $t,Kt,Ht=Jt.start;for(let Nr=0;Nr<Jt.length-3;Nr+=3){const Vr=Jt[Nr],Gr=Jt[Nr+1],zn=Jt[Nr+2],Jn=Jt[Nr+3],qr=Jt[Nr+4],yn=_t===0?Vr:Gr,Hr=_t===0?Jn:qr;let In=!1;bt&&($t=Math.sqrt(Math.pow(Vr-Jn,2)+Math.pow(Gr-qr,2))),yn<Oe?Hr>Oe&&(Kt=Et(Bt,Vr,Gr,Jn,qr,Oe),bt&&(Bt.start=Ht+$t*Kt)):yn>rt?Hr<rt&&(Kt=Et(Bt,Vr,Gr,Jn,qr,rt),bt&&(Bt.start=Ht+$t*Kt)):Wa(Bt,Vr,Gr,zn),Hr<Oe&&yn>=Oe&&(Kt=Et(Bt,Vr,Gr,Jn,qr,Oe),In=!0),Hr>rt&&yn<=rt&&(Kt=Et(Bt,Vr,Gr,Jn,qr,rt),In=!0),!yt&&In&&(bt&&(Bt.end=Ht+$t*Kt),xe.push(Bt),Bt=Rn(Jt)),bt&&(Ht+=$t)}let Ta=Jt.length-3;const Ma=Jt[Ta],Ba=Jt[Ta+1],_r=_t===0?Ma:Ba;_r>=Oe&&_r<=rt&&Wa(Bt,Ma,Ba,Jt[Ta+2]),Ta=Bt.length-3,yt&&Ta>=3&&(Bt[Ta]!==Bt[0]||Bt[Ta+1]!==Bt[1])&&Wa(Bt,Bt[0],Bt[1],Bt[2]),Bt.length&&xe.push(Bt)}function Rn(Jt){const xe=[];return xe.size=Jt.size,xe.start=Jt.start,xe.end=Jt.end,xe}function wa(Jt,xe,Oe,rt,_t,yt){for(const bt of Jt)Dn(bt,xe,Oe,rt,_t,yt,!1)}function Wa(Jt,xe,Oe,rt){Jt.push(xe,Oe,rt)}function ca(Jt,xe,Oe,rt,_t,yt){const bt=(yt-xe)/(rt-xe);return Wa(Jt,yt,Oe+(_t-Oe)*bt,1),bt}function Qa(Jt,xe,Oe,rt,_t,yt){const bt=(yt-Oe)/(_t-Oe);return Wa(Jt,xe+(rt-xe)*bt,yt,1),bt}function gr(Jt,xe){const Oe=[];for(let rt=0;rt<Jt.length;rt++){const _t=Jt[rt],yt=_t.type;let bt;if(yt==="Point"||yt==="MultiPoint"||yt==="LineString")bt=qn(_t.geometry,xe);else if(yt==="MultiLineString"||yt==="Polygon"){bt=[];for(const Bt of _t.geometry)bt.push(qn(Bt,xe))}else if(yt==="MultiPolygon"){bt=[];for(const Bt of _t.geometry){const Et=[];for(const $t of Bt)Et.push(qn($t,xe));bt.push(Et)}}Oe.push(or(_t.id,yt,bt,_t.tags))}return Oe}function qn(Jt,xe){const Oe=[];Oe.size=Jt.size,Jt.start!==void 0&&(Oe.start=Jt.start,Oe.end=Jt.end);for(let rt=0;rt<Jt.length;rt+=3)Oe.push(Jt[rt]+xe,Jt[rt+1],Jt[rt+2]);return Oe}function Mn(Jt,xe){if(Jt.transformed)return Jt;const Oe=1<<Jt.z,rt=Jt.x,_t=Jt.y;for(const yt of Jt.features){const bt=yt.geometry,Bt=yt.type;if(yt.geometry=[],Bt===1)for(let Et=0;Et<bt.length;Et+=2)yt.geometry.push(mn(bt[Et],bt[Et+1],xe,Oe,rt,_t));else for(let Et=0;Et<bt.length;Et++){const $t=[];for(let Kt=0;Kt<bt[Et].length;Kt+=2)$t.push(mn(bt[Et][Kt],bt[Et][Kt+1],xe,Oe,rt,_t));yt.geometry.push($t)}}return Jt.transformed=!0,Jt}function mn(Jt,xe,Oe,rt,_t,yt){return[Math.round(Oe*(Jt*rt-_t)),Math.round(Oe*(xe*rt-yt))]}function en(Jt,xe,Oe,rt,_t){const yt=xe===_t.maxZoom?0:_t.tolerance/((1<<xe)*_t.extent),bt={features:[],numPoints:0,numSimplified:0,numFeatures:Jt.length,source:null,x:Oe,y:rt,z:xe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Bt of Jt)Er(bt,Bt,yt,_t);return bt}function Er(Jt,xe,Oe,rt){const _t=xe.geometry,yt=xe.type,bt=[];if(Jt.minX=Math.min(Jt.minX,xe.minX),Jt.minY=Math.min(Jt.minY,xe.minY),Jt.maxX=Math.max(Jt.maxX,xe.maxX),Jt.maxY=Math.max(Jt.maxY,xe.maxY),yt==="Point"||yt==="MultiPoint")for(let Bt=0;Bt<_t.length;Bt+=3)bt.push(_t[Bt],_t[Bt+1]),Jt.numPoints++,Jt.numSimplified++;else if(yt==="LineString")As(bt,_t,Jt,Oe,!1,!1);else if(yt==="MultiLineString"||yt==="Polygon")for(let Bt=0;Bt<_t.length;Bt++)As(bt,_t[Bt],Jt,Oe,yt==="Polygon",Bt===0);else if(yt==="MultiPolygon")for(let Bt=0;Bt<_t.length;Bt++){const Et=_t[Bt];for(let $t=0;$t<Et.length;$t++)As(bt,Et[$t],Jt,Oe,!0,$t===0)}if(bt.length){let Bt=xe.tags||null;if(yt==="LineString"&&rt.lineMetrics){Bt={};for(const $t in xe.tags)Bt[$t]=xe.tags[$t];Bt.mapbox_clip_start=_t.start/_t.size,Bt.mapbox_clip_end=_t.end/_t.size}const Et={geometry:bt,type:yt==="Polygon"||yt==="MultiPolygon"?3:yt==="LineString"||yt==="MultiLineString"?2:1,tags:Bt};xe.id!==null&&(Et.id=xe.id),Jt.features.push(Et)}}function As(Jt,xe,Oe,rt,_t,yt){const bt=rt*rt;if(rt>0&&xe.size<(_t?bt:rt))return void(Oe.numPoints+=xe.length/3);const Bt=[];for(let Et=0;Et<xe.length;Et+=3)(rt===0||xe[Et+2]>bt)&&(Oe.numSimplified++,Bt.push(xe[Et],xe[Et+1])),Oe.numPoints++;_t&&function(Et,$t){let Kt=0;for(let Ht=0,Ta=Et.length,Ma=Ta-2;Ht<Ta;Ma=Ht,Ht+=2)Kt+=(Et[Ht]-Et[Ma])*(Et[Ht+1]+Et[Ma+1]);if(Kt>0===$t)for(let Ht=0,Ta=Et.length;Ht<Ta/2;Ht+=2){const Ma=Et[Ht],Ba=Et[Ht+1];Et[Ht]=Et[Ta-2-Ht],Et[Ht+1]=Et[Ta-1-Ht],Et[Ta-2-Ht]=Ma,Et[Ta-1-Ht]=Ba}}(Bt,yt),Jt.push(Bt)}const Bi={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Qi{constructor(xe,Oe){const rt=(Oe=this.options=function(yt,bt){for(const Bt in bt)yt[Bt]=bt[Bt];return yt}(Object.create(Bi),Oe)).debug;if(rt&&console.time("preprocess data"),Oe.maxZoom<0||Oe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Oe.promoteId&&Oe.generateId)throw new Error("promoteId and generateId cannot be used together.");let _t=function(yt,bt){const Bt=[];if(yt.type==="FeatureCollection")for(let Et=0;Et<yt.features.length;Et++)za(Bt,yt.features[Et],bt,Et);else za(Bt,yt.type==="Feature"?yt:{geometry:yt},bt);return Bt}(xe,Oe);this.tiles={},this.tileCoords=[],rt&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Oe.indexMaxZoom,Oe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),_t=function(yt,bt){const Bt=bt.buffer/bt.extent;let Et=yt;const $t=jr(yt,1,-1-Bt,Bt,0,-1,2,bt),Kt=jr(yt,1,1-Bt,2+Bt,0,-1,2,bt);return($t||Kt)&&(Et=jr(yt,1,-Bt,1+Bt,0,-1,2,bt)||[],$t&&(Et=gr($t,1).concat(Et)),Kt&&(Et=Et.concat(gr(Kt,-1)))),Et}(_t,Oe),_t.length&&this.splitTile(_t,0,0,0),rt&&(_t.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(xe,Oe,rt,_t,yt,bt,Bt){const Et=[xe,Oe,rt,_t],$t=this.options,Kt=$t.debug;for(;Et.length;){_t=Et.pop(),rt=Et.pop(),Oe=Et.pop(),xe=Et.pop();const Ht=1<<Oe,Ta=Oo(Oe,rt,_t);let Ma=this.tiles[Ta];if(!Ma&&(Kt>1&&console.time("creation"),Ma=this.tiles[Ta]=en(xe,Oe,rt,_t,$t),this.tileCoords.push({z:Oe,x:rt,y:_t}),Kt)){Kt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Oe,rt,_t,Ma.numFeatures,Ma.numPoints,Ma.numSimplified),console.timeEnd("creation"));const In=`z${Oe}`;this.stats[In]=(this.stats[In]||0)+1,this.total++}if(Ma.source=xe,yt==null){if(Oe===$t.indexMaxZoom||Ma.numPoints<=$t.indexMaxPoints)continue}else{if(Oe===$t.maxZoom||Oe===yt)continue;if(yt!=null){const In=yt-Oe;if(rt!==bt>>In||_t!==Bt>>In)continue}}if(Ma.source=null,xe.length===0)continue;Kt>1&&console.time("clipping");const Ba=.5*$t.buffer/$t.extent,_r=.5-Ba,Nr=.5+Ba,Vr=1+Ba;let Gr=null,zn=null,Jn=null,qr=null,yn=jr(xe,Ht,rt-Ba,rt+Nr,0,Ma.minX,Ma.maxX,$t),Hr=jr(xe,Ht,rt+_r,rt+Vr,0,Ma.minX,Ma.maxX,$t);xe=null,yn&&(Gr=jr(yn,Ht,_t-Ba,_t+Nr,1,Ma.minY,Ma.maxY,$t),zn=jr(yn,Ht,_t+_r,_t+Vr,1,Ma.minY,Ma.maxY,$t),yn=null),Hr&&(Jn=jr(Hr,Ht,_t-Ba,_t+Nr,1,Ma.minY,Ma.maxY,$t),qr=jr(Hr,Ht,_t+_r,_t+Vr,1,Ma.minY,Ma.maxY,$t),Hr=null),Kt>1&&console.timeEnd("clipping"),Et.push(Gr||[],Oe+1,2*rt,2*_t),Et.push(zn||[],Oe+1,2*rt,2*_t+1),Et.push(Jn||[],Oe+1,2*rt+1,2*_t),Et.push(qr||[],Oe+1,2*rt+1,2*_t+1)}}getTile(xe,Oe,rt){xe=+xe,Oe=+Oe,rt=+rt;const _t=this.options,{extent:yt,debug:bt}=_t;if(xe<0||xe>24)return null;const Bt=1<<xe,Et=Oo(xe,Oe=Oe+Bt&Bt-1,rt);if(this.tiles[Et])return Mn(this.tiles[Et],yt);bt>1&&console.log("drilling down to z%d-%d-%d",xe,Oe,rt);let $t,Kt=xe,Ht=Oe,Ta=rt;for(;!$t&&Kt>0;)Kt--,Ht>>=1,Ta>>=1,$t=this.tiles[Oo(Kt,Ht,Ta)];return $t&&$t.source?(bt>1&&(console.log("found parent tile z%d-%d-%d",Kt,Ht,Ta),console.time("drilling down")),this.splitTile($t.source,Kt,Ht,Ta,xe,Oe,rt),bt>1&&console.timeEnd("drilling down"),this.tiles[Et]?Mn(this.tiles[Et],yt):null):null}}function Oo(Jt,xe,Oe){return 32*((1<<Jt)*Oe+xe)+Jt}function Ni(Jt,xe){const Oe=Jt.tileID.canonical;if(!this._geoJSONIndex)return void xe(null,null);const rt=this._geoJSONIndex.getTile(Oe.z,Oe.x,Oe.y);if(!rt)return void xe(null,null);const _t=new _e(rt.features);let yt=Ce(_t);yt.byteOffset===0&&yt.byteLength===yt.buffer.byteLength||(yt=new Uint8Array(yt)),xe(null,{vectorTile:_t,rawData:yt.buffer})}class fn extends q{constructor(xe,Oe,rt,_t,yt,bt){super(xe,Oe,rt,_t,Ni,bt),yt&&(this.loadGeoJSON=yt),this._dynamicIndex=new be}loadData(xe,Oe){const rt=xe&&xe.request,_t=rt&&rt.collectResourceTiming;this.loadGeoJSON(xe,(yt,bt)=>{if(yt||!bt)return Oe(yt);if(typeof bt!="object")return Oe(new Error(`Input data given to '${xe.source}' is not a valid GeoJSON object.`));{try{if(xe.filter){const Et=n.X(xe.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Et.result==="error")throw new Error(Et.value.map($t=>`${$t.key}: ${$t.message}`).join(", "));bt.features=bt.features.filter($t=>Et.value.evaluate({zoom:0},$t))}xe.dynamic?(bt.type==="Feature"&&(bt={type:"FeatureCollection",features:[bt]}),xe.append||(this._dynamicIndex.clear(),this.loaded={}),this._dynamicIndex.load(bt.features,this.loaded),xe.cluster&&(bt.features=this._dynamicIndex.getFeatures())):this.loaded={},this._geoJSONIndex=xe.cluster?new We(function({superclusterOptions:Et,clusterProperties:$t}){if(!$t||!Et)return Et;const Kt={},Ht={},Ta={accumulated:null,zoom:0},Ma={properties:null},Ba=Object.keys($t);for(const _r of Ba){const[Nr,Vr]=$t[_r],Gr=n.X(Vr),zn=n.X(typeof Nr=="string"?[Nr,["accumulated"],["get",_r]]:Nr);Kt[_r]=Gr.value,Ht[_r]=zn.value}return Et.map=_r=>{Ma.properties=_r;const Nr={};for(const Vr of Ba)Nr[Vr]=Kt[Vr].evaluate(Ta,Ma);return Nr},Et.reduce=(_r,Nr)=>{Ma.properties=Nr;for(const Vr of Ba)Ta.accumulated=_r[Vr],_r[Vr]=Ht[Vr].evaluate(Ta,Ma)},Et}(xe)).load(bt.features):xe.dynamic?this._dynamicIndex:function(Et,$t){return new Qi(Et,$t)}(bt,xe.geojsonVtOptions)}catch(Et){return Oe(Et)}const Bt={};if(_t){const Et=w(rt);Et&&(Bt.resourceTiming={},Bt.resourceTiming[xe.source]=JSON.parse(JSON.stringify(Et)))}Oe(null,Bt)}})}reloadTile(xe,Oe){const rt=this.loaded;return rt&&rt[xe.uid]?xe.partial?Oe(null,void 0):super.reloadTile(xe,Oe):this.loadTile(xe,Oe)}loadGeoJSON(xe,Oe){if(xe.request)n.n(xe.request,Oe);else{if(typeof xe.data!="string")return Oe(new Error(`Input data given to '${xe.source}' is not a valid GeoJSON object.`));try{return Oe(null,JSON.parse(xe.data))}catch{return Oe(new Error(`Input data given to '${xe.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(xe,Oe){try{Oe(null,this._geoJSONIndex.getClusterExpansionZoom(xe.clusterId))}catch(rt){Oe(rt)}}getClusterChildren(xe,Oe){try{Oe(null,this._geoJSONIndex.getChildren(xe.clusterId))}catch(rt){Oe(rt)}}getClusterLeaves(xe,Oe){try{Oe(null,this._geoJSONIndex.getLeaves(xe.clusterId,xe.limit,xe.offset))}catch(rt){Oe(rt)}}}class ui{constructor(xe,Oe){this.tileID=new n.aH(xe.tileID.overscaledZ,xe.tileID.wrap,xe.tileID.canonical.z,xe.tileID.canonical.x,xe.tileID.canonical.y),this.tileZoom=xe.tileZoom,this.uid=xe.uid,this.zoom=xe.zoom,this.canonical=xe.tileID.canonical,this.pixelRatio=xe.pixelRatio,this.tileSize=xe.tileSize,this.source=xe.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=xe.projection,this.brightness=Oe}parse(xe,Oe,rt,_t){this.status="parsing";const yt=new n.aH(rt.tileID.overscaledZ,rt.tileID.wrap,rt.tileID.canonical.z,rt.tileID.canonical.x,rt.tileID.canonical.y),bt=[],Bt=Oe.familiesBySource[rt.source],Et=new n.e0(yt,rt.promoteId);return Et.bucketLayerIDs=[],Et.is3DTile=!0,n.ei(xe).then($t=>{if(!$t)return _t(new Error("Could not parse tile"));const Kt=n.ej($t,1/n.cd(rt.tileID.canonical)),Ht=$t.json.extensionsUsed&&$t.json.extensionsUsed.includes("MAPBOX_mesh_features")||$t.json.asset.extras&&$t.json.asset.extras.MAPBOX_mesh_features,Ta=$t.json.extensionsUsed&&$t.json.extensionsUsed.includes("EXT_meshopt_compression"),Ma=new n.aa(this.zoom,{brightness:this.brightness});for(const Ba in Bt)for(const _r of Bt[Ba]){const Nr=_r[0];Et.bucketLayerIDs.push(_r.map(Gr=>n.C(Gr.id,Gr.scope))),Nr.recalculate(Ma,[]);const Vr=new n.ek(_r,Kt,yt,Ht,Ta,this.brightness,Et);Ht||(Vr.needsUpload=!0),bt.push(Vr),Vr.evaluate(Nr)}this.status="done",_t(null,{buckets:bt,featureIndex:Et,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:null})}).catch($t=>_t(new Error($t.message)))}}class Vc{constructor(xe,Oe,rt,_t,yt,bt){this.actor=xe,this.layerIndex=Oe,this.availableImages=rt,this.brightness=bt,this.loading={},this.loaded={}}loadTile(xe,Oe){const rt=xe.uid,_t=this.loading[rt]=new ui(xe,this.brightness);n.bj(xe.request,(yt,bt)=>{const Bt=!this.loading[rt];return delete this.loading[rt],Bt||yt?(_t.status="done",Bt||(this.loaded[rt]=_t),Oe(yt)):bt&&bt.byteLength!==0?void _t.parse(bt,this.layerIndex,xe,(Et,$t)=>{_t.status="done",this.loaded=this.loaded||{},this.loaded[rt]=_t,Et||!$t?Oe(Et):Oe(null,$t)}):(_t.status="done",this.loaded[rt]=_t,Oe())})}reloadTile(xe,Oe){const rt=this.loaded,_t=xe.uid;if(rt&&rt[_t]){const yt=rt[_t];yt.projection=xe.projection,yt.brightness=xe.brightness;const bt=(Bt,Et)=>{yt.reloadCallback&&(delete yt.reloadCallback,this.loadTile(xe,Oe)),Oe(Bt,Et)};yt.status==="parsing"?yt.reloadCallback=bt:yt.status==="done"&&this.loadTile(xe,Oe)}}abortTile(xe,Oe){const rt=xe.uid;this.loading[rt]&&delete this.loading[rt],Oe()}removeTile(xe,Oe){const rt=this.loaded,_t=xe.uid;rt&&rt[_t]&&delete rt[_t],Oe()}}class Us{constructor(xe){this.self=xe,this.actor=new n.el(xe,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.imageRasterizer=new n.y,this.projections={},this.defaultProjection=n.bP({name:"mercator"}),this.workerSourceTypes={vector:q,geojson:fn,"raster-dem":J,"raster-array":ce,"batched-model":Vc},this.workerSources={},this.self.registerWorkerSource=(Oe,rt)=>{if(this.workerSourceTypes[Oe])throw new Error(`Worker source with name "${Oe}" already registered.`);this.workerSourceTypes[Oe]=rt},this.self.registerRTLTextPlugin=Oe=>{if(n.em.isParsed())throw new Error("RTL text plugin already registered.");n.em.applyArabicShaping=Oe.applyArabicShaping,n.em.processBidirectionalText=Oe.processBidirectionalText,n.em.processStyledBidirectionalText=Oe.processStyledBidirectionalText}}clearCaches(xe,Oe,rt){delete this.layerIndexes[xe],delete this.availableImages[xe],delete this.workerSources[xe],rt()}checkIfReady(xe,Oe,rt){rt()}setReferrer(xe,Oe){this.referrer=Oe}spriteLoaded(xe,{scope:Oe,isLoaded:rt}){if(this.isSpriteLoaded[xe]||(this.isSpriteLoaded[xe]={}),this.isSpriteLoaded[xe][Oe]=rt,this.workerSources[xe]&&this.workerSources[xe][Oe])for(const _t in this.workerSources[xe][Oe]){const yt=this.workerSources[xe][Oe][_t];for(const bt in yt){const Bt=yt[bt];Bt instanceof q&&(Bt.isSpriteLoaded=rt,Bt.fire(new n.A("isSpriteLoaded")))}}}setImages(xe,{scope:Oe,images:rt},_t){if(this.availableImages[xe]||(this.availableImages[xe]={}),this.availableImages[xe][Oe]=rt,this.workerSources[xe]&&this.workerSources[xe][Oe]){for(const yt in this.workerSources[xe][Oe]){const bt=this.workerSources[xe][Oe][yt];for(const Bt in bt)bt[Bt].availableImages=rt}_t()}else _t()}setProjection(xe,Oe){this.projections[xe]=n.bP(Oe)}setBrightness(xe,Oe,rt){this.brightness=Oe,rt()}setLayers(xe,Oe,rt){this.getLayerIndex(xe,Oe.scope).replace(Oe.layers,Oe.options),rt()}updateLayers(xe,Oe,rt){this.getLayerIndex(xe,Oe.scope).update(Oe.layers,Oe.removedIds,Oe.options),rt()}loadTile(xe,Oe,rt){Oe.projection=this.projections[xe]||this.defaultProjection,this.getWorkerSource(xe,Oe.type,Oe.source,Oe.scope).loadTile(Oe,rt)}decodeRasterArray(xe,Oe,rt){this.getWorkerSource(xe,Oe.type,Oe.source,Oe.scope).decodeRasterArray(Oe,rt)}reloadTile(xe,Oe,rt){Oe.projection=this.projections[xe]||this.defaultProjection,this.getWorkerSource(xe,Oe.type,Oe.source,Oe.scope).reloadTile(Oe,rt)}abortTile(xe,Oe,rt){this.getWorkerSource(xe,Oe.type,Oe.source,Oe.scope).abortTile(Oe,rt)}removeTile(xe,Oe,rt){this.getWorkerSource(xe,Oe.type,Oe.source,Oe.scope).removeTile(Oe,rt)}removeSource(xe,Oe,rt){if(!(this.workerSources[xe]&&this.workerSources[xe][Oe.scope]&&this.workerSources[xe][Oe.scope][Oe.type]&&this.workerSources[xe][Oe.scope][Oe.type][Oe.source]))return;const _t=this.workerSources[xe][Oe.scope][Oe.type][Oe.source];delete this.workerSources[xe][Oe.scope][Oe.type][Oe.source],_t.removeSource!==void 0?_t.removeSource(Oe,rt):rt()}loadWorkerSource(xe,Oe,rt){try{this.self.importScripts(Oe.url),rt()}catch(_t){rt(_t.toString())}}syncRTLPluginState(xe,Oe,rt){try{n.em.setState(Oe);const _t=n.em.getPluginURL();if(n.em.isLoaded()&&!n.em.isParsed()&&_t!=null){this.self.importScripts(_t);const yt=n.em.isParsed();rt(yt?void 0:new Error(`RTL Text Plugin failed to import scripts from ${_t}`),yt)}}catch(_t){rt(_t.toString())}}setDracoUrl(xe,Oe){this.dracoUrl=Oe}getAvailableImages(xe,Oe){this.availableImages[xe]||(this.availableImages[xe]={});let rt=this.availableImages[xe][Oe];return rt||(rt=[]),rt}getLayerIndex(xe,Oe){this.layerIndexes[xe]||(this.layerIndexes[xe]={});let rt=this.layerIndexes[xe][Oe];return rt||(rt=this.layerIndexes[xe][Oe]=new z,rt.scope=Oe),rt}getWorkerSource(xe,Oe,rt,_t){const yt=this.workerSources;return yt[xe]||(yt[xe]={}),yt[xe][_t]||(yt[xe][_t]={}),yt[xe][_t][Oe]||(yt[xe][_t][Oe]={}),this.isSpriteLoaded[xe]||(this.isSpriteLoaded[xe]={}),yt[xe][_t][Oe][rt]||(yt[xe][_t][Oe][rt]=new this.workerSourceTypes[Oe]({send:(bt,Bt,Et,$t,Kt,Ht)=>{this.actor.send(bt,Bt,Et,xe,Kt,Ht)},scheduler:this.actor.scheduler},this.getLayerIndex(xe,_t),this.getAvailableImages(xe,_t),this.isSpriteLoaded[xe][_t],void 0,this.brightness)),yt[xe][_t][Oe][rt]}rasterizeImages(xe,Oe,rt){const _t=new Map;for(const[yt,{image:bt,imageVariant:Bt}]of Oe.tasks.entries()){const Et=this.imageRasterizer.rasterize(Bt,bt,Oe.scope,xe);_t.set(yt,Et)}rt(void 0,_t)}removeRasterizedImages(xe,Oe,rt){this.imageRasterizer.removeImagesFromCacheByIds(Oe.imageIds,Oe.scope,xe),rt()}enforceCacheSizeLimit(xe,Oe){n.en(Oe)}getWorkerPerformanceMetrics(xe,Oe,rt){rt(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Us(self)),Us}),l(["./shared"],function(n){var w="3.11.0";const T={create:"create",load:"load",fullLoad:"fullLoad"},P={mark(g){performance.mark(g)},measure(g,o,c){performance.measure(g,o,c)}};function z(g){const o=g.name.split("?")[0];return n.a(o)&&o.includes("mapbox-gl.js")?"javascript":n.a(o)&&o.includes("mapbox-gl.css")?"css":n.b(o)?"fontRange":n.c(o)?"sprite":n.i(o)?"style":n.d(o)?"tilejson":"other"}var k,U={},Z=function(){if(k)return U;function g(A){return!o(A)}function o(A){return typeof window>"u"||typeof document>"u"?"not a browser":function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var C,E,L=new Blob([""],{type:"text/javascript"}),j=URL.createObjectURL(L);try{E=new Worker(j),C=!0}catch{C=!1}return E&&E.terminate(),URL.revokeObjectURL(j),C}()?function(){var C=document.createElement("canvas");C.width=C.height=1;var E=C.getContext("2d");if(!E)return!1;var L=E.getImageData(0,0,1,1);return L&&L.width===C.width}()?(c[R=A&&A.failIfMajorPerformanceCaveat]===void 0&&(c[R]=function(C){var E,L=function(j){var $=document.createElement("canvas"),W=Object.create(g.webGLContextAttributes);return W.failIfMajorPerformanceCaveat=j,$.getContext("webgl2",W)}(C);if(!L)return!1;try{E=L.createShader(L.VERTEX_SHADER)}catch{return!1}return!(!E||L.isContextLost())&&(L.shaderSource(E,"void main() {}"),L.compileShader(E),L.getShaderParameter(E,L.COMPILE_STATUS)===!0)}(R)),c[R]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL2 support"):"insufficient Canvas/getImageData support":"insufficient worker support";var R}k=1,U.supported=g,U.notSupportedReason=o;var c={};return g.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0},U}();function H(g,o,c){const A=document.createElement(g);return o!=null&&(A.className=o),c&&c.appendChild(A),A}function q(g,o,c){const A=document.createElementNS("http://www.w3.org/2000/svg",g);for(const R of Object.keys(o))A.setAttributeNS(null,R,String(o[R]));return c&&c.appendChild(A),A}const J=typeof document<"u"?document.documentElement&&document.documentElement.style:null,re=J&&J.userSelect!==void 0?"userSelect":"WebkitUserSelect";let ce;function ye(){J&&re&&(ce=J[re],J[re]="none")}function he(){J&&re&&(J[re]=ce)}function _e(g){g.preventDefault(),g.stopPropagation(),window.removeEventListener("click",_e,!0)}function me(){window.addEventListener("click",_e,!0),window.setTimeout(()=>{window.removeEventListener("click",_e,!0)},0)}function Re(g,o){const c=g.getBoundingClientRect();return ie(g,c,o)}function be(g,o){const c=g.getBoundingClientRect(),A=[];for(let R=0;R<o.length;R++)A.push(ie(g,c,o[R]));return A}function De(g){return/firefox/i.test(navigator.userAgent)&&/macintosh/i.test(navigator.userAgent)&&g.button===2&&g.ctrlKey?0:g.button}function ie(g,o,c){const A=g.offsetWidth===o.width?1:g.offsetWidth/o.width;return new n.P((c.clientX-o.left)*A,(c.clientY-o.top)*A)}const ge="01",Me="NO_ACCESS_TOKEN";class ze{constructor(o,c,A){this._transformRequestFn=o,this._customAccessToken=c,this._silenceAuthErrors=!!A,this._createSkuToken()}_createSkuToken(){const o=function(){let c="";for(let A=0;A<10;A++)c+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ge,c].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=o.token,this._skuTokenExpiresAt=o.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(o,c){return this._transformRequestFn&&this._transformRequestFn(o,c)||{url:o}}normalizeStyleURL(o,c){if(!n.f(o))return o;const A=Ie(o);return A.params.push(`sdk=js-${w}`),A.path=`/styles/v1${A.path}`,this._makeAPIURL(A,this._customAccessToken||c)}normalizeGlyphsURL(o,c){if(!n.f(o))return o;const A=Ie(o);return A.path=`/fonts/v1${A.path}`,this._makeAPIURL(A,this._customAccessToken||c)}normalizeModelURL(o,c){if(!n.f(o))return o;const A=Ie(o);return A.path=`/models/v1${A.path}`,this._makeAPIURL(A,this._customAccessToken||c)}normalizeSourceURL(o,c,A,R){if(!n.f(o))return o;const C=Ie(o);return C.path=`/v4/${C.authority}.json`,C.params.push("secure"),A&&C.params.push(`language=${A}`),R&&C.params.push(`worldview=${R}`),this._makeAPIURL(C,this._customAccessToken||c)}normalizeIconsetURL(o,c){const A=Ie(o);return n.f(o)?(A.path=`/styles/v1${A.path}/iconset.pbf`,this._makeAPIURL(A,this._customAccessToken||c)):Ze(A)}normalizeSpriteURL(o,c,A,R){const C=Ie(o);return n.f(o)?(C.path=`/styles/v1${C.path}/sprite${c}${A}`,this._makeAPIURL(C,this._customAccessToken||R)):(C.path+=`${c}${A}`,Ze(C))}normalizeTileURL(o,c,A){if(this._isSkuTokenExpired()&&this._createSkuToken(),o&&!n.f(o))return o;const R=Ie(o);R.path=R.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${c||A&&R.authority!=="raster"&&A===512?"@2x":""}${n.m.supported?".webp":"$1"}`),R.authority==="raster"?R.path=`/${n.e.RASTER_URL_PREFIX}${R.path}`:R.authority==="rasterarrays"?R.path=`/${n.e.RASTERARRAYS_URL_PREFIX}${R.path}`:R.authority==="3dtiles"?R.path=`/${n.e.TILES3D_URL_PREFIX}${R.path}`:(R.path=R.path.replace(/^.+\/v4\//,"/"),R.path=`/${n.e.TILE_URL_VERSION}${R.path}`);const C=this._customAccessToken||function(E){for(const L of E){const j=L.match(/^access_token=(.*)$/);if(j)return j[1]}return null}(R.params)||n.e.ACCESS_TOKEN;return n.e.REQUIRE_ACCESS_TOKEN&&C&&this._skuToken&&R.params.push(`sku=${this._skuToken}`),this._makeAPIURL(R,C)}canonicalizeTileURL(o,c){const A=Ie(o);if(!A.path.match(/^(\/v4\/|\/(raster|rasterarrays)\/v1\/)/)||!A.path.match(/\.[\w]+$/))return o;let R="mapbox://";A.path.match(/^\/raster\/v1\//)?R+=`raster/${A.path.replace(`/${n.e.RASTER_URL_PREFIX}/`,"")}`:A.path.match(/^\/rasterarrays\/v1\//)?R+=`rasterarrays/${A.path.replace(`/${n.e.RASTERARRAYS_URL_PREFIX}/`,"")}`:R+=`tiles/${A.path.replace(`/${n.e.TILE_URL_VERSION}/`,"")}`;let C=A.params;return c&&(C=C.filter(E=>!E.match(/^access_token=/))),C.length&&(R+=`?${C.join("&")}`),R}canonicalizeTileset(o,c){const A=!!c&&n.f(c),R=[];for(const C of o.tiles||[])n.h(C)?R.push(this.canonicalizeTileURL(C,A)):R.push(C);return R}_makeAPIURL(o,c){const A="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",R=Ie(n.e.API_URL);if(o.protocol=R.protocol,o.authority=R.authority,o.protocol==="http"){const C=o.params.indexOf("secure");C>=0&&o.params.splice(C,1)}if(R.path!=="/"&&(o.path=`${R.path}${o.path}`),!n.e.REQUIRE_ACCESS_TOKEN)return Ze(o);if(c=c||n.e.ACCESS_TOKEN,!this._silenceAuthErrors){if(!c)throw new Error(`An API access token is required to use Mapbox GL. ${A}`);if(c[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${A}`)}return o.params=o.params.filter(C=>C.indexOf("access_token")===-1),o.params.push(`access_token=${c||""}`),Ze(o)}}const Le=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Ie(g){const o=g.match(Le);if(!o)throw new Error("Unable to parse URL object");return{protocol:o[1],authority:o[2],path:o[3]||"/",params:o[4]?o[4].split("&"):[]}}function Ze(g){const o=g.params.length?`?${g.params.join("&")}`:"";return`${g.protocol}://${g.authority}${g.path}${o}`}const ke="mapbox.eventData";function tt(g){if(!g)return null;const o=g.split(".");if(!o||o.length!==3)return null;try{return JSON.parse(n.j(o[1]))}catch{return null}}class Ue{constructor(o){this.type=o,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(o){const c=tt(n.e.ACCESS_TOKEN);let A="";return A=c&&c.u?n.k(c.u):n.e.ACCESS_TOKEN||"",o?`${ke}.${o}:${A}`:`${ke}:${A}`}fetchEventData(){const o=n.s("localStorage"),c=this.getStorageKey(),A=this.getStorageKey("uuid");if(o)try{const R=localStorage.getItem(c);R&&(this.eventData=JSON.parse(R));const C=localStorage.getItem(A);C&&(this.anonId=C)}catch{n.w("Unable to read from LocalStorage")}}saveEventData(){const o=n.s("localStorage"),c=this.getStorageKey(),A=this.getStorageKey("uuid"),R=this.anonId;if(o&&R)try{localStorage.setItem(A,R),Object.keys(this.eventData).length>=1&&localStorage.setItem(c,JSON.stringify(this.eventData))}catch{n.w("Unable to write to LocalStorage")}}processRequests(o){}postEvent(o,c,A,R){if(!n.e.EVENTS_URL)return;const C=Ie(n.e.EVENTS_URL);C.params.push(`access_token=${R||n.e.ACCESS_TOKEN||""}`);const E={event:this.type,created:new Date(o).toISOString()},L=c?n.l(E,c):E,j={url:Ze(C),headers:{"Content-Type":"text/plain"},body:JSON.stringify([L])};this.pendingRequest=n.p(j,$=>{this.pendingRequest=null,A($),this.saveEventData(),this.processRequests(R)})}queueRequest(o,c){this.queue.push(o),this.processRequests(c)}}const He=new class extends Ue{constructor(g){super("appUserTurnstile"),this._customAccessToken=g}postTurnstileEvent(g,o){n.e.EVENTS_URL&&n.e.ACCESS_TOKEN&&Array.isArray(g)&&g.some(c=>n.f(c)||n.h(c))&&this.queueRequest(Date.now(),o)}processRequests(g){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const o=tt(n.e.ACCESS_TOKEN),c=o?o.u:n.e.ACCESS_TOKEN;let A=c!==this.eventData.tokenU;n.v(this.anonId)||(this.anonId=n.u(),A=!0);const R=this.queue.shift();if(this.eventData.lastSuccess){const C=new Date(this.eventData.lastSuccess),E=new Date(R),L=(R-this.eventData.lastSuccess)/864e5;A=A||L>=1||L<-1||C.getDate()!==E.getDate()}else A=!0;A?this.postEvent(R,{sdkIdentifier:"mapbox-gl-js",sdkVersion:w,skuId:ge,"enabled.telemetry":!1,userId:this.anonId},C=>{C||(this.eventData.lastSuccess=R,this.eventData.tokenU=c)},g):this.processRequests()}},Ce=He.postTurnstileEvent.bind(He),Se=new class extends Ue{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(g,o,c,A){this.skuToken=o,this.errorCb=A,n.e.EVENTS_URL&&(c||n.e.ACCESS_TOKEN?this.queueRequest({id:g,timestamp:Date.now()},c):this.errorCb(new Error(Me)))}processRequests(g){if(this.pendingRequest||this.queue.length===0)return;const{id:o,timestamp:c}=this.queue.shift();o&&this.success[o]||(this.anonId||this.fetchEventData(),n.v(this.anonId)||(this.anonId=n.u()),this.postEvent(c,{sdkIdentifier:"mapbox-gl-js",sdkVersion:w,skuId:ge,skuToken:this.skuToken,userId:this.anonId},A=>{A?this.errorCb(A):o&&(this.success[o]=!0)},g))}remove(){this.errorCb=null}},$e=Se.postMapLoadEvent.bind(Se),ht=new class extends Ue{constructor(){super("style.load"),this.eventIdPerMapInstanceMap=new Map,this.mapInstanceIdMap=new WeakMap}getMapInstanceId(g){let o=this.mapInstanceIdMap.get(g);return o||(o=n.u(),this.mapInstanceIdMap.set(g,o)),o}getEventId(g){const o=this.eventIdPerMapInstanceMap.get(g)||0;return this.eventIdPerMapInstanceMap.set(g,o+1),o}postStyleLoadEvent(g,o){const{map:c,style:A,importedStyles:R}=o;if(!n.e.EVENTS_URL||!g&&!n.e.ACCESS_TOKEN)return;const C=this.getMapInstanceId(c),E={mapInstanceId:C,eventId:this.getEventId(C),style:A};R.length&&(E.importedStyles=R),this.queueRequest({timestamp:Date.now(),payload:E},g)}processRequests(g){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:o,payload:c}=this.queue.shift();this.postEvent(o,c,()=>{},g)}},ft=ht.postStyleLoadEvent.bind(ht),ut=new class extends Ue{constructor(){super("gljs.performance")}postPerformanceEvent(g,o){n.e.EVENTS_URL&&(g||n.e.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:o},g)}processRequests(g){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:o,performanceData:c}=this.queue.shift(),A=function(R){const C=performance.getEntriesByType("resource"),E=performance.getEntriesByType("mark"),L=function(de){const Te={};if(de){for(const ve in de)if(ve!=="other")for(const Ee of de[ve]){const Ve=`${ve}ResolveRangeMin`,Be=`${ve}ResolveRangeMax`,et=`${ve}RequestCount`,Je=`${ve}RequestCachedCount`;Te[Ve]=Math.min(Te[Ve]||1/0,Ee.startTime),Te[Be]=Math.max(Te[Be]||-1/0,Ee.responseEnd);const dt=it=>{Te[it]===void 0&&(Te[it]=0),++Te[it]};Ee.transferSize!==void 0&&Ee.transferSize===0&&dt(Je),dt(et)}}return Te}(function(de,Te){const ve={};if(de)for(const Ee of de){const Ve=Te(Ee);ve[Ve]===void 0&&(ve[Ve]=[]),ve[Ve].push(Ee)}return ve}(C,z)),j=window.devicePixelRatio,$=navigator.connection||navigator.mozConnection||navigator.webkitConnection,W=$?$.effectiveType:void 0,te={counters:[],metadata:[],attributes:[]},ae=(de,Te,ve)=>{ve!=null&&de.push({name:Te,value:ve.toString()})};for(const de in L)ae(te.counters,de,L[de]);if(R.interactionRange[0]!==1/0&&R.interactionRange[1]!==-1/0&&(ae(te.counters,"interactionRangeMin",R.interactionRange[0]),ae(te.counters,"interactionRangeMax",R.interactionRange[1])),E)for(const de of Object.keys(T)){const Te=T[de],ve=E.find(Ee=>Ee.name===Te);ve&&ae(te.counters,Te,ve.startTime)}return ae(te.counters,"visibilityHidden",R.visibilityHidden),ae(te.attributes,"style",function(de){if(de)for(const Te of de){const ve=Te.name.split("?")[0];if(n.i(ve)){const Ee=ve.split("/").slice(-2);if(Ee.length===2)return`mapbox://styles/${Ee[0]}/${Ee[1]}`}}}(C)),ae(te.attributes,"terrainEnabled",R.terrainEnabled?"true":"false"),ae(te.attributes,"fogEnabled",R.fogEnabled?"true":"false"),ae(te.attributes,"projection",R.projection),ae(te.attributes,"zoom",R.zoom),ae(te.metadata,"devicePixelRatio",j),ae(te.metadata,"connectionEffectiveType",W),ae(te.metadata,"navigatorUserAgent",navigator.userAgent),ae(te.metadata,"screenWidth",window.screen.width),ae(te.metadata,"screenHeight",window.screen.height),ae(te.metadata,"windowWidth",window.innerWidth),ae(te.metadata,"windowHeight",window.innerHeight),ae(te.metadata,"mapWidth",R.width/j),ae(te.metadata,"mapHeight",R.height/j),ae(te.metadata,"webglRenderer",R.renderer),ae(te.metadata,"webglVendor",R.vendor),ae(te.metadata,"sdkVersion",w),ae(te.metadata,"sdkIdentifier","mapbox-gl-js"),te}(c);for(const R of A.metadata);for(const R of A.counters);for(const R of A.attributes);this.postEvent(o,A,()=>{},g)}},Rt=ut.postPerformanceEvent.bind(ut),We=new class extends Ue{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(g,o,c,A){if(!n.e.API_URL||!n.e.SESSION_PATH)return;const R=Ie(n.e.API_URL+n.e.SESSION_PATH);R.params.push(`sku=${o||""}`),R.params.push(`access_token=${A||n.e.ACCESS_TOKEN||""}`);const C={url:Ze(R),headers:{"Content-Type":"text/plain"}};this.pendingRequest=n.g(C,E=>{this.pendingRequest=null,c(E),this.saveEventData(),this.processRequests(A)})}getSessionAPI(g,o,c,A){this.skuToken=o,this.errorCb=A,n.e.SESSION_PATH&&n.e.API_URL&&(c||n.e.ACCESS_TOKEN?this.queueRequest({id:g,timestamp:Date.now()},c):this.errorCb(new Error(Me)))}processRequests(g){if(this.pendingRequest||this.queue.length===0)return;const{id:o,timestamp:c}=this.queue.shift();o&&this.success[o]||this.getSession(c,this.skuToken,A=>{A?this.errorCb(A):o&&(this.success[o]=!0)},g)}remove(){this.errorCb=null}},Ae=We.getSessionAPI.bind(We),qt=new Set;function Gt(g,o){o?qt.add(g):qt.delete(g)}class Aa{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages=new Set}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(o,c){this._updatedSourceCaches[o]=c,this.setDirty()}discardSourceCacheUpdate(o){delete this._updatedSourceCaches[o]}updateLayer(o){const c=o.scope;this._updatedLayers[c]=this._updatedLayers[c]||new Set,this._updatedLayers[c].add(o.id),this.setDirty()}removeLayer(o){const c=o.scope;this._removedLayers[c]=this._removedLayers[c]||{},this._updatedLayers[c]=this._updatedLayers[c]||new Set,this._removedLayers[c][o.id]=o,this._updatedLayers[c].delete(o.id),this._updatedPaintProps.delete(o.fqid),this.setDirty()}getRemovedLayer(o){return this._removedLayers[o.scope]?this._removedLayers[o.scope][o.id]:null}discardLayerRemoval(o){this._removedLayers[o.scope]&&delete this._removedLayers[o.scope][o.id]}getLayerUpdatesByScope(){const o={};for(const c in this._updatedLayers)o[c]=o[c]||{},o[c].updatedIds=Array.from(this._updatedLayers[c].values());for(const c in this._removedLayers)o[c]=o[c]||{},o[c].removedIds=Object.keys(this._removedLayers[c]);return o}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(o){this._updatedPaintProps.add(o.fqid),this.setDirty()}getUpdatedImages(){return Array.from(this._updatedImages.values())}updateImage(o){this._updatedImages.add(n.I.toString(o)),this.setDirty()}resetUpdatedImages(){this._updatedImages.clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages.clear()}}function It(g){const{userImage:o}=g;return!!(o&&o.render&&o.render())&&(g.data.replace(new Uint8Array(o.data.buffer)),!0)}class ta extends n.E{constructor(o){super(),this._images={},this._iconsets={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded={},this.requestors=[],this.patterns={},this.patternsInFlight=new Set,this.atlasImage={},this.atlasTexture={},this.dirty=!0,this.spriteFormat=o,o!=="raster"&&n.t()&&(this.imageRasterizerDispatcher=new n.D(n.x(),this,"Image Rasterizer Worker",1))}get imageRasterizer(){return this._imageRasterizer||(this._imageRasterizer=new n.y),this._imageRasterizer}createScope(o){this._images[o]={},this._iconsets[o]={},this.loaded[o]=!1,this.updatedImages[o]=new Set,this.patterns[o]={},this.callbackDispatchedThisFrame[o]=new Set,this.atlasImage[o]=new n.r({width:1,height:1})}createIconset(o,c){this._iconsets[o][c]={}}isLoaded(){for(const o in this.loaded)if(!this.loaded[o])return!1;return!0}setLoaded(o,c){if(this.loaded[c]!==o&&(this.loaded[c]=o,o)){for(const{ids:A,callback:R}of this.requestors)this._notify(A,c,R);this.requestors=[]}}hasImage(o,c){return!!this.getImage(o,c)}getImage(o,c){return(o.iconsetId?this._iconsets[c][o.iconsetId]:this._images[c])[o.name]}addImage(o,c,A){const R=o.iconsetId?this._iconsets[c][o.iconsetId]:this._images[c];this._validate(o,A)&&(R[o.name]=A)}_validate(o,c){let A=!0;return this._validateStretch(c.stretchX,c.data&&c.data.width)||(this.fire(new n.z(new Error(`Image "${o.name}" has invalid "stretchX" value`))),A=!1),this._validateStretch(c.stretchY,c.data&&c.data.height)||(this.fire(new n.z(new Error(`Image "${o.name}" has invalid "stretchY" value`))),A=!1),this._validateContent(c.content,c)||(this.fire(new n.z(new Error(`Image "${o.name}" has invalid "content" value`))),A=!1),A}_validateStretch(o,c){if(!o)return!0;let A=0;for(const R of o){if(R[0]<A||R[1]<R[0]||c<R[1])return!1;A=R[1]}return!0}_validateContent(o,c){return o?o.length!==4||!c.usvg&&(o[0]<0||c.data.width<o[0]||o[1]<0||c.data.height<o[1]||o[2]<0||c.data.width<o[2]||o[3]<0||c.data.height<o[3])?!1:!(o[2]<o[0]||o[3]<o[1]):!0}updateImage(o,c,A){const R=o.iconsetId?this._iconsets[c][o.iconsetId]:this._images[c];A.version=R[o.name].version+1,R[o.name]=A,this.updatedImages[c].add(o),this.removeFromImageRasterizerCache(o,c)}clearUpdatedImages(o){this.updatedImages[o].clear()}removeFromImageRasterizerCache(o,c){if(this.spriteFormat!=="raster")if(n.t()){const A={imageIds:[o],scope:c};this.imageRasterizerDispatcher.getActor().send("removeRasterizedImages",A)}else this.imageRasterizer.removeImagesFromCacheByIds([o],c)}removeImage(o,c){const A=o.iconsetId?this._iconsets[c][o.iconsetId]:this._images[c],R=A[o.name];delete A[o.name],delete this.patterns[c][o.name],this.removeFromImageRasterizerCache(o,c),R.userImage&&R.userImage.onRemove&&R.userImage.onRemove()}listImages(o){const c=[];for(const A of Object.keys(this._images[o]))c.push(new n.I(A));for(const A in this._iconsets[o])for(const R of Object.keys(this._iconsets[o][A]))c.push(new n.I({name:R,iconsetId:A}));return c}getImages(o,c,A){let R=!0;const C=!!this.loaded[c];if(!C)for(const E of o)(E.iconsetId?this._iconsets[c][E.iconsetId]:this._images[c])[E.name]||(R=!1);C||R?this._notify(o,c,A):this.requestors.push({ids:o,scope:c,callback:A})}rasterizeImages({scope:o,tasks:c},A){const R=new Map;for(const[C,E]of c.entries()){const L=this.getImage(E.id,o);L&&R.set(C,{image:L,imageVariant:E})}this._rasterizeImages(o,R,A)}_rasterizeImages(o,c,A){if(n.t())this.imageRasterizerDispatcher.getActor().send("rasterizeImages",{tasks:c,scope:o},A);else{const R=new Map;for(const[C,{image:E,imageVariant:L}]of c.entries())R.set(C,this.imageRasterizer.rasterize(L,E,o,0));A(void 0,R)}}getUpdatedImages(o){return this.updatedImages[o]||new Set}_notify(o,c,A){const R=new Map;for(const C of o){C.iconsetId&&(this._iconsets[c][C.iconsetId]=this._iconsets[c][C.iconsetId]||{});const E=(C.iconsetId?this._iconsets[c][C.iconsetId]:this._images[c])[C.name];if(!E){if(C.iconsetId)continue;n.w(`Image "${C.name}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`),this.fire(new n.A("styleimagemissing",{id:C.name}));continue}const L={data:E.usvg?null:E.data.clone(),pixelRatio:E.pixelRatio,sdf:E.sdf,usvg:E.usvg,version:E.version,stretchX:E.stretchX,stretchY:E.stretchY,content:E.content,hasRenderCallback:!!(E.userImage&&E.userImage.render)};E.usvg&&Object.assign(L,{width:E.icon.usvg_tree.width,height:E.icon.usvg_tree.height}),R.set(n.I.toString(C),L)}A(null,R)}getPixelSize(o){const{width:c,height:A}=this.atlasImage[o];return{width:c,height:A}}getPattern(o,c,A){const R=this.patterns[c][o.name],C=this.getImage(o,c);if(!C)return null;if(R){if(R.position.version===C.version)return R.position;R.position.version=C.version}else{if(C.usvg&&!C.data){const E=this.getPatternInFlightId(o.toString(),c);if(this.patternsInFlight.has(E))return null;this.patternsInFlight.add(E);const L=new n.B(o).scaleSelf(n.q.devicePixelRatio),j=new Map([[L.toString(),{image:C,imageVariant:L}]]);return this._rasterizeImages(c,j,($,W)=>this.storePatternImage(L,c,C,A,W)),null}this.storePattern(o,c,C)}return this._updatePatternAtlas(c,A),this.patterns[c][o.name].position}getPatternInFlightId(o,c){return n.C(o,c)}hasPatternsInFlight(){return this.patternsInFlight.size!==0}storePatternImage(o,c,A,R,C){const E=o.toString(),L=C?C.get(E):void 0;L&&(A.data=L,this.storePattern(o.id,c,A),this._updatePatternAtlas(c,R),this.patternsInFlight.delete(this.getPatternInFlightId(o.id.toString(),c)))}storePattern(o,c,A){const R={w:A.data.width+2*n.F,h:A.data.height+2*n.F,x:0,y:0},C=new n.G(R,A,n.F);this.patterns[c][o.name]={bin:R,position:C}}bind(o,c){const A=o.gl;let R=this.atlasTexture[c];R?this.dirty&&(R.update(this.atlasImage[c]),this.dirty=!1):(R=new n.T(o,this.atlasImage[c],A.RGBA8),this.atlasTexture[c]=R),R.bind(A.LINEAR,A.CLAMP_TO_EDGE)}_updatePatternAtlas(o,c){const A=[];for(const L in this.patterns[o])A.push(this.patterns[o][L].bin);const{w:R,h:C}=n.H(A),E=this.atlasImage[o];E.resize({width:R||1,height:C||1});for(const L in this.patterns[o]){const{bin:j,position:$}=this.patterns[o][L];let W=$.padding;const te=j.x+W,ae=j.y+W,de=this._images[o][L].data,Te=de.width,ve=de.height;W=W>1?W-1:W,n.r.copy(de,E,{x:0,y:0},{x:te,y:ae},{width:Te,height:ve},c),n.r.copy(de,E,{x:0,y:ve-W},{x:te,y:ae-W},{width:Te,height:W},c),n.r.copy(de,E,{x:0,y:0},{x:te,y:ae+ve},{width:Te,height:W},c),n.r.copy(de,E,{x:Te-W,y:0},{x:te-W,y:ae},{width:W,height:ve},c),n.r.copy(de,E,{x:0,y:0},{x:te+Te,y:ae},{width:W,height:ve},c),n.r.copy(de,E,{x:Te-W,y:ve-W},{x:te-W,y:ae-W},{width:W,height:W},c),n.r.copy(de,E,{x:0,y:ve-W},{x:te+Te,y:ae-W},{width:W,height:W},c),n.r.copy(de,E,{x:0,y:0},{x:te+Te,y:ae+ve},{width:W,height:W},c),n.r.copy(de,E,{x:Te-W,y:0},{x:te-W,y:ae+ve},{width:W,height:W},c)}this.dirty=!0}beginFrame(){for(const o in this._images)this.callbackDispatchedThisFrame[o]=new Set}dispatchRenderCallbacks(o,c){for(const A of o){if(this.callbackDispatchedThisFrame[c].has(A.toString()))continue;this.callbackDispatchedThisFrame[c].add(A.toString());const R=(A.iconsetId?this._iconsets[c][A.iconsetId]:this._images[c])[A.name];It(R)&&this.updateImage(A,c,R)}}}function vt(g){const o=g.key,c=g.value,A=g.valueSpec||{},R=g.objectElementValidators||{},C=g.style,E=g.styleSpec;let L=[];const j=n.K(c);if(j!=="object")return[new n.V(o,c,`object expected, ${j} found`)];for(const $ in c){const W=$.split(".")[0];let te;R[W]?te=R[W]:A[W]?te=Er:R["*"]?te=R["*"]:A["*"]&&(te=Er),te?L=L.concat(te({key:(o&&`${o}.`)+$,value:c[$],valueSpec:A[W]||A["*"],style:C,styleSpec:E,object:c,objectKey:$},c)):L.push(new n.J(o,c[$],`unknown property "${$}"`))}for(const $ in A)R[$]||A[$].required&&A[$].default===void 0&&c[$]===void 0&&L.push(new n.V(o,c,`missing required property "${$}"`));return L}function or(g){const o=g.value,c=g.valueSpec,A=g.style,R=g.styleSpec,C=g.key,E=g.arrayElementValidator||Er;if(n.K(o)!=="array")return[new n.V(C,o,`array expected, ${n.K(o)} found`)];if(c.length&&o.length!==c.length)return[new n.V(C,o,`array length ${c.length} expected, length ${o.length} found`)];if(c["min-length"]&&o.length<c["min-length"])return[new n.V(C,o,`array length at least ${c["min-length"]} expected, length ${o.length} found`)];let L={type:c.value,values:c.values,minimum:c.minimum,maximum:c.maximum,function:void 0};R.$version<7&&(L.function=c.function),n.K(c.value)==="object"&&(L=c.value);let j=[];for(let $=0;$<o.length;$++)j=j.concat(E({array:o,arrayIndex:$,value:o[$],valueSpec:L,style:A,styleSpec:R,key:`${C}[${$}]`},!0));return j}function Na(g){const o=g.key,c=g.value,A=g.valueSpec;let R=n.K(c);if(R==="number"&&c!=c&&(R="NaN"),R!=="number")return[new n.V(o,c,`number expected, ${R} found`)];if("minimum"in A){let C=A.minimum;if(n.K(A.minimum)==="array"&&(C=A.minimum[g.arrayIndex]),c<C)return[new n.V(o,c,`${c} is less than the minimum value ${C}`)]}if("maximum"in A){let C=A.maximum;if(n.K(A.maximum)==="array"&&(C=A.maximum[g.arrayIndex]),c>C)return[new n.V(o,c,`${c} is greater than the maximum value ${C}`)]}return[]}function za(g){const o=g.valueSpec,c=n.M(g.value.type);let A,R,C,E={};const L=c!=="categorical"&&g.value.property===void 0,j=!L,$=n.K(g.value.stops)==="array"&&n.K(g.value.stops[0])==="array"&&n.K(g.value.stops[0][0])==="object",W=vt({key:g.key,value:g.value,valueSpec:g.styleSpec.function,style:g.style,styleSpec:g.styleSpec,objectElementValidators:{stops:function(de){if(c==="identity")return[new n.V(de.key,de.value,'identity function may not have a "stops" property')];let Te=[];const ve=de.value;return Te=Te.concat(or({key:de.key,value:ve,valueSpec:de.valueSpec,style:de.style,styleSpec:de.styleSpec,arrayElementValidator:te})),n.K(ve)==="array"&&ve.length===0&&Te.push(new n.V(de.key,ve,"array must have at least one stop")),Te},default:function(de){return Er({key:de.key,value:de.value,valueSpec:o,style:de.style,styleSpec:de.styleSpec})}}});return c==="identity"&&L&&W.push(new n.V(g.key,g.value,'missing required property "property"')),c==="identity"||g.value.stops||W.push(new n.V(g.key,g.value,'missing required property "stops"')),c==="exponential"&&g.valueSpec.expression&&!n.N(g.valueSpec)&&W.push(new n.V(g.key,g.value,"exponential functions not supported")),g.styleSpec.$version>=8&&(j&&!n.O(g.valueSpec)?W.push(new n.V(g.key,g.value,"property functions not supported")):L&&!n.Q(g.valueSpec)&&W.push(new n.V(g.key,g.value,"zoom functions not supported"))),c!=="categorical"&&!$||g.value.property!==void 0||W.push(new n.V(g.key,g.value,'"property" property is required')),W;function te(de){let Te=[];const ve=de.value,Ee=de.key;if(n.K(ve)!=="array")return[new n.V(Ee,ve,`array expected, ${n.K(ve)} found`)];if(ve.length!==2)return[new n.V(Ee,ve,`array length 2 expected, length ${ve.length} found`)];if($){if(n.K(ve[0])!=="object")return[new n.V(Ee,ve,`object expected, ${n.K(ve[0])} found`)];if(ve[0].zoom===void 0)return[new n.V(Ee,ve,"object stop key must have zoom")];if(ve[0].value===void 0)return[new n.V(Ee,ve,"object stop key must have value")];const Ve=n.M(ve[0].zoom);if(typeof Ve!="number")return[new n.V(Ee,ve[0].zoom,"stop zoom values must be numbers")];if(C&&C>Ve)return[new n.V(Ee,ve[0].zoom,"stop zoom values must appear in ascending order")];Ve!==C&&(C=Ve,R=void 0,E={}),Te=Te.concat(vt({key:`${Ee}[0]`,value:ve[0],valueSpec:{zoom:{}},style:de.style,styleSpec:de.styleSpec,objectElementValidators:{zoom:Na,value:ae}}))}else Te=Te.concat(ae({key:`${Ee}[0]`,value:ve[0],style:de.style,styleSpec:de.styleSpec},ve));return n.S(n.U(ve[1]))?Te.concat([new n.V(`${Ee}[1]`,ve[1],"expressions are not allowed in function stops.")]):Te.concat(Er({key:`${Ee}[1]`,value:ve[1],valueSpec:o,style:de.style,styleSpec:de.styleSpec}))}function ae(de,Te){const ve=n.K(de.value),Ee=n.M(de.value),Ve=de.value!==null?de.value:Te;if(A){if(ve!==A)return[new n.V(de.key,Ve,`${ve} stop domain type must match previous stop domain type ${A}`)]}else A=ve;if(ve!=="number"&&ve!=="string"&&ve!=="boolean"&&typeof Ee!="number"&&typeof Ee!="string"&&typeof Ee!="boolean")return[new n.V(de.key,Ve,"stop domain value must be a number, string, or boolean")];if(ve!=="number"&&c!=="categorical"){let Be=`number expected, ${ve} found`;return n.O(o)&&c===void 0&&(Be+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new n.V(de.key,Ve,Be)]}return c!=="categorical"||ve!=="number"||typeof Ee=="number"&&isFinite(Ee)&&Math.floor(Ee)===Ee?c!=="categorical"&&ve==="number"&&typeof Ee=="number"&&typeof R=="number"&&R!==void 0&&Ee<R?[new n.V(de.key,Ve,"stop domain values must appear in ascending order")]:(R=Ee,c==="categorical"&&Ee in E?[new n.V(de.key,Ve,"stop domain values must be unique")]:(E[Ee]=!0,[])):[new n.V(de.key,Ve,`integer expected, found ${String(Ee)}`)]}}function er(g){const o=(g.expressionContext==="property"?n.W:n.X)(n.U(g.value),g.valueSpec);if(o.result==="error")return o.value.map(A=>new n.V(`${g.key}${A.key}`,g.value,A.message));const c=o.value.expression||o.value._styleExpression.expression;if(g.expressionContext==="property"&&g.propertyKey==="text-font"&&!c.outputDefined())return[new n.V(g.key,g.value,`Invalid data expression for "${g.propertyKey}". Output values must be contained as literals within the expression.`)];if(g.expressionContext==="property"&&g.propertyType==="layout"&&!n.Y(c))return[new n.V(g.key,g.value,'"feature-state" data expressions are not supported with layout properties.')];if(g.expressionContext==="filter")return dr(c,g);if(g.expressionContext&&g.expressionContext.indexOf("cluster")===0){if(!n.Z(c,["zoom","feature-state"]))return[new n.V(g.key,g.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(g.expressionContext==="cluster-initial"&&!n._(c))return[new n.V(g.key,g.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function dr(g,o){const c=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(o.valueSpec&&o.valueSpec.expression)for(const R of o.valueSpec.expression.parameters)c.delete(R);if(c.size===0)return[];const A=[];return g instanceof n.$&&c.has(g.name)?[new n.V(o.key,o.value,`["${g.name}"] expression is not supported in a filter for a ${o.object.type} layer with id: ${o.object.id}`)]:(g.eachChild(R=>{A.push(...dr(R,o))}),A)}function cr(g){const o=g.key,c=g.value,A=g.valueSpec,R=[];return Array.isArray(A.values)?A.values.indexOf(n.M(c))===-1&&R.push(new n.V(o,c,`expected one of [${A.values.join(", ")}], ${JSON.stringify(c)} found`)):Object.keys(A.values).indexOf(n.M(c))===-1&&R.push(new n.V(o,c,`expected one of [${Object.keys(A.values).join(", ")}], ${JSON.stringify(c)} found`)),R}function Pr(g){return n.a1(n.U(g.value))?er(n.L({},g,{expressionContext:"filter",valueSpec:g.styleSpec[`filter_${g.layerType||"fill"}`]})):ka(g)}function ka(g){const o=g.value,c=g.key;if(n.K(o)!=="array")return[new n.V(c,o,`array expected, ${n.K(o)} found`)];const A=g.styleSpec;let R,C=[];if(o.length<1)return[new n.V(c,o,"filter array must have at least 1 element")];switch(C=C.concat(cr({key:`${c}[0]`,value:o[0],valueSpec:A.filter_operator,style:g.style,styleSpec:g.styleSpec})),n.M(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&n.M(o[1])==="$type"&&C.push(new n.V(c,o,`"$type" cannot be use with operator "${o[0]}"`));case"==":case"!=":o.length!==3&&C.push(new n.V(c,o,`filter array for operator "${o[0]}" must have 3 elements`));case"in":case"!in":o.length>=2&&(R=n.K(o[1]),R!=="string"&&C.push(new n.V(`${c}[1]`,o[1],`string expected, ${R} found`)));for(let E=2;E<o.length;E++)R=n.K(o[E]),n.M(o[1])==="$type"?C=C.concat(cr({key:`${c}[${E}]`,value:o[E],valueSpec:A.geometry_type,style:g.style,styleSpec:g.styleSpec})):R!=="string"&&R!=="number"&&R!=="boolean"&&C.push(new n.V(`${c}[${E}]`,o[E],`string, number, or boolean expected, ${R} found`));break;case"any":case"all":case"none":for(let E=1;E<o.length;E++)C=C.concat(ka({key:`${c}[${E}]`,value:o[E],style:g.style,styleSpec:g.styleSpec}));break;case"has":case"!has":R=n.K(o[1]),o.length!==2?C.push(new n.V(c,o,`filter array for "${o[0]}" operator must have 2 elements`)):R!=="string"&&C.push(new n.V(`${c}[1]`,o[1],`string expected, ${R} found`))}return C}function jr(g,o){const c=g.key,A=g.style,R=g.layer,C=g.styleSpec,E=g.value,L=g.objectKey,j=C[`${o}_${g.layerType}`];if(!j)return[];const $=L.match(/^(.*)-use-theme$/);if(o==="paint"&&$&&j[$[1]])return n.S(E)?[].concat(Er({key:g.key,value:E,valueSpec:{type:"string",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},style:A,styleSpec:C,expressionContext:"property",propertyType:o,propertyKey:L})):Er({key:c,value:E,valueSpec:{type:"string"},style:A,styleSpec:C});const W=L.match(/^(.*)-transition$/);if(o==="paint"&&W&&j[W[1]]&&j[W[1]].transition)return Er({key:c,value:E,valueSpec:C.transition,style:A,styleSpec:C});const te=g.valueSpec||j[L];if(!te)return[new n.J(c,E,`unknown property "${L}"`)];let ae;if(n.K(E)==="string"&&n.O(te)&&!te.tokens&&(ae=/^{([^}]+)}$/.exec(E))){const Te=`\`{ "type": "identity", "property": ${ae?JSON.stringify(ae[1]):'"_"'} }\``;return[new n.V(c,E,`"${L}" does not support interpolation syntax
Use an identity property function instead: ${Te}.`)]}const de=[];if(g.layerType==="symbol")L!=="text-field"||!A||A.glyphs||A.imports||de.push(new n.V(c,E,'use of "text-field" requires a style "glyphs" property')),L==="text-font"&&n.a2(n.U(E))&&n.M(E.type)==="identity"&&de.push(new n.V(c,E,'"text-font" does not support identity functions'));else if(g.layerType==="model"&&o==="paint"&&R&&R.layout&&R.layout.hasOwnProperty("model-id")&&n.O(te)&&(n.a3(te)||n.Q(te))){const Te=n.W(n.U(E),te),ve=Te.value.expression||Te.value._styleExpression.expression;ve&&!n.Z(ve,["measure-light"])&&(L==="model-emissive-strength"&&n._(ve)&&n.Y(ve)||de.push(new n.V(c,E,`${L} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`)))}return de.concat(Er({key:g.key,value:E,valueSpec:te,style:A,styleSpec:C,expressionContext:"property",propertyType:o,propertyKey:L}))}function pn(g){return jr(g,"paint")}function Dn(g){return jr(g,"layout")}function Rn(g){let o=[];const c=g.value,A=g.key,R=g.style,C=g.styleSpec;c.type||c.ref||o.push(new n.V(A,c,'either "type" or "ref" is required'));let E=n.M(c.type);const L=n.M(c.ref);if(c.id){const j=n.M(c.id);for(let $=0;$<g.arrayIndex;$++){const W=R.layers[$];n.M(W.id)===j&&o.push(new n.V(A,c.id,`duplicate layer id "${c.id}", previously used at line ${W.id.__line__}`))}}if("ref"in c){let j;["type","source","source-layer","filter","layout"].forEach($=>{$ in c&&o.push(new n.V(A,c[$],`"${$}" is prohibited for ref layers`))}),R.layers.forEach($=>{n.M($.id)===L&&(j=$)}),j?j.ref?o.push(new n.V(A,c.ref,"ref cannot reference another ref layer")):E=n.M(j.type):typeof L=="string"&&o.push(new n.V(A,c.ref,`ref layer "${L}" not found`))}else if(E!=="background"&&E!=="sky"&&E!=="slot")if(c.source){const j=R.sources&&R.sources[c.source],$=j&&n.M(j.type);j?$==="vector"&&E==="raster"?o.push(new n.V(A,c.source,`layer "${c.id}" requires a raster source`)):$==="raster"&&E!=="raster"?o.push(new n.V(A,c.source,`layer "${c.id}" requires a vector source`)):$!=="vector"||c["source-layer"]?$==="raster-dem"&&E!=="hillshade"?o.push(new n.V(A,c.source,"raster-dem source can only be used with layer type 'hillshade'.")):$!=="raster-array"||["raster","raster-particle"].includes(E)?E!=="line"||!c.paint||!c.paint["line-gradient"]&&!c.paint["line-trim-offset"]||$==="geojson"&&j.lineMetrics?E==="raster-particle"&&$!=="raster-array"&&o.push(new n.V(A,c.source,`layer "${c.id}" requires a 'raster-array' source.`)):o.push(new n.V(A,c,`layer "${c.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):o.push(new n.V(A,c.source,"raster-array source can only be used with layer type 'raster'.")):o.push(new n.V(A,c,`layer "${c.id}" must specify a "source-layer"`)):o.push(new n.V(A,c.source,`source "${c.source}" not found`))}else o.push(new n.V(A,c,'missing required property "source"'));return o=o.concat(vt({key:A,value:c,valueSpec:C.layer,style:g.style,styleSpec:g.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Er({key:`${A}.type`,value:c.type,valueSpec:C.layer.type,style:g.style,styleSpec:g.styleSpec,object:c,objectKey:"type"}),filter:j=>Pr(n.L({layerType:E},j)),layout:j=>vt({layer:c,key:j.key,value:j.value,valueSpec:{},style:j.style,styleSpec:j.styleSpec,objectElementValidators:{"*":$=>Dn(n.L({layerType:E},$))}}),paint:j=>vt({layer:c,key:j.key,value:j.value,valueSpec:{},style:j.style,styleSpec:j.styleSpec,objectElementValidators:{"*":$=>pn(n.L({layerType:E,layer:c},$))}})}})),o}function wa(g){const o=g.value,c=g.key,A=n.K(o);return A!=="string"?[new n.V(c,o,`string expected, ${A} found`)]:[]}const Wa={promoteId:function g({key:o,value:c}){if(n.K(c)==="string")return wa({key:o,value:c});if(Array.isArray(c)){const A=[],R=n.U(c),C=n.X(R);return C.result==="error"&&C.value.forEach(E=>{A.push(new n.V(`${o}${E.key}`,null,`${E.message}`))}),n.Z(C.value.expression,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])||A.push(new n.V(`${o}`,null,"promoteId expression should be only feature dependent")),A}{const A=[];for(const R in c)A.push(...g({key:`${o}.${R}`,value:c[R]}));return A}}};function ca(g){const o=g.value,c=g.key,A=g.styleSpec,R=g.style;if(!o.type)return[new n.V(c,o,'"type" is required')];const C=n.M(o.type);let E=[];switch(["vector","raster","raster-dem","raster-array"].includes(C)&&(o.url||o.tiles||E.push(new n.J(c,o,'Either "url" or "tiles" is required.'))),C){case"vector":case"raster":case"raster-dem":case"raster-array":return E=E.concat(vt({key:c,value:o,valueSpec:A[`source_${C.replace("-","_")}`],style:g.style,styleSpec:A,objectElementValidators:Wa})),E;case"geojson":if(E=vt({key:c,value:o,valueSpec:A.source_geojson,style:R,styleSpec:A,objectElementValidators:Wa}),o.cluster)for(const L in o.clusterProperties){const[j,$]=o.clusterProperties[L],W=typeof j=="string"?[j,["accumulated"],["get",L]]:j;E.push(...er({key:`${c}.${L}.map`,value:$,expressionContext:"cluster-map"})),E.push(...er({key:`${c}.${L}.reduce`,value:W,expressionContext:"cluster-reduce"}))}return E;case"video":return vt({key:c,value:o,valueSpec:A.source_video,style:R,styleSpec:A});case"image":return vt({key:c,value:o,valueSpec:A.source_image,style:R,styleSpec:A});case"canvas":return[new n.V(c,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return cr({key:`${c}.type`,value:o.type,valueSpec:{values:Qa(A)}})}}function Qa(g){return g.source.reduce((o,c)=>{const A=g[c];return A.type.type==="enum"&&(o=o.concat(Object.keys(A.type.values))),o},[])}function gr(g){const o=g.value,c=g.styleSpec,A=c.light,R=g.style;let C=[];const E=n.K(o);if(o===void 0)return C;if(E!=="object")return C=C.concat([new n.V("light",o,`object expected, ${E} found`)]),C;for(const L in o){const j=L.match(/^(.*)-transition$/),$=L.match(/^(.*)-use-theme$/);C=C.concat($&&A[$[1]]?Er({key:L,value:o[L],valueSpec:{type:"string"},style:R,styleSpec:c}):j&&A[j[1]]&&A[j[1]].transition?Er({key:L,value:o[L],valueSpec:c.transition,style:R,styleSpec:c}):A[L]?Er({key:L,value:o[L],valueSpec:A[L],style:R,styleSpec:c}):[new n.V(L,o[L],`unknown property "${L}"`)])}return C}function qn(g){const o=g.value;let c=[];if(!o)return c;const A=n.K(o);if(A!=="object")return c=c.concat([new n.V("light-3d",o,`object expected, ${A} found`)]),c;const R=g.styleSpec,C=R["light-3d"],E=g.key,L=g.style,j=g.style.lights;for(const te of["type","id"])if(!(te in o))return c=c.concat([new n.V("light-3d",o,`missing property ${te} on light`)]),c;if(o.type&&j)for(let te=0;te<g.arrayIndex;te++){const ae=n.M(o.type),de=j[te];n.M(de.type)===ae&&c.push(new n.V(E,o.id,`duplicate light type "${o.type}", previously defined at line ${de.id.__line__}`))}const $=`properties_light_${o.type}`;if(!($ in R))return c=c.concat([new n.V("light-3d",o,`Invalid light type ${o.type}`)]),c;const W=R[$];for(const te in o)if(te==="properties"){const ae=o[te],de=n.K(ae);if(de!=="object")return c=c.concat([new n.V("properties",ae,`object expected, ${de} found`)]),c;for(const Te in ae)c=c.concat(W[Te]?Er({key:Te,value:ae[Te],valueSpec:W[Te],style:L,styleSpec:R}):[new n.J(g.key,ae[Te],`unknown property "${Te}"`)])}else{const ae=te.match(/^(.*)-transition$/),de=te.match(/^(.*)-use-theme$/);c=c.concat(de&&C[de[1]]?Er({key:te,value:o[te],valueSpec:{type:"string"},style:L,styleSpec:R}):ae&&C[ae[1]]&&C[ae[1]].transition?Er({key:te,value:o[te],valueSpec:R.transition,style:L,styleSpec:R}):C[te]?Er({key:te,value:o[te],valueSpec:C[te],style:L,styleSpec:R}):[new n.J(te,o[te],`unknown property "${te}"`)])}return c}function Mn(g){const o=g.value,c=g.key,A=g.style,R=g.styleSpec,C=R.terrain;let E=[];const L=n.K(o);if(o===void 0||L==="null")return E;if(L!=="object")return E=E.concat([new n.V("terrain",o,`object expected, ${L} found`)]),E;for(const j in o){const $=j.match(/^(.*)-transition$/),W=j.match(/^(.*)-use-theme$/);E=E.concat(W&&C[W[1]]?Er({key:j,value:o[j],valueSpec:{type:"string"},style:A,styleSpec:R}):$&&C[$[1]]&&C[$[1]].transition?Er({key:j,value:o[j],valueSpec:R.transition,style:A,styleSpec:R}):C[j]?Er({key:j,value:o[j],valueSpec:C[j],style:A,styleSpec:R}):[new n.J(j,o[j],`unknown property "${j}"`)])}if(o.source){const j=A.sources&&A.sources[o.source],$=j&&n.M(j.type);j?$!=="raster-dem"&&E.push(new n.V(c,o.source,`terrain cannot be used with a source of type ${String($)}, it only be used with a "raster-dem" source type`)):E.push(new n.V(c,o.source,`source "${o.source}" not found`))}else E.push(new n.V(c,o,'terrain is missing required property "source"'));return E}function mn(g){const o=g.value,c=g.style,A=g.styleSpec,R=A.fog;let C=[];const E=n.K(o);if(o===void 0)return C;if(E!=="object")return C=C.concat([new n.V("fog",o,`object expected, ${E} found`)]),C;for(const L in o){const j=L.match(/^(.*)-transition$/),$=L.match(/^(.*)-use-theme$/);C=C.concat($&&R[$[1]]?Er({key:L,value:o[L],valueSpec:{type:"string"},style:c,styleSpec:A}):j&&R[j[1]]&&R[j[1]].transition?Er({key:L,value:o[L],valueSpec:A.transition,style:c,styleSpec:A}):R[L]?Er({key:L,value:o[L],valueSpec:R[L],style:c,styleSpec:A}):[new n.J(L,o[L],`unknown property "${L}"`)])}return C}const en={"*":()=>[],array:or,boolean:function(g){const o=g.value,c=g.key,A=n.K(o);return A!=="boolean"?[new n.V(c,o,`boolean expected, ${A} found`)]:[]},number:Na,color:function(g){const o=g.key,c=g.value,A=n.K(c);return A!=="string"?[new n.V(o,c,`color expected, ${A} found`)]:n.a0.parseCSSColor(c)===null?[new n.V(o,c,`color expected, "${c}" found`)]:[]},enum:cr,filter:Pr,function:za,layer:Rn,object:vt,source:ca,model:n.a4,light:gr,"light-3d":qn,terrain:Mn,fog:mn,string:wa,formatted:function(g){return wa(g).length===0?[]:er(g)},resolvedImage:function(g){return wa(g).length===0?[]:er(g)},projection:function(g){const o=g.value,c=g.styleSpec,A=c.projection,R=g.style;let C=[];const E=n.K(o);if(E==="object")for(const L in o)C=C.concat(Er({key:L,value:o[L],valueSpec:A[L],style:R,styleSpec:c}));else E!=="string"&&(C=C.concat([new n.V("projection",o,`object or string expected, ${E} found`)]));return C},import:function(g){const{value:o,styleSpec:c}=g,{data:A,...R}=o;Object.defineProperty(R,"__line__",{value:o.__line__,enumerable:!1});let C=vt(n.L({},g,{value:R,valueSpec:c.import}));return n.M(R.id)===""&&C.push(new n.V(`${g.key}.id`,R,"import id can't be an empty string")),A&&(C=C.concat(Bi(A,c,{key:`${g.key}.data`}))),C},iconset:function(g){const o=g.value,c=g.key,A=g.styleSpec,R=g.style;if(!o.type)return[new n.V(c,o,'"type" is required')];const C=n.M(o.type);let E=[];if(E=E.concat(vt({key:c,value:o,valueSpec:A[`iconset_${C}`],style:R,styleSpec:A})),C==="source"&&o.source){const L=R.sources&&R.sources[o.source],j=L&&n.M(L.type);L?j!=="raster-array"&&E.push(new n.V(c,o.source,`iconset cannot be used with a source of type ${String(j)}, it only be used with a "raster-array" source type`)):E.push(new n.V(c,o.source,`source "${o.source}" not found`))}return E}};function Er(g,o=!1){const c=g.value,A=g.valueSpec,R=g.styleSpec;if(A.expression&&n.a2(n.M(c)))return za(g);if(A.expression&&n.S(n.U(c)))return er(g);if(A.type&&en[A.type]){const C=en[A.type](g);return o===!0&&C.length>0&&n.K(g.value)==="array"?er(g):C}return vt(n.L({},g,{valueSpec:A.type?R[A.type]:A}))}function As(g){const o=g.value,c=g.key,A=wa(g);return A.length||(o.indexOf("{fontstack}")===-1&&A.push(new n.V(c,o,'"glyphs" url must include a "{fontstack}" token')),o.indexOf("{range}")===-1&&A.push(new n.V(c,o,'"glyphs" url must include a "{range}" token'))),A}function Bi(g,o=n.a5,c={}){return Er({key:c.key||"",value:g,valueSpec:o.$root,styleSpec:o,style:g,objectElementValidators:{glyphs:As,"*":()=>[]}})}function Qi(g,o=n.a5){return bt(Bi(g,o))}const Oo=g=>bt(ca(g)),Ni=g=>bt(gr(g)),fn=g=>bt(qn(g)),ui=g=>bt(Mn(g)),Vc=g=>bt(mn(g)),Us=g=>bt(function(o){const c=o.value,A=o.style,R=o.styleSpec,C=R.snow;let E=[];const L=n.K(c);if(c===void 0)return E;if(L!=="object")return E=E.concat([new n.V("snow",c,`object expected, ${L} found`)]),E;for(const j in c){const $=j.match(/^(.*)-transition$/);E=E.concat($&&C[$[1]]&&C[$[1]].transition?Er({key:j,value:c[j],valueSpec:R.transition,style:A,styleSpec:R}):C[j]?Er({key:j,value:c[j],valueSpec:C[j],style:A,styleSpec:R}):[new n.J(j,c[j],`unknown property "${j}"`)])}return E}(g)),Jt=g=>bt(function(o){const c=o.value,A=o.style,R=o.styleSpec,C=R.rain;let E=[];const L=n.K(c);if(c===void 0)return E;if(L!=="object")return E=E.concat([new n.V("rain",c,`object expected, ${L} found`)]),E;for(const j in c){const $=j.match(/^(.*)-transition$/);E=E.concat($&&C[$[1]]&&C[$[1]].transition?Er({key:j,value:c[j],valueSpec:R.transition,style:A,styleSpec:R}):C[j]?Er({key:j,value:c[j],valueSpec:C[j],style:A,styleSpec:R}):[new n.J(j,c[j],`unknown property "${j}"`)])}return E}(g)),xe=g=>bt(Rn(g)),Oe=g=>bt(Pr(g)),rt=g=>bt(pn(g)),_t=g=>bt(Dn(g)),yt=g=>bt(n.a4(g));function bt(g){return g.slice().sort((o,c)=>o.line&&c.line?o.line-c.line:0)}function Bt(g,o){let c=!1;if(o&&o.length)for(const A of o)A instanceof n.J?n.w(A.message):(g.fire(new n.z(new Error(A.message))),c=!0);return c}let Et;class $t extends n.E{constructor(o,c="flat"){super(),this._transitionable=new n.a6(Et||(Et=new n.a7({anchor:new n.a8(n.a5.light.anchor),position:new n.a9(n.a5.light.position),color:new n.a8(n.a5.light.color),intensity:new n.a8(n.a5.light.intensity)}))),this.setLight(o,c),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(o,c,A={}){this._validate(Ni,o,A)||(this._transitionable.setTransitionOrValue(o),this.id=c)}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,c,A){return(!A||A.validate!==!1)&&Bt(this,o.call(Qi,n.l({value:c,style:{glyphs:!0,sprite:!0},styleSpec:n.a5})))}}let Kt=class extends n.E{constructor(g,o,c,A){super(),this.scope=c,this._transitionable=new n.a6(new n.a7({source:new n.a8(n.a5.terrain.source),exaggeration:new n.a8(n.a5.terrain.exaggeration)}),c,A),this._transitionable.setTransitionOrValue(g,A),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=o}get(){return this._transitionable.serialize()}set(g,o){this._transitionable.setTransitionOrValue(g,o)}updateTransitions(g){this._transitioning=this._transitionable.transitioned(g,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(g){this.properties=this._transitioning.possiblyEvaluate(g)}getExaggeration(g){return this._transitioning.possiblyEvaluate(new n.aa(g)).get("exaggeration")}getAttenuationRange(){if(!this.isZoomDependent())return null;const g=this._transitionable._values.exaggeration;if(!g)return null;const o=g.value.expression;if(!o)return null;let c=-1,A=-1,R=1;for(const C of o.zoomStops)R=o.evaluate(new n.aa(C)),R>.01?(c=C,A=-1):A=C;return R<.01&&c>0&&A>c?[c,A]:null}isZoomDependent(){const g=this._transitionable._values.exaggeration;return g!=null&&g.value!=null&&g.value.expression!=null&&g.value.expression instanceof n.ab}};const Ht=45,Ta=65,Ma=.05;function Ba(g,o,c,A){const R=n.ae(Ht,Ta,c),[C,E]=_r(g,A);let L=1-Math.min(1,Math.exp((o-C)/(E-C)*-6));return L*=L*L,L=Math.min(1,1.00747*L),L*R*g.alpha}function _r(g,o){const c=.5/Math.tan(.5*o);return[g.range[0]+c,g.range[1]+c]}function Nr(g,o,c,A,R){const C=n.ad.vec3.transformMat4([],[o,c,A],R.mercatorFogMatrix);return Ba(g,n.ad.vec3.length(C),R.pitch,R._fov)}function Vr(g,o,c,A,R,C,E){const L=[[c,A,0],[R,A,0],[R,C,0],[c,C,0]];let j=Number.MAX_VALUE,$=-Number.MAX_VALUE;for(const W of L){const te=n.ad.vec3.transformMat4([],W,o),ae=n.ad.vec3.length(te);j=Math.min(j,ae),$=Math.max($,ae)}return[Ba(g,j,E.pitch,E._fov),Ba(g,$,E.pitch,E._fov)]}class Gr extends n.E{constructor(o,c,A,R){super();const C=new n.a7({range:new n.a8(n.a5.fog.range),color:new n.a8(n.a5.fog.color),"color-use-theme":new n.a8({type:"string","property-type":"data-constant",default:"default"}),"high-color":new n.a8(n.a5.fog["high-color"]),"high-color-use-theme":new n.a8({type:"string","property-type":"data-constant",default:"default"}),"space-color":new n.a8(n.a5.fog["space-color"]),"space-color-use-theme":new n.a8({type:"string","property-type":"data-constant",default:"default"}),"horizon-blend":new n.a8(n.a5.fog["horizon-blend"]),"star-intensity":new n.a8(n.a5.fog["star-intensity"]),"vertical-range":new n.a8(n.a5.fog["vertical-range"])});this._transitionable=new n.a6(C,A,new Map(R)),this.set(o,R),this._transitioning=this._transitionable.untransitioned(),this._transform=c,this.properties=new n.af(C),this.scope=A}get state(){const o=this._transform,c=o.projection.name==="globe",A=n.ag(o.zoom),R=this.properties.get("range"),C=[.5,3];return{range:c?[n.ah(C[0],R[0],A),n.ah(C[1],R[1],A)]:R,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(o,c,A={}){if(this._validate(Vc,o,A))return;const R=n.l({},o);for(const C of Object.keys(n.a5.fog))R[C]===void 0&&(R[C]=n.a5.fog[C].default);this._options=R,this._transitionable.setTransitionOrValue(this._options,c)}getOpacity(o){if(!this._transform.projection.supportsFog)return 0;const c=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:n.ae(Ht,Ta,o))*c.a}getOpacityAtLatLng(o,c){return this._transform.projection.supportsFog?function(A,R,C){const E=n.ac.fromLngLat(R),L=C.elevation?C.elevation.getAtPointOrZero(E):0;return Nr(A,E.x,E.y,L,C)}(this.state,o,c):0}getOpacityForTile(o){if(!this._transform.projection.supportsFog)return[1,1];const c=this._transform.calculateFogTileMatrix(o.toUnwrapped());return Vr(this.state,c,0,0,n.ai,n.ai,this._transform)}getOpacityForBounds(o,c,A,R,C){return this._transform.projection.supportsFog?Vr(this.state,o,c,A,R,C,this._transform):[1,1]}getFovAdjustedRange(o){return this._transform.projection.supportsFog?_r(this.state,o):[0,1]}isVisibleOnFrustum(o){if(!this._transform.projection.supportsFog)return!1;const c=[4,5,6,7];for(const A of c){const R=o.points[A];let C;if(R[2]>=0)C=R;else{const E=o.points[A-4];C=n.aj(E,R,E[2]/(E[2]-R[2]))}if(Nr(this.state,C[0],C[1],0,this._transform)>=Ma)return!0}return!1}updateConfig(o){this._transitionable.setTransitionOrValue(this._options,new Map(o))}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,c,A){return(!A||A.validate!==!1)&&Bt(this,o.call(Qi,n.l({value:c,style:{glyphs:!0,sprite:!0},styleSpec:n.a5})))}}let zn,Jn,qr,yn,Hr=class extends n.E{constructor(g,o,c,A){super();const R=zn||(zn=new n.a7({density:new n.a8(n.a5.snow.density),intensity:new n.a8(n.a5.snow.intensity),color:new n.a8(n.a5.snow.color),opacity:new n.a8(n.a5.snow.opacity),vignette:new n.a8(n.a5.snow.vignette),"vignette-color":new n.a8(n.a5.snow["vignette-color"]),"center-thinning":new n.a8(n.a5.snow["center-thinning"]),direction:new n.a8(n.a5.snow.direction),"flake-size":new n.a8(n.a5.snow["flake-size"])}));this._transitionable=new n.a6(R,c,new Map(A)),this.set(g,A),this._transitioning=this._transitionable.untransitioned(),this.properties=new n.af(R),this.scope=c}get state(){const g=this.properties.get("opacity"),o=this.properties.get("color"),c=this.properties.get("direction"),A=n.ak(c[0]),R=-Math.max(n.ak(c[1]),.01),C=[Math.cos(A)*Math.cos(R),Math.sin(A)*Math.cos(R),Math.sin(R)],E=this.properties.get("vignette"),L=this.properties.get("vignette-color");return L.a=E,{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new n.al(o.r,o.g,o.b,o.a*g),direction:C,centerThinning:this.properties.get("center-thinning"),flakeSize:this.properties.get("flake-size"),vignetteColor:L}}get(){return this._transitionable.serialize()}set(g,o,c={}){if(this._validate(Us,g,c))return;const A=n.l({},g);for(const R of Object.keys(n.a5.snow))A[R]===void 0&&(A[R]=n.a5.snow[R].default);this._options=A,this._transitionable.setTransitionOrValue(this._options,o)}updateConfig(g){this._transitionable.setTransitionOrValue(this._options,new Map(g))}updateTransitions(g){this._transitioning=this._transitionable.transitioned(g,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(g){this.properties=this._transitioning.possiblyEvaluate(g)}_validate(g,o,c){return(!c||c.validate!==!1)&&Bt(this,g.call(Qi,n.l({value:o,style:{glyphs:!0,sprite:!0},styleSpec:n.a5})))}},In=class extends n.E{constructor(g,o,c,A){super();const R=Jn||(Jn=new n.a7({density:new n.a8(n.a5.rain.density),intensity:new n.a8(n.a5.rain.intensity),color:new n.a8(n.a5.rain.color),opacity:new n.a8(n.a5.rain.opacity),vignette:new n.a8(n.a5.rain.vignette),"vignette-color":new n.a8(n.a5.rain["vignette-color"]),"center-thinning":new n.a8(n.a5.rain["center-thinning"]),direction:new n.a8(n.a5.rain.direction),"droplet-size":new n.a8(n.a5.rain["droplet-size"]),"distortion-strength":new n.a8(n.a5.rain["distortion-strength"])}));this._transitionable=new n.a6(R,c,new Map(A)),this.set(g,A),this._transitioning=this._transitionable.untransitioned(),this.properties=new n.af(R),this.scope=c}get state(){const g=this.properties.get("opacity"),o=this.properties.get("color"),c=this.properties.get("direction"),A=n.ak(c[0]),R=-Math.max(n.ak(c[1]),.01),C=[Math.cos(A)*Math.cos(R),Math.sin(A)*Math.cos(R),Math.sin(R)],E=this.properties.get("vignette-color");return E.a=this.properties.get("vignette"),{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new n.al(o.r,o.g,o.b,o.a*g),direction:C,centerThinning:this.properties.get("center-thinning"),dropletSize:this.properties.get("droplet-size"),distortionStrength:this.properties.get("distortion-strength"),vignetteColor:E}}get(){return this._transitionable.serialize()}set(g,o,c={}){if(this._validate(Jt,g,c))return;const A=n.l({},g);for(const R of Object.keys(n.a5.rain))A[R]===void 0&&(A[R]=n.a5.rain[R].default);this._options=A,this._transitionable.setTransitionOrValue(this._options,o)}updateConfig(g){this._transitionable.setTransitionOrValue(this._options,new Map(g))}updateTransitions(g){this._transitioning=this._transitionable.transitioned(g,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(g){this.properties=this._transitioning.possiblyEvaluate(g)}_validate(g,o,c){return(!c||c.validate!==!1)&&Bt(this,g.call(Qi,n.l({value:o,style:{glyphs:!0,sprite:!0},styleSpec:n.a5})))}};class Vi extends n.E{constructor(o,c,A,R){super(),this.scope=A,this._options=o,this.properties=new n.af(c),this._transitionable=new n.a6(c,A,new Map(R)),this._transitionable.setTransitionOrValue(o.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(o){this._transitionable.setTransitionOrValue(this._options.properties,new Map(o))}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(o,c){this._options=o,this._transitionable.setTransitionOrValue(o.properties,c)}shadowsEnabled(){return!!this.properties&&this.properties.get("cast-shadows")===!0}}class Gi{constructor(o,c,A,R){this.screenBounds=o,this.cameraPoint=c,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=A,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,R)}static createFromScreenPoints(o,c){let A,R;if(o instanceof n.P||typeof o[0]=="number"){const C=n.P.convert(o);A=[C],R=c.isPointAboveHorizon(C)}else{const C=n.P.convert(o[0]),E=n.P.convert(o[1]);A=[C,E],R=n.an(C,E).every(L=>c.isPointAboveHorizon(L))}return new Gi(A,c.getCameraPoint(),R,c)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(o){return n.an(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],o)}bufferedCameraGeometry(o){const c=this.screenBounds[0],A=this.screenBounds.length===1?this.screenBounds[0].add(new n.P(1,1)):this.screenBounds[1],R=n.an(c,A,0,!1);return this.cameraPoint.y>A.y&&(this.cameraPoint.x>c.x&&this.cameraPoint.x<A.x?R.splice(3,0,this.cameraPoint):this.cameraPoint.x>=A.x?R[2]=this.cameraPoint:this.cameraPoint.x<=c.x&&(R[3]=this.cameraPoint)),n.ao(R,o)}bufferedCameraGeometryGlobe(o){const c=this.screenBounds[0],A=this.screenBounds.length===1?this.screenBounds[0].add(new n.P(1,1)):this.screenBounds[1],R=n.an(c,A,o),C=this.cameraPoint.clone();switch(3*((C.y>c.y)+(C.y>A.y))+((C.x>c.x)+(C.x>A.x))){case 0:R[0]=C,R[4]=C.clone();break;case 1:R.splice(1,0,C);break;case 2:R[1]=C;break;case 3:R.splice(4,0,C);break;case 5:R.splice(2,0,C);break;case 6:R[3]=C;break;case 7:R.splice(3,0,C);break;case 8:R[2]=C}return R}containsTile(o,c,A,R=0){const C=o.queryPadding/c._pixelsPerMercatorPixel+1,E=A?this._bufferedCameraMercator(C,c):this._bufferedScreenMercator(C,c);let L=o.tileID.wrap+(E.unwrapped?R:0);const j=E.polygon.map(Ee=>n.ap(o.tileTransform,Ee,L));if(!n.aq(j,0,0,n.ai,n.ai))return;L=o.tileID.wrap+(this.screenGeometryMercator.unwrapped?R:0);const $=this.screenGeometryMercator.polygon.map(Ee=>n.ar(o.tileTransform,Ee,L)),W=$.map(Ee=>new n.P(Ee[0],Ee[1])),te=c.getFreeCameraOptions().position||new n.ac(0,0,0),ae=n.ar(o.tileTransform,te,L),de=$.map(Ee=>{const Ve=n.ad.vec3.sub(Ee,Ee,ae);return n.ad.vec3.normalize(Ve,Ve),new n.as(ae,Ve)}),Te=n.at(o,1,c.zoom)*c._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:W,tilespaceRays:de,bufferedTilespaceGeometry:j,bufferedTilespaceBounds:(ve=n.au(j),ve.min.x=n.ay(ve.min.x,0,n.ai),ve.min.y=n.ay(ve.min.y,0,n.ai),ve.max.x=n.ay(ve.max.x,0,n.ai),ve.max.y=n.ay(ve.max.y,0,n.ai),ve),tile:o,tileID:o.tileID,pixelToTileUnitsFactor:Te};var ve}_bufferedScreenMercator(o,c){const A=Do(o);if(this._screenRaycastCache[A])return this._screenRaycastCache[A];{let R;return R=c.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(o),c):{polygon:this.bufferedScreenGeometry(o).map(C=>c.pointCoordinate3D(C)),unwrapped:!0},this._screenRaycastCache[A]=R,R}}_bufferedCameraMercator(o,c){const A=Do(o);if(this._cameraRaycastCache[A])return this._cameraRaycastCache[A];{let R;return R=c.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(o),c):{polygon:this.bufferedCameraGeometry(o).map(C=>c.pointCoordinate3D(C)),unwrapped:!0},this._cameraRaycastCache[A]=R,R}}_projectAndResample(o,c){const A=function(C,E){const L=n.ad.mat4.multiply([],E.pixelMatrix,E.globeMatrix),j=[0,-n.az,0,1],$=[0,n.az,0,1],W=[0,0,0,1];n.ad.vec4.transformMat4(j,j,L),n.ad.vec4.transformMat4($,$,L),n.ad.vec4.transformMat4(W,W,L);const te=new n.P(j[0]/j[3],j[1]/j[3]),ae=new n.P($[0]/$[3],$[1]/$[3]),de=n.aw(C,te)&&j[3]<W[3],Te=n.aw(C,ae)&&$[3]<W[3];if(!de&&!Te)return null;const ve=function(st,ot,gt){for(let Tt=1;Tt<st.length;Tt++){const Xt=vs(ot.pointCoordinate3D(st[Tt-1]).x),Ft=vs(ot.pointCoordinate3D(st[Tt]).x);if(gt<0){if(Xt<Ft)return{idx:Tt,t:-Xt/(Ft-1-Xt)}}else if(Ft<Xt)return{idx:Tt,t:(1-Xt)/(Ft+1-Xt)}}return null}(C,E,de?-1:1);if(!ve)return null;const{idx:Ee,t:Ve}=ve;let Be=Ee>1?_s(C.slice(0,Ee),E):[],et=Ee<C.length?_s(C.slice(Ee),E):[];Be=Be.map(st=>new n.P(vs(st.x),st.y)),et=et.map(st=>new n.P(vs(st.x),st.y));const Je=[...Be];Je.length===0&&Je.push(et[et.length-1]);const dt=n.ah(Je[Je.length-1].y,(et.length===0?Be[0]:et[0]).y,Ve);let it;return it=de?[new n.P(0,dt),new n.P(0,0),new n.P(1,0),new n.P(1,dt)]:[new n.P(1,dt),new n.P(1,1),new n.P(0,1),new n.P(0,dt)],Je.push(...it),et.length===0?Je.push(Be[0]):Je.push(...et),{polygon:Je.map(st=>new n.ac(st.x,st.y)),unwrapped:!1}}(o,c);if(A)return A;const R=function(C,E){let L=!1,j=-1/0,$=0;for(let te=0;te<C.length-1;te++)C[te].x>j&&(j=C[te].x,$=te);for(let te=0;te<C.length-1;te++){const ae=($+te)%(C.length-1),de=C[ae],Te=C[ae+1];Math.abs(de.x-Te.x)>.5&&(de.x<Te.x?(de.x+=1,ae===0&&(C[C.length-1].x+=1)):(Te.x+=1,ae+1===C.length-1&&(C[0].x+=1)),L=!0)}const W=n.av(E.center.lng);return L&&W<Math.abs(W-1)&&C.forEach(te=>{te.x-=1}),{polygon:C,unwrapped:L}}(_s(o,c).map(C=>new n.P(vs(C.x),C.y)),c);return{polygon:R.polygon.map(C=>new n.ac(C.x,C.y)),unwrapped:R.unwrapped}}}function _s(g,o){return n.ax(g,c=>{const A=o.pointCoordinate3D(c);c.x=A.x,c.y=A.y},1/256)}function vs(g){return g<0?1+g%1:g%1}function Do(g){return 100*g|0}function ws(g,o,c,A,R){const C=function(L,j){if(L)return R(L);if(j){if(g.url&&j.tiles&&g.tiles&&delete g.tiles,j.variants){if(!Array.isArray(j.variants))return R(new Error("variants must be an array"));for(const W of j.variants){if(W==null||typeof W!="object"||W.constructor!==Object)return R(new Error("variant must be an object"));if(!Array.isArray(W.capabilities))return R(new Error("capabilities must be an array"));if(W.capabilities.length===1&&W.capabilities[0]==="meshopt"){j=n.l(j,W);break}}}const $=n.aA(n.l({},j,g),["tilejson","tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding","vector_layers","raster_layers","worldview_options","worldview_default","worldview"]);$.tiles=o.canonicalizeTileset($,g.url),R(null,$)}},E=function(L,j,$){if(!L)return null;if(!j&&!$)return L;$=$||L.worldview_default;const W=Object.values(L.language||{});if(W.length===0)return null;const te=Object.values(L.worldview||{});if(te.length===0)return null;const ae=W.every(Te=>Te===j),de=te.every(Te=>Te===$);return ae&&de?L:j in(L.language_options||{})||$ in(L.worldview_options||{})?null:L.language_options&&L.worldview_options?L:null}(g.data,c,A);return E?n.q.frame(()=>C(null,E)):g.url?n.n(o.transformRequest(o.normalizeSourceURL(g.url,null,c,A),n.R.Source),C):n.q.frame(()=>{const{data:L,...j}=g;C(null,j)})}class ks{constructor(o,c,A){this.bounds=n.aB.convert(this.validateBounds(o)),this.minzoom=c||0,this.maxzoom=A||24}validateBounds(o){return Array.isArray(o)&&o.length===4?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]}contains(o){const c=Math.pow(2,o.z),A=Math.floor(n.av(this.bounds.getWest())*c),R=Math.floor(n.aC(this.bounds.getNorth())*c),C=Math.ceil(n.av(this.bounds.getEast())*c),E=Math.ceil(n.aC(this.bounds.getSouth())*c);return o.x>=A&&o.x<C&&o.y>=R&&o.y<E}}class sc extends n.E{constructor(o,c,A,R){if(super(),this.id=o,this.dispatcher=A,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,n.l(this,n.aA(c,["url","scheme","tileSize","promoteId"])),this._options=n.l({type:"vector"},c),this._collectResourceTiming=!!c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(R),this._tileWorkers={},this._deduped=new n.aD}load(o){this._loaded=!1,this.fire(new n.A("dataloading",{dataType:"source"}));const c=Array.isArray(this.map._language)?this.map._language.join():this.map._language,A=this.map.getWorldview();this._tileJSONRequest=ws(this._options,this.map._requestManager,c,A,(R,C)=>{if(this._tileJSONRequest=null,this._loaded=!0,R)c&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${c}`),A&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${A}`),this.fire(new n.z(R));else if(C){if(n.l(this,C),this.hasWorldviews=!!C.worldview_options,C.worldview_default&&(this.worldviewDefault=C.worldview_default),C.vector_layers){this.vectorLayers=C.vector_layers,this.vectorLayerIds=[],this.localizableLayerIds=new Set;for(const E of C.vector_layers)this.vectorLayerIds.push(E.id),C.worldview&&C.worldview[E.source]&&this.localizableLayerIds.add(E.id)}C.bounds&&(this.tileBounds=new ks(C.bounds,this.minzoom,this.maxzoom)),Ce(C.tiles,this.map._requestManager._customAccessToken),this.fire(new n.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.A("data",{dataType:"source",sourceDataType:"content"}))}o&&o(R)})}loaded(){return this._loaded}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}onAdd(o){this.map=o,this.load()}reload(){this.cancelTileJSONRequest();const o=n.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(o))}setTiles(o){return this._options.tiles=o,this.reload(),this}setUrl(o){return this.url=o,this._options.url=o,this.reload(),this}onRemove(o){this.cancelTileJSONRequest()}serialize(){return n.l({},this._options)}loadTile(o,c){const A=o.tileID.canonical.url(this.tiles,this.scheme),R=this.map._requestManager.normalizeTileURL(A),C=this.map._requestManager.transformRequest(R,n.R.Tile),E=this.map.style?this.map.style.getLut(this.scope):null,L=E?{image:E.image.clone()}:null,j={request:C,data:void 0,uid:o.uid,tileID:o.tileID,tileZoom:o.tileZoom,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,lut:L,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:n.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:o.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:o.isExtraShadowCaster,tessellationStep:this.map._tessellationStep,scaleFactor:this.map.getScaleFactor()};if(this.hasWorldviews&&n.f(A)&&(j.worldview=this.map.getWorldview()||this.worldviewDefault,j.localizableLayerIds=this.localizableLayerIds),j.request.collectResourceTiming=this._collectResourceTiming,o.actor&&o.state!=="expired")o.state==="loading"?o.reloadCallback=c:o.request=o.actor.send("reloadTile",j,$.bind(this));else if(o.actor=this._tileWorkers[R]=this._tileWorkers[R]||this.dispatcher.getActor(),this.dispatcher.ready)o.request=o.actor.send("loadTile",j,$.bind(this),void 0,!0);else{const W=n.aE.call({deduped:this._deduped},j,(te,ae)=>{te||!ae?$.call(this,te):(j.data={cacheControl:ae.cacheControl,expires:ae.expires,rawData:ae.rawData.slice(0)},o.actor&&o.actor.send("loadTile",j,$.bind(this),void 0,!0))},!0);o.request={cancel:W}}function $(W,te){return delete o.request,o.aborted?c(null):W&&W.status!==404?c(W):(te&&te.resourceTiming&&(o.resourceTiming=te.resourceTiming),this.map._refreshExpiredTiles&&te&&o.setExpiryData(te),o.loadVectorData(te,this.map.painter),n.aF(this.dispatcher),c(null),void(o.reloadCallback&&(this.loadTile(o,o.reloadCallback),o.reloadCallback=null)))}}abortTile(o){o.request&&(o.request.cancel(),delete o.request),o.actor&&o.actor.send("abortTile",{uid:o.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(o,c){o.actor&&o.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id,scope:this.scope}),o.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Wo extends n.E{constructor(o,c,A,R){super(),this.id=o,this.dispatcher=A,this.setEventedParent(R),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=n.l({type:"raster"},c),n.l(this,n.aA(c,["url","scheme","tileSize"]))}load(o){this._loaded=!1,this.fire(new n.A("dataloading",{dataType:"source"})),this._tileJSONRequest=ws(this._options,this.map._requestManager,null,null,(c,A)=>{this._tileJSONRequest=null,this._loaded=!0,c?this.fire(new n.z(c)):A&&(n.l(this,A),A.raster_layers&&(this.rasterLayers=A.raster_layers,this.rasterLayerIds=this.rasterLayers.map(R=>R.id)),A.bounds&&(this.tileBounds=new ks(A.bounds,this.minzoom,this.maxzoom)),Ce(A.tiles),this.fire(new n.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.A("data",{dataType:"source",sourceDataType:"content"}))),o&&o(c)})}loaded(){return this._loaded}onAdd(o){this.map=o,this.load()}reload(){this.cancelTileJSONRequest();const o=n.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(o))}setTiles(o){return this._options.tiles=o,this.reload(),this}setUrl(o){return this.url=o,this._options.url=o,this.reload(),this}onRemove(o){this.cancelTileJSONRequest()}serialize(){return n.l({},this._options)}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}loadTile(o,c){const A=n.q.devicePixelRatio>=2,R=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),A,this.tileSize);o.request=n.o(this.map._requestManager.transformRequest(R,n.R.Tile),(C,E,L,j)=>(delete o.request,o.aborted?(o.state="unloaded",c(null)):C?(o.state="errored",c(C)):E?(this.map._refreshExpiredTiles&&o.setExpiryData({cacheControl:L,expires:j}),o.setTexture(E,this.map.painter),o.state="loaded",n.aF(this.dispatcher),void c(null)):c(null)))}abortTile(o,c){o.request&&(o.request.cancel(),delete o.request),c&&c()}unloadTile(o,c){o.texture&&o.texture instanceof n.T?(o.destroy(!0),o.texture&&o.texture instanceof n.T&&this.map.painter.saveTileTexture(o.texture)):o.destroy(),c&&c()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class zi extends Wo{constructor(o,c,A,R){super(o,c,A,R),this.type="raster-array",this.maxzoom=22,this.partial=!0,this.iconsets={},this._options=n.l({type:"raster-array"},c)}triggerRepaint(o){const c=this.map.painter._terrain,A=this.map.style.getSourceCache(this.id);c&&c.enabled&&A&&c._clearRenderCacheForTile(A.id,o.tileID),this.map.triggerRepaint()}loadTile(o,c){const A=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize),R=this.map._requestManager.transformRequest(A,n.R.Tile),C={request:R,uid:o.uid,tileID:o.tileID,type:this.type,source:this.id,scope:this.scope,partial:this.partial};o.source=this.id,o.scope=this.scope,o.requestParams=R,o.actor||(o.actor=this.dispatcher.getActor());const E=(L,j,$,W)=>{if(delete o.request,o.aborted)return o.state="unloaded",c(null);if(L)return L.name==="AbortError"?void 0:(o.state="errored",c(L));if(this.map._refreshExpiredTiles&&j&&o.setExpiryData({cacheControl:$,expires:W}),this.partial)o.state="empty";else{if(!j)return c(null);o.state="loaded",o._isHeaderLoaded=!0,o._mrt=j;const te=new Map;for(const ae in o._mrt.layers){const de=o.getLayer(ae);if(de)for(const Te of de.getBandList()){const{bytes:ve,tileSize:Ee,buffer:Ve}=de.getBandView(Te),Be=Ee+2*Ve,et={data:new n.r({width:Be,height:Be},ve),pixelRatio:2,sdf:!1,usvg:!1,version:0};te.set(`${ae}/${Te}`,et)}}for(const ae in this.iconsets)this.iconsets[ae].addIcons(te)}c(null)};o.request=this.partial?o.fetchHeader(void 0,E.bind(this)):o.actor.send("loadTile",C,E.bind(this),void 0,!0)}abortTile(o){o.request&&(o.request.cancel(),delete o.request),o.actor&&o.actor.send("abortTile",{uid:o.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(o,c){const A=o.texture;A&&A instanceof n.T?(o.destroy(!0),this.map.painter.saveTileTexture(A)):(o.destroy(),o.flushQueues(),o._isHeaderLoaded=!1,delete o._mrt,delete o.textureDescriptor),o.fbo&&(o.fbo.destroy(),delete o.fbo),delete o.request,delete o.requestParams,delete o.neighboringTiles,o.state="unloaded"}prepareTile(o,c,A){o._isHeaderLoaded&&(o.state!=="empty"&&(o.state="reloading"),o.fetchBand(c,A,(R,C)=>{if(R)return o.state="errored",this.fire(new n.z(R)),void this.triggerRepaint(o);C&&(o._isHeaderLoaded=!0,o.setTexture(C,this.map.painter),o.state="loaded",this.triggerRepaint(o))}))}getInitialBand(o){if(!this.rasterLayers)return 0;const c=this.rasterLayers.find(({id:C})=>C===o),A=c&&c.fields,R=A&&A.bands&&A.bands;return R?R[0]:0}getTextureDescriptor(o,c,A){if(!o)return;const R=c.sourceLayer||this.rasterLayerIds&&this.rasterLayerIds[0];if(!R)return;let C=null;c instanceof n.aI?C=c.paint.get("raster-array-band"):c instanceof n.aJ&&(C=c.paint.get("raster-particle-array-band"));const E=C||this.getInitialBand(R);if(E!=null)if(o.textureDescriptor){if(!o.updateNeeded(R,E)||A)return Object.assign({},o.textureDescriptor,{texture:o.texture})}else this.prepareTile(o,R,E)}addIconset(o,c){this.iconsets[o]=c,this.partial=!1}}const ql={vector:sc,raster:Wo,"raster-dem":class extends Wo{constructor(g,o,c,A){super(g,o,c,A),this.type="raster-dem",this.maxzoom=22,this._options=n.l({type:"raster-dem"},o),this.encoding=o.encoding||"mapbox"}loadTile(g,o){const c=this.map._requestManager.normalizeTileURL(g.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function A(R,C){R&&(g.state="errored",o(R)),C&&(g.dem=C,g.dem.onDeserialize(),g.needsHillshadePrepare=!0,g.needsDEMTextureUpload=!0,g.state="loaded",o(null))}g.request=n.o(this.map._requestManager.transformRequest(c,n.R.Tile),(function(R,C,E,L){if(delete g.request,g.aborted)g.state="unloaded",o(null);else if(R)g.state="errored",o(R);else if(C){this.map._refreshExpiredTiles&&g.setExpiryData({cacheControl:E,expires:L});const j=ImageBitmap&&C instanceof ImageBitmap&&n.t(),$=1-(C.width-n.aG(C.width))/2;$<1||g.neighboringTiles||(g.neighboringTiles=this._getNeighboringTiles(g.tileID));const W=j?C:n.q.getImageData(C,$),te={uid:g.uid,tileID:g.tileID,source:this.id,type:this.type,scope:this.scope,rawImageData:W,encoding:this.encoding,padding:$};g.actor&&g.state!=="expired"||(g.actor=this.dispatcher.getActor(),g.actor.send("loadTile",te,A.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(g){const o=g.canonical,c=Math.pow(2,o.z),A=(o.x-1+c)%c,R=o.x===0?g.wrap-1:g.wrap,C=(o.x+1+c)%c,E=o.x+1===c?g.wrap+1:g.wrap,L={};return L[new n.aH(g.overscaledZ,R,o.z,A,o.y).key]={backfilled:!1},L[new n.aH(g.overscaledZ,E,o.z,C,o.y).key]={backfilled:!1},o.y>0&&(L[new n.aH(g.overscaledZ,R,o.z,A,o.y-1).key]={backfilled:!1},L[new n.aH(g.overscaledZ,g.wrap,o.z,o.x,o.y-1).key]={backfilled:!1},L[new n.aH(g.overscaledZ,E,o.z,C,o.y-1).key]={backfilled:!1}),o.y+1<c&&(L[new n.aH(g.overscaledZ,R,o.z,A,o.y+1).key]={backfilled:!1},L[new n.aH(g.overscaledZ,g.wrap,o.z,o.x,o.y+1).key]={backfilled:!1},L[new n.aH(g.overscaledZ,E,o.z,C,o.y+1).key]={backfilled:!1}),L}},"raster-array":zi,geojson:class extends n.E{constructor(g,o,c,A){super(),this.id=g,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=c.getActor(),this.setEventedParent(A),this._data=o.data,this._options=n.l({},o),this._collectResourceTiming=o.collectResourceTiming,o.maxzoom!==void 0&&(this.maxzoom=o.maxzoom),o.minzoom!==void 0&&(this.minzoom=o.minzoom),o.type&&(this.type=o.type),o.attribution&&(this.attribution=o.attribution),this.promoteId=o.promoteId;const R=n.ai/this.tileSize;this.workerOptions=n.l({source:this.id,scope:this.scope,cluster:o.cluster||!1,geojsonVtOptions:{buffer:(o.buffer!==void 0?o.buffer:128)*R,tolerance:(o.tolerance!==void 0?o.tolerance:.375)*R,extent:n.ai,maxZoom:this.maxzoom,lineMetrics:o.lineMetrics||!1,generateId:o.generateId||!1},superclusterOptions:{maxZoom:o.clusterMaxZoom!==void 0?o.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,o.clusterMinPoints||2),extent:n.ai,radius:(o.clusterRadius!==void 0?o.clusterRadius:50)*R,log:!1,generateId:o.generateId||!1},clusterProperties:o.clusterProperties,filter:o.filter,dynamic:o.dynamic},o.workerOptions)}onAdd(g){this.map=g,this.setData(this._data)}setData(g){return this._data=g,this._updateWorkerData(),this}updateData(g){if(!this._options.dynamic)return this.fire(new n.z(new Error("Can't call updateData on a GeoJSON source with dynamic set to false.")));if(typeof g!="string"&&(g.type==="Feature"&&(g={type:"FeatureCollection",features:[g]}),g.type!=="FeatureCollection"))return this.fire(new n.z(new Error("Data to update should be a feature or a feature collection.")));if(this._coalesce&&typeof g!="string"&&typeof this._data!="string"&&this._data.type==="FeatureCollection"){const o=new Map;for(const c of this._data.features)o.set(c.id,c);for(const c of g.features)o.set(c.id,c);this._data.features=[...o.values()]}else this._data=g;return this._updateWorkerData(!0),this}getClusterExpansionZoom(g,o){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:g,source:this.id,scope:this.scope},o),this}getClusterChildren(g,o){return this.actor.send("geojson.getClusterChildren",{clusterId:g,source:this.id,scope:this.scope},o),this}getClusterLeaves(g,o,c,A){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:g,limit:o,offset:c},A),this}_updateWorkerData(g=!1){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new n.A("dataloading",{dataType:"source"})),this._loaded=!1;const o=n.l({append:g},this.workerOptions);o.scope=this.scope;const c=this._data;typeof c=="string"?(o.request=this.map._requestManager.transformRequest(n.q.resolveURL(c),n.R.Source),o.request.collectResourceTiming=this._collectResourceTiming):o.data=JSON.stringify(c),this._pendingLoad=this.actor.send(`${this.type}.loadData`,o,(A,R)=>{if(this._loaded=!0,this._pendingLoad=null,A)this.fire(new n.z(A));else{const C={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&R&&R.resourceTiming&&R.resourceTiming[this.id]&&(C.resourceTiming=R.resourceTiming[this.id]),g&&(this._partialReload=!0),this.fire(new n.A("data",C)),this._partialReload=!1,this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(g),this._coalesce=!1)})}loaded(){return this._loaded}reload(){const g=n.C(this.id,this.scope);this.map.style.clearSource(g),this._updateWorkerData()}loadTile(g,o){const c=g.actor?"reloadTile":"loadTile";g.actor=this.actor;const A=this.map.style?this.map.style.getLut(this.scope):null,R=A?{image:A.image.clone()}:null,C=this._partialReload,E={type:this.type,uid:g.uid,tileID:g.tileID,tileZoom:g.tileZoom,zoom:g.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,lut:R,scope:this.scope,pixelRatio:n.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0,scaleFactor:this.map.getScaleFactor(),partial:C};g.request=this.actor.send(c,E,(L,j)=>C&&!j?(g.state="loaded",o(null)):(delete g.request,g.destroy(),g.aborted?o(null):L?o(L):(g.loadVectorData(j,this.map.painter,c==="reloadTile"),o(null))),void 0,c==="loadTile")}abortTile(g){g.request&&(g.request.cancel(),delete g.request),g.aborted=!0}unloadTile(g,o){this.actor.send("removeTile",{uid:g.uid,type:this.type,source:this.id,scope:this.scope}),g.destroy()}onRemove(g){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return n.l({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends n.aK{constructor(g,o,c,A){super(g,o,c,A),this.roundZoom=!0,this.type="video",this.options=o}load(){this._loaded=!1;const g=this.options;this.urls=[];for(const o of g.urls)this.urls.push(this.map._requestManager.transformRequest(o,n.R.Source).url);n.aL(this.urls,(o,c)=>{this._loaded=!0,o?this.fire(new n.z(o)):c&&(this.video=c,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(g){if(this.video){const o=this.video.seekable;g<o.start(0)||g>o.end(0)?this.fire(new n.z(new n.V(`sources.${this.id}`,null,`Playback for this video can be set only between the ${o.start(0)} and ${o.end(0)}-second mark.`))):this.video.currentTime=g}}getVideo(){return this.video}onAdd(g){this.map||(this.map=g,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const g=this.map.painter.context,o=g.gl;this.texture?this.video.paused||(this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,this.video)):(this.texture=new n.T(g,this.video,o.RGBA8),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(g)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:n.aK,model:class extends n.E{constructor(g,o,c,A){super(),this.id=g,this.type="model",this.models=[],this._loaded=!1,this._options=o}load(){const g=[];for(const o in this._options.models){const c=this._options.models[o],A=n.aN(this.map._requestManager.transformRequest(c.uri,n.R.Model).url).then(R=>{if(!R)return;const C=n.aO(R),E=new n.aP(o,c.position,c.orientation,C);E.computeBoundsAndApplyParent(),this.models.push(E)}).catch(R=>{this.fire(new n.z(new Error(`Could not load model ${o} from ${c.uri}: ${R.message}`)))});g.push(A)}return Promise.allSettled(g).then(()=>{this._loaded=!0,this.fire(new n.A("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(o=>{this.fire(new n.z(new Error(`Could not load models: ${o.message}`)))})}onAdd(g){this.map=g,this.load()}hasTransition(){return!1}loaded(){return this._loaded}getModels(){return this.models}loadTile(g,o){}serialize(){return{type:"model"}}},"batched-model":class extends n.E{constructor(g,o,c,A){super(),this.type="batched-model",this.id=g,this.tileSize=512,this._options=o,this.tiles=this._options.tiles,this.maxzoom=o.maxzoom||19,this.minzoom=o.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=c,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(A)}onAdd(g){this.map=g,this.load()}reload(){this.cancelTileJSONRequest();const g=n.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(g))}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}load(g){this._loaded=!1,this.fire(new n.A("dataloading",{dataType:"source"}));const o=Array.isArray(this.map._language)?this.map._language.join():this.map._language,c=this.map.getWorldview();this._tileJSONRequest=ws(this._options,this.map._requestManager,o,c,(A,R)=>{this._tileJSONRequest=null,this._loaded=!0,A?(o&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${o}`),c&&c.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${c}`),this.fire(new n.z(A))):R&&(n.l(this,R),R.bounds&&(this.tileBounds=new ks(R.bounds,this.minzoom,this.maxzoom)),Ce(R.tiles,this.map._requestManager._customAccessToken),this.fire(new n.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.A("data",{dataType:"source",sourceDataType:"content"}))),g&&g(A)})}hasTransition(){return!1}hasTile(g){return!this.tileBounds||this.tileBounds.contains(g.canonical)}loaded(){return this._loaded}loadTile(g,o){const c=this.map._requestManager.normalizeTileURL(g.tileID.canonical.url(this.tiles,this.scheme)),A={request:this.map._requestManager.transformRequest(c,n.R.Tile),data:void 0,uid:g.uid,tileID:g.tileID,tileZoom:g.tileZoom,zoom:g.tileID.overscaledZ,tileSize:this.tileSize*g.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:g.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,pixelRatio:n.q.devicePixelRatio,promoteId:this.promoteId};if(g.actor&&g.state!=="expired")if(g.state==="loading")g.reloadCallback=o;else{if(g.buckets){const C=Object.values(g.buckets);for(const E of C)E.dirty=!0;return void(g.state="loaded")}g.request=g.actor.send("reloadTile",A,R.bind(this))}else g.actor=this.dispatcher.getActor(),g.request=g.actor.send("loadTile",A,R.bind(this),void 0,!0);function R(C,E){return g.aborted?o(null):C&&C.status!==404?o(C):(this.map._refreshExpiredTiles&&E&&g.setExpiryData(E),g.loadModelData(E,this.map.painter),g.state="loaded",void o(null))}}serialize(){return n.l({},this._options)}},canvas:class extends n.aK{constructor(g,o,c,A){super(g,o,c,A),o.coordinates?Array.isArray(o.coordinates)&&o.coordinates.length===4&&!o.coordinates.some(R=>!Array.isArray(R)||R.length!==2||R.some(C=>typeof C!="number"))||this.fire(new n.z(new n.V(`sources.${g}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new n.z(new n.V(`sources.${g}`,null,'missing required property "coordinates"'))),o.animate&&typeof o.animate!="boolean"&&this.fire(new n.z(new n.V(`sources.${g}`,null,'optional "animate" property must be a boolean value'))),o.canvas?typeof o.canvas=="string"||o.canvas instanceof HTMLCanvasElement||this.fire(new n.z(new n.V(`sources.${g}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new n.z(new n.V(`sources.${g}`,null,'missing required property "canvas"'))),this.options=o,this.animate=o.animate===void 0||o.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new n.z(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(g){this.map=g,this.load(),this.canvas&&this.animate&&this.play()}onRemove(g){this.pause()}prepare(){let g=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,g=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,g=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const o=this.map.painter.context;this.texture?!g&&!this._playing||this.texture instanceof n.aM||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new n.T(o,this.canvas,o.gl.RGBA8,{premultiply:!0}),this._prepareData(o)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const g of[this.canvas.width,this.canvas.height])if(isNaN(g)||g<=0)return!0;return!1}},custom:class extends n.E{constructor(g,o,c,A){super(),this.id=g,this.type="custom",this._dataType="raster",this._dispatcher=c,this._implementation=o,this.setEventedParent(A),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new n.z(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new n.z(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new ks(this._implementation.bounds,this.minzoom,this.maxzoom)),o.update=this._update.bind(this),o.clearTiles=this._clearTiles.bind(this),o.coveringTiles=this._coveringTiles.bind(this),n.l(this,n.aA(o,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return n.aA(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new n.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.A("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(g){this.map=g,this._loaded=!1,this.fire(new n.A("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(g),this.load()}onRemove(g){this._implementation.onRemove&&this._implementation.onRemove(g)}hasTile(g){if(this._implementation.hasTile){const{x:o,y:c,z:A}=g.canonical;return this._implementation.hasTile({x:o,y:c,z:A})}return!this.tileBounds||this.tileBounds.contains(g.canonical)}loadTile(g,o){const{x:c,y:A,z:R}=g.tileID.canonical,C=new AbortController;g.request=Promise.resolve(this._implementation.loadTile({x:c,y:A,z:R},{signal:C.signal})).then((function(E){return delete g.request,g.aborted?(g.state="unloaded",o(null)):E===void 0?(g.state="errored",o(null)):E===null?(this.loadTileData(g,{width:this.tileSize,height:this.tileSize,data:null}),g.state="loaded",o(null)):function(L){return L instanceof ImageData||L instanceof HTMLCanvasElement||L instanceof ImageBitmap||L instanceof HTMLImageElement}(E)?(this.loadTileData(g,E),g.state="loaded",void o(null)):(g.state="errored",o(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(E=>{E.name!=="AbortError"&&(g.state="errored",o(E))}),g.request.cancel=()=>C.abort()}loadTileData(g,o){g.setTexture(o,this.map.painter)}unloadTile(g,o){if(g.texture&&g.texture instanceof n.T?(g.destroy(!0),g.texture&&g.texture instanceof n.T&&this.map.painter.saveTileTexture(g.texture)):g.destroy(),this._implementation.unloadTile){const{x:c,y:A,z:R}=g.tileID.canonical;this._implementation.unloadTile({x:c,y:A,z:R})}o&&o()}abortTile(g,o){g.request&&g.request.cancel&&(g.request.cancel(),delete g.request),o&&o()}hasTransition(){return!1}_coveringTiles(){return this.map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(g=>({x:g.canonical.x,y:g.canonical.y,z:g.canonical.z}))}_clearTiles(){const g=n.C(this.id,this.scope);this.map.style.clearSource(g)}_update(){this.fire(new n.A("data",{dataType:"source",sourceDataType:"content"}))}}},Mo=function(g,o,c,A){const R=new ql[o.type](g,o,c,A);if(R.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${R.id}`);return n.aQ(["load","abort","unload","serialize","prepare"],R),R};function wd(g,o,c=""){return`${c}:${o.id||""}:${o.layer.id}:${function(A){if("layerId"in A)return`layer:${A.layerId}`;{const{featuresetId:R,importId:C}=A;return`featureset:${R}${C?`:import:${C}`:""}`}}(g.target)}`}function zc(g,o,c,A=""){if(g.uniqueFeatureID){const R=wd(g,o,A);if(c.has(R))return!0;c.add(R)}return!1}function ih(g,o,c,A,R=!1){const C=o.sourceCache.transform,E=o.sourceCache.tilesIn(g,o.has3DLayers,R);E.sort(hl);const L=[];for(const j of E){const $=j.tile.queryRenderedFeatures(o,j,c,A,C,R);Object.keys($).length&&L.push({wrappedTileID:j.tile.tileID.wrapped().key,queryResults:$})}return L.length===0?{}:function(j){const $={},W={};for(const te of j){const ae=te.queryResults,de=te.wrappedTileID,Te=W[de]=W[de]||{};for(const ve in ae){const Ee=ae[ve],Ve=Te[ve]=Te[ve]||{},Be=$[ve]=$[ve]||[];for(const et of Ee)Ve[et.featureIndex]||(Ve[et.featureIndex]=!0,Be.push(et))}}return $}(L)}function pu(g,o,c,A,R){const C={},E=A.queryRenderedSymbols(g),L=[];for(const j of Object.keys(E).map(Number))L.push(R[j]);L.sort(hl);for(const j of L){const $=j.featureIndex.lookupSymbolFeatures(E[j.bucketInstanceId],j.bucketIndex,j.sourceLayerIndex,o,c);for(const W in $){const te=C[W]=C[W]||[],ae=$[W];ae.sort((de,Te)=>{const ve=j.featureSortOrder;if(ve){const Ee=ve.indexOf(de.featureIndex);return ve.indexOf(Te.featureIndex)-Ee}return Te.featureIndex-de.featureIndex});for(const de of ae)te.push(de)}}return C}function Oc(g,o){const c=g.getRenderableIds().map(C=>g.getTileByID(C)),A=[],R={};for(let C=0;C<c.length;C++){const E=c[C],L=E.tileID.canonical.key;R[L]||(R[L]=!0,E.querySourceFeatures(A,o))}return A}function hl(g,o){const c=g.tileID,A=o.tileID;return c.overscaledZ-A.overscaledZ||c.canonical.y-A.canonical.y||c.wrap-A.wrap||c.canonical.x-A.canonical.x}function Xs(g,o){const c={};if(!o)return c;for(const A of g){const R=A.layerIds.map(C=>o.getLayer(C)).filter(Boolean);if(R.length!==0){A.layers=R,A.stateDependentLayerIds&&(A.stateDependentLayers=A.stateDependentLayerIds.map(C=>R.filter(E=>E.id===C)[0]));for(const C of R)c[C.fqid]=A}}return c}const Io=32,Hl=33,mu=new Uint16Array(8184);for(let g=0;g<2046;g++){let o=g+2,c=0,A=0,R=0,C=0,E=0,L=0;for(1&o?R=C=E=Io:c=A=L=Io;(o>>=1)>1;){const $=c+R>>1,W=A+C>>1;1&o?(R=c,C=A,c=E,A=L):(c=R,A=C,R=E,C=L),E=$,L=W}const j=4*g;mu[j+0]=c,mu[j+1]=A,mu[j+2]=R,mu[j+3]=C}const oo=new Uint16Array(2178),Lo=new Uint8Array(1089),Rd=new Uint16Array(1089);function ku(g){return g===0?-.03125:g===32?.03125:0}const mf={type:2,extent:n.ai,loadGeometry:()=>[[new n.P(0,0),new n.P(n.ai+1,0),new n.P(n.ai+1,n.ai+1),new n.P(0,n.ai+1),new n.P(0,0)]]};class $l{constructor(o,c,A,R,C){this.tileID=o,this.uid=n.aW(),this.uses=0,this.tileSize=c,this.tileZoom=A,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=C,R&&R.style&&(this._lastUpdatedBrightness=R.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",R&&R.transform&&(this.projection=R.transform.projection)}registerFadeDuration(o){const c=o+this.timeAdded;c<n.q.now()||this.fadeEndTime&&c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=n.aR(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(o,c,A){if(this.unloadVectorData(),this.state="loaded",o){o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=Xs(o.buckets,c.style),this.hasSymbolBuckets=!1;for(const R in this.buckets){const C=this.buckets[R];if(C instanceof n.aY){if(this.hasSymbolBuckets=!0,!A)break;C.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const R in this.buckets){const C=this.buckets[R];if(C instanceof n.aY&&C.hasRTLText){this.hasRTLText=!0,n.aZ();break}}this.queryPadding=0;for(const R in this.buckets){const C=this.buckets[R],E=c.style.getOwnLayer(R);if(!E)continue;const L=E.queryRadius(C);this.queryPadding=Math.max(this.queryPadding,L)}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage),o.lineAtlas&&(this.lineAtlas=o.lineAtlas),this._lastUpdatedBrightness=o.brightness}else this.collisionBoxArray=new n.aX}unloadVectorData(){if(this.hasData()){for(const o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}loadModelData(o,c,A){o&&(o.resourceTiming&&(this.resourceTiming=o.resourceTiming),this.buckets=Object.assign({},this.buckets,Xs(o.buckets,c.style)),o.featureIndex&&(this.latestFeatureIndex=o.featureIndex))}getBucket(o){return this.buckets[o.fqid]}upload(o){for(const R in this.buckets){const C=this.buckets[R];C.uploadPending()&&C.upload(o)}const c=o.gl,A=this.imageAtlas;A&&!A.uploaded&&(this.imageAtlasTexture=new n.T(o,A.image,c.RGBA8,{useMipmap:!!A.patternPositions.size}),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new n.T(o,this.glyphAtlasImage,c.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new n.T(o,this.lineAtlas.image,c.R8),this.lineAtlas.uploaded=!0)}prepare(o,c,A){if(this.imageAtlas&&this.imageAtlasTexture&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture,A),!c||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;const R=c.style.getBrightness();(this._lastUpdatedBrightness||R)&&(this._lastUpdatedBrightness&&R&&Math.abs(this._lastUpdatedBrightness-R)<.001||(this.updateBuckets(c,this._lastUpdatedBrightness!==R),this._lastUpdatedBrightness=R))}queryRenderedFeatures(o,c,A,R,C,E){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData&&!this.latestFeatureIndex.is3DTile)return{};const L=function(j,$){const W=n.ad.mat4.fromScaling([],[.5*j.width,.5*-j.height,1]);return n.ad.mat4.translate(W,W,[1,-1,0]),n.ad.mat4.multiply(W,W,j.calculateProjMatrix($.toUnwrapped())),Float32Array.from(W)}(C,this.tileID);return this.latestFeatureIndex.query(o,{tilespaceGeometry:c,pixelPosMatrix:L,transform:R,availableImages:A,tileTransform:this.tileTransform})}querySourceFeatures(o,c){const A=this.latestFeatureIndex;if(!A||!A.rawTileData)return;const R=A.loadVTLayers(),C=c?c.sourceLayer:"",E=R._geojsonTileLayer||R[C];if(!E)return;const L=n.a_(c&&c.filter),{z:j,x:$,y:W}=this.tileID.canonical,te={z:j,x:$,y:W};for(let ae=0;ae<E.length;ae++){const de=E.feature(ae);if(L.needGeometry){const Ee=n.a$(de,!0);if(!L.filter(new n.aa(this.tileID.overscaledZ),Ee,this.tileID.canonical))continue}else if(!L.filter(new n.aa(this.tileID.overscaledZ),de))continue;const Te=A.getId(de,C),ve=new n.b0(de,j,$,W,Te);ve.tile=te,o.push(ve)}}loaded(){return this.state==="loaded"||this.state==="errored"}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!this.imageAtlas.patternPositions.size}setExpiryData(o){const c=this.expirationTime;if(o.cacheControl){const A=n.b1(o.cacheControl);A["max-age"]&&(this.expirationTime=Date.now()+1e3*A["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){const A=Date.now();let R=!1;if(this.expirationTime>A)R=!1;else if(c)if(this.expirationTime<c)R=!0;else{const C=this.expirationTime-c;C?this.expirationTime=A+Math.max(C,3e4):R=!0}else R=!0;R?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}refreshFeatureState(o){this.latestFeatureIndex&&(this.latestFeatureIndex.rawTileData||this.latestFeatureIndex.is3DTile)&&o&&this.updateBuckets(o)}updateBuckets(o,c){if(!this.latestFeatureIndex||!o.style)return;const A=this.latestFeatureIndex.loadVTLayers(),R=o.style.listImages(),C=o.style.getBrightness();for(const E in this.buckets){if(!o.style.hasLayer(E))continue;const L=this.buckets[E],j=L.layers[0],$=j.sourceLayer||"_geojsonTileLayer",W=A[$],te=o.style.getLayerSourceCache(j);let ae={};te&&(ae=te._state.getState($,void 0));const de=this.imageAtlas?Object.fromEntries(this.imageAtlas.patternPositions):{},Te=Object.keys(ae).length>0&&!c;Te&&!L.stateDependentLayers.length&&!c||L.update(ae,W,R,de,Te?L.stateDependentLayers:L.layers,c,C),(L instanceof n.b2||L instanceof n.b3)&&o._terrain&&o._terrain.enabled&&te&&L.uploadPending()&&o._terrain._clearRenderCacheForTile(te.id,this.tileID);const ve=o&&o.style&&o.style.getOwnLayer(E);ve&&(this.queryPadding=Math.max(this.queryPadding,ve.queryRadius(L)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<n.q.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(o){this.symbolFadeHoldUntil=n.q.now()+o}setTexture(o,c){const A=c.context,R=A.gl;this.texture=this.texture||c.getTileTexture(o.width),this.texture&&this.texture instanceof n.T?this.texture.update(o):(this.texture=new n.T(A,o,R.RGBA8,{useMipmap:!0}),this.texture.bind(R.LINEAR,R.CLAMP_TO_EDGE))}setDependencies(o,c){const A={};for(const R of c)A[R]=!0;this.dependencies[o]=A}hasDependency(o,c){for(const A of o){const R=this.dependencies[A];if(R){for(const C of c)if(R[C])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(o,c){if(!c||c.name==="mercator"||this._tileDebugBuffer)return;const A=n.b4(mf,this.tileID.canonical,this.tileTransform)[0],R=new n.b5,C=new n.b6;for(let E=0;E<A.length;E++){const{x:L,y:j}=A[E];R.emplaceBack(L,j),C.emplaceBack(E)}C.emplaceBack(0),this._tileDebugIndexBuffer=o.createIndexBuffer(C),this._tileDebugBuffer=o.createVertexBuffer(R,n.b7.members),this._tileDebugSegments=n.b8.simpleSegment(0,0,R.length,C.length)}_makeTileBoundsBuffers(o,c){if(this._tileBoundsBuffer||!c||c.name==="mercator")return;const A=n.b4(mf,this.tileID.canonical,this.tileTransform)[0];let R,C;if(this.isRaster){const E=function(L,j){const $=n.aR(L,j),W=Math.pow(2,L.z);for(let Ee=0;Ee<Hl;Ee++)for(let Ve=0;Ve<Hl;Ve++){const Be=n.aS((L.x+(Ve+ku(Ve))/Io)/W),et=n.aT((L.y+(Ee+ku(Ee))/Io)/W),Je=j.project(Be,et),dt=Ee*Hl+Ve;oo[2*dt+0]=Math.round((Je.x*$.scale-$.x)*n.ai),oo[2*dt+1]=Math.round((Je.y*$.scale-$.y)*n.ai)}Lo.fill(0),Rd.fill(0);for(let Ee=2045;Ee>=0;Ee--){const Ve=4*Ee,Be=mu[Ve+0],et=mu[Ve+1],Je=mu[Ve+2],dt=mu[Ve+3],it=Be+Je>>1,st=et+dt>>1,ot=it+st-et,gt=st+Be-it,Tt=et*Hl+Be,Xt=dt*Hl+Je,Ft=st*Hl+it,ra=Math.hypot((oo[2*Tt+0]+oo[2*Xt+0])/2-oo[2*Ft+0],(oo[2*Tt+1]+oo[2*Xt+1])/2-oo[2*Ft+1])>=16;Lo[Ft]=Lo[Ft]||(ra?1:0),Ee<1022&&(Lo[Ft]=Lo[Ft]||Lo[(et+gt>>1)*Hl+(Be+ot>>1)]||Lo[(dt+gt>>1)*Hl+(Je+ot>>1)])}const te=new n.aU,ae=new n.aV;let de=0;function Te(Ee,Ve){const Be=Ve*Hl+Ee;return Rd[Be]===0&&(te.emplaceBack(oo[2*Be+0],oo[2*Be+1],Ee*n.ai/Io,Ve*n.ai/Io),Rd[Be]=++de),Rd[Be]-1}function ve(Ee,Ve,Be,et,Je,dt){const it=Ee+Be>>1,st=Ve+et>>1;if(Math.abs(Ee-Je)+Math.abs(Ve-dt)>1&&Lo[st*Hl+it])ve(Je,dt,Ee,Ve,it,st),ve(Be,et,Je,dt,it,st);else{const ot=Te(Ee,Ve),gt=Te(Be,et),Tt=Te(Je,dt);ae.emplaceBack(ot,gt,Tt)}}return ve(0,0,Io,Io,Io,0),ve(Io,Io,0,0,0,Io),{vertices:te,indices:ae}}(this.tileID.canonical,c);R=E.vertices,C=E.indices}else{R=new n.aU,C=new n.aV;for(const{x:L,y:j}of A)R.emplaceBack(L,j,0,0);const E=n.b9(R.int16,void 0,4);for(let L=0;L<E.length;L+=3)C.emplaceBack(E[L],E[L+1],E[L+2])}this._tileBoundsBuffer=o.createVertexBuffer(R,n.ba.members),this._tileBoundsIndexBuffer=o.createIndexBuffer(C),this._tileBoundsSegments=n.b8.simpleSegment(0,0,R.length,C.length)}_makeGlobeTileDebugBuffers(o,c){const A=c.projection;if(!A||A.name!=="globe"||c.freezeTileCoverage)return;const R=this.tileID.canonical,C=n.bb(R,c),E=n.bc(C),L=n.ag(c.zoom);let j;L>0&&(j=n.ad.mat4.invert(new Float64Array(16),c.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(o,R,c,E,j,L),this._makeGlobeTileDebugTextBuffer(o,R,c,E,j,L)}_globePoint(o,c,A,R,C,E,L){let j=n.bd(o,c,A);if(E){const $=1<<A.z,W=n.av(R.center.lng),te=n.aC(R.center.lat),ae=(A.x+.5)/$-W;let de=0;ae>.5?de=-1:ae<-.5&&(de=1);let Te=(o/n.ai+A.x)/$+de,ve=(c/n.ai+A.y)/$;Te=(Te-W)*R._pixelsPerMercatorPixel+W,ve=(ve-te)*R._pixelsPerMercatorPixel+te;const Ee=[Te*R.worldSize,ve*R.worldSize,0];n.ad.vec3.transformMat4(Ee,Ee,E),j=n.be(j,Ee,L)}return n.ad.vec3.transformMat4(j,j,C)}_makeGlobeTileDebugBorderBuffer(o,c,A,R,C,E){const L=new n.b5,j=new n.b6,$=new n.bf,W=(ae,de,Te,ve,Ee)=>{const Ve=(Te-ae)/(Ee-1),Be=(ve-de)/(Ee-1),et=L.length;for(let Je=0;Je<Ee;Je++){const dt=ae+Je*Ve,it=de+Je*Be;L.emplaceBack(dt,it);const st=this._globePoint(dt,it,c,A,R,C,E);$.emplaceBack(st[0],st[1],st[2]),j.emplaceBack(et+Je)}},te=n.ai;W(0,0,te,0,16),W(te,0,te,te,16),W(te,te,0,te,16),W(0,te,0,0,16),this._tileDebugIndexBuffer=o.createIndexBuffer(j),this._tileDebugBuffer=o.createVertexBuffer(L,n.b7.members),this._globeTileDebugBorderBuffer=o.createVertexBuffer($,n.bg.members),this._tileDebugSegments=n.b8.simpleSegment(0,0,L.length,j.length)}_makeGlobeTileDebugTextBuffer(o,c,A,R,C,E){const L=n.ai/4,j=new n.b5,$=new n.aV,W=new n.bf,te=25;$.reserve(32),j.reserve(te),W.reserve(te);const ae=(de,Te)=>te*de+Te;for(let de=0;de<te;de++){const Te=de*L;for(let ve=0;ve<te;ve++){const Ee=ve*L;j.emplaceBack(Ee,Te);const Ve=this._globePoint(Ee,Te,c,A,R,C,E);W.emplaceBack(Ve[0],Ve[1],Ve[2])}}for(let de=0;de<4;de++)for(let Te=0;Te<4;Te++){const ve=ae(de,Te),Ee=ae(de,Te+1),Ve=ae(de+1,Te),Be=ae(de+1,Te+1);$.emplaceBack(ve,Ee,Ve),$.emplaceBack(Ve,Ee,Be)}this._tileDebugTextIndexBuffer=o.createIndexBuffer($),this._tileDebugTextBuffer=o.createVertexBuffer(j,n.b7.members),this._globeTileDebugTextBuffer=o.createVertexBuffer(W,n.bg.members),this._tileDebugTextSegments=n.b8.simpleSegment(0,0,te,32)}destroy(o=!1){for(const c in this.buckets)this.buckets[c].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),!o&&this.texture&&this.texture instanceof n.T&&(this.texture.destroy(),delete this.texture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.rasterParticleState&&(this.rasterParticleState.destroy(),delete this.rasterParticleState),this.latestFeatureIndex=null,this.state="unloaded"}}n.bh.setPbf(n.bi);class Fo extends $l{constructor(o,c,A,R,C){super(o,c,A,R,C),this._workQueue=[],this._fetchQueue=[],this._isHeaderLoaded=!1}getLayers(){return this._mrt?Object.values(this._mrt.layers):[]}getLayer(o){return this._mrt&&this._mrt.getLayer(o)}setTexture(o,c){const A=c.context,R=A.gl;this.texture=this.texture||c.getTileTexture(o.width),this.texture&&this.texture instanceof n.T?this.texture.update(o,{premultiply:!1}):this.texture=new n.T(A,o,R.RGBA8,{premultiply:!1})}flushQueues(){for(;this._workQueue.length;)this._workQueue.pop()();for(;this._fetchQueue.length;)this._fetchQueue.pop()()}fetchHeader(o=16384,c){const A=this._mrt=new n.bh(30),R=Object.assign({},this.requestParams,{headers:{Range:"bytes=0-"+(o-1)}});return this.entireBuffer=null,this.request=n.bj(R,(C,E,L,j)=>{if(C)c(C);else try{const $=A.getHeaderLength(E);if($>o)return void(this.request=this.fetchHeader($,c));A.parseHeader(E),this._isHeaderLoaded=!0;let W=0;for(const te of Object.values(A.layers))W=Math.max(W,te.dataIndex[te.dataIndex.length-1].lastByte);E.byteLength>=W&&(this.entireBuffer=E),c(null,this.entireBuffer||E,L,j)}catch($){c($)}}),this.request}fetchBand(o,c,A){const R=this._mrt;if(!this._isHeaderLoaded||!R)return void A(new Error("Tile header is not ready"));const C=this.actor;if(!C)return void A(new Error("Can't fetch tile band without an actor"));let E;const L=(te,ae)=>{E.complete(te,ae),te?A(te):(this.updateTextureDescriptor(o,c),A(null,this.textureDescriptor&&this.textureDescriptor.img))},j=(te,ae)=>{if(te)return A(te);const de=C.send("decodeRasterArray",{type:"raster-array",source:this.source,scope:this.scope,tileID:this.tileID,uid:this.uid,buffer:ae,task:E},L,void 0,!0);this._workQueue.push(()=>{de&&de.cancel(),E.cancel()})},$=R.getLayer(o);if(!$)return void A(new Error(`Unknown sourceLayer "${o}"`));if($.hasDataForBand(c))return this.updateTextureDescriptor(o,c),void A(null,this.textureDescriptor?this.textureDescriptor.img:null);const W=$.getDataRange([c]);if(E=R.createDecodingTask(W),!E||E.tasks.length)if(this.flushQueues(),this.entireBuffer)j(null,this.entireBuffer.slice(W.firstByte,W.lastByte+1));else{const te=Object.assign({},this.requestParams,{headers:{Range:`bytes=${W.firstByte}-${W.lastByte}`}}),ae=n.bj(te,j);this._fetchQueue.push(()=>{ae.cancel(),E.cancel()})}else A(null)}updateNeeded(o,c){return(!this.textureDescriptor||this.textureDescriptor.band!==c||this.textureDescriptor.layer!==o)&&this.state!=="errored"}updateTextureDescriptor(o,c){if(!this._mrt)return;const A=this._mrt.getLayer(o);if(!A||!A.hasBand(c)||!A.hasDataForBand(c))return;const{bytes:R,tileSize:C,buffer:E,offset:L,scale:j}=A.getBandView(c),$=C+2*E,W=new n.r({width:$,height:$},R),te=this.texture;te&&te instanceof n.T&&te.update(W,{premultiply:!1}),this.textureDescriptor={layer:o,band:c,img:W,buffer:E,offset:L,tileSize:C,format:A.pixelFormat,mix:[j,256*j,65536*j,16777216*j]}}}class Bu{constructor(o,c){this.max=o,this.onRemove=c,this.reset()}reset(){for(const o in this.data)for(const c of this.data[o])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(o,c,A){const R=o.wrapped().key;this.data[R]===void 0&&(this.data[R]=[]);const C={value:c,timeout:void 0};if(A!==void 0&&(C.timeout=setTimeout(()=>{this.remove(o,C)},A)),this.data[R].push(C),this.order.push(R),this.order.length>this.max){const E=this._getAndRemoveByKey(this.order[0]);E&&this.onRemove(E)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){const c=this.data[o].shift();return c.timeout&&clearTimeout(c.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),c.value}getByKey(o){const c=this.data[o];return c?c[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,c){if(!this.has(o))return this;const A=o.wrapped().key,R=c===void 0?0:this.data[A].indexOf(c),C=this.data[A][R];return this.data[A].splice(R,1),C.timeout&&clearTimeout(C.timeout),this.data[A].length===0&&delete this.data[A],this.onRemove(C.value),this.order.splice(this.order.indexOf(A),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(o){const c=[];for(const A in this.data)for(const R of this.data[A])o(R.value)||c.push(R);for(const A of c)this.remove(A.value.tileID,A)}}class sh{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(o,c,A){const R=String(c);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][R]=this.stateChanges[o][R]||{},n.l(this.stateChanges[o][R],A),this.deletedStates[o]===null){this.deletedStates[o]={};for(const C in this.state[o])C!==R&&(this.deletedStates[o][C]=null)}else if(this.deletedStates[o]&&this.deletedStates[o][R]===null){this.deletedStates[o][R]={};for(const C in this.state[o][R])A[C]||(this.deletedStates[o][R][C]=null)}else for(const C in A)this.deletedStates[o]&&this.deletedStates[o][R]&&this.deletedStates[o][R][C]===null&&delete this.deletedStates[o][R][C]}removeFeatureState(o,c,A){if(this.deletedStates[o]===null)return;const R=String(c);if(this.deletedStates[o]=this.deletedStates[o]||{},A&&c!==void 0)this.deletedStates[o][R]!==null&&(this.deletedStates[o][R]=this.deletedStates[o][R]||{},this.deletedStates[o][R][A]=null);else if(c!==void 0)if(this.stateChanges[o]&&this.stateChanges[o][R])for(A in this.deletedStates[o][R]={},this.stateChanges[o][R])this.deletedStates[o][R][A]=null;else this.deletedStates[o][R]=null;else this.deletedStates[o]=null}getState(o,c){const A=this.state[o]||{},R=this.stateChanges[o]||{},C=this.deletedStates[o];if(C===null)return{};if(c!==void 0){const L=String(c),j=n.l({},A[L],R[L]);if(C){const $=C[c];if($===null)return{};for(const W in $)delete j[W]}return j}const E=n.l({},A,R);if(C)for(const L in C)delete E[L];return E}initializeTileState(o,c){o.refreshFeatureState(c)}coalesceChanges(o,c){const A={};for(const R in this.stateChanges){this.state[R]=this.state[R]||{};const C={};for(const E in this.stateChanges[R])this.state[R][E]||(this.state[R][E]={}),n.l(this.state[R][E],this.stateChanges[R][E]),C[E]=this.state[R][E];A[R]=C}for(const R in this.deletedStates){this.state[R]=this.state[R]||{};const C={};if(this.deletedStates[R]===null)for(const E in this.state[R])C[E]={},this.state[R][E]={};else for(const E in this.deletedStates[R]){if(this.deletedStates[R][E]===null)this.state[R][E]={};else if(this.state[R][E])for(const L of Object.keys(this.deletedStates[R][E]))delete this.state[R][E][L];C[E]=this.state[R][E]}A[R]=A[R]||{},n.l(A[R],C)}if(this.stateChanges={},this.deletedStates={},Object.keys(A).length!==0)for(const R in o)o[R].refreshFeatureState(c)}}class Yo extends n.E{constructor(o,c,A){super(),this.id=o,this._onlySymbols=A,c.on("data",R=>{R.dataType==="source"&&R.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&R.dataType==="source"&&R.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),c.on("error",()=>{this._sourceErrored=!0}),this._source=c,this._tiles={},this._cache=new Bu(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=c.minTileCacheSize,this._maxTileCacheSize=c.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this.tileCoverLift=0,this._coveredTiles={},this._shadowCasterTiles={},this._state=new sh,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="raster-array"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(o){this.map=o,this._minTileCacheSize=this._minTileCacheSize===void 0&&o?o._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&o?o._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const o in this._tiles)if(!this._tiles[o].loaded())return!1;return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(o,c){return o.isSymbolTile=this._onlySymbols,o.isExtraShadowCaster=this._shadowCasterTiles[o.tileID.key],this._source.loadTile(o,c)}_unloadTile(o){if(this._source.unloadTile)return this._source.unloadTile(o)}_abortTile(o){if(this._source.abortTile)return this._source.abortTile(o)}serialize(){return this._source.serialize()}prepare(o){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const A=this._tiles[c];A.upload(o),A.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return Object.values(this._tiles).map(o=>o.tileID).sort(bn).map(o=>o.key)}getRenderableIds(o,c){const A=[];for(const R in this._tiles)this._isIdRenderable(+R,o,c)&&A.push(this._tiles[R]);return o?A.sort((R,C)=>{const E=R.tileID,L=C.tileID,j=new n.P(E.canonical.x,E.canonical.y)._rotate(this.transform.angle),$=new n.P(L.canonical.x,L.canonical.y)._rotate(this.transform.angle);return E.overscaledZ-L.overscaledZ||$.y-j.y||$.x-j.x}).map(R=>R.tileID.key):A.map(R=>R.tileID).sort(bn).map(R=>R.key)}hasRenderableParent(o){const c=this.findLoadedParent(o,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(o,c,A){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(c||!this._tiles[o].holdingForFade())&&(A||!this._shadowCasterTiles[o])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const o in this._tiles)this._tiles[o].state!=="errored"&&this._reloadTile(+o,"reloading")}}_reloadTile(o,c){const A=this._tiles[o];A&&(A.state!=="loading"&&(A.state=c),this._loadTile(A,this._tileLoaded.bind(this,A,o,c)))}_tileLoaded(o,c,A,R){if(R)if(o.state="errored",R.status!==404)this._source.fire(new n.z(R,{tile:o}));else{if(this._source.fire(new n.A("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id,tile:o})),!(o.tileID.key in this._loadedParentTiles))return;if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const C=this.map.painter.terrain;this.update(this.transform,C.getScaledDemTileSize(),!0),C.resetTileLookupCache(this.id)}else this.update(this.transform)}else o.timeAdded=n.q.now(),A==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(c,o),this._source.type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),this._source.fire(new n.A("data",{dataType:"source",tile:o,coord:o.tileID,sourceCacheId:this.id}))}_backfillDEM(o){const c=this.getRenderableIds();for(let R=0;R<c.length;R++){const C=c[R];if(o.neighboringTiles&&o.neighboringTiles[C]){const E=this.getTileByID(C);A(o,E),A(E,o)}}function A(R,C){if(!R.dem||R.dem.borderReady)return;R.needsHillshadePrepare=!0,R.needsDEMTextureUpload=!0;let E=C.tileID.canonical.x-R.tileID.canonical.x;const L=C.tileID.canonical.y-R.tileID.canonical.y,j=Math.pow(2,R.tileID.canonical.z),$=C.tileID.key;E===0&&L===0||Math.abs(L)>1||(Math.abs(E)>1&&(Math.abs(E+j)===1?E+=j:Math.abs(E-j)===1&&(E-=j)),C.dem&&R.dem&&(R.dem.backfillBorder(C.dem,E,L),R.neighboringTiles&&R.neighboringTiles[$]&&(R.neighboringTiles[$].backfilled=!0)))}}getTile(o){return this.getTileByID(o.key)}getTileByID(o){return this._tiles[o]}_retainLoadedChildren(o,c,A,R){for(const C in this._tiles){let E=this._tiles[C];if(R[C]||!E.hasData()||E.tileID.overscaledZ<=c||E.tileID.overscaledZ>A)continue;let L=E.tileID;for(;E&&E.tileID.overscaledZ>c+1;){const $=E.tileID.scaledTo(E.tileID.overscaledZ-1);E=this._tiles[$.key],E&&E.hasData()&&(L=$)}let j=L;for(;j.overscaledZ>c;)if(j=j.scaledTo(j.overscaledZ-1),o[j.key]){R[L.key]=L;break}}}findLoadedParent(o,c){if(o.key in this._loadedParentTiles){const A=this._loadedParentTiles[o.key];return A&&A.tileID.overscaledZ>=c?A:null}for(let A=o.overscaledZ-1;A>=c;A--){const R=o.scaledTo(A),C=this._getLoadedTile(R);if(C)return C}}_getLoadedTile(o){const c=this._tiles[o.key];return c&&c.hasData()?c:this._cache.getByKey(this._source.reparseOverscaled?o.wrapped().key:o.canonical.key)}updateCacheSize(o,c){c=c||this._source.tileSize;const A=Math.ceil(o.width/c)+1,R=Math.ceil(o.height/c)+1,C=Math.floor(A*R*5),E=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,C):C,L=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,E):E;this._cache.setMaxSize(L)}handleWrapJump(o){const c=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,c){const A={};for(const R in this._tiles){const C=this._tiles[R];C.tileID=C.tileID.unwrapTo(C.tileID.wrap+c),A[C.tileID.key]=C}this._tiles=A;for(const R in this._timers)clearTimeout(this._timers[R]),delete this._timers[R];for(const R in this._tiles)this._setTileReloadTimer(+R,this._tiles[R])}}update(o,c,A,R){if(this.transform=o,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!A)return;this.updateCacheSize(o,c),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={};const C=this._source.type==="batched-model";let E,L=this._source.maxzoom;const j=this.map&&this.map.painter?this.map.painter._terrain:null;if(j&&j.sourceCache===this&&j.attenuationRange()){const te=j.attenuationRange()[0],ae=Math.floor(te)-Math.log2(j.getDemUpscale());L>ae&&(L=ae)}if(this.used||this.usedForTerrain){if(this._source.tileID)E=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(te=>new n.aH(te.canonical.z,te.wrap,te.canonical.z,te.canonical.x,te.canonical.y));else if(this.tileCoverLift!==0){const te=o.clone();te.tileCoverLift=this.tileCoverLift,E=te.coveringTiles({tileSize:c||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:L,roundZoom:this._source.roundZoom&&!A,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:C}),this._source.minzoom<=1&&o.projection.name==="globe"&&(E.push(new n.aH(1,0,1,0,0)),E.push(new n.aH(1,0,1,1,0)),E.push(new n.aH(1,0,1,0,1)),E.push(new n.aH(1,0,1,1,1)))}else if(E=o.coveringTiles({tileSize:c||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:L,roundZoom:this._source.roundZoom&&!A,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:C}),this._source.hasTile){const te=this._source.hasTile.bind(this._source);E=E.filter(ae=>te(ae))}}else E=[];if(E.length>0&&this.castsShadows&&R&&this.transform.projection.name!=="globe"&&!this.usedForTerrain&&!lo(this._source.type)){const te=o.coveringZoomLevel({tileSize:c||this._source.tileSize,roundZoom:this._source.roundZoom&&!A}),ae=Math.min(te,this._source.maxzoom);if(C){const de=o.extendTileCover(E,ae);for(const Te of de)E.push(Te)}else{const de=o.extendTileCover(E,ae,R);for(const Te of de)this._shadowCasterTiles[Te.key]=!0,E.push(Te)}}const $=this._updateRetainedTiles(E);if(lo(this._source.type)&&E.length!==0){const te={},ae={},de=Object.keys($);for(const ve of de){const Ee=$[ve],Ve=this._tiles[ve];if(!Ve||Ve.fadeEndTime&&Ve.fadeEndTime<=n.q.now())continue;const Be=this.findLoadedParent(Ee,Math.max(Ee.overscaledZ-Yo.maxOverzooming,this._source.minzoom));Be&&(this._addTile(Be.tileID),te[Be.tileID.key]=Be.tileID),ae[ve]=Ee}const Te=E[E.length-1].overscaledZ;for(const ve in this._tiles){const Ee=this._tiles[ve];if($[ve]||!Ee.hasData())continue;let Ve=Ee.tileID;for(;Ve.overscaledZ>Te;){Ve=Ve.scaledTo(Ve.overscaledZ-1);const Be=this._tiles[Ve.key];if(Be&&Be.hasData()&&ae[Ve.key]){$[ve]=Ee.tileID;break}}}for(const ve in te)$[ve]||(this._coveredTiles[ve]=!0,$[ve]=te[ve])}for(const te in $)this._tiles[te].clearFadeHold();const W=n.bk(this._tiles,$);for(const te of W){const ae=this._tiles[te];ae.hasSymbolBuckets&&!ae.holdingForFade()?ae.setHoldDuration(this.map._fadeDuration):ae.hasSymbolBuckets&&!ae.symbolFadeFinished()||this._removeTile(+te)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(+o)}_updateRetainedTiles(o){const c={};if(o.length===0)return c;const A={},R=o.reduce(($,W)=>Math.min($,W.overscaledZ),1/0),C=o[0].overscaledZ,E=Math.max(C-Yo.maxOverzooming,this._source.minzoom),L=Math.max(C+Yo.maxUnderzooming,this._source.minzoom),j={};for(const $ of o){const W=this._addTile($);c[$.key]=$,W.hasData()||R<this._source.maxzoom&&(j[$.key]=$)}this._retainLoadedChildren(j,R,L,c);for(const $ of o){let W=this._tiles[$.key];if(W.hasData())continue;if($.canonical.z>=this._source.maxzoom){const ae=$.children(this._source.maxzoom)[0],de=this.getTile(ae);if(de&&de.hasData()){c[ae.key]=ae;continue}}else{const ae=$.children(this._source.maxzoom);if(c[ae[0].key]&&c[ae[1].key]&&c[ae[2].key]&&c[ae[3].key])continue}let te=W.wasRequested();for(let ae=$.overscaledZ-1;ae>=E;--ae){const de=$.scaledTo(ae);if(A[de.key]||(A[de.key]=!0,W=this.getTile(de),!W&&te&&(W=this._addTile(de)),W&&(c[de.key]=de,te=W.wasRequested(),W.hasData())))break}}return c}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const o in this._tiles){const c=[];let A,R=this._tiles[o].tileID;for(;R.overscaledZ>0;){if(R.key in this._loadedParentTiles){A=this._loadedParentTiles[R.key];break}c.push(R.key);const C=R.scaledTo(R.overscaledZ-1);if(A=this._getLoadedTile(C),A)break;R=C}for(const C of c)this._loadedParentTiles[C]=A}}_addTile(o){let c=this._tiles[o.key];if(c)return c.isExtraShadowCaster!==!0||this._shadowCasterTiles[o.key]||this._reloadTile(o.key,"reloading"),c;c=this._cache.getAndRemove(o),c&&(this._setTileReloadTimer(o.key,c),c.tileID=o,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,c)));const A=!!c;if(!A){const R=this.map?this.map.painter:null,C=this._source.tileSize*o.overscaleFactor();c=this._source.type==="raster-array"?new Fo(o,C,this.transform.tileZoom,R,this._isRaster):new $l(o,C,this.transform.tileZoom,R,this._isRaster),this._loadTile(c,this._tileLoaded.bind(this,c,o.key,c.state))}return c?(c.uses++,this._tiles[o.key]=c,A||this._source.fire(new n.A("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c):null}_setTileReloadTimer(o,c){o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);const A=c.getExpiryTimeout();A&&(this._timers[o]=setTimeout(()=>{this._reloadTile(o,"expired"),delete this._timers[o]},A))}_removeTile(o){const c=this._tiles[o];c&&(c.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),c.uses>0||(c.hasData()&&c.state!=="reloading"||c.state==="empty"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const o in this._tiles)this._removeTile(+o);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(o,c,A){const R=[],C=this.transform;if(!C)return R;const E=C.projection.name==="globe",L=n.av(C.center.lng);for(const j in this._tiles){const $=this._tiles[j];if(A&&$.clearQueryDebugViz(),$.holdingForFade())continue;let W;if(E){const te=$.tileID.canonical;if(te.z===0){const ae=[Math.abs(n.ay(L,...fr(te,-1))-L),Math.abs(n.ay(L,...fr(te,1))-L)];W=[0,2*ae.indexOf(Math.min(...ae))-1]}else{const ae=[Math.abs(n.ay(L,...fr(te,-1))-L),Math.abs(n.ay(L,...fr(te,0))-L),Math.abs(n.ay(L,...fr(te,1))-L)];W=[ae.indexOf(Math.min(...ae))-1]}}else W=[0];for(const te of W){const ae=o.containsTile($,C,c,te);ae&&R.push(ae)}}return R}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(o){return this._getRenderableCoordinates(o)}_getRenderableCoordinates(o,c){const A=this.getRenderableIds(o,c).map(C=>this._tiles[C].tileID),R=this.transform.projection.name==="globe";for(const C of A)C.projMatrix=this.transform.calculateProjMatrix(C.toUnwrapped()),C.expandedProjMatrix=R?this.transform.calculateProjMatrix(C.toUnwrapped(),!1,!0):C.projMatrix;return A}sortCoordinatesByDistance(o){const c=o.slice(),A=this.transform._camera.position,R=this.transform._camera.forward(),C={};for(const E of c){const L=1/(1<<E.canonical.z);C[E.key]=((E.canonical.x+.5)*L+E.wrap-A[0])*R[0]+((E.canonical.y+.5)*L-A[1])*R[1]-A[2]*R[2]}return c.sort((E,L)=>C[E.key]-C[L.key]),c}hasTransition(){if(this._source.hasTransition())return!0;if(lo(this._source.type))for(const o in this._tiles){const c=this._tiles[o];if(c.fadeEndTime!==void 0&&c.fadeEndTime>=n.q.now())return!0}return!1}setFeatureState(o,c,A){this._state.updateState(o=o||"_geojsonTileLayer",c,A)}removeFeatureState(o,c,A){this._state.removeFeatureState(o=o||"_geojsonTileLayer",c,A)}getFeatureState(o,c){return this._state.getState(o=o||"_geojsonTileLayer",c)}setDependencies(o,c,A){const R=this._tiles[o];R&&R.setDependencies(c,A)}reloadTilesForDependencies(o,c){for(const A in this._tiles)this._tiles[A].hasDependency(o,c)&&this._reloadTile(+A,"reloading");this._cache.filter(A=>!A.hasDependency(o,c))}_preloadTiles(o,c){if(!this._sourceLoaded){const j=()=>{this._sourceLoaded&&(this._source.off("data",j),this._preloadTiles(o,c))};return void this._source.on("data",j)}const A=new Map,R=Array.isArray(o)?o:[o],C=this.map.painter.terrain,E=this.usedForTerrain&&C?C.getScaledDemTileSize():this._source.tileSize;for(const j of R){const $=j.coveringTiles({tileSize:E,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const W of $)A.set(W.key,W);this.usedForTerrain&&j.updateElevation(!1)}const L=Array.from(A.values());n.bl(L,(j,$)=>{const W=new $l(j,this._source.tileSize*j.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(W,te=>{this._source.type==="raster-dem"&&W.dem&&this._backfillDEM(W),$(te,W)})},c)}}function bn(g,o){const c=Math.abs(2*g.wrap)-+(g.wrap<0),A=Math.abs(2*o.wrap)-+(o.wrap<0);return g.overscaledZ-o.overscaledZ||A-c||o.canonical.y-g.canonical.y||o.canonical.x-g.canonical.x}function lo(g){return g==="raster"||g==="image"||g==="video"||g==="custom"}function fr(g,o){const c=1<<g.z;return[g.x/c+o,(g.x+1)/c+o]}Yo.maxOverzooming=10,Yo.maxUnderzooming=3;class Dc{constructor(o){this.style=o,this.layersGotHidden=!1,this.layers=[]}processLayersChanged(){this.layers=[];const o=!1,c=!1;for(const A in this.style._mergedLayers){const R=this.style._mergedLayers[A];if(R.type==="fill-extrusion")this.layers.push({layer:R,visible:o,visibilityChanged:c});else if(R.type==="model"){const C=this.style.getLayerSource(R);C&&C.type==="batched-model"&&this.layers.push({layer:R,visible:o,visibilityChanged:c})}}}onNewFrame(o){this.layersGotHidden=!1;for(const c of this.layers){const A=c.layer;let R=!1;A.type==="fill-extrusion"?R=!A.isHidden(o)&&A.paint.get("fill-extrusion-opacity")>0:A.type==="model"&&(R=!A.isHidden(o)&&A.paint.get("model-opacity").constantOr(1)>0),this.layersGotHidden=this.layersGotHidden||!R&&c.visible,c.visible=R}}updateZOffset(o,c){this.currentBuildingBuckets=[];for(const R of this.layers){const C=R.layer,E=this.style.getLayerSourceCache(C);let L=1;C.type==="fill-extrusion"&&(L=R.visible?C.paint.get("fill-extrusion-vertical-scale"):0);let j=E?E.getTile(c):null;if(!j&&E&&c.canonical.z>E.getSource().minzoom){let $=c.scaledTo(Math.min(E.getSource().maxzoom,c.overscaledZ-1));for(;$.overscaledZ>=E.getSource().minzoom&&(j=E.getTile($),!j&&$.overscaledZ!==0);)$=$.scaledTo($.overscaledZ-1)}this.currentBuildingBuckets.push({bucket:j?j.getBucket(C):null,tileID:j?j.tileID:c,verticalScale:L})}o.hasAnyZOffset=!1;let A=!1;for(let R=0;R<o.symbolInstances.length;R++){const C=o.symbolInstances.get(R),E=C.zOffset,L=this._getHeightAtTileOffset(c,C.tileAnchorX,C.tileAnchorY);C.zOffset=L!==Number.NEGATIVE_INFINITY?L:E,A||E===C.zOffset||(A=!0),o.hasAnyZOffset||C.zOffset===0||(o.hasAnyZOffset=!0)}A&&(o.zOffsetBuffersNeedUpload=!0,o.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(o,c,A,R){let C=c,E=A;if(o.canonical.z!==R.canonical.z){const L=R.canonical,j=1/(1<<o.canonical.z-L.z);C=(c+o.canonical.x*n.ai)*j-L.x*n.ai|0,E=(A+o.canonical.y*n.ai)*j-L.y*n.ai|0}return{tileX:C,tileY:E}}_getHeightAtTileOffset(o,c,A){let R,C;for(let E=0;E<this.layers.length;++E){if(this.layers[E].layer.type!=="fill-extrusion")continue;const{bucket:L,tileID:j,verticalScale:$}=this.currentBuildingBuckets[E];if(!L)continue;const{tileX:W,tileY:te}=this._mapCoordToOverlappingTile(o,c,A,j),ae=L.getHeightAtTileCoord(W,te);ae&&ae.height!==void 0&&(ae.hidden?R=ae.height:C=Math.max(ae.height*$,C||0))}if(C!==void 0)return C;for(let E=0;E<this.layers.length;++E){const L=this.layers[E];if(L.layer.type!=="model"||!L.visible)continue;const{bucket:j,tileID:$}=this.currentBuildingBuckets[E];if(!j)continue;const{tileX:W,tileY:te}=this._mapCoordToOverlappingTile(o,c,A,$),ae=j.getHeightAtTileCoord(W,te);if(ae&&!ae.hidden)return ae.height===void 0&&R!==void 0?Math.min(ae.maxHeight,R)*ae.verticalScale:ae.height?ae.height*ae.verticalScale:Number.NEGATIVE_INFINITY}return this.layersGotHidden?0:Number.NEGATIVE_INFINITY}}function gn(g,o){const c={};for(const A in g)A!=="ref"&&(c[A]=g[A]);return n.bm.forEach(A=>{A in o&&(c[A]=o[A])}),c}function oh(g){g=g.slice();const o=Object.create(null);for(let c=0;c<g.length;c++)o[g[c].id]=g[c];for(let c=0;c<g.length;c++)"ref"in g[c]&&(g[c]=gn(g[c],o[g[c].ref]));return g}const Tn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setSnow:"setSnow",setRain:"setRain",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",updateImport:"updateImport"};function Bs(g,o,c){c.push({command:Tn.addSource,args:[g,o[g]]})}function oc(g,o,c){o.push({command:Tn.removeSource,args:[g]}),c[g]=!0}function lc(g,o,c,A){oc(g,c,A),Bs(g,o,c)}function Xa(g,o,c){let A;for(A in g[c])if(g[c].hasOwnProperty(A)&&A!=="data"&&!n.bn(g[c][A],o[c][A]))return!1;for(A in o[c])if(o[c].hasOwnProperty(A)&&A!=="data"&&!n.bn(g[c][A],o[c][A]))return!1;return!0}function an(g,o,c,A,R,C){let E;for(E in o=o||{},g=g||{})g.hasOwnProperty(E)&&(n.bn(g[E],o[E])||c.push({command:C,args:[A,E,o[E],R]}));for(E in o)o.hasOwnProperty(E)&&!g.hasOwnProperty(E)&&(n.bn(g[E],o[E])||c.push({command:C,args:[A,E,o[E],R]}))}function An(g){return g.id}function Gs(g,o){return g[o.id]=o,g}class Td{constructor(o,c){this.reset(o,c)}reset(o,c){this.points=o||[],this._distances=[0];for(let A=1;A<this.points.length;A++)this._distances[A]=this._distances[A-1]+this.points[A].dist(this.points[A-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(o){if(this.points.length===1)return this.points[0];o=n.ay(o,0,1);let c=1,A=this._distances[c];const R=o*this.paddedLength+this.padding;for(;A<R&&c<this._distances.length;)A=this._distances[++c];const C=c-1,E=this._distances[C],L=A-E,j=L>0?(R-E)/L:0;return this.points[C].mult(1-j).add(this.points[c].mult(j))}}class un{constructor(o,c,A){const R=this.boxCells=[],C=this.circleCells=[];this.xCellCount=Math.ceil(o/A),this.yCellCount=Math.ceil(c/A);for(let E=0;E<this.xCellCount*this.yCellCount;E++)R.push([]),C.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=c,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(o,c,A,R,C){this._forEachCell(c,A,R,C,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(c),this.bboxes.push(A),this.bboxes.push(R),this.bboxes.push(C)}insertCircle(o,c,A,R){this._forEachCell(c-R,A-R,c+R,A+R,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(c),this.circles.push(A),this.circles.push(R)}_insertBoxCell(o,c,A,R,C,E){this.boxCells[C].push(E)}_insertCircleCell(o,c,A,R,C,E){this.circleCells[C].push(E)}_query(o,c,A,R,C,E){if(A<0||o>this.width||R<0||c>this.height)return!C&&[];const L=[];if(o<=0&&c<=0&&this.width<=A&&this.height<=R){if(C)return!0;for(let j=0;j<this.boxKeys.length;j++)L.push({key:this.boxKeys[j],x1:this.bboxes[4*j],y1:this.bboxes[4*j+1],x2:this.bboxes[4*j+2],y2:this.bboxes[4*j+3]});for(let j=0;j<this.circleKeys.length;j++){const $=this.circles[3*j],W=this.circles[3*j+1],te=this.circles[3*j+2];L.push({key:this.circleKeys[j],x1:$-te,y1:W-te,x2:$+te,y2:W+te})}return E?L.filter(E):L}return this._forEachCell(o,c,A,R,this._queryCell,L,{hitTest:C,seenUids:{box:{},circle:{}}},E),C?L.length>0:L}_queryCircle(o,c,A,R,C){const E=o-A,L=o+A,j=c-A,$=c+A;if(L<0||E>this.width||$<0||j>this.height)return!R&&[];const W=[];return this._forEachCell(E,j,L,$,this._queryCellCircle,W,{hitTest:R,circle:{x:o,y:c,radius:A},seenUids:{box:{},circle:{}}},C),R?W.length>0:W}query(o,c,A,R,C){return this._query(o,c,A,R,!1,C)}hitTest(o,c,A,R,C){return this._query(o,c,A,R,!0,C)}hitTestCircle(o,c,A,R){return this._queryCircle(o,c,A,!0,R)}_queryCell(o,c,A,R,C,E,L,j){const $=L.seenUids,W=this.boxCells[C];if(W!==null){const ae=this.bboxes;for(const de of W)if(!$.box[de]){$.box[de]=!0;const Te=4*de;if(o<=ae[Te+2]&&c<=ae[Te+3]&&A>=ae[Te+0]&&R>=ae[Te+1]&&(!j||j(this.boxKeys[de]))){if(L.hitTest)return E.push(!0),!0;E.push({key:this.boxKeys[de],x1:ae[Te],y1:ae[Te+1],x2:ae[Te+2],y2:ae[Te+3]})}}}const te=this.circleCells[C];if(te!==null){const ae=this.circles;for(const de of te)if(!$.circle[de]){$.circle[de]=!0;const Te=3*de;if(this._circleAndRectCollide(ae[Te],ae[Te+1],ae[Te+2],o,c,A,R)&&(!j||j(this.circleKeys[de]))){if(L.hitTest)return E.push(!0),!0;{const ve=ae[Te],Ee=ae[Te+1],Ve=ae[Te+2];E.push({key:this.circleKeys[de],x1:ve-Ve,y1:Ee-Ve,x2:ve+Ve,y2:Ee+Ve})}}}}}_queryCellCircle(o,c,A,R,C,E,L,j){const $=L.circle,W=L.seenUids,te=this.boxCells[C];if(te!==null){const de=this.bboxes;for(const Te of te)if(!W.box[Te]){W.box[Te]=!0;const ve=4*Te;if(this._circleAndRectCollide($.x,$.y,$.radius,de[ve+0],de[ve+1],de[ve+2],de[ve+3])&&(!j||j(this.boxKeys[Te])))return E.push(!0),!0}}const ae=this.circleCells[C];if(ae!==null){const de=this.circles;for(const Te of ae)if(!W.circle[Te]){W.circle[Te]=!0;const ve=3*Te;if(this._circlesCollide(de[ve],de[ve+1],de[ve+2],$.x,$.y,$.radius)&&(!j||j(this.circleKeys[Te])))return E.push(!0),!0}}}_forEachCell(o,c,A,R,C,E,L,j){const $=this._convertToXCellCoord(o),W=this._convertToYCellCoord(c),te=this._convertToXCellCoord(A),ae=this._convertToYCellCoord(R);for(let de=$;de<=te;de++)for(let Te=W;Te<=ae;Te++)if(C.call(this,o,c,A,R,this.xCellCount*Te+de,E,L,j))return}_convertToXCellCoord(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))}_convertToYCellCoord(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))}_circlesCollide(o,c,A,R,C,E){const L=R-o,j=C-c,$=A+E;return $*$>L*L+j*j}_circleAndRectCollide(o,c,A,R,C,E,L){const j=(E-R)/2,$=Math.abs(o-(R+j));if($>j+A)return!1;const W=(L-C)/2,te=Math.abs(c-(C+W));if(te>W+A)return!1;if($<=j||te<=W)return!0;const ae=$-j,de=te-W;return ae*ae+de*de<=A*A}}const Uo={unknown:0,flipRequired:1,flipNotRequired:2},yu=Math.tan(85*Math.PI/180);function Rs(g,o,c,A,R,C,E){const L=n.ad.mat4.create();if(c)if(C.name==="globe"){const j=n.bo(R,o);n.ad.mat4.multiply(L,L,j)}else{const j=n.ad.mat2.invert([],E);L[0]=j[0],L[1]=j[1],L[4]=j[2],L[5]=j[3],A||n.ad.mat4.rotateZ(L,L,R.angle)}else n.ad.mat4.multiply(L,R.labelPlaneMatrix,g);return L}function Li(g,o,c,A,R,C,E){const L=Rs(g,o,c,A,R,C,E);return C.name==="globe"&&c||(L[2]=L[6]=L[10]=L[14]=0),L}function bi(g,o,c,A,R,C,E){if(c){if(C.name==="globe"){const L=Rs(g,o,c,A,R,C,E);return n.ad.mat4.invert(L,L),n.ad.mat4.multiply(L,g,L),L}{const L=n.ad.mat4.clone(g),j=n.ad.mat4.identity([]);return j[0]=E[0],j[1]=E[1],j[4]=E[2],j[5]=E[3],n.ad.mat4.multiply(L,L,j),A||n.ad.mat4.rotateZ(L,L,-R.angle),L}}return R.glCoordMatrix}function uo(g,o,c,A){const R=[g,o,c,1];c?n.ad.vec4.transformMat4(R,R,A):ji(R,R,A);const C=R[3];return R[0]/=C,R[1]/=C,R[2]/=C,R}function Sd(g,o){return Math.min(.5+g/o*.5,1.5)}function lh(g,o){const c=g[0]/g[3],A=g[1]/g[3];return c>=-o[0]&&c<=o[0]&&A>=-o[1]&&A<=o[1]}function uc(g,o,c,A,R,C,E,L,j,$){const W=c.transform,te=A?g.textSizeData:g.iconSizeData,ae=n.bp(te,c.transform.zoom),de=W.projection.name==="globe",Te=[256/c.width*2+1,256/c.height*2+1],ve=A?g.text.dynamicLayoutVertexArray:g.icon.dynamicLayoutVertexArray;ve.clear();let Ee=null;de&&(Ee=A?g.text.globeExtVertexArray:g.icon.globeExtVertexArray);const Ve=g.lineVertexArray,Be=A?g.text.placedSymbolArray:g.icon.placedSymbolArray,et=c.transform.width/c.transform.height;let Je,dt=!1;for(let it=0;it<Be.length;it++){const st=Be.get(it),{numGlyphs:ot,writingMode:gt}=st;if(gt!==n.bq.vertical||dt||Je===n.bq.horizontal||(dt=!0),Je=gt,(st.hidden||gt===n.bq.vertical)&&!dt){Jo(ot,ve);continue}dt=!1;const Tt=new n.P(st.tileAnchorX,st.tileAnchorY);let{x:Xt,y:Ft,z:ra}=W.projection.projectTilePoint(Tt.x,Tt.y,$.canonical);if(j){const[La,Ea,sr]=j(Tt);Xt+=La,Ft+=Ea,ra+=sr}const ua=[Xt,Ft,ra,1];if(n.ad.vec4.transformMat4(ua,ua,o),!lh(ua,Te)){Jo(ot,ve);continue}const Ca=ua[3],Lt=Sd(c.transform.getCameraToCenterDistance(W.projection),Ca),sa=n.br(te,ae,st),zt=E?sa/Lt:sa*Lt,oa=uo(Xt,Ft,ra,R);if(oa[3]<=0){Jo(ot,ve);continue}let ea={};const da=n.ak(g.layers[0].layout.get("text-max-angle")),Wt=Math.cos(da),pa=E?null:j,Ia=us(st,zt,!1,L,o,R,C,g.glyphOffsetArray,Ve,ve,Ee,oa,Tt,ea,et,pa,W.projection,$,E,Wt);dt=Ia.useVertical,pa&&Ia.needsFlipping&&(ea={}),(Ia.notEnoughRoom||dt||Ia.needsFlipping&&us(st,zt,!0,L,o,R,C,g.glyphOffsetArray,Ve,ve,Ee,oa,Tt,ea,et,pa,W.projection,$,E,Wt).notEnoughRoom)&&Jo(ot,ve)}A?(g.text.dynamicLayoutVertexBuffer.updateData(ve),Ee&&g.text.globeExtVertexBuffer&&g.text.globeExtVertexBuffer.updateData(Ee)):(g.icon.dynamicLayoutVertexBuffer.updateData(ve),Ee&&g.icon.globeExtVertexBuffer&&g.icon.globeExtVertexBuffer.updateData(Ee))}function cc(g,o,c,A,R,C,E,L,j,$,W,te,ae,de,Te,ve,Ee){const{lineStartIndex:Ve,glyphStartIndex:Be,segment:et}=L,Je=Be+L.numGlyphs,dt=Ve+L.lineLength,it=o.getoffsetX(Be),st=o.getoffsetX(Je-1),ot=xl(g*it,c,A,R,C,E,et,Ve,dt,j,$,W,te,ae,!0,de,Te,ve,Ee);if(!ot)return null;const gt=xl(g*st,c,A,R,C,E,et,Ve,dt,j,$,W,te,ae,!0,de,Te,ve,Ee);return gt?{first:ot,last:gt}:null}function Xo(g,o,c,A){return g===n.bq.horizontal&&Math.abs(A)>Math.abs(c)?{useVertical:!0}:g===n.bq.vertical?A>0?{needsFlipping:!0}:null:o!==Uo.unknown&&function(R,C){return R===0||Math.abs(C/R)>yu}(c,A)?o===Uo.flipRequired?{needsFlipping:!0}:null:c<0?{needsFlipping:!0}:null}function us(g,o,c,A,R,C,E,L,j,$,W,te,ae,de,Te,ve,Ee,Ve,Be,et){const Je=o/24,dt=g.lineOffsetX*Je,it=g.lineOffsetY*Je,{lineStartIndex:st,glyphStartIndex:ot,numGlyphs:gt,segment:Tt,writingMode:Xt,flipState:Ft}=g,ra=st+g.lineLength,ua=Ca=>{if(W){const[oa,ea,da]=Ca.up,Wt=$.length;n.bs(W,Wt+0,oa,ea,da),n.bs(W,Wt+1,oa,ea,da),n.bs(W,Wt+2,oa,ea,da),n.bs(W,Wt+3,oa,ea,da)}const[Lt,sa,zt]=Ca.point;n.bt($,Lt,sa,zt,Ca.angle)};if(gt>1){const Ca=cc(Je,L,dt,it,c,te,ae,g,j,C,de,ve,!1,Ee,Ve,Be,et);if(!Ca)return{notEnoughRoom:!0};if(A&&!c){let[Lt,sa,zt]=Ca.first.point,[oa,ea,da]=Ca.last.point;[Lt,sa]=uo(Lt,sa,zt,E),[oa,ea]=uo(oa,ea,da,E);const Wt=Xo(Xt,Ft,(oa-Lt)*Te,ea-sa);if(g.flipState=Wt&&Wt.needsFlipping?Uo.flipRequired:Uo.flipNotRequired,Wt)return Wt}ua(Ca.first);for(let Lt=ot+1;Lt<ot+gt-1;Lt++){const sa=xl(Je*L.getoffsetX(Lt),dt,it,c,te,ae,Tt,st,ra,j,C,de,ve,!1,!1,Ee,Ve,Be,et);if(!sa)return $.length-=4*(Lt-ot),{notEnoughRoom:!0};ua(sa)}ua(Ca.last)}else{if(A&&!c){const Lt=uo(ae.x,ae.y,0,R),sa=st+Tt+1,zt=new n.P(j.getx(sa),j.gety(sa)),oa=uo(zt.x,zt.y,0,R),ea=oa[3]>0?oa:Ts(ae,zt,Lt,1,R,void 0,Ee,Ve.canonical),da=Xo(Xt,Ft,(ea[0]-Lt[0])*Te,ea[1]-Lt[1]);if(g.flipState=da&&da.needsFlipping?Uo.flipRequired:Uo.flipNotRequired,da)return da}const Ca=xl(Je*L.getoffsetX(ot),dt,it,c,te,ae,Tt,st,ra,j,C,de,ve,!1,!1,Ee,Ve,Be,et);if(!Ca)return{notEnoughRoom:!0};ua(Ca)}return{}}function Gu(g,o,c,A,R){const{x:C,y:E,z:L}=A.projectTilePoint(g.x,g.y,o);if(!R)return uo(C,E,L,c);const[j,$,W]=R(g);return uo(C+j,E+$,L+W,c)}function Ts(g,o,c,A,R,C,E,L){const j=Gu(g.sub(o)._unit()._add(g),L,R,E,C);return n.ad.vec3.sub(j,c,j),n.ad.vec3.normalize(j,j),n.ad.vec3.scaleAndAdd(j,c,j,A)}function xl(g,o,c,A,R,C,E,L,j,$,W,te,ae,de,Te,ve,Ee,Ve,Be){const et=A?g-o:g+o;let Je=et>0?1:-1,dt=0;A&&(Je*=-1,dt=Math.PI),Je<0&&(dt+=Math.PI);let it=L+E+(Je>0?0:1)|0,st=R,ot=R,gt=0,Tt=0;const Xt=Math.abs(et),Ft=[],ra=[];let ua=C,Ca=ua,Lt=n.ad.vec3.zero([]);const sa=()=>Ts(Ca,ua,ot,Xt-gt+1,W,ae,ve,Ee.canonical);for(;gt+Tt<=Xt;){if(it+=Je,it<L||it>=j)return null;if(ot=st,Ca=ua,Ft.push(ot),de&&ra.push(Ca),ua=new n.P($.getx(it),$.gety(it)),st=te[it],!st){const sr=Gu(ua,Ee.canonical,W,ve,ae);st=sr[3]>0?te[it]=sr:sa()}gt+=Tt;const La=n.ad.vec3.sub([],st,ot),Ea=n.ad.vec3.distance(ot,st);if(c&&Ea>0&&Tt>0&&n.ad.vec3.dot(Lt,La)/(Tt*Ea)<Be)return null;Tt=Ea,Lt=La}Te&&ae&&(te[it]&&(st=sa(),Tt=n.ad.vec3.distance(ot,st),Lt=n.ad.vec3.sub([],st,ot)),te[it]=st);const zt=(Xt-gt)/Tt,oa=ua.sub(Ca)._mult(zt)._add(Ca),ea=n.ad.vec3.scaleAndAdd([],ot,Lt,zt);let da=[0,0,1],Wt=Lt[0],pa=Lt[1];if(Ve&&(da=ve.upVector(Ee.canonical,oa.x,oa.y),da[0]!==0||da[1]!==0||da[2]!==1)){const La=[da[2],0,-da[0]],Ea=n.ad.vec3.cross([],da,La);n.ad.vec3.normalize(La,La),n.ad.vec3.normalize(Ea,Ea),Wt=n.ad.vec3.dot(Lt,La),pa=n.ad.vec3.dot(Lt,Ea)}if(c){const La=n.ad.vec3.cross([],da,Lt);n.ad.vec3.normalize(La,La),n.ad.vec3.scaleAndAdd(ea,ea,La,c*Je)}const Ia=dt+Math.atan2(pa,Wt);return Ft.push(ea),de&&ra.push(oa),{point:ea,angle:Ia,path:Ft,tilePath:ra,up:da}}function Jo(g,o){const c=o.length,A=c+4*g;o.resize(A),o.float32.fill(-1/0,4*c,4*A)}function ji(g,o,c){const A=o[0],R=o[1];return g[0]=c[0]*A+c[4]*R+c[12],g[1]=c[1]*A+c[5]*R+c[13],g[3]=c[3]*A+c[7]*R+c[15],g}const js=100;class Kl{constructor(o,c,A=new un(o.width+200,o.height+200,25),R=new un(o.width+200,o.height+200,25)){this.transform=o,this.grid=A,this.ignoredGrid=R,this.pitchfactor=Math.cos(o._pitch)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+js,this.screenBottomBoundary=o.height+js,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200,this.fogState=c}placeCollisionBox(o,c,A,R,C,E,L,j){let $=A.projectedAnchorX,W=A.projectedAnchorY,te=A.projectedAnchorZ;const ae=A.elevation,de=A.tileID,Te=o.getProjection();if(ae&&de){const[it,st,ot]=Te.upVector(de.canonical,A.tileAnchorX,A.tileAnchorY),gt=Te.upVectorScale(de.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;$+=it*ae*gt,W+=st*ae*gt,te+=ot*ae*gt}const ve=this.projectAndGetPerspectiveRatio(L,$,W,te,A.tileID,Te.name==="globe"||!!ae||this.transform.pitch>0,Te),Ee=E*ve.perspectiveRatio,Ve=(A.x1*c+R.x-A.padding)*Ee+ve.point.x,Be=(A.y1*c+R.y-A.padding)*Ee+ve.point.y,et=(A.x2*c+R.x+A.padding)*Ee+ve.point.x,Je=(A.y2*c+R.y+A.padding)*Ee+ve.point.y,dt=ve.perspectiveRatio<=.55||ve.occluded;return!this.isInsideGrid(Ve,Be,et,Je)||!C&&this.grid.hitTest(Ve,Be,et,Je,j)||dt?{box:[],offscreen:!1,occluded:ve.occluded}:{box:[Ve,Be,et,Je],offscreen:this.isOffscreen(Ve,Be,et,Je),occluded:!1}}placeCollisionCircles(o,c,A,R,C,E,L,j,$,W,te,ae,de,Te,ve){const Ee=[],Ve=this.transform.elevation,Be=o.getProjection(),et=Ve?Ve.getAtTileOffsetFunc(ve,this.transform.center.lat,this.transform.worldSize,Be):null,Je=new n.P(A.tileAnchorX,A.tileAnchorY);let{x:dt,y:it,z:st}=Be.projectTilePoint(Je.x,Je.y,ve.canonical);if(et){const[da,Wt,pa]=et(Je);dt+=da,it+=Wt,st+=pa}const ot=Be.name==="globe",gt=this.projectAndGetPerspectiveRatio(L,dt,it,st,ve,ot||!!Ve||this.transform.pitch>0,Be),{perspectiveRatio:Tt}=gt,Xt=(te?E/Tt:E*Tt)/n.bw,Ft=uo(dt,it,st,j),ra=A.lineOffsetX*Xt,ua=A.lineOffsetY*Xt,Ca=n.ak(o.layers[0].layout.get("text-max-angle")),Lt=Math.cos(Ca),sa=gt.signedDistanceFromCamera>0?cc(Xt,C,ra,ua,!1,Ft,Je,A,R,j,{},Ve&&!te?et:null,te&&!!Ve,Be,ve,te,Lt):null;let zt=!1,oa=!1,ea=!0;if(sa&&!gt.occluded){const da=.5*de*Tt+Te,Wt=new n.P(-100,-100),pa=new n.P(this.screenRightBoundary,this.screenBottomBoundary),Ia=new Td,{first:La,last:Ea}=sa,sr=La.path.length;let Fr=[];for(let Cr=sr-1;Cr>=1;Cr--)Fr.push(La.path[Cr]);for(let Cr=1;Cr<Ea.path.length;Cr++)Fr.push(Ea.path[Cr]);const mr=2.5*da;$&&(Fr=Fr.map(([Cr,xr,Ur],Ir)=>(et&&!ot&&(Ur=et(Ir<sr-1?La.tilePath[sr-1-Ir]:Ea.tilePath[Ir-sr+2])[2]),uo(Cr,xr,Ur,$))),Fr.some(Cr=>Cr[3]<=0)&&(Fr=[]));let Or=[];if(Fr.length>0){let Cr=1/0,xr=-1/0,Ur=1/0,Ir=-1/0;for(const hr of Fr)Cr=Math.min(Cr,hr[0]),Ur=Math.min(Ur,hr[1]),xr=Math.max(xr,hr[0]),Ir=Math.max(Ir,hr[1]);xr>=Wt.x&&Cr<=pa.x&&Ir>=Wt.y&&Ur<=pa.y&&(Or=[Fr.map(hr=>new n.P(hr[0],hr[1]))],(Cr<Wt.x||xr>pa.x||Ur<Wt.y||Ir>pa.y)&&(Or=n.bu(Or,Wt.x,Wt.y,pa.x,pa.y)))}for(const Cr of Or){Ia.reset(Cr,.25*da);let xr=0;xr=Ia.length<=.5*da?1:Math.ceil(Ia.paddedLength/mr)+1;for(let Ur=0;Ur<xr;Ur++){const Ir=Ur/Math.max(xr-1,1),hr=Ia.lerp(Ir),nn=hr.x+js,Tr=hr.y+js;Ee.push(nn,Tr,da,0);const tr=nn-da,sn=Tr-da,$n=nn+da,cn=Tr+da;if(ea=ea&&this.isOffscreen(tr,sn,$n,cn),oa=oa||this.isInsideGrid(tr,sn,$n,cn),!c&&this.grid.hitTestCircle(nn,Tr,da,ae)&&(zt=!0,!W))return{circles:[],offscreen:!1,collisionDetected:zt,occluded:!1}}}}return{circles:!W&&zt||!oa?[]:Ee,offscreen:ea,collisionDetected:zt,occluded:gt.occluded}}queryRenderedSymbols(o){if(o.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let A=1/0,R=1/0,C=-1/0,E=-1/0;for(const W of o){const te=new n.P(W.x+js,W.y+js);A=Math.min(A,te.x),R=Math.min(R,te.y),C=Math.max(C,te.x),E=Math.max(E,te.y),c.push(te)}const L=this.grid.query(A,R,C,E).concat(this.ignoredGrid.query(A,R,C,E)),j={},$={};for(const W of L){const te=W.key;if(j[te.bucketInstanceId]===void 0&&(j[te.bucketInstanceId]={}),j[te.bucketInstanceId][te.featureIndex])continue;const ae=[new n.P(W.x1,W.y1),new n.P(W.x2,W.y1),new n.P(W.x2,W.y2),new n.P(W.x1,W.y2)];n.bv(c,ae)&&(j[te.bucketInstanceId][te.featureIndex]=!0,$[te.bucketInstanceId]===void 0&&($[te.bucketInstanceId]=[]),$[te.bucketInstanceId].push(te.featureIndex))}return $}insertCollisionBox(o,c,A,R,C){(c?this.ignoredGrid:this.grid).insert({bucketInstanceId:A,featureIndex:R,collisionGroupID:C},o[0],o[1],o[2],o[3])}insertCollisionCircles(o,c,A,R,C){const E=c?this.ignoredGrid:this.grid,L={bucketInstanceId:A,featureIndex:R,collisionGroupID:C};for(let j=0;j<o.length;j+=4)E.insertCircle(L,o[j],o[j+1],o[j+2])}projectAndGetPerspectiveRatio(o,c,A,R,C,E,L){const j=[c,A,R,1];let $=!1;R||this.transform.pitch>0?(n.ad.vec4.transformMat4(j,j,o),this.fogState&&C&&L.name!=="globe"&&($=function(ae,de,Te,ve,Ee,Ve){const Be=Ve.calculateFogTileMatrix(Ee),et=[de,Te,ve];return n.ad.vec3.transformMat4(et,et,Be),Ba(ae,n.ad.vec3.length(et),Ve.pitch,Ve._fov)}(this.fogState,c,A,R,C.toUnwrapped(),this.transform)>.9)):ji(j,j,o);const W=j[3];return{point:new n.P((j[0]/W+1)/2*this.transform.width+js,(-j[1]/W+1)/2*this.transform.height+js),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(L)/W*.5,1.5),signedDistanceFromCamera:W,occluded:E&&j[2]>W||$}}isOffscreen(o,c,A,R){return A<js||o>=this.screenRightBoundary||R<js||c>this.screenBottomBoundary}isInsideGrid(o,c,A,R){return A>=0&&o<this.gridRightBoundary&&R>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const o=n.ad.mat4.identity([]);return n.ad.mat4.translate(o,o,[-100,-100,0]),o}}function ns(g,o,c){const A=o.createTileMatrix(g,g.worldSize,c.toUnwrapped());return n.ad.mat4.multiply(new Float32Array(16),g.projMatrix,A)}function Dh(g,o,c){if(o.projection.name===c.projection.name)return g.projMatrix;const A=c.clone();return A.setProjection(o.projection),ns(A,o.getProjection(),g)}function ko(g,o,c){return o.name===c.projection.name?g.projMatrix:ns(c,o,g)}class Cd{constructor(o,c,A,R){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?c:-c))):R&&A?1:0,this.placed=A}isHidden(){return this.opacity===0&&!this.placed}}class gu{constructor(o,c,A,R,C,E=!1){this.text=new Cd(o?o.text:null,c,A,C),this.icon=new Cd(o?o.icon:null,c,R,C),this.clipped=E}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Au{constructor(o,c,A,R=!1){this.text=o,this.icon=c,this.skipFade=A,this.clipped=R}}class Yf{constructor(){this.invProjMatrix=n.ad.mat4.create(),this.viewportMatrix=n.ad.mat4.create(),this.circles=[]}}class Wl{constructor(o,c,A,R,C){this.bucketInstanceId=o,this.featureIndex=c,this.sourceLayerIndex=A,this.bucketIndex=R,this.tileID=C}}class jm{constructor(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}}get(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){const c=++this.maxGroupID;this.collisionGroups[o]={ID:c,predicate:A=>A.collisionGroupID===c}}return this.collisionGroups[o]}}function bd(g,o,c,A,R){const{horizontalAlign:C,verticalAlign:E}=n.bD(g),L=-(C-.5)*o,j=-(E-.5)*c,$=n.bC(g,A);return new n.P(L+$[0]*R,j+$[1]*R)}function Zs(g,o,c,A,R){const C=new n.P(g,o);return c&&C._rotate(A?R:-R),C}class yf{constructor(o,c,A,R,C,E){this.transform=o.clone(),this.projection=o.projection.name,this.collisionIndex=new Kl(this.transform,C),this.buildingIndex=E,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=c,this.retainedQueryData={},this.collisionGroups=new jm(A),this.collisionCircleArrays={},this.prevPlacement=R,R&&(R.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(o,c,A,R,C=1){const E=A.getBucket(c),L=A.latestFeatureIndex;if(!E||!L||c.fqid!==E.layerIds[0])return;const j=E.layers[0].layout,$=E.layers[0].paint,W=A.collisionBoxArray,te=Math.pow(2,this.transform.zoom-A.tileID.overscaledZ),ae=A.tileSize/n.ai,de=A.tileID.toUnwrapped();this.transform.setProjection(E.projection);const Te=(ve=A.tileID,Ee=E.getProjection(),Ve=this.transform,Ee.name===this.projection?Ve.calculateProjMatrix(ve.toUnwrapped()):ns(Ve,Ee,ve));var ve,Ee,Ve;const Be=j.get("text-pitch-alignment")==="map",et=j.get("text-rotation-alignment")==="map";c.compileFilter(c.options);const Je=c.dynamicFilter(),dt=c.dynamicFilterNeedsFeature(),it=this.transform.calculatePixelsToTileUnitsMatrix(A),st=Li(Te,A.tileID.canonical,Be,et,this.transform,E.getProjection(),it);let ot=null;if(Be){const sa=bi(Te,A.tileID.canonical,Be,et,this.transform,E.getProjection(),it);ot=n.ad.mat4.multiply([],this.transform.labelPlaneMatrix,sa)}let gt=null;Je&&A.latestFeatureIndex&&(gt={unwrappedTileID:de,dynamicFilter:Je,dynamicFilterNeedsFeature:dt}),this.retainedQueryData[E.bucketInstanceId]=new Wl(E.bucketInstanceId,L,E.sourceLayerIndex,E.index,A.tileID);const[Tt,Xt]=E.layers[0].layout.get("text-size-scale-range"),Ft=n.ay(C,Tt,Xt),[ra,ua]=j.get("icon-size-scale-range"),Ca=n.ay(C,ra,ua),Lt={bucket:E,layout:j,paint:$,posMatrix:Te,textLabelPlaneMatrix:st,labelToScreenMatrix:ot,clippingData:gt,scale:te,textPixelRatio:ae,holdingForFade:A.holdingForFade(),collisionBoxArray:W,partiallyEvaluatedTextSize:n.bp(E.textSizeData,this.transform.zoom,Ft),partiallyEvaluatedIconSize:n.bp(E.iconSizeData,this.transform.zoom,Ca),collisionGroup:this.collisionGroups.get(E.sourceID),latestFeatureIndex:A.latestFeatureIndex};if(R)for(const sa of E.sortKeyRanges){const{sortKey:zt,symbolInstanceStart:oa,symbolInstanceEnd:ea}=sa;o.push({sortKey:zt,symbolInstanceStart:oa,symbolInstanceEnd:ea,parameters:Lt})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:E.symbolInstances.length,parameters:Lt})}attemptAnchorPlacement(o,c,A,R,C,E,L,j,$,W,te,ae,de,Te,ve,Ee,Ve,Be){const{textOffset0:et,textOffset1:Je,crossTileID:dt}=ae,it=[et,Je],st=bd(o,A,R,it,C),ot=this.collisionIndex.placeCollisionBox(Te,C,c,Zs(st.x,st.y,E,L,this.transform.angle),te,j,$,W.predicate);if(Ee){const gt=Te.getSymbolInstanceIconSize(Be,this.transform.zoom,ae.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(Te,gt,Ee,Zs(st.x,st.y,E,L,this.transform.angle),te,j,$,W.predicate).box.length===0)return}if(ot.box.length>0){let gt;return this.prevPlacement&&this.prevPlacement.variableOffsets[dt]&&this.prevPlacement.placements[dt]&&this.prevPlacement.placements[dt].text&&(gt=this.prevPlacement.variableOffsets[dt].anchor),this.variableOffsets[dt]={textOffset:it,width:A,height:R,anchor:o,textScale:C,prevAnchor:gt},this.markUsedJustification(Te,o,ae,ve),Te.allowVerticalPlacement&&(this.markUsedOrientation(Te,ve,ae),this.placedOrientations[dt]=ve),{shift:st,placedGlyphBoxes:ot}}}placeLayerBucketPart(o,c,A,R,C=1){const{bucket:E,layout:L,paint:j,posMatrix:$,textLabelPlaneMatrix:W,labelToScreenMatrix:te,clippingData:ae,textPixelRatio:de,holdingForFade:Te,collisionBoxArray:ve,partiallyEvaluatedTextSize:Ee,partiallyEvaluatedIconSize:Ve,collisionGroup:Be,latestFeatureIndex:et}=o.parameters,Je=L.get("text-optional"),dt=L.get("icon-optional"),it=L.get("text-allow-overlap"),st=L.get("icon-allow-overlap"),ot=L.get("text-rotation-alignment")==="map",gt=L.get("text-pitch-alignment")==="map",Tt=j.get("symbol-z-offset"),Xt=L.get("symbol-elevation-reference")==="sea",[Ft,ra]=L.get("text-size-scale-range"),[ua,Ca]=L.get("icon-size-scale-range"),Lt=n.ay(C,Ft,ra),sa=n.ay(C,ua,Ca);this.transform.setProjection(E.projection);let zt=it&&(st||!E.hasIconData()||dt),oa=st&&(it||!E.hasTextData()||Je);const ea=!Tt.isConstant();!E.collisionArrays&&ve&&E.deserializeCollisionBoxes(ve),A&&R&&E.updateCollisionDebugBuffers(this.transform.zoom,ve,Lt,sa);const da=(Wt,pa,Ia)=>{const{crossTileID:La,numVerticalGlyphVertices:Ea}=Wt;let sr=null;if(ae&&ae.dynamicFilterNeedsFeature||ea){const Cn=this.retainedQueryData[E.bucketInstanceId];sr=et.loadFeature({featureIndex:Wt.featureIndex,bucketIndex:Cn.bucketIndex,sourceLayerIndex:Cn.sourceLayerIndex,layoutVertexArrayOffset:0})}if(ae&&!(0,ae.dynamicFilter)({zoom:this.transform.zoom,pitch:this.transform.pitch},sr,this.retainedQueryData[E.bucketInstanceId].tileID.canonical,new n.P(Wt.tileAnchorX,Wt.tileAnchorY),this.transform.calculateDistanceTileData(ae.unwrappedTileID)))return this.placements[La]=new Au(!1,!1,!1,!0),void c.add(La);const Fr=Tt.evaluate(sr,{});if(c.has(La))return;if(Te)return void(this.placements[La]=new Au(!1,!1,!1));let mr=!1,Or=!1,Cr=!0,xr=!1,Ur=!1,Ir=null,hr={box:null,offscreen:null,occluded:null},nn={box:null},Tr=null,tr=null,sn=null,$n=0,cn=0,Vn=0;Ia.textFeatureIndex?$n=Ia.textFeatureIndex:Wt.useRuntimeCollisionCircles&&($n=Wt.featureIndex),Ia.verticalTextFeatureIndex&&(cn=Ia.verticalTextFeatureIndex);const Wi=Cn=>{Cn.tileID=this.retainedQueryData[E.bucketInstanceId].tileID;const ii=this.transform.elevation;Cn.elevation=Xt?Fr:Fr+(ii?ii.getAtTileOffset(Cn.tileID,Cn.tileAnchorX,Cn.tileAnchorY):0),Cn.elevation+=Wt.zOffset},hs=Ia.textBox;if(hs){Wi(hs);const Cn=On=>{let oi=n.bq.horizontal;if(E.allowVerticalPlacement&&!On&&this.prevPlacement){const yo=this.prevPlacement.placedOrientations[La];yo&&(this.placedOrientations[La]=yo,oi=yo,this.markUsedOrientation(E,oi,Wt))}return oi},ii=(On,oi)=>{if(E.allowVerticalPlacement&&Ea>0&&Ia.verticalTextBox){for(const yo of E.writingModes)if(yo===n.bq.vertical?(hr=oi(),nn=hr):hr=On(),hr&&hr.box&&hr.box.length)break}else hr=On()};if(L.get("text-variable-anchor")){let On=L.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[La]){const Ti=this.prevPlacement.variableOffsets[La];On.indexOf(Ti.anchor)>0&&(On=On.filter(os=>os!==Ti.anchor),On.unshift(Ti.anchor))}const oi=(Ti,os,Cc)=>{const qo=E.getSymbolInstanceTextSize(Ee,Wt,this.transform.zoom,pa),iu=(Ti.x2-Ti.x1)*qo+2*Ti.padding,Ll=(Ti.y2-Ti.y1)*qo+2*Ti.padding,Ju=Wt.hasIconTextFit&&!st?os:null;Ju&&Wi(Ju);let vl={box:[],offscreen:!1,occluded:!1};const qd=it?2*On.length:On.length;for(let go=0;go<qd;++go){const Sh=this.attemptAnchorPlacement(On[go%On.length],Ti,iu,Ll,qo,ot,gt,de,$,Be,go>=On.length,Wt,pa,E,Cc,Ju,Ee,Ve);if(Sh&&(vl=Sh.placedGlyphBoxes,vl&&vl.box&&vl.box.length)){mr=!0,Ir=Sh.shift;break}}return vl};ii(()=>oi(hs,Ia.iconBox,n.bq.horizontal),()=>{const Ti=Ia.verticalTextBox;return Ti&&Wi(Ti),E.allowVerticalPlacement&&!(hr&&hr.box&&hr.box.length)&&Ea>0&&Ti?oi(Ti,Ia.verticalIconBox,n.bq.vertical):{box:null,offscreen:null,occluded:null}}),hr&&(mr=hr.box,Cr=hr.offscreen,xr=hr.occluded);const yo=Cn(!(!hr||!hr.box));if(!mr&&this.prevPlacement){const Ti=this.prevPlacement.variableOffsets[La];Ti&&(this.variableOffsets[La]=Ti,this.markUsedJustification(E,Ti.anchor,Wt,yo))}}else{const On=(oi,yo)=>{const Ti=E.getSymbolInstanceTextSize(Ee,Wt,this.transform.zoom,pa,C),os=this.collisionIndex.placeCollisionBox(E,Ti,oi,new n.P(0,0),it,de,$,Be.predicate);return os&&os.box&&os.box.length&&(this.markUsedOrientation(E,yo,Wt),this.placedOrientations[La]=yo),os};ii(()=>On(hs,n.bq.horizontal),()=>{const oi=Ia.verticalTextBox;return E.allowVerticalPlacement&&Ea>0&&oi?(Wi(oi),On(oi,n.bq.vertical)):{box:null,offscreen:null,occluded:null}}),Cn(!!(hr&&hr.box&&hr.box.length))}}if(Tr=hr,mr=Tr&&Tr.box&&Tr.box.length>0,Cr=Tr&&Tr.offscreen,xr=Tr&&Tr.occluded,Wt.useRuntimeCollisionCircles){const Cn=E.text.placedSymbolArray.get(Wt.centerJustifiedTextSymbolIndex>=0?Wt.centerJustifiedTextSymbolIndex:Wt.verticalPlacedTextSymbolIndex),ii=n.br(E.textSizeData,Ee,Cn),On=L.get("text-padding");tr=this.collisionIndex.placeCollisionCircles(E,it,Cn,E.lineVertexArray,E.glyphOffsetArray,ii,$,W,te,A,gt,Be.predicate,Wt.collisionCircleDiameter*ii/n.bw,On,this.retainedQueryData[E.bucketInstanceId].tileID),mr=it||tr.circles.length>0&&!tr.collisionDetected,Cr=Cr&&tr.offscreen,xr=tr.occluded}if(Ia.iconFeatureIndex&&(Vn=Ia.iconFeatureIndex),Ia.iconBox){const Cn=ii=>{Wi(ii);const On=Wt.hasIconTextFit&&Ir?Zs(Ir.x,Ir.y,ot,gt,this.transform.angle):new n.P(0,0),oi=E.getSymbolInstanceIconSize(Ve,this.transform.zoom,Wt.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(E,oi,ii,On,st,de,$,Be.predicate)};nn&&nn.box&&nn.box.length&&Ia.verticalIconBox?(sn=Cn(Ia.verticalIconBox),Or=sn.box.length>0):(sn=Cn(Ia.iconBox),Or=sn.box.length>0),Cr=Cr&&sn.offscreen,Ur=sn.occluded}const ro=Je||Wt.numHorizontalGlyphVertices===0&&Ea===0,Ws=dt||Wt.numIconVertices===0;if(ro||Ws?Ws?ro||(Or=Or&&mr):mr=Or&&mr:Or=mr=Or&&mr,mr&&Tr&&Tr.box&&this.collisionIndex.insertCollisionBox(Tr.box,L.get("text-ignore-placement"),E.bucketInstanceId,nn&&nn.box&&cn?cn:$n,Be.ID),Or&&sn&&this.collisionIndex.insertCollisionBox(sn.box,L.get("icon-ignore-placement"),E.bucketInstanceId,Vn,Be.ID),tr&&(mr&&this.collisionIndex.insertCollisionCircles(tr.circles,L.get("text-ignore-placement"),E.bucketInstanceId,$n,Be.ID),A)){const Cn=E.bucketInstanceId;let ii=this.collisionCircleArrays[Cn];ii===void 0&&(ii=this.collisionCircleArrays[Cn]=new Yf);for(let On=0;On<tr.circles.length;On+=4)ii.circles.push(tr.circles[On+0]),ii.circles.push(tr.circles[On+1]),ii.circles.push(tr.circles[On+2]),ii.circles.push(tr.collisionDetected?1:0)}const mo=E.projection.name!=="globe";zt=zt&&(mo||!xr),oa=oa&&(mo||!Ur),this.placements[La]=new Au(mr||zt,Or||oa,Cr||E.justReloaded),c.add(La)};if(E.elevationType==="offset"&&this.buildingIndex&&this.buildingIndex.updateZOffset(E,this.retainedQueryData[E.bucketInstanceId].tileID),E.elevationType==="road"&&E.updateRoadElevation(),E.updateZOffset(),E.sortFeaturesByY){const Wt=E.getSortedSymbolIndexes(this.transform.angle);for(let pa=Wt.length-1;pa>=0;--pa){const Ia=Wt[pa];da(E.symbolInstances.get(Ia),Ia,E.collisionArrays[Ia])}E.hasAnyZOffset&&n.w(`${E.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(E.hasAnyZOffset){const Wt=E.getSortedIndexesByZOffset();for(let pa=0;pa<Wt.length;++pa){const Ia=Wt[pa];da(E.symbolInstances.get(Ia),Ia,E.collisionArrays[Ia])}}else for(let Wt=o.symbolInstanceStart;Wt<o.symbolInstanceEnd;Wt++)da(E.symbolInstances.get(Wt),Wt,E.collisionArrays[Wt]);if(A&&E.bucketInstanceId in this.collisionCircleArrays){const Wt=this.collisionCircleArrays[E.bucketInstanceId];n.ad.mat4.invert(Wt.invProjMatrix,$),Wt.viewportMatrix=this.collisionIndex.getViewportMatrix()}E.justReloaded=!1}markUsedJustification(o,c,A,R){const{leftJustifiedTextSymbolIndex:C,centerJustifiedTextSymbolIndex:E,rightJustifiedTextSymbolIndex:L,verticalPlacedTextSymbolIndex:j,crossTileID:$}=A,W=n.bB(c),te=R===n.bq.vertical?j:W==="left"?C:W==="center"?E:W==="right"?L:-1;C>=0&&(o.text.placedSymbolArray.get(C).crossTileID=te>=0&&C!==te?0:$),E>=0&&(o.text.placedSymbolArray.get(E).crossTileID=te>=0&&E!==te?0:$),L>=0&&(o.text.placedSymbolArray.get(L).crossTileID=te>=0&&L!==te?0:$),j>=0&&(o.text.placedSymbolArray.get(j).crossTileID=te>=0&&j!==te?0:$)}markUsedOrientation(o,c,A){const R=c===n.bq.horizontal||c===n.bq.horizontalOnly?c:0,C=c===n.bq.vertical?c:0,{leftJustifiedTextSymbolIndex:E,centerJustifiedTextSymbolIndex:L,rightJustifiedTextSymbolIndex:j,verticalPlacedTextSymbolIndex:$}=A,W=o.text.placedSymbolArray;E>=0&&(W.get(E).placedOrientation=R),L>=0&&(W.get(L).placedOrientation=R),j>=0&&(W.get(j).placedOrientation=R),$>=0&&(W.get($).placedOrientation=C)}commit(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let A=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const R=c?c.symbolFadeChange(o):1,C=c?c.opacities:{},E=c?c.variableOffsets:{},L=c?c.placedOrientations:{};for(const j in this.placements){const $=this.placements[j],W=C[j];W?(this.opacities[j]=new gu(W,R,$.text,$.icon,null,$.clipped),A=A||$.text!==W.text.placed||$.icon!==W.icon.placed):(this.opacities[j]=new gu(null,R,$.text,$.icon,$.skipFade,$.clipped),A=A||$.text||$.icon)}for(const j in C){const $=C[j];if(!this.opacities[j]){const W=new gu($,R,!1,!1);W.isHidden()||(this.opacities[j]=W,A=A||$.text.placed||$.icon.placed)}}for(const j in E)this.variableOffsets[j]||!this.opacities[j]||this.opacities[j].isHidden()||(this.variableOffsets[j]=E[j]);for(const j in L)this.placedOrientations[j]||!this.opacities[j]||this.opacities[j].isHidden()||(this.placedOrientations[j]=L[j]);A?this.lastPlacementChangeTime=o:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:o)}updateLayerOpacities(o,c,A,R){const C=new Set;for(const E of c){const L=E.getBucket(o);L&&E.latestFeatureIndex&&o.fqid===L.layerIds[0]&&(this.updateBucketOpacities(L,C,E,E.collisionBoxArray,A,R,E.tileID,o.scope),L.elevationType==="offset"&&this.buildingIndex&&this.buildingIndex.updateZOffset(L,E.tileID),L.elevationType==="road"&&L.updateRoadElevation(),L.updateZOffset())}}updateBucketOpacities(o,c,A,R,C,E,L,j){o.hasTextData()&&o.text.opacityVertexArray.clear(),o.hasIconData()&&o.icon.opacityVertexArray.clear(),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();const $=o.layers[0].layout,W=o.layers[0].paint,te=!!o.layers[0].dynamicFilter(),ae=new gu(null,0,!1,!1,!0),de=$.get("text-allow-overlap"),Te=$.get("icon-allow-overlap"),ve=$.get("text-variable-anchor"),Ee=$.get("text-rotation-alignment")==="map",Ve=$.get("text-pitch-alignment")==="map",Be=W.get("symbol-z-offset"),et=$.get("symbol-elevation-reference")==="sea",Je=!Be.isConstant(),dt=new gu(null,0,de&&(Te||!o.hasIconData()||$.get("icon-optional")),Te&&(de||!o.hasTextData()||$.get("text-optional")),!0);!o.collisionArrays&&R&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(R);const it=(ot,gt,Tt)=>{for(let Xt=0;Xt<gt/4;Xt++)ot.opacityVertexArray.emplaceBack(Tt)};let st=0;E&&o.updateReplacement(L,E);for(let ot=0;ot<o.symbolInstances.length;ot++){const gt=o.symbolInstances.get(ot),{numHorizontalGlyphVertices:Tt,numVerticalGlyphVertices:Xt,crossTileID:Ft,numIconVertices:ra,tileAnchorX:ua,tileAnchorY:Ca}=gt;let Lt=null;const sa=this.retainedQueryData[o.bucketInstanceId];Je&&gt&&sa&&(Lt=A.latestFeatureIndex.loadFeature({featureIndex:gt.featureIndex,bucketIndex:sa.bucketIndex,sourceLayerIndex:sa.sourceLayerIndex,layoutVertexArrayOffset:0}));const zt=Be.evaluate(Lt,{}),oa=c.has(Ft);let ea=this.opacities[Ft];oa?ea=ae:ea||(ea=dt,this.opacities[Ft]=ea),c.add(Ft);const da=Tt>0||Xt>0,Wt=ra>0,pa=this.placedOrientations[Ft],Ia=pa===n.bq.vertical,La=pa===n.bq.horizontal||pa===n.bq.horizontalOnly;!da&&!Wt||ea.isHidden()||st++;let Ea=!1;if((da||Wt)&&E)for(const sr of o.activeReplacements){if(n.bx(sr,C,n.by.Symbol,j)||sr.min.x>ua||ua>sr.max.x||sr.min.y>Ca||Ca>sr.max.y)continue;const Fr=n.bz(ua,Ca,L.canonical,sr.footprintTileId.canonical);if(Ea=n.bA(Fr,sr.footprint),Ea)break}if(da){const sr=Ea?wr:rr(ea.text);it(o.text,Tt,Ia?wr:sr),it(o.text,Xt,La?wr:sr);const Fr=ea.text.isHidden(),{leftJustifiedTextSymbolIndex:mr,centerJustifiedTextSymbolIndex:Or,rightJustifiedTextSymbolIndex:Cr,verticalPlacedTextSymbolIndex:xr}=gt,Ur=o.text.placedSymbolArray,Ir=Fr||Ia?1:0;mr>=0&&(Ur.get(mr).hidden=Ir),Or>=0&&(Ur.get(Or).hidden=Ir),Cr>=0&&(Ur.get(Cr).hidden=Ir),xr>=0&&(Ur.get(xr).hidden=Fr||La?1:0);const hr=this.variableOffsets[Ft];hr&&this.markUsedJustification(o,hr.anchor,gt,pa);const nn=this.placedOrientations[Ft];nn&&(this.markUsedJustification(o,"left",gt,nn),this.markUsedOrientation(o,nn,gt))}if(Wt){const sr=Ea?wr:rr(ea.icon),{placedIconSymbolIndex:Fr,verticalPlacedIconSymbolIndex:mr}=gt,Or=o.icon.placedSymbolArray,Cr=ea.icon.isHidden()?1:0;Fr>=0&&(it(o.icon,ra,Ia?wr:sr),Or.get(Fr).hidden=Cr),mr>=0&&(it(o.icon,gt.numVerticalIconVertices,La?wr:sr),Or.get(mr).hidden=Cr)}if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){const sr=o.collisionArrays[ot];if(sr){let Fr=new n.P(0,0),mr=!0;if(sr.textBox||sr.verticalTextBox){if(ve){const Cr=this.variableOffsets[Ft];Cr?(Fr=bd(Cr.anchor,Cr.width,Cr.height,Cr.textOffset,Cr.textScale),Ee&&Fr._rotate(Ve?this.transform.angle:-this.transform.angle)):mr=!1}te&&(mr=!ea.clipped),sr.textBox&&Yl(o.textCollisionBox.collisionVertexArray,ea.text.placed,!mr||Ia,zt,et,Fr.x,Fr.y),sr.verticalTextBox&&Yl(o.textCollisionBox.collisionVertexArray,ea.text.placed,!mr||La,zt,et,Fr.x,Fr.y)}const Or=mr&&!!(!La&&sr.verticalIconBox);sr.iconBox&&Yl(o.iconCollisionBox.collisionVertexArray,ea.icon.placed,Or,zt,et,gt.hasIconTextFit?Fr.x:0,gt.hasIconTextFit?Fr.y:0),sr.verticalIconBox&&Yl(o.iconCollisionBox.collisionVertexArray,ea.icon.placed,!Or,zt,et,gt.hasIconTextFit?Fr.x:0,gt.hasIconTextFit?Fr.y:0)}}}if(o.fullyClipped=st===0,o.sortFeatures(this.transform.angle),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.bucketInstanceId in this.collisionCircleArrays){const ot=this.collisionCircleArrays[o.bucketInstanceId];o.placementInvProjMatrix=ot.invProjMatrix,o.placementViewportMatrix=ot.viewportMatrix,o.collisionCircleArray=ot.circles,delete this.collisionCircleArrays[o.bucketInstanceId]}}symbolFadeChange(o){return this.fadeDuration===0?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(o){return Math.max(0,(this.transform.zoom-o)/1.5)}hasTransitions(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(o,c){const A=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*A>o}setStale(){this.stale=!0}}function Yl(g,o,c,A,R,C,E){g.emplaceBack(o?1:0,c?1:0,C||0,E||0,A,R?1:0),g.emplaceBack(o?1:0,c?1:0,C||0,E||0,A,R?1:0),g.emplaceBack(o?1:0,c?1:0,C||0,E||0,A,R?1:0),g.emplaceBack(o?1:0,c?1:0,C||0,E||0,A,R?1:0)}const gf=Math.pow(2,25),oe=Math.pow(2,24),Ke=Math.pow(2,17),Dt=Math.pow(2,16),Yt=Math.pow(2,9),ha=Math.pow(2,8),Da=Math.pow(2,1);function rr(g){if(g.opacity===0&&!g.placed)return 0;if(g.opacity===1&&g.placed)return 4294967295;const o=g.placed?1:0,c=Math.floor(127*g.opacity);return c*gf+o*oe+c*Ke+o*Dt+c*Yt+o*ha+c*Da+o}const wr=0;class $r{constructor(o){this._sortAcrossTiles=o.layout.get("symbol-z-order")!=="viewport-y"&&o.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(o,c,A,R,C,E){const L=this._bucketParts;for(;this._currentTileIndex<o.length;)if(c.getBucketParts(L,R,o[this._currentTileIndex],this._sortAcrossTiles,E),this._currentTileIndex++,C())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,L.sort((j,$)=>j.sortKey-$.sortKey));this._currentPartIndex<L.length;){const j=L[this._currentPartIndex];if(c.placeLayerBucketPart(j,this._seenCrossTileIDs,A,j.symbolInstanceStart===0,E),this._currentPartIndex++,C())return!0}return!1}}class Sn{constructor(o,c,A,R,C,E,L,j,$){this.placement=new yf(o,C,E,L,j,$),this._currentPlacementIndex=c.length-1,this._forceFullPlacement=A,this._showCollisionBoxes=R,this._done=!1}isDone(){return this._done}continuePlacement(o,c,A,R,C){const E=n.q.now(),L=()=>{const j=n.q.now()-E;return!this._forceFullPlacement&&j>2};for(;this._currentPlacementIndex>=0;){const j=c[o[this._currentPlacementIndex]],$=this.placement.collisionIndex.transform.zoom;if(j.type==="symbol"&&(!j.minzoom||j.minzoom<=$)&&(!j.maxzoom||j.maxzoom>$)){const W=j,te=W.layout.get("symbol-z-elevate"),ae=W.layout.get("symbol-sort-key").constantOr(1)!==void 0,de=W.layout.get("symbol-z-order"),Te=de==="viewport-y"||de==="auto"&&!(de!=="viewport-y"&&ae),ve=W.layout.get("text-allow-overlap")||W.layout.get("icon-allow-overlap")||W.layout.get("text-ignore-placement")||W.layout.get("icon-ignore-placement"),Ee=Te&&ve,Ve=this._inProgressLayer=this._inProgressLayer||new $r(W),Be=n.C(j.source,j.scope);if(Ve.continuePlacement(te||Ee?R[Be]:A[Be],this.placement,this._showCollisionBoxes,j,L,C))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(o){return this.placement.commit(o),this.placement}}const Nn=512/n.ai/2;class mi{constructor(o,c,A){this.tileID=o,this.bucketInstanceId=A,this.index=new n.bE(c.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const R=o.canonical.x*n.ai,C=o.canonical.y*n.ai;for(let E=0;E<c.length;E++){const{key:L,crossTileID:j,tileAnchorX:$,tileAnchorY:W}=c.get(E),te=Math.floor((R+$)*Nn),ae=Math.floor((C+W)*Nn);this.index.add(te,ae),this.keys.push(L),this.crossTileIDs.push(j)}this.index.finish()}findMatches(o,c,A){const R=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z),C=Nn/Math.pow(2,c.canonical.z-this.tileID.canonical.z),E=c.canonical.x*n.ai,L=c.canonical.y*n.ai;for(let j=0;j<o.length;j++){const $=o.get(j);if($.crossTileID)continue;const{key:W,tileAnchorX:te,tileAnchorY:ae}=$,de=Math.floor((E+te)*C),Te=Math.floor((L+ae)*C),ve=this.index.range(de-R,Te-R,de+R,Te+R);for(const Ee of ve){const Ve=this.crossTileIDs[Ee];if(this.keys[Ee]===W&&!A.has(Ve)){A.add(Ve),$.crossTileID=Ve;break}}}}}class Ss{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Cs{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(o){const c=Math.round((o-this.lng)/360);if(c!==0)for(const A in this.indexes){const R=this.indexes[A],C={};for(const E in R){const L=R[E];L.tileID=L.tileID.unwrapTo(L.tileID.wrap+c),C[L.tileID.key]=L}this.indexes[A]=C}this.lng=o}addBucket(o,c,A){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(let C=0;C<c.symbolInstances.length;C++)c.symbolInstances.get(C).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]=new Set);const R=this.usedCrossTileIDs[o.overscaledZ];for(const C in this.indexes){const E=this.indexes[C];if(Number(C)>o.overscaledZ)for(const L in E){const j=E[L];j.tileID.isChildOf(o)&&j.findMatches(c.symbolInstances,o,R)}else{const L=E[o.scaledTo(Number(C)).key];L&&L.findMatches(c.symbolInstances,o,R)}}for(let C=0;C<c.symbolInstances.length;C++){const E=c.symbolInstances.get(C);E.crossTileID||(E.crossTileID=A.generate(),R.add(E.crossTileID))}return this.indexes[o.overscaledZ]===void 0&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new mi(o,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(o,c){for(const A of c.crossTileIDs)this.usedCrossTileIDs[o].delete(A)}removeStaleBuckets(o){let c=!1;for(const A in this.indexes){const R=this.indexes[A];for(const C in R)o[R[C].bucketInstanceId]||(this.removeBucketCrossTileIDs(A,R[C]),delete R[C],c=!0)}return c}}class Js{constructor(){this.layerIndexes={},this.crossTileIDs=new Ss,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(o,c,A,R){let C=this.layerIndexes[o.fqid];C===void 0&&(C=this.layerIndexes[o.fqid]=new Cs);let E=!1;const L={};R.name!=="globe"&&C.handleWrapJump(A);for(const j of c){const $=j.getBucket(o);$&&o.fqid===$.layerIds[0]&&($.bucketInstanceId||($.bucketInstanceId=++this.maxBucketInstanceId),C.addBucket(j.tileID,$,this.crossTileIDs)&&(E=!0),L[$.bucketInstanceId]=!0)}return C.removeStaleBuckets(L)&&(E=!0),E}pruneUnusedLayers(o){const c={};o.forEach(A=>{c[A]=!0});for(const A in this.layerIndexes)c[A]||delete this.layerIndexes[A]}}const es=771;class br{constructor(o,c,A,R){this.blendFunction=o,this.blendColor=c,this.mask=A,this.blendEquation=R}}br.Replace=[1,0,1,0],br.disabled=new br(br.Replace,n.al.transparent,[!1,!1,!1,!1]),br.unblended=new br(br.Replace,n.al.transparent,[!0,!0,!0,!0]),br.alphaBlended=new br([1,es,1,es],n.al.transparent,[!0,!0,!0,!0]),br.alphaBlendedNonPremultiplied=new br([770,es,770,es],n.al.transparent,[!0,!0,!0,!0]),br.multiply=new br([774,0,774,0],n.al.transparent,[!0,!0,!0,!0]);class ir{constructor(o,c,A){this.func=o,this.mask=c,this.range=A}}ir.ReadOnly=!1,ir.ReadWrite=!0,ir.disabled=new ir(519,ir.ReadOnly,[0,1]);const fl=7680;class Rr{constructor(o,c,A,R,C,E){this.test=o,this.ref=c,this.mask=A,this.fail=R,this.depthFail=C,this.pass=E}}Rr.disabled=new Rr({func:519,mask:0},0,0,fl,fl,fl);const _u=1029,Xl=2305;class vr{constructor(o,c,A){this.enable=o,this.mode=c,this.frontFace=A}}function uh(g,o){const c=n.bG(g,3);n.ad.mat4.fromQuat(g,o),n.bI(g,3,c)}function Jl(g,o){const c=n.ad.quat.identity([]);return n.ad.quat.rotateZ(c,c,-o),n.ad.quat.rotateX(c,c,-g),c}function dc(g,o){const c=[g[0],g[1],0],A=[o[0],o[1],0];if(n.ad.vec3.length(c)>=1e-15){const E=n.ad.vec3.normalize([],c);n.ad.vec3.scale(A,E,n.ad.vec3.dot(A,E)),o[0]=A[0],o[1]=A[1]}const R=n.ad.vec3.cross([],o,g);if(n.ad.vec3.len(R)<1e-15)return null;const C=Math.atan2(-R[1],R[0]);return Jl(Math.atan2(Math.sqrt(g[0]*g[0]+g[1]*g[1]),-g[2]),C)}vr.disabled=new vr(!1,_u,Xl),vr.backCCW=new vr(!0,_u,Xl),vr.backCW=new vr(!0,_u,2304),vr.frontCW=new vr(!0,1028,2304),vr.frontCCW=new vr(!0,1028,Xl);class xd{constructor(o,c){this.position=o,this.orientation=c}get position(){return this._position}set position(o){if(o){const c=o instanceof n.ac?o:new n.ac(o[0],o[1],o[2]);this._renderWorldCopies&&(c.x=n.bF(c.x,0,1)),this._position=c}else this._position=null}lookAtPoint(o,c){if(this.orientation=null,!this.position)return;const A=this.position,R=this._elevation?this._elevation.getAtPointOrZero(n.ac.fromLngLat(o)):0,C=n.ac.fromLngLat(o,R),E=[C.x-A.x,C.y-A.y,C.z-A.z];c||(c=[0,0,1]),c[2]=Math.abs(c[2]),this.orientation=dc(E,c)}setPitchBearing(o,c){this.orientation=Jl(n.ak(o),n.ak(-c))}}class bs{constructor(o,c){this._transform=n.ad.mat4.identity([]),this.orientation=c,this.position=o}get mercatorPosition(){const o=this.position;return new n.ac(o[0],o[1],o[2])}get position(){const o=n.bG(this._transform,3);return[o[0],o[1],o[2]]}set position(o){var c;o&&n.bI(this._transform,3,[(c=o)[0],c[1],c[2],1])}get orientation(){return this._orientation}set orientation(o){this._orientation=o||n.ad.quat.identity([]),o&&uh(this._transform,this._orientation)}getPitchBearing(){const o=this.forward(),c=this.right();return{bearing:Math.atan2(-c[1],c[0]),pitch:Math.atan2(Math.sqrt(o[0]*o[0]+o[1]*o[1]),-o[2])}}setPitchBearing(o,c){this._orientation=Jl(o,c),uh(this._transform,this._orientation)}forward(){const o=n.bG(this._transform,2);return[-o[0],-o[1],-o[2]]}up(){const o=n.bG(this._transform,1);return[-o[0],-o[1],-o[2]]}right(){const o=n.bG(this._transform,0);return[o[0],o[1],o[2]]}getCameraToWorld(o,c){const A=new Float64Array(16);return n.ad.mat4.invert(A,this.getWorldToCamera(o,c)),A}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(o,c,A){const R=this.position;n.ad.vec3.scale(R,R,-o);const C=new Float64Array(16);return n.ad.mat4.fromScaling(C,[A,A,A]),n.ad.mat4.translate(C,C,R),C[10]*=c,C}getWorldToCamera(o,c){const A=new Float64Array(16),R=new Float64Array(4),C=this.position;return n.ad.quat.conjugate(R,this._orientation),n.ad.vec3.scale(C,C,-o),n.ad.mat4.fromQuat(A,R),n.ad.mat4.translate(A,A,C),A[1]*=-1,A[5]*=-1,A[9]*=-1,A[13]*=-1,A[8]*=c,A[9]*=c,A[10]*=c,A[11]*=c,A}getCameraToClipPerspective(o,c,A,R){const C=new Float64Array(16);return n.ad.mat4.perspective(C,o,c,A,R),C}getCameraToClipOrthographic(o,c,A,R,C,E){const L=new Float64Array(16);return n.ad.mat4.ortho(L,o,c,A,R,C,E),L}getDistanceToElevation(o,c=!1){const A=o===0?0:n.bH(o,c?n.aT(this.position[1]):this.position[1]),R=this.forward();return(A-this.position[2])/R[2]}clone(){return new bs([...this.position],[...this.orientation])}}const Ai={BaseColor:5,MetallicRoughness:6,Normal:7,Occlusion:8,Emission:9,LUT:10,ShadowMap0:11};class hc{constructor(o=0,c=0,A=0,R=0){if(isNaN(o)||o<0||isNaN(c)||c<0||isNaN(A)||A<0||isNaN(R)||R<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=c,this.left=A,this.right=R}interpolate(o,c,A){return c.top!=null&&o.top!=null&&(this.top=n.ah(o.top,c.top,A)),c.bottom!=null&&o.bottom!=null&&(this.bottom=n.ah(o.bottom,c.bottom,A)),c.left!=null&&o.left!=null&&(this.left=n.ah(o.left,c.left,A)),c.right!=null&&o.right!=null&&(this.right=n.ah(o.right,c.right,A)),this}getCenter(o,c){const A=n.ay((this.left+o-this.right)/2,0,o),R=n.ay((this.top+c-this.bottom)/2,0,c);return new n.P(A,R)}equals(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right}clone(){return new hc(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Va=15;class Pd{constructor(o,c,A,R,C,E,L){this.tileSize=512,this._renderWorldCopies=C===void 0||C,this._minZoom=o||0,this._maxZoom=c||22,this._minPitch=A??0,this._maxPitch=R??60,this.setProjection(E),this.setMaxBounds(L),this.width=0,this.height=0,this._center=new n.bO(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new hc,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new bs,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._tileCoverLift=0,this.freezeTileCoverage=!1,this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1,this._allowWorldUnderZoom=!1}clone(){const o=new Pd(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection(),this.maxBounds);return o._elevation=this._elevation,o._centerAltitude=this._centerAltitude,o._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,o.tileSize=this.tileSize,o.mercatorFromTransition=this.mercatorFromTransition,o.width=this.width,o.height=this.height,o.cameraElevationReference=this.cameraElevationReference,o._center=this._center,o._setZoom(this.zoom),o._seaLevelZoom=this._seaLevelZoom,o.angle=this.angle,o._fov=this._fov,o._pitch=this._pitch,o._nearZ=this._nearZ,o._farZ=this._farZ,o._averageElevation=this._averageElevation,o._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,o._unmodified=this._unmodified,o._edgeInsets=this._edgeInsets.clone(),o._camera=this._camera.clone(),o._calcMatrices(),o.freezeTileCoverage=this.freezeTileCoverage,o.frustumCorners=this.frustumCorners,o._allowWorldUnderZoom=this._allowWorldUnderZoom,o}get isOrthographic(){return this.projection.name!=="globe"&&this._orthographicProjectionAtLowPitch&&this.pitch<Va}get elevation(){return this._elevation}set elevation(o){this._elevation!==o&&(this._elevation=o,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return this.projection.name!=="globe"&&!this.isOrthographic}updateElevation(o,c=!1){const A=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||A)&&this._updateCameraOnTerrain(),(o||A)&&this._constrainCamera(c),this._calcMatrices()}getProjection(){return n.aA(this.projection,["name","center","parallels"])}setProjection(o){this.projectionOptions=o||{name:"mercator"};const c=this.projection?this.getProjection():void 0;this.projection=n.bP(this.projectionOptions);const A=this.getProjection(),R=!n.bn(c,A);return R&&this._calcMatrices(),this.mercatorFromTransition=!1,R}setOrthographicProjectionAtLowPitch(o){return this._orthographicProjectionAtLowPitch!==o&&(this._orthographicProjectionAtLowPitch=o,this._calcMatrices(),!0)}setMercatorFromTransition(){const o=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=n.bP({name:"mercator"});const c=o!==this.projection.name;return c&&this._calcMatrices(),c}get minZoom(){return this._minZoom}set minZoom(o){this._minZoom!==o&&(this._minZoom=o,this.zoom=Math.max(this.zoom,o))}get maxZoom(){return this._maxZoom}set maxZoom(o){this._maxZoom!==o&&(this._maxZoom=o,this.zoom=Math.min(this.zoom,o))}get minPitch(){return this._minPitch}set minPitch(o){this._minPitch!==o&&(this._minPitch=o,this.pitch=Math.max(this.pitch,o))}get maxPitch(){return this._maxPitch}set maxPitch(o){this._maxPitch!==o&&(this._maxPitch=o,this.pitch=Math.min(this.pitch,o))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(o){o===void 0?o=!0:o===null&&(o=!1),this._renderWorldCopies=o}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const o=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(o))}get cameraWorldSize(){const o=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(o))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return n.bH(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new n.P(this.width,this.height)}get bearing(){return n.bF(this.rotation,-180,180)}set bearing(o){this.rotation=o}get rotation(){return-this.angle/Math.PI*180}set rotation(o){const c=-o*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=n.ad.mat2.create(),n.ad.mat2.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(o){const c=n.ay(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}set fov(o){o=Math.max(.01,Math.min(60,o)),this._fov!==o&&(this._unmodified=!1,this._fov=n.ak(o),this._calcMatrices())}get fovX(){return this._fov}get fovY(){const o=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/o)}get averageElevation(){return this._averageElevation}set averageElevation(o){this._averageElevation=o,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(o){const c=Math.min(Math.max(o,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._setZoom(c),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(o){this._zoom=o,this.scale=this.zoomScale(o),this.tileZoom=Math.floor(o),this.zoomFraction=o-this.tileZoom}get tileCoverLift(){return this._tileCoverLift}set tileCoverLift(o){this._tileCoverLift!==o&&(this._tileCoverLift=o)}_updateCameraOnTerrain(){const o=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,c=this.elevation&&o===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||o===Number.NEGATIVE_INFINITY&&(!c||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const A=this._elevation;c||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&A.exaggeration()&&this._centerAltitudeValidForExaggeration!==A.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*A.exaggeration(),this._centerAltitudeValidForExaggeration=A.exaggeration()):(this._centerAltitude=o||0,this._centerAltitudeValidForExaggeration=A.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const o=this._elevation,c=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],A=this.horizonLineFromTop();let R=0,C=0;for(let E=0;E<c.length;E++){const L=new n.P(c[E][0]*this.width,A+c[E][1]*(this.height-A)),j=o.pointCoordinate(L);if(!j)continue;const $=1/Math.hypot(j[0]-this._camera.position[0],j[1]-this._camera.position[1]);R+=j[3]*$,C+=$}return C===0?NaN:R/C}get center(){return this._center}set center(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const o=this._seaLevelZoom,c=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),A=this.pixelsPerMeter/this.worldSize*c,R=this._mercatorZfromZoom(o),C=this._mercatorZfromZoom(this._maxZoom),E=Math.max(R-A,C);this._setZoom(this._zoomFromMercatorZ(E))}get padding(){return this._edgeInsets.toJSON()}set padding(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())}computeZoomRelativeTo(o){const c=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,o.toAltitude()));let A;A=o.z<this._camera.position[2]?[c.x,c.y,c.z]:[o.x,o.y,o.z];const R=n.ad.vec3.length(n.ad.vec3.sub([],this._camera.position,A));return n.ay(this._zoomFromMercatorZ(R),this._minZoom,this._maxZoom)}setFreeCameraOptions(o){if(!this.height||!o.position&&!o.orientation)return;this._updateCameraState();let c=!1;if(o.orientation&&!n.ad.quat.exactEquals(o.orientation,this._camera.orientation)&&(c=this._setCameraOrientation(o.orientation)),o.position){const A=[o.position.x,o.position.y,o.position.z];n.ad.vec3.exactEquals(A,this._camera.position)||(this._setCameraPosition(A),c=!0)}c&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const o=this._camera.position,c=new xd;return c.position=new n.ac(o[0],o[1],o[2]),c.orientation=this._camera.orientation,c._elevation=this.elevation,c._renderWorldCopies=this.renderWorldCopies,c}_setCameraOrientation(o){if(!n.ad.quat.length(o))return!1;n.ad.quat.normalize(o,o);const c=n.ad.vec3.transformQuat([],[0,0,-1],o),A=n.ad.vec3.transformQuat([],[0,-1,0],o);if(A[2]<0)return!1;const R=dc(c,A);return!!R&&(this._camera.orientation=R,!0)}_setCameraPosition(o){const c=this.zoomScale(this.minZoom)*this.tileSize,A=this.zoomScale(this.maxZoom)*this.tileSize,R=this.cameraToCenterDistance;o[2]=n.ay(o[2],R/A,R/c),this._camera.position=o}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(o){return this._edgeInsets.equals(o)}interpolatePadding(o,c,A){this._unmodified=!1,this._edgeInsets.interpolate(o,c,A),this._constrain(),this._calcMatrices()}coveringZoomLevel(o){const c=(o.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/o.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(o){const c=[new n.bQ(0,o)];if(this.renderWorldCopies){const A=this.pointCoordinate(new n.P(0,0)),R=this.pointCoordinate(new n.P(this.width,0)),C=this.pointCoordinate(new n.P(this.width,this.height)),E=this.pointCoordinate(new n.P(0,this.height)),L=Math.floor(Math.min(A.x,R.x,C.x,E.x)),j=Math.floor(Math.max(A.x,R.x,C.x,E.x)),$=1;for(let W=L-$;W<=j+$;W++)W!==0&&c.push(new n.bQ(W,o))}return c}isLODDisabled(o){return(!o||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCover(o,c,A){let R=[];const C=A!==void 0,E=!C;if(E&&this.zoom<c||C&&A[0]===0&&A[1]===0)return R;const L=new Set,j=(W,te,ae,de,Te)=>{const ve=n.c5(te,W,ae,de,Te);L.has(ve)||(R.push(new n.aH(W,te,ae,de,Te)),L.add(ve))};for(let W=0;W<o.length;W++){const te=o[W];if(E&&te.canonical.z!==c)continue;const ae=te.canonical,de=te.overscaledZ,Te=te.wrap,ve=1<<ae.z,Ee=ae.x+1<ve,Ve=ae.x>0,Be=ae.y+1<ve,et=ae.y>0,Je=te.wrap-(Ve?0:1),dt=te.wrap+(Ee?0:1),it=Ve?ae.x-1:ve-1,st=Ee?ae.x+1:0;if(C)A[0]<0?(j(de,dt,ae.z,st,ae.y),A[1]<0&&Be&&(j(de,Te,ae.z,ae.x,ae.y+1),j(de,dt,ae.z,st,ae.y+1)),A[1]>0&&et&&(j(de,Te,ae.z,ae.x,ae.y-1),j(de,dt,ae.z,st,ae.y-1))):A[0]>0?(j(de,Je,ae.z,it,ae.y),A[1]<0&&Be&&(j(de,Te,ae.z,ae.x,ae.y+1),j(de,Je,ae.z,it,ae.y+1)),A[1]>0&&et&&(j(de,Te,ae.z,ae.x,ae.y-1),j(de,Je,ae.z,it,ae.y-1))):A[1]<0&&Be?j(de,Te,ae.z,ae.x,ae.y+1):et&&j(de,Te,ae.z,ae.x,ae.y-1);else{const ot=te.visibleQuadrants;1&ot&&(j(de,Je,ae.z,it,ae.y),et&&(j(de,Te,ae.z,ae.x,ae.y-1),j(de,Je,ae.z,it,ae.y-1))),2&ot&&(j(de,dt,ae.z,st,ae.y),et&&(j(de,Te,ae.z,ae.x,ae.y-1),j(de,dt,ae.z,st,ae.y-1))),4&ot&&(j(de,Je,ae.z,it,ae.y),Be&&(j(de,Te,ae.z,ae.x,ae.y+1),j(de,Je,ae.z,it,ae.y+1))),8&ot&&(j(de,dt,ae.z,st,ae.y),Be&&(j(de,Te,ae.z,ae.x,ae.y+1),j(de,dt,ae.z,st,ae.y+1)))}}const $=[];for(const W of R)R.some(te=>W.isChildOf(te))||$.push(W);if(R=$.filter(W=>!o.some(te=>!!(W.overscaledZ<c&&te.isChildOf(W))||W.equals(te)||W.isChildOf(te))),E){const W=1<<c,te=this.projection.name==="globe"?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),ae=[W*te.x,W*te.y],de=4,Te=de*de;R=R.filter(ve=>{const Ee=ve.canonical.x+.5-ae[0],Ve=ve.canonical.y+.5-ae[1];return Ee*Ee+Ve*Ve<Te})}return R}coveringTiles(o){let c=this.coveringZoomLevel(o);const A=c,R=this.elevation&&this.elevation.exaggeration(),C=R&&!o.isTerrainDEM,E=this.projection.name==="mercator";if(o.minzoom!==void 0&&c<o.minzoom)return[];o.maxzoom!==void 0&&c>o.maxzoom&&(c=o.maxzoom);const L=this.locationCoordinate(this.center),j=this.center.lat,$=1<<c,W=[$*L.x,$*L.y,0],te=this.projection.name==="globe",ae=!te,de=n.bR.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,c,ae),Te=te?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),ve=$*n.bH(1,this.center.lat),Ee=this._camera.position[2]/n.bH(1,this.center.lat),Ve=[$*Te.x,$*Te.y,Ee*(ae?1:ve)],Be=te||R,et=this.cameraToCenterDistance/o.tileSize*(o.roundZoom?1:.502),Je=this.isLODDisabled(!0)?c:0;let dt;if(this._elevation&&o.isTerrainDEM)dt=1e4*this._elevation.exaggeration();else if(this._elevation){const zt=this._elevation.getMinMaxForVisibleTiles();dt=zt?zt.max:this._centerAltitude}else dt=this._centerAltitude;const it=o.isTerrainDEM?-dt:this._elevation?this._elevation.getMinElevationBelowMSL():0,st=this.projection.isReprojectedInTileSpace?n.bS(this):1,ot=zt=>{const ea=new n.ac(zt.x+25e-6,zt.y,zt.z),da=new n.ac(zt.x,zt.y+25e-6,zt.z),Wt=zt.toLngLat(),pa=ea.toLngLat(),Ia=da.toLngLat(),La=this.locationCoordinate(Wt),Ea=this.locationCoordinate(pa),sr=this.locationCoordinate(Ia),Fr=Math.hypot(Ea.x-La.x,Ea.y-La.y),mr=Math.hypot(sr.x-La.x,sr.y-La.y);return Math.sqrt(Fr*mr)*st/25e-6},gt=zt=>{const oa=dt,ea=it;return{aabb:n.bV(this,$,0,0,0,zt,ea,oa,this.projection),zoom:0,x:0,y:0,minZ:ea,maxZ:oa,wrap:zt,fullyVisible:!1}},Tt=[];let Xt=[];const Ft=c,ra=o.reparseOverscaled?A:c,ua=(Ee-this._centerAltitude)*ve,Ca=zt=>{if(!this._elevation||!zt.tileID||!E)return;const oa=this._elevation.getMinMaxForTile(zt.tileID),ea=zt.aabb;oa?(ea.min[2]=oa.min,ea.max[2]=oa.max,ea.center[2]=(ea.min[2]+ea.max[2])/2):(zt.shouldSplit=sa(zt),zt.shouldSplit||(ea.min[2]=ea.max[2]=ea.center[2]=this._centerAltitude))},Lt=(zt,oa)=>{if(.707*oa<zt)return 1;const ea=oa/zt;return ea/(1.4144271570014144+(Math.pow(1.1,ea-1.4144271570014144+1)-1)/(1.1-1)-1)},sa=zt=>{if(zt.zoom<Je)return!0;if(zt.zoom===Ft)return!1;if(zt.shouldSplit!=null)return zt.shouldSplit;const oa=zt.aabb.distanceX(Ve),ea=zt.aabb.distanceY(Ve);let da=ua,Wt=1;if(te){da=zt.aabb.distanceZ(Ve);const mr=Math.pow(2,zt.zoom),Or=n.aT((zt.y+1)/mr),Cr=n.aT(zt.y/mr),xr=Math.min(Math.max(j,Or),Cr),Ur=n.ca(xr)/n.ca(j);if(Wt=xr===j?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Ur/this._mercatorScaleRatio),this.zoom<=n.c6&&zt.zoom===Ft-1&&Ur>=.9)return!0}else if(C&&(da=zt.aabb.distanceZ(Ve)*ve),this.projection.isReprojectedInTileSpace&&A<=5){const mr=Math.pow(2,zt.zoom),Or=ot(new n.ac((zt.x+.5)/mr,(zt.y+.5)/mr));Wt=Or>.85?1:Or}if(!E){const mr=Math.sqrt(oa*oa+ea*ea+da*da);let Or=(1<<Ft-zt.zoom)*et*Wt;return Or*=Lt(Math.max(da,ua),mr),mr<Or}let pa=Number.MAX_VALUE,Ia=0;const La=zt.aabb.getCorners(),Ea=[];for(const mr of La){n.ad.vec3.sub(Ea,mr,Ve),te||(C?Ea[2]*=ve:Ea[2]=ua);const Or=n.ad.vec3.dot(Ea,this._camera.forward());Or<pa&&(pa=Or,Ia=Math.abs(Ea[2]))}let sr=(1<<Ft-zt.zoom)*et*Wt;if(sr*=Lt(Math.max(Ia,ua),pa),pa<sr)return!0;const Fr=zt.aabb.closestPoint(W);return Fr[0]===W[0]&&Fr[1]===W[1]};if(this.renderWorldCopies)for(let zt=1;zt<=3;zt++)Tt.push(gt(-zt)),Tt.push(gt(zt));for(Tt.push(gt(0));Tt.length>0;){const zt=Tt.pop(),oa=zt.x,ea=zt.y;let da=zt.fullyVisible;const Wt=()=>this.projection.name==="globe"&&(zt.y===0||zt.y===(1<<zt.zoom)-1);if(!da){let pa=Be?zt.aabb.intersects(de):zt.aabb.intersectsFlat(de);if(pa===0&&Wt()){const Ia=new n.bT(zt.zoom,oa,ea);pa=n.bU(this,$,Ia,!0).intersects(de)}if(pa===0)continue;da=pa===2}if(zt.zoom!==Ft&&sa(zt))for(let pa=0;pa<4;pa++){const Ia=(oa<<1)+pa%2,La=(ea<<1)+(pa>>1),Ea={aabb:E?zt.aabb.quadrant(pa):n.bV(this,$,zt.zoom+1,Ia,La,zt.wrap,zt.minZ,zt.maxZ,this.projection),zoom:zt.zoom+1,x:Ia,y:La,wrap:zt.wrap,fullyVisible:da,tileID:void 0,shouldSplit:void 0,minZ:zt.minZ,maxZ:zt.maxZ};C&&!te&&(Ea.tileID=new n.aH(zt.zoom+1===Ft?ra:zt.zoom+1,zt.wrap,zt.zoom+1,Ia,La),Ca(Ea)),Tt.push(Ea)}else{const pa=zt.zoom===Ft?ra:zt.zoom;if(o.minzoom&&o.minzoom>pa)continue;let Ia=0;if(!da){let Fr=Be?zt.aabb.intersectsPrecise(de):zt.aabb.intersectsPreciseFlat(de);if(Fr===0&&Wt()){const mr=new n.bT(zt.zoom,oa,ea);Fr=n.bU(this,$,mr,!0).intersectsPrecise(de)}if(Fr===0)continue;if(o.calculateQuadrantVisibility)if(de.containsPoint(zt.aabb.center))Ia=15;else for(let mr=0;mr<4;mr++)zt.aabb.quadrant(mr).intersects(de)!==0&&(Ia|=1<<mr)}const La=W[0]-(.5+oa+(zt.wrap<<zt.zoom))*(1<<c-zt.zoom),Ea=W[1]-.5-ea,sr=zt.tileID?zt.tileID:new n.aH(pa,zt.wrap,zt.zoom,oa,ea);o.calculateQuadrantVisibility&&(sr.visibleQuadrants=Ia),Xt.push({tileID:sr,distanceSq:La*La+Ea*Ea})}}if(this.fogCullDistSq){const zt=this.fogCullDistSq,oa=this.horizonLineFromTop();Xt=Xt.filter(ea=>{const da=[0,0,0,1],Wt=[n.ai,n.ai,0,1],pa=this.calculateFogTileMatrix(ea.tileID.toUnwrapped());n.ad.vec4.transformMat4(da,da,pa),n.ad.vec4.transformMat4(Wt,Wt,pa);const Ia=n.ad.vec4.min([],da,Wt),La=n.ad.vec4.max([],da,Wt),Ea=n.bW(Ia,La);if(Ea===0)return!0;let sr=!1;const Fr=this._elevation;if(Fr&&Ea>zt&&oa!==0){const mr=this.calculateProjMatrix(ea.tileID.toUnwrapped());let Or;o.isTerrainDEM||(Or=Fr.getMinMaxForTile(ea.tileID)),Or||(Or={min:it,max:dt});const Cr=n.c7(this.rotation),xr=[Cr[0]*n.ai,Cr[1]*n.ai,Or.max];n.ad.vec3.transformMat4(xr,xr,mr),sr=(1-xr[1])*this.height*.5<oa}return Ea<zt||sr})}return Xt.sort((zt,oa)=>zt.distanceSq-oa.distanceSq).map(zt=>zt.tileID)}resize(o,c){this.width=o,this.height=c,this.pixelsToGLUnits=[2/o,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(o){return Math.pow(2,o)}scaleZoom(o){return Math.log(o)/Math.LN2}project(o){const c=n.ay(o.lat,-n.bX,n.bX),A=this.projection.project(o.lng,c);return new n.P(A.x*this.worldSize,A.y*this.worldSize)}unproject(o){return this.projection.unproject(o.x/this.worldSize,o.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/n.bH(1,this.center.lat)/this.worldSize}setLocationAtPoint(o,c){let A,R;const C=this.centerPoint;if(this.projection.name==="globe"){const L=this.worldSize;A=(c.x-C.x)/L,R=(c.y-C.y)/L}else{const L=this.pointCoordinate(c),j=this.pointCoordinate(C);A=L.x-j.x,R=L.y-j.y}const E=this.locationCoordinate(o);this.setLocation(new n.ac(E.x-A,E.y-R))}setLocation(o){this.center=this.coordinateLocation(o),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(o,c){return this.projection.locationPoint(this,o,c)}locationPoint3D(o,c){return this.projection.locationPoint(this,o,c,!0)}pointLocation(o){return this.coordinateLocation(this.pointCoordinate(o))}pointLocation3D(o,c){return this.coordinateLocation(this.pointCoordinate3D(o,c))}locationCoordinate(o,c){const A=c?n.bH(c,o.lat):void 0,R=this.projection.project(o.lng,o.lat);return new n.ac(R.x,R.y,A)}coordinateLocation(o){return this.projection.unproject(o.x,o.y)}pointRayIntersection(o,c){const A=c??this._centerAltitude,R=[o.x,o.y,0,1],C=[o.x,o.y,1,1];n.ad.vec4.transformMat4(R,R,this.pixelMatrixInverse),n.ad.vec4.transformMat4(C,C,this.pixelMatrixInverse);const E=C[3];n.ad.vec4.scale(R,R,1/R[3]),n.ad.vec4.scale(C,C,1/E);const L=R[2],j=C[2];return{p0:R,p1:C,t:L===j?0:(A-L)/(j-L)}}screenPointToMercatorRay(o){const c=[o.x,o.y,0,1],A=[o.x,o.y,1,1];return n.ad.vec4.transformMat4(c,c,this.pixelMatrixInverse),n.ad.vec4.transformMat4(A,A,this.pixelMatrixInverse),n.ad.vec4.scale(c,c,1/c[3]),n.ad.vec4.scale(A,A,1/A[3]),c[2]=n.bH(c[2],this._center.lat)*this.worldSize,A[2]=n.bH(A[2],this._center.lat)*this.worldSize,n.ad.vec4.scale(c,c,1/this.worldSize),n.ad.vec4.scale(A,A,1/this.worldSize),new n.as([c[0],c[1],c[2]],n.ad.vec3.normalize([],n.ad.vec3.sub([],A,c)))}rayIntersectionCoordinate(o){const{p0:c,p1:A,t:R}=o,C=n.bH(c[2],this._center.lat),E=n.bH(A[2],this._center.lat);return new n.ac(n.ah(c[0],A[0],R)/this.worldSize,n.ah(c[1],A[1],R)/this.worldSize,n.ah(C,E,R))}pointCoordinate(o,c=this._centerAltitude){return this.projection.pointCoordinate(this,o.x,o.y,c)}pointCoordinate3D(o,c){if(!this.elevation)return this.pointCoordinate(o,c);let A=this.projection.pointCoordinate3D(this,o.x,o.y);if(A)return new n.ac(A[0],A[1],A[2]);let R=0,C=this.horizonLineFromTop();if(o.y>C)return this.pointCoordinate(o,c);const E=.02*C,L=o.clone();for(let j=0;j<10&&C-R>E;j++){L.y=n.ah(R,C,.66);const $=this.projection.pointCoordinate3D(this,L.x,L.y);$?(C=L.y,A=$):R=L.y}return A?new n.ac(A[0],A[1],A[2]):this.pointCoordinate(o)}isPointAboveHorizon(o){return this.projection.isPointAboveHorizon(this,o)}isPointOnSurface(o){if(o.y<0||o.y>this.height||o.x<0||o.x>this.width)return!1;if(this.elevation||this.zoom>=n.bY)return!this.isPointAboveHorizon(o);const c=this.pointCoordinate(o);return c.y>=0&&c.y<=1}_coordinatePoint(o,c){const A=c&&this.elevation?this.elevation.getAtPointOrZero(o,this._centerAltitude):this._centerAltitude,R=[o.x*this.worldSize,o.y*this.worldSize,A+o.toAltitude(),1];return n.ad.vec4.transformMat4(R,R,this.pixelMatrix),R[3]>0?new n.P(R[0]/R[3],R[1]/R[3]):new n.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:o,left:c}=this._edgeInsets,A=this.height-this._edgeInsets.bottom,R=this.width-this._edgeInsets.right,C=this.pointLocation3D(new n.P(c,o)),E=this.pointLocation3D(new n.P(R,o)),L=this.pointLocation3D(new n.P(R,A)),j=this.pointLocation3D(new n.P(c,A));let $=Math.min(C.lng,E.lng,L.lng,j.lng),W=Math.max(C.lng,E.lng,L.lng,j.lng),te=Math.min(C.lat,E.lat,L.lat,j.lat),ae=Math.max(C.lat,E.lat,L.lat,j.lat);const de=Math.pow(2,-this.zoom)/16*270,Te=this.projection.name==="globe"?1:4,ve=(Ee,Ve,Be,et,Je)=>{const dt=(Ee+Be)/2,it=(Ve+et)/2,st=new n.P(dt,it),{lng:ot,lat:gt}=this.pointLocation3D(st),Tt=Math.max(0,$-ot,te-gt,ot-W,gt-ae);$=Math.min($,ot),W=Math.max(W,ot),te=Math.min(te,gt),ae=Math.max(ae,gt),(Je<Te||Tt>de)&&(ve(Ee,Ve,dt,it,Je+1),ve(dt,it,Be,et,Je+1))};if(ve(c,o,R,o,1),ve(R,o,R,A,1),ve(R,A,c,A,1),ve(c,A,c,o,1),this.projection.name==="globe"){const[Ee,Ve]=n.bZ(this);Ee?(ae=90,W=180,$=-180):Ve&&(te=-90,W=180,$=-180)}return new n.aB(new n.bO($,te),new n.bO(W,ae))}_getBoundsRectangular(o,c){const{top:A,left:R}=this._edgeInsets,C=this.height-this._edgeInsets.bottom,E=this.width-this._edgeInsets.right,L=new n.P(R,A),j=new n.P(E,A),$=new n.P(E,C),W=new n.P(R,C);let te=this.pointCoordinate(L,o),ae=this.pointCoordinate(j,o);const de=this.pointCoordinate($,c),Te=this.pointCoordinate(W,c),ve=(Ee,Ve)=>(Ve.y-Ee.y)/(Ve.x-Ee.x);return te.y>1&&ae.y>=0?te=new n.ac((1-Te.y)/ve(Te,te)+Te.x,1):te.y<0&&ae.y<=1&&(te=new n.ac(-Te.y/ve(Te,te)+Te.x,0)),ae.y>1&&te.y>=0?ae=new n.ac((1-de.y)/ve(de,ae)+de.x,1):ae.y<0&&te.y<=1&&(ae=new n.ac(-de.y/ve(de,ae)+de.x,0)),new n.aB().extend(this.coordinateLocation(te)).extend(this.coordinateLocation(ae)).extend(this.coordinateLocation(Te)).extend(this.coordinateLocation(de))}_getBoundsRectangularTerrain(){const o=this.elevation;if(!o.visibleDemTiles.length||o.isUsingMockSource())return this._getBoundsRectangular(0,0);const c=o.visibleDemTiles.reduce((A,R)=>{if(R.dem){const C=R.dem.tree;A.min=Math.min(A.min,C.minimums[0]),A.max=Math.max(A.max,C.maximums[0])}return A},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(c.min*o.exaggeration(),c.max*o.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(o=!0){const c=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,A=this.height/2-c*(1-this._horizonShift);return o?Math.max(0,A):A}getMaxBounds(){return this.maxBounds}setMaxBounds(o){this.maxBounds=o,this.minLat=-n.bX,this.maxLat=n.bX,this.minLng=-180,this.maxLng=180,o&&(this.minLat=o.getSouth(),this.maxLat=o.getNorth(),this.minLng=o.getWest(),this.maxLng=o.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=n.av(this.minLng)*this.tileSize,this.worldMaxX=n.av(this.maxLng)*this.tileSize,this.worldMinY=n.aC(this.maxLat)*this.tileSize,this.worldMaxY=n.aC(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(o,c){return this.projection.createTileMatrix(this,c,o)}calculateDistanceTileData(o){const c=o.key,A=this._distanceTileDataCache;if(A[c])return A[c];const R=o.canonical,C=1/this.height,E=this.cameraWorldSize,L=E/this.zoomScale(R.z),j=(R.x+Math.pow(2,R.z)*o.wrap)*L,$=R.y*L,W=this.point;W.x*=E/this.worldSize,W.y*=E/this.worldSize;const te=this.angle,ae=Math.sin(-te),de=-Math.cos(-te);return A[c]={bearing:[ae,de],center:[(W.x-j)*C,(W.y-$)*C],scale:L/n.ai*C},A[c]}calculateFogTileMatrix(o){const c=o.key,A=this._fogTileMatrixCache;if(A[c])return A[c];const R=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,o);return n.ad.mat4.multiply(R,this.worldToFogMatrix,R),A[c]=new Float32Array(R),A[c]}calculateProjMatrix(o,c=!1,A=!1){const R=o.key;let C;if(C=A?this._expandedProjMatrixCache:c?this._alignedProjMatrixCache:this._projMatrixCache,C[R])return C[R];const E=this.calculatePosMatrix(o,this.worldSize);let L;return L=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:A?this.expandedFarZProjMatrix:c?this.alignedProjMatrix:this.projMatrix,n.ad.mat4.multiply(E,L,E),C[R]=new Float32Array(E),C[R]}calculatePixelsToTileUnitsMatrix(o){const c=o.tileID.key,A=this._pixelsToTileUnitsCache;if(A[c])return A[c];const R=n.b_(o,this);return A[c]=R,A[c]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const o=1/this.worldSize,c=n.ad.mat4.fromScaling([],[o,o,o]);return n.ad.mat4.multiply(c,c,this.globeMatrix),c}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const o=this._elevation;this._updateCameraState();const c=n.bH(1,this._center.lat)*this.worldSize,A=this._computeCameraPosition(c),R=this._camera.forward(),C=n.bH(1,this._center.lat);A[2]/=C,R[2]/=C,n.ad.vec3.normalize(R,R);const E=o.raycast(A,R,o.exaggeration());if(E){const L=n.ad.vec3.scaleAndAdd([],A,R,E),j=new n.ac(L[0],L[1],n.bH(L[2],n.aT(L[1]))),$=(j.z+n.ad.vec3.length([j.x-A[0],j.y-A[1],j.z-A[2]*C]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ($),this._centerAltitude=j.toAltitude(),this._center=this.coordinateLocation(j),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(o=!1){if(!this._elevation)return;const c=this._elevation,A=n.bH(1,this._center.lat)*this.worldSize,R=this._computeCameraPosition(A),C=c.getAtPointOrZero(new n.ac(...R)),E=this.pixelsPerMeter/this.worldSize*C,L=this._minimumHeightOverTerrain(),j=R[2]-E;if(j<=L)if(j<0||o){const $=this.locationCoordinate(this._center,this._centerAltitude),W=[R[0],R[1],$.z-R[2]],te=n.ad.vec3.length(W);W[2]-=(L-j)/this._pixelsPerMercatorPixel;const ae=n.ad.vec3.length(W);if(ae===0)return;n.ad.vec3.scale(W,W,te/ae*this._pixelsPerMercatorPixel),this._camera.position=[R[0],R[1],$.z*this._pixelsPerMercatorPixel-W[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const o=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||o){const ae=this.center;return ae.lat=n.ay(ae.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!o)&&(ae.lng=n.ay(ae.lng,this.minLng,this.maxLng)),this.center=ae,void(this._constraining=!1)}const c=this._unmodified,{x:A,y:R}=this.point;let C=0,E=A,L=R;const j=this.width/2,$=this.height/2,W=this.worldMinY*this.scale,te=this.worldMaxY*this.scale;if(R-$<W&&(L=W+$),R+$>te&&(L=te-$),te-W<this.height&&(C=Math.max(C,this.height/(te-W)),L=(te+W)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const ae=this.worldMinX*this.scale,de=this.worldMaxX*this.scale,Te=this.worldSize/2-(ae+de)/2;E=(A+Te+this.worldSize)%this.worldSize-Te,E-j<ae&&(E=ae+j),E+j>de&&(E=de-j),de-ae<this.width&&(C=Math.max(C,this.width/(de-ae)),E=(de+ae)/2)}E===A&&L===R||this._allowWorldUnderZoom||(this.center=this.unproject(new n.P(E,L))),C&&!this._allowWorldUnderZoom&&(this.zoom+=this.scaleZoom(C)),this._constrainCamera(),this._unmodified=c,this._constraining=!1}_minZoomForBounds(){let o=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(o=Math.max(o,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),o}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const o=this.centerOffset,c=this.projection.name==="globe",A=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=n.bH(1,this.center.lat)/n.bH(1,n.c8));const R=n.b$(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,R),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const C=this.projection.zAxisUnit==="meters"?A:1,E=this._camera.getWorldToCamera(this.worldSize,C);let L;const j=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(j[8]=2*-o.x/this.width,j[9]=2*o.y/this.height,this.isOrthographic){let gt=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),Tt=gt*this.aspect,Xt=-Tt,Ft=-gt;Tt-=o.x,Xt-=o.x,gt+=o.y,Ft+=o.y,L=this._camera.getCameraToClipOrthographic(Xt,Tt,Ft,gt,this._nearZ,this._farZ),((ra,ua,Ca,Lt)=>{for(let sa=0;sa<16;sa++)ra[sa]=n.ah(ua[sa],Ca[sa],Lt)})(L,L,j,n.c9(this.pitch>=Va?1:this.pitch/Va))}else L=j;const $=n.ad.mat4.mul([],j,E);let W=n.ad.mat4.mul([],L,E);if(this.projection.isReprojectedInTileSpace){const gt=this.locationCoordinate(this.center),Tt=n.ad.mat4.identity([]);n.ad.mat4.translate(Tt,Tt,[gt.x*this.worldSize,gt.y*this.worldSize,0]),n.ad.mat4.multiply(Tt,Tt,n.c0(this)),n.ad.mat4.translate(Tt,Tt,[-gt.x*this.worldSize,-gt.y*this.worldSize,0]),n.ad.mat4.multiply(W,W,Tt),n.ad.mat4.multiply($,$,Tt),this.inverseAdjustmentMatrix=n.c1(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=n.ad.mat4.scale([],W,[this.worldSize,this.worldSize,this.worldSize/C,1]),this.projMatrix=W,this.invProjMatrix=n.ad.mat4.invert(new Float64Array(16),this.projMatrix),c){const gt=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);gt[8]=2*-o.x/this.width,gt[9]=2*o.y/this.height,this.expandedFarZProjMatrix=n.ad.mat4.mul([],gt,E)}else this.expandedFarZProjMatrix=this.projMatrix;const te=n.ad.mat4.invert([],L);this.frustumCorners=n.c2.fromInvProjectionMatrix(te,this.horizonLineFromTop(),this.height),this.cameraFrustum=n.bR.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!c);const ae=new Float32Array(16);n.ad.mat4.identity(ae),n.ad.mat4.scale(ae,ae,[1,-1,1]),n.ad.mat4.rotateX(ae,ae,this._pitch),n.ad.mat4.rotateZ(ae,ae,this.angle);const de=n.ad.mat4.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=n.ad.mat4.clone(de);const Te=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;de[8]=2*-o.x/this.width,de[9]=2*(o.y+Te)/this.height,this.skyboxMatrix=n.ad.mat4.multiply(ae,de,ae);const ve=this.point,Ee=ve.x,Ve=ve.y,Be=this.width%2/2,et=this.height%2/2,Je=Math.cos(this.angle),dt=Math.sin(this.angle),it=Ee-Math.round(Ee)+Je*Be+dt*et,st=Ve-Math.round(Ve)+Je*et+dt*Be,ot=new Float64Array(W);if(n.ad.mat4.translate(ot,ot,[it>.5?it-1:it,st>.5?st-1:st,0]),this.alignedProjMatrix=ot,W=n.ad.mat4.create(),n.ad.mat4.scale(W,W,[this.width/2,-this.height/2,1]),n.ad.mat4.translate(W,W,[1,-1,0]),this.labelPlaneMatrix=W,W=n.ad.mat4.create(),n.ad.mat4.scale(W,W,[1,-1,1]),n.ad.mat4.translate(W,W,[-1,-1,0]),n.ad.mat4.scale(W,W,[2/this.width,2/this.height,1]),this.glCoordMatrix=W,this.pixelMatrix=n.ad.mat4.multiply(new Float64Array(16),this.labelPlaneMatrix,$),this._calcFogMatrices(),this._distanceTileDataCache={},W=n.ad.mat4.invert(new Float64Array(16),this.pixelMatrix),!W)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=W,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=n.c3(this);const gt=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=n.ad.vec3.transformMat4(gt,gt,E),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=W;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const o=this.cameraWorldSizeForFog,c=this.cameraPixelsPerMeter,A=this._camera.position,R=1/this.height/this._pixelsPerMercatorPixel,C=[o,o,c];n.ad.vec3.scale(C,C,R),n.ad.vec3.scale(A,A,-1),n.ad.vec3.multiply(A,A,C);const E=n.ad.mat4.create();n.ad.mat4.translate(E,E,A),n.ad.mat4.scale(E,E,C),this.mercatorFogMatrix=E,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(o,c,R)}_computeCameraPosition(o){const c=(o=o||this.pixelsPerMeter)/this.pixelsPerMeter,A=this._camera.forward(),R=this.point,C=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*c-o/this.worldSize*this._centerAltitude;return[R.x/this.worldSize-A[0]*C,R.y/this.worldSize-A[1]*C,o/this.worldSize*this._centerAltitude-A[2]*C]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(o){const c=this._maxCameraBoundsDistance()*Math.cos(this._pitch),A=this._camera.position[2],R=o[2];let C=1;this.projection.wrap&&(this.center=this.center.wrap()),R>0&&(C=Math.min((c-A)/R,1)),this._camera.position=n.ad.vec3.scaleAndAdd([],this._camera.position,o,C),this._updateStateFromCamera()}_updateStateFromCamera(){const o=this._camera.position,c=this._camera.forward(),{pitch:A,bearing:R}=this._camera.getPitchBearing(),C=n.bH(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,E=this._mercatorZfromZoom(this._maxZoom)*Math.cos(n.ak(this._maxPitch)),L=Math.max((o[2]-C)/Math.cos(A),E),j=this._zoomFromMercatorZ(L);n.ad.vec3.scaleAndAdd(o,o,c,L),this._pitch=n.ay(A,n.ak(this.minPitch),n.ak(this.maxPitch)),this.angle=n.bF(R,-Math.PI,Math.PI),this._setZoom(n.ay(j,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new n.ac(o[0],o[1],o[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(o){return Math.pow(2,o)*this.tileSize}_mercatorZfromZoom(o){return this.cameraToCenterDistance/this._worldSizeFromZoom(o)}_minimumHeightOverTerrain(){const o=Math.min(this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom,this._maxZoom)+4;return this._mercatorZfromZoom(o)}_zoomFromMercatorZ(o){return this.scaleZoom(this.cameraToCenterDistance/(o*this.tileSize))}zoomFromMercatorZAdjusted(o){let c=0,A=n.bY,R=0,C=1/0;for(;A-c>1e-6&&A>c;){const E=c+.5*(A-c),L=this.tileSize*Math.pow(2,E),j=this.getCameraToCenterDistance(this.projection,E,L),$=this.scaleZoom(j/(o*this.tileSize)),W=Math.abs(E-$);W<C&&(C=W,R=E),E<$?c=E:A=E}return R}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(n.w("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(o,c){const A=Math.min(o.x,c.x),R=Math.max(o.x,c.x),C=Math.min(o.y,c.y),E=Math.max(o.y,c.y);if(C<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const L=[new n.P(A,C),new n.P(R,E),new n.P(A,E),new n.P(R,C)],j=this.renderWorldCopies?-3:0,$=this.renderWorldCopies?4:1;for(const W of L){const te=this.pointRayIntersection(W);if(te.t<0)return!0;const ae=this.rayIntersectionCoordinate(te);if(ae.x<j||ae.y<0||ae.x>$||ae.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+n.c4(this.fovAboveCenter)>88||this.anyCornerOffEdge(new n.P(0,0),new n.P(this.width,this.height))}zoomDeltaToMovement(o,c){const A=n.ad.vec3.length(n.ad.vec3.sub([],this._camera.position,o)),R=this._zoomFromMercatorZ(A)+c;return A-this._mercatorZfromZoom(R)}getCameraPoint(){if(this.projection.name==="globe"){const o=function([c,A,R],C){const E=[c,A,R,1];n.ad.vec4.transformMat4(E,E,C);const L=E[3]=Math.max(E[3],1e-6);return E[0]/=L,E[1]/=L,E[2]/=L,E}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new n.P(o[0],o[1])}{const o=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new n.P(0,o))}}getCameraToCenterDistance(o,c=this.zoom,A=this.worldSize){const R=n.b$(o,c,this.width,this.height,1024),C=o.pixelSpaceConversion(this.center.lat,A,R);let E=.5/Math.tan(.5*this._fov)*this.height*C;return this.isOrthographic&&(E=n.ah(1,E,n.c9(this.pitch>=Va?1:this.pitch/Va))),E}getWorldToCameraMatrix(){const o=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&n.ad.mat4.multiply(o,o,this.globeMatrix),o}getFrustum(o){return n.bR.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,o,this.projection.zAxisUnit==="meters")}}const qs=(g,o)=>{if(o>0&&g.terrain&&n.w("Cutoff is currently disabled on terrain"),o<=0||g.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};const c=g.transform,A=Math.max(Math.abs(c._zoom-(g.minCutoffZoom-1)),1),R=c.isLODDisabled(!1)?n.ae(60,45,c.pitch):n.ae(30,15,c.pitch),C=c._farZ-c._nearZ,E=o*c.height,L=((1-(j=R))*c.cameraToCenterDistance+j*(c._farZ+E))*A;var j;return{shouldRenderCutoff:R<1,uniformValues:{u_cutoff_params:[c._nearZ,c._farZ,(L-c._nearZ)/C,(L-E-c._nearZ)/C]}}},co={cascadeCount:2,normalOffset:3,shadowMapResolution:2048};class Af{constructor(o,c){this.aabb=o,this.lastCascade=c}}class Mh{add(o,c){const A=this.receivers[o.key];A!==void 0?(A.aabb.min[0]=Math.min(A.aabb.min[0],c.min[0]),A.aabb.min[1]=Math.min(A.aabb.min[1],c.min[1]),A.aabb.min[2]=Math.min(A.aabb.min[2],c.min[2]),A.aabb.max[0]=Math.max(A.aabb.max[0],c.max[0]),A.aabb.max[1]=Math.max(A.aabb.max[1],c.max[1]),A.aabb.max[2]=Math.max(A.aabb.max[2],c.max[2])):this.receivers[o.key]=new Af(c,null)}clear(){this.receivers={}}get(o){return this.receivers[o.key]}computeRequiredCascades(o,c,A){const R=n.ce.fromPoints(o.points);let C=0;for(const E in this.receivers){const L=this.receivers[E];if(!L||!R.intersectsAabb(L.aabb))continue;L.aabb.min=R.closestPoint(L.aabb.min),L.aabb.max=R.closestPoint(L.aabb.max);const j=L.aabb.getCorners();for(let $=0;$<A.length;$++){let W=!0;for(const te of j){const ae=[te[0]*c,te[1]*c,te[2]];if(n.ad.vec3.transformMat4(ae,ae,A[$].matrix),ae[0]<-1||ae[0]>1||ae[1]<-1||ae[1]>1){W=!1;break}}if(L.lastCascade=$,C=Math.max(C,$),W)break}}return C+1}}class ho{constructor(o){this.painter=o,this._enabled=!1,this._shadowLayerCount=0,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new Mh,this._depthMode=new ir(o.context.gl.LEQUAL,ir.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this._forceDisable=!1,this.useNormalOffset=!1,o.tp.registerParameter(this,["Shadows"],"_forceDisable",{label:"forceDisable"},()=>{this.painter.style.map.triggerRepaint()}),o.tp.registerParameter(co,["Shadows"],"cascadeCount",{min:1,max:2,step:1}),o.tp.registerParameter(co,["Shadows"],"normalOffset",{min:0,max:10,step:.05}),o.tp.registerParameter(co,["Shadows"],"shadowMapResolution",{min:32,max:2048,step:32}),o.tp.registerBinding(this,["Shadows"],"_numCascadesToRender",{readonly:!0,label:"numCascadesToRender"})}destroy(){for(const o of this._cascades)o.texture.destroy(),o.framebuffer.destroy();this._cascades=[]}updateShadowParameters(o,c){const A=this.painter;if(this._enabled=!1,this._shadowLayerCount=0,this._receivers.clear(),!c||!c.properties)return;const R=c.properties.get("shadow-intensity");if(!c.shadowsEnabled()||R<=0||(this._shadowLayerCount=A.style.order.reduce((Te,ve)=>{const Ee=A.style._mergedLayers[ve];return Te+(Ee.hasShadowPass()&&!Ee.isHidden(o.zoom)?1:0)},0),this._enabled=this._shadowLayerCount>0,!this.enabled))return;const C=A.context,E=co.shadowMapResolution,L=co.shadowMapResolution;if(this._cascades.length===0||co.shadowMapResolution!==this._cascades[0].texture.size[0]){this._cascades=[];for(let Te=0;Te<co.cascadeCount;++Te){const ve=A._shadowMapDebug,Ee=C.gl,Ve=C.createFramebuffer(E,L,ve,"texture"),Be=new n.T(C,{width:E,height:L,data:null},Ee.DEPTH_COMPONENT16);if(Ve.depthAttachment.set(Be.texture),ve){const et=new n.T(C,{width:E,height:L,data:null},Ee.RGBA8);Ve.colorAttachment.set(et.texture)}this._cascades.push({framebuffer:Ve,texture:Be,matrix:[],far:0,boundingSphereRadius:0,frustum:new n.bR,scale:0})}}this.shadowDirection=Pl(c);let j=0;if(o.elevation){const Te=o.elevation,ve=[1e4,-1e4];Te.visibleDemTiles.filter(Ee=>Ee.dem).forEach(Ee=>{const Ve=Ee.dem.tree;ve[0]=Math.min(ve[0],Ve.minimums[0]),ve[1]=Math.max(ve[1],Ve.maximums[0])}),ve[0]!==1e4&&(j=(ve[1]-ve[0])*Te.exaggeration())}const $=1.5*o.cameraToCenterDistance,W=3*$,te=new Float64Array(16);for(let Te=0;Te<this._cascades.length;++Te){const ve=this._cascades[Te];let Ee=o.height/50,Ve=1;co.cascadeCount===1?Ve=W:Te===0?Ve=$:(Ee=$,Ve=W);const[Be,et]=Ql(o,this.shadowDirection,Ee,Ve,co.shadowMapResolution,j);ve.scale=o.scale,ve.matrix=Be,ve.boundingSphereRadius=et,n.ad.mat4.invert(te,ve.matrix),ve.frustum=n.bR.fromInvProjectionMatrix(te,1,0,!0),ve.far=Ve}const ae=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[ae].far,this._cascades[ae].far],this._uniformValues.u_shadow_intensity=R,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=1/co.shadowMapResolution,this._uniformValues.u_shadow_map_resolution=co.shadowMapResolution,this._uniformValues.u_shadowmap_0=Ai.ShadowMap0,this._uniformValues.u_shadowmap_1=Ai.ShadowMap0+1,this._groundShadowTiles=A.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});const de=A.transform.elevation;for(const Te of this._groundShadowTiles){let ve={min:0,max:0};if(de){const Ee=de.getMinMaxForTile(Te);Ee&&(ve=Ee)}this.addShadowReceiver(Te.toUnwrapped(),ve.min,ve.max)}}get enabled(){return this._enabled&&!this._forceDisable}set enabled(o){this._enabled=o}drawShadowPass(o,c){if(!this.enabled)return;const A=this.painter,R=A.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(A.transform.getFrustum(0),A.transform.worldSize,this._cascades),R.viewport.set([0,0,co.shadowMapResolution,co.shadowMapResolution]);for(let C=0;C<this._numCascadesToRender;++C){A.currentShadowCascade=C,R.bindFramebuffer.set(this._cascades[C].framebuffer.framebuffer),R.clear({color:n.al.white,depth:1});for(const E of o.order){const L=o._mergedLayers[E];if(!L.hasShadowPass()||L.isHidden(A.transform.zoom))continue;const j=o.getLayerSourceCache(L),$=j?c[j.id]:void 0;(L.type==="model"||$&&$.length)&&A.renderLayer(A,j,L,$)}}A.currentShadowCascade=0}drawGroundShadows(){if(!this.enabled)return;const o=this.painter,c=o.style,A=o.context,R=c.directionalLight,C=c.ambientLight;if(!R||!C)return;const E=[],L=qs(o,o.longestCutoffRange);L.shouldRenderCutoff&&E.push("RENDER_CUTOFF"),E.push("RENDER_SHADOWS","DEPTH_TEXTURE"),this.useNormalOffset&&E.push("NORMAL_OFFSET");const j=Mc(c,R,C),$=new ir(A.gl.LEQUAL,ir.ReadOnly,o.depthRangeFor3D);for(const W of this._groundShadowTiles){const te=W.toUnwrapped(),ae=o.isTileAffectedByFog(W),de=o.getOrCreateProgram("groundShadow",{defines:E,overrideFog:ae});this.setupShadows(te,de),o.uploadCommonUniforms(A,de,te,null,L);const Te={u_matrix:o.transform.calculateProjMatrix(te),u_ground_shadow_factor:j};de.draw(o,A.gl.TRIANGLES,$,Rr.disabled,br.multiply,vr.disabled,Te,"ground_shadow",o.tileExtentBuffer,o.quadTriangleIndexBuffer,o.tileExtentSegments,null,o.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?br.unblended:br.disabled}getShadowPassDepthMode(){return this._depthMode}getShadowCastingLayerCount(){return this._shadowLayerCount}calculateShadowPassMatrixFromTile(o){const c=this.painter.transform,A=c.calculatePosMatrix(o,c.worldSize);return n.ad.mat4.multiply(A,this._cascades[this.painter.currentShadowCascade].matrix,A),Float32Array.from(A)}calculateShadowPassMatrixFromMatrix(o){return n.ad.mat4.multiply(o,this._cascades[this.painter.currentShadowCascade].matrix,o),Float32Array.from(o)}setupShadows(o,c,A,R=0){if(!this.enabled)return;const C=this.painter.transform,E=this.painter.context,L=E.gl,j=this._uniformValues,$=new Float64Array(16),W=C.calculatePosMatrix(o,C.worldSize);for(let te=0;te<this._cascades.length;te++)n.ad.mat4.multiply($,this._cascades[te].matrix,W),j[te===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from($),E.activeTexture.set(L.TEXTURE0+Ai.ShadowMap0+te),this._cascades[te].texture.bind(L.NEAREST,L.CLAMP_TO_EDGE);if(this.useNormalOffset=!!A,this.useNormalOffset){const te=n.cd(o.canonical),ae=2/C.tileSize*n.ai/co.shadowMapResolution,de=ae*this._cascades[0].boundingSphereRadius,Te=ae*this._cascades[this._cascades.length-1].boundingSphereRadius,ve=(A==="vector-tile"?1:3)/Math.pow(2,R-o.canonical.z-(1-C.zoom+Math.floor(C.zoom)));j.u_shadow_normal_offset=[te,de*ve,Te*ve],j.u_shadow_bias=[6e-5,.0012,.012]}else j.u_shadow_bias=[36e-5,.0012,.012];c.setShadowUniformValues(E,j)}setupShadowsFromMatrix(o,c,A=!1){if(!this.enabled)return;const R=this.painter.context,C=R.gl,E=this._uniformValues,L=new Float64Array(16);for(let j=0;j<co.cascadeCount;j++)n.ad.mat4.multiply(L,this._cascades[j].matrix,o),E[j===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(L),R.activeTexture.set(C.TEXTURE0+Ai.ShadowMap0+j),this._cascades[j].texture.bind(C.NEAREST,C.CLAMP_TO_EDGE);if(this.useNormalOffset=A,A){const j=co.normalOffset;E.u_shadow_normal_offset=[1,j,j],E.u_shadow_bias=[6e-5,.0012,.012]}else E.u_shadow_bias=[36e-5,.0012,.012];c.setShadowUniformValues(R,E)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(o,c,A,R){if(R[2]>=0)return{};const C=function(j,$,W){const te=W/(1<<j.canonical.z);return new n.ce([j.canonical.x*te+j.wrap*W,j.canonical.y*te+j.wrap*W,0],[(j.canonical.x+1)*te+j.wrap*W,(j.canonical.y+1)*te+j.wrap*W,$])}(o,c,A).getCorners(),E=c/-R[2];R[0]<0?(n.ad.vec3.add(C[0],C[0],[R[0]*E,0,0]),n.ad.vec3.add(C[3],C[3],[R[0]*E,0,0])):R[0]>0&&(n.ad.vec3.add(C[1],C[1],[R[0]*E,0,0]),n.ad.vec3.add(C[2],C[2],[R[0]*E,0,0])),R[1]<0?(n.ad.vec3.add(C[0],C[0],[0,R[1]*E,0]),n.ad.vec3.add(C[1],C[1],[0,R[1]*E,0])):R[1]>0&&(n.ad.vec3.add(C[2],C[2],[0,R[1]*E,0]),n.ad.vec3.add(C[3],C[3],[0,R[1]*E,0]));const L={};return L.vertices=C,L.planes=[Os(C[1],C[0],C[4]),Os(C[2],C[1],C[5]),Os(C[3],C[2],C[6]),Os(C[0],C[3],C[7])],L}addShadowReceiver(o,c,A){this._receivers.add(o,n.ce.fromTileIdAndHeight(o,c,A))}getMaxCascadeForTile(o){const c=this._receivers.get(o);return c&&c.lastCascade?c.lastCascade:0}}function Os(g,o,c){const A=n.ad.vec3.sub([],c,o),R=n.ad.vec3.sub([],g,o),C=n.ad.vec3.cross([],A,R),E=n.ad.vec3.length(C);return E===0?[0,0,1,0]:(n.ad.vec3.scale(C,C,1/E),[C[0],C[1],C[2],-n.ad.vec3.dot(C,o)])}function Pl(g){const o=g.properties.get("direction"),c=n.cc(o.x,o.y,o.z);c[2]=n.ay(c[2],0,75);const A=n.cf([c[0],c[1],c[2]]);return n.ad.vec3.fromValues(A.x,A.y,A.z)}function Mc(g,o,c){const A=o.properties.get("color-use-theme")==="none",R=o.properties.get("color"),C=o.properties.get("intensity"),E=o.properties.get("direction"),L=[E.x,E.y,E.z],j=c.properties.get("color-use-theme")==="none",$=c.properties.get("color"),W=c.properties.get("intensity"),te=Math.max(n.ad.vec3.dot([0,0,1],L),0),ae=[0,0,0];n.ad.vec3.scale(ae,$.toRenderColor(j?null:g.getLut(o.scope)).toArray01Linear().slice(0,3),W);const de=[0,0,0];return n.ad.vec3.scale(de,R.toRenderColor(A?null:g.getLut(c.scope)).toArray01Linear().slice(0,3),te*C),n.cg([ae[0]>0?ae[0]/(ae[0]+de[0]):0,ae[1]>0?ae[1]/(ae[1]+de[1]):0,ae[2]>0?ae[2]/(ae[2]+de[2]):0])}function Ql(g,o,c,A,R,C){const E=g.zoom,L=g.scale,j=g.worldSize,$=1/j,W=g.aspect,te=Math.sqrt(1+W*W)*Math.tan(.5*g.fovX),ae=te*te,de=A-c,Te=A+c;let ve,Ee;ae>de/Te?(ve=A,Ee=A*te):(ve=.5*Te*(1+ae),Ee=.5*Math.sqrt(de*de+2*(A*A+c*c)*ae+Te*Te*ae*ae));const Ve=g.projection.pixelsPerMeter(g.center.lat,j),Be=g._camera.getCameraToWorldMercator(),et=[0,0,-ve*$];n.ad.vec3.transformMat4(et,et,Be);let Je=Ee*$;const dt=g._edgeInsets;if(!(dt.left===0&&dt.top===0&&dt.right===0&&dt.bottom===0||dt.left===dt.right&&dt.top===dt.bottom)){const da=g._camera.getWorldToCamera(g.worldSize,g.projection.zAxisUnit==="meters"?Ve:1),Wt=g._camera.getCameraToClipPerspective(g._fov,g.width/g.height,c,A);Wt[8]=2*-g.centerOffset.x/g.width,Wt[9]=2*g.centerOffset.y/g.height;const pa=new Float64Array(16);n.ad.mat4.mul(pa,Wt,da);const Ia=new Float64Array(16);n.ad.mat4.invert(Ia,pa);const La=n.bR.fromInvProjectionMatrix(Ia,j,E,!0);for(const Ea of La.points){const sr=((it=Ea)[0]/=L,it[1]/=L,it[2]=n.bH(it[2],g._center.lat),it);Je=Math.max(Je,n.ad.vec3.len(n.ad.vec3.subtract([],et,sr)))}}var it;Je*=R/(R-1);const st=Math.acos(o[2]),ot=Math.atan2(-o[0],-o[1]),gt=new bs;gt.position=et,gt.setPitchBearing(st,ot);const Tt=gt.getWorldToCamera(j,Ve),Xt=Je*j,Ft=Math.min(g._mercatorZfromZoom(17)*j*-2,-2*Xt),ra=gt.getCameraToClipOrthographic(-Xt,Xt,-Xt,Xt,Ft,(Xt+C*Ve)/o[2]),ua=new Float64Array(16);n.ad.mat4.multiply(ua,ra,Tt);const Ca=n.ad.vec3.fromValues(Math.floor(1e6*et[0])/1e6*j,Math.floor(1e6*et[1])/1e6*j,0),Lt=.5*R,sa=[0,0,0];n.ad.vec3.transformMat4(sa,Ca,ua),n.ad.vec3.scale(sa,sa,Lt);const zt=[Math.floor(sa[0]),Math.floor(sa[1]),Math.floor(sa[2])],oa=[0,0,0];n.ad.vec3.sub(oa,sa,zt),n.ad.vec3.scale(oa,oa,-1/Lt);const ea=new Float64Array(16);return n.ad.mat4.identity(ea),n.ad.mat4.translate(ea,ea,oa),n.ad.mat4.multiply(ua,ea,ua),[ua,Xt]}class ch extends n.E{constructor(o){super(),this.requestManager=o,this.models={"":{}},this.modelUris={"":{}},this.numModelsLoading={}}loadModel(o,c){return n.aN(this.requestManager.transformRequest(c,n.R.Model).url).then(A=>{if(!A)return;const R=n.aO(A),C=new n.aP(o,void 0,void 0,R);return C.computeBoundsAndApplyParent(),C}).catch(A=>{if(A&&A.status===404)return null;this.fire(new n.z(new Error(`Could not load model ${o} from ${c}: ${A.message}`)))})}load(o,c,A={keepNumReferences:!1}){this.models[c]||(this.models[c]={});const R=Object.keys(o);this.numModelsLoading[c]=(this.numModelsLoading[c]||0)+R.length;const C=[];for(const E of R)C.push(this.loadModel(E,o[E]));Promise.allSettled(C).then(E=>{for(let L=0;L<E.length;L++){const{status:j,value:$}=E[L];if(j==="fulfilled"&&$){const W=this.models[c][R[L]];this.models[c][R[L]]={model:$,numReferences:A.keepNumReferences&&W?W.numReferences:1}}}this.numModelsLoading[c]-=R.length,this.fire(new n.A("data",{dataType:"style"}))}).catch(E=>{this.fire(new n.z(new Error(`Could not load models: ${E.message}`)))})}isLoaded(){for(const o in this.numModelsLoading)if(this.numModelsLoading[o]>0)return!1;return!0}hasModel(o,c){return!!this.getModel(o,c)}getModel(o,c){return this.models[c]||(this.models[c]={}),this.models[c][o]?this.models[c][o].model:void 0}addModel(o,c,A){this.models[A]||(this.models[A]={}),this.modelUris[A]||(this.modelUris[A]={}),this.hasModel(o,A)&&this.models[A][o].numReferences++,this.modelUris[A][o]=this.requestManager.normalizeModelURL(c),this.load({[o]:this.modelUris[A][o]},A)}addModels(o,c){this.models[c]||(this.models[c]={}),this.modelUris[c]||(this.modelUris[c]={});const A=this.modelUris[c];for(const R in o)this.models[c][R]={},A[R]=this.requestManager.normalizeModelURL(o[R]);this.load(A,c,{keepNumReferences:!0})}reloadModels(o){this.load(this.modelUris[o],o)}addModelsFromBucket(o,c){this.models[c]||(this.models[c]={}),this.modelUris[c]||(this.modelUris[c]={});const A={};for(const R of o)this.hasModel(R,c)?this.models[c][R].numReferences++:(this.modelUris[c][R]=this.requestManager.normalizeModelURL(R),A[R]=this.modelUris[c][R]);this.load(A,c)}removeModel(o,c){if(this.models[c]&&this.models[c][o]&&(this.models[c][o].numReferences--,this.models[c][o].numReferences===0)){const A=this.models[c][o].model;delete this.models[c][o],delete this.modelUris[c][o],A.destroy()}}listModels(o){return this.models[o]||(this.models[o]={}),Object.keys(this.models[o])}upload(o,c){this.models[c]||(this.models[c]={});for(const A in this.models[c])this.models[c][A].model&&this.models[c][A].model.upload(o.context)}}const El=new n.a7({data:new n.a8(n.a5.colorTheme.data)}),Ro={"mbx-indoor-active-floorplans":{default:["literal",[]]},"mbx-indoor-underground":{default:["literal",!1]},"mbx-indoor-loaded-levels":{default:["literal",[]]},"mbx-indoor-level-height":{default:["literal",{}]},"mbx-indoor-level-base":{default:["literal",{}]},"mbx-indoor-level-selected":{default:["literal",{}]},"mbx-indoor-level-overlapped":{default:["literal",{}]}};function Ed(g){return g=g||{},Object.assign(g,Ro)}class Ic extends n.E{constructor(o){super(),this.mergeFloors=!0,this._scope=void 0,this._queryFeatureSetId=void 0,this._buildingEntryFeatureSetId=void 0,this._selectedFloorplan=void 0,this._indoorData=void 0,this._selectedLevel=void 0,this._floorplanStates={},n.aQ(["_onLoad","_onMove","_checkFloorplanVisible"],this),this._map=o,this._checkFloorplanVisible(!0),this._map.on("load",this._onLoad),this._map.on("move",this._onMove)}destroy(){this._map.indoor.off("load",this._onLoad),this._map.indoor.off("move",this._onMove),this._map=void 0}_onLoad(){this._map.style.forEachFragmentStyle(o=>{o.stylesheet.indoor&&(this._queryFeatureSetId?this.fire(new n.z(new Error("Multiple indoor map styles detected, simultaneous usage is not allowed currently."))):(this._queryFeatureSetId=o.stylesheet.indoor.floorplanFeaturesetId,this._buildingEntryFeatureSetId=o.stylesheet.indoor.buildingFeaturesetId,this._scope=o.scope))}),this._queryFeatureSetId&&this._buildingEntryFeatureSetId&&this._map.addInteraction("mbx-indoor-buildingclick",{type:"click",target:{featuresetId:this._buildingEntryFeatureSetId,importId:this._scope},handler:o=>(o.feature&&o.feature.properties.floorplan&&this.selectFloorplan(o.feature.properties.floorplan),!0)}),this._checkFloorplanVisible(!0)}_onMove(){this._checkFloorplanVisible(!1)}_checkFloorplanVisible(o){if(!this._queryFeatureSetId||!this._map.isStyleLoaded()||this._map.transform.zoom<13)return;this._indoorData&&!function(E,L){const[j,$]=E,{center:W,radius:te}=L,[ae,de]=W,Te=Math.abs(j-ae);return Math.sqrt((Te>180?360-Te:Te)**2+($-de)**2)<=te}([this._map.getCenter().lng,this._map.getCenter().lat],this._indoorData.circumCircle)&&(this._indoorData=void 0,this._selectedFloorplan=void 0,this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!1),this._map.setConfigProperty(this._scope,"mbx-indoor-active-floorplans",["literal",[]]),this.fire(new n.A("floorplangone")));const c={target:{featuresetId:this._queryFeatureSetId,importId:this._scope}},A=new n.P(this._map.transform.width/2,this._map.transform.height/2),R=[new n.P(0,0),new n.P(this._map.transform.width,this._map.transform.height)],C=this._map.queryRenderedFeatures(o?R:A,c);C.length>0&&(this._selectedFloorplan&&C[0].properties.id===this._selectedFloorplan.properties.id||(this._selectedFloorplan=C[0],this._floorplanSelected(!1)))}_floorplanSelected(o){this._indoorData=JSON.parse(this._selectedFloorplan.properties["indoor-data"]),this._indoorData.id=this._selectedFloorplan.properties.id,this._indoorData.circumCircle=function(C){const[[E,L],[j,$]]=C,W=(j-E+360)%360,te=W>180?360-W:W;return{center:[(E+te/2+360)%360,(L+$)/2],radius:Math.sqrt(te**2+($-L)**2)/2}}(this._indoorData.extent),this._floorplanStates[this._indoorData.id]||(this._floorplanStates[this._indoorData.id]={});const c=this._floorplanStates[this._indoorData.id].selectedBuilding,A=this._floorplanStates[this._indoorData.id].selectedLevel;let R;if(this._map.setConfigProperty(this._scope,"mbx-indoor-active-floorplans",this._indoorData.floorplanIDs),this._selectedLevel)for(const C of this._indoorData.levels)C.id===this._selectedLevel.id&&(R=C.id);if(this.fire(new n.A("floorplanselected",{buildings:this._indoorData.buildings,levels:this._indoorData.levels,selectedLevelId:R})),c){const C=this._indoorData.buildings.find(E=>E.id===c);this._buildingSelected(C,!1)}else this._indoorData.buildings.length>0&&this._buildingSelected(this._indoorData.buildings[0],!1);if(A){const C=this._indoorData.levels.find(E=>E.id===A);this._updateLevels(C,o)}else o&&this._indoorData["default-levels"].length>0&&this.selectLevel(this._indoorData["default-levels"][0])}_buildingSelected(o,c){c&&o&&o.extent&&this._map.fitBounds(o.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}),this._floorplanStates[this._indoorData.id].selectedBuilding=o?o.id:void 0;const A=this._indoorData.levels.filter(R=>o.levels.includes(R.id));this.fire(new n.A("buildingselected",{buildingId:o.id,levels:A}))}_levelSelected(o){if(o==="overview")this._updateLevels(void 0,!0);else{const c=this._indoorData.levels.find(A=>A.id===o);this._updateLevels(c,!0)}this.fire(new n.A("levelselected",{levelId:o==="overview"?void 0:o}))}_updateLevels(o,c){if(!o)return this._map.setConfigProperty(this._scope,"mbx-indoor-loaded-levels",["literal",[]]),this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!1),this._floorplanStates[this._indoorData.id].selectedLevel=void 0,void(c&&this._indoorData.extent&&this._map.fitBounds(this._indoorData.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}));function A($){const W=$.indexOf("/floor/");if(W===-1)return $;const te=W+7,ae=$.indexOf("/",te);return ae===-1?$.slice(te):$.slice(te,ae)}this._selectedLevel=o,this._floorplanStates[this._indoorData.id].selectedLevel=o?o.id:void 0;const R=[],C={},E={},L={},j={};for(const $ of this._indoorData.levels)if(R.push($.id),C[$.id]=$.height,E[$.id]=$.base,o){if(this.mergeFloors){const W=A(o.id),te=A($.id);L[$.id]=te===W?"true":"false"}else L[$.id]=$.id===o.id?"true":"false";j[$.id]=$.base<o.base?"true":"false"}else j[$.id]=!0;if(this._map.setConfigProperty(this._scope,"mbx-indoor-loaded-levels",["literal",R]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-height",["literal",C]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-base",["literal",E]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-selected",["literal",L]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-overlapped",["literal",j]),o&&(this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!!o.isUnderground),c&&o.extent)){const $=this._map.cameraForBounds(o.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}),W=this._map.getZoom(),te=$.zoom?Math.abs(W-$.zoom):0;this._map.fitBounds(o.extent,te>=1?{pitch:this._map.getPitch(),bearing:this._map.getBearing()}:{pitch:this._map.getPitch(),bearing:this._map.getBearing(),zoom:W})}}selectFloorplan(o){const c={target:{featuresetId:this._queryFeatureSetId,importId:this._scope}},A=[new n.P(0,0),new n.P(this._map.transform.width,this._map.transform.height)],R=this._map.queryRenderedFeatures(A,c);if(R.length>0){for(const C of R)if(JSON.parse(C.properties["indoor-data"]).floorplanIDs.includes(o)){this._selectedFloorplan=C,this._floorplanSelected(!0);break}}}selectBuilding(o){const c=this._indoorData.buildings.find(A=>A.id===o);this._buildingSelected(c,!0)}selectLevel(o){this._levelSelected(o)}}function Nl(g){if(!g.metadata||!g.metadata.content_area)return;const o=n.q.devicePixelRatio,{left:c,top:A,width:R,height:C}=g.metadata.content_area,E=c*o,L=A*o;return[E,L,E+R*o,L+C*o]}function fc(g){if(g)return g.map(([o,c])=>[o*n.q.devicePixelRatio,c*n.q.devicePixelRatio])}class vu{constructor(o,c){this.id=o,this.style=c}addIcons(o){const c=new Map;for(const[A,R]of o.entries()){const C=n.I.from({name:A,iconsetId:this.id});c.set(C,R)}this.style.addImages(c)}}const Zi=(g,o)=>Bt(g,o&&o.filter(c=>c.identifier!=="source.canvas")),_f=n.aA(Tn,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setSnow","setRain","setProjection","setCamera","addImport","removeImport","updateImport"]),Qs=n.aA(Tn,["setCenter","setZoom","setBearing","setPitch"]),fo=new Set(["background","sky","slot","custom"]),Nd={version:8,layers:[],sources:{}},Vd={duration:300,delay:0};class eo extends n.E{constructor(o,c={}){super(),this.map=o,this.scope=c.scope||"",this.globalId=null,this.fragments=[],this.importDepth=c.importDepth||0,this.importsCache=c.importsCache||new Map,this.resolvedImports=c.resolvedImports||new Set,this.transition=n.l({},Vd),this._buildingIndex=new Dc(this),this.crossTileSymbolIndex=new Js,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._clipLayerPresent=!1,this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._changes=c.styleChanges||new Aa,this.dispatcher=c.dispatcher?c.dispatcher:new n.D(n.cj(),this),c.imageManager?this.imageManager=c.imageManager:(this.imageManager=new ta(this.map._spriteFormat),this.imageManager.setEventedParent(this)),this.imageManager.createScope(this.scope),this.glyphManager=c.glyphManager?c.glyphManager:new n.ck(o._requestManager,c.localFontFamily?n.cl.all:c.localIdeographFontFamily?n.cl.ideographs:n.cl.none,c.localFontFamily||c.localIdeographFontFamily),c.modelManager?this.modelManager=c.modelManager:(this.modelManager=new ch(o._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._order=[],this._markersNeedUpdate=!1,this.options=c.configOptions?c.configOptions:new Map,this._configDependentLayers=c.configDependentLayers?c.configDependentLayers:new Set,this._config=c.config,this._styleColorTheme={lut:null,lutLoading:!1,lutLoadingCorrelationID:0,colorTheme:null,colorThemeOverride:c.colorThemeOverride},this._styleColorThemeForScope={},this._initialConfig=c.initialConfig,this.dispatcher.broadcast("setReferrer",n.cm());const A=this;this._rtlTextPluginCallback=eo.registerForPluginStateChange(R=>{A.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:R.pluginStatus,pluginURL:R.pluginURL},(C,E)=>{if(n.cn(C),E&&E.every(L=>L))for(const L in A._sourceCaches){const j=A._sourceCaches[L],$=j.getSource().type;$!=="vector"&&$!=="geojson"||j.reload()}})}),this.on("data",R=>{if(R.dataType!=="source"||R.sourceDataType!=="metadata")return;const C=this.getOwnSource(R.sourceId);if(C&&C.vectorLayerIds)for(const E in this._layers){const L=this._layers[E];L.source===C.id&&this._validateLayer(L)}})}load(o){return o?(typeof o=="string"?this.loadURL(o):this.loadJSON(o),this):this}_getGlobalId(o){if(!o)return null;if(typeof o=="string"){if(n.f(o))return o;const c=n.co(o);if(!c.startsWith("http"))try{return new URL(c,location.href).toString()}catch{return c}return c}return`json://${n.cp(JSON.stringify(o))}`}_diffStyle(o,c,A){this.globalId=this._getGlobalId(o);const R=(C,E)=>{try{E(null,this.setState(C,A))}catch(L){E(L,!1)}};if(typeof o=="string"){const C=this.map._requestManager.normalizeStyleURL(o),E=this.map._requestManager.transformRequest(C,n.R.Style);n.n(E,(L,j)=>{L?this.fire(new n.z(L)):j&&R(j,c)})}else typeof o=="object"&&R(o,c)}loadURL(o,c={}){this.fire(new n.A("dataloading",{dataType:"style"}));const A=typeof c.validate=="boolean"?c.validate:!n.f(o);this.globalId=this._getGlobalId(o),o=this.map._requestManager.normalizeStyleURL(o,c.accessToken),this.resolvedImports.add(o);const R=this.importsCache.get(o);if(R)return this._load(R,A);const C=this.map._requestManager.transformRequest(o,n.R.Style);this._request=n.n(C,(E,L)=>{if(this._request=null,E)this.fire(new n.z(E));else if(L)return this.importsCache.set(o,L),this._load(L,A)})}loadJSON(o,c={}){this.fire(new n.A("dataloading",{dataType:"style"})),this.globalId=this._getGlobalId(o),this._request=n.q.frame(()=>{this._request=null,this._load(o,c.validate!==!1)})}loadEmpty(){this.fire(new n.A("dataloading",{dataType:"style"})),this._load(Nd,!1)}_loadImports(o,c,A){if(this.importDepth>=4)return n.w("Style doesn't support nesting deeper than 5"),Promise.resolve();const R=[];for(const C of o){const E=this._createFragmentStyle(C),L=new Promise(W=>{E.once("style.import.load",W),E.once("error",W)}).then(()=>this.mergeAll());if(R.push(L),this.resolvedImports.has(C.url)){E.loadEmpty();continue}const j=C.data||this.importsCache.get(C.url);j?(E.loadJSON(j,{validate:c}),this._isInternalStyle(j)&&(E.globalId=null)):C.url?E.loadURL(C.url,{validate:c}):E.loadEmpty();const $={style:E,id:C.id,config:C.config};if(A){const W=this.fragments.findIndex(({id:te})=>te===A);this.fragments=this.fragments.slice(0,W).concat($).concat(this.fragments.slice(W))}else this.fragments.push($)}return Promise.allSettled(R)}getImportGlobalIds(o=this,c=new Set){for(const A of o.fragments)A.style.globalId&&c.add(A.style.globalId),this.getImportGlobalIds(A.style,c);return[...c.values()]}_createFragmentStyle(o){const c=this.scope?n.C(o.id,this.scope):o.id;let A;const R=this._initialConfig&&this._initialConfig[c];(o.config||R)&&(A=n.l({},o.config,R));const C=new eo(this.map,{scope:c,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:A,configOptions:this.options,colorThemeOverride:o["color-theme"],configDependentLayers:this._configDependentLayers});return C.setEventedParent(this.map,{style:C}),C}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),this._shouldPrecompile=this.map._precompilePrograms&&this.isRootStyle()}_isInternalStyle(o){return this.isRootStyle()&&(o.fragment||!!o.schema&&o.fragment!==!1)}_load(o,c){const A=o.indoor?Ed(o.schema):o.schema;if(this._isInternalStyle(o)){const E=n.l({},Nd,{imports:[{id:"basemap",data:o,url:""}]});return void this._load(E,c)}if(this.updateConfig(this._config,A),c&&Zi(this,Qi(o)))return;this._loaded=!0,this.stylesheet=n.cq(o);const R=()=>{for(const $ in o.sources)this.addSource($,o.sources[$],{validate:!1,isInitialLoad:!0});if(o.iconsets)for(const $ in o.iconsets)this.addIconset($,o.iconsets[$]);o.sprite?this._loadIconset(o.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),this.setGlyphsUrl(o.glyphs);const E=oh(this.stylesheet.layers);if(this._order=E.map($=>$.id),this.stylesheet.light&&n.w("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(this.stylesheet.lights.length===1&&this.stylesheet.lights[0].type==="flat"){const $=this.stylesheet.lights[0];this.light=new $t($.properties,$.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new $t(this.stylesheet.light)),this._layers={};for(const $ of E){const W=n.cv($,this.scope,this._styleColorTheme.lut,this.options);W.configDependencies.size!==0&&this._configDependentLayers.add(W.fqid),W.setEventedParent(this,{layer:{id:W.id}}),this._layers[W.id]=W;const te=this.getOwnLayerSourceCache(W),ae=!!this.directionalLight&&this.directionalLight.shadowsEnabled();te&&W.canCastShadows()&&ae&&(te.castsShadows=!0)}this.stylesheet.featuresets&&this.setFeaturesetSelectors(this.stylesheet.featuresets),this.stylesheet.models&&this.modelManager.addModels(this.stylesheet.models,this.scope);const L=this.stylesheet.terrain;L&&(this.checkCanvasFingerprintNoise(),this.disableElevatedTerrain||this.terrainSetForDrapingOnly()||this._createTerrain(L,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.snow&&this._createSnow(this.stylesheet.snow),this.stylesheet.rain&&this._createRain(this.stylesheet.rain),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new n.A("data",{dataType:"style"}));const j=this.isRootStyle();o.imports?this._loadImports(o.imports,c).then(()=>{this._reloadImports(),this.fire(new n.A(j?"style.load":"style.import.load"))}):(this._reloadImports(),this.fire(new n.A(j?"style.load":"style.import.load")))};this._styleColorTheme.colorTheme=this.stylesheet["color-theme"];const C=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(C){const E=this._evaluateColorThemeData(C);this._loadColorTheme(E).then(()=>{R()}).catch(L=>{n.w(`Couldn't load color theme from the stylesheet: ${L}`),R()})}else this._styleColorTheme.lut=null,R()}isRootStyle(){return this.importDepth===0}mergeAll(){let o,c,A,R,C,E,L,j,$,W;const te={};this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(ae=>{if(ae.stylesheet){if(ae.light!=null&&(o=ae.light),ae.stylesheet.lights)for(const de of ae.stylesheet.lights)de.type==="ambient"&&ae.ambientLight!=null&&(c=ae.ambientLight),de.type==="directional"&&ae.directionalLight!=null&&(A=ae.directionalLight);R=this._prioritizeTerrain(R,ae.terrain,ae.stylesheet.terrain),ae.stylesheet.fog&&ae.fog!=null&&(C=ae.fog),ae.stylesheet.snow&&ae.snow!=null&&(E=ae.snow),ae.stylesheet.rain&&ae.rain!=null&&(L=ae.rain),ae.stylesheet.camera!=null&&(W=ae.stylesheet.camera),ae.stylesheet.projection!=null&&(j=ae.stylesheet.projection),ae.stylesheet.transition!=null&&($=ae.stylesheet.transition),te[ae.scope]=ae._styleColorTheme}}),this.light=o,this.ambientLight=c,this.directionalLight=A,this.fog=C,this.snow=E,this.rain=L,this._styleColorThemeForScope=te,R===null?delete this.terrain:this.terrain=R,this.camera=W||{"camera-projection":"perspective"},this.projection=j||{name:"mercator"},this.transition=n.l({},Vd,$),this.mergeSources(),this.mergeLayers()}forEachFragmentStyle(o){const c=A=>{for(const R of A.fragments)c(R.style);o(A)};c(this)}_prioritizeTerrain(o,c,A){const R=o&&o.drapeRenderMode===0;return A===null?c&&c.drapeRenderMode===0?c:R?o:null:c!=null&&(!o||R||c&&c.drapeRenderMode===1)?c:o}mergeTerrain(){let o;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(c=>{o=this._prioritizeTerrain(o,c.terrain,c.stylesheet.terrain)}),o===null?delete this.terrain:this.terrain=o}mergeProjection(){let o;this.forEachFragmentStyle(c=>{c.stylesheet.projection!=null&&(o=c.stylesheet.projection)}),this.projection=o||{name:"mercator"}}mergeSources(){const o={},c={},A={};this.forEachFragmentStyle(R=>{for(const C in R._sourceCaches){const E=n.C(C,R.scope);o[E]=R._sourceCaches[C]}for(const C in R._otherSourceCaches){const E=n.C(C,R.scope);c[E]=R._otherSourceCaches[C]}for(const C in R._symbolSourceCaches){const E=n.C(C,R.scope);A[E]=R._symbolSourceCaches[C]}}),this._mergedSourceCaches=o,this._mergedOtherSourceCaches=c,this._mergedSymbolSourceCaches=A}mergeLayers(){const o={},c=[],A={};this._mergedSlots=[],this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this.forEachFragmentStyle(C=>{for(const E of C._order){const L=C._layers[E];if(L.type==="slot"){const j=n.cr(E);if(o[j])continue;o[j]=[]}L.slot&&o[L.slot]?o[L.slot].push(L):c.push(L)}}),this._mergedOrder=[];const R=(C=[])=>{for(const E of C)if(E.type==="slot"){const L=n.cr(E.id);o[L]&&R(o[L]),this._mergedSlots.push(L)}else{const L=n.C(E.id,E.scope);this._mergedOrder.push(L),A[L]=E,E.is3D(!!this.terrain)&&(this._has3DLayers=!0),E.type==="circle"&&(this._hasCircleLayers=!0),E.type==="symbol"&&(this._hasSymbolLayers=!0),E.type==="clip"&&(this._clipLayerPresent=!0)}};R(c),this._mergedOrder.sort((C,E)=>{const L=A[C],j=A[E];return L.hasInitialOcclusionOpacityProperties?j.is3D(!!this.terrain)?1:0:L.is3D(!!this.terrain)&&j.hasInitialOcclusionOpacityProperties?-1:0}),this._mergedLayers=A,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged()}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}getCamera(){return this.stylesheet.camera}setCamera(o){return this.stylesheet.camera=n.l({},this.stylesheet.camera,o),this.camera=this.stylesheet.camera,this}_evaluateColorThemeData(o){return o.data?function(c,A,R){const C=n.l({},A);for(const L of Object.keys(n.a5.colorTheme))C[L]===void 0&&(C[L]=n.a5.colorTheme[L].default);const E=new n.a6(El,c,new Map(R));return E.setTransitionOrValue(C,R),E.untransitioned().possiblyEvaluate(new n.aa(0))}(this.scope,o,this.options).get("data"):null}_loadColorTheme(o){this._styleColorTheme.lutLoading=!0,this._styleColorTheme.lutLoadingCorrelationID+=1;const c=this._styleColorTheme.lutLoadingCorrelationID;return new Promise((A,R)=>{const C="data:image/png;base64,";if(!o||o.length===0)return this._styleColorTheme.lut=null,this._styleColorTheme.lutLoading=!1,void A();let E=o;E.startsWith(C)||(E=C+E);const L=n.I.from("mapbox-reserved-lut"),j=new Image;j.src=E,j.onerror=()=>{this._styleColorTheme.lutLoading=!1,R(new Error("Failed to load image data"))},j.onload=()=>{if(this._styleColorTheme.lutLoadingCorrelationID!==c)return void A();this._styleColorTheme.lutLoading=!1;const{width:$,height:W,data:te}=n.q.getImageData(j);if(W>32)return void R(new Error("The height of the image must be less than or equal to 32 pixels."));if($!==W*W)return void R(new Error("The width of the image must be equal to the height squared."));this.getImage(L)&&this.removeImage(L),this.addImage(L,{data:new n.r({width:$,height:W},te),pixelRatio:1,sdf:!1,usvg:!1,version:0});const ae=this.imageManager.getImage(L,this.scope);ae?(this._styleColorTheme.lut={image:ae.data,data:o},A()):R(new Error("Missing LUT image."))}})}getLut(o){const c=this._styleColorThemeForScope[o];return c?c.lut:null}setProjection(o){o?this.stylesheet.projection=o:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?(this.getTerrain()||this.stylesheet.terrain)&&!this.disableElevatedTerrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null,0))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(o){this._spriteRequest=function(c,A,R){let C,E,L;const j=n.q.devicePixelRatio>1?"@2x":"";let $=n.n(A.transformRequest(A.normalizeSpriteURL(c,j,".json"),n.R.SpriteJSON),(ae,de)=>{$=null,L||(L=ae,C=de,te())}),W=n.o(A.transformRequest(A.normalizeSpriteURL(c,j,".png"),n.R.SpriteImage),(ae,de)=>{W=null,L||(L=ae,E=de,te())});function te(){if(L)R(L);else if(C&&E){const ae=n.q.getImageData(E),de={};for(const Te in C){const{width:ve,height:Ee,x:Ve,y:Be,sdf:et,pixelRatio:Je,stretchX:dt,stretchY:it,content:st}=C[Te],ot=new n.r({width:ve,height:Ee});n.r.copy(ae,ot,{x:Ve,y:Be},{x:0,y:0},{width:ve,height:Ee},null),de[Te]={data:ot,pixelRatio:Je,sdf:et,stretchX:dt,stretchY:it,content:st,usvg:!1}}R(null,de)}}return{cancel(){$&&($.cancel(),$=null),W&&(W.cancel(),W=null)}}}(o,this.map._requestManager,(c,A)=>{if(this._spriteRequest=null,c)this.fire(new n.z(c));else if(A){const R=new Map;for(const C in A)R.set(n.I.from(C),A[C]);this.addImages(R)}this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new n.A("data",{dataType:"style"}))})}addIconset(o,c){if(c.type==="sprite")return void this._loadSprite(c.url);const A=this.getOwnSource(c.source);if(!A)return void this.fire(new n.z(new Error(`Source "${c.source}" as specified by iconset "${o}" does not exist and cannot be used as an iconset source`)));if(A.type!=="raster-array")return void this.fire(new n.z(new Error(`Source "${c.source}" as specified by iconset "${o}" is not a "raster-array" source and cannot be used as an iconset source`)));this.imageManager.createIconset(this.scope,o);const R=new vu(o,this);A.addIconset(o,R)}_loadIconset(o){if(!n.f(o)&&this.map._spriteFormat!=="icon_set"||this.map._spriteFormat==="raster")return void this._loadSprite(o);const c=this.map._spriteFormat==="auto";var A,R;this._spriteRequest=(R=(C,E)=>{if(this._spriteRequest=null,C)c?this._loadSprite(o):this.fire(new n.z(C));else if(E){const L=new Map;for(const j in E)L.set(n.I.from(j),E[j]);this.addImages(L)}this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new n.A("data",{dataType:"style"}))},n.bj((A=this.map._requestManager).transformRequest(A.normalizeIconsetURL(o),n.R.Iconset),(C,E)=>{if(C)return void R(C);const L={},j=n.ch(new n.bi(E));for(const $ of j.icons){const W={version:1,pixelRatio:n.q.devicePixelRatio,content:Nl($),stretchX:$.metadata?fc($.metadata.stretch_x_areas):void 0,stretchY:$.metadata?fc($.metadata.stretch_y_areas):void 0,sdf:!1,usvg:!0,icon:$};L[$.name]=W}R(null,L)}))}_validateLayer(o){const c=this.getOwnSource(o.source);if(!c)return;const A=o.sourceLayer;A&&(c.type==="geojson"||c.vectorLayerIds&&c.vectorLayerIds.indexOf(A)===-1)&&this.fire(new n.z(new Error(`Source layer "${A}" does not exist on source "${c.id}" as specified by style layer "${o.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(const o in this._sourceCaches)if(!this._sourceCaches[o].loaded())return!1;if(!this.imageManager.isLoaded()||this.imageManager.hasPatternsInFlight()||!this.modelManager.isLoaded()||this._styleColorTheme.lutLoading)return!1;for(const{style:o}of this.fragments)if(!o.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((o,c)=>{const A=this.fragments[c];return A&&A.style&&(o.data=A.style.serialize()),o})}_serializeSources(){const o={};for(const c in this._sourceCaches){const A=this._sourceCaches[c].getSource();o[A.id]||(o[A.id]=A.serialize())}return o}_serializeLayers(o){const c=[];for(const A of o){const R=this._layers[A];R&&R.type!=="custom"&&c.push(R.serialize())}return c}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasSnowTransition(){return!!this.snow&&this.snow.hasTransition()}hasRainTransition(){return!!this.rain&&this.rain.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition()||this.hasSnowTransition()||this.hasRainTransition())return!0;for(const o in this._sourceCaches)if(this._sourceCaches[o].hasTransition())return!0;for(const o in this._layers)if(this._layers[o].hasTransition())return!0;return!1}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}_getOrder(o){return o?this.order:this._mergedOrder}isLayerDraped(o){return!!this.terrain&&o.isDraped(this.getLayerSourceCache(o))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(o){const c=this.getOwnLayer(o);if(c)return c;this.fire(new n.z(new Error(`The layer '${o}' does not exist in the map's style.`)))}_checkSource(o){const c=this.getOwnSource(o);if(c)return c;this.fire(new n.z(new Error(`The source '${o}' does not exist in the map's style.`)))}precompilePrograms(o,c){const A=this.map.painter;if(A)for(let R=o.minzoom||0;R<(o.maxzoom||25.5);R++){const C=o.getProgramIds();if(C)for(const E of C){const L=o.getDefaultProgramParams(E,c.zoom,this._styleColorTheme.lut);L&&(A.style=this,this.fog&&(A._fogVisible=!0,L.overrideFog=!0,A.getOrCreateProgram(E,L)),A._fogVisible=!1,L.overrideFog=!1,A.getOrCreateProgram(E,L),(this.stylesheet.terrain||this.stylesheet.projection&&this.stylesheet.projection.name==="globe")&&(L.overrideRtt=!0,A.getOrCreateProgram(E,L)))}}}update(o){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(o),this.directionalLight&&this.directionalLight.recalculate(o);const c=this.calculateLightsBrightness();o.brightness=c||0,c!==this._brightness&&(this._brightness=c,this.dispatcher.broadcast("setBrightness",c));const A=this._changes.isDirty();let R=!1;if(this._changes.isDirty()){const E=this._changes.getLayerUpdatesByScope();for(const L in E){const{updatedIds:j,removedIds:$}=E[L];(j||$)&&(this._updateWorkerLayers(L,j,$),R=!0)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(o),this.light&&this.light.updateTransitions(o),this.ambientLight&&this.ambientLight.updateTransitions(o),this.directionalLight&&this.directionalLight.updateTransitions(o),this.fog&&this.fog.updateTransitions(o),this.snow&&this.snow.updateTransitions(o),this.rain&&this.rain.updateTransitions(o),this._changes.reset()}const C={};for(const E in this._mergedSourceCaches){const L=this._mergedSourceCaches[E];C[E]=L.used,L.used=!1,L.tileCoverLift=0}for(const E of this._mergedOrder){const L=this._mergedLayers[E];if(L.recalculate(o,this._availableImages),!L.isHidden(o.zoom)){const j=this.getLayerSourceCache(L);j&&(j.used=!0,j.tileCoverLift=Math.max(j.tileCoverLift,L.tileCoverLift()))}!this._precompileDone&&this._shouldPrecompile&&("requestIdleCallback"in window?requestIdleCallback(()=>{this.precompilePrograms(L,o)}):this.precompilePrograms(L,o))}for(const E in this._mergedSourceCaches){const L=this._mergedSourceCaches[E];if(!L)continue;const j=L._source;j.type==="raster-array"&&j.iconsets&&(L.used=!0)}this._shouldPrecompile&&(this._precompileDone=!0),this.terrain&&R&&this.mergeLayers();for(const E in C){const L=this._mergedSourceCaches[E];C[E]!==L.used&&L.getSource().fire(new n.A("data",{sourceDataType:"visibility",dataType:"source",sourceId:L.getSource().id}))}this.light&&this.light.recalculate(o),this.terrain&&this.terrain.recalculate(o),this.fog&&this.fog.recalculate(o),this.snow&&this.snow.recalculate(o),this.rain&&this.rain.recalculate(o),this.z=o.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),this.imageManager.clearUpdatedImages(this.scope),A&&this.fire(new n.A("data",{dataType:"style"}))}_updateTilesForChangedImages(){const o=this._changes.getUpdatedImages();if(o.length){for(const c in this._mergedSourceCaches)this._mergedSourceCaches[c].reloadTilesForDependencies(["icons","patterns"],o);this._changes.resetUpdatedImages()}}_updateWorkerLayers(o,c,A){const R=this.getFragmentStyle(o);R&&this.dispatcher.broadcast("updateLayers",{layers:c?R._serializeLayers(c):[],scope:o,removedIds:A||[],options:R.options})}setState(o,c){if(this._checkLoaded(),Zi(this,Qi(o)))return!1;(o=n.cq(o)).layers=oh(o.layers);const A=function(E,L){if(!E)return[{command:Tn.setStyle,args:[L]}];let j=[];try{if(!n.bn(E.version,L.version))return[{command:Tn.setStyle,args:[L]}];if(n.bn(E.center,L.center)||j.push({command:Tn.setCenter,args:[L.center]}),n.bn(E.zoom,L.zoom)||j.push({command:Tn.setZoom,args:[L.zoom]}),n.bn(E.bearing,L.bearing)||j.push({command:Tn.setBearing,args:[L.bearing]}),n.bn(E.pitch,L.pitch)||j.push({command:Tn.setPitch,args:[L.pitch]}),n.bn(E.sprite,L.sprite)||j.push({command:Tn.setSprite,args:[L.sprite]}),n.bn(E.glyphs,L.glyphs)||j.push({command:Tn.setGlyphs,args:[L.glyphs]}),n.bn(E.imports,L.imports)||function(de=[],Te=[],ve){Te=Te||[];const Ee=(de=de||[]).map(An),Ve=Te.map(An),Be=de.reduce(Gs,{}),et=Te.reduce(Gs,{}),Je=Ee.slice();let dt,it,st,ot;for(dt=0,it=0;dt<Ee.length;dt++)st=Ee[dt],et.hasOwnProperty(st)?it++:(ve.push({command:Tn.removeImport,args:[st]}),Je.splice(Je.indexOf(st,it),1));for(dt=0,it=0;dt<Ve.length;dt++)st=Ve[Ve.length-1-dt],Je[Je.length-1-dt]!==st&&(Be.hasOwnProperty(st)?(ve.push({command:Tn.removeImport,args:[st]}),Je.splice(Je.lastIndexOf(st,Je.length-it),1)):it++,ot=Je[Je.length-dt],ve.push({command:Tn.addImport,args:[et[st],ot]}),Je.splice(Je.length-dt,0,st));for(const gt of Te){const Tt=Be[gt.id];Tt&&!n.bn(Tt,gt)&&ve.push({command:Tn.updateImport,args:[gt.id,gt]})}}(E.imports,L.imports,j),n.bn(E.transition,L.transition)||j.push({command:Tn.setTransition,args:[L.transition]}),n.bn(E.light,L.light)||j.push({command:Tn.setLight,args:[L.light]}),n.bn(E.fog,L.fog)||j.push({command:Tn.setFog,args:[L.fog]}),n.bn(E.snow,L.snow)||j.push({command:Tn.setSnow,args:[L.snow]}),n.bn(E.rain,L.rain)||j.push({command:Tn.setRain,args:[L.rain]}),n.bn(E.projection,L.projection)||j.push({command:Tn.setProjection,args:[L.projection]}),n.bn(E.lights,L.lights)||j.push({command:Tn.setLights,args:[L.lights]}),n.bn(E.camera,L.camera)||j.push({command:Tn.setCamera,args:[L.camera]}),!n.bn(E["color-theme"],L["color-theme"]))return[{command:Tn.setStyle,args:[L]}];const $={},W=[];(function(de,Te,ve,Ee){let Ve;for(Ve in Te=Te||{},de=de||{})de.hasOwnProperty(Ve)&&(Te.hasOwnProperty(Ve)||oc(Ve,ve,Ee));for(Ve in Te){if(!Te.hasOwnProperty(Ve))continue;const Be=Te[Ve];de.hasOwnProperty(Ve)?n.bn(de[Ve],Be)||(de[Ve].type==="geojson"&&Be.type==="geojson"&&Xa(de,Te,Ve)?ve.push({command:Tn.setGeoJSONSourceData,args:[Ve,Be.data]}):lc(Ve,Te,ve,Ee)):Bs(Ve,Te,ve)}})(E.sources,L.sources,W,$);const te=[];E.layers&&E.layers.forEach(de=>{de.source&&$[de.source]?j.push({command:Tn.removeLayer,args:[de.id]}):te.push(de)});let ae=E.terrain;ae&&$[ae.source]&&(j.push({command:Tn.setTerrain,args:[void 0]}),ae=void 0),j=j.concat(W),n.bn(ae,L.terrain)||j.push({command:Tn.setTerrain,args:[L.terrain]}),function(de,Te,ve){Te=Te||[];const Ee=(de=de||[]).map(An),Ve=Te.map(An),Be=de.reduce(Gs,{}),et=Te.reduce(Gs,{}),Je=Ee.slice(),dt=Object.create(null);let it,st,ot,gt,Tt,Xt,Ft;for(it=0,st=0;it<Ee.length;it++)ot=Ee[it],et.hasOwnProperty(ot)?st++:(ve.push({command:Tn.removeLayer,args:[ot]}),Je.splice(Je.indexOf(ot,st),1));for(it=0,st=0;it<Ve.length;it++)ot=Ve[Ve.length-1-it],Je[Je.length-1-it]!==ot&&(Be.hasOwnProperty(ot)?(ve.push({command:Tn.removeLayer,args:[ot]}),Je.splice(Je.lastIndexOf(ot,Je.length-st),1)):st++,Xt=Je[Je.length-it],ve.push({command:Tn.addLayer,args:[et[ot],Xt]}),Je.splice(Je.length-it,0,ot),dt[ot]=!0);for(it=0;it<Ve.length;it++)if(ot=Ve[it],gt=Be[ot],Tt=et[ot],!dt[ot]&&!n.bn(gt,Tt))if(n.bn(gt.source,Tt.source)&&n.bn(gt["source-layer"],Tt["source-layer"])&&n.bn(gt.type,Tt.type)){for(Ft in an(gt.layout,Tt.layout,ve,ot,null,Tn.setLayoutProperty),an(gt.paint,Tt.paint,ve,ot,null,Tn.setPaintProperty),n.bn(gt.slot,Tt.slot)||ve.push({command:Tn.setSlot,args:[ot,Tt.slot]}),n.bn(gt.filter,Tt.filter)||ve.push({command:Tn.setFilter,args:[ot,Tt.filter]}),n.bn(gt.minzoom,Tt.minzoom)&&n.bn(gt.maxzoom,Tt.maxzoom)||ve.push({command:Tn.setLayerZoomRange,args:[ot,Tt.minzoom,Tt.maxzoom]}),gt)gt.hasOwnProperty(Ft)&&Ft!=="layout"&&Ft!=="paint"&&Ft!=="filter"&&Ft!=="metadata"&&Ft!=="minzoom"&&Ft!=="maxzoom"&&Ft!=="slot"&&(Ft.indexOf("paint.")===0?an(gt[Ft],Tt[Ft],ve,ot,Ft.slice(6),Tn.setPaintProperty):n.bn(gt[Ft],Tt[Ft])||ve.push({command:Tn.setLayerProperty,args:[ot,Ft,Tt[Ft]]}));for(Ft in Tt)Tt.hasOwnProperty(Ft)&&!gt.hasOwnProperty(Ft)&&Ft!=="layout"&&Ft!=="paint"&&Ft!=="filter"&&Ft!=="metadata"&&Ft!=="minzoom"&&Ft!=="maxzoom"&&Ft!=="slot"&&(Ft.indexOf("paint.")===0?an(gt[Ft],Tt[Ft],ve,ot,Ft.slice(6),Tn.setPaintProperty):n.bn(gt[Ft],Tt[Ft])||ve.push({command:Tn.setLayerProperty,args:[ot,Ft,Tt[Ft]]}))}else ve.push({command:Tn.removeLayer,args:[ot]}),Xt=Je[Je.lastIndexOf(ot)+1],ve.push({command:Tn.addLayer,args:[Tt,Xt]})}(te,L.layers,j)}catch($){console.warn("Unable to compute style diff:",$),j=[{command:Tn.setStyle,args:[L]}]}return j}(this.serialize(),o).filter(E=>!(E.command in Qs));if(A.length===0)return!1;const R=A.filter(E=>!(E.command in _f));if(R.length>0)throw new Error(`Unimplemented: ${R.map(E=>E.command).join(", ")}.`);const C=[];return A.forEach(E=>{C.push(this[E.command].apply(this,E.args))}),c&&Promise.all(C).then(c),this.stylesheet=o,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}_updateWorkerImages(){this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages})}addImages(o){for(const[c,A]of o.entries()){if(this.getImage(c)&&!c.iconsetId)return this.fire(new n.z(new Error(`An image with the name "${c.name}" already exists.`)));this.imageManager.addImage(c,this.scope,A),this._changes.updateImage(c)}return this._updateWorkerImages(),this.fire(new n.A("data",{dataType:"style"})),this}addImage(o,c){return this.getImage(o)&&!o.iconsetId?this.fire(new n.z(new Error(`An image with the name "${o.name}" already exists.`))):(this.imageManager.addImage(o,this.scope,c),this._changes.updateImage(o),this._updateWorkerImages(),this.fire(new n.A("data",{dataType:"style"})),this)}updateImage(o,c,A=!1){this.imageManager.updateImage(o,this.scope,c),A&&(this._changes.updateImage(o),this._updateWorkerImages(),this.fire(new n.A("data",{dataType:"style"})))}getImage(o){return this.imageManager.getImage(o,this.scope)}removeImage(o){return this.getImage(o)?(this.imageManager.removeImage(o,this.scope),this._changes.updateImage(o),this._updateWorkerImages(),this.fire(new n.A("data",{dataType:"style"})),this):this.fire(new n.z(new Error("No image with this name exists.")))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addModel(o,c,A={}){return this._checkLoaded(),this._validate(yt,`models.${o}`,c,null,A)||(this.modelManager.addModel(o,c,this.scope),this._changes.setDirty()),this}hasModel(o){return this.modelManager.hasModel(o,this.scope)}removeModel(o){return this.hasModel(o)?(this.modelManager.removeModel(o,this.scope),this):this.fire(new n.z(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.scope)}addSource(o,c,A={}){if(this._checkLoaded(),this.getOwnSource(o)!==void 0)throw new Error(`There is already a source with ID "${o}".`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(Oo,`sources.${o}`,c,null,A))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const R=Mo(o,c,this.dispatcher,this);R.scope=this.scope,R.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(R.id),source:R.serialize(),sourceId:R.id}));const C=E=>{const L=(E?"symbol:":"other:")+R.id,j=n.C(L,this.scope),$=this._sourceCaches[L]=new Yo(j,R,E);(E?this._symbolSourceCaches:this._otherSourceCaches)[R.id]=$,$.onAdd(this.map)};C(!1),c.type!=="vector"&&c.type!=="geojson"||C(!0),R.onAdd&&R.onAdd(this.map),A.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(o){this._checkLoaded();const c=this.getOwnSource(o);if(!c)throw new Error("There is no source with this ID");for(const R in this._layers)if(this._layers[R].source===o)return this.fire(new n.z(new Error(`Source "${o}" cannot be removed while layer "${R}" is using it.`)));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===o)return this.fire(new n.z(new Error(`Source "${o}" cannot be removed while terrain is using it.`)));const A=this.getOwnSourceCaches(o);for(const R of A){const C=n.cr(R.id);delete this._sourceCaches[C],this._changes.discardSourceCacheUpdate(R.id),R.fire(new n.A("data",{sourceDataType:"metadata",dataType:"source",sourceId:R.getSource().id})),R.setEventedParent(null),R.clearTiles()}return delete this._otherSourceCaches[o],delete this._symbolSourceCaches[o],this.mergeSources(),c.setEventedParent(null),c.onRemove&&c.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(o,c){this._checkLoaded(),this.getOwnSource(o).setData(c),this._changes.setDirty()}getOwnSource(o){const c=this.getOwnSourceCache(o);return c&&c.getSource()}getOwnSources(){const o=[];for(const c in this._otherSourceCaches){const A=this.getOwnSourceCache(c);A&&o.push(A.getSource())}return o}areTilesLoaded(){const o=this._mergedSourceCaches;for(const c in o){const A=o[c]._tiles;for(const R in A){const C=A[R];if(C.state!=="loaded"&&C.state!=="errored")return!1}}return!0}setLights(o){if(this._checkLoaded(),!o)return delete this.ambientLight,void delete this.directionalLight;const c=this._getTransitionParameters();for(const R of o){if(this._validate(fn,"lights",R))return;switch(R.type){case"ambient":if(this.ambientLight){const C=this.ambientLight;C.set(R),C.updateTransitions(c)}else this.ambientLight=new Vi(R,qr||(qr=new n.a7({color:new n.a8(n.a5.properties_light_ambient.color),"color-use-theme":new n.a8({type:"string",default:"default","property-type":"data-constant"}),intensity:new n.a8(n.a5.properties_light_ambient.intensity)})),this.scope,this.options);break;case"directional":if(this.directionalLight){const C=this.directionalLight;C.set(R),C.updateTransitions(c)}else this.directionalLight=new Vi(R,yn||(yn=new n.a7({direction:new n.am(n.a5.properties_light_directional.direction),color:new n.a8(n.a5.properties_light_directional.color),"color-use-theme":new n.a8({type:"string",default:"default","property-type":"data-constant"}),intensity:new n.a8(n.a5.properties_light_directional.intensity),"cast-shadows":new n.a8(n.a5.properties_light_directional["cast-shadows"]),"shadow-quality":new n.a8(n.a5.properties_light_directional["shadow-quality"]),"shadow-intensity":new n.a8(n.a5.properties_light_directional["shadow-intensity"])})),this.scope,this.options)}}const A=new n.aa(this.z||0,c);this.ambientLight&&this.ambientLight.recalculate(A),this.directionalLight&&this.directionalLight.recalculate(A),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){const o=this.directionalLight,c=this.ambientLight;if(!o||!c)return;const A=ae=>.2126*(ae[0]<=.03928?ae[0]/12.92:Math.pow((ae[0]+.055)/1.055,2.4))+.7152*(ae[1]<=.03928?ae[1]/12.92:Math.pow((ae[1]+.055)/1.055,2.4))+.0722*(ae[2]<=.03928?ae[2]/12.92:Math.pow((ae[2]+.055)/1.055,2.4)),R=o.properties.get("color").toRenderColor(null).toArray01(),C=o.properties.get("intensity"),E=o.properties.get("direction"),L=1-n.cc(E.x,E.y,E.z)[2]/90,j=A(R)*C*L,$=c.properties.get("color").toRenderColor(null).toArray01(),W=c.properties.get("intensity"),te=A($)*W;return Number(((j+te)/2).toFixed(6))}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;const o=[];return this.directionalLight&&o.push(this.directionalLight.get()),this.ambientLight&&o.push(this.ambientLight.get()),o}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(o){if(!o)return this;if(n.cs(o)){const c=n.ct(o),A=this.fragments.find(({id:C})=>C===c);if(!A)throw new Error(`Style import '${o}' not found`);const R=n.cr(o);return A.style.getFragmentStyle(R)}{const c=this.fragments.find(({id:A})=>A===o);return c?c.style:void 0}}setFeaturesetSelectors(o){if(!o)return;const c={},A=(R,C="")=>`${R}::${C}`;this._featuresetSelectors={};for(const R in o){const C=this._featuresetSelectors[R]=[];for(const E of o[R].selectors){if(E.featureNamespace){const j=this.getOwnLayer(E.layer);if(!j){n.w(`Layer is undefined for selector: ${E.layer}`);continue}const $=A(j.source,j.sourceLayer);if($ in c&&c[$]!==E.featureNamespace){n.w(`"featureNamespace ${E.featureNamespace} of featureset ${R}'s selector is not associated to the same source, skip this selector`);continue}c[$]=E.featureNamespace}let L;if(E.properties)for(const j in E.properties){const $=n.X(E.properties[j]);$.result==="success"&&(L=L||{},L[j]=$.value)}C.push({layerId:E.layer,namespace:E.featureNamespace,properties:L,uniqueFeatureID:E._uniqueFeatureID})}}}getFeaturesetDescriptors(o){const c=this.getFragmentStyle(o);if(!c||!c.stylesheet.featuresets)return[];const A=[];for(const R in c.stylesheet.featuresets)A.push({featuresetId:R,importId:c.scope?c.scope:void 0});return A}getFeaturesetLayers(o,c){const A=this.getFragmentStyle(c),R=A.stylesheet.featuresets;if(!R||!R[o])return this.fire(new n.z(new Error(`The featureset '${o}' does not exist in the map's style and cannot be queried.`))),[];const C=[];for(const E of R[o].selectors){const L=A.getOwnLayer(E.layer);L&&C.push(L)}return C}getConfigProperty(o,c){const A=this.getFragmentStyle(o);if(!A)return null;const R=n.C(c,A.scope),C=A.options.get(R),E=C?C.value||C.default:null;return E?E.serialize():null}setConfigProperty(o,c,A){const R=this.getFragmentStyle(o);if(!R)return;const C=R.stylesheet.indoor?Ed(R.stylesheet.schema):R.stylesheet.schema;if(!C||!C[c])return;const E=n.X(A);if(E.result!=="success")return void Zi(this,E.value);const L=E.value.expression,j=n.C(c,R.scope),$=R.options.get(j);if(!$)return;let W;const{minValue:te,maxValue:ae,stepValue:de,type:Te,values:ve}=C[c],Ee=n.X(C[c].default);Ee.result==="success"&&(W=Ee.value.expression),W?(this.options.set(j,Object.assign({},$,{value:L,default:W,minValue:te,maxValue:ae,stepValue:de,type:Te,values:ve})),this.updateConfigDependencies(c)):this.fire(new n.z(new Error(`No schema defined for the config option "${c}" in the "${o}" fragment.`)))}getConfig(o){const c=this.getFragmentStyle(o);if(!c)return null;const A=c.stylesheet.schema;if(!A)return null;const R={};for(const C in A){const E=n.C(C,c.scope),L=c.options.get(E),j=L?L.value||L.default:null;R[C]=j?j.serialize():null}return R}setConfig(o,c){const A=this.getFragmentStyle(o);A&&(A.updateConfig(c,A.stylesheet.schema),this.updateConfigDependencies())}getSchema(o){const c=this.getFragmentStyle(o);return c?c.stylesheet.schema:null}setSchema(o,c){const A=this.getFragmentStyle(o);A&&(A.stylesheet.schema=c,A.updateConfig(A._config,c),this.updateConfigDependencies())}updateConfig(o,c){if(this._config=o,o||c)if(c)for(const A in c){let R,C;const E=n.X(c[A].default);if(E.result==="success"&&(R=E.value.expression),o&&o[A]!==void 0){const ae=n.X(o[A]);ae.result==="success"&&(C=ae.value.expression)}const{minValue:L,maxValue:j,stepValue:$,type:W,values:te}=c[A];if(R){const ae=n.C(A,this.scope);this.options.set(ae,{default:R,value:C,minValue:L,maxValue:j,stepValue:$,type:W,values:te})}else this.fire(new n.z(new Error(`No schema defined for config option "${A}".`)))}else this.fire(new n.z(new Error("Attempting to set config for a style without schema.")))}updateConfigDependencies(o){for(const c of this._configDependentLayers){const A=this.getLayer(c);if(A){if(o&&!A.configDependencies.has(o))continue;A.possiblyEvaluateVisibility(),this._updateLayer(A)}}this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this.fog&&this.fog.updateConfig(this.options),this.snow&&this.snow.updateConfig(this.options),this.rain&&this.rain.updateConfig(this.options),this.forEachFragmentStyle(c=>{const A=c._styleColorTheme.colorThemeOverride?c._styleColorTheme.colorThemeOverride:c._styleColorTheme.colorTheme;if(A){const R=c._evaluateColorThemeData(A);(!c._styleColorTheme.lut&&R!==""||c._styleColorTheme.lut&&R!==c._styleColorTheme.lut.data)&&c.setColorTheme(A)}}),this._changes.setDirty()}addLayer(o,c,A={}){this._checkLoaded();const R=o.id;if(this._layers[R])return void this.fire(new n.z(new Error(`Layer with id "${R}" already exists on this map`)));let C;if(o.type==="custom"){if(Zi(this,n.cu(o)))return;C=n.cv(o,this.scope,this._styleColorTheme.lut,this.options)}else{if(typeof o.source=="object"&&(this.addSource(R,o.source),o=n.cq(o),o=n.l(o,{source:R})),this._validate(xe,`layers.${R}`,o,{arrayIndex:-1},A))return;C=n.cv(o,this.scope,this._styleColorTheme.lut,this.options),this._validateLayer(C),C.setEventedParent(this,{layer:{id:R}})}C.configDependencies.size!==0&&this._configDependentLayers.add(C.fqid);let E=this._order.length;if(c){const W=this._order.indexOf(c);if(W===-1)return void this.fire(new n.z(new Error(`Layer with id "${c}" does not exist on this map.`)));C.slot===this._layers[c].slot?E=W:n.w(`Layer with id "${c}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(E,0,R),this._layerOrderChanged=!0,this._layers[R]=C;const L=this.getOwnLayerSourceCache(C),j=!!this.directionalLight&&this.directionalLight.shadowsEnabled();L&&C.canCastShadows()&&j&&(L.castsShadows=!0);const $=this._changes.getRemovedLayer(C);if($&&C.source&&L&&C.type!=="custom"){this._changes.discardLayerRemoval(C);const W=n.C(C.source,C.scope);$.type!==C.type?this._changes.updateSourceCache(W,"clear"):(this._changes.updateSourceCache(W,"reload"),L.pause())}this._updateLayer(C),C.onAdd&&C.onAdd(this.map),C.scope=this.scope,this.mergeLayers()}moveLayer(o,c){this._checkLoaded();const A=this._checkLayer(o);if(!A||o===c)return;const R=this._order.indexOf(o);this._order.splice(R,1);let C=this._order.length;if(c){const E=this._order.indexOf(c);if(E===-1)return void this.fire(new n.z(new Error(`Layer with id "${c}" does not exist on this map.`)));A.slot===this._layers[c].slot?C=E:n.w(`Layer with id "${c}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(C,0,o),this._changes.setDirty(),this._layerOrderChanged=!0,this.mergeLayers()}removeLayer(o){this._checkLoaded();const c=this._checkLayer(o);if(!c)return;c.setEventedParent(null);const A=this._order.indexOf(o);this._order.splice(A,1),delete this._layers[o],this._changes.setDirty(),this._layerOrderChanged=!0,this._configDependentLayers.delete(c.fqid),this._changes.removeLayer(c);const R=this.getOwnLayerSourceCache(c);if(R&&R.castsShadows){let C=!1;for(const E in this._layers)if(this._layers[E].source===c.source&&this._layers[E].canCastShadows()){C=!0;break}R.castsShadows=C}c.onRemove&&c.onRemove(this.map),this.mergeLayers()}getOwnLayer(o){return this._layers[o]}hasLayer(o){return o in this._mergedLayers}hasLayerType(o){for(const c in this._layers)if(this._layers[c].type===o)return!0;return!1}setLayerZoomRange(o,c,A){this._checkLoaded();const R=this._checkLayer(o);R&&(R.minzoom===c&&R.maxzoom===A||(c!=null&&(R.minzoom=c),A!=null&&(R.maxzoom=A),this._updateLayer(R)))}getSlots(){return this._checkLoaded(),this._mergedSlots}setSlot(o,c){this._checkLoaded();const A=this._checkLayer(o);A&&A.slot!==c&&(A.slot=c,this._updateLayer(A))}setFilter(o,c,A={}){this._checkLoaded();const R=this._checkLayer(o);if(R&&!n.bn(R.filter,c))return c==null?(R.filter=void 0,void this._updateLayer(R)):void(this._validate(Oe,`layers.${R.id}.filter`,c,{layerType:R.type},A)||(R.filter=n.cq(c),this._updateLayer(R)))}getFilter(o){const c=this._checkLayer(o);if(c)return n.cq(c.filter)}setLayoutProperty(o,c,A,R={}){this._checkLoaded();const C=this._checkLayer(o);if(C&&!n.bn(C.getLayoutProperty(c),A)){if(A!=null&&(!R||R.validate!==!1)&&Zi(C,_t.call(Qi,{key:`layers.${o}.layout.${c}`,layerType:C.type,objectKey:c,value:A,styleSpec:n.a5,style:{glyphs:!0,sprite:!0}})))return;C.setLayoutProperty(c,A),C.configDependencies.size!==0&&this._configDependentLayers.add(C.fqid),this._updateLayer(C)}}getLayoutProperty(o,c){const A=this._checkLayer(o);if(A)return A.getLayoutProperty(c)}setPaintProperty(o,c,A,R={}){this._checkLoaded();const C=this._checkLayer(o);if(!C||n.bn(C.getPaintProperty(c),A)||A!=null&&(!R||R.validate!==!1)&&Zi(C,rt.call(Qi,{key:`layers.${o}.paint.${c}`,layerType:C.type,objectKey:c,value:A,styleSpec:n.a5})))return;const E=C.setPaintProperty(c,A);C.configDependencies.size!==0&&this._configDependentLayers.add(C.fqid),E&&this._updateLayer(C),this._changes.updatePaintProperties(C)}getPaintProperty(o,c){const A=this._checkLayer(o);if(A)return A.getPaintProperty(c)}setFeatureState(o,c){if(this._checkLoaded(),"target"in o){if("featuresetId"in o.target){const{featuresetId:j,importId:$}=o.target,W=this.getFragmentStyle($),te=W.getFeaturesetLayers(j);for(const{source:ae,sourceLayer:de}of te)W.setFeatureState({id:o.id,source:ae,sourceLayer:de},c)}else if("layerId"in o.target){const{layerId:j}=o.target,$=this.getLayer(j);this.setFeatureState({id:o.id,source:$.source,sourceLayer:$.sourceLayer},c)}return}const A=o.source,R=o.sourceLayer,C=this._checkSource(A);if(!C)return;const E=C.type;if(E==="geojson"&&R)return void this.fire(new n.z(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(E==="vector"&&!R)return void this.fire(new n.z(new Error("The sourceLayer parameter must be provided for vector source types.")));o.id===void 0&&this.fire(new n.z(new Error("The feature id parameter must be provided.")));const L=this.getOwnSourceCaches(A);for(const j of L)j.setFeatureState(R,o.id,c)}removeFeatureState(o,c){if(this._checkLoaded(),"target"in o){if("featuresetId"in o.target){const{featuresetId:j,importId:$}=o.target,W=this.getFragmentStyle($),te=W.getFeaturesetLayers(j);for(const{source:ae,sourceLayer:de}of te)W.removeFeatureState({id:o.id,source:ae,sourceLayer:de},c)}else if("layerId"in o.target){const{layerId:j}=o.target,$=this.getLayer(j);this.removeFeatureState({id:o.id,source:$.source,sourceLayer:$.sourceLayer},c)}return}const A=o.source,R=this._checkSource(A);if(!R)return;const C=R.type,E=C==="vector"?o.sourceLayer:void 0;if(C==="vector"&&!E)return void this.fire(new n.z(new Error("The sourceLayer parameter must be provided for vector source types.")));if(c&&typeof o.id!="string"&&typeof o.id!="number")return void this.fire(new n.z(new Error("A feature id is required to remove its specific state property.")));const L=this.getOwnSourceCaches(A);for(const j of L)j.removeFeatureState(E,o.id,c)}getFeatureState(o){if(this._checkLoaded(),"target"in o){let C;if("featuresetId"in o.target){const{featuresetId:E,importId:L}=o.target,j=this.getFragmentStyle(L),$=j.getFeaturesetLayers(E);for(const{source:W,sourceLayer:te}of $){const ae=j.getFeatureState({id:o.id,source:W,sourceLayer:te});if(ae&&!C)C=ae;else if(!n.bn(C,ae))return void this.fire(new n.z(new Error("The same feature id exists in multiple sources in the featureset, but their feature states are not consistent through the sources.")))}}else if("layerId"in o.target){const{layerId:E}=o.target,L=this.getLayer(E);C=this.getFeatureState({id:o.id,source:L.source,sourceLayer:L.sourceLayer})}return C}const c=o.source,A=o.sourceLayer,R=this._checkSource(c);if(R){if(R.type!=="vector"||A)return o.id===void 0&&this.fire(new n.z(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(c)[0].getFeatureState(A,o.id);this.fire(new n.z(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(o){return this.stylesheet.transition=n.l({},this.stylesheet.transition,o),this.transition=this.stylesheet.transition,this}getTransition(){return n.l({},this.stylesheet.transition)}serialize(){this._checkLoaded();const o=this.getTerrain(),c=o&&this.terrain&&this.terrain.scope===this.scope?o:this.stylesheet.terrain;return n.cw({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,fragment:this.stylesheet.fragment,iconsets:this.stylesheet.iconsets,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:c,fog:this.stylesheet.fog,snow:this.stylesheet.snow,rain:this.stylesheet.rain,center:this.stylesheet.center,"color-theme":this.stylesheet["color-theme"],zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},A=>A!==void 0)}_updateFilteredLayers(o){for(const c of Object.values(this._mergedLayers))o(c)&&this._updateLayer(c)}_updateLayer(o){this._changes.updateLayer(o);const c=this.getLayerSourceCache(o),A=n.C(o.source,o.scope),R=this._changes.getUpdatedSourceCaches();o.source&&!R[A]&&c&&c.getSource().type!=="raster"&&(this._changes.updateSourceCache(A,"reload"),c.pause()),o.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(o){const c=L=>this._mergedLayers[L].is3D(!!this.terrain),A=this.order,R={},C=[];for(let L=A.length-1;L>=0;L--){const j=A[L];if(c(j)){R[j]=L;for(const $ of o){const W=$[j];if(W)for(const te of W)C.push(te)}}}C.sort((L,j)=>j.intersectionZ-L.intersectionZ);const E=[];for(let L=A.length-1;L>=0;L--){const j=A[L];if(c(j))for(let $=C.length-1;$>=0;$--){const W=C[$].feature;if(W.layer&&R[W.layer.id]<L)break;E.push(W),C.pop()}else for(const $ of o){const W=$[j];if(W)for(const te of W)E.push(te.feature)}}return E}queryRenderedFeatures(o,c,A){let R;c&&!Array.isArray(c)&&c.filter&&(this._validate(Oe,"queryRenderedFeatures.filter",c.filter,null,c),R=n.a_(c.filter));const C={},E=W=>{if(fo.has(W.type))return;const te=this.getOwnLayerSourceCache(W),ae=C[te.id]=C[te.id]||{sourceCache:te,layers:{},has3DLayers:!1};W.is3D(!!this.terrain)&&(ae.has3DLayers=!0),ae.layers[W.fqid]=ae.layers[W.fqid]||{styleLayer:W,targets:[]},ae.layers[W.fqid].targets.push({filter:R})};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new n.z(new Error("parameters.layers must be an Array."))),[];for(const W of c.layers){const te=this._layers[W];if(!te)return this.fire(new n.z(new Error(`The layer '${W}' does not exist in the map's style and cannot be queried for features.`))),[];E(te)}}else for(const W in this._layers)E(this._layers[W]);const L=this._queryRenderedFeatures(o,C,A),j=this._flattenAndSortRenderedFeatures(L),$=[];for(const W of j)n.ct(W.layer.id)===this.scope&&$.push(W);return $}queryRenderedFeatureset(o,c,A){let R;c&&!Array.isArray(c)&&c.filter&&(this._validate(Oe,"queryRenderedFeatures.filter",c.filter,null,c),R=n.a_(c.filter));const C="mock",E=[];if(c&&c.target)E.push(Object.assign({},c,{targetId:C,filter:R}));else{const W=this.getFeaturesetDescriptors();for(const te of W)E.push({targetId:C,filter:R,target:te});for(const{style:te}of this.fragments){const ae=te.getFeaturesetDescriptors();for(const de of ae)E.push({targetId:C,filter:R,target:de})}}const L=this.queryRenderedTargets(o,E,A),j=[],$=new Set;for(const W of L)for(const te of W.variants[C])zc(te,W,$)||j.push(new n.cx(W,te));return j}queryRenderedTargets(o,c,A){const R={},C=(L,j,$,W)=>{const te=R[j.id]=R[j.id]||{sourceCache:j,layers:{},has3DLayers:!1};if(te.layers[L.fqid]=te.layers[L.fqid]||{styleLayer:L,targets:[]},L.is3D(!!this.terrain)&&(te.has3DLayers=!0),!W)return $.uniqueFeatureID=!1,void te.layers[L.fqid].targets.push($);te.layers[L.fqid].targets.push(Object.assign({},$,{namespace:W.namespace,properties:W.properties,uniqueFeatureID:W.uniqueFeatureID}))};for(const L of c)if("featuresetId"in L.target){const{featuresetId:j,importId:$}=L.target,W=this.getFragmentStyle($);if(!W||!W._featuresetSelectors)continue;const te=W._featuresetSelectors[j];if(!te){this.fire(new n.z(new Error(`The featureset '${j}' does not exist in the map's style and cannot be queried for features.`)));continue}for(const ae of te){const de=W.getOwnLayer(ae.layerId);de&&!fo.has(de.type)&&C(de,W.getOwnLayerSourceCache(de),L,ae)}}else if("layerId"in L.target){const{layerId:j}=L.target,$=this.getLayer(j);if(!$||fo.has($.type))continue;C($,this.getLayerSourceCache($),L)}const E=this._queryRenderedFeatures(o,R,A);return this._flattenAndSortRenderedFeatures(E)}_queryRenderedFeatures(o,c,A){const R=[],C=!!this.map._showQueryGeometry,E=Gi.createFromScreenPoints(o,A);for(const L in c){const j=ih(E,c[L],this._availableImages,A,C);Object.keys(j).length&&R.push(j)}if(this.placement)for(const L in c){if(!c[L].sourceCache._onlySymbols)continue;const j=pu(E.screenGeometry,c[L],this._availableImages,this.placement.collisionIndex,this.placement.retainedQueryData);Object.keys(j).length&&R.push(j)}return R}querySourceFeatures(o,c){const A=c&&c.filter;A&&this._validate(Oe,"querySourceFeatures.filter",A,null,c);let R=[];const C=this.getOwnSourceCaches(o);for(const E of C)R=R.concat(Oc(E,c));return R}addSourceType(o,c,A){return eo.getSourceType(o)?A(new Error(`A source type called "${o}" already exists.`)):(eo.setSourceType(o,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:o,url:c.workerSourceURL},A):A(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(o,c,A={}){this._checkLoaded();const R=this.light.getLight();let C=!1;for(const L in o)if(!n.bn(o[L],R[L])){C=!0;break}if(!C)return;const E=this._getTransitionParameters();this.light.setLight(o,c,A),this.light.updateTransitions(E)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}checkCanvasFingerprintNoise(){this.disableElevatedTerrain===void 0&&(this.disableElevatedTerrain=n.q.hasCanvasFingerprintNoise(),this.disableElevatedTerrain&&n.w("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."))}setTerrain(o,c=1){if(this._checkLoaded(),!o)return this.terrainSetForDrapingOnly()||(delete this.terrain,this.map.transform.projection.requiresDraping&&this.setTerrainForDraping()),c===0&&delete this.terrain,o===null?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);this.checkCanvasFingerprintNoise();let A=o;const R=o.source==null;if(c===1){if(this.disableElevatedTerrain)return;if(typeof A.source=="object"){const L="terrain-dem-src";this.addSource(L,A.source),A=n.cq(A),A=n.l(A,{source:L})}const C=n.l({},A),E={};if(this.terrain&&R){C.source=this.terrain.get().source;const L=this.terrain?this.getFragmentStyle(this.terrain.scope):null;L&&(E.style=L.serialize())}if(this._validate(ui,"terrain",C,E))return}if(!this.terrain||this.terrain.scope!==this.scope&&!R||this.terrain&&c!==this.terrain.drapeRenderMode){if(!A)return;this._createTerrain(A,c),this.fire(new n.A("data",{dataType:"style"}))}else{const C=this.terrain,E=C.get();for(const L of Object.keys(n.a5.terrain))!A.hasOwnProperty(L)&&n.a5.terrain[L].default&&(A[L]=n.a5.terrain[L].default);for(const L in o)if(!n.bn(o[L],E[L])){C.set(o,this.options),this.stylesheet.terrain=o;const j=this._getTransitionParameters({duration:0});C.updateTransitions(j),this.fire(new n.A("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(o){const c=this.fog=new Gr(o,this.map.transform,this.scope,this.options);this.stylesheet.fog=c.get();const A=this._getTransitionParameters({duration:0});c.updateTransitions(A)}_createSnow(o){const c=this.snow=new Hr(o,this.map.transform,this.scope,this.options);this.stylesheet.snow=c.get();const A=this._getTransitionParameters({duration:0});c.updateTransitions(A)}_createRain(o){const c=this.rain=new In(o,this.map.transform,this.scope,this.options);this.stylesheet.rain=c.get();const A=this._getTransitionParameters({duration:0});c.updateTransitions(A)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const o of this.map._markers)o._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(o){if(this._checkLoaded(),!o)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const c=this.fog;if(!n.bn(c.get(),o)){c.set(o,this.options),this.stylesheet.fog=c.get();const A=this._getTransitionParameters({duration:0});c.updateTransitions(A)}}else this._createFog(o);this._markersNeedUpdate=!0}getSnow(){return this.snow?this.snow.get():null}setSnow(o){if(this._checkLoaded(),!o)return delete this.snow,void delete this.stylesheet.snow;if(this.snow){const c=this.snow;if(!n.bn(c.get(),o)){c.set(o,this.options),this.stylesheet.snow=c.get();const A=this._getTransitionParameters({duration:0});c.updateTransitions(A)}}else this._createSnow(o);this._markersNeedUpdate=!0}getRain(){return this.rain?this.rain.get():null}setRain(o){if(this._checkLoaded(),!o)return delete this.rain,void delete this.stylesheet.rain;if(this.rain){const c=this.rain;if(!n.bn(c.get(),o)){c.set(o,this.options),this.stylesheet.rain=c.get();const A=this._getTransitionParameters({duration:0});c.updateTransitions(A)}}else this._createRain(o);this._markersNeedUpdate=!0}_reloadColorTheme(){const o=()=>{for(const R in this._layers)this._layers[R].lut=this._styleColorTheme.lut;for(const R in this._sourceCaches)this._sourceCaches[R].clearTiles()},c=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(!c)return this._styleColorTheme.lut=null,void o();const A=this._evaluateColorThemeData(c);this._loadColorTheme(A).then(()=>{this.fire(new n.A("colorthemeset")),o()}).catch(R=>{n.w(`Couldn't set color theme: ${R}`)})}setColorTheme(o){this._checkLoaded(),this._styleColorTheme.colorThemeOverride&&n.w("Note: setColorTheme is called on a style with a color-theme override, the passed color-theme won't be visible."),this._styleColorTheme.colorTheme=o,this._reloadColorTheme()}setImportColorTheme(o,c){const A=this.getFragmentStyle(o);A&&(A._styleColorTheme.colorThemeOverride=c,A._reloadColorTheme())}_getTransitionParameters(o){return{now:n.q.now(),transition:n.l(this.transition,o)}}updateDrapeFirstLayers(){if(!this.terrain)return;const o=[],c=[];for(const A of this._mergedOrder)this.isLayerDraped(this._mergedLayers[A])?o.push(A):c.push(A);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...o),this._drapedFirstOrder.push(...c)}_createTerrain(o,c){const A=this.terrain=new Kt(o,c,this.scope,this.options);c===1&&(this.stylesheet.terrain=o),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();const R=this._getTransitionParameters({duration:0});A.updateTransitions(R)}_force3DLayerUpdate(){for(const o in this._layers){const c=this._layers[o];c.type==="fill-extrusion"&&this._updateLayer(c)}}_forceSymbolLayerUpdate(){for(const o in this._layers){const c=this._layers[o];c.type==="symbol"&&this._updateLayer(c)}}_validate(o,c,A,R,C={}){if(C&&C.validate===!1)return!1;const E=n.l({},this.serialize());return Zi(this,o.call(Qi,n.l({key:c,style:E,value:A,styleSpec:n.a5},R)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),n.cy.off("pluginStateChange",this._rtlTextPluginCallback);for(const o in this._mergedLayers)this._mergedLayers[o].setEventedParent(null);for(const o in this._mergedSourceCaches)this._mergedSourceCaches[o].clearTiles(),this._mergedSourceCaches[o].setEventedParent(null);this.setEventedParent(null),delete this.fog,delete this.snow,delete this.rain,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.modelManager.setEventedParent(null),this.dispatcher.remove())}clearSource(o){const c=this.getSourceCaches(o);for(const A of c)A.clearTiles()}clearSources(){for(const o in this._mergedSourceCaches)this._mergedSourceCaches[o].clearTiles()}reloadSource(o){const c=this.getSourceCaches(o);for(const A of c)A.resume(),A.reload()}reloadSources(){for(const o of this.getSources())o.reload&&o.reload()}reloadModels(){this.modelManager.reloadModels(""),this.forEachFragmentStyle(o=>{o.modelManager.reloadModels(o.scope)})}updateSources(o){let c;this.directionalLight&&(c=Pl(this.directionalLight));for(const A in this._mergedSourceCaches)this._mergedSourceCaches[A].update(o,void 0,void 0,c)}_generateCollisionBoxes(){for(const o in this._sourceCaches){const c=this._sourceCaches[o];c.resume(),c.reload()}}_updatePlacement(o,c,A,R,C,E,L=!1){let j=!1,$=!1;const W={},te={};for(const ae of this._mergedOrder){const de=this._mergedLayers[ae];if(de.type!=="symbol")continue;const Te=n.C(de.source,de.scope);let ve=W[Te];if(!ve){const Ve=this.getLayerSourceCache(de);if(!Ve)continue;const Be=Ve.getRenderableIds(!0).map(et=>Ve.getTileByID(et));te[Te]=Be.slice(),ve=W[Te]=Be.sort((et,Je)=>Je.tileID.overscaledZ-et.tileID.overscaledZ||(et.tileID.isLessThan(Je.tileID)?-1:1))}const Ee=this.crossTileSymbolIndex.addLayer(de,ve,c.center.lng,c.projection);j=j||Ee}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder),L=L||this._layerOrderChanged||R===0,this._layerOrderChanged&&this.fire(new n.A("neworder")),(L||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(n.q.now(),c.zoom))&&(this.pauseablePlacement=new Sn(c,this._mergedOrder,L,A,R,C,this.placement,this.fog&&c.projection.supportsFog?this.fog.state:null,this._buildingIndex),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,W,te,this.map.painter.scaleFactor),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(n.q.now()),$=!0),j&&this.pauseablePlacement.placement.setStale()),$||j){this._buildingIndex.onNewFrame(c.zoom);for(let ae=0;ae<this._mergedOrder.length;ae++){const de=this._mergedLayers[this._mergedOrder[ae]];if(de.type!=="symbol")continue;const Te=this.isLayerClipped(de);this.placement.updateLayerOpacities(de,W[n.C(de.source,de.scope)],ae,Te?E:null)}}return{needsRerender:!this.pauseablePlacement.isDone()||this.placement.hasTransitions(n.q.now())}}_releaseSymbolFadeTiles(){for(const o in this._sourceCaches)this._sourceCaches[o].releaseSymbolFadeTiles()}addImport(o,c){this._checkLoaded();const A=this.stylesheet.imports=this.stylesheet.imports||[];if(A.findIndex(({id:C})=>C===o.id)!==-1)return void this.fire(new n.z(new Error(`Import with id '${o.id}' already exists in the map's style.`)));if(!c)return A.push(o),this._loadImports([o],!0);const R=A.findIndex(({id:C})=>C===c);return R===-1&&this.fire(new n.z(new Error(`Import with id "${c}" does not exist on this map.`))),this.stylesheet.imports=A.slice(0,R).concat(o).concat(A.slice(R)),this._loadImports([o],!0,c)}updateImport(o,c){this._checkLoaded();const A=this.stylesheet.imports||[],R=this.getImportIndex(o);return R===-1?this:typeof c=="string"?(this.setImportUrl(o,c),this):(c.url&&c.url!==A[R].url&&this.setImportUrl(o,c.url),n.bn(c.config,A[R].config)||this.setImportConfig(o,c.config,c.data.schema),n.bn(c.data,A[R].data)||this.setImportData(o,c.data),this)}moveImport(o,c){this._checkLoaded();let A=this.stylesheet.imports||[];const R=this.getImportIndex(o);if(R===-1)return this;const C=this.getImportIndex(c);if(C===-1)return this;const E=A[R],L=this.fragments[R];return A=A.filter(({id:j})=>j!==o),this.fragments=this.fragments.filter(({id:j})=>j!==o),this.stylesheet.imports=A.slice(0,C).concat(E).concat(A.slice(C)),this.fragments=this.fragments.slice(0,C).concat(L).concat(this.fragments.slice(C)),this.mergeLayers(),this}setImportUrl(o,c){this._checkLoaded();const A=this.stylesheet.imports||[],R=this.getImportIndex(o);if(R===-1)return this;A[R].url=c;const C=this.fragments[R];return C.style=this._createFragmentStyle(A[R]),C.style.on("style.import.load",()=>this.mergeAll()),C.style.loadURL(c),this}setImportData(o,c){this._checkLoaded();const A=this.getImportIndex(o),R=this.stylesheet.imports||[];return A===-1?this:c?(this.fragments[A].style.setState(c),this._reloadImports(),this):(delete R[A].data,this.setImportUrl(o,R[A].url))}setImportConfig(o,c,A){this._checkLoaded();const R=this.getImportIndex(o),C=this.stylesheet.imports||[];if(R===-1)return this;c?C[R].config=c:delete C[R].config;const E=this.fragments[R];A&&E.style.stylesheet&&(E.style.stylesheet.schema=A);const L=E.style.stylesheet&&E.style.stylesheet.schema;return E.config=c,E.style.updateConfig(c,L),this.updateConfigDependencies(),this}removeImport(o){this._checkLoaded();const c=this.stylesheet.imports||[],A=this.getImportIndex(o);A!==-1&&(c.splice(A,1),this.fragments[A].style._remove(),this.fragments.splice(A,1),this._reloadImports())}getImportIndex(o){const c=(this.stylesheet.imports||[]).findIndex(A=>A.id===o);return c===-1&&this.fire(new n.z(new Error(`Import '${o}' does not exist in the map's style and cannot be updated.`))),c}getLayer(o){return this._mergedLayers[o]}getSources(){const o=[];for(const c in this._mergedOtherSourceCaches){const A=this._mergedOtherSourceCaches[c];A&&o.push(A.getSource())}return o}getSource(o,c){const A=this.getSourceCache(o,c);return A&&A.getSource()}getLayerSource(o){const c=this.getLayerSourceCache(o);return c&&c.getSource()}getSourceCache(o,c){const A=n.C(o,c);return this._mergedOtherSourceCaches[A]}getLayerSourceCache(o){const c=n.C(o.source,o.scope);return o.type==="symbol"?this._mergedSymbolSourceCaches[c]:this._mergedOtherSourceCaches[c]}getSourceCaches(o){if(o==null)return Object.values(this._mergedSourceCaches);const c=[];return this._mergedOtherSourceCaches[o]&&c.push(this._mergedOtherSourceCaches[o]),this._mergedSymbolSourceCaches[o]&&c.push(this._mergedSymbolSourceCaches[o]),c}updateSourceCaches(){const o=this._changes.getUpdatedSourceCaches();for(const c in o){const A=o[c];A==="reload"?this.reloadSource(c):A==="clear"&&this.clearSource(c)}}updateLayers(o){const c=this._changes.getUpdatedPaintProperties();for(const A of c){const R=this.getLayer(A);R&&R.updateTransitions(o)}}getGlyphsUrl(){return this.stylesheet.glyphs}setGlyphsUrl(o){this.stylesheet.glyphs=o,this.glyphManager.setURL(o,this.scope)}getImages(o,c,A){this.imageManager.getImages(c.images,c.scope,A),this._updateTilesForChangedImages();const R=E=>{if(E){const L=c.images.map(j=>n.I.toString(j));E.setDependencies(c.tileID.key,c.type,L)}},C=n.C(c.source,c.scope);R(this._mergedOtherSourceCaches[C]),R(this._mergedSymbolSourceCaches[C])}rasterizeImages(o,c,A){this.imageManager.rasterizeImages(c,A)}getGlyphs(o,c,A){this.glyphManager.getGlyphs(c.stacks,c.scope,A)}getResource(o,c,A){return n.cz(c,A)}getOwnSourceCache(o){return this._otherSourceCaches[o]}getOwnLayerSourceCache(o){return o.type==="symbol"?this._symbolSourceCaches[o.source]:this._otherSourceCaches[o.source]}getOwnSourceCaches(o){const c=[];return this._otherSourceCaches[o]&&c.push(this._otherSourceCaches[o]),this._symbolSourceCaches[o]&&c.push(this._symbolSourceCaches[o]),c}_isSourceCacheLoaded(o){const c=this.getOwnSourceCaches(o);return c.length===0?(this.fire(new n.z(new Error(`There is no source with ID '${o}'`))),!1):c.every(A=>A.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}isLayerClipped(o,c){if(!this._clipLayerPresent&&o.type!=="fill-extrusion")return!1;const A=o.type==="fill-extrusion"&&o.sourceLayer==="building";if(o.is3D(!!this.terrain)){if(A||c&&c.type==="batched-model"||o.type==="model")return!0}else if(o.type==="symbol")return!0;return!1}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.fragments.forEach(o=>{o.style._remove()}),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}eo.getSourceType=function(g){return ql[g]},eo.setSourceType=function(g,o){ql[g]=o},eo.registerForPluginStateChange=n.ci;var Lc=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#ifdef RENDER_CUTOFF
float cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}
#endif`,pc=`
out vec4 glFragColor;highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#ifdef INDICATOR_CUTOUT
uniform vec3 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;
#endif
vec4 applyCutout(vec4 color,float height) {
#ifdef INDICATOR_CUTOUT
float verticalFadeRange=u_indicator_cutout_centers.z*0.25;float holeMinOpacity=mix(1.0,u_indicator_cutout_params.x,smoothstep(u_indicator_cutout_centers.z,u_indicator_cutout_centers.z+verticalFadeRange,height));float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);
#else
return color;
#endif
}
#ifdef DEBUG_WIREFRAME
#define HANDLE_WIREFRAME_DEBUG \\
glFragColor=vec4(0.7,0.0,0.0,0.7); \\
gl_FragDepth=gl_FragCoord.z-0.0001;
#else
#define HANDLE_WIREFRAME_DEBUG
#endif
#ifdef RENDER_CUTOFF
uniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;
#endif
vec4 textureLodCustom(sampler2D image,highp vec2 pos,highp vec2 lod_coord) {highp vec2 size=vec2(textureSize(image,0));highp vec2 dx=dFdx(lod_coord.xy*size);highp vec2 dy=dFdy(lod_coord.xy*size);highp float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));highp float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}vec4 applyLUT(highp sampler3D lut,vec4 col) {vec3 size=vec3(textureSize(lut,0));vec3 uvw=(col.rbg*float(size-1.0)+0.5)/size;return vec4(texture(lut,uvw).rgb,col.a);}vec3 applyLUT(highp sampler3D lut,vec3 col) {return applyLUT(lut,vec4(col,1.0)).rgb;}`,wu=`
#define EXTENT 8192.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const vec2 units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (units_to_pixels*pos+offset)/pattern_size;}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {return get_pattern_pos(pixel_coord_upper,pixel_coord_lower,pattern_size,vec2(tile_units_to_pixels),pos);}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}
#ifdef RENDER_CUTOFF
uniform vec4 u_cutoff_params;out float v_cutoff_opacity;
#endif
const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}`,Fc="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Ru=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
vec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }
#endif
#ifdef DEPTH_OCCLUSION
uniform highp sampler2D u_depth;uniform highp vec2 u_depth_size_inv;uniform highp vec2 u_depth_range_unpack;uniform highp float u_occluder_half_size;uniform highp float u_occlusion_depth_offset;
#ifdef DEPTH_D24
float unpack_depth(float depth) {return depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}vec4 unpack_depth4(vec4 depth) {return depth*u_depth_range_unpack.x+vec4(u_depth_range_unpack.y);}
#else
highp float unpack_depth_rgba(vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;
#ifdef DEPTH_D24
float depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5).r);
#else
float depth=unpack_depth_rgba(texture(u_depth,(coord.xy+1.0)*0.5));
#endif
return coord.z+u_occlusion_depth_offset > depth;}highp vec4 getCornerDepths(vec2 coord) {highp vec3 df=vec3(u_occluder_half_size*u_depth_size_inv,0.0);highp vec2 uv=0.5*coord.xy+0.5;
#ifdef DEPTH_D24
highp vec4 depth=vec4(
texture(u_depth,uv-df.xz).r,texture(u_depth,uv+df.xz).r,texture(u_depth,uv-df.zy).r,texture(u_depth,uv+df.zy).r
);depth=unpack_depth4(depth);
#else
highp vec4 depth=vec4(
unpack_depth_rgba(texture(u_depth,uv-df.xz)),unpack_depth_rgba(texture(u_depth,uv+df.xz)),unpack_depth_rgba(texture(u_depth,uv-df.zy)),unpack_depth_rgba(texture(u_depth,uv+df.zy))
);
#endif
return depth;}highp float occlusionFadeMultiSample(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec2 uv=0.5*coord.xy+0.5;int NX=3;int NY=4;highp vec2 df=u_occluder_half_size*u_depth_size_inv;highp vec2 oneStep=2.0*u_occluder_half_size*u_depth_size_inv/vec2(NX-1,NY-1);highp float res=0.0;for (int y=0; y < NY;++y) {for (int x=0; x < NX;++x) {
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)));
#endif
res+=1.0-clamp(300.0*(coord.z+u_occlusion_depth_offset-depth),0.0,1.0);}}res=clamp(2.0*res/float(NX*NY)-0.5,0.0,1.0);return res;}highp float occlusionFade(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec4 depth=getCornerDepths(coord.xy);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z+u_occlusion_depth_offset)-depth),0.0,1.0));}
#else
bool isOccluded(vec4 frag) { return false; }highp float occlusionFade(vec4 frag) { return 1.0; }highp float occlusionFadeMultiSample(vec4 frag) { return 1.0; }
#endif//DEPTH_OCCLUSION`,Uc=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,mc=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {return color;}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,ju=`#ifdef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);ivec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image0,c.yz,0),texelFetch(u_image0,c.xz,0),texelFetch(u_image0,c.yw,0),texelFetch(u_image0,c.xw,0)
);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image1,c.yz,0),texelFetch(u_image1,c.xz,0),texelFetch(u_image1,c.yw,0),texelFetch(u_image1,c.xw,0)
);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image0,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image1,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}
#endif`,Bo=`#ifdef RASTER_ARRAY
uniform sampler2D u_velocity;uniform mediump vec2 u_velocity_res;uniform mediump float u_max_speed;const vec4 NO_DATA=vec4(1);const vec2 INVALID_VELOCITY=vec2(-1);uniform highp vec2 u_uv_offset;uniform highp float u_data_offset;uniform highp vec2 u_data_scale;ivec4 rasterArrayLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}highp vec2 lookup_velocity(highp vec2 uv) {uv=u_uv_offset.x+u_uv_offset.y*uv;highp vec2 fxy;ivec4 c=rasterArrayLinearCoord(uv,u_velocity_res,fxy);highp vec4 tl=texelFetch(u_velocity,c.yz,0);highp vec4 tr=texelFetch(u_velocity,c.xz,0);highp vec4 bl=texelFetch(u_velocity,c.yw,0);highp vec4 br=texelFetch(u_velocity,c.xw,0);if (tl==NO_DATA) {return INVALID_VELOCITY;}if (tr==NO_DATA) {return INVALID_VELOCITY;}if (bl==NO_DATA) {return INVALID_VELOCITY;}if (br==NO_DATA) {return INVALID_VELOCITY;}highp vec4 t=mix(mix(bl,br,fxy.x),mix(tl,tr,fxy.x),fxy.y);highp vec2 velocity=u_data_offset+vec2(dot(t.rg,u_data_scale),dot(t.ba,u_data_scale));velocity.y=-velocity.y;velocity/=max(u_max_speed,length(velocity));return velocity;}
#endif
uniform highp float u_particle_pos_scale;uniform highp vec2 u_particle_pos_offset;highp vec4 pack_pos_to_rgba(highp vec2 p) {highp vec2 v=(p+u_particle_pos_offset)/u_particle_pos_scale;highp vec4 r=vec4(v.x,fract(v.x*255.0),v.y,fract(v.y*255.0));return vec4(r.x-r.y/255.0,r.y,r.z-r.w/255.0,r.w);}highp vec2 unpack_pos_from_rgba(highp vec4 v) {v=floor(v*255.0+0.5)/255.0;highp vec2 p=vec2(v.x+(v.y/255.0),v.z+(v.w/255.0));return u_particle_pos_scale*p-u_particle_pos_offset;}`,cs=`#ifdef RENDER_SHADOWS
uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {vec3 transformed_normal=vec3(-normal.xy,normal.z);float NDotL=dot(normalize(transformed_normal),u_shadow_direction);float dotScale=min(1.0-NDotL,1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}
#endif//RENDER_SHADOWS`,Xn=`#ifdef RENDER_SHADOWS
#ifdef DEPTH_TEXTURE
uniform highp sampler2D u_shadowmap_0;uniform highp sampler2D u_shadowmap_1;
#else
uniform sampler2D u_shadowmap_0;uniform sampler2D u_shadowmap_1;
#endif
uniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;highp float shadow_sample_1(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_1,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_1,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}highp float shadow_sample_0(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_0,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_0,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}float shadow_occlusion_1(highp vec4 pos,highp float bias) {highp vec2 uv=pos.xy;return shadow_sample_1(uv,pos.z-bias);}float shadow_occlusion_0(highp vec4 pos,highp float bias) {highp float compare0=pos.z-bias;
#ifdef TEXTURE_GATHER
highp vec2 uv=pos.xy;highp vec4 samples=textureGather(u_shadowmap_0,uv,0);lowp vec4 stepSamples=step(samples,vec4(compare0));
#else
highp vec2 uv00=pos.xy-vec2(0.5*u_shadow_texel_size);highp vec2 uv10=uv00+vec2(u_shadow_texel_size,0.0);highp vec2 uv01=uv00+vec2(0.0,u_shadow_texel_size);highp vec2 uv11=uv01+vec2(u_shadow_texel_size,0.0);lowp vec4 stepSamples=vec4(
shadow_sample_0(uv01,compare0),shadow_sample_0(uv11,compare0),shadow_sample_0(uv10,compare0),shadow_sample_0(uv00,compare0)
);
#endif
vec2 f=fract(pos.xy*u_shadow_map_resolution-vec2(0.5));lowp vec2 lerpx=mix(stepSamples.wx,stepSamples.zy,f.xx);return clamp(mix(lerpx.x,lerpx.y,f.y),0.0,1.0);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {
#ifdef SHADOWS_SINGLE_CASCADE
light_view_pos0.xyz/=light_view_pos0.w;vec2 abs_bounds=abs(light_view_pos0.xy);if (abs_bounds.x >=1.0 || abs_bounds.y >=1.0) {return 0.0;}light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);
#else
light_view_pos0.xyz/=light_view_pos0.w;light_view_pos1.xyz/=light_view_pos1.w;vec4 uv=vec4(light_view_pos0.xy,light_view_pos1.xy);vec4 abs_bounds=abs(uv);if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}light_view_pos1.xyz=light_view_pos1.xyz*0.5+0.5;float occlusion1=shadow_occlusion_1(light_view_pos1,bias);return clamp(mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth)),0.0,1.0);
#endif
}highp float calculate_shadow_bias(float NDotL) {
#ifdef NORMAL_OFFSET
return 0.5*u_shadow_bias.x;
#else
return 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));
#endif
}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_opacity(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,float shadow_opacity) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias)*shadow_opacity;return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}highp vec2 compute_receiver_plane_depth_bias(highp vec3 pos_dx,highp vec3 pos_dy)
{highp vec2 biasUV=vec2(
pos_dy.y*pos_dx.z-pos_dx.y*pos_dy.z,pos_dx.x*pos_dy.z-pos_dy.x*pos_dx.z);biasUV*=1.0/((pos_dx.x*pos_dy.y)-(pos_dx.y*pos_dy.x));return biasUV;}float shadowed_light_factor_plane_bias(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {highp vec3 light_view_pos0_xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;highp vec3 light_view_pos0_ddx=dFdx(light_view_pos0_xyz);highp vec3 light_view_pos0_ddy=dFdy(light_view_pos0_xyz);highp vec2 plane_depth_bias=compute_receiver_plane_depth_bias(light_view_pos0_ddx,light_view_pos0_ddy);highp float bias=dot(vec2(u_shadow_texel_size,u_shadow_texel_size),plane_depth_bias)+0.0001;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}
#endif`;const ai=[];tu(Lc,ai),tu(wu,ai),tu(pc,ai);const qi={"_prelude_fog.vertex.glsl":Uc,"_prelude_terrain.vertex.glsl":Ru,"_prelude_shadow.vertex.glsl":cs,"_prelude_fog.fragment.glsl":mc,"_prelude_shadow.fragment.glsl":Xn,"_prelude_lighting.glsl":`
#ifdef LIGHTING_3D_MODE
uniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}
#endif//LIGHTING_3D_MODE`,"_prelude_raster_array.glsl":ju,"_prelude_raster_particle.glsl":Bo},is={};tn("",Ru),tn(mc,Uc),tn(Xn,cs),tn(ju,""),tn(Bo,"");const eu=tn(pc,wu),kc=Lc;var Qo={background:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
in vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_lighting.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform mediump vec4 u_color;out vec4 v_color;uniform float u_emissive_strength;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in highp vec2 v_pos;void main() {highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec2 u_pattern_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_pattern_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float blur_positive=blur < 0.0 ? 0.0 : 1.0;lowp float antialiasblur=v_data.z;float extrude_length=length(extrude)+antialiasblur*(1.0-blur_positive);float antialiased_blur=-max(abs(blur),antialiasblur);float antialiase_blur_opacity=smoothstep(0.0,antialiasblur,extrude_length-1.0);float opacity_t=blur_positive==1.0 ? 
smoothstep(0.0,-antialiased_blur,1.0-extrude_length) : 
smoothstep(antialiased_blur,0.0,extrude_length-1.0)-antialiase_blur_opacity;float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
glFragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
#ifdef ELEVATED_ROADS
in float a_circle_z_offset;
#endif
out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
#ifdef ELEVATED_ROADS
world_center.z+=a_circle_z_offset+ELEVATION_BIAS;
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:tn("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:tn(`#include "_prelude_fog.fragment.glsl"
uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:tn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(0.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,"in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:tn("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`#include "_prelude_terrain.vertex.glsl"
in vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in vec2 a_elevation_from_sea;in float a_size_scale;in vec2 a_padding;in float a_auto_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;out float v_placed;out float v_notUsed;void main() {float feature_elevation=a_elevation_from_sea.x+a_auto_z_offset;float terrain_elevation=(a_elevation_from_sea.y==1.0 ? 0.0 : elevation(a_anchor_pos));vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*(feature_elevation+terrain_elevation),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:tn("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}",`in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:tn("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",`#include "_prelude_terrain.vertex.glsl"
in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;
#endif
out vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),elevatedStructuresDepth:tn(`void main() {
#ifndef DEPTH_TEXTURE
glFragColor=vec4(0.);
#endif
}`,"in vec2 a_pos;in float a_height;uniform mat4 u_matrix;uniform float u_depth_bias;void main() {gl_Position=u_matrix*vec4(a_pos,a_height,1);gl_Position.z=gl_Position.z+u_depth_bias;}"),elevatedStructuresDepthReconstruct:tn(`#ifdef DEPTH_RECONSTRUCTION
in float v_height;
#endif
void main() {
#ifdef DEPTH_RECONSTRUCTION
if (v_height >=0.0)
discard;
#endif
glFragColor=vec4(1.0,0.0,0.0,1.0);}`,`in vec2 a_pos;in float a_height;uniform mat4 u_matrix;uniform vec3 u_camera_pos;uniform highp float u_depth_bias;uniform lowp float u_height_scale;uniform lowp float u_reset_depth;
#ifdef DEPTH_RECONSTRUCTION
out float v_height;
#endif
void main() {vec3 vpos=vec3(a_pos,a_height*u_height_scale);
#ifdef DEPTH_RECONSTRUCTION
if (u_camera_pos.z > vpos.z) {vpos-=(u_camera_pos-vpos)*(vpos.z/(u_camera_pos.z-vpos.z));}v_height=a_height;
#endif
gl_Position=u_matrix*vec4(vpos,1);gl_Position.z=u_reset_depth==1.0 ? gl_Position.w : gl_Position.z+u_depth_bias;}`),elevatedStructures:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
in vec3 v_normal;in float v_height;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth;
#endif
void main() {vec3 color=vec3(241.0/255.0,236.0/255.0,225.0/255.0);
#ifdef LIGHTING_3D_MODE
vec3 normal=normalize(v_normal);
#ifdef RENDER_SHADOWS
float shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,v_depth);color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#else
color=apply_lighting(color,normal);
#endif
if (v_height < 0.0) {float penetration=max(v_height+7.5,0.0);float occlusion=1.0-1.0/PI*acos(1.0-penetration/4.0);color=color*(1.0-pow(occlusion,2.0)*0.3);}
#endif
#ifdef FOG
color=fog_apply(color,v_fog_pos);
#endif
vec4 out_color=vec4(color,1.0);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_height);
#endif
glFragColor=out_color;HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;in float a_height;in vec3 a_pos_normal_3;uniform mat4 u_matrix;out vec3 v_normal;out float v_height;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {v_normal=a_pos_normal_3/16384.0;v_height=a_height;vec3 pos=vec3(a_pos,a_height);gl_Position=u_matrix*vec4(pos,1);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(v_normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fill:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=opacity;
#ifdef INDICATOR_CUTOUT
if (v_z_offset >=0.0) {out_color=applyCutout(out_color,v_z_offset);}
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=z_offset;
#endif
}`),fillOutline:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
uniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
in highp vec2 v_pos;in highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;out highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in vec4 v_flat;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;
#endif
uniform lowp float u_opacity;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec2 v_ao;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
in vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
in highp vec3 v_normal;
#endif
uniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
in float v_flood_radius;in float v_has_floodlight;
#endif
in float v_height;
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float emissive_strength
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
vec3 normal=normalize(v_normal);
#endif
float z;vec4 color=v_color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);
#ifdef LIGHTING_3D_MODE
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#else
color=mix(v_color,v_roof_color,z);
#endif
#endif
float h=max(0.0,v_height);float ao_shade=1.0;
#ifdef FAUX_AO
float intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
color.rgb*=mix(ao_shade,1.0,v_has_floodlight);
#else
color.rgb*=ao_shade;
#endif
#else
color.rgb*=ao_shade;
#endif
#endif
#ifdef LIGHTING_3D_MODE
float flood_radiance=0.0;
#ifdef FLOOD_LIGHT
flood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;
#endif
#ifdef RENDER_SHADOWS
#ifdef FLOOD_LIGHT
float ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);
#else
float shadowed_lighting_factor;
#ifdef RENDER_CUTOFF
shadowed_lighting_factor=shadowed_light_factor_normal_opacity(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,v_cutoff_opacity);if (v_cutoff_opacity==0.0) {discard;}
#else
shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);
#endif
color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#endif
#else
color.rgb=apply_lighting(color.rgb,normal);
#ifdef FLOOD_LIGHT
color.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);
#endif
#endif
color.rgb=mix(color.rgb,v_flat.rgb,emissive_strength);color*=u_opacity;
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,h);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;uniform float u_width_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
uniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
out vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
out highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec2 v_ao;
#endif
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
out float v_flood_radius;out float v_has_floodlight;
#endif
out float v_height;vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define highp float flood_light_wall_radius
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize highp float flood_light_wall_radius
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp float emissive_strength
base*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
v_normal=normal;
#endif
base=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float cutoff=1.0;vec3 scaled_pos=pos;
#ifdef RENDER_CUTOFF
vec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);cutoff=cutoff_opacity(u_cutoff_params,ground.z);if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;v_cutoff_opacity=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff==0.0 && centroid_pos.x !=0.0) || (color.a==0.0));
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);scaled_pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;scaled_pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
gl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifndef LIGHTING_3D_MODE
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#endif
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
float is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;
#endif
v_color=vec4(color.rgb,1.0);float ndotl=calculate_NdotL(normal);v_flat.rgb=sRGBToLinear(color.rgb);v_flat.rgb=v_flat.rgb*(ndotl+(1.0-min(ndotl*57.29,1.0))*emissive_strength);v_flat=vec4(linearTosRGB(v_flat.rgb),1.0);
#else
v_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionDepth:tn(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_width_scale;uniform float u_vertical_scale;
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp vec4 color
out highp float v_depth;void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp vec4 color
base*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;float ele=elevation(pos_nx.xy);float c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);float h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}`),fillExtrusionPattern:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
in vec3 v_normal;
#endif
in highp vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,height);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_width_scale;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
out highp vec2 v_pos;out vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
out vec3 v_normal;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
#pragma mapbox: define highp float line_width
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
#pragma mapbox: initialize highp float line_width
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);p.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;p.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_normal=normal;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),groundShadow:tn(`#include "_prelude_shadow.fragment.glsl"
precision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#ifdef FOG
in float v_fog_opacity;
#endif
void main() {float light=shadowed_light_factor_plane_bias(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);
#ifdef RENDER_CUTOFF
shadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w));
#endif
#ifdef FOG
shadow=mix(shadow,vec3(1.0),v_fog_opacity);
#endif
#ifdef INDICATOR_CUTOUT
shadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0),0.0).r);
#endif
glFragColor=vec4(shadow,1.0);}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;
#ifdef FOG
out float v_fog_opacity;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);
#ifdef FOG
v_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);
#endif
}`),fillExtrusionGroundEffect:tn(`uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;
#ifdef SDF_SUBPASS
in highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}
#ifdef FOG
in highp float v_fog;
#endif
#endif
void main() {
#ifdef CLEAR_SUBPASS
vec4 color=vec4(1.0);
#ifdef CLEAR_FROM_TEXTURE
color=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));
#endif
glFragColor=color;
#else
#ifdef SDF_SUBPASS
highp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;
#ifdef FOG
fog=v_fog;
#endif
#ifdef RENDER_CUTOFF
fog*=v_cutoff_opacity;
#endif
glFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));
#else
vec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);
#ifdef OVERDRAW_INSPECTOR
color=vec4(1.0);
#endif
glFragColor=color;
#endif
HANDLE_WIREFRAME_DEBUG;
#endif
}`,`#include "_prelude_fog.vertex.glsl"
in highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;
#ifdef SDF_SUBPASS
out highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;
#ifdef FOG
out highp float v_fog;
#endif
#endif
uniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp float u_dynamic_offset;uniform highp vec2 u_ao;
#pragma mapbox: define highp float flood_light_ground_radius
const float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {
#pragma mapbox: initialize highp float flood_light_ground_radius
vec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(u_dynamic_offset,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;
#ifdef SDF_SUBPASS
v_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);
#ifdef FOG
v_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);
#endif
#endif
float hidden_by_landmark=0.0;
#ifdef HAS_CENTROID
hidden_by_landmark=a_hidden_by_landmark;
#endif
float isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),hillshadePrepare:tn(`precision highp float;uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
glFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);
#endif
#ifdef FOG
glFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform lowp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_floor_width_scale;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec3 v_uv;
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;in vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float dist=length(v_normal)*v_width2.s;float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;float scaled_floorwidth=(floorwidth*u_floor_width_scale);alpha*=linearstep(0.5-sdfgamma/scaled_floorwidth,0.5+sdfgamma/scaled_floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trim_alpha=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=v_uv[2];if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);out_color=mix(out_color,u_trim_color,transition_factor);trim_alpha=1.0-transition_factor;}
#endif
if (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}
#ifdef RENDER_LINE_BORDER
float edgeBlur=((border_width*u_width_scale)+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color=mix(border_color*trim_alpha,out_color,smoothAlpha);}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
out_color.rgb*=mix(v_road_z_offset > 0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define EXTRUDE_SCALE 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS) || defined(VARIABLE_LINE_WIDTH)
in vec3 a_z_offset_width;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
in highp vec3 a_packed;
#endif
#ifdef RENDER_LINE_DASH
in float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;uniform float u_width_scale;uniform highp float u_floor_width_scale;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec3 v_uv;
#ifdef ELEVATED_ROADS
out highp float v_road_z_offset;
#endif
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float a_z_offset;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
a_z_offset=a_z_offset_width.x;
#endif
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth;
#ifdef VARIABLE_LINE_WIDTH
float left=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);halfwidth=(u_width_scale*(left==1.0 ? a_z_offset_width.y : a_z_offset_width.z))/2.0;
#else
halfwidth=(u_width_scale*width)/2.0;
#endif
offset=-1.0*offset*u_width_scale;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
v_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset,1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=max(length(projected_extrude_xy/gl_Position.w*u_units_to_pixels),0.001);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
highp float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float line_progress=a_packed[2];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec3(a_uv_x,a_split_index*texel_height-half_texel_height,line_progress);
#else
v_uv=vec3(a_uv_x,0.0,line_progress);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/(floorwidth*u_floor_width_scale),(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=a_z_offset;
#endif
}`),linePattern:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform highp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_alpha_discard_threshold;uniform highp vec2 u_texsize;uniform highp float u_tile_units_to_pixels;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in highp float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec3 v_uv;
#endif
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef LINE_JOIN_NONE
in vec2 v_pattern_data;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
uniform float u_emissive_strength;
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;highp float pattern_size=display_size.x/u_tile_units_to_pixels;float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);highp float pattern_x=v_linesofar/pattern_size*aspect;highp float x=mod(pattern_x,1.0);highp float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;highp vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));highp vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);
#ifdef RENDER_LINE_TRIM_OFFSET
highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=v_uv[2];if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);color=mix(color,color.a*u_trim_color,transition_factor);}
#endif
#ifdef LINE_JOIN_NONE
highp float pattern_len=pattern_size/aspect;highp float segment_phase=pattern_len-mod(v_linesofar-v_pattern_data.x+pattern_len,pattern_len);highp float visible_start=segment_phase-step(pattern_len*0.5,segment_phase)*pattern_len;highp float visible_end=floor((v_pattern_data.y-segment_phase)/pattern_len)*pattern_len+segment_phase;visible_end+=step(pattern_len*0.5,v_pattern_data.y-visible_end)*pattern_len;if (v_pattern_data.x < visible_start || v_pattern_data.x >=visible_end) {color=vec4(0.0);}
#endif
#ifdef LIGHTING_3D_MODE
color=apply_lighting_with_emission_ground(color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
color.rgb*=mix(v_road_z_offset > 0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=(alpha*opacity);if (u_alpha_discard_threshold !=0.0) {if (color.a < u_alpha_discard_threshold) {discard;}}
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,v_z_offset);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
in vec3 a_z_offset_width;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec3 a_packed;
#endif
in highp float a_linesofar;
#ifdef LINE_JOIN_NONE
in highp vec3 a_pattern_data;out vec2 v_pattern_data;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform mat4 u_matrix;uniform float u_tile_units_to_pixels;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform float u_device_pixel_ratio;uniform float u_width_scale;uniform float u_floor_width_scale;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out highp float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
out highp vec3 v_uv;
#endif
#ifdef ELEVATED_ROADS
out highp float v_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
#pragma mapbox: define mediump float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define mediump float floorwidth
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
void main() {
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
#pragma mapbox: initialize mediump float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize mediump float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
float a_z_offset;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
a_z_offset=a_z_offset_width.x;
#endif
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=(u_width_scale*width)/2.0;offset=-1.0*offset*u_width_scale;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);vec2 dist=outset*a_extrude*scale;float u=0.5*a_direction;float t=1.0-abs(u);vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
v_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset,1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude_xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
highp float a_uv_x=a_packed[0];highp float line_progress=a_packed[2];v_uv=vec3(a_uv_x,0.0,line_progress);
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=(floorwidth*u_floor_width_scale);
#ifdef LINE_JOIN_NONE
v_width=(floorwidth*u_floor_width_scale)+ANTIALIASING;mediump float pixels_to_tile_units=1.0/u_tile_units_to_pixels;mediump float pixel_ratio_inverse=1.0/pixel_ratio;mediump float aspect=v_width/((pattern.w-pattern.y)*pixel_ratio_inverse);highp float subt_multiple=(pattern.z-pattern.x)*pixel_ratio_inverse*pixels_to_tile_units*aspect*32.0;highp float subt=floor(a_pattern_data.z/subt_multiple)*subt_multiple;float offset_sign=(fract(a_pattern_data.x)-0.5)*4.0;float line_progress_offset=offset_sign*v_width*0.5*pixels_to_tile_units;v_linesofar=(a_pattern_data.z-subt)+a_linesofar+line_progress_offset;v_pattern_data=vec2(a_pattern_data.x+line_progress_offset,a_pattern_data.y);
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=a_z_offset;
#endif
}`),raster:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_raster_array.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;uniform highp float u_zoom_transition;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
in float v_split_fade;
#endif
uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;
#ifndef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;
#endif
#ifdef RASTER_COLOR
uniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;
#endif
void main() {vec4 color0,color1,color;vec2 value;
#ifdef RASTER_COLOR
#ifdef RASTER_ARRAY
#ifdef RASTER_ARRAY_LINEAR
value=mix(
raTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#else
value=mix(
raTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#endif
if (value.y > 0.0) value.x/=value.y;
#else
color=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);
#endif
color=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;
#else
color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);
#endif
color.a*=u_opacity;
#ifdef GLOBE_POLES
color.a*=1.0-smoothstep(0.0,0.05,u_zoom_transition);
#endif
vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef PROJECTION_GLOBE_VIEW
glFragColor*=mix(1.0,1.0-smoothstep(0.0,0.05,u_zoom_transition),smoothstep(0.8,0.9,v_split_fade));
#endif
#ifdef RENDER_CUTOFF
glFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;in vec2 a_texture_pos;
#endif
out vec2 v_pos0;out vec2 v_pos1;out float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
out float v_split_fade;
#endif
void main() {vec2 uv;
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);
#endif
#else
float w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);    
v_split_fade=0.0;if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;float opposite_merc_center=mod(u_merc_center.x+0.5,1.0);float dist_from_poles=(abs(mercatorY-0.5)*2.0);float range=0.1;v_split_fade=abs(opposite_merc_center-mercatorX);v_split_fade=clamp(1.0-v_split_fade,0.0,1.0);v_split_fade=max(smoothstep(1.0-range,1.0,dist_from_poles),max(smoothstep(1.0-range,1.0,v_split_fade),smoothstep(1.0-range,1.0,1.0-v_split_fade)));}float tiles=u_grid_matrix[0][2];if (tiles > 0.0) {float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvY=mercatorY*tiles-idy;float uvX=mercatorX*tiles-idx;uv=vec2(uvX,uvY);}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;
#ifdef RENDER_CUTOFF
v_depth=gl_Position.z;
#endif
}`),rasterParticle:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;uniform sampler2D u_image0;uniform sampler2D u_image1;void main() {vec4 color0,color1,color;color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 out_color=color.rgb;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),0.0).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {float w=1.0;vec2 uv;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvX=mercatorX*tiles-idx;float uvY=mercatorY*tiles-idy;uv=vec2(uvX,uvY);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
uv=a_texture_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),rasterParticleDraw:tn("uniform sampler2D u_color_ramp;in float v_particle_speed;void main() {glFragColor=texture(u_color_ramp,vec2(v_particle_speed,0.5));}",`#include "_prelude_raster_particle.glsl"
in float a_index;uniform sampler2D u_particle_texture;uniform float u_particle_texture_side_len;uniform vec2 u_tile_offset;out float v_particle_speed;void main() {ivec2 pixel_coord=ivec2(
mod(a_index,u_particle_texture_side_len),a_index/u_particle_texture_side_len);vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);vec2 pos=unpack_pos_from_rgba(pixel)+u_tile_offset;vec2 tex_coord=fract(pos);vec2 velocity=lookup_velocity(tex_coord);if (velocity==INVALID_VELOCITY) {gl_Position=AWAY;v_particle_speed=0.0;} else {gl_Position=vec4(2.0*pos-1.0,0,1);v_particle_speed=length(velocity);}gl_PointSize=1.0;}`),rasterParticleTexture:tn("uniform sampler2D u_texture;uniform float u_opacity;in vec2 v_tex_pos;void main() {vec4 color=texture(u_texture,v_tex_pos);glFragColor=vec4(floor(255.0*color*u_opacity)/255.0);}","in vec2 a_pos;out vec2 v_tex_pos;void main() {vec2 uv=0.5*a_pos+vec2(0.5);v_tex_pos=uv;gl_Position=vec4(a_pos,0.0,1.0);}"),rasterParticleUpdate:tn(`#include "_prelude_raster_particle.glsl"
uniform sampler2D u_particle_texture;uniform mediump float u_particle_texture_side_len;uniform mediump float u_speed_factor;uniform highp float u_reset_rate;uniform highp float u_rand_seed;in highp vec2 v_tex_coord;vec2 linearstep(vec2 edge0,vec2 edge1,vec2 x) {return  clamp((x-edge0)/(edge1-edge0),vec2(0),vec2(1));}const highp vec3 rand_constants=vec3(12.9898,78.233,4375.85453);highp float rand(const highp vec2 co) {highp float t=dot(rand_constants.xy,co);return fract(sin(t)*(rand_constants.z+t));}void main() {ivec2 pixel_coord=ivec2(v_tex_coord*u_particle_texture_side_len);highp vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);highp vec2 pos=unpack_pos_from_rgba(pixel);highp vec2 velocity=lookup_velocity(clamp(pos,0.0,1.0));highp vec2 dp=velocity==INVALID_VELOCITY ? vec2(0) : velocity*u_speed_factor;pos=pos+dp;highp vec2 seed=(pos+v_tex_coord)*u_rand_seed;highp vec2 random_pos=vec2(rand(seed+1.3),rand(seed+2.1));highp vec2 persist_rate=pow(
linearstep(vec2(-u_particle_pos_offset),vec2(0),pos)*linearstep(vec2(1.0+u_particle_pos_offset),vec2(1),pos),vec2(4)
);highp vec2 per_frame_persist=pow(persist_rate,abs(dp)/u_particle_pos_offset);highp float drop_rate=1.0-per_frame_persist.x*per_frame_persist.y;drop_rate=any(greaterThanEqual(abs(pos-0.5),vec2(0.5+u_particle_pos_offset))) ? 1.0 : drop_rate;highp float drop=step(1.0-drop_rate-u_reset_rate,rand(seed));highp vec2 next_pos=mix(pos,random_pos,drop);glFragColor=pack_pos_to_rgba(next_pos);}`,"in vec2 a_pos;out vec2 v_tex_coord;void main() {v_tex_coord=0.5*(a_pos+vec2(1.0));gl_Position=vec4(a_pos,0.0,1.0);}"),symbol:tn(`#include "_prelude_lighting.glsl"
#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;uniform lowp float u_scale_factor;
#ifdef ICON_TRANSITION
uniform float u_icon_transition;
#endif
#ifdef COLOR_ADJUSTMENT
uniform mat4 u_color_adj_mat;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
in vec2 v_tex_a;
#ifdef ICON_TRANSITION
in vec2 v_tex_b;
#endif
in float v_draw_halo;in vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
in float is_sdf;in vec2 v_tex_a_icon;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec4 out_color;float fade_opacity=v_gamma_scale_size_fade_opacity[2];
#ifdef RENDER_TEXT_AND_SYMBOL
if (is_sdf==ICON) {vec2 tex_icon=v_tex_a_icon;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
return;}
#endif
#ifdef RENDER_SDF
float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_gamma_scale_size_fade_opacity.x;float size=v_gamma_scale_size_fade_opacity.y;float fontScale=u_is_text ? size/24.0 : size;out_color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {out_color=halo_color;gamma=(halo_blur*u_scale_factor*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width*u_scale_factor/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,v_tex_a).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);out_color*=alpha;
#else
#ifdef ICON_TRANSITION
vec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b);
#else
out_color=texture(u_texture,v_tex_a);
#endif
#ifdef COLOR_ADJUSTMENT
out_color=u_color_adj_mat*out_color;
#endif
#endif
out_color*=opacity*fade_opacity;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_auto_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
#ifdef ICON_TRANSITION
in vec2 a_texb;
#endif
#ifdef OCCLUSION_QUERIES
in float a_occlusion_query_opacity;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_elevation_from_sea;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out vec2 v_tex_a;
#ifdef ICON_TRANSITION
out vec2 v_tex_b;
#endif
out float v_draw_halo;out vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
out float is_sdf;out vec2 v_tex_a_icon;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
#pragma mapbox: define lowp float occlusion_opacity
#pragma mapbox: define lowp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
#pragma mapbox: initialize lowp float occlusion_opacity
#pragma mapbox: initialize lowp float z_offset
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=u_elevation_from_sea ? z_offset : z_offset+elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_auto_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;vec3 world_pos_globe;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos_globe=a_globe_anchor+h;world_pos=mix_globe_mercator(world_pos_globe,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;vec2 a;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);vec4 projected_point_globe=u_matrix*vec4(world_pos_globe,1);a=projected_point_globe.xy/projected_point_globe.w;
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);a=projected_point.xy/projected_point.w;
#endif
vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
#ifdef PROJECTED_POS_ON_VIEWPORT
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xyz+h,1.0);
#else
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz,mercator_pos,u_zoom_transition)+h;projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);    
#endif
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
#ifdef Z_OFFSET
z+=u_pitch_with_map ? a_auto_z_offset+(u_elevation_from_sea ? z_offset : z_offset) : 0.0;
#else
z+=u_pitch_with_map ? (u_elevation_from_sea ? z_offset : z_offset) : 0.0;
#endif
float occlusion_fade=globe_occlusion_fade;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float out_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));
#ifdef DEPTH_OCCLUSION
float depth_occlusion=occlusionFadeMultiSample(projected_point);float depth_occlusion_multplier=mix(occlusion_opacity,1.0,depth_occlusion);out_fade_opacity*=depth_occlusion_multplier;
#endif
#ifdef OCCLUSION_QUERIES
float occludedFadeMultiplier=mix(occlusion_opacity,1.0,a_occlusion_query_opacity);out_fade_opacity*=occludedFadeMultiplier;
#endif
float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_gamma_scale_size_fade_opacity=vec3(gamma_scale,size,out_fade_opacity);v_tex_a=a_tex/u_texsize;
#ifdef RENDER_TEXT_AND_SYMBOL
is_sdf=a_size[0]-2.0*a_size_min;v_tex_a_icon=a_tex/u_texsize_icon;
#endif
#ifdef ICON_TRANSITION
v_tex_b=a_texb/u_texsize;
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=e;
#endif
}`),terrainRaster:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;in vec2 v_pos0;
#ifdef FOG
in float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#endif
uniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;
#ifdef LIGHTING_3D_MODE
const vec3 normal=vec3(0.0,0.0,1.0);
#ifdef RENDER_SHADOWS
float cutoffOpacity=1.0;
#ifdef RENDER_CUTOFF
cutoffOpacity=cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w);
#endif
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
vec3 unlit_base=image_color.rgb*(1.0-image_color.a);vec3 emissive_base=image_color.rgb*image_color.a;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;
#else
float lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));
#endif
#else
float lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color.rgb=mix(color.rgb,image_color.rgb,image_color.a);color.a=1.0;
#endif
#endif
#else
color=image_color;
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;
#ifdef FOG
out float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);
#endif
}`),terrainDepth:tn("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}`),skybox:tn(`#include "_prelude_fog.fragment.glsl"
in lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,Fc),skyboxGradient:tn(`#include "_prelude_fog.fragment.glsl"
in highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,Fc),skyboxCapture:tn(`
in highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}`,"in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;uniform float u_far_z_cutoff;in vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;highp float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);highp float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
raster=apply_lighting_with_emission_ground(raster,raster.a);color=vec4(clamp(raster.rgb,vec3(0),vec3(1))*antialias,antialias);
#else
raster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color=apply_lighting_with_emission_ground(color,color.a);color.a=1.0;
#else
color=apply_lighting_ground(color);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=1.0-step(u_far_z_cutoff,1.0/gl_FragCoord.w);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;
#endif
out vec2 v_pos0;void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:tn(`#include "_prelude_fog.fragment.glsl"
uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {
#ifdef ALPHA_PASS
glFragColor=vec4(0,0,0,0);return;
#else
#ifdef NATIVE
glFragColor=vec4(1,1,1,1);
#else
glFragColor=vec4(0,0,0,1);
#endif
return;
#endif
}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;
#ifdef ALPHA_PASS
float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);
#else
vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;glFragColor=vec4(c*t,t);
#endif
}`,`in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`),model:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_opacity;uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
#ifdef OCCLUSION_TEXTURE_TRANSFORM
uniform vec4 u_occlusionTextureTransform;
#endif
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#ifdef HAS_ATTRIBUTE_a_pbr
in lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;
#endif
#ifdef HAS_TEXTURE_u_baseColorTexture
uniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;
#endif
#ifdef HAS_TEXTURE_u_metallicRoughnessTexture
uniform sampler2D u_metallicRoughnessTexture;
#endif
#ifdef HAS_TEXTURE_u_occlusionTexture
uniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;
#endif
#ifdef HAS_TEXTURE_u_normalTexture
uniform sampler2D u_normalTexture;
#endif
#ifdef HAS_TEXTURE_u_emissionTexture
uniform sampler2D u_emissionTexture;
#endif
#ifdef APPLY_LUT_ON_GPU
uniform highp sampler3D u_lutTexture;
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
in highp float v_depth;uniform highp sampler2D u_depthTexture;uniform highp vec2 u_inv_depth_size;uniform highp vec2 u_depth_range_unpack;
#ifdef DEPTH_D24
highp float unpack_depth(highp float depth) {return  depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}
#else
highp float unpack_depth_rgba(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded() {highp vec2 coord=gl_FragCoord.xy*u_inv_depth_size;
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depthTexture,coord).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depthTexture,coord));
#endif
return v_depth > depth+0.0005;}
#endif
#define saturate(_x) clamp(_x,0.,1.)
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)
{
#ifdef LIGHTING_3D_MODE
vec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));
#endif
return apply_lighting(albedo,transformed_normal,lighting_factor);
#else
vec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;
#endif
}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;
#ifdef HAS_ATTRIBUTE_a_color_3f
albedo*=vec4(color_3f,1.0);
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#else
#ifdef HAS_ATTRIBUTE_a_color_4f
albedo*=color_4f;
#endif
#endif
#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)
vec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}
#ifdef UNPREMULT_TEXTURE_IN_SHADER
if(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;
#endif
if(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}
#endif
vec4 color=vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);
#ifdef APPLY_LUT_ON_GPU
color=applyLUT(u_lutTexture,color);
#endif
return color;}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {
#ifdef HAS_TEXTURE_u_normalTexture
highp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;
#else
return mat3(1.0);
#endif
}highp vec3 getNormal(){highp vec3 n;
#ifdef HAS_ATTRIBUTE_a_normal_3f
n=normalize(normal_3f);
#else
highp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));n=normalize(cross(fdx,fdy))*-1.0;
#endif
#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
vec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);
#endif
return n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;
#ifdef HAS_ATTRIBUTE_a_pbr
mat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;
#endif
#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) 
vec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;
#endif
const float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)
{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)
{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)
{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)
{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)
{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)
{
#ifdef LIGHTING_3D_MODE
return mat.diffuseColor;
#else
return mat.diffuseColor/PI;
#endif
}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)
{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)
{vec3 env_light=vec3(0.65,0.65,0.65);
#ifdef LIGHTING_3D_MODE
float ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;
#endif
vec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)
{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=NdotL;
#endif
vec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;
#if !defined(LIGHTING_3D_MODE)
const vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);
#endif
color*=intensityFactor;return color;}void main() {
#ifdef TERRAIN_FRAGMENT_OCCLUSION
if (isOccluded()) {discard;}
#endif
vec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;
#ifdef LIGHTING_3D_MODE
lightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;
#endif
vec4 finalColor;
#ifdef DIFFUSE_SHADED
vec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);
#ifdef HAS_TEXTURE_u_occlusionTexture
float ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;
#endif
finalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;
#else
Material mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;
#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
#ifdef OCCLUSION_TEXTURE_TRANSFORM
vec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;
#else
vec2 uv=uv_2f;
#endif
ao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;
#endif
vec4 emissive=u_emissiveFactor;
#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
emissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);
#endif
#ifdef APPLY_LUT_ON_GPU
float emissiveFactorLength=max(length(u_emissiveFactor.rgb),0.001);emissive.rgb=sRGBToLinear(applyLUT(u_lutTexture,linearTosRGB(emissive.rgb/emissiveFactorLength).rbg))*emissiveFactorLength;
#endif
color+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;
#ifdef HAS_ATTRIBUTE_a_pbr
float resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);vec3 color_mix=v_color_mix.rgb;
#ifdef APPLY_LUT_ON_GPU
color_mix=applyLUT(u_lutTexture,color_mix);
#endif
color=mix(color,color_mix,min(1.0,resEmission));
#ifdef HAS_ATTRIBUTE_a_color_4f
float distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);
#endif
#endif
vec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);
#endif
#ifdef FOG
finalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));
#endif
#ifdef RENDER_CUTOFF
finalColor*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
finalColor=applyCutout(finalColor,v_position_height.w);
#endif
glFragColor=finalColor;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr
#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength
uniform mat4 u_matrix;uniform mat4 u_node_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_normal_matrix;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
out vec4 v_position_height;out lowp vec4 v_color_mix;
#ifdef TERRAIN_FRAGMENT_OCCLUSION
out highp float v_depth;
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
out lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute-custom highp vec4 pbr
#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength
highp mat4 normal_matrix;
#ifdef INSTANCED_ARRAYS
normal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
normal_matrix=u_normal_matrix;
#endif
vec3 local_pos;mat3 rs;
#ifdef MODEL_POSITION_ON_GPU
vec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float hidden=float(pos_a.x > EXTENT);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=mix(u_matrix*pos,AWAY,hidden);pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;
#else
local_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);
#endif
v_position_height.w=a_pos_3f.z;
#ifdef HAS_ATTRIBUTE_a_pbr
vec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;
#endif
#ifdef FOG
v_fog_pos=fog_position(local_pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
float x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);
#else
normal_3f=vec3(normal_matrix*vec4(normal_3f,0));
#endif
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#ifdef HAS_ATTRIBUTE_a_color_4f
v_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);
#endif
#endif
#ifdef RENDER_SHADOWS
vec4 shadow_pos=u_node_matrix*vec4(local_pos,1.0);
#ifdef NORMAL_OFFSET
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
vec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#else
vec3 offset=shadow_normal_offset_model(normal_3f);shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#endif
#endif
#endif
v_pos_light_view_0=u_light_matrix_0*shadow_pos;v_pos_light_view_1=u_light_matrix_1*shadow_pos;v_depth_shadows=gl_Position.w;
#endif
}`),modelDepth:tn(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;
#ifdef MODEL_POSITION_ON_GPU
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_instance;
#endif
uniform highp mat4 u_node_matrix;
#endif
void main() {
#ifdef MODEL_POSITION_ON_GPU
highp mat4 instance;
#ifdef INSTANCED_ARRAYS
instance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
instance=u_instance;
#endif
vec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float hidden=float(pos_a.x > EXTENT);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=mix(u_matrix*pos,AWAY,hidden);
#else
gl_Position=u_matrix*vec4(a_pos_3f,1);
#endif
v_depth=gl_Position.z/gl_Position.w;}`),stars:tn(`in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)
{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}`,`
in vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}`),snowParticle:tn("in highp vec2 uv;in highp float alphaMultiplier;uniform vec4 u_particleColor;uniform vec2 u_simpleShapeParameters;void main() {float t=clamp((length(uv)-u_simpleShapeParameters.x)/(1.0-u_simpleShapeParameters.x),0.0,1.0);float alpha=1.0-pow(t,pow(10.0,u_simpleShapeParameters.y));alpha*=alphaMultiplier;alpha*=u_particleColor.a;vec3 color=u_particleColor.rgb*alpha;glFragColor=vec4(color,alpha) ;HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_snowParticleData;in highp vec4 a_snowParticleDataHorizontalOscillation;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform vec2 u_screenSize;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity;uniform vec3 u_direction;uniform float u_horizontalOscillationRadius; 
uniform float u_horizontalOscillationRate; 
uniform float u_billboardSize;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;out highp vec2 uv;out highp float alphaMultiplier;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos.xyz*=halfBoxSize;pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_snowParticleData.z;float coneAngleHeadingRad=a_snowParticleData.w*radians(360.0);vec3 localZ=normalize(u_direction);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 direction;direction.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.z=cos(coneAnglePichRad);direction=normalize(direction);vec3 simPosLocal=vec3(0,0,0);float velocityScale=(1.0+3.0*a_snowParticleData.y)*u_velocity;simPosLocal+=direction*velocityScale*u_time;float horizontalOscillationRadius=u_horizontalOscillationRadius*a_snowParticleDataHorizontalOscillation.x;float horizontalOscillationAngle=u_horizontalOscillationRate*u_time*(-1.0+2.0*a_snowParticleDataHorizontalOscillation.y);simPosLocal.xy+=horizontalOscillationRadius*vec2(cos(horizontalOscillationAngle),sin(horizontalOscillationAngle));vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);float clipZ=-u_cam_pos.z+pos.z;vec4 posView=u_modelview*vec4(pos,1.0);float size=u_billboardSize;alphaMultiplier=1.0;vec4 posScreen=u_projection*posView;posScreen/=posScreen.w;posScreen.xy=vec2(0.5)+posScreen.xy*0.5;posScreen.xy*=u_screenSize;vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=u_screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-posScreen.xy)/(0.5*u_screenSize));screenDist+=a_snowParticleData.x*u_thinningParticleOffset;float scaleFactorMode=0.0;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);if (a_snowParticleData.x < u_thinningAffectedRatio) {scaleFactorMode=1.0-thinningFadeRatio;alphaMultiplier=thinningFadeRatio;}}vec4 posScreen1=u_projection*vec4(posView.x-size,posView.yzw);posScreen1/=posScreen1.w;vec4 posScreen2=u_projection*vec4(posView.x+size,posView.yzw);posScreen2/=posScreen2.w;posScreen1.xy=vec2(0.5)+posScreen1.xy*0.5;posScreen1.xy*=u_screenSize;posScreen2.xy=vec2(0.5)+posScreen2.xy*0.5;posScreen2.xy*=u_screenSize;float screenLength=length(posScreen1.xy-posScreen2.xy);float screenEpsilon=3.0;float scaleFactor=1.0;if (screenLength < screenEpsilon) {scaleFactor=screenEpsilon/max(screenLength,0.01);scaleFactor=mix(scaleFactor,1.0,scaleFactorMode);}float screenEpsilon2=15.0;if (screenLength > screenEpsilon2) {scaleFactor=screenEpsilon2/max(screenLength,0.01);}size*=scaleFactor;vec2 right=size*vec2(1,0);vec2 up=size*vec2(0,1);posView.xy+=right*a_uv.x;posView.xy+=up*a_uv.y;uv=a_uv;gl_Position=u_projection*posView;}`),rainParticle:tn("in highp vec2 uv;in highp float particleRandomValue;uniform sampler2D u_texScreen;uniform float u_distortionStrength;uniform vec4 u_color;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;uniform float u_shapeDirectionalPower;uniform float u_mode;void main() {vec2 st=uv*0.5+vec2(0.5);vec2 uvm=uv;uvm.y=-1.0+2.0*pow(st.y,u_shapeDirectionalPower);float shape=clamp(1.0-length(uvm),0.0,1.0);float alpha=abs(shape)*u_color.a;vec2 screenSize=vec2(textureSize(u_texScreen,0));vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-gl_FragCoord.xy)/(0.5*screenSize));screenDist+=(0.5+0.5*particleRandomValue)*u_thinningParticleOffset;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;float thinningAlpha=1.0;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);thinningAlpha*=thinningFadeRatio;}vec2 offsetXY=normalize(uvm)*abs(shape);vec2 stScreen=(gl_FragCoord.xy+offsetXY*u_distortionStrength*thinningAlpha)/screenSize;vec3 colorScreen=texture(u_texScreen,stScreen).rgb;alpha*=thinningAlpha;glFragColor=mix(vec4(colorScreen,1.0),vec4(u_color.rgb*alpha,alpha),u_mode);HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_rainParticleData;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity; 
uniform vec2 u_rainDropletSize;uniform vec3 u_rainDirection;out highp vec2 uv;out highp float particleRandomValue;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos*=halfBoxSize; 
pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_rainParticleData.z;float coneAngleHeadingRad=a_rainParticleData.w*radians(360.0);vec3 localZ=normalize(u_rainDirection);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 directionLocal;directionLocal.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.z=cos(coneAnglePichRad);directionLocal=normalize(directionLocal);vec3 directionWorld=localX*directionLocal.x+localY*directionLocal.y+localZ*directionLocal.z;float velocityScale=(1.0+3.0*a_rainParticleData.y)*u_velocity;vec3 simPosLocal=vec3(0,0,0);simPosLocal+=directionLocal*velocityScale*u_time;vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);vec4 posView=u_modelview*vec4(pos,1.0);vec3 directionView=normalize((u_modelview*vec4(directionWorld,0.0)).xyz);vec3 side=cross(directionView,normalize(posView.xyz));posView.xyz+=side*a_uv.x*u_rainDropletSize.x;posView.xyz+=directionView*a_uv.y*u_rainDropletSize.y;uv=a_uv;particleRandomValue=a_rainParticleData.x;gl_Position=u_projection*posView;}`),vignette:tn("uniform vec3 u_vignetteShape;uniform vec4 u_vignetteColor;in vec2 st;void main() {float screenDist=length(st);float alpha=clamp((screenDist-u_vignetteShape.x)/u_vignetteShape.y,0.0,1.0);alpha=pow(alpha,u_vignetteShape.z)*u_vignetteColor.a;vec3 color=u_vignetteColor.rgb;glFragColor=vec4(color*alpha,alpha) ;}","in vec2 a_pos_2f;out vec2 st;void main() {st=a_pos_2f;gl_Position=vec4(a_pos_2f,0,1);}"),occlusion:tn("uniform vec4 u_color;void main() {glFragColor=u_color;}",`#include "_prelude_terrain.vertex.glsl"
in highp vec2 a_offset_xy;uniform highp vec3 u_anchorPos;uniform mat4 u_matrix;uniform vec2 u_screenSizePx;uniform vec2 u_occluderSizePx;void main() {vec3 world_pos=u_anchorPos;
#ifdef TERRAIN
float e=elevation(world_pos.xy);world_pos.z+=e;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1.0);projected_point.xy+=projected_point.w*a_offset_xy*0.5*u_occluderSizePx/u_screenSizePx;gl_Position=projected_point;}`)};function tu(g,o){const c=g.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let A of c)if(A=A.trim(),A[0]==="#"&&A.includes("if")&&!A.includes("endif")){A=A.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const R=A.split(" ");for(const C of R)o.includes(C)||o.push(C)}}function tn(g,o){const c=/#include\s+"([^"]+)"/g,A=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g;let R=o.match(/(attribute(\S*)|(^\s*|;)in) (highp |mediump |lowp )?([\w]+) ([\w]+)/gm);R&&(R=R.map($=>{const W=$.split(" ");return W[W.length-1]}),R=[...new Set(R)]);const C={},E=[],L=[];if(g=g.replace(c,($,W)=>(L.push(W),"")),(o=o.replace(c,($,W)=>(E.push(W),""))).includes("flat out"))return void console.error('The usage of "flat" qualifier is disallowed, see: https://bugs.webkit.org/show_bug.cgi?id=268071');let j=[...ai];tu(g,j),tu(o,j);for(const $ of[...E,...L])qi[$]||console.error(`Undefined include: ${$}`),is[$]||(is[$]=[],tu(qi[$],is[$])),j=[...j,...is[$]];return{fragmentSource:g=g.replace(A,($,W,te,ae,de)=>(C[de]=!0,W==="define"?`
#ifndef HAS_UNIFORM_u_${de}
in ${te} ${ae} ${de};
#else
uniform ${te} ${ae} u_${de};
#endif
`:W==="initialize"?`
#ifdef HAS_UNIFORM_u_${de}
    ${te} ${ae} ${de} = u_${de};
#endif
`:W==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${de}
    in ${te} ${ae} ${de};
#endif
`:W==="initialize-attribute"?"":void 0)),vertexSource:o=o.replace(A,($,W,te,ae,de)=>{const Te=ae==="float"?"vec2":ae,ve=de.match(/color/)?"color":Te;return W==="define-attribute-vertex-shader-only"?`
#ifdef HAS_ATTRIBUTE_a_${de}
in ${te} ${ae} a_${de};
#endif
`:C[de]?W==="define"?`
#ifndef HAS_UNIFORM_u_${de}
uniform lowp float u_${de}_t;
in ${te} ${Te} a_${de};
out ${te} ${ae} ${de};
#else
uniform ${te} ${ae} u_${de};
#endif
`:W==="initialize"?ve==="vec4"?`
#ifndef HAS_UNIFORM_u_${de}
    ${de} = a_${de};
#else
    ${te} ${ae} ${de} = u_${de};
#endif
`:`
#ifndef HAS_UNIFORM_u_${de}
    ${de} = unpack_mix_${ve}(a_${de}, u_${de}_t);
#else
    ${te} ${ae} ${de} = u_${de};
#endif
`:W==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${de}
    in ${te} ${ae} a_${de};
    out ${te} ${ae} ${de};
#endif
`:W==="initialize-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${de}
    ${de} = a_${de};
#endif
`:void 0:W==="define"?`
#ifndef HAS_UNIFORM_u_${de}
uniform lowp float u_${de}_t;
in ${te} ${Te} a_${de};
#else
uniform ${te} ${ae} u_${de};
#endif
`:W==="define-instanced"?ve==="mat4"?`
#ifdef INSTANCED_ARRAYS
in vec4 a_${de}0;
in vec4 a_${de}1;
in vec4 a_${de}2;
in vec4 a_${de}3;
#else
uniform ${te} ${ae} u_${de};
#endif
`:`
#ifdef INSTANCED_ARRAYS
in ${te} ${Te} a_${de};
#else
uniform ${te} ${ae} u_${de};
#endif
`:W==="initialize-attribute-custom"?`
#ifdef HAS_ATTRIBUTE_a_${de}
    ${te} ${ae} ${de} = a_${de};
#endif
`:ve==="vec4"?`
#ifndef HAS_UNIFORM_u_${de}
    ${te} ${ae} ${de} = a_${de};
#else
    ${te} ${ae} ${de} = u_${de};
#endif
`:`
#ifndef HAS_UNIFORM_u_${de}
    ${te} ${ae} ${de} = unpack_mix_${ve}(a_${de}, u_${de}_t);
#else
    ${te} ${ae} ${de} = u_${de};
#endif
`}),staticAttributes:R,usedDefines:j,vertexIncludes:E,fragmentIncludes:L}}class Bc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(o,c,A,R,C,E,L,j){this.context=o;let $=this.boundPaintVertexBuffers.length!==R.length;for(let te=0;!$&&te<R.length;te++)this.boundPaintVertexBuffers[te]!==R[te]&&($=!0);let W=this.boundDynamicVertexBuffers.length!==L.length;for(let te=0;!W&&te<L.length;te++)this.boundDynamicVertexBuffers[te]!==L[te]&&(W=!0);if(!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==A||$||W||this.boundIndexBuffer!==C||this.boundVertexOffset!==E)this.freshBind(c,A,R,C,E,L,j);else{o.bindVertexArrayOES.set(this.vao);for(const te of L)te&&(te.bind(),j&&te.instanceCount&&te.setVertexAttribDivisor(o.gl,c,j));C&&C.dynamicDraw&&C.bind()}}freshBind(o,c,A,R,C,E,L){const j=o.numAttributes,$=this.context,W=$.gl;this.vao&&this.destroy(),this.vao=$.gl.createVertexArray(),$.bindVertexArrayOES.set(this.vao),this.boundProgram=o,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=A,this.boundIndexBuffer=R,this.boundVertexOffset=C,this.boundDynamicVertexBuffers=E,c.enableAttributes(W,o),c.bind(),c.setVertexAttribPointers(W,o,C);for(const te of A)te.enableAttributes(W,o),te.bind(),te.setVertexAttribPointers(W,o,C);for(const te of E)te&&(te.enableAttributes(W,o),te.bind(),te.setVertexAttribPointers(W,o,C),L&&te.instanceCount&&te.setVertexAttribDivisor(W,o,L));R&&R.bind(),$.currentNumAttributes=j}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function Vl(g,o){const c=Math.pow(2,o.canonical.z),A=o.canonical.y;return[new n.ac(0,A/c).toLngLat().lat,new n.ac(0,(A+1)/c).toLngLat().lat]}function ts(g,o,c,A,R,C,E){const L=g.context,j=L.gl,$=c.hillshadeFBO;if(!$)return;g.prepareDrawTile();const W=g.isTileAffectedByFog(o),te=g.getOrCreateProgram("hillshade",{overrideFog:W});L.activeTexture.set(j.TEXTURE0),j.bindTexture(j.TEXTURE_2D,$.colorAttachment.get());const ae=((Ee,Ve,Be,et)=>{const Je=Be.paint.get("hillshade-shadow-color"),dt=Be.paint.get("hillshade-shadow-color-use-theme").constantOr("default")==="none",it=Be.paint.get("hillshade-highlight-color"),st=Be.paint.get("hillshade-highlight-color-use-theme").constantOr("default")==="none",ot=Be.paint.get("hillshade-accent-color"),gt=Be.paint.get("hillshade-accent-color-use-theme").constantOr("default")==="none",Tt=Be.paint.get("hillshade-emissive-strength");let Xt=n.ak(Be.paint.get("hillshade-illumination-direction"));if(Be.paint.get("hillshade-illumination-anchor")==="viewport")Xt-=Ee.transform.angle;else if(Ee.style&&Ee.style.enable3dLights()&&Ee.style.directionalLight){const ra=Ee.style.directionalLight.properties.get("direction"),ua=n.cc(ra.x,ra.y,ra.z);Xt=n.ak(ua[1])}const Ft=!Ee.options.moving;return{u_matrix:et||Ee.transform.calculateProjMatrix(Ve.tileID.toUnwrapped(),Ft),u_image:0,u_latrange:Vl(0,Ve.tileID),u_light:[Be.paint.get("hillshade-exaggeration"),Xt],u_shadow:Je.toRenderColor(dt?null:Be.lut),u_highlight:it.toRenderColor(st?null:Be.lut),u_emissive_strength:Tt,u_accent:ot.toRenderColor(gt?null:Be.lut)}})(g,c,A,g.terrain?o.projMatrix:null);g.uploadCommonUniforms(L,te,o.toUnwrapped());const{tileBoundsBuffer:de,tileBoundsIndexBuffer:Te,tileBoundsSegments:ve}=g.getTileBoundsBuffers(c);te.draw(g,j.TRIANGLES,R,C,E,vr.disabled,ae,A.id,de,Te,ve)}function yc(g,o,c){if(!o.needsDEMTextureUpload)return;const A=g.context,R=A.gl;A.pixelStoreUnpackPremultiplyAlpha.set(!1),o.demTexture=o.demTexture||g.getTileTexture(c.stride);const C=c.getPixels();o.demTexture?o.demTexture.update(C,{premultiply:!1}):o.demTexture=new n.T(A,C,R.R32F,{premultiply:!1}),o.needsDEMTextureUpload=!1}function zd(g,o,c){const A=g.context,R=A.gl;if(!o.dem)return;const C=o.dem;if(A.activeTexture.set(R.TEXTURE1),yc(g,o,C),!o.demTexture)return;o.demTexture.bind(R.NEAREST,R.CLAMP_TO_EDGE);const E=C.dim;A.activeTexture.set(R.TEXTURE0);let L=o.hillshadeFBO;if(!L){const ae=new n.T(A,{width:E,height:E,data:null},R.RGBA8);ae.bind(R.LINEAR,R.CLAMP_TO_EDGE),L=o.hillshadeFBO=A.createFramebuffer(E,E,!0,"renderbuffer"),L.colorAttachment.set(ae.texture)}A.bindFramebuffer.set(L.framebuffer),A.viewport.set([0,0,E,E]);const{tileBoundsBuffer:j,tileBoundsIndexBuffer:$,tileBoundsSegments:W}=g.getMercatorTileBoundsBuffers(),te=[];g.linearFloatFilteringSupported()&&te.push("TERRAIN_DEM_FLOAT_FORMAT"),g.getOrCreateProgram("hillshadePrepare",{defines:te}).draw(g,R.TRIANGLES,ir.disabled,Rr.disabled,br.unblended,vr.disabled,((ae,de)=>{const Te=de.stride,ve=n.ad.mat4.create();return n.ad.mat4.ortho(ve,0,n.ai,-n.ai,0,0,1),n.ad.mat4.translate(ve,ve,[0,-n.ai,0]),{u_matrix:ve,u_image:1,u_dimension:[Te,Te],u_zoom:ae.overscaledZ}})(o.tileID,C),c.id,j,$,W),o.needsHillshadePrepare=!1}class di{constructor(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(o){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ih extends di{getDefault(){return n.al.transparent}set(o){const c=this.current;(o.r!==c.r||o.g!==c.g||o.b!==c.b||o.a!==c.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class el extends di{getDefault(){return 1}set(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)}}class pl extends di{getDefault(){return 0}set(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)}}class Gc extends di{getDefault(){return[!0,!0,!0,!0]}set(o){const c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||o[3]!==c[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class Tu extends di{getDefault(){return!0}set(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)}}class Zu extends di{getDefault(){return 255}set(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)}}class gc extends di{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(o){const c=this.current;(o.func!==c.func||o.ref!==c.ref||o.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)}}class qp extends di{getDefault(){const o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]}set(o){const c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)}}class Lh extends di{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;o?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=o,this.dirty=!1}}class Fh extends di{getDefault(){return[0,1]}set(o){const c=this.current;(o[0]!==c[0]||o[1]!==c[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)}}class tl extends di{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;o?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=o,this.dirty=!1}}class Hi extends di{getDefault(){return this.gl.LESS}set(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)}}class _i extends di{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;o?c.enable(c.BLEND):c.disable(c.BLEND),this.current=o,this.dirty=!1}}class au extends di{getDefault(){const o=this.gl;return[o.ONE,o.ZERO,o.ONE,o.ZERO]}set(o){const c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||o[3]!==c[3]||this.dirty)&&(this.gl.blendFuncSeparate(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class Su extends di{getDefault(){return n.al.transparent}set(o){const c=this.current;(o.r!==c.r||o.g!==c.g||o.b!==c.b||o.a!==c.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class Xf extends di{getDefault(){return this.gl.FUNC_ADD}set(o){(o!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(o,o),this.current=o,this.dirty=!1)}}class Ac extends di{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;o?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=o,this.dirty=!1}}class vf extends di{getDefault(){return this.gl.BACK}set(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)}}class Od extends di{getDefault(){return this.gl.CCW}set(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)}}let Uh=class extends di{getDefault(){return null}set(g){(g!==this.current||this.dirty)&&(this.gl.useProgram(g),this.current=g,this.dirty=!1)}};class kh extends di{getDefault(){return this.gl.TEXTURE0}set(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)}}class Dd extends di{getDefault(){const o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]}set(o){const c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||o[3]!==c[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class wf extends di{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,o),this.current=o,this.dirty=!1}}class Zm extends di{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class dh extends di{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,o),this.current=o,this.dirty=!1}}class Ly extends di{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class _c extends di{getDefault(){return null}set(o){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class qu extends di{getDefault(){return null}set(o){this.gl&&(o!==this.current||this.dirty)&&(this.gl.bindVertexArray(o),this.current=o,this.dirty=!1)}}class Cu extends di{getDefault(){return 4}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}}class Fy extends di{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}}class Bh extends di{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}}class ml extends di{constructor(o,c){super(o),this.context=o,this.parent=c}getDefault(){return null}}class al extends ml{setDirty(){this.dirty=!0}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class Gh extends ml{attachment(){return this.gl.DEPTH_ATTACHMENT}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,this.attachment(),c.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class Md extends ml{attachment(){return this.gl.DEPTH_ATTACHMENT}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,this.attachment(),c.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class Hp extends Gh{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}const $p=(g,o,c)=>({u_matrix:g,u_image0:0,u_skirt_height:o,u_ground_shadow_factor:c}),jc=(g,o,c,A,R,C,E,L,j,$,W,te,ae,de,Te,ve)=>({u_proj_matrix:Float32Array.from(g),u_globe_matrix:o,u_normalize_matrix:Float32Array.from(A),u_merc_matrix:c,u_zoom_transition:R,u_merc_center:C,u_image0:0,u_frustum_tl:E,u_frustum_tr:L,u_frustum_br:j,u_frustum_bl:$,u_globe_pos:W,u_globe_radius:te,u_viewport:ae,u_grid_matrix:ve?Float32Array.from(ve):new Float32Array(9),u_skirt_height:de,u_far_z_cutoff:Te});function Rf(g,o){return g!=null&&o!=null&&!(!g.hasData()||!o.hasData())&&g.demTexture!=null&&o.demTexture!=null&&g.tileID.key!==o.tileID.key}const rl=new class{constructor(){this.operations={}}newMorphing(g,o,c,A,R){if(g in this.operations){const C=this.operations[g];C.to.tileID.key!==c.tileID.key&&(C.queued=c)}else this.operations[g]={startTime:A,phase:0,duration:R,from:o,to:c,queued:null}}getMorphValuesForProxy(g){if(!(g in this.operations))return null;const o=this.operations[g];return{from:o.from,to:o.to,phase:o.phase}}update(g){for(const o in this.operations){const c=this.operations[o];for(c.phase=(g-c.startTime)/c.duration;c.phase>=1||!this._validOp(c);)if(!this._nextOp(c,g)){delete this.operations[o];break}}}_nextOp(g,o){return!!g.queued&&(g.from=g.to,g.to=g.queued,g.queued=null,g.phase=0,g.startTime=o,!0)}_validOp(g){return g.from.hasData()&&g.to.hasData()}},Id={0:null,1:"TERRAIN_VERTEX_MORPHING"};function bu(g,o,c){if(o===0)return 0;const A=o<1&&c===514?.25/o:1;return 6*Math.pow(1.5,22-g)*Math.max(o,1)*A}function Ld(g,o){const c=1<<g.z;return!o&&(g.x===0||g.x===c-1)||g.y===0||g.y===c-1}const Zc=g=>({u_matrix:g});function zl(g,o,c,A,R){if(R>0){const C=n.q.now(),E=(C-g.timeAdded)/R,L=o?(C-o.timeAdded)/R:-1,j=c.getSource(),$=A.coveringZoomLevel({tileSize:j.tileSize,roundZoom:j.roundZoom}),W=!o||Math.abs(o.tileID.overscaledZ-$)>Math.abs(g.tileID.overscaledZ-$),te=W&&g.refreshedUponExpiration?1:n.ay(W?E:1-L,0,1);return g.refreshedUponExpiration&&E>=1&&(g.refreshedUponExpiration=!1),o?{opacity:1,mix:1-te}:{opacity:te,mix:0}}return{opacity:1,mix:0}}class Hu extends Yo{constructor(o){const c={type:"raster-dem",maxzoom:o.transform.maxZoom},A=new n.D(n.cj(),null),R=Mo("mock-dem",c,A,o.style);super("mock-dem",R,!1),R.setEventedParent(this),this._sourceLoaded=!0}_loadTile(o,c){o.state="loaded",c(null)}}class qc extends Yo{constructor(o){const c=Mo("proxy",{type:"geojson",maxzoom:o.transform.maxZoom},new n.D(n.cj(),null),o.style);super("proxy",c,!1),c.setEventedParent(this),this.map=this.getSource().map=o,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(o,c,A){if(o.freezeTileCoverage)return;this.transform=o;const R=o.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((C,E)=>{if(C[E.key]="",!this._tiles[E.key]){const L=new $l(E,this._source.tileSize*E.overscaleFactor(),o.tileZoom);L.state="loaded",this._tiles[E.key]=L}return C},{});for(const C in this._tiles)C in R||(this.freeFBO(C),this._tiles[C].unloadVectorData(),delete this._tiles[C])}freeFBO(o){const c=this.proxyCachedFBO[o];if(c!==void 0){const A=Object.values(c);this.renderCachePool.push(...A),delete this.proxyCachedFBO[o]}}deallocRenderCache(){this.renderCache.forEach(o=>o.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Jf extends n.aH{constructor(o,c,A){super(o.overscaledZ,o.wrap,o.canonical.z,o.canonical.x,o.canonical.y),this.proxyTileKey=c,this.projMatrix=A}}class Fd extends n.cK{constructor(o,c){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},o.tp.registerParameter(this._debugParams,["Terrain"],"sortTilesHiZFirst",{},()=>{this._style.map.triggerRepaint()}),o.tp.registerParameter(this._debugParams,["Terrain"],"disableRenderCache",{},()=>{this._style.map.triggerRepaint()}),o.tp.registerButton(["Terrain"],"Invalidate Render Cache",()=>{this.invalidateRenderCache=!0,this._style.map.triggerRepaint()}),this.painter=o,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[A,R,C]=function(j){const $=new n.b5,W=new n.aV,te=131;$.reserve(17161),W.reserve(33800);const ae=n.ai/128,de=n.ai+ae/2,Te=de+ae;for(let Ee=-ae;Ee<Te;Ee+=ae)for(let Ve=-ae;Ve<Te;Ve+=ae){const Be=Ve<0||Ve>de||Ee<0||Ee>de?24575:0,et=n.ay(Math.round(Ve),0,n.ai),Je=n.ay(Math.round(Ee),0,n.ai);$.emplaceBack(et+Be,Je)}const ve=(Ee,Ve)=>{const Be=Ve*te+Ee;W.emplaceBack(Be+1,Be,Be+te),W.emplaceBack(Be+te,Be+te+1,Be+1)};for(let Ee=1;Ee<129;Ee++)for(let Ve=1;Ve<129;Ve++)ve(Ve,Ee);return[0,129].forEach(Ee=>{for(let Ve=0;Ve<130;Ve++)ve(Ve,Ee),ve(Ee,Ve)}),[$,W,32768]}(),E=o.context;this.gridBuffer=E.createVertexBuffer(A,n.b7.members),this.gridIndexBuffer=E.createIndexBuffer(R),this.gridSegments=n.b8.simpleSegment(0,0,A.length,R.length),this.gridNoSkirtSegments=n.b8.simpleSegment(0,0,A.length,C),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new qc(c.map),this.orthoMatrix=n.ad.mat4.create(),n.ad.mat4.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,n.ai,0,n.ai,0,1);const L=E.gl;this._overlapStencilMode=new Rr({func:L.GEQUAL,mask:255},0,255,L.KEEP,L.KEEP,L.REPLACE),this._previousZoom=o.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=c,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Hu(c.map),this._pendingGroundEffectLayers=[]}set style(o){o.on("data",this._onStyleDataEvent.bind(this)),this._style=o,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(o,c,A){if(o&&o.terrain){this._style!==o&&(this.style=o,this._evaluationZoom=void 0);const R=o.terrain.properties,C=o.terrain.drapeRenderMode===0,E=o.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=n.q.now();const L=o.terrain&&o.terrain.scope,j=R.get("source"),$=C?this._mockSourceCache:o.getSourceCache(j,L);if(!$)return void n.w(`Couldn't find terrain source "${j}".`);if(this.sourceCache=$,this._attenuationRange=o.terrain.getAttenuationRange(),this._exaggeration=E?this.calculateExaggeration(c):R.get("exaggeration"),!c.projection.requiresDraping&&E&&this._exaggeration===0)return void this._disable();this.enabled=!0;const W=()=>{this.sourceCache.used&&n.w(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const te=this.getScaledDemTileSize();this.sourceCache.update(c,te,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,W(),this._initializing=!0),W(),c.updateElevation(!0,A),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(c),this._emptyDEMTextureDirty=!0,this._previousZoom=c.zoom}else this._disable()}calculateExaggeration(o){if(this._attenuationRange&&o.zoom>=Math.ceil(this._attenuationRange[1]))return this._style.terrain.getExaggeration(o.zoom);const c=this._previousCameraAltitude,A=o.getFreeCameraOptions().position.z/o.pixelsPerMeter*o.worldSize;this._previousCameraAltitude=A;const R=c!=null?A-c:Number.MAX_VALUE;if(Math.abs(R)<2)return this._exaggeration;const C=o.zoom,E=this._style.terrain;if(!this._previousUpdateTimestamp)return E.getExaggeration(C);let L=C-this._previousZoom;const j=this._previousUpdateTimestamp;let $=C;this._evaluationZoom!=null&&($=this._evaluationZoom,Math.abs(C-$)>.5&&(L=.5*(C-$+L)),L*R<0&&($+=L)),this._evaluationZoom=$;const W=E.getExaggeration($),te=W===E.getExaggeration(Math.max(0,$-.1));if(te&&Math.abs(W-this._exaggeration)<.01)return W;let ae=Math.min(.1,.00375*(this._updateTimestamp-j));return(te||W<.1||Math.abs(L)<1e-4)&&(ae=Math.min(.2,4*ae)),n.ah(this._exaggeration,W,ae)}resetTileLookupCache(o){this._findCoveringTileCache[o]={}}attenuationRange(){return this._attenuationRange}getDemUpscale(){return this.proxySourceCache.getSource().tileSize/128}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(o){o.coord&&o.dataType==="source"?this._clearRenderCacheForTile(o.sourceCacheId,o.coord):o.dataType==="style"&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._emptyDEMTextureDirty=!0,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const o in this._style._mergedSourceCaches)this._style._mergedSourceCaches[o].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach(o=>o.fb.destroy()),this.pool=[],this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this.enabled?this._exaggeration:0}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const o=2*this.proxySourceCache.getSource().tileSize;return[o,o]}set useVertexMorphing(o){this._useVertexMorphing=o}updateTileBinding(o){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const c=this.proxySourceCache,A=this.painter.transform;this._initializing&&(this._initializing=A._centerAltitude===0&&this.getAtPointOrZero(n.ac.fromLngLat(A.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const R=this.proxyCoords=c.getIds().map(j=>{const $=c.getTileByID(j).tileID;return $.projMatrix=A.calculateProjMatrix($.toUnwrapped()),$});(function(j,$){const W=$.transform.pointCoordinate($.transform.getCameraPoint()),te=new n.P(W.x,W.y);j.sort((ae,de)=>{if(de.overscaledZ-ae.overscaledZ)return de.overscaledZ-ae.overscaledZ;const Te=new n.P(ae.canonical.x+(1<<ae.canonical.z)*ae.wrap,ae.canonical.y),ve=new n.P(de.canonical.x+(1<<de.canonical.z)*de.wrap,de.canonical.y),Ee=te.mult(1<<ae.canonical.z);return Ee.x-=.5,Ee.y-=.5,Ee.distSqr(Te)-Ee.distSqr(ve)})})(R,this.painter);const C=this.proxyToSource||{};this.proxyToSource={},R.forEach(j=>{this.proxyToSource[j.key]={}}),this.terrainTileForTile={};const E=this._style._mergedSourceCaches;for(const j in E){const $=E[j];if(!$.used||($!==this.sourceCache&&this.resetTileLookupCache($.id),this._setupProxiedCoordsForOrtho($,o[j],C),$.usedForTerrain))continue;const W=o[j];$.getSource().reparseOverscaled&&this._assignTerrainTiles(W)}this.proxiedCoords[c.id]=R.map(j=>new Jf(j,j.key,this.orthoMatrix)),this._assignTerrainTiles(R),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(C),this.renderingToTexture=!1;const L={};this._visibleDemTiles=[];for(const j of this.proxyCoords){const $=this.terrainTileForTile[j.key];if(!$)continue;const W=$.tileID.key;W in L||(this._visibleDemTiles.push($),L[W]=W)}}_assignTerrainTiles(o){this._initializing||o.forEach(c=>{if(this.terrainTileForTile[c.key])return;const A=this._findTileCoveringTileID(c,this.sourceCache);A&&(this.terrainTileForTile[c.key]=A)})}_prepareDEMTextures(){const o=this.painter.context,c=o.gl;for(const A in this.terrainTileForTile){const R=this.terrainTileForTile[A],C=R.dem;!C||R.demTexture&&!R.needsDEMTextureUpload||(o.activeTexture.set(c.TEXTURE1),yc(this.painter,R,C))}}_prepareDemTileUniforms(o,c,A,R){if(!c||c.demTexture==null)return!1;const C=o.tileID.canonical,E=Math.pow(2,c.tileID.canonical.z-C.z),L=R||"";return A[`u_dem_tl${L}`]=[C.x*E%1,C.y*E%1],A[`u_dem_scale${L}`]=E,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){if(!this.enabled)return 0;let o=0;const c=this._visibleDemTiles.reduce((A,R)=>{if(!R.dem)return A;const C=R.dem.tree.minimums[0];return C>0&&o++,A+C},0);return o?c/o:0}_updateEmptyDEMTexture(){const o=this.painter.context,c=o.gl;o.activeTexture.set(c.TEXTURE2);const A=this._getLoadedAreaMinimum(),R=new n.cL({width:1,height:1},new Float32Array([A]));this._emptyDEMTextureDirty=!1;let C=this._emptyDEMTexture;return C?C.update(R,{premultiply:!1}):C=this._emptyDEMTexture=new n.T(o,R,c.R32F,{premultiply:!1}),C}setupElevationDraw(o,c,A){const R=this.painter.context,C=R.gl,E={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0};E.u_exaggeration=this.exaggeration();let L=null,j=null,$=1;if(A&&A.morphing&&this._useVertexMorphing){const de=A.morphing.srcDemTile,Te=A.morphing.dstDemTile;$=A.morphing.phase,de&&Te&&(this._prepareDemTileUniforms(o,de,E,"_prev")&&(j=de),this._prepareDemTileUniforms(o,Te,E)&&(L=Te))}const W=de=>de&&de.demTexture&&this.painter.linearFloatFilteringSupported()?C.LINEAR:C.NEAREST;let te=null;var ae;if(this.enabled?j&&L?(te=L.demTexture,R.activeTexture.set(C.TEXTURE4),j.demTexture.bind(W(j),C.CLAMP_TO_EDGE),E.u_dem_lerp=$):(L=this.terrainTileForTile[o.tileID.key],te=this._prepareDemTileUniforms(o,L,E)?L.demTexture:this.emptyDEMTexture):te=this.emptyDEMTexture,R.activeTexture.set(C.TEXTURE2),te&&(E.u_dem_size=(ae=te).size[0]===1?1:ae.size[0]-2,te.bind(W(L),C.CLAMP_TO_EDGE)),this.painter.setupDepthForOcclusion(A&&A.useDepthForOcclusion,c,E),A&&A.useMeterToDem&&L){const de=(1<<L.tileID.canonical.z)*n.bH(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;E.u_meter_to_dem=de}if(A&&A.labelPlaneMatrixInv&&(E.u_label_plane_matrix_inv=A.labelPlaneMatrixInv),c.setTerrainUniformValues(R,E),this.painter.transform.projection.name==="globe"){const de=this.globeUniformValues(this.painter.transform,o.tileID.canonical,A&&A.useDenormalizedUpVectorScale);c.setGlobeUniformValues(R,de)}}globeUniformValues(o,c,A){const R=o.projection;return{u_tile_tl_up:R.upVector(c,0,0),u_tile_tr_up:R.upVector(c,n.ai,0),u_tile_br_up:R.upVector(c,n.ai,n.ai),u_tile_bl_up:R.upVector(c,0,n.ai),u_tile_up_scale:A?n.cM(1):R.upVectorScale(c,o.center.lat,o.worldSize).metersToTile}}renderToBackBuffer(o){const c=this.painter,A=this.painter.context;o.length!==0&&(A.bindFramebuffer.set(null),A.viewport.set([0,0,c.width,c.height]),c.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(R,C,E,L,j){if(R.transform.projection.name==="globe")(function($,W,te,ae,de){const Te=$.context,ve=Te.gl;let Ee,Ve;const Be=$.transform,et=n.cD($,Te,Be),Je=(ra,ua)=>{if(Ve===ua)return;const Ca=[Id[ua],"PROJECTION_GLOBE_VIEW"];et&&Ca.push("CUSTOM_ANTIALIASING");const Lt=$.isTileAffectedByFog(ra);Ee=$.getOrCreateProgram("globeRaster",{defines:Ca,overrideFog:Lt}),Ve=ua},dt=$.colorModeForRenderPass(),it=new ir(ve.LEQUAL,ir.ReadWrite,$.depthRangeFor3D);rl.update(de);const st=n.cE(Be),ot=[n.av(Be.center.lng),n.aC(Be.center.lat)],gt=$.globeSharedBuffers,Tt=[Be.width*n.q.devicePixelRatio,Be.height*n.q.devicePixelRatio],Xt=Float32Array.from(Be.globeMatrix),Ft={useDenormalizedUpVectorScale:!0};{const ra=$.transform,ua=bu(ra.zoom,W.exaggeration(),W.sourceCache._source.tileSize);Ve=-1;const Ca=ve.TRIANGLES;for(const Lt of ae){const sa=te.getTile(Lt),zt=Rr.disabled,oa=W.prevTerrainTileForTile[Lt.key],ea=W.terrainTileForTile[Lt.key];Rf(oa,ea)&&rl.newMorphing(Lt.key,oa,ea,de,250),Te.activeTexture.set(ve.TEXTURE0),sa.texture&&sa.texture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE);const da=rl.getMorphValuesForProxy(Lt.key),Wt=da?1:0;da&&n.L(Ft,{morphing:{srcDemTile:da.from,dstDemTile:da.to,phase:n.cC(da.phase)}});const pa=n.cF(Lt.canonical),Ia=n.cG(pa.getCenter().lat),La=n.cH(Lt.canonical,pa,Ia,ra.worldSize/ra._pixelsPerMercatorPixel),Ea=n.bc(n.cI(Lt.canonical)),sr=jc(ra.expandedFarZProjMatrix,Xt,st,Ea,n.ag(ra.zoom),ot,ra.frustumCorners.TL,ra.frustumCorners.TR,ra.frustumCorners.BR,ra.frustumCorners.BL,ra.globeCenterInViewSpace,ra.globeRadius,Tt,ua,ra._farZ,La);if(Je(Lt,Wt),Ee&&(W.setupElevationDraw(sa,Ee,Ft),$.uploadCommonUniforms(Te,Ee,Lt.toUnwrapped()),gt)){const[Fr,mr,Or]=gt.getGridBuffers(Ia,ua!==0);Ee.draw($,Ca,it,zt,dt,vr.backCCW,sr,"globe_raster",Fr,mr,Or)}}}if(gt&&($.renderDefaultNorthPole||$.renderDefaultSouthPole)){const ra=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];et&&ra.push("CUSTOM_ANTIALIASING"),Ee=$.getOrCreateProgram("globeRaster",{defines:ra});for(const ua of ae){const{x:Ca,y:Lt,z:sa}=ua.canonical,zt=Lt===0,oa=Lt===(1<<sa)-1,[ea,da,Wt,pa]=gt.getPoleBuffers(sa,!1);if(pa&&(zt||oa)){const Ia=te.getTile(ua);Te.activeTexture.set(ve.TEXTURE0),Ia.texture&&Ia.texture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE);let La=n.cJ(sa,Ca,Be);const Ea=n.bc(n.cI(ua.canonical)),sr=(Fr,mr)=>Fr.draw($,ve.TRIANGLES,it,Rr.disabled,dt,vr.disabled,jc(Be.expandedFarZProjMatrix,La,La,Ea,0,ot,Be.frustumCorners.TL,Be.frustumCorners.TR,Be.frustumCorners.BR,Be.frustumCorners.BL,Be.globeCenterInViewSpace,Be.globeRadius,Tt,0,Be._farZ),"globe_pole_raster",mr,Wt,pa);W.setupElevationDraw(Ia,Ee,Ft),$.uploadCommonUniforms(Te,Ee,ua.toUnwrapped()),zt&&$.renderDefaultNorthPole&&sr(Ee,ea),oa&&$.renderDefaultSouthPole&&(La=n.ad.mat4.scale(n.ad.mat4.create(),La,[1,-1,1]),sr(Ee,da))}}}})(R,C,E,L,j);else{const $=R.context,W=$.gl;let te,ae;const de=R.shadowRenderer,Te=qs(R,R.longestCutoffRange),ve=dt=>{if(ae===dt)return;const it=[];it.push(Id[dt]),Te.shouldRenderCutoff&&it.push("RENDER_CUTOFF"),de&&(it.push("RENDER_SHADOWS","DEPTH_TEXTURE"),de.useNormalOffset&&it.push("NORMAL_OFFSET")),te=R.getOrCreateProgram("terrainRaster",{defines:it}),ae=dt},Ee=R.colorModeForRenderPass(),Ve=new ir(W.LEQUAL,ir.ReadWrite,R.depthRangeFor3D);rl.update(j);const Be=R.transform,et=bu(Be.zoom,C.exaggeration(),C.sourceCache._source.tileSize);let Je=[0,0,0];if(de){const dt=R.style.directionalLight,it=R.style.ambientLight;dt&&it&&(Je=Mc(R.style,dt,it))}{ae=-1;const dt=W.TRIANGLES,[it,st]=[C.gridIndexBuffer,C.gridSegments];for(const ot of L){const gt=E.getTile(ot),Tt=Rr.disabled,Xt=C.prevTerrainTileForTile[ot.key],Ft=C.terrainTileForTile[ot.key];Rf(Xt,Ft)&&rl.newMorphing(ot.key,Xt,Ft,j,250),$.activeTexture.set(W.TEXTURE0),gt.texture&&gt.texture.bind(W.LINEAR,W.CLAMP_TO_EDGE);const ra=rl.getMorphValuesForProxy(ot.key),ua=ra?1:0;let Ca;ra&&(Ca={morphing:{srcDemTile:ra.from,dstDemTile:ra.to,phase:n.cC(ra.phase)}});const Lt=$p(ot.projMatrix,Ld(ot.canonical,Be.renderWorldCopies)?et/10:et,Je);if(ve(ua),!te)continue;C.setupElevationDraw(gt,te,Ca);const sa=ot.toUnwrapped();de&&de.setupShadows(sa,te),R.uploadCommonUniforms($,te,sa,null,Te),te.draw(R,dt,Ve,Tt,Ee,vr.backCCW,Lt,"terrain_raster",C.gridBuffer,it,st)}}}}(c,this,this.proxySourceCache,o,this._updateTimestamp),this.renderingToTexture=!0,c.gpuTimingDeferredRenderEnd(),o.splice(0,o.length))}renderBatch(o){if(this._drapedRenderBatches.length===0)return o+1;this.renderingToTexture=!0;const c=this.painter,A=this.painter.context,R=this.proxySourceCache,C=this.proxiedCoords[R.id],E=this._drapedRenderBatches.shift(),L=c.style.order,j=[];let $=0;for(const W of C){const te=R.getTileByID(W.proxyTileKey),ae=R.proxyCachedFBO[W.key]?R.proxyCachedFBO[W.key][o]:void 0,de=ae!==void 0?R.renderCache[ae]:this.pool[$++],Te=ae!==void 0;if(te.texture=de.tex,Te&&!de.dirty){j.push(te.tileID);continue}let ve;A.bindFramebuffer.set(de.fb.framebuffer),this.renderedToTile=!1,de.dirty&&(A.clear({color:n.al.transparent,stencil:0}),de.dirty=!1);for(let Ee=E.start;Ee<=E.end;++Ee){const Ve=c.style._mergedLayers[L[Ee]];if(Ve.isHidden(c.transform.zoom))continue;const Be=c.style.getLayerSourceCache(Ve),et=Be?this.proxyToSource[W.key][Be.id]:[W];if(!et)continue;const Je=et;A.viewport.set([0,0,de.fb.width,de.fb.height]),ve!==(Be?Be.id:null)&&(this._setupStencil(de,et,Ve,Be),ve=Be?Be.id:null),c.renderLayer(c,Be,Ve,Je)}if(this._drapedRenderBatches.length===0)for(const Ee of this._pendingGroundEffectLayers){const Ve=c.style._mergedLayers[L[Ee]];if(Ve.isHidden(c.transform.zoom))continue;const Be=c.style.getLayerSourceCache(Ve),et=Be?this.proxyToSource[W.key][Be.id]:[W];if(!et)continue;const Je=et;A.viewport.set([0,0,de.fb.width,de.fb.height]),ve!==(Be?Be.id:null)&&(this._setupStencil(de,et,Ve,Be),ve=Be?Be.id:null),c.renderLayer(c,Be,Ve,Je)}this.renderedToTile?(de.dirty=!0,j.push(te.tileID)):Te||--$,$===5&&($=0,this.renderToBackBuffer(j))}return this.renderToBackBuffer(j),this.renderingToTexture=!1,A.bindFramebuffer.set(null),A.viewport.set([0,0,c.width,c.height]),E.end+1}postRender(){}isLayerOrderingCorrect(o){const c=o.order.length;let A=-1,R=c;for(let C=0;C<c;++C)this._style.isLayerDraped(o._mergedLayers[o.order[C]])?A=Math.max(A,C):R=Math.min(R,C);return R>A}getMinElevationBelowMSL(){let o=0;return this._visibleDemTiles.filter(c=>c.dem).forEach(c=>{o=Math.min(o,c.dem.tree.minimums[0])}),o===0?o:(o-30)*this._exaggeration}raycast(o,c,A){if(!this._visibleDemTiles)return null;const R=this._visibleDemTiles.filter(C=>C.dem).map(C=>{const E=C.tileID,L=1<<E.overscaledZ,{x:j,y:$}=E.canonical,W=j/L,te=(j+1)/L,ae=$/L,de=($+1)/L;return{minx:W,miny:ae,maxx:te,maxy:de,t:C.dem.tree.raycastRoot(W,ae,te,de,o,c,A),tile:C}});R.sort((C,E)=>(C.t!==null?C.t:Number.MAX_VALUE)-(E.t!==null?E.t:Number.MAX_VALUE));for(const C of R){if(C.t==null)return null;const E=C.tile.dem.tree.raycast(C.minx,C.miny,C.maxx,C.maxy,o,c,A);if(E!=null)return E}return null}_createFBO(){const o=this.painter.context,c=o.gl,A=this.drapeBufferSize;o.activeTexture.set(c.TEXTURE0);const R=new n.T(o,{width:A[0],height:A[1],data:null},c.RGBA8);R.bind(c.LINEAR,c.CLAMP_TO_EDGE);const C=o.createFramebuffer(A[0],A[1],!0,null);return C.colorAttachment.set(R.texture),C.depthAttachment=new Hp(o,C.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=o.createRenderbuffer(o.gl.DEPTH_STENCIL,A[0],A[1]),this._stencilRef=0,C.depthAttachment.set(this._sharedDepthStencil),o.clear({stencil:0})):C.depthAttachment.set(this._sharedDepthStencil),o.extTextureFilterAnisotropic&&c.texParameterf(c.TEXTURE_2D,o.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,o.extTextureFilterAnisotropicMax),{fb:C,tex:R,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache||this._style.hasLightTransitions())return!0;for(const o in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[o].hasTransition())return!0;return this._style.order.some(o=>{const c=this._style._mergedLayers[o],A=c.isHidden(this.painter.transform.zoom);return c.type==="hillshade"||c.type==="custom"?!A&&c.shouldRedrape():!A&&c.hasTransition()})}_clearLineLayersFromRenderCache(){let o=!1;for(const A of this._style.getSources())if(A instanceof sc){o=!0;break}if(!o)return;const c={};for(let A=0;A<this._style.order.length;++A){const R=this._style._mergedLayers[this._style.order[A]],C=this._style.getLayerSourceCache(R);if(C&&!c[C.id]&&!R.isHidden(this.painter.transform.zoom)&&R.type==="line"&&R.widthExpression()instanceof n.ab){c[C.id]=!0;for(const E of this.proxyCoords){const L=this.proxyToSource[E.key][C.id];if(L)for(const j of L)this._clearRenderCacheForTile(C.id,j)}}}}_clearRasterLayersFromRenderCache(){let o=!1;for(const A in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[A]._source instanceof Wo){o=!0;break}if(!o)return;const c={};for(let A=0;A<this._style.order.length;++A){const R=this._style._mergedLayers[this._style.order[A]],C=this._style.getLayerSourceCache(R);if(!C||c[C.id]||R.isHidden(this.painter.transform.zoom)||R.type!=="raster")continue;const E=R.paint.get("raster-fade-duration");for(const L of this.proxyCoords){const j=this.proxyToSource[L.key][C.id];if(j)for(const $ of j){const W=zl(C.getTile($),C.findLoadedParent($,0),C,this.painter.transform,E);(W.opacity!==1||W.mix!==0)&&this._clearRenderCacheForTile(C.id,$)}}}}_setupDrapedRenderBatches(){this._style.updateDrapeFirstLayers();const o=this._style.order,c=o.length;if(c===0)return;const A=[];this._pendingGroundEffectLayers=[];let R,C=0,E=this._style._mergedLayers[o[C]];for(;!this._style.isLayerDraped(E)&&E.isHidden(this.painter.transform.zoom)&&++C<c;)E=this._style._mergedLayers[o[C]];for(;C<c;++C){const L=this._style._mergedLayers[o[C]];L.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(L)?R===void 0&&(R=C):(L.type==="fill-extrusion"&&this._pendingGroundEffectLayers.push(C),R!==void 0&&(A.push({start:R,end:C-1}),R=void 0)))}if(R!==void 0&&A.push({start:R,end:C-1}),A.length!==0){const L=A[A.length-1];this._pendingGroundEffectLayers.every(j=>j>L.end)||n.w("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=A}_setupRenderCache(o){const c=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,c.renderCache.length>c.renderCachePool.length){const E=Object.values(c.proxyCachedFBO);c.proxyCachedFBO={};for(let L=0;L<E.length;++L){const j=Object.values(E[L]);c.renderCachePool.push(...j)}}return}this._clearRasterLayersFromRenderCache();const A=this.proxyCoords,R=this._tilesDirty;for(let E=A.length-1;E>=0;E--){const L=A[E];if(c.getTileByID(L.key),c.proxyCachedFBO[L.key]!==void 0){const j=o[L.key],$=this.proxyToSource[L.key];let W=0;for(const te in $){const ae=$[te],de=j[te];if(!de||de.length!==ae.length||ae.some((Te,ve)=>Te!==de[ve]||R[te]&&R[te].hasOwnProperty(Te.key))){W=-1;break}++W}for(const te in c.proxyCachedFBO[L.key])c.renderCache[c.proxyCachedFBO[L.key][te]].dirty=W<0||W!==Object.values(j).length}}const C=[...this._drapedRenderBatches];C.sort((E,L)=>L.end-L.start-(E.end-E.start));for(const E of C)for(const L of A){if(c.proxyCachedFBO[L.key])continue;let j=c.renderCachePool.pop();j===void 0&&c.renderCache.length<50&&(j=c.renderCache.length,c.renderCache.push(this._createFBO())),j!==void 0&&(c.proxyCachedFBO[L.key]={},c.proxyCachedFBO[L.key][E.start]=j,c.renderCache[j].dirty=!0)}this._tilesDirty={}}_setupStencil(o,c,A,R){if(!R||!this._sourceTilesOverlap[R.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const C=this.painter.context,E=C.gl;if(c.length<=1)return void(this._overlapStencilType=!1);let L;if(A.isTileClipped())L=c.length,this._overlapStencilMode.test={func:E.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(c[0].overscaledZ>c[c.length-1].overscaledZ))return void(this._overlapStencilType=!1);L=1,this._overlapStencilMode.test={func:E.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+L>255&&(C.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=L,this._overlapStencilMode.ref=this._stencilRef,A.isTileClipped()&&this._renderTileClippingMasks(c,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(o){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[o.key]),this._overlapStencilMode):Rr.disabled}_renderTileClippingMasks(o,c){const A=this.painter,R=this.painter.context,C=R.gl;A._tileClippingMaskIDs={},R.setColorMode(br.disabled),R.setDepthMode(ir.disabled);const E=A.getOrCreateProgram("clippingMask");for(const L of o){const j=A._tileClippingMaskIDs[L.key]=--c;E.draw(A,C.TRIANGLES,ir.disabled,new Rr({func:C.ALWAYS,mask:0},j,255,C.KEEP,C.KEEP,C.REPLACE),br.disabled,vr.disabled,Zc(L.projMatrix),"$clipping",A.tileExtentBuffer,A.quadTriangleIndexBuffer,A.tileExtentSegments)}}pointCoordinate(o){const c=this.painter.transform;if(o.x<0||o.x>c.width||o.y<0||o.y>c.height)return null;const A=[o.x,o.y,1,1];n.ad.vec4.transformMat4(A,A,c.pixelMatrixInverse),n.ad.vec4.scale(A,A,1/A[3]),A[0]/=c.worldSize,A[1]/=c.worldSize;const R=c._camera.position,C=n.bH(1,c.center.lat),E=[R[0],R[1],R[2]/C,0],L=n.ad.vec3.subtract([],A.slice(0,3),E);n.ad.vec3.normalize(L,L);const j=this.raycast(E,L,this._exaggeration);return j!==null&&j?(n.ad.vec3.scaleAndAdd(E,E,L,j),E[3]=E[2],E[2]*=C,E):null}_setupProxiedCoordsForOrtho(o,c,A){if(o.getSource()instanceof n.aK)return this._setupProxiedCoordsForImageSource(o,c,A);this._findCoveringTileCache[o.id]=this._findCoveringTileCache[o.id]||{};const R=this.proxiedCoords[o.id]=[],C=this.proxyCoords;for(let j=0;j<C.length;j++){const $=C[j],W=this._findTileCoveringTileID($,o);if(W){const te=this._createProxiedId($,W,A[$.key]&&A[$.key][o.id]);R.push(te),this.proxyToSource[$.key][o.id]=[te]}}let E=!1;const L=new Set;for(let j=0;j<c.length;j++){const $=o.getTile(c[j]);if(!$||!$.hasData())continue;const W=this._findTileCoveringTileID($.tileID,this.proxySourceCache);if(W&&W.tileID.canonical.z!==$.tileID.canonical.z){const te=this.proxyToSource[W.tileID.key][o.id],ae=this._createProxiedId(W.tileID,$,A[W.tileID.key]&&A[W.tileID.key][o.id]);te?te.splice(te.length-1,0,ae):this.proxyToSource[W.tileID.key][o.id]=[ae];const de=this.proxyToSource[W.tileID.key][o.id];L.has(de)||L.add(de),R.push(ae),E=!0}}if(this._sourceTilesOverlap[o.id]=E,E&&this._debugParams.sortTilesHiZFirst)for(const j of L)j.sort(($,W)=>W.overscaledZ-$.overscaledZ)}_setupProxiedCoordsForImageSource(o,c,A){if(!o.getSource().loaded())return;const R=this.proxiedCoords[o.id]=[],C=this.proxyCoords,E=o.getSource(),L=E.tileID;if(!L)return;const j=new n.P(L.x,L.y)._div(1<<L.z),$=E.coordinates.map(n.ac.fromLngLat).reduce((te,ae)=>(te.min.x=Math.min(te.min.x,ae.x-j.x),te.min.y=Math.min(te.min.y,ae.y-j.y),te.max.x=Math.max(te.max.x,ae.x-j.x),te.max.y=Math.max(te.max.y,ae.y-j.y),te),{min:new n.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new n.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),W=(te,ae)=>{const de=te.wrap+te.canonical.x/(1<<te.canonical.z),Te=te.canonical.y/(1<<te.canonical.z),ve=n.ai/(1<<te.canonical.z),Ee=ae.wrap+ae.canonical.x/(1<<ae.canonical.z),Ve=ae.canonical.y/(1<<ae.canonical.z);return de+ve<Ee+$.min.x||de>Ee+$.max.x||Te+ve<Ve+$.min.y||Te>Ve+$.max.y};for(let te=0;te<C.length;te++){const ae=C[te];for(let de=0;de<c.length;de++){const Te=o.getTile(c[de]);if(!Te||!Te.hasData()||W(ae,Te.tileID))continue;const ve=this._createProxiedId(ae,Te,A[ae.key]&&A[ae.key][o.id]),Ee=this.proxyToSource[ae.key][o.id];Ee?Ee.push(ve):this.proxyToSource[ae.key][o.id]=[ve],R.push(ve)}}}_createProxiedId(o,c,A){let R=this.orthoMatrix;if(A){const C=A.find(E=>E.key===c.tileID.key);if(C)return C}if(c.tileID.key!==o.key){const C=o.canonical.z-c.tileID.canonical.z;let E,L,j;R=n.ad.mat4.create();const $=c.tileID.wrap-o.wrap<<o.overscaledZ;C>0?(E=n.ai>>C,L=E*((c.tileID.canonical.x<<C)-o.canonical.x+$),j=E*((c.tileID.canonical.y<<C)-o.canonical.y)):(E=n.ai<<-C,L=n.ai*(c.tileID.canonical.x-(o.canonical.x+$<<-C)),j=n.ai*(c.tileID.canonical.y-(o.canonical.y<<-C))),n.ad.mat4.ortho(R,0,E,0,E,0,1),n.ad.mat4.translate(R,R,[L,j,0])}return new Jf(c.tileID,o.key,R)}_findTileCoveringTileID(o,c){let A=c.getTile(o);if(A&&A.hasData())return A;const R=this._findCoveringTileCache[c.id],C=R[o.key];if(A=C?c.getTileByID(C):null,A&&A.hasData()||C===null)return A;let E=A?A.tileID:o,L=E.overscaledZ;const j=c.getSource().minzoom,$=[];if(!C){const te=c.getSource().maxzoom;if(o.canonical.z>=te){const ae=o.canonical.z-te;c.getSource().reparseOverscaled?(L=Math.max(o.canonical.z+2,c.transform.tileZoom),E=new n.aH(L,o.wrap,te,o.canonical.x>>ae,o.canonical.y>>ae)):ae!==0&&(L=te,E=new n.aH(L,o.wrap,te,o.canonical.x>>ae,o.canonical.y>>ae))}E.key!==o.key&&($.push(E.key),A=c.getTile(E))}const W=te=>{$.forEach(ae=>{R[ae]=te}),$.length=0};for(L-=1;L>=j&&(!A||!A.hasData());L--){A&&W(A.tileID.key);const te=E.calculateScaledKey(L);if(A=c.getTileByID(te),A&&A.hasData())break;const ae=R[te];if(ae===null)break;ae===void 0?$.push(te):A=c.getTileByID(ae)}return W(A?A.tileID.key:null),A&&A.hasData()?A:null}findDEMTileFor(o){return this.enabled?this._findTileCoveringTileID(o,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(o,c){let A=this._tilesDirty[o];A||(A=this._tilesDirty[o]={}),A[c.key]=!0}}function Hc(g,o,c){const A=function(L,j,$){const W=n.ad.vec3.dot(j,L),te=n.ad.vec3.dot($,[.2126,.7152,.0722]),ae=(Te,ve,Ee)=>(1-Ee)*Te+Ee*ve,de=ae(1-.3*Math.min(te,1),1,Math.min(W+1,1));return ae(.92,1,Math.asin(n.ay(j[2],-1,1))/Math.PI+.5)*de}(g,[0,0,1],o),R=[0,0,0];n.ad.vec3.scale(R,c.slice(0,3),A);const C=[0,0,0];n.ad.vec3.scale(C,o.slice(0,3),g[2]);const E=[0,0,0];return n.ad.vec3.add(E,R,C),n.cg(E)}const Ds=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],Kp=["stars","rainParticle","snowParticle","fillExtrusion","fillExtrusionGroundEffect","elevatedStructures","model","symbol"];class qm{static cacheKey(o,c,A,R){let C=`${c}${R?R.cacheKey:""}`;for(const E of A)o.usedDefines.includes(E)&&(C+=`/${E}`);return C}constructor(o,c,A,R,C,E){const L=o.gl;this.program=L.createProgram(),this.configuration=R,this.name=c,this.fixedDefines=[...E];const j=R?R.getBinderAttributes():[],$=(A.staticAttributes||[]).concat(j);let W=R?R.defines():[];W=W.concat(E.map(Ee=>`#define ${Ee}`));const te=`#version 300 es
`;let ae=te+W.concat("precision mediump float;",kc,eu.fragmentSource).join(`
`);for(const Ee of A.fragmentIncludes)ae+=`
${qi[Ee]}`;ae+=`
${A.fragmentSource}`;let de=te+W.concat("precision highp float;",kc,eu.vertexSource).join(`
`);for(const Ee of A.vertexIncludes)de+=`
${qi[Ee]}`;this.forceManualRenderingForInstanceIDShaders=o.forceManualRenderingForInstanceIDShaders&&A.vertexSource.indexOf("gl_InstanceID")!==-1,this.forceManualRenderingForInstanceIDShaders&&(de+=`
uniform int u_instanceID;
`),de+=`
${A.vertexSource}`,this.forceManualRenderingForInstanceIDShaders&&(de=de.replaceAll("gl_InstanceID","u_instanceID"));const Te=L.createShader(L.FRAGMENT_SHADER);if(L.isContextLost())return void(this.failedToCreate=!0);L.shaderSource(Te,ae),L.compileShader(Te),L.attachShader(this.program,Te);const ve=L.createShader(L.VERTEX_SHADER);if(L.isContextLost())this.failedToCreate=!0;else{L.shaderSource(ve,de),L.compileShader(ve),L.attachShader(this.program,ve),this.attributes={},this.numAttributes=$.length;for(let Ee=0;Ee<this.numAttributes;Ee++)if($[Ee]){const Ve=$[Ee].startsWith("a_")?$[Ee]:`a_${$[Ee]}`;L.bindAttribLocation(this.program,Ee,Ve),this.attributes[Ve]=Ee}L.linkProgram(this.program),L.deleteShader(ve),L.deleteShader(Te),this.fixedUniforms=C(o),this.binderUniforms=R?R.getUniforms(o):[],this.forceManualRenderingForInstanceIDShaders&&(this.instancingUniforms=(Ee=>({u_instanceID:new n.bN(Ee)}))(o)),(E.includes("TERRAIN")||c.indexOf("symbol")!==-1||c.indexOf("circle")!==-1)&&(this.terrainUniforms=(Ee=>({u_dem:new n.bN(Ee),u_dem_prev:new n.bN(Ee),u_dem_tl:new n.bK(Ee),u_dem_scale:new n.bM(Ee),u_dem_tl_prev:new n.bK(Ee),u_dem_scale_prev:new n.bM(Ee),u_dem_size:new n.bM(Ee),u_dem_lerp:new n.bM(Ee),u_exaggeration:new n.bM(Ee),u_depth:new n.bN(Ee),u_depth_size_inv:new n.bK(Ee),u_depth_range_unpack:new n.bK(Ee),u_occluder_half_size:new n.bM(Ee),u_occlusion_depth_offset:new n.bM(Ee),u_meter_to_dem:new n.bM(Ee),u_label_plane_matrix_inv:new n.bJ(Ee)}))(o)),E.includes("GLOBE")&&(this.globeUniforms=(Ee=>({u_tile_tl_up:new n.bL(Ee),u_tile_tr_up:new n.bL(Ee),u_tile_br_up:new n.bL(Ee),u_tile_bl_up:new n.bL(Ee),u_tile_up_scale:new n.bM(Ee)}))(o)),E.includes("FOG")&&(this.fogUniforms=(Ee=>({u_fog_matrix:new n.bJ(Ee),u_fog_range:new n.bK(Ee),u_fog_color:new n.cb(Ee),u_fog_horizon_blend:new n.bM(Ee),u_fog_vertical_limit:new n.bK(Ee),u_fog_temporal_offset:new n.bM(Ee),u_frustum_tl:new n.bL(Ee),u_frustum_tr:new n.bL(Ee),u_frustum_br:new n.bL(Ee),u_frustum_bl:new n.bL(Ee),u_globe_pos:new n.bL(Ee),u_globe_radius:new n.bM(Ee),u_globe_transition:new n.bM(Ee),u_is_globe:new n.bN(Ee),u_viewport:new n.bK(Ee)}))(o)),E.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(Ee=>({u_cutoff_params:new n.cb(Ee)}))(o)),E.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(Ee=>({u_lighting_ambient_color:new n.bL(Ee),u_lighting_directional_dir:new n.bL(Ee),u_lighting_directional_color:new n.bL(Ee),u_ground_radiance:new n.bL(Ee)}))(o)),E.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(Ee=>({u_light_matrix_0:new n.bJ(Ee),u_light_matrix_1:new n.bJ(Ee),u_fade_range:new n.bK(Ee),u_shadow_normal_offset:new n.bL(Ee),u_shadow_intensity:new n.bM(Ee),u_shadow_texel_size:new n.bM(Ee),u_shadow_map_resolution:new n.bM(Ee),u_shadow_direction:new n.bL(Ee),u_shadow_bias:new n.bL(Ee),u_shadowmap_0:new n.bN(Ee),u_shadowmap_1:new n.bN(Ee)}))(o))}}setTerrainUniformValues(o,c){if(!this.terrainUniforms)return;const A=this.terrainUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const R in c)A[R]&&A[R].set(this.program,R,c[R])}}setGlobeUniformValues(o,c){if(!this.globeUniforms)return;const A=this.globeUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const R in c)A[R]&&A[R].set(this.program,R,c[R])}}setFogUniformValues(o,c){if(!this.fogUniforms)return;const A=this.fogUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const R in c)A[R].set(this.program,R,c[R])}}setCutoffUniformValues(o,c){if(!this.cutoffUniforms)return;const A=this.cutoffUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const R in c)A[R].set(this.program,R,c[R])}}setLightsUniformValues(o,c){if(!this.lightsUniforms)return;const A=this.lightsUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const R in c)A[R].set(this.program,R,c[R])}}setShadowUniformValues(o,c){if(this.failedToCreate||!this.shadowUniforms)return;const A=this.shadowUniforms;o.program.set(this.program);for(const R in c)A[R].set(this.program,R,c[R])}_drawDebugWireframe(o,c,A,R,C,E,L,j,$,W){const te=o.options.wireframe;if(te.terrain===!1&&te.layers2D===!1&&te.layers3D===!1)return;const ae=o.context;if(!(!(!te.terrain||this.name!=="terrainRaster"&&this.name!=="globeRaster")||!(!te.layers2D||o._terrain&&o._terrain.renderingToTexture||!Ds.includes(this.name))||!(!te.layers3D||!Kp.includes(this.name))))return;const de=ae.gl,Te=o.wireframeDebugCache.getLinesFromTrianglesBuffer(o.frameCounter,C,ae);if(!Te)return;const ve=[...this.fixedDefines];ve.push("DEBUG_WIREFRAME");const Ee=o.getOrCreateProgram(this.name,{config:this.configuration,defines:ve});ae.program.set(Ee.program);const Ve=(Je,dt,it)=>{if(dt[Je]&&it[Je])for(const st in dt[Je])it[Je][st]&&it[Je][st].set(it.program,st,dt[Je][st].current)};$&&$.setUniforms(Ee.program,ae,Ee.binderUniforms,L,{zoom:j}),Ve("fixedUniforms",this,Ee),Ve("terrainUniforms",this,Ee),Ve("globeUniforms",this,Ee),Ve("fogUniforms",this,Ee),Ve("lightsUniforms",this,Ee),Ve("shadowUniforms",this,Ee),Te.bind(),ae.setColorMode(new br([de.ONE,de.ONE_MINUS_SRC_ALPHA,de.ZERO,de.ONE],n.al.transparent,[!0,!0,!0,!1])),ae.setDepthMode(new ir(c.func===de.LESS?de.LEQUAL:c.func,ir.ReadOnly,c.range)),ae.setStencilMode(Rr.disabled);const Be=3*E.primitiveLength*2,et=3*E.primitiveOffset*2*2;if(this.forceManualRenderingForInstanceIDShaders){const Je=W||1;for(let dt=0;dt<Je;++dt)Ee.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",dt),de.drawElements(de.LINES,Be,de.UNSIGNED_SHORT,et)}else W&&W>1?de.drawElementsInstanced(de.LINES,Be,de.UNSIGNED_SHORT,et,W):de.drawElements(de.LINES,Be,de.UNSIGNED_SHORT,et);C.bind(),ae.program.set(this.program),ae.setDepthMode(c),ae.setStencilMode(A),ae.setColorMode(R)}checkUniforms(o,c,A){if(this.fixedDefines.includes(c)){for(const R of Object.keys(A))if(!A[R].initialized)throw new Error(`Program '${this.name}', from draw '${o}': uniform ${R} not set but required by ${c} being defined`)}}draw(o,c,A,R,C,E,L,j,$,W,te,ae,de,Te,ve,Ee){const Ve=o.context,Be=Ve.gl;if(this.failedToCreate)return;Ve.program.set(this.program),Ve.setDepthMode(A),Ve.setStencilMode(R),Ve.setColorMode(C),Ve.setCullFace(E);for(const dt of Object.keys(this.fixedUniforms))this.fixedUniforms[dt].set(this.program,dt,L[dt]);Te&&Te.setUniforms(this.program,Ve,this.binderUniforms,ae,{zoom:de});const et={[Be.POINTS]:1,[Be.LINES]:2,[Be.TRIANGLES]:3,[Be.LINE_STRIP]:1}[c];this.checkUniforms(j,"RENDER_SHADOWS",this.shadowUniforms);const Je=Ee&&Ee>0?1:void 0;for(const dt of te.get()){const it=dt.vaos||(dt.vaos={});if((it[j]||(it[j]=new Bc)).bind(Ve,this,$,Te?Te.getPaintVertexBuffers():[],W,dt.vertexOffset,ve||[],Je),this.forceManualRenderingForInstanceIDShaders){const st=Ee||1;for(let ot=0;ot<st;++ot)this.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",ot),W?Be.drawElements(c,dt.primitiveLength*et,Be.UNSIGNED_SHORT,dt.primitiveOffset*et*2):Be.drawArrays(c,dt.vertexOffset,dt.vertexLength)}else Ee&&Ee>1?Be.drawElementsInstanced(c,dt.primitiveLength*et,Be.UNSIGNED_SHORT,dt.primitiveOffset*et*2,Ee):W?Be.drawElements(c,dt.primitiveLength*et,Be.UNSIGNED_SHORT,dt.primitiveOffset*et*2):Be.drawArrays(c,dt.vertexOffset,dt.vertexLength);c===Be.TRIANGLES&&W&&this._drawDebugWireframe(o,A,R,C,W,dt,ae,de,Te,Ee)}}}function Tf(g,o){const c=Math.pow(2,o.tileID.overscaledZ),A=o.tileSize*Math.pow(2,g.transform.tileZoom)/c,R=A*(o.tileID.canonical.x+o.tileID.wrap*c),C=A*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture?o.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/n.at(o,1,g.transform.tileZoom),u_pixel_coord_upper:[R>>16,C>>16],u_pixel_coord_lower:[65535&R,65535&C]}}const Wp={terrain:0,flat:1},to=n.ad.mat4.create(),jh=(g,o,c,A,R,C,E,L,j,$,W,te,ae,de,Te,ve,Ee,Ve)=>{const Be=o.style.light,et=Be.properties.get("position"),Je=[et.x,et.y,et.z],dt=n.ad.mat3.create();Be.properties.get("anchor")==="viewport"&&(n.ad.mat3.fromRotation(dt,-o.transform.angle),n.ad.vec3.transformMat3(Je,Je,dt));const it=Be.properties.get("color"),st=o.transform,ot={u_matrix:g,u_lightpos:Je,u_lightintensity:Be.properties.get("intensity"),u_lightcolor:[it.r,it.g,it.b],u_vertical_gradient:+c,u_opacity:A,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:to,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_height_type:Wp[$],u_base_type:Wp[W],u_ao:R,u_edge_radius:C,u_width_scale:E,u_flood_light_color:Te,u_vertical_scale:ve,u_flood_light_intensity:Ee,u_ground_shadow_factor:Ve};return st.projection.name==="globe"&&(ot.u_tile_id=[L.canonical.x,L.canonical.y,1<<L.canonical.z],ot.u_zoom_transition=te,ot.u_inv_rot_matrix=de,ot.u_merc_center=ae,ot.u_up_dir=st.projection.upVector(new n.bT(0,0,0),ae[0]*n.ai,ae[1]*n.ai),ot.u_height_lift=j),ot},G=(g,o,c,A,R,C)=>({u_matrix:g,u_edge_radius:o,u_width_scale:c,u_vertical_scale:A,u_height_type:Wp[R],u_base_type:Wp[C]}),Q=(g,o,c,A,R,C,E,L,j,$,W,te,ae,de,Te,ve,Ee)=>{const Ve=jh(g,o,c,A,R,C,E,L,$,W,te,ae,de,Te,ve,Ee,1,[0,0,0]),Be={u_height_factor:-Math.pow(2,L.overscaledZ)/j.tileSize/8};return n.l(Ve,Tf(o,j),Be)},fe=(g,o)=>({u_matrix:g,u_emissive_strength:o}),Ne=(g,o,c,A)=>n.l(fe(g,o),Tf(c,A)),Ge=(g,o,c)=>({u_matrix:g,u_world:c,u_emissive_strength:o}),Qe=(g,o,c,A,R)=>n.l(Ne(g,o,c,A),{u_world:R}),at=(g,o,c,A,R)=>({u_matrix:g,u_camera_pos:[o[0],o[1],o[2]],u_depth_bias:c,u_height_scale:A,u_reset_depth:R}),lt=(g,o,c,A)=>{const R=n.ai/c.tileSize;return{u_matrix:g,u_camera_to_center_distance:o.getCameraToCenterDistance(A),u_extrude_scale:[o.pixelsToGLUnits[0]/R,o.pixelsToGLUnits[1]/R]}},pt=(g,o,c=1)=>({u_matrix:g,u_color:o.toRenderColor(null),u_overlay:0,u_overlay_scale:c}),Ct=n.ad.mat4.create(),Qt=(g,o,c,A,R,C,E)=>{const L=g.transform,j=L.projection.name==="globe",$=j?n.cO(L.zoom,o.canonical)*L._pixelsPerMercatorPixel:n.at(c,1,C),W={u_matrix:o.projMatrix,u_extrude_scale:$,u_intensity:E,u_inv_rot_matrix:Ct,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(j){W.u_inv_rot_matrix=A,W.u_merc_center=R,W.u_tile_id=[o.canonical.x,o.canonical.y,1<<o.canonical.z],W.u_zoom_transition=n.ag(L.zoom);const te=R[0]*n.ai,ae=R[1]*n.ai;W.u_up_dir=L.projection.upVector(new n.bT(0,0,0),te,ae)}return W};function Pt(g,[o,c,A,R],[C,E]){if(C===E)return[0,0,0,0];const L=255*(g-1)/(g*(E-C));return[o*L,c*L,A*L,R*L]}function _a(g,o,[c,A]){return c===A?0:.5/g+(o-c)*(g-1)/(g*(A-c))}const na=(g,o,c,A,R,C,E,L,j,$,W,te,ae,de,Te,ve,Ee,Ve,Be,et,Je)=>({u_matrix:g,u_normalize_matrix:o,u_globe_matrix:c,u_merc_matrix:A,u_grid_matrix:R,u_tl_parent:C,u_scale_parent:$,u_fade_t:W.mix,u_opacity:W.opacity*te.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:te.paint.get("raster-brightness-min"),u_brightness_high:te.paint.get("raster-brightness-max"),u_saturation_factor:n.cP(te.paint.get("raster-saturation")),u_contrast_factor:n.cQ(te.paint.get("raster-contrast")),u_spin_weights:Ra(te.paint.get("raster-hue-rotate")),u_perspective_transform:ae,u_raster_elevation:de,u_zoom_transition:E,u_merc_center:L,u_cutoff_params:j,u_colorization_mix:Pt(n.cR,ve,Ve),u_colorization_offset:_a(n.cR,Ee,Ve),u_color_ramp:Te,u_texture_offset:[et/(Be+2*et),Be/(Be+2*et)],u_texture_res:[Be+2*et,Be+2*et],u_emissive_strength:Je});function Ra(g){g*=Math.PI/180;const o=Math.sin(g),c=Math.cos(g);return[(2*c+1)/3,(-Math.sqrt(3)*o-c+1)/3,(Math.sqrt(3)*o-c+1)/3]}const fa=.05,wt=(g,o,c,A,R,C,E,L,j,$,W,te)=>({u_matrix:g,u_normalize_matrix:o,u_globe_matrix:c,u_merc_matrix:A,u_grid_matrix:R,u_tl_parent:C,u_scale_parent:$,u_fade_t:W.mix,u_opacity:W.opacity,u_image0:0,u_image1:1,u_raster_elevation:te,u_zoom_transition:E,u_merc_center:L,u_cutoff_params:j}),aa=(g,o,c,A,R,C,E,L,j,$)=>({u_particle_texture:g,u_particle_texture_side_len:o,u_tile_offset:c,u_velocity:A,u_color_ramp:C,u_velocity_res:R,u_max_speed:E,u_uv_offset:L,u_data_scale:[255*j[0],255*j[1]],u_data_offset:$,u_particle_pos_scale:1.1,u_particle_pos_offset:[fa,fa]}),Ga=(g,o,c,A,R,C,E,L,j,$)=>({u_particle_texture:g,u_particle_texture_side_len:o,u_velocity:c,u_velocity_res:A,u_max_speed:R,u_speed_factor:C,u_reset_rate:E,u_rand_seed:Math.random(),u_uv_offset:L,u_data_scale:[255*j[0],255*j[1]],u_data_offset:$,u_particle_pos_scale:1.1,u_particle_pos_offset:[fa,fa]}),Ka=n.ad.mat4.create(),qa=(g,o,c,A,R,C,E,L,j,$,W,te,ae,de,Te,ve,Ee,Ve,Be,et,Je,dt)=>{const it=R.transform,st={u_is_size_zoom_constant:+(g==="constant"||g==="source"),u_is_size_feature_constant:+(g==="constant"||g==="camera"),u_size_t:o?o.uSizeT:0,u_size:o?o.uSize:0,u_camera_to_center_distance:it.getCameraToCenterDistance(Be),u_rotate_symbol:+c,u_aspect_ratio:it.width/it.height,u_fade_change:R.options.fadeDuration?R.symbolFadeChange:1,u_matrix:C,u_label_plane_matrix:E,u_coord_matrix:L,u_is_text:+$,u_elevation_from_sea:j?1:0,u_pitch_with_map:+A,u_texsize:W,u_texsize_icon:te,u_texture:0,u_texture_icon:1,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Ka,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Ka,u_up_vector:[0,-1,0],u_color_adj_mat:et,u_icon_transition:Je||0,u_gamma_scale:A?R.transform.getCameraToCenterDistance(Be)*Math.cos(R.terrain?0:R.transform._pitch):1,u_device_pixel_ratio:n.q.devicePixelRatio,u_is_halo:1,u_scale_factor:dt||1};return Be.name==="globe"&&(st.u_tile_id=[de.canonical.x,de.canonical.y,1<<de.canonical.z],st.u_zoom_transition=Te,st.u_inv_rot_matrix=Ee,st.u_merc_center=ve,st.u_camera_forward=it._camera.forward(),st.u_ecef_origin=n.cS(it.globeMatrix,de.toUnwrapped()),st.u_tile_matrix=Float32Array.from(it.globeMatrix),st.u_up_vector=Ve),st},Sr=(g,o,c,A)=>({u_matrix:g,u_emissive_strength:o,u_opacity:c,u_color:A}),pr=(g,o,c,A,R,C,E,L,j)=>n.l(function($,W,te,ae,de,Te){const{width:ve,height:Ee}=ae.imageManager.getPixelSize(W),Ve=Math.pow(2,Te.tileID.overscaledZ),Be=Te.tileSize*Math.pow(2,ae.transform.tileZoom)/Ve,et=Be*(Te.tileID.canonical.x+Te.tileID.wrap*Ve),Je=Be*Te.tileID.canonical.y;return{u_image:0,u_pattern_tl:te.tl,u_pattern_br:te.br,u_texsize:[ve,Ee],u_pattern_size:te.displaySize,u_pattern_units_to_pixels:de?[ae.transform.width,-1*ae.transform.height]:[1/n.at(Te,1,ae.transform.tileZoom),1/n.at(Te,1,ae.transform.tileZoom)],u_pixel_coord_upper:[et>>16,Je>>16],u_pixel_coord_lower:[65535&et,65535&Je]}}(0,C,E,A,L,j),{u_matrix:g,u_emissive_strength:o,u_opacity:c}),rn=new Float32Array(n.ad.mat4.identity([])),ur=(g,o,c,A,R,C,E,L,j,$,W,te,ae,de=[0,0,0],Te)=>{const ve=R.style.light,Ee=ve.properties.get("position"),Ve=[-Ee.x,-Ee.y,Ee.z],Be=n.ad.mat3.create();ve.properties.get("anchor")==="viewport"&&(n.ad.mat3.fromRotation(Be,-R.transform.angle),n.ad.vec3.transformMat3(Ve,Ve,Be));const et=W.alphaMode==="MASK",Je=ve.properties.get("color").toRenderColor(null),dt=ae.paint.get("model-ambient-occlusion-intensity"),it=ae.paint.get("model-color").constantOr(n.al.white).toRenderColor(null),st=ae.paint.get("model-color-mix-intensity").constantOr(0);return{u_matrix:g,u_lighting_matrix:o,u_normal_matrix:c,u_node_matrix:A||rn,u_lightpos:Ve,u_lightintensity:ve.properties.get("intensity"),u_lightcolor:[Je.r,Je.g,Je.b],u_camera_pos:de,u_opacity:C,u_baseTextureIsAlpha:0,u_alphaMask:+et,u_alphaCutoff:W.alphaCutoff,u_baseColorFactor:[E.r,E.g,E.b,E.a],u_emissiveFactor:[L[0],L[1],L[2],1],u_metallicFactor:j,u_roughnessFactor:$,u_baseColorTexture:Ai.BaseColor,u_metallicRoughnessTexture:Ai.MetallicRoughness,u_normalTexture:Ai.Normal,u_occlusionTexture:Ai.Occlusion,u_emissionTexture:Ai.Emission,u_lutTexture:Ai.LUT,u_color_mix:[it.r,it.g,it.b,st],u_aoIntensity:dt,u_emissive_strength:te,u_occlusionTextureTransform:Te||[0,0,0,0]}},vi=(g,o=rn,c=rn)=>({u_matrix:g,u_instance:o,u_node_matrix:c}),xi={fillExtrusion:g=>({u_matrix:new n.bJ(g),u_lightpos:new n.bL(g),u_lightintensity:new n.bM(g),u_lightcolor:new n.bL(g),u_vertical_gradient:new n.bM(g),u_opacity:new n.bM(g),u_edge_radius:new n.bM(g),u_width_scale:new n.bM(g),u_ao:new n.bK(g),u_height_type:new n.bN(g),u_base_type:new n.bN(g),u_tile_id:new n.bL(g),u_zoom_transition:new n.bM(g),u_inv_rot_matrix:new n.bJ(g),u_merc_center:new n.bK(g),u_up_dir:new n.bL(g),u_height_lift:new n.bM(g),u_flood_light_color:new n.bL(g),u_vertical_scale:new n.bM(g),u_flood_light_intensity:new n.bM(g),u_ground_shadow_factor:new n.bL(g)}),fillExtrusionDepth:g=>({u_matrix:new n.bJ(g),u_edge_radius:new n.bM(g),u_width_scale:new n.bM(g),u_vertical_scale:new n.bM(g),u_height_type:new n.bN(g),u_base_type:new n.bN(g)}),fillExtrusionPattern:g=>({u_matrix:new n.bJ(g),u_lightpos:new n.bL(g),u_lightintensity:new n.bM(g),u_lightcolor:new n.bL(g),u_vertical_gradient:new n.bM(g),u_height_factor:new n.bM(g),u_edge_radius:new n.bM(g),u_width_scale:new n.bM(g),u_ao:new n.bK(g),u_height_type:new n.bN(g),u_base_type:new n.bN(g),u_tile_id:new n.bL(g),u_zoom_transition:new n.bM(g),u_inv_rot_matrix:new n.bJ(g),u_merc_center:new n.bK(g),u_up_dir:new n.bL(g),u_height_lift:new n.bM(g),u_image:new n.bN(g),u_texsize:new n.bK(g),u_pixel_coord_upper:new n.bK(g),u_pixel_coord_lower:new n.bK(g),u_tile_units_to_pixels:new n.bM(g),u_opacity:new n.bM(g)}),fillExtrusionGroundEffect:g=>({u_matrix:new n.bJ(g),u_opacity:new n.bM(g),u_ao_pass:new n.bM(g),u_meter_to_tile:new n.bM(g),u_ao:new n.bK(g),u_flood_light_intensity:new n.bM(g),u_flood_light_color:new n.bL(g),u_attenuation:new n.bM(g),u_edge_radius:new n.bM(g),u_fb:new n.bN(g),u_fb_size:new n.bM(g),u_dynamic_offset:new n.bM(g)}),fill:g=>({u_matrix:new n.bJ(g),u_emissive_strength:new n.bM(g)}),fillPattern:g=>({u_matrix:new n.bJ(g),u_emissive_strength:new n.bM(g),u_image:new n.bN(g),u_texsize:new n.bK(g),u_pixel_coord_upper:new n.bK(g),u_pixel_coord_lower:new n.bK(g),u_tile_units_to_pixels:new n.bM(g)}),fillOutline:g=>({u_matrix:new n.bJ(g),u_emissive_strength:new n.bM(g),u_world:new n.bK(g)}),fillOutlinePattern:g=>({u_matrix:new n.bJ(g),u_emissive_strength:new n.bM(g),u_world:new n.bK(g),u_image:new n.bN(g),u_texsize:new n.bK(g),u_pixel_coord_upper:new n.bK(g),u_pixel_coord_lower:new n.bK(g),u_tile_units_to_pixels:new n.bM(g)}),elevatedStructures:g=>({u_matrix:new n.bJ(g)}),elevatedStructuresDepthReconstruct:g=>({u_matrix:new n.bJ(g),u_camera_pos:new n.bL(g),u_depth_bias:new n.bM(g),u_height_scale:new n.bM(g),u_reset_depth:new n.bM(g)}),circle:n.cT,collisionBox:g=>({u_matrix:new n.bJ(g),u_camera_to_center_distance:new n.bM(g),u_extrude_scale:new n.bK(g)}),collisionCircle:g=>({u_matrix:new n.bJ(g),u_inv_matrix:new n.bJ(g),u_camera_to_center_distance:new n.bM(g),u_viewport_size:new n.bK(g)}),debug:g=>({u_color:new n.cA(g),u_matrix:new n.bJ(g),u_overlay:new n.bN(g),u_overlay_scale:new n.bM(g)}),clippingMask:g=>({u_matrix:new n.bJ(g)}),heatmap:g=>({u_extrude_scale:new n.bM(g),u_intensity:new n.bM(g),u_matrix:new n.bJ(g),u_inv_rot_matrix:new n.bJ(g),u_merc_center:new n.bK(g),u_tile_id:new n.bL(g),u_zoom_transition:new n.bM(g),u_up_dir:new n.bL(g)}),heatmapTexture:g=>({u_image:new n.bN(g),u_color_ramp:new n.bN(g),u_opacity:new n.bM(g)}),hillshade:g=>({u_matrix:new n.bJ(g),u_image:new n.bN(g),u_latrange:new n.bK(g),u_light:new n.bK(g),u_shadow:new n.cA(g),u_highlight:new n.cA(g),u_emissive_strength:new n.bM(g),u_accent:new n.cA(g)}),hillshadePrepare:g=>({u_matrix:new n.bJ(g),u_image:new n.bN(g),u_dimension:new n.bK(g),u_zoom:new n.bM(g)}),line:n.cU,linePattern:n.cV,raster:g=>({u_matrix:new n.bJ(g),u_normalize_matrix:new n.bJ(g),u_globe_matrix:new n.bJ(g),u_merc_matrix:new n.bJ(g),u_grid_matrix:new n.cB(g),u_tl_parent:new n.bK(g),u_scale_parent:new n.bM(g),u_fade_t:new n.bM(g),u_opacity:new n.bM(g),u_image0:new n.bN(g),u_image1:new n.bN(g),u_brightness_low:new n.bM(g),u_brightness_high:new n.bM(g),u_saturation_factor:new n.bM(g),u_contrast_factor:new n.bM(g),u_spin_weights:new n.bL(g),u_perspective_transform:new n.bK(g),u_raster_elevation:new n.bM(g),u_zoom_transition:new n.bM(g),u_merc_center:new n.bK(g),u_cutoff_params:new n.cb(g),u_colorization_mix:new n.cb(g),u_colorization_offset:new n.bM(g),u_color_ramp:new n.bN(g),u_texture_offset:new n.bK(g),u_texture_res:new n.bK(g),u_emissive_strength:new n.bM(g)}),rasterParticle:g=>({u_matrix:new n.bJ(g),u_normalize_matrix:new n.bJ(g),u_globe_matrix:new n.bJ(g),u_merc_matrix:new n.bJ(g),u_grid_matrix:new n.cB(g),u_tl_parent:new n.bK(g),u_scale_parent:new n.bM(g),u_fade_t:new n.bM(g),u_opacity:new n.bM(g),u_image0:new n.bN(g),u_image1:new n.bN(g),u_raster_elevation:new n.bM(g),u_zoom_transition:new n.bM(g),u_merc_center:new n.bK(g),u_cutoff_params:new n.cb(g)}),rasterParticleTexture:g=>({u_texture:new n.bN(g),u_opacity:new n.bM(g)}),rasterParticleDraw:g=>({u_particle_texture:new n.bN(g),u_particle_texture_side_len:new n.bM(g),u_tile_offset:new n.bK(g),u_velocity:new n.bN(g),u_color_ramp:new n.bN(g),u_velocity_res:new n.bK(g),u_max_speed:new n.bM(g),u_uv_offset:new n.bK(g),u_data_scale:new n.bK(g),u_data_offset:new n.bM(g),u_particle_pos_scale:new n.bM(g),u_particle_pos_offset:new n.bK(g)}),rasterParticleUpdate:g=>({u_particle_texture:new n.bN(g),u_particle_texture_side_len:new n.bM(g),u_velocity:new n.bN(g),u_velocity_res:new n.bK(g),u_max_speed:new n.bM(g),u_speed_factor:new n.bM(g),u_reset_rate:new n.bM(g),u_rand_seed:new n.bM(g),u_uv_offset:new n.bK(g),u_data_scale:new n.bK(g),u_data_offset:new n.bM(g),u_particle_pos_scale:new n.bM(g),u_particle_pos_offset:new n.bK(g)}),symbol:g=>({u_is_size_zoom_constant:new n.bN(g),u_is_size_feature_constant:new n.bN(g),u_size_t:new n.bM(g),u_size:new n.bM(g),u_camera_to_center_distance:new n.bM(g),u_rotate_symbol:new n.bN(g),u_aspect_ratio:new n.bM(g),u_fade_change:new n.bM(g),u_matrix:new n.bJ(g),u_label_plane_matrix:new n.bJ(g),u_coord_matrix:new n.bJ(g),u_is_text:new n.bN(g),u_elevation_from_sea:new n.bN(g),u_pitch_with_map:new n.bN(g),u_texsize:new n.bK(g),u_texsize_icon:new n.bK(g),u_texture:new n.bN(g),u_texture_icon:new n.bN(g),u_gamma_scale:new n.bM(g),u_device_pixel_ratio:new n.bM(g),u_tile_id:new n.bL(g),u_zoom_transition:new n.bM(g),u_inv_rot_matrix:new n.bJ(g),u_merc_center:new n.bK(g),u_camera_forward:new n.bL(g),u_tile_matrix:new n.bJ(g),u_up_vector:new n.bL(g),u_ecef_origin:new n.bL(g),u_is_halo:new n.bN(g),u_icon_transition:new n.bM(g),u_color_adj_mat:new n.bJ(g),u_scale_factor:new n.bM(g)}),background:g=>({u_matrix:new n.bJ(g),u_emissive_strength:new n.bM(g),u_opacity:new n.bM(g),u_color:new n.cA(g)}),backgroundPattern:g=>({u_matrix:new n.bJ(g),u_emissive_strength:new n.bM(g),u_opacity:new n.bM(g),u_image:new n.bN(g),u_pattern_tl:new n.bK(g),u_pattern_br:new n.bK(g),u_texsize:new n.bK(g),u_pattern_size:new n.bK(g),u_pixel_coord_upper:new n.bK(g),u_pixel_coord_lower:new n.bK(g),u_pattern_units_to_pixels:new n.bK(g)}),terrainRaster:g=>({u_matrix:new n.bJ(g),u_image0:new n.bN(g),u_skirt_height:new n.bM(g),u_ground_shadow_factor:new n.bL(g)}),skybox:g=>({u_matrix:new n.bJ(g),u_sun_direction:new n.bL(g),u_cubemap:new n.bN(g),u_opacity:new n.bM(g),u_temporal_offset:new n.bM(g)}),skyboxGradient:g=>({u_matrix:new n.bJ(g),u_color_ramp:new n.bN(g),u_center_direction:new n.bL(g),u_radius:new n.bM(g),u_opacity:new n.bM(g),u_temporal_offset:new n.bM(g)}),skyboxCapture:g=>({u_matrix_3f:new n.cB(g),u_sun_direction:new n.bL(g),u_sun_intensity:new n.bM(g),u_color_tint_r:new n.cb(g),u_color_tint_m:new n.cb(g),u_luminance:new n.bM(g)}),globeRaster:g=>({u_proj_matrix:new n.bJ(g),u_globe_matrix:new n.bJ(g),u_normalize_matrix:new n.bJ(g),u_merc_matrix:new n.bJ(g),u_zoom_transition:new n.bM(g),u_merc_center:new n.bK(g),u_image0:new n.bN(g),u_grid_matrix:new n.cB(g),u_skirt_height:new n.bM(g),u_far_z_cutoff:new n.bM(g),u_frustum_tl:new n.bL(g),u_frustum_tr:new n.bL(g),u_frustum_br:new n.bL(g),u_frustum_bl:new n.bL(g),u_globe_pos:new n.bL(g),u_globe_radius:new n.bM(g),u_viewport:new n.bK(g)}),globeAtmosphere:g=>({u_frustum_tl:new n.bL(g),u_frustum_tr:new n.bL(g),u_frustum_br:new n.bL(g),u_frustum_bl:new n.bL(g),u_horizon:new n.bM(g),u_transition:new n.bM(g),u_fadeout_range:new n.bM(g),u_color:new n.cb(g),u_high_color:new n.cb(g),u_space_color:new n.cb(g),u_temporal_offset:new n.bM(g),u_horizon_angle:new n.bM(g)}),model:g=>({u_matrix:new n.bJ(g),u_lighting_matrix:new n.bJ(g),u_normal_matrix:new n.bJ(g),u_node_matrix:new n.bJ(g),u_lightpos:new n.bL(g),u_lightintensity:new n.bM(g),u_lightcolor:new n.bL(g),u_camera_pos:new n.bL(g),u_opacity:new n.bM(g),u_baseColorFactor:new n.cb(g),u_emissiveFactor:new n.cb(g),u_metallicFactor:new n.bM(g),u_roughnessFactor:new n.bM(g),u_baseTextureIsAlpha:new n.bN(g),u_alphaMask:new n.bN(g),u_alphaCutoff:new n.bM(g),u_baseColorTexture:new n.bN(g),u_metallicRoughnessTexture:new n.bN(g),u_normalTexture:new n.bN(g),u_occlusionTexture:new n.bN(g),u_emissionTexture:new n.bN(g),u_lutTexture:new n.bN(g),u_color_mix:new n.cb(g),u_aoIntensity:new n.bM(g),u_emissive_strength:new n.bM(g),u_occlusionTextureTransform:new n.cb(g)}),modelDepth:g=>({u_matrix:new n.bJ(g),u_instance:new n.bJ(g),u_node_matrix:new n.bJ(g)}),groundShadow:g=>({u_matrix:new n.bJ(g),u_ground_shadow_factor:new n.bL(g)}),stars:g=>({u_matrix:new n.bJ(g),u_up:new n.bL(g),u_right:new n.bL(g),u_intensity_multiplier:new n.bM(g)}),snowParticle:g=>({u_modelview:new n.bJ(g),u_projection:new n.bJ(g),u_time:new n.bM(g),u_cam_pos:new n.bL(g),u_velocityConeAperture:new n.bM(g),u_velocity:new n.bM(g),u_horizontalOscillationRadius:new n.bM(g),u_horizontalOscillationRate:new n.bM(g),u_boxSize:new n.bM(g),u_billboardSize:new n.bM(g),u_simpleShapeParameters:new n.bK(g),u_screenSize:new n.bK(g),u_thinningCenterPos:new n.bK(g),u_thinningShape:new n.bL(g),u_thinningAffectedRatio:new n.bM(g),u_thinningParticleOffset:new n.bM(g),u_particleColor:new n.cb(g),u_direction:new n.bL(g)}),rainParticle:g=>({u_modelview:new n.bJ(g),u_projection:new n.bJ(g),u_time:new n.bM(g),u_cam_pos:new n.bL(g),u_texScreen:new n.bN(g),u_velocityConeAperture:new n.bM(g),u_velocity:new n.bM(g),u_boxSize:new n.bM(g),u_rainDropletSize:new n.bK(g),u_distortionStrength:new n.bM(g),u_rainDirection:new n.bL(g),u_color:new n.cb(g),u_screenSize:new n.bK(g),u_thinningCenterPos:new n.bK(g),u_thinningShape:new n.bL(g),u_thinningAffectedRatio:new n.bM(g),u_thinningParticleOffset:new n.bM(g),u_shapeDirectionalPower:new n.bM(g),u_shapeNormalPower:new n.bM(g),u_mode:new n.bM(g)}),vignette:g=>({u_vignetteShape:new n.bL(g),u_vignetteColor:new n.cb(g)}),occlusion:g=>({u_matrix:new n.bJ(g),u_anchorPos:new n.bL(g),u_screenSizePx:new n.bK(g),u_occluderSizePx:new n.bK(g),u_color:new n.cb(g)})};class Hn{constructor(o,c,A,R){this.id=Hn.uniqueIdxCounter,Hn.uniqueIdxCounter++,this.context=o;const C=o.gl;this.buffer=C.createBuffer(),this.dynamicDraw=!!A,this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),C.bufferData(C.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?C.DYNAMIC_DRAW:C.STATIC_DRAW),this.dynamicDraw||R||c.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(o){this.id=Hn.uniqueIdxCounter,Hn.uniqueIdxCounter++;const c=this.context.gl;this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}Hn.uniqueIdxCounter=0;const ri={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class $i{constructor(o,c,A,R,C,E){this.length=c.length,this.attributes=A,this.itemSize=c.bytesPerElement,this.dynamicDraw=R,this.instanceCount=E,this.context=o;const L=o.gl;this.buffer=L.createBuffer(),o.bindVertexBuffer.set(this.buffer),L.bufferData(L.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?L.DYNAMIC_DRAW:L.STATIC_DRAW),this.dynamicDraw||C||c.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(o){const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,o.arrayBuffer)}enableAttributes(o,c){for(let A=0;A<this.attributes.length;A++){const R=c.attributes[this.attributes[A].name];R!==void 0&&o.enableVertexAttribArray(R)}}setVertexAttribPointers(o,c,A){for(let R=0;R<this.attributes.length;R++){const C=this.attributes[R],E=c.attributes[C.name];E!==void 0&&o.vertexAttribPointer(E,C.components,o[ri[C.type]],!1,this.itemSize,C.offset+this.itemSize*(A||0))}}setVertexAttribDivisor(o,c,A){for(let R=0;R<this.attributes.length;R++){const C=c.attributes[this.attributes[R].name];C!==void 0&&this.instanceCount&&this.instanceCount>0&&o.vertexAttribDivisor(C,A)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class kn{constructor(o,c,A,R,C){this.context=o,this.width=c,this.height=A;const E=this.framebuffer=o.gl.createFramebuffer();R&&(this.colorAttachment=new al(o,E)),C&&(this.depthAttachmentType=C,this.depthAttachment=C==="renderbuffer"?new Gh(o,E):new Md(o,E))}destroy(){const o=this.context.gl;if(this.colorAttachment){const c=this.colorAttachment.get();c&&o.deleteTexture(c)}if(this.depthAttachment&&this.depthAttachmentType)if(this.depthAttachmentType==="renderbuffer"){const c=this.depthAttachment.get();c&&o.deleteRenderbuffer(c)}else{const c=this.depthAttachment.get();c&&o.deleteTexture(c)}o.deleteFramebuffer(this.framebuffer)}}class _n{constructor(o,c){this.gl=o,this.clearColor=new Ih(this),this.clearDepth=new el(this),this.clearStencil=new pl(this),this.colorMask=new Gc(this),this.depthMask=new Tu(this),this.stencilMask=new Zu(this),this.stencilFunc=new gc(this),this.stencilOp=new qp(this),this.stencilTest=new Lh(this),this.depthRange=new Fh(this),this.depthTest=new tl(this),this.depthFunc=new Hi(this),this.blend=new _i(this),this.blendFunc=new au(this),this.blendColor=new Su(this),this.blendEquation=new Xf(this),this.cullFace=new Ac(this),this.cullFaceSide=new vf(this),this.frontFace=new Od(this),this.program=new Uh(this),this.activeTexture=new kh(this),this.viewport=new Dd(this),this.bindFramebuffer=new wf(this),this.bindRenderbuffer=new Zm(this),this.bindTexture=new dh(this),this.bindVertexBuffer=new Ly(this),this.bindElementBuffer=new _c(this),this.bindVertexArrayOES=new qu(this),this.pixelStoreUnpack=new Cu(this),this.pixelStoreUnpackPremultiplyAlpha=new Fy(this),this.pixelStoreUnpackFlipY=new Bh(this),this.options=c?Object.assign({},c):{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=o.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=o.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=o.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.forceManualRenderingForInstanceIDShaders=c&&!!c.forceManualRenderingForInstanceIDShaders||this.renderer&&this.renderer.indexOf("PowerVR")!==-1,this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=o.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=o.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=o.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE),this.maxPointSize=o.getParameter(o.ALIASED_POINT_SIZE_RANGE)[1]}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(o,c,A){return new Hn(this,o,c,A)}createVertexBuffer(o,c,A,R,C){return new $i(this,o,c,A,R,C)}createRenderbuffer(o,c,A){const R=this.gl,C=R.createRenderbuffer();return this.bindRenderbuffer.set(C),R.renderbufferStorage(R.RENDERBUFFER,o,c,A),this.bindRenderbuffer.set(null),C}createFramebuffer(o,c,A,R){return new kn(this,o,c,A,R)}clear({color:o,depth:c,stencil:A,colorMask:R}){const C=this.gl;let E=0;o&&(E|=C.COLOR_BUFFER_BIT,this.clearColor.set(o),this.colorMask.set(R||[!0,!0,!0,!0])),c!==void 0&&(E|=C.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),A!==void 0&&(E|=C.STENCIL_BUFFER_BIT,this.clearStencil.set(A),this.stencilMask.set(255)),C.clear(E)}setCullFace(o){o.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))}setDepthMode(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)}setStencilMode(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)}setColorMode(o){n.bn(o.blendFunction,br.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor),o.blendEquation?this.blendEquation.set(o.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(o.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}let ds;function Fi(g,o,c,A,R,C,E){const L=g.context,j=L.gl,$=g.transform,W=g.getOrCreateProgram("collisionBox"),te=[];let ae=0,de=0;for(let Je=0;Je<A.length;Je++){const dt=A[Je],it=o.getTile(dt),st=it.getBucket(c);if(!st)continue;const ot=Dh(dt,st,$);let gt=ot;R[0]===0&&R[1]===0||(gt=g.translatePosMatrix(ot,it,R,C));const Tt=E?st.textCollisionBox:st.iconCollisionBox,Xt=st.collisionCircleArray;if(Xt.length>0){const Ft=n.ad.mat4.create(),ra=gt;n.ad.mat4.mul(Ft,st.placementInvProjMatrix,$.glCoordMatrix),n.ad.mat4.mul(Ft,Ft,st.placementViewportMatrix),te.push({circleArray:Xt,circleOffset:de,transform:ra,invTransform:Ft,projection:st.getProjection()}),ae+=Xt.length/4,de=ae}Tt&&(g.terrain&&g.terrain.setupElevationDraw(it,W),W.draw(g,j.LINES,ir.disabled,Rr.disabled,g.colorModeForRenderPass(),vr.disabled,lt(gt,$,it,st.getProjection()),c.id,Tt.layoutVertexBuffer,Tt.indexBuffer,Tt.segments,null,$.zoom,null,[Tt.collisionVertexBuffer,Tt.collisionVertexBufferExt]))}if(!E||!te.length)return;const Te=g.getOrCreateProgram("collisionCircle"),ve=new n.cW;ve.resize(4*ae),ve._trim();let Ee=0;for(const Je of te)for(let dt=0;dt<Je.circleArray.length/4;dt++){const it=4*dt,st=Je.circleArray[it+0],ot=Je.circleArray[it+1],gt=Je.circleArray[it+2],Tt=Je.circleArray[it+3];ve.emplace(Ee++,st,ot,gt,Tt,0),ve.emplace(Ee++,st,ot,gt,Tt,1),ve.emplace(Ee++,st,ot,gt,Tt,2),ve.emplace(Ee++,st,ot,gt,Tt,3)}(!ds||ds.length<2*ae)&&(ds=function(Je){const dt=2*Je,it=new n.aV;it.resize(dt),it._trim();for(let st=0;st<dt;st++){const ot=6*st;it.uint16[ot+0]=4*st+0,it.uint16[ot+1]=4*st+1,it.uint16[ot+2]=4*st+2,it.uint16[ot+3]=4*st+2,it.uint16[ot+4]=4*st+3,it.uint16[ot+5]=4*st+0}return it}(ae));const Ve=L.createIndexBuffer(ds,!0),Be=L.createVertexBuffer(ve,n.cX.members,!0);for(const Je of te){const dt={u_matrix:Je.transform,u_inv_matrix:Je.invTransform,u_camera_to_center_distance:(et=$).getCameraToCenterDistance(Je.projection),u_viewport_size:[et.width,et.height]};Te.draw(g,j.TRIANGLES,ir.disabled,Rr.disabled,g.colorModeForRenderPass(),vr.disabled,dt,c.id,Be,Ve,n.b8.simpleSegment(0,2*Je.circleOffset,Je.circleArray.length,Je.circleArray.length/2),null,$.zoom)}var et;Be.destroy(),Ve.destroy()}const Bn=n.ad.mat4.create();function po(g){const o=g._camera.getWorldToCamera(g.worldSize,1),c=n.ad.mat4.multiply([],o,g.globeMatrix);n.ad.mat4.invert(c,c);const A=[0,0,0],R=[0,1,0,0];return n.ad.vec4.transformMat4(R,R,c),A[0]=R[0],A[1]=R[1],A[2]=R[2],n.ad.vec3.normalize(A,A),A}function wi({width:g,height:o,anchor:c,textOffset:A,textScale:R},C){const{horizontalAlign:E,verticalAlign:L}=n.bD(c),j=-(E-.5)*g,$=-(L-.5)*o,W=n.bC(c,A);return new n.P((j/R+W[0])*C,($/R+W[1])*C)}function ss(g,o,c,A,R,C,E,L,j,$,W){const te=g.text.placedSymbolArray,ae=g.text.dynamicLayoutVertexArray,de=g.icon.dynamicLayoutVertexArray,Te={},ve=g.getProjection(),Ee=ko(L,ve,C),Ve=C.elevation,Be=ve.upVectorScale(L.canonical,C.center.lat,C.worldSize).metersToTile;ae.clear();for(let et=0;et<te.length;et++){const Je=te.get(et),{tileAnchorX:dt,tileAnchorY:it,numGlyphs:st}=Je,ot=Je.hidden||!Je.crossTileID||g.allowVerticalPlacement&&!Je.placedOrientation?null:A[Je.crossTileID];if(ot){let gt=0,Tt=0,Xt=0;if(Ve){const ea=Ve?Ve.getAtTileOffset(L,dt,it):0,[da,Wt,pa]=ve.upVector(L.canonical,dt,it);gt=ea*da*Be,Tt=ea*Wt*Be,Xt=ea*pa*Be}let[Ft,ra,ua,Ca]=uo(Je.projectedAnchorX+gt,Je.projectedAnchorY+Tt,Je.projectedAnchorZ+Xt,c?Ee:E);const Lt=Sd(C.getCameraToCenterDistance(ve),Ca);let sa=R.evaluateSizeForFeature(g.textSizeData,$,Je)*Lt/n.bw;c&&(sa*=g.tilePixelRatio/j);const zt=wi(ot,sa);c?({x:Ft,y:ra,z:ua}=ve.projectTilePoint(dt+zt.x,it+zt.y,L.canonical),[Ft,ra,ua]=uo(Ft+gt,ra+Tt,ua+Xt,E)):(o&&zt._rotate(-C.angle),Ft+=zt.x,ra+=zt.y,ua=0);const oa=g.allowVerticalPlacement&&Je.placedOrientation===n.bq.vertical?Math.PI/2:0;for(let ea=0;ea<st;ea++)n.bt(ae,Ft,ra,ua,oa);W&&Je.associatedIconIndex>=0&&(Te[Je.associatedIconIndex]={x:Ft,y:ra,z:ua,angle:oa})}else Jo(st,ae)}if(W){de.clear();const et=g.icon.placedSymbolArray;for(let Je=0;Je<et.length;Je++){const dt=et.get(Je),{numGlyphs:it}=dt,st=Te[Je];if(dt.hidden||!st)Jo(it,de);else{const{x:ot,y:gt,z:Tt,angle:Xt}=st;for(let Ft=0;Ft<it;Ft++)n.bt(de,ot,gt,Tt,Xt)}}g.icon.dynamicLayoutVertexBuffer.updateData(de)}g.text.dynamicLayoutVertexBuffer.updateData(ae)}function vn(g,o,c,A,R,C,E={}){const L=c.paint.get("icon-translate"),j=c.paint.get("text-translate"),$=c.paint.get("icon-translate-anchor"),W=c.paint.get("text-translate-anchor"),te=c.layout.get("icon-rotation-alignment"),ae=c.layout.get("text-rotation-alignment"),de=c.layout.get("icon-pitch-alignment"),Te=c.layout.get("text-pitch-alignment"),ve=c.layout.get("icon-keep-upright"),Ee=c.layout.get("text-keep-upright"),Ve=c.paint.get("icon-color-saturation"),Be=c.paint.get("icon-color-contrast"),et=c.paint.get("icon-color-brightness-min"),Je=c.paint.get("icon-color-brightness-max"),dt=c.layout.get("symbol-elevation-reference")==="sea",it=g.context,st=it.gl,ot=g.transform,gt=te==="map",Tt=ae==="map",Xt=de==="map",Ft=Te==="map",ra=c.layout.get("symbol-sort-key").constantOr(1)!==void 0;let ua=!1;const Ca=g.depthModeForSublayer(0,ir.ReadOnly),Lt=[n.av(ot.center.lng),n.aC(ot.center.lat)],sa=c.layout.get("text-variable-anchor"),zt=ot.projection.name==="globe",oa=[],ea=[0,-1,0];for(const da of A){const Wt=o.getTile(da),pa=Wt.getBucket(c);if(!pa||pa.projection.name==="mercator"&&zt||pa.fullyClipped)continue;const Ia=pa.projection.name==="globe",La=Ia?n.ag(ot.zoom):0,Ea=ko(da,pa.getProjection(),ot),sr=ot.calculatePixelsToTileUnitsMatrix(Wt),Fr=sa&&pa.hasTextData(),mr=pa.hasIconTextFit()&&Fr&&pa.hasIconData(),Or=pa.getProjection().createInversionMatrix(ot,da.canonical),Cr=$n=>{ot.depthOcclusionForSymbolsAndCircles&&(c.hasInitialOcclusionOpacityProperties||g.terrain)&&($n.push("DEPTH_D24"),$n.push("DEPTH_OCCLUSION"))},xr=()=>{const $n=gt&&c.layout.get("symbol-placement")!=="point",cn=[];Cr(cn);const Vn=$n||mr,Wi=c.paint.get("icon-image-cross-fade").constantOr(0);g.terrainRenderModeElevated()&&Xt&&cn.push("PITCH_WITH_MAP_TERRAIN"),Ia&&(cn.push("PROJECTION_GLOBE_VIEW"),Vn&&cn.push("PROJECTED_POS_ON_VIEWPORT")),Wi>0&&cn.push("ICON_TRANSITION"),pa.icon.zOffsetVertexBuffer&&cn.push("Z_OFFSET"),Ve===0&&Be===0&&et===0&&Je===1||cn.push("COLOR_ADJUSTMENT"),pa.sdfIcons&&cn.push("RENDER_SDF");const hs=pa.icon.programConfigurations.get(c.id),ro=g.getOrCreateProgram("symbol",{config:hs,defines:cn}),Ws=Wt.imageAtlasTexture?Wt.imageAtlasTexture.size:[0,0],mo=pa.iconSizeData,Cn=n.bp(mo,ot.zoom),ii=Xt||ot.pitch!==0,On=Rs(Ea,Wt.tileID.canonical,Xt,gt,ot,pa.getProjection(),sr),oi=bi(Ea,Wt.tileID.canonical,Xt,gt,ot,pa.getProjection(),sr),yo=g.translatePosMatrix(oi,Wt,L,$,!0),Ti=g.translatePosMatrix(Ea,Wt,L,$),os=Vn?Bn:On,Cc=gt&&!Xt&&!$n;let qo=ea;!zt&&!ot.mercatorFromTransition||gt||(qo=po(ot));const iu=Ia?qo:ea,Ll=c.getColorAdjustmentMatrix(Ve,Be,et,Je),Ju=qa(mo.kind,Cn,Cc,Xt,g,Ti,os,yo,dt,!1,Ws,[0,0],!0,da,La,Lt,Or,iu,pa.getProjection(),Ll,Wi),vl=Wt.imageAtlasTexture?Wt.imageAtlasTexture:null,qd=c.layout.get("icon-size").constantOr(0)!==1||pa.iconsNeedLinear,go=pa.sdfIcons||g.options.rotating||g.options.zooming||qd||ii?st.LINEAR:st.NEAREST,Sh=pa.sdfIcons&&c.paint.get("icon-halo-width").constantOr(1)!==0,Fl=g.terrain&&Xt&&$n?n.ad.mat4.invert(n.ad.mat4.create(),On):Bn;if($n&&pa.icon){const pp=ot.elevation,nm=pp?pp.getAtTileOffsetFunc(da,ot.center.lat,ot.worldSize,pa.getProjection()):null,Hy=Li(Ea,Wt.tileID.canonical,Xt,gt,ot,pa.getProjection(),sr);uc(pa,Ea,g,!1,Hy,oi,Xt,ve,nm,da)}return{program:ro,buffers:pa.icon,uniformValues:Ju,atlasTexture:vl,atlasTextureIcon:null,atlasInterpolation:go,atlasInterpolationIcon:null,isSDF:pa.sdfIcons,hasHalo:Sh,tile:Wt,labelPlaneMatrixInv:Fl}},Ur=()=>{const $n=Tt&&c.layout.get("symbol-placement")!=="point",cn=[],Vn=$n||sa||mr;g.terrainRenderModeElevated()&&Ft&&cn.push("PITCH_WITH_MAP_TERRAIN"),Ia&&(cn.push("PROJECTION_GLOBE_VIEW"),Vn&&cn.push("PROJECTED_POS_ON_VIEWPORT")),pa.text.zOffsetVertexBuffer&&cn.push("Z_OFFSET"),pa.iconsInText&&cn.push("RENDER_TEXT_AND_SYMBOL"),cn.push("RENDER_SDF"),Cr(cn);const Wi=pa.text.programConfigurations.get(c.id),hs=g.getOrCreateProgram("symbol",{config:Wi,defines:cn});let ro,Ws=[0,0],mo=null;const Cn=pa.textSizeData;pa.iconsInText&&(Ws=Wt.imageAtlasTexture?Wt.imageAtlasTexture.size:[0,0],mo=Wt.imageAtlasTexture?Wt.imageAtlasTexture:null,ro=Ft||ot.pitch!==0||g.options.rotating||g.options.zooming||Cn.kind==="composite"||Cn.kind==="camera"?st.LINEAR:st.NEAREST);const ii=Wt.glyphAtlasTexture?Wt.glyphAtlasTexture.size:[0,0],On=c.layout.get("text-size-scale-range"),oi=n.ay(g.scaleFactor,On[0],On[1]),yo=n.bp(Cn,ot.zoom,oi),Ti=Rs(Ea,Wt.tileID.canonical,Ft,Tt,ot,pa.getProjection(),sr),os=bi(Ea,Wt.tileID.canonical,Ft,Tt,ot,pa.getProjection(),sr),Cc=g.translatePosMatrix(os,Wt,j,W,!0),qo=g.translatePosMatrix(Ea,Wt,j,W),iu=Vn?Bn:Ti,Ll=Tt&&!Ft&&!$n;let Ju=ea;!zt&&!ot.mercatorFromTransition||Tt||(Ju=po(ot));const vl=qa(Cn.kind,yo,Ll,Ft,g,qo,iu,Cc,dt,!0,ii,Ws,!0,da,La,Lt,Or,Ia?Ju:ea,pa.getProjection(),null,null,oi),qd=Wt.glyphAtlasTexture?Wt.glyphAtlasTexture:null,go=st.LINEAR,Sh=c.paint.get("text-halo-width").constantOr(1)!==0,Fl=g.terrain&&Ft&&$n?n.ad.mat4.invert(n.ad.mat4.create(),Ti):Bn;if($n&&pa.text){const pp=ot.elevation,nm=pp?pp.getAtTileOffsetFunc(da,ot.center.lat,ot.worldSize,pa.getProjection()):null,Hy=Li(Ea,Wt.tileID.canonical,Ft,Tt,ot,pa.getProjection(),sr);uc(pa,Ea,g,!0,Hy,os,Ft,Ee,nm,da)}return{program:hs,buffers:pa.text,uniformValues:vl,atlasTexture:qd,atlasTextureIcon:mo,atlasInterpolation:go,atlasInterpolationIcon:ro,isSDF:!0,hasHalo:Sh,tile:Wt,labelPlaneMatrixInv:Fl}},Ir=pa.icon.segments.get().length,hr=pa.text.segments.get().length,nn=Ir&&!E.onlyText?xr():null,Tr=hr&&!E.onlyIcons?Ur():null,tr=c.paint.get("icon-opacity").constantOr(1),sn=c.paint.get("text-opacity").constantOr(1);if(ra&&pa.canOverlap){ua=!0;const $n=tr&&!E.onlyText?pa.icon.segments.get():[],cn=sn&&!E.onlyIcons?pa.text.segments.get():[];for(const Vn of $n)oa.push({segments:new n.b8([Vn]),sortKey:Vn.sortKey,state:nn});for(const Vn of cn)oa.push({segments:new n.b8([Vn]),sortKey:Vn.sortKey,state:Tr})}else E.onlyText||oa.push({segments:tr?pa.icon.segments:new n.b8([]),sortKey:0,state:nn}),E.onlyIcons||oa.push({segments:sn?pa.text.segments:new n.b8([]),sortKey:0,state:Tr})}ua&&oa.sort((da,Wt)=>da.sortKey-Wt.sortKey);for(const da of oa){const Wt=da.state;if(Wt)if(g.terrain?g.terrain.setupElevationDraw(Wt.tile,Wt.program,{useDepthForOcclusion:ot.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:Wt.labelPlaneMatrixInv}):g.setupDepthForOcclusion(ot.depthOcclusionForSymbolsAndCircles,Wt.program),it.activeTexture.set(st.TEXTURE0),Wt.atlasTexture&&Wt.atlasTexture.bind(Wt.atlasInterpolation,st.CLAMP_TO_EDGE,!0),Wt.atlasTextureIcon&&(it.activeTexture.set(st.TEXTURE1),Wt.atlasTextureIcon&&Wt.atlasTextureIcon.bind(Wt.atlasInterpolationIcon,st.CLAMP_TO_EDGE,!0)),g.uploadCommonLightUniforms(g.context,Wt.program),Wt.hasHalo){const pa=Wt.uniformValues;pa.u_is_halo=1,Ii(Wt.buffers,da.segments,c,g,Wt.program,Ca,R,C,pa,2),pa.u_is_halo=0}else{if(Wt.isSDF){const pa=Wt.uniformValues;Wt.hasHalo&&(pa.u_is_halo=1,Ii(Wt.buffers,da.segments,c,g,Wt.program,Ca,R,C,pa,1)),pa.u_is_halo=0}Ii(Wt.buffers,da.segments,c,g,Wt.program,Ca,R,C,Wt.uniformValues,1)}}}function Ii(g,o,c,A,R,C,E,L,j,$){const W=[g.dynamicLayoutVertexBuffer,g.opacityVertexBuffer,g.iconTransitioningVertexBuffer,g.globeExtVertexBuffer,g.zOffsetVertexBuffer];R.draw(A,A.context.gl.TRIANGLES,C,E,L,vr.disabled,j,c.id,g.layoutVertexBuffer,g.indexBuffer,o,c.paint,A.transform.zoom,g.programConfigurations.get(c.id),W,$)}function Hs(g,o){const c=1<<g.canonical.z,A=(o.x*c-g.canonical.x-g.wrap*c)*n.ai,R=(o.y*c-g.canonical.y)*n.ai,C=n.d5(o.z,o.y);return n.ad.vec3.fromValues(A,R,C)}function To(g,o,c,A,R){if(!c.layout||c.layout.get("fill-elevation-reference")==="none")return;const C=g.context.gl,E=new ir(g.context.gl.LEQUAL,ir.ReadWrite,g.depthRangeFor3D),L=new ir(g.context.gl.GREATER,ir.ReadWrite,g.depthRangeFor3D),j=function(de){const Te=n.c4(de.pitch);let ve=.01;return de.isOrthographic&&(ve=n.ah(1e-4,ve,n.c9(Te>=Va?1:Te/Va))),2*ve}(g.transform),$=g.transform.getFreeCameraOptions().position,W="elevatedStructuresDepthReconstruct",te=g.getOrCreateProgram(W,{defines:["DEPTH_RECONSTRUCTION"]}),ae=g.getOrCreateProgram(W);for(const de of A){const Te=o.getTile(de),ve=Te.getBucket(c);if(!ve)continue;const Ee=ve.elevatedStructures;if(!Ee)continue;const Ve=ve.elevationBufferData.heightRange,Be=Hs(de.toUnwrapped(),$),et=g.translatePosMatrix(de.projMatrix,Te,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));let Je,dt,it,st;if(R==="initialize"){if(!Ve||Ve.min>=1||Ee.depthSegments.segments[0].primitiveLength===0)continue;Je=at(et,Be,j,1,0),dt=E,it=Ee.depthSegments,st=te}else if(R==="reset"){if(!Ve||Ve.min>=0||Ee.maskSegments.segments[0].primitiveLength===0)continue;Je=at(et,Be,0,0,1),dt=L,it=Ee.maskSegments,st=te}else if(R==="geometry"){if(Ee.depthSegments.segments[0].primitiveLength===0)continue;Je=at(et,Be,j,1,0),dt=E,it=Ee.depthSegments,st=ae}st.draw(g,C.TRIANGLES,dt,Rr.disabled,br.disabled,vr.disabled,Je,c.id,Ee.vertexBuffer,Ee.indexBuffer,it,c.paint,g.transform.zoom)}}function nl(g,o,c){const{painter:A,sourceCache:R,layer:C,coords:E,colorMode:L,elevationType:j,terrainEnabled:$,pass:W}=g,te=A.context.gl,ae=C.paint.get("fill-pattern");let de=j;j!=="road"||o&&!$||(de="none");const Te=de==="road",ve=new ir(A.context.gl.LEQUAL,ir.ReadWrite,A.depthRangeFor3D),Ee=ae&&ae.constantOr(1),Ve=(Be,et)=>{let Je,dt,it,st,ot;et?(dt=Ee&&!C.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Je=te.LINES):(dt=Ee?"fillPattern":"fill",Je=te.TRIANGLES);for(const gt of E){const Tt=R.getTile(gt);if(Ee&&!Tt.patternsLoaded())continue;const Xt=Tt.getBucket(C);if(!Xt)continue;const Ft=o?Xt.elevationBufferData:Xt.bufferData;if(Ft.isEmpty())continue;A.prepareDrawTile();const ra=Ft.programConfigurations.get(C.id),ua=A.isTileAffectedByFog(gt),Ca=[],Lt=[];Te&&(Ca.push("ELEVATED_ROADS"),Lt.push(Ft.elevatedLayoutVertexBuffer));const sa=A.getOrCreateProgram(dt,{config:ra,overrideFog:ua,defines:Ca});Ee&&(A.context.activeTexture.set(te.TEXTURE0),Tt.imageAtlasTexture&&Tt.imageAtlasTexture.bind(te.LINEAR,te.CLAMP_TO_EDGE),ra.updatePaintBuffers());const zt=ae.constantOr(null);if(zt&&Tt.imageAtlas){const da=Tt.imageAtlas,Wt=n.d0.from(zt).getPrimary().scaleSelf(n.q.devicePixelRatio).toString(),pa=da.patternPositions.get(Wt);pa&&ra.setConstantPatternPositions(pa)}const oa=A.translatePosMatrix(gt.projMatrix,Tt,C.paint.get("fill-translate"),C.paint.get("fill-translate-anchor")),ea=C.paint.get("fill-emissive-strength");if(et){st=Ft.lineIndexBuffer,ot=Ft.lineSegments;const da=A.terrain&&A.terrain.renderingToTexture?A.terrain.drapeBufferSize:[te.drawingBufferWidth,te.drawingBufferHeight];it=dt==="fillOutlinePattern"&&Ee?Qe(oa,ea,A,Tt,da):Ge(oa,ea,da)}else st=Ft.indexBuffer,ot=Ft.triangleSegments,it=Ee?Ne(oa,ea,A,Tt):fe(oa,ea);A.uploadCommonUniforms(A.context,sa,gt.toUnwrapped()),sa.draw(A,Je,de!=="none"?ve:Be,c||A.stencilModeForClipping(gt),L,vr.disabled,it,C.id,Ft.layoutVertexBuffer,st,ot,C.paint,A.transform.zoom,ra,Lt)}};A.renderPass===W&&Ve(A.depthModeForSublayer(1,A.renderPass==="opaque"?ir.ReadWrite:ir.ReadOnly),!1),de==="none"&&A.renderPass==="translucent"&&C.paint.get("fill-antialias")&&Ve(A.depthModeForSublayer(C.getPaintProperty("fill-outline-color")?2:0,ir.ReadOnly),!0)}function Ol(g,o,c,A,R,C,E,L){c.resetLayerRenderingStats(g);const j=g.context,$=j.gl,W=g.transform,te=c.paint.get("fill-extrusion-pattern"),ae=te.constantOr(1),de=c.paint.get("fill-extrusion-opacity"),Te=g.style.enable3dLights(),ve=c.paint.get(Te&&!ae?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),Ee=[c.paint.get("fill-extrusion-ambient-occlusion-intensity"),ve],Ve=c.layout.get("fill-extrusion-edge-radius"),Be=Ve>0&&!c.paint.get("fill-extrusion-rounded-roof"),et=Be?0:Ve,Je=W.projection.name==="globe"?n.d6():0,dt=W.projection.name==="globe",it=dt?n.ag(W.zoom):0,st=[n.av(W.center.lng),n.aC(W.center.lat)],ot=c.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default")==="none",gt=c.paint.get("fill-extrusion-flood-light-color").toRenderColor(ot?null:c.lut).toArray01().slice(0,3),Tt=c.paint.get("fill-extrusion-flood-light-intensity"),Xt=c.paint.get("fill-extrusion-vertical-scale"),Ft=c.paint.get("fill-extrusion-line-width").constantOr(1)!==0,ra=c.paint.get("fill-extrusion-height-alignment"),ua=c.paint.get("fill-extrusion-base-alignment"),Ca=qs(g,c.paint.get("fill-extrusion-cutoff-fade-range")),Lt=[];let sa;dt&&Lt.push("PROJECTION_GLOBE_VIEW"),Ee[0]>0&&Lt.push("FAUX_AO"),Be&&Lt.push("ZERO_ROOF_RADIUS"),L&&Lt.push("HAS_CENTROID"),Tt>0&&Lt.push("FLOOD_LIGHT"),Ca.shouldRenderCutoff&&Lt.push("RENDER_CUTOFF"),Ft&&Lt.push("RENDER_WALL_MODE");const zt=g.renderPass==="shadow",oa=g.shadowRenderer,ea=zt&&!!oa;g.shadowRenderer&&(g.shadowRenderer.useNormalOffset=!0);let da=[0,0,0];if(oa){const Ia=g.style.directionalLight,La=g.style.ambientLight;Ia&&La&&(da=Mc(g.style,Ia,La)),zt||(Lt.push("RENDER_SHADOWS","DEPTH_TEXTURE"),oa.useNormalOffset&&Lt.push("NORMAL_OFFSET")),sa=Lt.concat(["SHADOWS_SINGLE_CASCADE"])}const Wt=ea?"fillExtrusionDepth":ae?"fillExtrusionPattern":"fillExtrusion",pa=c.getLayerRenderingStats();for(const Ia of A){const La=o.getTile(Ia),Ea=La.getBucket(c);if(!Ea||Ea.projection.name!==W.projection.name)continue;let sr=!1;oa&&(sr=oa.getMaxCascadeForTile(Ia.toUnwrapped())===0);const Fr=g.isTileAffectedByFog(Ia),mr=Ea.programConfigurations.get(c.id),Or=g.getOrCreateProgram(Wt,{config:mr,defines:sr?sa:Lt,overrideFog:Fr});if(g.terrain&&g.terrain.setupElevationDraw(La,Or,{useMeterToDem:!0}),!Ea.centroidVertexBuffer){const Tr=Or.attributes.a_centroid_pos;Tr!==void 0&&$.vertexAttrib2f(Tr,0,0)}!zt&&oa&&oa.setupShadows(La.tileID.toUnwrapped(),Or,"vector-tile",La.tileID.overscaledZ),ae&&(g.context.activeTexture.set($.TEXTURE0),La.imageAtlasTexture&&La.imageAtlasTexture.bind($.LINEAR,$.CLAMP_TO_EDGE),mr.updatePaintBuffers());const Cr=te.constantOr(null);if(Cr&&La.imageAtlas){const Tr=La.imageAtlas,tr=n.d0.from(Cr).getPrimary().scaleSelf(n.q.devicePixelRatio),sn=Tr.patternPositions.get(tr.toString());sn&&mr.setConstantPatternPositions(sn)}const xr=c.paint.get("fill-extrusion-vertical-gradient"),Ur=1/Ea.tileToMeter;let Ir;if(zt&&oa){if(Ki(La.tileID,Ea,g))continue;const Tr=oa.calculateShadowPassMatrixFromTile(La.tileID.toUnwrapped());Ir=G(Tr,et,Ur,Xt,ra,ua)}else{const Tr=g.translatePosMatrix(Ia.expandedProjMatrix,La,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),tr=W.projection.createInversionMatrix(W,Ia.canonical);Ir=ae?Q(Tr,g,xr,de,Ee,et,Ur,Ia,La,Je,ra,ua,it,st,tr,gt,Xt):jh(Tr,g,xr,de,Ee,et,Ur,Ia,Je,ra,ua,it,st,tr,gt,Xt,Tt,da)}g.uploadCommonUniforms(j,Or,Ia.toUnwrapped(),null,Ca);let hr=Ea.segments;if(W.projection.name==="mercator"&&!zt&&(hr=Ea.getVisibleSegments(La.tileID,g.terrain,g.transform.getFrustum(0)),!hr.get().length))continue;if(pa)if(zt)for(const Tr of hr.get())pa.numRenderedVerticesInShadowPass+=Tr.primitiveLength;else for(const Tr of hr.get())pa.numRenderedVerticesInTransparentPass+=Tr.primitiveLength;const nn=[];(g.terrain||L)&&nn.push(Ea.centroidVertexBuffer),dt&&nn.push(Ea.layoutVertexExtBuffer),Ft&&nn.push(Ea.wallVertexBuffer),Or.draw(g,j.gl.TRIANGLES,R,C,E,vr.backCCW,Ir,c.id,Ea.layoutVertexBuffer,Ea.indexBuffer,hr,c.paint,g.transform.zoom,mr,nn)}g.shadowRenderer&&(g.shadowRenderer.useNormalOffset=!1)}function xs(g,o,c,A,R,C,E,L,j,$,W,te,ae,de,Te,ve,Ee,Ve,Be){const et=g.context,Je=et.gl,dt=g.transform,it=g.transform.zoom,st=[],ot=qs(g,c.paint.get("fill-extrusion-cutoff-fade-range"));$==="clear"?(st.push("CLEAR_SUBPASS"),Be&&(st.push("CLEAR_FROM_TEXTURE"),et.activeTexture.set(Je.TEXTURE0),Be.bind(Je.LINEAR,Je.CLAMP_TO_EDGE))):$==="sdf"&&st.push("SDF_SUBPASS"),Ee&&st.push("HAS_CENTROID"),ot.shouldRenderCutoff&&st.push("RENDER_CUTOFF");const gt=c.layout.get("fill-extrusion-edge-radius"),Tt=(Xt,Ft,ra,ua,Ca)=>{const Lt=Ft.programConfigurations.get(c.id),sa=g.isTileAffectedByFog(Xt),zt=g.getOrCreateProgram("fillExtrusionGroundEffect",{config:Lt,defines:st,overrideFog:sa}),oa=((da,Wt,pa,Ia,La,Ea,sr,Fr,mr,Or,Cr)=>({u_matrix:Wt,u_opacity:pa,u_ao_pass:Ia?1:0,u_meter_to_tile:La,u_ao:Ea,u_flood_light_intensity:sr,u_flood_light_color:Fr,u_attenuation:mr,u_edge_radius:Or,u_fb:0,u_fb_size:Cr,u_dynamic_offset:1}))(0,ua,W,j,Ca,[te,ae*Ca],de,Te,ve,it>=17?0:gt*Ca,Be?Be.size[0]:0),ea=[];Ee&&ea.push(Ft.hiddenByLandmarkVertexBuffer),g.uploadCommonUniforms(et,zt,Xt.toUnwrapped(),null,ot),zt.draw(g,et.gl.TRIANGLES,R,C,E,L,oa,c.id,Ft.vertexBuffer,Ft.indexBuffer,ra,c.paint,it,Lt,ea)};for(const Xt of A){const Ft=o.getTile(Xt),ra=Ft.getBucket(c);if(!ra||ra.projection.name!==dt.projection.name||!ra.groundEffect||ra.groundEffect&&!ra.groundEffect.hasData())continue;const ua=ra.groundEffect,Ca=1/ra.tileToMeter;{const Lt=g.translatePosMatrix(Xt.projMatrix,Ft,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),sa=ua.getDefaultSegment();Tt(Xt,ua,sa,Lt,Ca)}if(Ve)for(let Lt=0;Lt<4;Lt++){const sa=n.d7[Lt](Xt),zt=o.getTile(sa);if(!zt)continue;const oa=zt.getBucket(c);if(!oa||oa.projection.name!==dt.projection.name||!oa.groundEffect||oa.groundEffect&&!oa.groundEffect.hasData())continue;const ea=oa.groundEffect;let da,Wt;Lt===0?(da=[-n.ai,0,0],Wt=1):Lt===1?(da=[n.ai,0,0],Wt=0):Lt===2?(da=[0,-n.ai,0],Wt=3):(da=[0,n.ai,0],Wt=2);const pa=ea.regionSegments[Wt];if(!pa)continue;const Ia=new Float32Array(16);n.ad.mat4.translate(Ia,Xt.projMatrix,da),Tt(Xt,ea,pa,g.translatePosMatrix(Ia,Ft,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),Ca)}}}function Dl(g,o,c,A,R,C,E){A.centroidVertexArray.length===0&&A.createCentroidsBuffer();const L=C?C.findDEMTileFor(c):null;if(!(L&&L.dem||E))return;C&&L&&L.dem&&A.selfDEMTileTimestamp!==L.dem._timestamp&&(A.borderDoneWithNeighborZ=[-1,-1,-1,-1],A.selfDEMTileTimestamp=L.dem._timestamp);const j=Ve=>new n.P(Math.ceil((Ve+n.da)*n.db),0),$=Ve=>{const Be=o.getSource().minzoom,et=dt=>{const it=o.getTileByID(dt);if(it&&it.hasData())return it.getBucket(R)},Je=[0,-1,1];for(const dt of Je){if(Ve.overscaledZ+dt<Be)continue;const it=et(Ve.calculateScaledKey(Ve.overscaledZ+dt));if(it)return it}},W=[0,0,0],te=(Ve,Be)=>(W[0]=Math.min(Ve.min.y,Be.min.y),W[1]=Math.max(Ve.max.y,Be.max.y),W[2]=n.ai-Be.min.x>Ve.max.x?Be.min.x-n.ai:Ve.max.x,W),ae=(Ve,Be)=>(W[0]=Math.min(Ve.min.x,Be.min.x),W[1]=Math.max(Ve.max.x,Be.max.x),W[2]=n.ai-Be.min.y>Ve.max.y?Be.min.y-n.ai:Ve.max.y,W),de=[(Ve,Be)=>te(Ve,Be),(Ve,Be)=>te(Be,Ve),(Ve,Be)=>ae(Ve,Be),(Ve,Be)=>ae(Be,Ve)],Te=(Ve,Be,et,Je,dt,it,st)=>{if(!C)return 0;const ot=[[it?et:Ve,it?Ve:et,0],[it?et:Be,it?Be:et,0]],gt=st<0?n.ai+st:st,Tt=[it?gt:(Ve+Be)/2,it?(Ve+Be)/2:gt,0];return et===0&&st<0||et!==0&&st>0?C.getForTilePoints(dt,[Tt],!0,Je):ot.push(Tt),C.getForTilePoints(c,ot,!0,L),Math.max(ot[0][2],ot[1][2],Tt[2])/C.exaggeration()};for(let Ve=0;Ve<4;Ve++){const Be=A.borderFeatureIndices[Ve];if(Be.length===0)continue;const et=n.d7[Ve](c),Je=$(et);if(!(Je&&Je instanceof n.d8))continue;const dt=C?C.findDEMTileFor(et):null;if(!(dt&&dt.dem||E)||(C&&dt&&dt.dem&&A.borderDEMTileTimestamp[Ve]!==dt.dem._timestamp&&(A.borderDoneWithNeighborZ[Ve]=-1,A.borderDEMTileTimestamp[Ve]=dt.dem._timestamp),A.borderDoneWithNeighborZ[Ve]===Je.canonical.z))continue;Je.centroidVertexArray.length===0&&Je.createCentroidsBuffer();const it=(Ve<2?1:5)-Ve,st=Je.borderDoneWithNeighborZ[it]!==A.canonical.z,ot=Je.borderFeatureIndices[it];let gt=0;if(A.canonical.z!==Je.canonical.z){for(const Tt of Be)A.showCentroid(A.featuresOnBorder[Tt]);if(st)for(const Tt of ot)Je.showCentroid(Je.featuresOnBorder[Tt]);A.borderDoneWithNeighborZ[Ve]=Je.canonical.z,Je.borderDoneWithNeighborZ[it]=A.canonical.z}for(const Tt of Be){const Xt=A.featuresOnBorder[Tt],Ft=A.centroidData[Xt.centroidDataIndex],ra=Xt.borders[Ve];let ua;for(;gt<ot.length;){ua=Je.featuresOnBorder[ot[gt]];const Ca=ua.borders[it];if(Ca[1]>ra[0]+3||Ca[0]>ra[0]-3)break;Je.showCentroid(ua),gt++}if(ua&&gt<ot.length){const Ca=gt;let Lt=0;for(;!(ua.borders[it][0]>ra[1]-3)&&(Lt++,++gt!==ot.length);)ua=Je.featuresOnBorder[ot[gt]];ua=Je.featuresOnBorder[ot[Ca]];let sa=!1;if(Lt>=1){const ea=ua.borders[it];Math.abs(ra[0]-ea[0])<3&&Math.abs(ra[1]-ea[1])<3&&(Lt=1,sa=!0,gt=Ca+1)}else if(Lt===0){A.showCentroid(Xt);continue}const zt=Je.centroidData[ua.centroidDataIndex];E&&sa&&(((ve=Ft).flags|(Ee=zt).flags)&n.d9?(ve.flags|=n.d9,Ee.flags|=n.d9):(ve.flags&=~n.d9,Ee.flags&=~n.d9));const oa=Xt.intersectsCount()>1||ua.intersectsCount()>1;if(Lt>1)gt=Ca,Ft.centroidXY=zt.centroidXY=new n.P(0,0);else if(dt&&dt.dem&&!oa){const ea=de[Ve](Ft,zt),da=Ve%2?n.ai-1:0,Wt=Te(ea[0],Math.min(n.ai-1,ea[1]),da,dt,et,Ve<2,ea[2]);Ft.centroidXY=zt.centroidXY=j(Wt)}else oa?Ft.centroidXY=zt.centroidXY=new n.P(0,0):(Ft.centroidXY=A.encodeBorderCentroid(Xt),zt.centroidXY=Je.encodeBorderCentroid(ua));A.writeCentroidToBuffer(Ft),Je.writeCentroidToBuffer(zt)}else A.showCentroid(Xt)}A.borderDoneWithNeighborZ[Ve]=Je.canonical.z,Je.borderDoneWithNeighborZ[it]=A.canonical.z}var ve,Ee;(A.needsCentroidUpdate||!A.centroidVertexBuffer&&A.centroidVertexArray.length!==0)&&A.uploadCentroid(g)}const xu=[1,0,0],ba=[0,1,0],Ua=[0,0,1];function Ki(g,o,c){const A=c.transform,R=c.shadowRenderer;if(!R)return!0;const C=g.toUnwrapped(),E=A.tileSize*R._cascades[c.currentShadowCascade].scale;let L=o.maxHeight;if(A.elevation){const ve=A.elevation.getMinMaxForTile(g);ve&&(L+=ve.max)}const j=[...R.shadowDirection];j[2]=-j[2];const $=R.computeSimplifiedTileShadowVolume(C,L,E,j);if(!$)return!1;const W=[xu,ba,Ua,j,[j[0],0,j[2]],[0,j[1],j[2]]],te=A.projection.name==="globe",ae=A.scaleZoom(E),de=n.bR.fromInvProjectionMatrix(A.invProjMatrix,A.worldSize,ae,!te),Te=R.getCurrentCascadeFrustum();return de.intersectsPrecise($.vertices,$.planes,W)===0||Te.intersectsPrecise($.vertices,$.planes,W)===0}function Oi(g){return[g[0]*n.dc,g[1]*n.dc,g[2]*n.dc,0]}function jt(g,o,c,A,R,C,E,L,j){const $=A.getSource(),W=c.globeSharedBuffers;if(!W)return;let te,ae,de;if(o&&(te=A.getTile(o)),$ instanceof n.aK?(ae=$.texture,de=n.cJ(0,0,c.transform)):te&&o&&(ae=te.texture,de=n.cJ(o.canonical.z,o.canonical.x,c.transform)),!ae||!de)return;g||(de=n.ad.mat4.scale(n.ad.mat4.create(),de,[1,-1,1]));const Te=c.context,ve=Te.gl,Ee=R.paint.get("raster-resampling")==="nearest"?ve.NEAREST:ve.LINEAR,Ve=c.colorModeForDrapableLayerRenderPass(C),Be=E.defines;Be.push("GLOBE_POLES");const et=new ir(ve.LEQUAL,ir.ReadWrite,c.depthRangeFor3D),Je=Float32Array.from(c.transform.expandedFarZProjMatrix),dt=Float32Array.from(n.bc(n.cI(new n.bT(0,0,0))));c.terrain&&c.terrain.prepareDrawTile(),Te.activeTexture.set(ve.TEXTURE0),ae.bind(Ee,ve.CLAMP_TO_EDGE),Te.activeTexture.set(ve.TEXTURE1),ae.bind(Ee,ve.CLAMP_TO_EDGE),"useMipmap"in ae&&Te.extTextureFilterAnisotropic&&c.transform.pitch>20&&ve.texParameterf(ve.TEXTURE_2D,Te.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Te.extTextureFilterAnisotropicMax);const[it,st,ot,gt]=o?W.getPoleBuffers(o.canonical.z,!1):W.getPoleBuffers(0,!0),Tt=R.paint.get("raster-elevation");let Xt;g?(Xt=it,c.renderDefaultNorthPole=Tt!==0):(Xt=st,c.renderDefaultSouthPole=Tt!==0);const Ft=Oi(E.mix),ra=((Ca,Lt,sa,zt,oa,ea,da,Wt,pa,Ia,La,Ea,sr)=>na(Ca,Lt,sa,new Float32Array(16),new Float32Array(9),[0,0],zt,[0,0],[0,0,0,0],1,{opacity:1,mix:0},ea,[0,0],Wt,2,Ia,La,Ea,1,0,sr))(Je,dt,de,n.ag(c.transform.zoom),0,R,0,Tt,0,Ft,E.offset,E.range,C),ua=c.getOrCreateProgram("raster",{defines:Be});c.uploadCommonUniforms(Te,ua,null),ua.draw(c,ve.TRIANGLES,et,j,Ve,L,ra,R.id,Xt,ot,gt)}function Yp(g){const o=g._nearZ,c=g.projection.farthestPixelDistance(g),A=c-o,R=.2*g.height,C=o+R;return[o,c,(C-R-o)/A,(C-o)/A]}function hh(g,o,c,A){if(g)return o instanceof zi&&g instanceof Fo?o.getTextureDescriptor(g,c,!0):{texture:g.texture,mix:Oi(A.mix),offset:A.offset,buffer:0,tileSize:1}}var fh=n.dd([{name:"a_index",type:"Int16",components:1}]);class ph{constructor(o,c,A,R){const C={width:A[0],height:A[1],data:null},E=o.gl;this.targetColorTexture=new n.T(o,C,E.RGBA8,{useMipmap:!1}),this.backgroundColorTexture=new n.T(o,C,E.RGBA8,{useMipmap:!1}),this.context=o,this.updateParticleTexture(c,R),this.lastInvalidatedAt=0}updateParticleTexture(o,c){if(this.particleTextureDimension===c.width)return;(this.particleTexture0||this.particleTexture1||this.particleIndexBuffer||this.particleSegment)&&(this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleIndexBuffer.destroy(),this.particleSegment.destroy());const A=this.context.gl,R=c.width*c.height;this.particleTexture0=new n.T(this.context,c,A.RGBA8,{premultiply:!1,useMipmap:!1}),this.particleTexture1=new n.T(this.context,c,A.RGBA8,{premultiply:!1,useMipmap:!1});const C=new n.de;C.reserve(R);for(let E=0;E<R;E++)C.emplaceBack(E);this.particleIndexBuffer=this.context.createVertexBuffer(C,fh.members,!0),this.particleSegment=n.b8.simpleSegment(0,0,this.particleIndexBuffer.length,0),this.particleTextureDimension=c.width}update(o){return!(this.lastInvalidatedAt<o&&(this.lastInvalidatedAt=n.q.now(),1))}destroy(){this.targetColorTexture.destroy(),this.backgroundColorTexture.destroy(),this.particleIndexBuffer.destroy(),this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleSegment.destroy()}}function Pu(g,o,c){if(!g)return null;const A=o.getTextureDescriptor(g,c,!0);if(!A)return null;let{texture:R,mix:C,offset:E,tileSize:L,buffer:j,format:$}=A;if(!R||!$)return null;let W=!1;return $==="uint32"&&(W=!0,C[3]=0,C=Pt(n.df,C,[0,c.paint.get("raster-particle-max-speed")]),E=_a(n.df,E,[0,c.paint.get("raster-particle-max-speed")])),{texture:R,textureOffset:[j/(L+2*j),L/(L+2*j)],tileSize:L,scalarData:W,scale:C,offset:E,defines:["RASTER_ARRAY",{uint8:"DATA_FORMAT_UINT8",uint16:"DATA_FORMAT_UINT16",uint32:"DATA_FORMAT_UINT32"}[$]]}}function mh(g){const o=g._nearZ,c=g.projection.farthestPixelDistance(g),A=c-o,R=.2*g.height,C=o+R;return[o,c,(C-R-o)/A,(C-o)/A]}const $u=new n.al(1,0,0,1),Hm=new n.al(0,1,0,1),Qf=new n.al(0,0,1,1),$m=new n.al(1,0,1,1),yh=new n.al(0,1,1,1);function Ml(g,o,c,A,R,C,E){const L=g.context,j=g.transform,$=L.gl,W=j.projection.name==="globe",te=W?["PROJECTION_GLOBE_VIEW"]:[];let ae=n.ad.mat4.clone(c.projMatrix);if(W&&n.ag(j.zoom)>0){const Ft=n.bb(c.canonical,j),ra=n.dg(Ft);ae=n.ad.mat4.multiply(new Float32Array(16),j.globeMatrix,ra),n.ad.mat4.multiply(ae,j.projMatrix,ae)}const de=n.ad.mat4.create();de[12]+=2*R/(n.q.devicePixelRatio*j.width),de[13]+=2*C/(n.q.devicePixelRatio*j.height),n.ad.mat4.multiply(ae,de,ae);const Te=g.getOrCreateProgram("debug",{defines:te}),ve=o.getTileByID(c.key);g.terrain&&g.terrain.setupElevationDraw(ve,Te);const Ee=ir.disabled,Ve=Rr.disabled,Be=g.colorModeForRenderPass(),et="$debug";L.activeTexture.set($.TEXTURE0),g.emptyTexture.bind($.LINEAR,$.CLAMP_TO_EDGE),W?ve._makeGlobeTileDebugBuffers(g.context,j):ve._makeDebugTileBoundsBuffers(g.context,j.projection);const Je=ve._tileDebugBuffer||g.debugBuffer,dt=ve._tileDebugIndexBuffer||g.debugIndexBuffer,it=ve._tileDebugSegments||g.debugSegments;if(Te.draw(g,$.LINE_STRIP,Ee,Ve,Be,vr.disabled,pt(ae,A),et,Je,dt,it,null,null,null,[ve._globeTileDebugBorderBuffer]),E){const Ft=ve.latestRawTileData,ra=Math.floor((Ft&&Ft.byteLength||0)/1024);let ua=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(ua+=` => ${c.overscaledZ}`),ua+=` ${ve.state}`,ua+=` ${ra}kb`,function(Ca,Lt){Ca.initDebugOverlayCanvas();const sa=Ca.debugOverlayCanvas,zt=Ca.context.gl,oa=Ca.debugOverlayCanvas.getContext("2d");oa.clearRect(0,0,sa.width,sa.height),oa.shadowColor="white",oa.shadowBlur=2,oa.lineWidth=1.5,oa.strokeStyle="white",oa.textBaseline="top",oa.font="bold 36px Open Sans, sans-serif",oa.fillText(Lt,5,5),oa.strokeText(Lt,5,5),Ca.debugOverlayTexture.update(sa),Ca.debugOverlayTexture.bind(zt.LINEAR,zt.CLAMP_TO_EDGE)}(g,ua)}const st=o.getTile(c).tileSize,ot=512/Math.min(st,512)*(c.overscaledZ/j.zoom)*.5,gt=ve._tileDebugTextBuffer||g.debugBuffer,Tt=ve._tileDebugTextIndexBuffer||g.quadTriangleIndexBuffer,Xt=ve._tileDebugTextSegments||g.debugSegments;Te.draw(g,$.TRIANGLES,Ee,Ve,br.alphaBlended,vr.disabled,pt(ae,n.al.transparent,ot),et,gt,Tt,Xt,null,null,null,[ve._globeTileDebugTextBuffer])}function Zh(g,o,c,A){Kc(g,0,o+c/2,g.transform.width,c,A)}function $c(g,o,c,A){Kc(g,o-c/2,0,c,g.transform.height,A)}function Kc(g,o,c,A,R,C){const E=g.context,L=E.gl;L.enable(L.SCISSOR_TEST),L.scissor(o*n.q.devicePixelRatio,c*n.q.devicePixelRatio,A*n.q.devicePixelRatio,R*n.q.devicePixelRatio),E.clear({color:C}),L.disable(L.SCISSOR_TEST)}const ep=n.dd([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Wc}=ep;function il(g,o,c,A){g.emplaceBack(o,c,A)}class Km{constructor(o){this.vertexArray=new n.dh,this.indices=new n.aV,il(this.vertexArray,-1,-1,1),il(this.vertexArray,1,-1,1),il(this.vertexArray,-1,1,1),il(this.vertexArray,1,1,1),il(this.vertexArray,-1,-1,-1),il(this.vertexArray,1,-1,-1),il(this.vertexArray,-1,1,-1),il(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=o.createVertexBuffer(this.vertexArray,Wc),this.indexBuffer=o.createIndexBuffer(this.indices),this.segment=n.b8.simpleSegment(0,0,36,12)}}function ao(g,o,c,A,R,C){const E=g.context.gl,L=o.paint.get("sky-atmosphere-color"),j=o.paint.get("sky-atmosphere-halo-color"),$=o.paint.get("sky-atmosphere-sun-intensity"),W=((te,ae,de,Te,ve)=>({u_matrix_3f:te,u_sun_direction:ae,u_sun_intensity:de,u_color_tint_r:[Te.r,Te.g,Te.b,Te.a],u_color_tint_m:[ve.r,ve.g,ve.b,ve.a],u_luminance:5e-5}))(n.ad.mat3.fromMat4(n.ad.mat3.create(),A),R,$,L,j);E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_CUBE_MAP_POSITIVE_X+C,o.skyboxTexture,0),c.draw(g,E.TRIANGLES,ir.disabled,Rr.disabled,br.unblended,vr.frontCW,W,"skyboxCapture",o.skyboxGeometry.vertexBuffer,o.skyboxGeometry.indexBuffer,o.skyboxGeometry.segment)}const Uy=n.dd([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class gh{constructor(o){const c=new n.di;c.emplaceBack(-1,1,1,0,0),c.emplaceBack(1,1,1,1,0),c.emplaceBack(1,-1,1,1,1),c.emplaceBack(-1,-1,1,0,1);const A=new n.aV;A.emplaceBack(0,1,2),A.emplaceBack(2,3,0),this.vertexBuffer=o.createVertexBuffer(c,Uy.members),this.indexBuffer=o.createIndexBuffer(A),this.segments=n.b8.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const ni=n.dd([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class xn{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15,this.sizeRange=100,this.intensityRange=200}}class tp{constructor(o){this.colorModeAlphaBlendedWriteRGB=new br([1,es,1,es],n.al.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new br([1,0,1,0],n.al.transparent,[!1,!1,!1,!0]),this.params=new xn,this.updateNeeded=!0,o.tp.registerParameter(this.params,["Stars"],"starsCount",{min:100,max:16e3,step:1},()=>{this.updateNeeded=!0}),o.tp.registerParameter(this.params,["Stars"],"sizeMultiplier",{min:.01,max:2,step:.01}),o.tp.registerParameter(this.params,["Stars"],"sizeRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0}),o.tp.registerParameter(this.params,["Stars"],"intensityRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0})}update(o){const c=o.context;if(!this.atmosphereBuffer||this.updateNeeded){this.updateNeeded=!1,this.atmosphereBuffer=new gh(c);const A=this.params.sizeRange,R=this.params.intensityRange,C=function(W){const te=n.dl(30),ae=[];for(let de=0;de<W;++de){const Te=2*Math.PI*te(),ve=Math.acos(1-2*te())-.5*Math.PI;ae.push(n.ad.vec3.fromValues(Math.cos(ve)*Math.cos(Te),Math.cos(ve)*Math.sin(Te),Math.sin(ve)))}return ae}(this.params.starsCount),E=n.dl(300),L=new n.dj,j=new n.aV;let $=0;for(let W=0;W<C.length;++W){const te=n.ad.vec3.scale([],C[W],200),ae=Math.max(0,1+.01*A*(1*E()-.5)),de=Math.max(0,1+.01*R*(1*E()-.5));L.emplaceBack(te[0],te[1],te[2],-1,-1,ae,de),L.emplaceBack(te[0],te[1],te[2],1,-1,ae,de),L.emplaceBack(te[0],te[1],te[2],1,1,ae,de),L.emplaceBack(te[0],te[1],te[2],-1,1,ae,de),j.emplaceBack($+0,$+1,$+2),j.emplaceBack($+0,$+2,$+3),$+=4}this.starsVx=c.createVertexBuffer(L,ni.members),this.starsIdx=c.createIndexBuffer(j),this.starsSegments=n.b8.simpleSegment(0,0,L.length,j.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(o,c){const A=o.context,R=A.gl,C=o.transform,E=new ir(R.LEQUAL,ir.ReadOnly,[0,1]),L=n.ag(C.zoom),j=o.style.getLut(c.scope),$=c.properties.get("color-use-theme")==="none",W=c.properties.get("color").toRenderColor($?null:j).toArray01(),te=c.properties.get("high-color-use-theme")==="none",ae=c.properties.get("high-color").toRenderColor(te?null:j).toArray01(),de=c.properties.get("space-color-use-theme")==="none",Te=c.properties.get("space-color").toRenderColor(de?null:j).toArray01PremultipliedAlpha(),ve=5e-4,Ee=n.dk(c.properties.get("horizon-blend"),0,1,ve,.25),Ve=n.cD(o,A,C)&&Ee===ve?C.worldSize/(2*Math.PI*1.025)-1:C.globeRadius,Be=o.frameCounter/1e3%1,et=n.ad.vec3.length(C.globeCenterInViewSpace),Je=Math.sqrt(Math.pow(et,2)-Math.pow(Ve,2)),dt=Math.acos(Je/et),it=st=>{const ot=C.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];st&&ot.push("ALPHA_PASS");const gt=o.getOrCreateProgram("globeAtmosphere",{defines:ot}),Tt=((Ft,ra,ua,Ca,Lt,sa,zt,oa,ea,da,Wt,pa)=>({u_frustum_tl:Ft,u_frustum_tr:ra,u_frustum_br:ua,u_frustum_bl:Ca,u_horizon:Lt,u_transition:sa,u_fadeout_range:zt,u_color:oa,u_high_color:ea,u_space_color:da,u_temporal_offset:Wt,u_horizon_angle:pa}))(C.frustumCorners.TL,C.frustumCorners.TR,C.frustumCorners.BR,C.frustumCorners.BL,C.frustumCorners.horizon,L,Ee,W,ae,Te,Be,dt);o.uploadCommonUniforms(A,gt);const Xt=this.atmosphereBuffer;Xt&&gt.draw(o,R.TRIANGLES,E,Rr.disabled,st?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,vr.backCW,Tt,st?"atmosphere_glow_alpha":"atmosphere_glow",Xt.vertexBuffer,Xt.indexBuffer,Xt.segments)};it(!1),it(!0)}drawStars(o,c){const A=n.ay(c.properties.get("star-intensity"),0,1);if(A===0)return;const R=o.context,C=R.gl,E=o.transform,L=o.getOrCreateProgram("stars"),j=n.ad.quat.identity([]);n.ad.quat.rotateX(j,j,-E._pitch),n.ad.quat.rotateZ(j,j,-E.angle),n.ad.quat.rotateX(j,j,n.ak(E._center.lat)),n.ad.quat.rotateY(j,j,-n.ak(E._center.lng));const $=n.ad.mat4.fromQuat(new Float32Array(16),j),W=n.ad.mat4.multiply([],E.starsProjMatrix,$),te=n.ad.mat3.fromMat4([],$),ae=n.ad.mat3.invert([],te),de=[0,1,0];n.ad.vec3.transformMat3(de,de,ae),n.ad.vec3.scale(de,de,this.params.sizeMultiplier);const Te=[1,0,0];n.ad.vec3.transformMat3(Te,Te,ae),n.ad.vec3.scale(Te,Te,this.params.sizeMultiplier);const ve=(Ee=de,Ve=Te,Be=A,{u_matrix:Float32Array.from(W),u_up:Ee,u_right:Ve,u_intensity_multiplier:Be});var Ee,Ve,Be;o.uploadCommonUniforms(R,L),this.starsVx&&this.starsIdx&&L.draw(o,C.TRIANGLES,ir.disabled,Rr.disabled,this.colorModeAlphaBlendedWriteRGB,vr.disabled,ve,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}function Eu(g,o){const c=[...g],A=o.cameraWorldSizeForFog/o.worldSize,R=n.ad.mat4.identity([]);return n.ad.mat4.scale(R,R,[A,A,1]),n.ad.mat4.multiply(c,R,c),n.ad.mat4.multiply(c,o.worldToFogMatrix,c),c}function Ud(g,o,c,A,R){const C=c.material,E=A.context,{baseColorTexture:L,metallicRoughnessTexture:j}=C.pbrMetallicRoughness,{normalTexture:$,occlusionTexture:W,emissionTexture:te}=C;function ae(Te,ve,Ee){if(Te&&(g.push(ve),E.activeTexture.set(E.gl.TEXTURE0+Ee),Te.gfxTexture)){const{minFilter:Ve,magFilter:Be,wrapS:et,wrapT:Je}=Te.sampler;Te.gfxTexture.bindExtraParam(Ve,Be,et,Je)}}ae(L,"HAS_TEXTURE_u_baseColorTexture",Ai.BaseColor),ae(j,"HAS_TEXTURE_u_metallicRoughnessTexture",Ai.MetallicRoughness),ae($,"HAS_TEXTURE_u_normalTexture",Ai.Normal),ae(W,"HAS_TEXTURE_u_occlusionTexture",Ai.Occlusion),ae(te,"HAS_TEXTURE_u_emissionTexture",Ai.Emission),R&&(R.texture||(R.texture=new n.dn(A.context,R.image,[R.image.height,R.image.height,R.image.height],E.gl.RGBA8)),E.activeTexture.set(E.gl.TEXTURE0+Ai.LUT),R.texture&&R.texture.bind(E.gl.LINEAR,E.gl.CLAMP_TO_EDGE),g.push("APPLY_LUT_ON_GPU")),c.texcoordBuffer&&(g.push("HAS_ATTRIBUTE_a_uv_2f"),o.push(c.texcoordBuffer)),c.colorBuffer&&(g.push(c.colorBuffer.itemSize===12?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),o.push(c.colorBuffer)),c.normalBuffer&&(g.push("HAS_ATTRIBUTE_a_normal_3f"),o.push(c.normalBuffer)),c.pbrBuffer&&(g.push("HAS_ATTRIBUTE_a_pbr"),g.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),o.push(c.pbrBuffer)),C.alphaMode!=="OPAQUE"&&C.alphaMode!=="MASK"||g.push("UNPREMULT_TEXTURE_IN_SHADER"),C.defined||g.push("DIFFUSE_SHADED");const de=A.shadowRenderer;de&&(g.push("RENDER_SHADOWS","DEPTH_TEXTURE"),de.useNormalOffset&&g.push("NORMAL_OFFSET"))}function Nu(g,o,c,A,R,C){const E=c.paint.get("model-opacity").constantOr(1),L=o.context,j=new ir(o.context.gl.LEQUAL,ir.ReadWrite,o.depthRangeFor3D),$=o.transform,W=g.mesh,te=W.material,ae=te.pbrMetallicRoughness,de=o.style.fog;let Te;Te=o.transform.projection.zAxisUnit==="pixels"?[...g.nodeModelMatrix]:n.ad.mat4.multiply([],A.zScaleMatrix,g.nodeModelMatrix),n.ad.mat4.multiply(Te,A.negCameraPosMatrix,Te);const ve=n.ad.mat4.invert([],Te);n.ad.mat4.transpose(ve,ve);const Ee=c.paint.get("model-color-use-theme").constantOr("default")==="none",Ve=c.paint.get("model-emissive-strength").constantOr(0),Be=ur(new Float32Array(g.worldViewProjection),new Float32Array(Te),new Float32Array(ve),null,o,E,ae.baseColorFactor.toRenderColor(null),te.emissiveFactor,ae.metallicFactor,ae.roughnessFactor,te,Ve,c),et={defines:[]},Je=[],dt=o.shadowRenderer;dt&&(dt.useNormalOffset=!1),Ud(et.defines,Je,W,o,Ee?null:c.lut);let it=null;if(de){const gt=Eu(g.nodeModelMatrix,o.transform);if(it=new Float32Array(gt),$.projection.name!=="globe"){const Tt=W.aabb.min,Xt=W.aabb.max,[Ft,ra]=de.getOpacityForBounds(gt,Tt[0],Tt[1],Xt[0],Xt[1]);et.overrideFog=Ft>=Ma||ra>=Ma}}const st=qs(o,c.paint.get("model-cutoff-fade-range"));st.shouldRenderCutoff&&et.defines.push("RENDER_CUTOFF");const ot=o.getOrCreateProgram("model",et);o.uploadCommonUniforms(L,ot,null,it,st),o.renderPass!=="shadow"&&dt&&dt.setupShadowsFromMatrix(g.nodeModelMatrix,ot),ot.draw(o,L.gl.TRIANGLES,j,R,C,W.material.doubleSided?vr.disabled:vr.backCCW,Be,c.id,W.vertexBuffer,W.indexBuffer,W.segments,c.paint,o.transform.zoom,void 0,Je)}function Yc(g,o,c,A,R,C,E){let L;L=g.projection.name==="globe"?n.dp(c,g):[...c],n.ad.mat4.multiply(L,L,o.matrix);const j=n.ad.mat4.multiply([],A,L);if(o.meshes)for(const $ of o.meshes){if($.material.alphaMode!=="BLEND"){E.push({mesh:$,depth:0,modelIndex:R,worldViewProjection:j,nodeModelMatrix:L});continue}const W=n.ad.vec3.transformMat4([],$.centroid,j);!g.isOrthographic&&W[2]<=0||C.push({mesh:$,depth:W[2],modelIndex:R,worldViewProjection:j,nodeModelMatrix:L})}if(o.children)for(const $ of o.children)Yc(g,$,c,A,R,C,E)}function Sf(g,o,c,A){const R=c.shadowRenderer;if(!R)return;const C=R.getShadowPassDepthMode(),E=R.getShadowPassColorMode(),L=R.calculateShadowPassMatrixFromMatrix(o),j=vi(L);c.getOrCreateProgram("modelDepth",{defines:c._shadowMapDebug?[]:["DEPTH_TEXTURE"]}).draw(c,c.context.gl.TRIANGLES,C,Rr.disabled,E,vr.backCCW,j,A.id,g.vertexBuffer,g.indexBuffer,g.segments,A.paint,c.transform.zoom,void 0,void 0)}function qh(g,o,c){const A=o.updateZoomBasedPaintProperties(),R=function(C,E,L){let j,$,W,te=C.terrain?C.terrain.exaggeration():0;if(C.terrain&&te>0){const ae=C.terrain,de=ae.findDEMTileFor(L);de&&de.dem?j=n.dr.create(ae,L,de):te=0}if(te===0&&(E.terrainElevationMin=0,E.terrainElevationMax=0),te===E.validForExaggeration&&(te===0||j&&j._demTile&&j._demTile.tileID===E.validForDEMTile.id&&j._dem._timestamp===E.validForDEMTile.timestamp))return!1;for(const ae in E.instancesPerModel){const de=E.instancesPerModel[ae];for(let Te=0;Te<de.instancedDataArray.length;++Te){const ve=(j?te*j.getElevationAt(0|de.instancedDataArray.float32[16*Te],0|de.instancedDataArray.float32[16*Te+1],!0,!0):0)+de.instancesEvaluatedElevation[Te];de.instancedDataArray.float32[16*Te+6]=ve,$=$?Math.min(E.terrainElevationMin,ve):ve,W=W?Math.max(E.terrainElevationMax,ve):ve}}return E.terrainElevationMin=$||0,E.terrainElevationMax=W||0,E.validForExaggeration=te,E.validForDEMTile=j&&j._demTile?{id:j._demTile.tileID,timestamp:j._dem._timestamp}:{id:void 0,timestamp:0},!0}(g,o,c);(A||R)&&(o.uploaded=!1,o.upload(g.context))}const Il={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new n.ce([0,0,0],[n.ai,n.ai,0])};function Cf(g,o){const c=1<<g.canonical.z,A=o.getFreeCameraOptions().position,R=o.elevation,C=g.canonical.x/c,E=(g.canonical.x+1)/c,L=g.canonical.y/c,j=(g.canonical.y+1)/c;let $=o._centerAltitude;if(R){const de=R.getMinMaxForTile(g);de&&de.max>$&&($=de.max)}const W=n.ay(A.x,C,E)-A.x,te=n.ay(A.y,L,j)-A.y,ae=n.bH($,o.center.lat)-A.z;return o._zoomFromMercatorZ(Math.sqrt(W*W+te*te+ae*ae))}function So(g,o,c,A,R,C,E){const L=g.context,j=g.renderPass==="shadow",$=g.shadowRenderer,W=j&&$?$.getShadowPassDepthMode():new ir(L.gl.LEQUAL,ir.ReadWrite,g.depthRangeFor3D),te=g.isTileAffectedByFog(C);if(c.meshes)for(const ae of c.meshes){const de=["MODEL_POSITION_ON_GPU"],Te=[];let ve,Ee,Ve;A.instancedDataArray.length>20&&de.push("INSTANCED_ARRAYS");const Be=qs(g,o.paint.get("model-cutoff-fade-range"));if(Be.shouldRenderCutoff&&de.push("RENDER_CUTOFF"),j&&$)ve=g.getOrCreateProgram("modelDepth",{defines:de}),Ee=vi(E.shadowTileMatrix,E.shadowTileMatrix,Float32Array.from(c.matrix)),Ve=$.getShadowPassColorMode();else{Ud(de,Te,ae,g,o.paint.get("model-color-use-theme").constantOr("default")==="none"?null:o.lut),ve=g.getOrCreateProgram("model",{defines:de,overrideFog:te});const Je=ae.material,dt=Je.pbrMetallicRoughness,it=o.paint.get("model-opacity").constantOr(1),st=o.paint.get("model-emissive-strength").constantOr(0);Ee=ur(C.expandedProjMatrix,Float32Array.from(c.matrix),new Float32Array(16),null,g,it,dt.baseColorFactor.toRenderColor(null),Je.emissiveFactor,dt.metallicFactor,dt.roughnessFactor,Je,st,o,R),$&&(E.shadowUniformsInitialized?ve.setShadowUniformValues(L,$.getShadowUniformValues()):($.setupShadows(C.toUnwrapped(),ve,"model-tile",C.overscaledZ),E.shadowUniformsInitialized=!0)),Ve=Be.shouldRenderCutoff||it<1||Je.alphaMode!=="OPAQUE"?br.alphaBlended:br.unblended}g.uploadCommonUniforms(L,ve,C.toUnwrapped(),null,Be);const et=ae.material.doubleSided?vr.disabled:vr.backCCW;if(A.instancedDataArray.length>20)Te.push(A.instancedDataBuffer),ve.draw(g,L.gl.TRIANGLES,W,Rr.disabled,Ve,et,Ee,o.id,ae.vertexBuffer,ae.indexBuffer,ae.segments,o.paint,g.transform.zoom,void 0,Te,A.instancedDataArray.length);else{const Je=j?"u_instance":"u_normal_matrix";for(let dt=0;dt<A.instancedDataArray.length;++dt)Ee[Je]=new Float32Array(A.instancedDataArray.arrayBuffer,64*dt,16),ve.draw(g,L.gl.TRIANGLES,W,Rr.disabled,Ve,et,Ee,o.id,ae.vertexBuffer,ae.indexBuffer,ae.segments,o.paint,g.transform.zoom,void 0,Te)}}if(c.children)for(const ae of c.children)So(g,o,ae,A,R,C,E)}const kd=[1,-1,1];function ap(g,o,c,A){if(!c.modelManager)return!0;const R=c.modelManager;if(!c.shadowRenderer)return!0;const C=c.shadowRenderer,E=o.aabb;let L=!0,j=g.maxHeight;if(j===0){let W=0;for(const te in g.instancesPerModel){const ae=R.getModel(te,A);ae?W=Math.max(W,Math.max(Math.max(ae.aabb.max[0],ae.aabb.max[1]),ae.aabb.max[2])):L=!1}j=g.maxScale*W*1.41+g.maxVerticalOffset,L&&(g.maxHeight=j)}E.max[2]=j,E.min[2]+=g.terrainElevationMin,E.max[2]+=g.terrainElevationMax,n.ad.vec3.transformMat4(E.min,E.min,o.tileMatrix),n.ad.vec3.transformMat4(E.max,E.max,o.tileMatrix);const $=E.intersects(C.getCurrentCascadeFrustum());return c.currentShadowCascade===0&&(g.isInsideFirstShadowMapFrustum=$===2),$===0}function rp(g,o){const c=g.uniformValues.u_cutoff_params[0],A=g.uniformValues.u_cutoff_params[1],R=g.uniformValues.u_cutoff_params[2],C=g.uniformValues.u_cutoff_params[3];return A===c||C===R?1:n.ay(((o-c)/(A-c)-R)/(C-R),0,1)}function Ah(g,o,c,A){if(o.pitch<20)return 1;const R=o.getWorldToCameraMatrix();n.ad.mat4.multiply(R,R,g);const C=n.ad.vec4.fromValues(c.min[0],c.min[1],c.min[2],1);let E=n.ad.vec4.transformMat4(n.ad.vec4.create(),C,R),L=E,j=E;C[1]=c.max[1],E=n.ad.vec4.transformMat4(n.ad.vec4.create(),C,R),L=E[1]<L[1]?E:L,j=E[1]>j[1]?E:j,C[0]=c.max[0],E=n.ad.vec4.transformMat4(n.ad.vec4.create(),C,R),L=E[1]<L[1]?E:L,j=E[1]>j[1]?E:j,C[1]=c.min[1],E=n.ad.vec4.transformMat4(n.ad.vec4.create(),C,R),L=E[1]<L[1]?E:L,j=E[1]>j[1]?E:j;const $=n.ay(A[0],0,1),W=100*o.pixelsPerMeter*n.ay(A[1],0,1),te=n.ay(A[2],0,1),ae=n.ad.vec4.lerp(n.ad.vec4.create(),L,j,$),de=Math.tan(.5*o.fovX),Te=-ae[2]*de;if(W===0)return ae[1]<-Math.abs(Te)?te:1;const ve=(-Math.abs(Te)-ae[1])/W,Ee=(Be,et,Je)=>(1-Je)*Be+Je*et,Ve=n.ay(Ee(1,te,ve),te,1);return Ee(1,Ve,n.ay((o.pitch-20)/20,0,1))}class Xc{}class Jc{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(o,c,A){{const te=this._storage.get(c.id);if(te)return te.lastUsedFrameIdx=o,te.buf}const R=A.gl,C=R.getBufferParameter(R.ELEMENT_ARRAY_BUFFER,R.BUFFER_SIZE),E=new ArrayBuffer(C),L=new Int16Array(E);R.getBufferSubData(R.ELEMENT_ARRAY_BUFFER,0,new Int16Array(E));const j=new n.dt;for(let te=0;te<C/2;te+=3){const ae=L[te],de=L[te+1],Te=L[te+2];j.emplaceBack(ae,de),j.emplaceBack(de,Te),j.emplaceBack(Te,ae)}const $=A.bindVertexArrayOES.current,W=new Xc;return W.buf=new Hn(A,j),W.lastUsedFrameIdx=o,this._storage.set(c.id,W),A.bindVertexArrayOES.set($),W.buf}update(o){for(const[c,A]of this._storage)o-A.lastUsedFrameIdx>30&&(A.buf.destroy(),this._storage.delete(c))}destroy(){for(const[o,c]of this._storage)c.buf.destroy(),this._storage.delete(o)}}class np{constructor(o){this.occluderSize=30,this.depthOffset=-1e-4,o.registerParameter(this,["Occlusion"],"occluderSize",{min:1,max:100,step:1}),o.registerParameter(this,["Occlusion"],"depthOffset",{min:-.05,max:0,step:1e-5})}}const Bd=n.dd([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_rainParticleData",components:4}]);class Vu{registerParameter(){}registerButton(){}registerBinding(){}refreshUI(){}}class vc{constructor(o,c){this.revealStart=11,this.revealRange=2,o.registerParameter(this,[...c,"Reveal"],"revealStart",{min:0,max:17,step:.05}),o.registerParameter(this,[...c,"Reveal"],"revealRange",{min:.1,max:5.1,step:.05})}}const ru=n.dd([{type:"Float32",name:"a_pos_2f",components:2}]);class wc{destroy(){this.vignetteVx&&this.vignetteVx.destroy(),this.vignetteIdx&&this.vignetteIdx.destroy()}draw(o,c){const A=o.getOrCreateProgram("vignette");if(!this.vignetteVx||!this.vignetteIdx){const E=new n.du,L=new n.aV;E.emplaceBack(-1,-1),E.emplaceBack(1,-1),E.emplaceBack(1,1),E.emplaceBack(-1,1),L.emplaceBack(0,1,2),L.emplaceBack(0,2,3),this.vignetteVx=o.context.createVertexBuffer(E,ru.members),this.vignetteIdx=o.context.createIndexBuffer(L)}const R=n.b8.simpleSegment(0,0,4,6);if(this.vignetteVx&&this.vignetteIdx){o.uploadCommonUniforms(o.context,A);const E={u_vignetteShape:(C={vignetteShape:[c.start,c.range,Math.pow(10,c.fadePower)],vignetteColor:[c.color.r,c.color.g,c.color.b,c.color.a*c.strength]}).vignetteShape,u_vignetteColor:C.vignetteColor};A.draw(o,o.context.gl.TRIANGLES,ir.disabled,Rr.disabled,br.alphaBlended,vr.disabled,E,"vignette",this.vignetteVx,this.vignetteIdx,R)}var C}}class Ps{constructor(){this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0}update(o,c){const A=o.getFreeCameraOptions().position,R=A.toAltitude(),C=A.toLngLat(),E=n.ak(C.lng),L=n.ak(C.lat),j=o.pixelsPerMeter/c,$=E*n.dv,W=n.dv*Math.log(Math.tan(Math.PI/4+L/2));if(this._offsetXPrev===void 0)this._offsetXPrev=0,this._offsetYPrev=0,this._elevationPrev=0,this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0;else{const te=-this._offsetYPrev+W,ae=-this._elevationPrev+R;this._accumulatedOffsetX+=(-this._offsetXPrev+$)*j,this._accumulatedOffsetY+=te*j,this._accumulatedElevation+=ae*j,this._offsetXPrev=$,this._offsetYPrev=W,this._elevationPrev=R}}getPosition(){return[this._accumulatedOffsetX,this._accumulatedOffsetY,this._accumulatedElevation]}}function nu(g,o){return[-(g[0]-Math.floor(g[0]/o)*o),-(g[1]-Math.floor(g[1]/o)*o),-(g[2]-Math.floor(g[2]/o)*o)]}function Ku(g){const o=n.dl(1323123451230),c=[];for(let A=0;A<g;++A){const R=2*o()-1,C=2*o()-1,E=2*o()-1;c.push(n.ad.vec3.fromValues(R,C,E))}return c}function $s(g,o,c,A,R){const C=n.ay((R-c)/(A-c),0,1);return(1-C)*g+C*o}class zu{constructor(o){this._movement=new Ps,this._accumulatedTimeFromStart=0,this._prevTime=Date.now()/1e3,this._vignette=new wc,this._ppmScaleFactor=o}destroy(){this.particlesVx&&this.particlesVx.destroy(),this.particlesIdx&&this.particlesIdx.destroy(),this._vignette&&this._vignette.destroy()}updateOnRender(o,c){const A=o.transform;this._movement.update(A,this._ppmScaleFactor);const R=A.starsProjMatrix,C=n.ad.quat.identity([]);n.ad.quat.rotateX(C,C,n.ak(90)-A._pitch),n.ad.quat.rotateZ(C,C,-A.angle);const E=n.ad.mat4.fromQuat(new Float32Array(16),C),L=n.ad.mat4.fromValues(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1),j=n.ad.mat4.transpose([],L),$=n.ad.mat4.multiply([],j,E),W=Date.now()/1e3;return this._accumulatedTimeFromStart+=(W-this._prevTime)*c,this._prevTime=W,{projectionMatrix:R,modelviewMatrix:$}}}class _h extends zu{constructor(o){super(4.25),this._params={overrideStyleParameters:!1,intensity:.5,timeFactor:1,velocityConeAperture:0,velocity:300,boxSize:2500,dropletSizeX:1,dropletSizeYScale:10,distortionStrength:70,screenThinning:{intensity:.57,start:.46,range:1.17,fadePower:.17,affectedRatio:1,particleOffset:-.2},color:{r:.66,g:.68,b:.74,a:.7},direction:{x:-50,y:-35},shapeDirPower:2,shapeNormalPower:1},this._revealParams=new vc(o.tp,["Precipitation","Rain"]),this._vignetteParams={strength:1,start:.7,range:1,fadePower:.4,color:{r:.27,g:.27,b:.27,a:1}},this.particlesCount=16e3}update(o){const c=o.context;if(!this.particlesVx){const A=Ku(this.particlesCount),R=new n.dw,C=new n.aV;let E=0;const L=n.dl(1323123451230);for(let j=0;j<A.length;++j){const $=A[j],W=[2*L()-1,L(),L(),L()];R.emplaceBack($[0],$[1],$[2],-1,-1,...W),R.emplaceBack($[0],$[1],$[2],1,-1,...W),R.emplaceBack($[0],$[1],$[2],1,1,...W),R.emplaceBack($[0],$[1],$[2],-1,1,...W),C.emplaceBack(E+0,E+1,E+2),C.emplaceBack(E+0,E+2,E+3),E+=4}this.particlesVx=c.createVertexBuffer(R,Bd.members),this.particlesIdx=c.createIndexBuffer(C)}}draw(o){if(!this._params.overrideStyleParameters&&!o.style.rain)return;const c=this._params.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},A=o.transform.zoom;if(c.revealStart>A)return;const R=$s(0,1,c.revealStart,c.revealStart+c.revealRange,A);if(!this.particlesVx||!this.particlesIdx)return;const C=structuredClone(this._params);let E=[-C.direction.x,C.direction.y,-100];n.ad.vec3.normalize(E,E);const L=structuredClone(this._vignetteParams);L.strength*=R,C.overrideStyleParameters||(C.intensity=o.style.rain.state.density,C.timeFactor=o.style.rain.state.intensity,C.color=structuredClone(o.style.rain.state.color),E=structuredClone(o.style.rain.state.direction),C.screenThinning.intensity=o.style.rain.state.centerThinning,C.dropletSizeX=o.style.rain.state.dropletSize[0],C.dropletSizeYScale=o.style.rain.state.dropletSize[1]/o.style.rain.state.dropletSize[0],C.distortionStrength=100*o.style.rain.state.distortionStrength,L.strength=1,L.color=structuredClone(o.style.rain.state.vignetteColor));const j=this.updateOnRender(o,C.timeFactor),$=o.context,W=$.gl,te=o.transform;this.screenTexture&&this.screenTexture.size[0]===o.width&&this.screenTexture.size[1]===o.height||(this.screenTexture=new n.T($,{width:o.width,height:o.height,data:null},W.RGBA8)),C.distortionStrength>0&&($.activeTexture.set(W.TEXTURE0),this.screenTexture.bind(W.LINEAR,W.CLAMP_TO_EDGE),W.copyTexSubImage2D(W.TEXTURE_2D,0,0,0,0,0,o.width,o.height));const ae=o.getOrCreateProgram("rainParticle");o.uploadCommonUniforms($,ae),$.activeTexture.set(W.TEXTURE0),this.screenTexture.bind(W.LINEAR,W.CLAMP_TO_EDGE);const de=[C.color.r,C.color.g,C.color.b,C.color.a],Te=(ve,Ee)=>{const Ve=nu(this._movement.getPosition(),ve),Be=C.dropletSizeX,et=C.dropletSizeX*C.dropletSizeYScale,Je=o.width/2,dt=o.height/2,it=$s(0,C.screenThinning.start,0,1,C.screenThinning.intensity),st=$s(.001,C.screenThinning.range,0,1,C.screenThinning.intensity),ot=$s(0,C.screenThinning.particleOffset,0,1,C.screenThinning.intensity),gt=(Tt={modelview:j.modelviewMatrix,projection:j.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:Ve,velocityConeAperture:C.velocityConeAperture,velocity:C.velocity,boxSize:ve,rainDropletSize:[Be,et],distortionStrength:C.distortionStrength,rainDirection:E,color:de,screenSize:[te.width,te.height],thinningCenterPos:[Je,dt],thinningShape:[it,st,Math.pow(10,C.screenThinning.fadePower)],thinningAffectedRatio:C.screenThinning.affectedRatio,thinningParticleOffset:ot,shapeDirectionalPower:C.shapeDirPower,shapeNormalPower:C.shapeNormalPower,mode:Ee?0:1},{u_modelview:Float32Array.from(Tt.modelview),u_projection:Float32Array.from(Tt.projection),u_time:Tt.time,u_cam_pos:Tt.camPos,u_texScreen:0,u_velocityConeAperture:Tt.velocityConeAperture,u_velocity:Tt.velocity,u_boxSize:Tt.boxSize,u_rainDropletSize:Tt.rainDropletSize,u_distortionStrength:Tt.distortionStrength,u_rainDirection:Tt.rainDirection,u_color:Tt.color,u_screenSize:Tt.screenSize,u_thinningCenterPos:Tt.thinningCenterPos,u_thinningShape:Tt.thinningShape,u_thinningAffectedRatio:Tt.thinningAffectedRatio,u_thinningParticleOffset:Tt.thinningParticleOffset,u_shapeDirectionalPower:Tt.shapeDirectionalPower,u_shapeNormalPower:Tt.shapeNormalPower,u_mode:Tt.mode});var Tt;const Xt=Math.round(C.intensity*this.particlesCount),Ft=n.b8.simpleSegment(0,0,4*Xt,2*Xt);ae.draw(o,W.TRIANGLES,ir.disabled,Rr.disabled,br.alphaBlended,vr.disabled,gt,"rain_particles",this.particlesVx,this.particlesIdx,Ft)};C.distortionStrength>0&&Te(C.boxSize,!0),Te(C.boxSize,!1),this._vignette.draw(o,L)}}const ip=n.dd([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_snowParticleData",components:4},{type:"Float32",name:"a_snowParticleDataHorizontalOscillation",components:2}]);class Hh extends zu{constructor(o){super(2.25),this._params={overrideStyleParameters:!1,intensity:.85,timeFactor:.75,velocityConeAperture:70,velocity:40,horizontalOscillationRadius:4,horizontalOscillationRate:1.5,boxSize:2e3,billboardSize:2,shapeFadeStart:.27,shapeFadePower:.21,screenThinning:{intensity:.4,start:.15,range:1.4,fadePower:.24,affectedRatio:1,particleOffset:-.2},color:{r:1,g:1,b:1,a:1},direction:{x:-50,y:-35}},this._revealParams=new vc(o.tp,["Precipitation","Snow"]),this._vignetteParams={strength:.3,start:.78,range:.46,fadePower:.2,color:{r:1,g:1,b:1,a:1}},this.particlesCount=16e3}update(o){const c=o.context;if(!this.particlesVx){const A=Ku(this.particlesCount),R=new n.dx,C=new n.aV;let E=0;const L=n.dl(1323123451230);for(let j=0;j<A.length;++j){const $=A[j],W=L(),te=L(),ae=L(),de=[j/A.length,W,te,ae],Te=[L(),L()];R.emplaceBack($[0],$[1],$[2],-1,-1,...de,...Te),R.emplaceBack($[0],$[1],$[2],1,-1,...de,...Te),R.emplaceBack($[0],$[1],$[2],1,1,...de,...Te),R.emplaceBack($[0],$[1],$[2],-1,1,...de,...Te),C.emplaceBack(E+0,E+1,E+2),C.emplaceBack(E+0,E+2,E+3),E+=4}this.particlesVx=c.createVertexBuffer(R,ip.members),this.particlesIdx=c.createIndexBuffer(C)}}draw(o){if(!this._params.overrideStyleParameters&&!o.style.snow)return;const c=structuredClone(this._params);let A=[-c.direction.x,c.direction.y,-100];n.ad.vec3.normalize(A,A);const R=structuredClone(this._vignetteParams),C=c.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},E=o.transform.zoom;if(C.revealStart>E)return;const L=$s(0,1,C.revealStart,C.revealStart+C.revealRange,E);R.strength*=L,c.overrideStyleParameters||(c.intensity=o.style.snow.state.density,c.timeFactor=o.style.snow.state.intensity,c.color=structuredClone(o.style.snow.state.color),A=structuredClone(o.style.snow.state.direction),c.screenThinning.intensity=o.style.snow.state.centerThinning,c.billboardSize=2.79*o.style.snow.state.flakeSize,R.strength=1,R.color=structuredClone(o.style.snow.state.vignetteColor));const j=this.updateOnRender(o,c.timeFactor);if(!this.particlesVx||!this.particlesIdx)return;const $=o.context,W=$.gl,te=o.transform,ae=o.getOrCreateProgram("snowParticle");o.uploadCommonUniforms($,ae),((de,Te,ve)=>{const Ee=nu(this._movement.getPosition(),de),Ve=te.width/2,Be=te.height/2,et=$s(0,ve.screenThinning.start,0,1,ve.screenThinning.intensity),Je=$s(.001,ve.screenThinning.range,0,1,ve.screenThinning.intensity),dt=$s(0,ve.screenThinning.particleOffset,0,1,ve.screenThinning.intensity),it=(st={modelview:j.modelviewMatrix,projection:j.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:Ee,velocityConeAperture:ve.velocityConeAperture,velocity:ve.velocity,horizontalOscillationRadius:ve.horizontalOscillationRadius,horizontalOscillationRate:ve.horizontalOscillationRate,boxSize:de,billboardSize:1*ve.billboardSize,simpleShapeParameters:[ve.shapeFadeStart,ve.shapeFadePower],screenSize:[te.width,te.height],thinningCenterPos:[Ve,Be],thinningShape:[et,Je,Math.pow(10,ve.screenThinning.fadePower)],thinningAffectedRatio:ve.screenThinning.affectedRatio,thinningParticleOffset:dt,color:[ve.color.r,ve.color.g,ve.color.b,ve.color.a],direction:A},{u_modelview:Float32Array.from(st.modelview),u_projection:Float32Array.from(st.projection),u_time:st.time,u_cam_pos:st.camPos,u_velocityConeAperture:st.velocityConeAperture,u_velocity:st.velocity,u_horizontalOscillationRadius:st.horizontalOscillationRadius,u_horizontalOscillationRate:st.horizontalOscillationRate,u_boxSize:st.boxSize,u_billboardSize:st.billboardSize,u_simpleShapeParameters:st.simpleShapeParameters,u_screenSize:st.screenSize,u_thinningCenterPos:st.thinningCenterPos,u_thinningShape:st.thinningShape,u_thinningAffectedRatio:st.thinningAffectedRatio,u_thinningParticleOffset:st.thinningParticleOffset,u_particleColor:st.color,u_direction:st.direction});var st;const ot=Math.round(ve.intensity*this.particlesCount),gt=n.b8.simpleSegment(0,0,4*ot,2*ot);this.particlesVx&&this.particlesIdx&&ae.draw(o,W.TRIANGLES,ir.disabled,Rr.disabled,br.alphaBlended,vr.disabled,it,"snow_particles",this.particlesVx,this.particlesIdx,gt)})(c.boxSize,0,c),this._vignette.draw(o,R)}}const vh={symbol:function(g,o,c,A,R){if(g.renderPass!=="translucent")return;const C=Rr.disabled,E=g.colorModeForRenderPass(),L=c.layout.get("text-variable-anchor"),j=c.layout.get("text-size-scale-range"),$=n.ay(g.scaleFactor,j[0],j[1]);L&&function(ae,de,Te,ve,Ee,Ve,Be,et){const Je=de.transform,dt=Ee==="map",it=Ve==="map";for(const st of ae){const ot=ve.getTile(st),gt=ot.getBucket(Te);if(!gt||!gt.text||!gt.text.segments.get().length)continue;const Tt=n.bp(gt.textSizeData,Je.zoom,et),Xt=ko(st,gt.getProjection(),Je),Ft=Je.calculatePixelsToTileUnitsMatrix(ot),ra=Rs(Xt,ot.tileID.canonical,it,dt,Je,gt.getProjection(),Ft),ua=gt.hasIconTextFit()&&gt.hasIconData();if(Tt){const Ca=Math.pow(2,Je.zoom-ot.tileID.overscaledZ);ss(gt,dt,it,Be,n.cY,Je,ra,st,Ca,Tt,ua)}}}(A,g,c,o,c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),R,$);const W=c.paint.get("icon-opacity").constantOr(1)!==0,te=c.paint.get("text-opacity").constantOr(1)!==0;c.layout.get("symbol-sort-key").constantOr(1)!==void 0&&(W||te)?vn(g,o,c,A,C,E):(W&&vn(g,o,c,A,C,E,{onlyIcons:!0}),te&&vn(g,o,c,A,C,E,{onlyText:!0})),o.map.showCollisionBoxes&&(Fi(g,o,c,A,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),!0),Fi(g,o,c,A,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),!1))},circle:function(g,o,c,A){if(g.renderPass!=="translucent")return;const R=c.paint.get("circle-opacity"),C=c.paint.get("circle-stroke-width"),E=c.paint.get("circle-stroke-opacity"),L=c.layout.get("circle-sort-key").constantOr(1)!==void 0,j=c.paint.get("circle-emissive-strength");if(R.constantOr(1)===0&&(C.constantOr(1)===0||E.constantOr(1)===0))return;const $=g.context,W=$.gl,te=g.transform,ae=g.depthModeForSublayer(0,ir.ReadOnly),de=Rr.disabled,Te=g.colorModeForDrapableLayerRenderPass(j),ve=te.projection.name==="globe",Ee=[n.av(te.center.lng),n.aC(te.center.lat)],Ve=[];for(let et=0;et<A.length;et++){const Je=A[et],dt=o.getTile(Je),it=dt.getBucket(c);if(!it||it.projection.name!==te.projection.name)continue;const st=it.programConfigurations.get(c.id),ot=n.cZ(c),gt=g.isTileAffectedByFog(Je);ve&&ot.push("PROJECTION_GLOBE_VIEW"),ot.push("DEPTH_D24"),g.terrain&&te.depthOcclusionForSymbolsAndCircles&&ot.push("DEPTH_OCCLUSION");const Tt=g.getOrCreateProgram("circle",{config:st,defines:ot,overrideFog:gt}),Xt=it.layoutVertexBuffer,Ft=it.globeExtVertexBuffer,ra=it.indexBuffer,ua=te.projection.createInversionMatrix(te,Je.canonical),Ca={programConfiguration:st,program:Tt,layoutVertexBuffer:Xt,globeExtVertexBuffer:Ft,indexBuffer:ra,uniformValues:n.c_(g,Je,dt,ua,Ee,c),tile:dt};if(L){const Lt=it.segments.get();for(const sa of Lt)Ve.push({segments:new n.b8([sa]),sortKey:sa.sortKey,state:Ca})}else Ve.push({segments:it.segments,sortKey:0,state:Ca})}L&&Ve.sort((et,Je)=>et.sortKey-Je.sortKey);const Be={useDepthForOcclusion:te.depthOcclusionForSymbolsAndCircles};for(const et of Ve){const{programConfiguration:Je,program:dt,layoutVertexBuffer:it,globeExtVertexBuffer:st,indexBuffer:ot,uniformValues:gt,tile:Tt}=et.state,Xt=et.segments;g.terrain&&g.terrain.setupElevationDraw(Tt,dt,Be),g.uploadCommonUniforms($,dt,Tt.tileID.toUnwrapped()),dt.draw(g,W.TRIANGLES,ae,de,Te,vr.disabled,gt,c.id,it,ot,Xt,c.paint,te.zoom,Je,[st])}},heatmap:function(g,o,c,A){if(c.paint.get("heatmap-opacity")!==0)if(g.renderPass==="offscreen"){const R=g.context,C=R.gl,E=Rr.disabled,L=new br([C.ONE,C.ONE,C.ONE,C.ONE],n.al.transparent,[!0,!0,!0,!0]);(function(de,Te,ve,Ee){const Ve=de.gl,Be=Te.width*Ee,et=Te.height*Ee;de.activeTexture.set(Ve.TEXTURE1),de.viewport.set([0,0,Be,et]);let Je=ve.heatmapFbo;if(!Je||Je&&(Je.width!==Be||Je.height!==et)){Je&&Je.destroy();const dt=Ve.createTexture();Ve.bindTexture(Ve.TEXTURE_2D,dt),Ve.texParameteri(Ve.TEXTURE_2D,Ve.TEXTURE_WRAP_S,Ve.CLAMP_TO_EDGE),Ve.texParameteri(Ve.TEXTURE_2D,Ve.TEXTURE_WRAP_T,Ve.CLAMP_TO_EDGE),Ve.texParameteri(Ve.TEXTURE_2D,Ve.TEXTURE_MIN_FILTER,Ve.LINEAR),Ve.texParameteri(Ve.TEXTURE_2D,Ve.TEXTURE_MAG_FILTER,Ve.LINEAR),Je=ve.heatmapFbo=de.createFramebuffer(Be,et,!0,null),function(it,st,ot,gt,Tt,Xt){const Ft=it.gl;Ft.texImage2D(Ft.TEXTURE_2D,0,it.extRenderToTextureHalfFloat?Ft.RGBA16F:Ft.RGBA,Tt,Xt,0,Ft.RGBA,it.extRenderToTextureHalfFloat?Ft.HALF_FLOAT:Ft.UNSIGNED_BYTE,null),gt.colorAttachment.set(ot)}(de,0,dt,Je,Be,et)}else Ve.bindTexture(Ve.TEXTURE_2D,Je.colorAttachment.get()),de.bindFramebuffer.set(Je.framebuffer)})(R,g,c,g.transform.projection.name==="globe"?.5:.25),R.clear({color:n.al.transparent});const j=g.transform,$=j.projection.name==="globe",W=$?["PROJECTION_GLOBE_VIEW"]:[],te=$?vr.frontCCW:vr.disabled,ae=[n.av(j.center.lng),n.aC(j.center.lat)];for(let de=0;de<A.length;de++){const Te=A[de];if(o.hasRenderableParent(Te))continue;const ve=o.getTile(Te),Ee=ve.getBucket(c);if(!Ee||Ee.projection.name!==j.projection.name)continue;const Ve=g.isTileAffectedByFog(Te),Be=Ee.programConfigurations.get(c.id),et=g.getOrCreateProgram("heatmap",{config:Be,defines:W,overrideFog:Ve}),{zoom:Je}=g.transform;g.terrain&&g.terrain.setupElevationDraw(ve,et),g.uploadCommonUniforms(R,et,Te.toUnwrapped());const dt=j.projection.createInversionMatrix(j,Te.canonical);et.draw(g,C.TRIANGLES,ir.disabled,E,L,te,Qt(g,Te,ve,dt,ae,Je,c.paint.get("heatmap-intensity")),c.id,Ee.layoutVertexBuffer,Ee.indexBuffer,Ee.segments,c.paint,g.transform.zoom,Be,$?[Ee.globeExtVertexBuffer]:null)}R.viewport.set([0,0,g.width,g.height])}else g.renderPass==="translucent"&&(g.context.setColorMode(g.colorModeForRenderPass()),function(R,C){const E=R.context,L=E.gl,j=C.heatmapFbo;if(!j)return;E.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,j.colorAttachment.get()),E.activeTexture.set(L.TEXTURE1);let $=C.colorRampTexture;$||($=C.colorRampTexture=new n.T(E,C.colorRamp,L.RGBA8)),$.bind(L.LINEAR,L.CLAMP_TO_EDGE),R.getOrCreateProgram("heatmapTexture").draw(R,L.TRIANGLES,ir.disabled,Rr.disabled,R.colorModeForRenderPass(),vr.disabled,((W,te,ae,de)=>({u_image:0,u_color_ramp:1,u_opacity:te.paint.get("heatmap-opacity")}))(0,C),C.id,R.viewportBuffer,R.quadTriangleIndexBuffer,R.viewportSegments,C.paint,R.transform.zoom)}(g,c))},line:function(g,o,c,A){if(g.renderPass!=="translucent")return;const R=c.paint.get("line-opacity"),C=c.paint.get("line-width");if(R.constantOr(1)===0||C.constantOr(1)===0)return;const E=c.paint.get("line-emissive-strength"),L=c.paint.get("line-occlusion-opacity"),j=c.layout.get("line-elevation-reference"),$=c.layout.get("line-width-unit")==="meters",W=j==="sea",te=g.context,ae=te.gl;if(c.hasElevatedBuckets&&g.transform.projection.name==="globe")return;const de=c.layout.get("line-cross-slope"),Te=de!==void 0,ve=de<1,Ee=g.colorModeForDrapableLayerRenderPass(E),Ve=g.terrain&&g.terrain.renderingToTexture,Be=Ve?1:n.q.devicePixelRatio,et=c.paint.get("line-dasharray"),Je=et.constantOr(1),dt=c.layout.get("line-cap"),it=et.constantOr(null),st=dt.constantOr(null),ot=c.paint.get("line-pattern"),gt=ot.constantOr(1),Tt=ot.constantOr(null),Xt=c.paint.get("line-opacity").constantOr(1);let Ft=!gt&&Xt!==1||g.depthOcclusion&&L>0&&L<1;const ra=c.paint.get("line-gradient"),ua=gt?"linePattern":"line",Ca=n.c$(c);let Lt;if(Ve&&g.terrain&&g.terrain.clipOrMaskOverlapStencilType()&&(Ft=!1),L!==0&&g.depthOcclusion){const zt=c.paint._values["line-opacity"];zt&&zt.value&&zt.value.kind==="constant"?Lt=zt.value:n.w(`Occlusion opacity for layer ${c.id} is supported only when line-opacity isn't data-driven.`)}C.value.kind!=="constant"&&C.value.isLineProgressConstant===!1&&Ca.push("VARIABLE_LINE_WIDTH");const sa=(zt,oa,ea,da,Wt,pa)=>{for(const Ia of zt){const La=o.getTile(Ia);if(gt&&!La.patternsLoaded())continue;const Ea=La.getBucket(c);if(!Ea||Ea.hasZOffset&&!Wt||!Ea.hasZOffset&&Wt)continue;g.prepareDrawTile();const sr=Ea.programConfigurations.get(c.id),Fr=g.isTileAffectedByFog(Ia),mr=g.getOrCreateProgram(ua,{config:sr,defines:oa,overrideFog:Fr,overrideRtt:!Wt&&void 0});if(Tt&&La.imageAtlas){const Tr=n.d0.from(Tt).getPrimary().scaleSelf(Be).toString(),tr=La.imageAtlas.patternPositions.get(Tr);tr&&sr.setConstantPatternPositions(tr)}if(!gt&&it&&st&&La.lineAtlas){const Tr=La.lineAtlas.getDash(it,st);Tr&&sr.setConstantPatternPositions(Tr)}let[Or,Cr]=c.paint.get("line-trim-offset");(st==="round"||st==="square")&&Or!==Cr&&(Or===0&&(Or-=1),Cr===1&&(Cr+=1));const xr=Ve?Ia.projMatrix:null,Ur=$?1/Ea.tileToMeter/n.at(La,1,g.transform.zoom):1,Ir=$?1/Ea.tileToMeter/n.at(La,1,Math.floor(g.transform.zoom)):1,hr=gt?n.d1(g,La,c,xr,Be,Ur,Ir,[Or,Cr]):n.d2(g,La,c,xr,Ea.lineClipsArray.length,Be,Ur,Ir,[Or,Cr]);if(ra){const Tr=Ea.gradients[c.id];let tr=Tr.texture;if(c.gradientVersion!==Tr.version){let sn=256;if(c.stepInterpolant){const $n=o.getSource().maxzoom,cn=Ia.canonical.z===$n?Math.ceil(1<<g.transform.maxZoom-Ia.canonical.z):1;sn=n.ay(n.d3(Ea.maxLineLength/n.ai*1024*cn),256,te.maxTextureSize)}Tr.gradient=n.d4({expression:c.gradientExpression(),evaluationKey:"lineProgress",resolution:sn,image:Tr.gradient||void 0,clips:Ea.lineClipsArray}),Tr.texture?Tr.texture.update(Tr.gradient):Tr.texture=new n.T(te,Tr.gradient,ae.RGBA8),Tr.version=c.gradientVersion,tr=Tr.texture}te.activeTexture.set(ae.TEXTURE1),tr.bind(c.stepInterpolant?ae.NEAREST:ae.LINEAR,ae.CLAMP_TO_EDGE)}Je&&(te.activeTexture.set(ae.TEXTURE0),La.lineAtlasTexture&&La.lineAtlasTexture.bind(ae.LINEAR,ae.REPEAT),sr.updatePaintBuffers()),gt&&(te.activeTexture.set(ae.TEXTURE0),La.imageAtlasTexture&&La.imageAtlasTexture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE),sr.updatePaintBuffers()),Wt&&!W&&g.terrain.setupElevationDraw(La,mr),g.uploadCommonUniforms(te,mr,Ia.toUnwrapped());const nn=Tr=>{Lt!=null&&(Lt.value=Xt*L),mr.draw(g,ae.TRIANGLES,ea,Tr,Ee,vr.disabled,hr,c.id,Ea.layoutVertexBuffer,Ea.indexBuffer,Ea.segments,c.paint,g.transform.zoom,sr,[Ea.layoutVertexBuffer2,Ea.patternVertexBuffer,Ea.zOffsetVertexBuffer]),Lt!=null&&(Lt.value=Xt)};if(Ft&&!Wt){const Tr=g.stencilModeForClipping(Ia).ref;Tr===0&&Ve&&te.clear({stencil:0});const tr={func:ae.EQUAL,mask:255};hr.u_alpha_discard_threshold=.8,nn(new Rr(tr,Tr,255,ae.KEEP,ae.KEEP,ae.INVERT)),hr.u_alpha_discard_threshold=0,nn(new Rr(tr,Tr,255,ae.KEEP,ae.KEEP,ae.KEEP))}else hr.u_alpha_discard_threshold=Ft&&Wt&&pa?.8:0,nn(Wt?da:g.stencilModeForClipping(Ia))}};if(c.hasNonElevatedBuckets){const zt=!Ve&&g.terrain;L!==0&&zt?n.w(`Occlusion opacity for layer ${c.id} is supported on terrain only if the layer has line-z-offset enabled.`):zt?n.w(`Cannot render non-elevated lines in immediate mode when terrain is enabled. Layer: ${c.id}.`):sa(A,Ca,g.depthModeForSublayer(0,ir.ReadOnly),Rr.disabled,!1,!0)}if(c.hasElevatedBuckets){Ca.push("ELEVATED"),Te&&Ca.push(ve?"CROSS_SLOPE_HORIZONTAL":"CROSS_SLOPE_VERTICAL"),W&&Ca.push("ELEVATION_REFERENCE_SEA");const zt=Ft?g.stencilModeFor3D():Rr.disabled,oa=new ir(g.depthOcclusion?ae.GREATER:ae.LEQUAL,ir.ReadOnly,g.depthRangeFor3D);g.forceTerrainMode=!0,sa(A,Ca,oa,zt,!0,!0),Ft&&sa(A,Ca,oa,zt,!0,!1),g.forceTerrainMode=!1}Ft&&(g.resetStencilClippingMasks(),Ve&&te.clear({stencil:0})),L===0||g.depthOcclusion||Ve||g.layersWithOcclusionOpacity.push(g.currentLayer)},fill:function(g,o,c,A){const R=c.paint.get("fill-color"),C=c.paint.get("fill-opacity");if(C.constantOr(1)===0)return;const E=c.paint.get("fill-emissive-strength"),L=g.colorModeForDrapableLayerRenderPass(E),j=c.paint.get("fill-pattern"),$=g.opaquePassEnabledForLayer()&&!j.constantOr(1)&&R.constantOr(n.al.transparent).a===1&&C.constantOr(0)===1?"opaque":"translucent";let W="none";c.layout.get("fill-elevation-reference")!=="none"?W="road":c.paint.get("fill-z-offset").constantOr(1)!==0&&(W="offset");const te=!(!g.terrain||!g.terrain.enabled),ae={painter:g,sourceCache:o,layer:c,coords:A,colorMode:L,elevationType:W,terrainEnabled:te,pass:$};if(W!=="offset"){if(nl(ae,!1),W==="road"){const de=!te&&g.renderPass==="translucent";de&&To(g,o,c,A,"geometry"),nl(ae,!0,Rr.disabled),de&&function(Te){const{painter:ve,sourceCache:Ee,layer:Ve,coords:Be,colorMode:et}=Te,Je=ve.context.gl,dt=new ir(ve.context.gl.LEQUAL,ir.ReadOnly,ve.depthRangeFor3D);for(const it of Be){const st=Ee.getTile(it),ot=st.getBucket(Ve);if(!ot)continue;const gt=ot.elevatedStructures;if(!gt||!gt.renderableSegments||gt.renderableSegments.segments[0].primitiveLength===0)continue;ve.prepareDrawTile();const Tt=ot.bufferData.programConfigurations.get(Ve.id),Xt=ve.isTileAffectedByFog(it),Ft=ve.getOrCreateProgram("elevatedStructures",{config:Tt,overrideFog:Xt,defines:["NORMAL_OFFSET"]}),ra={u_matrix:ve.translatePosMatrix(it.projMatrix,st,Ve.paint.get("fill-translate"),Ve.paint.get("fill-translate-anchor"))};ve.uploadCommonUniforms(ve.context,Ft,it.toUnwrapped()),Ft.draw(ve,Je.TRIANGLES,dt,Rr.disabled,et,vr.backCCW,ra,Ve.id,gt.vertexBuffer,gt.indexBuffer,gt.renderableSegments,Ve.paint,ve.transform.zoom,Tt,[gt.vertexBufferNormal])}}(ae)}}else nl(ae,!1,g.stencilModeFor3D())},"fill-extrusion":function(g,o,c,A){const R=c.paint.get("fill-extrusion-opacity"),C=g.context,E=C.gl,L=g.terrain,j=L&&L.renderingToTexture;if(R===0)return;const $=g.conflationActive&&g.style.isLayerClipped(c,o.getSource()),W=g.style.order.indexOf(c.fqid);if($&&function(te,ae,de,Te,ve){for(const Ee of Te){const Ve=ae.getTile(Ee).getBucket(de);Ve&&(Ve.updateReplacement(Ee,te.replacementSource,ve),Ve.uploadCentroid(te.context))}}(g,o,c,A,W),L||$)for(const te of A){const ae=o.getTile(te).getBucket(c);ae&&Dl(g.context,o,te,ae,c,L,$)}if(g.renderPass==="shadow"&&g.shadowRenderer){const te=g.shadowRenderer;if(L&&R<.65&&c._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof n.ab)return;const ae=te.getShadowPassDepthMode(),de=te.getShadowPassColorMode();Ol(g,o,c,A,ae,Rr.disabled,de,$)}else if(g.renderPass==="translucent"){const te=!c.paint.get("fill-extrusion-pattern").constantOr(1),ae=c.paint.get("fill-extrusion-color").constantOr(n.al.white);if(!j&&ae.a!==0){const de=new ir(g.context.gl.LEQUAL,ir.ReadWrite,g.depthRangeFor3D);R===1&&te?Ol(g,o,c,A,de,Rr.disabled,br.unblended,$):(Ol(g,o,c,A,de,Rr.disabled,br.disabled,$),Ol(g,o,c,A,de,g.stencilModeFor3D(),g.colorModeForRenderPass(),$),g.resetStencilClippingMasks())}if(g.style.enable3dLights()&&te&&(!L&&g.transform.projection.name!=="globe"||j)){const de=c.paint.get("fill-extrusion-opacity"),Te=c.paint.get("fill-extrusion-ambient-occlusion-intensity"),ve=c.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),Ee=c.paint.get("fill-extrusion-flood-light-intensity"),Ve=c.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default")==="none",Be=c.paint.get("fill-extrusion-flood-light-color").toRenderColor(Ve?null:c.lut).toArray01().slice(0,3),et=Te>0&&ve>0,Je=Ee>0,dt=(st,ot,gt)=>(1-gt)*st+gt*ot,it=st=>{const ot=g.depthModeForSublayer(1,ir.ReadOnly,E.LEQUAL,!0),gt=c.paint.get(st?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),Tt=dt(.1,3,gt),Xt=g._showOverdrawInspector;if(!Xt){const Ft=new Rr({func:E.ALWAYS,mask:255},255,255,E.KEEP,E.KEEP,E.REPLACE),ra=new br([E.ONE,E.ONE,E.ONE,E.ONE],n.al.transparent,[!1,!1,!1,!0],E.MIN);xs(g,o,c,A,ot,Ft,ra,vr.disabled,st,"sdf",de,Te,ve,Ee,Be,Tt,$,!1)}{const Ft=Xt?Rr.disabled:new Rr({func:E.EQUAL,mask:255},255,255,E.KEEP,E.DECR,E.DECR),ra=Xt?g.colorModeForRenderPass():new br([E.ONE_MINUS_DST_ALPHA,E.DST_ALPHA,E.ONE,E.ONE],n.al.transparent,[!0,!0,!0,!0]);xs(g,o,c,A,ot,Ft,ra,vr.disabled,st,"color",de,Te,ve,Ee,Be,Tt,$,!1)}};if(j){const st=(ot,gt,Tt)=>{const Xt=g.depthModeForSublayer(1,ir.ReadOnly,E.LEQUAL,!1),Ft=c.paint.get(ot?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),ra=dt(.1,3,Ft);{const ua=new br([E.ONE,E.ONE,E.ONE,E.ONE],n.al.transparent,[!1,!1,!1,!0]);xs(g,o,c,A,Xt,Rr.disabled,ua,vr.disabled,ot,"clear",de,Te,ve,Ee,Be,ra,$,gt)}{const ua=new Rr({func:E.ALWAYS,mask:255},255,255,E.KEEP,E.KEEP,E.REPLACE),Ca=new br([E.ONE,E.ONE,E.ONE,E.ONE],n.al.transparent,[!1,!1,!1,!0],E.MIN);xs(g,o,c,A,Xt,ua,Ca,vr.disabled,ot,"sdf",de,Te,ve,Ee,Be,ra,$,gt)}{const ua=ot?E.ZERO:E.ONE_MINUS_DST_ALPHA,Ca=new Rr({func:E.EQUAL,mask:255},255,255,E.KEEP,E.DECR,E.DECR),Lt=new br([ua,E.DST_ALPHA,E.ONE_MINUS_DST_ALPHA,E.ZERO],n.al.transparent,[!0,!0,!0,!0]);xs(g,o,c,A,Xt,Ca,Lt,vr.disabled,ot,"color",de,Te,ve,Ee,Be,ra,$,gt)}{const ua=new br([E.ONE,E.ONE,E.ONE,ot?E.ZERO:E.ONE],n.al.transparent,[!1,!1,!1,!0],ot?E.FUNC_ADD:E.MAX);xs(g,o,c,A,Xt,Rr.disabled,ua,vr.disabled,ot,"clear",de,Te,ve,Ee,Be,ra,$,gt,Tt)}};if(et||Je){let ot;if(g.prepareDrawTile(),L){const gt=L.drapeBufferSize[0],Tt=L.drapeBufferSize[1];ot=L.framebufferCopyTexture,ot&&(!ot||ot.size[0]===gt&&ot.size[1]===Tt)||(ot&&ot.destroy(),ot=L.framebufferCopyTexture=new n.T(C,new n.r({width:gt,height:Tt}),E.RGBA8)),ot.bind(E.LINEAR,E.CLAMP_TO_EDGE),E.copyTexSubImage2D(E.TEXTURE_2D,0,0,0,0,0,gt,Tt)}et&&st(!0,!1,ot),Je&&st(!1,!0,ot)}}else et&&it(!0),Je&&it(!1),(et||Je)&&g.resetStencilClippingMasks()}}},hillshade:function(g,o,c,A){if(g.renderPass!=="offscreen"&&g.renderPass!=="translucent"||g.style.disableElevatedTerrain)return;const R=g.context,C=g.terrain&&g.terrain.renderingToTexture,[E,L]=g.renderPass!=="translucent"||C?[{},A]:g.stencilConfigForOverlap(A);for(const j of L){const $=o.getTile(j);if($.needsHillshadePrepare&&g.renderPass==="offscreen")zd(g,$,c);else if(g.renderPass==="translucent"){const W=g.depthModeForSublayer(0,ir.ReadOnly),te=c.paint.get("hillshade-emissive-strength"),ae=g.colorModeForDrapableLayerRenderPass(te),de=C&&g.terrain?g.terrain.stencilModeForRTTOverlap(j):E[j.overscaledZ];ts(g,j,$,c,W,de,ae)}}R.viewport.set([0,0,g.width,g.height]),g.resetStencilClippingMasks()},raster:function(g,o,c,A,R,C){if(g.renderPass!=="translucent"||c.paint.get("raster-opacity")===0)return;const E=g.transform.projection.name==="globe",L=c.paint.get("raster-elevation")!==0,j=L&&E;if(g.renderElevatedRasterBackface&&!j)return;const $=g.context,W=$.gl,te=o.getSource(),ae=function(it,st,ot,gt){const Tt=st.paint.get("raster-color"),Xt=it.type==="raster-array",Ft=[],ra=st.paint.get("raster-resampling"),ua=st.paint.get("raster-color-mix");let Ca=st.paint.get("raster-color-range");const Lt=[ua[0],ua[1],ua[2],0],sa=ua[3];let zt=ra==="nearest"?gt.NEAREST:gt.LINEAR;if(Xt&&(Ft.push("RASTER_ARRAY"),Tt||Ft.push("RASTER_COLOR"),ra==="linear"&&Ft.push("RASTER_ARRAY_LINEAR"),zt=gt.NEAREST,!Ca&&it.rasterLayers)){const oa=it.rasterLayers.find(({id:ea})=>ea===st.sourceLayer);oa&&oa.fields&&oa.fields.range&&(Ca=oa.fields.range)}if(Ca=Ca||[0,1],Tt){Ft.push("RASTER_COLOR"),ot.activeTexture.set(gt.TEXTURE2),st.updateColorRamp(Ca);let oa=st.colorRampTexture;oa||(oa=st.colorRampTexture=new n.T(ot,st.colorRamp,gt.RGBA8)),oa.bind(gt.LINEAR,gt.CLAMP_TO_EDGE)}return{mix:Lt,range:Ca,offset:sa,defines:Ft,resampling:zt}}(te,c,$,W);if(te instanceof n.aK&&!A.length&&!E)return;const de=c.paint.get("raster-emissive-strength"),Te=g.colorModeForDrapableLayerRenderPass(de),ve=g.terrain&&g.terrain.renderingToTexture,Ee=!g.options.moving,Ve=c.paint.get("raster-resampling")==="nearest"?W.NEAREST:W.LINEAR;if(te instanceof n.aK&&!A.length&&(te.onNorthPole||te.onSouthPole)){const it=L?g.stencilModeFor3D():Rr.disabled;return void jt(!!te.onNorthPole,null,g,o,c,de,ae,vr.disabled,it)}if(!A.length)return;const[Be,et]=te instanceof n.aK||ve?[{},A]:g.stencilConfigForOverlap(A),Je=et[et.length-1].overscaledZ;j&&ae.defines.push("PROJECTION_GLOBE_VIEW"),L&&ae.defines.push("RENDER_CUTOFF");const dt=(it,st,ot)=>{for(const gt of it){const Tt=gt.toUnwrapped(),Xt=o.getTile(gt);if(ve&&(!Xt||!Xt.hasData()))continue;$.activeTexture.set(W.TEXTURE0);const Ft=hh(Xt,te,c,ae);if(!Ft||!Ft.texture)continue;const{texture:ra,mix:ua,offset:Ca,tileSize:Lt,buffer:sa}=Ft;let zt,oa;ve?(zt=ir.disabled,oa=gt.projMatrix):L?(zt=new ir(W.LEQUAL,ir.ReadWrite,g.depthRangeFor3D),oa=E?Float32Array.from(g.transform.expandedFarZProjMatrix):g.transform.calculateProjMatrix(Tt,Ee)):(zt=g.depthModeForSublayer(gt.overscaledZ-Je,c.paint.get("raster-opacity")===1?ir.ReadWrite:ir.ReadOnly,W.LESS),oa=g.transform.calculateProjMatrix(Tt,Ee));const ea=g.terrain&&ve?g.terrain.stencilModeForRTTOverlap(gt):Be[gt.overscaledZ],da=C?0:c.paint.get("raster-fade-duration");Xt.registerFadeDuration(da);const Wt=o.findLoadedParent(gt,0),pa=zl(Xt,Wt,o,g.transform,da);let Ia,La;g.terrain&&g.terrain.prepareDrawTile(),$.activeTexture.set(W.TEXTURE0),ra.bind(Ve,W.CLAMP_TO_EDGE),$.activeTexture.set(W.TEXTURE1),Wt?(Wt.texture&&Wt.texture.bind(Ve,W.CLAMP_TO_EDGE),Ia=Math.pow(2,Wt.tileID.overscaledZ-Xt.tileID.overscaledZ),La=[Xt.tileID.canonical.x*Ia%1,Xt.tileID.canonical.y*Ia%1]):ra.bind(Ve,W.CLAMP_TO_EDGE),"useMipmap"in ra&&$.extTextureFilterAnisotropic&&g.transform.pitch>20&&W.texParameterf(W.TEXTURE_2D,$.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,$.extTextureFilterAnisotropicMax);const Ea=g.transform;let sr;const Fr=L?Yp(Ea):[0,0,0,0];let mr,Or,Cr,xr,Ur,Ir=0;if(j&&te instanceof n.aK&&te.coordinates.length>3)mr=Float32Array.from(n.bc(n.cI(new n.bT(0,0,0)))),Or=Float32Array.from(Ea.globeMatrix),Cr=Float32Array.from(n.cE(Ea)),xr=[n.av(Ea.center.lng),n.aC(Ea.center.lat)],sr=te.elevatedGlobePerspectiveTransform,Ur=te.elevatedGlobeGridMatrix||new Float32Array(9);else if(j){const tr=n.cF(gt.canonical);Ir=n.cG(tr.getCenter().lat),mr=Float32Array.from(n.bc(n.cI(gt.canonical))),Or=Float32Array.from(Ea.globeMatrix),Cr=Float32Array.from(n.cE(Ea)),xr=[n.av(Ea.center.lng),n.aC(Ea.center.lat)],sr=[0,0],Ur=Float32Array.from(n.cH(gt.canonical,tr,Ir,Ea.worldSize/Ea._pixelsPerMercatorPixel))}else sr=te instanceof n.aK?te.perspectiveTransform:[0,0],mr=new Float32Array(16),Or=new Float32Array(9),Cr=new Float32Array(16),xr=[0,0],Ur=new Float32Array(9);const hr=na(oa,mr,Or,Cr,Ur,La||[0,0],n.ag(g.transform.zoom),xr,Fr,Ia||1,pa,c,sr,L?c.paint.get("raster-elevation"):0,2,ua,Ca,ae.range,Lt,sa,de),nn=g.isTileAffectedByFog(gt),Tr=g.getOrCreateProgram("raster",{defines:ae.defines,overrideFog:nn});if(g.uploadCommonUniforms($,Tr,Tt),te instanceof n.aK){const tr=te.elevatedGlobeVertexBuffer,sn=te.elevatedGlobeIndexBuffer;if(ve||!E)te.boundsBuffer&&te.boundsSegments&&Tr.draw(g,W.TRIANGLES,zt,Rr.disabled,Te,vr.disabled,hr,c.id,te.boundsBuffer,g.quadTriangleIndexBuffer,te.boundsSegments);else if(tr&&sn){const $n=Ea.zoom<=n.c6?te.elevatedGlobeSegments:te.getSegmentsForLongitude(Ea.center.lng);$n&&Tr.draw(g,W.TRIANGLES,zt,Rr.disabled,Te,st,hr,c.id,tr,sn,$n)}}else if(j){zt=new ir(W.LEQUAL,ir.ReadOnly,g.depthRangeFor3D);const tr=g.globeSharedBuffers;if(tr){const[sn,$n,cn]=tr.getGridBuffers(Ir,!1);Tr.draw(g,W.TRIANGLES,zt,ot||ea,g.colorModeForRenderPass(),st,hr,c.id,sn,$n,cn)}}else{const{tileBoundsBuffer:tr,tileBoundsIndexBuffer:sn,tileBoundsSegments:$n}=g.getTileBoundsBuffers(Xt);Tr.draw(g,W.TRIANGLES,zt,ea,Te,vr.disabled,hr,c.id,tr,sn,$n)}}if(!(te instanceof n.aK)&&j)for(const gt of it){const Tt=gt.canonical.y===(1<<gt.canonical.z)-1;gt.canonical.y===0&&jt(!0,gt,g,o,c,de,ae,st,ot||Rr.disabled),Tt&&jt(!1,gt,g,o,c,de,ae,st===vr.frontCW?vr.backCW:vr.frontCW,ot||Rr.disabled)}};j?dt(et,g.renderElevatedRasterBackface?vr.backCW:vr.frontCW,g.stencilModeFor3D()):dt(et,vr.disabled,void 0),g.resetStencilClippingMasks()},"raster-particle":function(g,o,c,A,R,C){g.renderPass==="offscreen"&&function(E,L,j,$){if(!$.length)return;const W=E.context,te=W.gl,ae=L.getSource();if(!(ae instanceof zi))return;const de=Math.ceil(Math.sqrt(j.paint.get("raster-particle-count")));let Te=j.particlePositionRGBAImage;if(!Te||Te.width!==de){const et=function(Je){const dt=Je*Je,it=new Uint8Array(4*dt),st=function(gt){return gt|=0,gt=Math.imul(2747636419^gt,2654435769),gt=Math.imul(gt^gt>>>16,2654435769),((gt=Math.imul(gt^gt>>>16,2654435769))>>>0)/4294967296},ot=1/1.1;for(let gt=0;gt<dt;gt++){const Tt=ot*(st(2*gt+0)+fa),Xt=ot*(st(2*gt+1)+fa),Ft=255*Tt%1,ra=255*Xt%1,ua=Ft,Ca=Xt-ra/255,Lt=ra;it[4*gt+0]=255*(Tt-Ft/255),it[4*gt+1]=255*ua,it[4*gt+2]=255*Ca,it[4*gt+3]=255*Lt}return it}(de);Te=j.particlePositionRGBAImage=new n.r({width:de,height:de},et)}let ve=j.particleFramebuffer;ve?ve.width!==de&&(ve.destroy(),ve=j.particleFramebuffer=W.createFramebuffer(de,de,!0,null)):ve=j.particleFramebuffer=W.createFramebuffer(de,de,!0,null);const Ee=[];for(const et of $){const Je=L.getTile(et);if(!(Je instanceof Fo))continue;const dt=Pu(Je,ae,j);if(!dt)continue;const it=[Je.tileSize,Je.tileSize];let st=j.tileFramebuffer;st||(st=j.tileFramebuffer=W.createFramebuffer(it[0],it[1],!0,null));let ot=Je.rasterParticleState;ot||(ot=Je.rasterParticleState=new ph(W,et,it,Te));const gt=ot.update(j.lastInvalidatedAt);ot.particleTextureDimension!==de&&ot.updateParticleTexture(et,Te);const Tt=ot.targetColorTexture;ot.targetColorTexture=ot.backgroundColorTexture,ot.backgroundColorTexture=Tt;const Xt=ot.particleTexture0;ot.particleTexture0=ot.particleTexture1,ot.particleTexture1=Xt,Ee.push([et,dt,ot,gt])}if(Ee.length===0)return;const Ve=n.q.now(),Be=j.previousDrawTimestamp?.001*(Ve-j.previousDrawTimestamp):.0167;if(j.previousDrawTimestamp=Ve,j.hasColorMap()){W.activeTexture.set(te.TEXTURE0+2);let et=j.colorRampTexture;et||(et=j.colorRampTexture=new n.T(W,j.colorRamp,te.RGBA8)),et.bind(te.LINEAR,te.CLAMP_TO_EDGE)}W.bindFramebuffer.set(j.tileFramebuffer.framebuffer),function(et,Je,dt){const it=et.context,st=it.gl,ot=Je.tileFramebuffer;it.activeTexture.set(st.TEXTURE0);const gt={u_texture:0,u_opacity:1.05*(Xt=Je.paint.get("raster-particle-fade-opacity-factor"))/(Xt+.05)},Tt=et.getOrCreateProgram("rasterParticleTexture",{defines:[],overrideFog:!1});var Xt;for(const Ft of dt){const[,,ra,ua]=Ft;ot.colorAttachment.set(ra.targetColorTexture.texture),it.viewport.set([0,0,ot.width,ot.height]),it.clear({color:n.al.transparent}),ua&&(ra.backgroundColorTexture.bind(st.NEAREST,st.CLAMP_TO_EDGE),Tt.draw(et,st.TRIANGLES,ir.disabled,Rr.disabled,br.alphaBlended,vr.disabled,gt,Je.id,et.viewportBuffer,et.quadTriangleIndexBuffer,et.viewportSegments))}}(E,j,Ee),function(et,Je,dt,it){const st=et.context,ot=st.gl,gt=dt.tileFramebuffer,Tt=et.transform.projection.name==="globe",Xt=dt.paint.get("raster-particle-max-speed");for(const Ft of it){const[ra,ua,Ca]=Ft;st.activeTexture.set(ot.TEXTURE0+0),ua.texture.bind(ot.LINEAR,ot.CLAMP_TO_EDGE),gt.colorAttachment.set(Ca.targetColorTexture.texture);const Lt=et.getOrCreateProgram("rasterParticleDraw",{defines:ua.defines,overrideFog:!1});st.activeTexture.set(ot.TEXTURE0+1);const sa=ua.scalarData?[]:[0,1,2,3].map(ea=>n.d7[ea](ra));sa.push(ra);const zt=ra.canonical.x,oa=ra.canonical.y;for(const ea of sa){const da=Je.getTile(Tt?ea.wrapped():ea);if(!da)continue;const Wt=da.rasterParticleState;if(!Wt)continue;const pa=ea.canonical.x+(1<<ea.canonical.z)*(ea.wrap-ra.wrap),Ia=ea.canonical.y;Wt.particleTexture0.bind(ot.NEAREST,ot.CLAMP_TO_EDGE);const La=aa(1,Wt.particleTexture0.size[0],[pa-zt,Ia-oa],0,ua.texture.size,2,Xt,ua.textureOffset,ua.scale,ua.offset);Lt.draw(et,ot.POINTS,ir.disabled,Rr.disabled,br.alphaBlended,vr.disabled,La,dt.id,Wt.particleIndexBuffer,void 0,Wt.particleSegment)}}}(E,L,j,Ee),W.bindFramebuffer.set(j.particleFramebuffer.framebuffer),function(et,Je,dt,it){const st=et.context,ot=st.gl,gt=Je.paint.get("raster-particle-max-speed"),Tt=it*Je.paint.get("raster-particle-speed-factor")*.15,Xt=function(ra){return Math.pow(ra,6)}(.01+1*Je.paint.get("raster-particle-reset-rate-factor")),Ft=Je.particleFramebuffer;st.viewport.set([0,0,Ft.width,Ft.height]);for(const ra of dt){const[,ua,Ca]=ra;st.activeTexture.set(ot.TEXTURE0+0),ua.texture.bind(ot.LINEAR,ot.CLAMP_TO_EDGE),st.activeTexture.set(ot.TEXTURE0+1);const Lt=Ca.particleTexture0;Lt.bind(ot.NEAREST,ot.CLAMP_TO_EDGE);const sa=Ga(1,Lt.size[0],0,ua.texture.size,gt,Tt,Xt,ua.textureOffset,ua.scale,ua.offset);Ft.colorAttachment.set(Ca.particleTexture1.texture),st.clear({color:n.al.transparent}),et.getOrCreateProgram("rasterParticleUpdate",{defines:ua.defines}).draw(et,ot.TRIANGLES,ir.disabled,Rr.disabled,br.unblended,vr.disabled,sa,Je.id,et.viewportBuffer,et.quadTriangleIndexBuffer,et.viewportSegments)}}(E,j,Ee,Be)}(g,o,c,A),g.renderPass==="translucent"&&(function(E,L,j,$,W){const te=E.context,ae=te.gl,de=L.getSource().tileSize,Te=5*(1-n.ae(n.bY,n.bY+1,E.transform.zoom))*de+j.paint.get("raster-particle-elevation"),ve=!E.options.moving,Ee=E.transform.projection.name==="globe";if(!$.length)return;const[Ve,Be]=E.stencilConfigForOverlap($),et=[];Ee&&et.push("PROJECTION_GLOBE_VIEW");const Je=E.stencilModeFor3D();for(const dt of Be){const it=dt.toUnwrapped(),st=L.getTile(dt);if(!st.rasterParticleState)continue;const ot=st.rasterParticleState,gt=100;st.registerFadeDuration(gt);const Tt=L.findLoadedParent(dt,0),Xt=zl(st,Tt,L,E.transform,gt);let Ft,ra;E.terrain&&E.terrain.prepareDrawTile(),te.activeTexture.set(ae.TEXTURE0),ot.targetColorTexture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE),te.activeTexture.set(ae.TEXTURE1),Tt&&Tt.rasterParticleState?(Tt.rasterParticleState.targetColorTexture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE),Ft=Math.pow(2,Tt.tileID.overscaledZ-st.tileID.overscaledZ),ra=[st.tileID.canonical.x*Ft%1,st.tileID.canonical.y*Ft%1]):ot.targetColorTexture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE);const ua=Ee?Float32Array.from(E.transform.expandedFarZProjMatrix):E.transform.calculateProjMatrix(it,ve),Ca=E.transform,Lt=mh(Ca),sa=n.cF(dt.canonical),zt=n.cG(sa.getCenter().lat);let oa,ea,da,Wt,pa;Ee?(oa=Float32Array.from(n.bc(n.cI(dt.canonical))),ea=Float32Array.from(Ca.globeMatrix),da=Float32Array.from(n.cE(Ca)),Wt=[n.av(Ca.center.lng),n.aC(Ca.center.lat)],pa=Float32Array.from(n.cH(dt.canonical,sa,zt,Ca.worldSize/Ca._pixelsPerMercatorPixel))):(oa=new Float32Array(16),ea=new Float32Array(9),da=new Float32Array(16),Wt=[0,0],pa=new Float32Array(9));const Ia=wt(ua,oa,ea,da,pa,ra||[0,0],n.ag(E.transform.zoom),Wt,Lt,Ft||1,Xt,Te),La=E.isTileAffectedByFog(dt),Ea=E.getOrCreateProgram("rasterParticle",{defines:et,overrideFog:La});if(E.uploadCommonUniforms(te,Ea,it),Ee){const sr=new ir(ae.LEQUAL,ir.ReadOnly,E.depthRangeFor3D),Fr=0,mr=E.globeSharedBuffers;if(mr){const[Or,Cr,xr]=mr.getGridBuffers(zt,Fr!==0);Ea.draw(E,ae.TRIANGLES,sr,Je,br.alphaBlended,E.renderElevatedRasterBackface?vr.frontCCW:vr.backCCW,Ia,j.id,Or,Cr,xr)}}else{const sr=E.depthModeForSublayer(0,ir.ReadOnly),Fr=Ve[dt.overscaledZ],{tileBoundsBuffer:mr,tileBoundsIndexBuffer:Or,tileBoundsSegments:Cr}=E.getTileBoundsBuffers(st);Ea.draw(E,ae.TRIANGLES,sr,Fr,br.alphaBlended,vr.disabled,Ia,j.id,mr,Or,Cr)}}E.resetStencilClippingMasks()}(g,o,c,A),g.style.map.triggerRepaint())},background:function(g,o,c,A){const R=c.paint.get("background-color"),C=c.paint.get("background-color-use-theme").constantOr("default")==="none",E=c.paint.get("background-opacity"),L=c.paint.get("background-emissive-strength"),j=c.paint.get("background-pitch-alignment")==="viewport";if(E===0)return;const $=g.context,W=$.gl,te=g.transform,ae=te.tileSize,de=c.paint.get("background-pattern");let Te;if(de!==void 0&&(de===null||(Te=g.imageManager.getPattern(n.I.from(de.toString()),c.scope,g.style.getLut(c.scope)),!Te)))return;const ve=!de&&R.a===1&&E===1&&g.opaquePassEnabledForLayer()?"opaque":"translucent";if(g.renderPass!==ve)return;const Ee=Rr.disabled,Ve=g.depthModeForSublayer(0,ve==="opaque"?ir.ReadWrite:ir.ReadOnly),Be=g.colorModeForDrapableLayerRenderPass(L),et=de?"backgroundPattern":"background";let Je,dt=A;if(dt||(Je=g.getBackgroundTiles(),dt=Object.values(Je).map(it=>it.tileID)),de&&($.activeTexture.set(W.TEXTURE0),g.imageManager.bind(g.context,c.scope)),j){const it=g.getOrCreateProgram(et,{overrideFog:!1,overrideRtt:!0}),st=new Float32Array(n.ad.mat4.identity([])),ot=new n.aH(0,0,0,0,0),gt=de?pr(st,L,E,g,0,c.scope,Te,j,{tileID:ot,tileSize:ae}):Sr(st,L,E,R.toRenderColor(C?null:c.lut));it.draw(g,W.TRIANGLES,Ve,Ee,Be,vr.disabled,gt,c.id,g.viewportBuffer,g.quadTriangleIndexBuffer,g.viewportSegments)}else for(const it of dt){const st=g.isTileAffectedByFog(it),ot=g.getOrCreateProgram(et,{overrideFog:st}),gt=it.toUnwrapped(),Tt=A?it.projMatrix:g.transform.calculateProjMatrix(gt);g.prepareDrawTile();const Xt=o?o.getTile(it):Je?Je[it.key]:new $l(it,ae,te.zoom,g),Ft=de?pr(Tt,L,E,g,0,c.scope,Te,j,{tileID:it,tileSize:ae}):Sr(Tt,L,E,R.toRenderColor(C?null:c.lut));g.uploadCommonUniforms($,ot,gt);const{tileBoundsBuffer:ra,tileBoundsIndexBuffer:ua,tileBoundsSegments:Ca}=g.getTileBoundsBuffers(Xt);ot.draw(g,W.TRIANGLES,Ve,Ee,Be,vr.disabled,Ft,c.id,ra,ua,Ca)}},sky:function(g,o,c){const A=g._atmosphere?n.ag(g.transform.zoom):1,R=c.paint.get("sky-opacity")*A;if(R===0)return;const C=g.context,E=c.paint.get("sky-type"),L=new ir(C.gl.LEQUAL,ir.ReadOnly,[0,1]),j=g.frameCounter/1e3%1;E==="atmosphere"?g.renderPass==="offscreen"?c.needsSkyboxCapture(g)&&(function($,W,te,ae){const de=$.context,Te=de.gl;let ve=W.skyboxFbo;if(!ve){ve=W.skyboxFbo=de.createFramebuffer(32,32,!0,null),W.skyboxGeometry=new Km(de),W.skyboxTexture=de.gl.createTexture(),Te.bindTexture(Te.TEXTURE_CUBE_MAP,W.skyboxTexture),Te.texParameteri(Te.TEXTURE_CUBE_MAP,Te.TEXTURE_WRAP_S,Te.CLAMP_TO_EDGE),Te.texParameteri(Te.TEXTURE_CUBE_MAP,Te.TEXTURE_WRAP_T,Te.CLAMP_TO_EDGE),Te.texParameteri(Te.TEXTURE_CUBE_MAP,Te.TEXTURE_MIN_FILTER,Te.LINEAR),Te.texParameteri(Te.TEXTURE_CUBE_MAP,Te.TEXTURE_MAG_FILTER,Te.LINEAR);for(let et=0;et<6;++et)Te.texImage2D(Te.TEXTURE_CUBE_MAP_POSITIVE_X+et,0,Te.RGBA,32,32,0,Te.RGBA,Te.UNSIGNED_BYTE,null)}de.bindFramebuffer.set(ve.framebuffer),de.viewport.set([0,0,32,32]);const Ee=W.getCenter($,!0),Ve=$.getOrCreateProgram("skyboxCapture"),Be=new Float64Array(16);n.ad.mat4.identity(Be),n.ad.mat4.rotateY(Be,Be,.5*-Math.PI),ao($,W,Ve,Be,Ee,0),n.ad.mat4.identity(Be),n.ad.mat4.rotateY(Be,Be,.5*Math.PI),ao($,W,Ve,Be,Ee,1),n.ad.mat4.identity(Be),n.ad.mat4.rotateX(Be,Be,.5*-Math.PI),ao($,W,Ve,Be,Ee,2),n.ad.mat4.identity(Be),n.ad.mat4.rotateX(Be,Be,.5*Math.PI),ao($,W,Ve,Be,Ee,3),n.ad.mat4.identity(Be),ao($,W,Ve,Be,Ee,4),n.ad.mat4.identity(Be),n.ad.mat4.rotateY(Be,Be,Math.PI),ao($,W,Ve,Be,Ee,5),de.viewport.set([0,0,$.width,$.height])}(g,c),c.markSkyboxValid(g)):g.renderPass==="sky"&&function($,W,te,ae,de){const Te=$.context,ve=Te.gl,Ee=$.transform,Ve=$.getOrCreateProgram("skybox");Te.activeTexture.set(ve.TEXTURE0),ve.bindTexture(ve.TEXTURE_CUBE_MAP,W.skyboxTexture);const Be=((et,Je,dt,it,st)=>({u_matrix:et,u_sun_direction:Je,u_cubemap:0,u_opacity:it,u_temporal_offset:st}))(Ee.skyboxMatrix,W.getCenter($,!1),0,ae,de);$.uploadCommonUniforms(Te,Ve),Ve.draw($,ve.TRIANGLES,te,Rr.disabled,$.colorModeForRenderPass(),vr.backCW,Be,"skybox",W.skyboxGeometry.vertexBuffer,W.skyboxGeometry.indexBuffer,W.skyboxGeometry.segment)}(g,c,L,R,j):E==="gradient"&&g.renderPass==="sky"&&function($,W,te,ae,de){const Te=$.context,ve=Te.gl,Ee=$.transform,Ve=$.getOrCreateProgram("skyboxGradient");W.skyboxGeometry||(W.skyboxGeometry=new Km(Te)),Te.activeTexture.set(ve.TEXTURE0);let Be=W.colorRampTexture;Be||(Be=W.colorRampTexture=new n.T(Te,W.colorRamp,ve.RGBA8)),Be.bind(ve.LINEAR,ve.CLAMP_TO_EDGE);const et=((Je,dt,it,st,ot)=>({u_matrix:Je,u_color_ramp:0,u_center_direction:dt,u_radius:n.ak(it),u_opacity:st,u_temporal_offset:ot}))(Ee.skyboxMatrix,W.getCenter($,!1),W.paint.get("sky-gradient-radius"),ae,de);$.uploadCommonUniforms(Te,Ve),Ve.draw($,ve.TRIANGLES,te,Rr.disabled,$.colorModeForRenderPass(),vr.backCW,et,"skyboxGradient",W.skyboxGeometry.vertexBuffer,W.skyboxGeometry.indexBuffer,W.skyboxGeometry.segment)}(g,c,L,R,j)},debug:function(g,o,c,A,R,C){for(let E=0;E<c.length;E++)if(R){const $=new n.al(A.r*.8,A.g*.8,A.b*.8,1);Ml(g,o,c[E],A,-1,-1,C),Ml(g,o,c[E],A,-1,1,C),Ml(g,o,c[E],A,1,1,C),Ml(g,o,c[E],A,1,-1,C),Ml(g,o,c[E],$,0,0,C)}else Ml(g,o,c[E],A,0,0,C)},custom:function(g,o,c,A){const R=g.context,C=c.implementation;if(!g.transform.projection.unsupportedLayers||!g.transform.projection.unsupportedLayers.includes("custom")||g.terrain&&(g.terrain.renderingToTexture||g.renderPass==="offscreen")&&c.isDraped(o)){if(g.renderPass==="offscreen"){const E=C.prerender;if(E){if(g.setCustomLayerDefaults(),R.setColorMode(g.colorModeForRenderPass()),g.transform.projection.name==="globe"){const L=g.transform.pointMerc;E.call(C,R.gl,g.transform.customLayerMatrix(),g.transform.getProjection(),g.transform.globeToMercatorMatrix(),n.ag(g.transform.zoom),[L.x,L.y],g.transform.pixelsPerMeterRatio)}else E.call(C,R.gl,g.transform.customLayerMatrix());R.setDirty(),g.setBaseState()}}else if(g.renderPass==="translucent"){if(g.terrain&&g.terrain.renderingToTexture){const L=C.renderToTile;if(L){const j=A[0].canonical,$=new n.ac(j.x+A[0].wrap*(1<<j.z),j.y,j.z);R.setDepthMode(ir.disabled),R.setStencilMode(Rr.disabled),R.setColorMode(g.colorModeForRenderPass()),g.setCustomLayerDefaults(),L.call(C,R.gl,$),R.setDirty(),g.setBaseState()}return}g.setCustomLayerDefaults(),R.setColorMode(g.colorModeForRenderPass()),R.setStencilMode(Rr.disabled);const E=C.renderingMode==="3d"?new ir(g.context.gl.LEQUAL,ir.ReadWrite,g.depthRangeFor3D):g.depthModeForSublayer(0,ir.ReadOnly);if(R.setDepthMode(E),g.transform.projection.name==="globe"){const L=g.transform.pointMerc;C.render(R.gl,g.transform.customLayerMatrix(),g.transform.getProjection(),g.transform.globeToMercatorMatrix(),n.ag(g.transform.zoom),[L.x,L.y],g.transform.pixelsPerMeterRatio)}else C.render(R.gl,g.transform.customLayerMatrix());R.setDirty(),g.setBaseState(),R.bindFramebuffer.set(null)}}else n.w("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(g,o,c,A){if(g.renderPass==="opaque")return;const R=c.paint.get("model-opacity").constantOr(1);if(R===0)return;const C=c.paint.get("model-cast-shadows");if(g.renderPass==="shadow"&&(!C||g.terrain&&R<.65&&c._transitionablePaint._values["model-opacity"].value.expression instanceof n.ab))return;const E=g.shadowRenderer,L=c.paint.get("model-receive-shadows");E&&(E.useNormalOffset=!0,L||(E.enabled=!1));const j=()=>{E&&(E.useNormalOffset=!0,L||(E.enabled=!0))},$=o.getSource();if(g.renderPass==="light-beam"&&$.type!=="batched-model")return;if($.type==="vector"||$.type==="geojson")return function(Ve,Be,et,Je,dt){const it=Ve.transform;if(it.projection.name!=="mercator")return void n.w(`Drawing 3D models for ${it.projection.name} projection is not yet implemented`);const st=it.getFreeCameraOptions().position;if(!Ve.modelManager)return;const ot=Ve.modelManager;et.modelManager=ot;const gt=Ve.shadowRenderer;if(!et._unevaluatedLayout._values.hasOwnProperty("model-id"))return;const Tt=et._unevaluatedLayout._values["model-id"],Xt=Object.assign({},et.layout.get("model-id").parameters),Ft=Ve.style.order.indexOf(et.fqid);for(const ra of Je){const ua=Be.getTile(ra).getBucket(et);if(!ua||ua.projection.name!==it.projection.name)continue;const Ca=ua.getModelUris();Ca&&!ua.modelsRequested&&(ot.addModelsFromBucket(Ca,dt),ua.modelsRequested=!0);const Lt=Cf(ra,it);Xt.zoom=Lt;const sa=Tt.possiblyEvaluate(Xt);if(qh(Ve,ua,ra),Il.shadowUniformsInitialized=!1,Il.useSingleShadowCascade=!!gt&&gt.getMaxCascadeForTile(ra.toUnwrapped())===0,Ve.renderPass==="shadow"&&gt){if(Ve.currentShadowCascade===1&&ua.isInsideFirstShadowMapFrustum)continue;const ea=it.calculatePosMatrix(ra.toUnwrapped(),it.worldSize);if(Il.tileMatrix.set(ea),Il.shadowTileMatrix=Float32Array.from(gt.calculateShadowPassMatrixFromMatrix(ea)),Il.aabb.min.fill(0),Il.aabb.max[0]=Il.aabb.max[1]=n.ai,Il.aabb.max[2]=0,ap(ua,Il,Ve,et.scope))continue}const zt=1<<ra.canonical.z,oa=[((st.x-ra.wrap)*zt-ra.canonical.x)*n.ai,(st.y*zt-ra.canonical.y)*n.ai,st.z*zt*n.ai];Ve.conflationActive&&Object.keys(ua.instancesPerModel).length>0&&Ve.style.isLayerClipped(et,Be.getSource())&&ua.updateReplacement(ra,Ve.replacementSource,Ft,dt)&&(ua.uploaded=!1,ua.upload(Ve.context));for(let ea in ua.instancesPerModel){const da=ua.instancesPerModel[ea];da.features.length>0&&(ea=sa.evaluate(da.features[0].feature,{}));const Wt=ot.getModel(ea,dt);if(Wt&&Wt.uploaded)for(const pa of Wt.nodes)So(Ve,et,pa,da,oa,ra,Il)}}}(g,o,c,A,$.type==="vector"?c.scope:""),void j();if(!$.loaded())return;if($.type==="batched-model")return function(Ve,Be,et,Je){et.resetLayerRenderingStats(Ve);const dt=Ve.context,it=Ve.transform,st=Ve.style.fog,ot=Ve.shadowRenderer;if(it.projection.name!=="mercator")return void n.w(`Drawing 3D landmark models for ${it.projection.name} projection is not yet implemented`);const gt=Ve.transform.getFreeCameraOptions().position,Tt=n.ad.vec3.scale([],[gt.x,gt.y,gt.z],Ve.transform.worldSize),Xt=n.ad.vec3.negate([],Tt),Ft=n.ad.mat4.identity([]),ra=n.dm(it.center.lat,it.zoom),ua=n.ad.mat4.fromScaling([],[1,1,1/ra]);n.ad.mat4.translate(Ft,Ft,Xt);const Ca=et.paint.get("model-opacity").constantOr(1),Lt=new ir(dt.gl.LEQUAL,ir.ReadWrite,Ve.depthRangeFor3D),sa=new ir(dt.gl.LEQUAL,ir.ReadOnly,Ve.depthRangeFor3D),zt=new n.ce([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),oa=Ve.renderPass==="shadow",ea=oa&&ot?ot.getCurrentCascadeFrustum():it.getFrustum(it.scaleZoom(it.worldSize)),da=et.paint.get("model-front-cutoff"),Wt=da[2]<1,pa=qs(Ve,et.paint.get("model-cutoff-fade-range")),Ia=et.getLayerRenderingStats();(function(La,Ea,sr,Fr){const mr=La.terrain?La.terrain.exaggeration():0,Or=La.transform.zoom;for(const Cr of Fr){const xr=Ea.getTile(Cr).getBucket(sr);xr&&(xr.setFilter(sr.filter),La.conflationActive&&xr.updateReplacement(Cr,La.replacementSource),xr.evaluateScale(La,sr),La.terrain&&mr>0&&xr.elevationUpdate(La.terrain,mr,Cr,sr.source),xr.needsReEvaluation(La,Or,sr)&&xr.evaluate(sr))}})(Ve,Be,et,Je),function(){let La,Ea,sr;Wt?(La=Je.length-1,Ea=-1,sr=-1):(La=0,Ea=Je.length,sr=1);const Fr=new Float64Array(16),mr=n.ad.vec3.create(),Or=new n.P(0,0);for(let Cr=La;Cr!==Ea;Cr+=sr){const xr=Je[Cr],Ur=Be.getTile(xr).getBucket(et);if(!Ur||!Ur.uploaded)continue;let Ir=!1;ot&&(Ir=ot.getMaxCascadeForTile(xr.toUnwrapped())===0);const hr=it.calculatePosMatrix(xr.toUnwrapped(),it.worldSize),nn=Ur.modelTraits;!oa&&Wt&&(n.ad.mat4.invert(Fr,hr),n.ad.vec3.transformMat4(mr,Tt,Fr),Or.x=mr[0],Or.y=mr[1]);const Tr=[];Ur.setFilter(et.filter);for(const tr of Ur.getNodesInfo()){if(tr.hiddenByReplacement||!tr.node.meshes)continue;const sn=tr.node;let $n=0;Ve.terrain&&sn.elevation&&($n=sn.elevation*Ve.terrain.exaggeration());const cn=(()=>{const oi=tr.aabb;return zt.min=[...oi.min],zt.max=[...oi.max],zt.min[2]+=$n,zt.max[2]+=$n,n.ad.vec3.transformMat4(zt.min,zt.min,hr),n.ad.vec3.transformMat4(zt.max,zt.max,hr),zt})(),Vn=tr.evaluatedScale;if(Vn[0]<=1&&Vn[1]<=1&&Vn[2]<=1&&cn.intersects(ea)===0)continue;if(!oa&&Wt){const oi=.16666666666666666;tr.cameraCollisionOpacity=Tt[0]>cn.min[0]&&Tt[0]<cn.max[0]&&Tt[1]>cn.min[1]&&Tt[1]<cn.max[1]&&Tt[2]*ra<cn.max[2]&&sn.footprint&&n.bA(Or,sn.footprint)?Math.max(tr.cameraCollisionOpacity-oi,0):Math.min(1,tr.cameraCollisionOpacity+oi)}const Wi=[...hr],hs=sn.anchor?sn.anchor[0]:0,ro=sn.anchor?sn.anchor[1]:0;n.ad.mat4.translate(Wi,Wi,[hs*(Vn[0]-1),ro*(Vn[1]-1),$n]),n.ad.vec3.exactEquals(Vn,n.dq)||n.ad.mat4.scale(Wi,Wi,Vn);const Ws=n.ad.mat4.multiply([],Wi,sn.matrix),mo=n.ad.mat4.multiply([],it.expandedFarZProjMatrix,Ws),Cn=n.ad.mat4.multiply([],it.expandedFarZProjMatrix,Wi),ii=n.ad.vec4.transformMat4([],[hs,ro,$n,1],mo)[2];sn.hidden=!1;let On=Ca;oa||(Wt&&(On*=tr.cameraCollisionOpacity,On*=Ah(Wi,it,tr.aabb,da)),On*=rp(pa,ii)),On!==0?Tr.push({nodeInfo:tr,depth:ii,opacity:On,wvpForNode:mo,wvpForTile:Cn,nodeModelMatrix:Ws,tileModelMatrix:Wi}):sn.hidden=!0}oa||Tr.sort((tr,sn)=>!Wt||tr.opacity===1&&sn.opacity===1?tr.depth<sn.depth?-1:1:tr.opacity===1?-1:sn.opacity===1?1:tr.depth>sn.depth?-1:1);for(const tr of Tr){const sn=tr.nodeInfo,$n=sn.node;let cn=n.ad.mat4.multiply([],ua,tr.tileModelMatrix);n.ad.mat4.multiply(cn,Ft,cn);const Vn=n.ad.mat4.invert([],cn);n.ad.mat4.transpose(Vn,Vn),n.ad.mat4.scale(Vn,Vn,kd),cn=n.ad.mat4.multiply(cn,cn,$n.matrix);const Wi=Ve.renderPass==="light-beam",hs=et.paint.get("model-color-use-theme").constantOr("default")==="none",ro=nn&n.ds.HasMapboxMeshFeatures,Ws=ro?0:sn.evaluatedRMEA[0][2];for(let mo=0;mo<$n.meshes.length;++mo){const Cn=$n.meshes[mo],ii=mo===$n.lightMeshIndex;let On=tr.wvpForNode;if(ii){if(!Wi&&!Ve.terrain&&Ve.shadowRenderer){Ve.currentLayer<Ve.firstLightBeamLayer&&(Ve.firstLightBeamLayer=Ve.currentLayer);continue}On=tr.wvpForTile}else if(Wi)continue;const oi={defines:[]},yo=[];if(!oa&&ot&&(ot.useNormalOffset=!!Cn.normalBuffer),Ud(oi.defines,yo,Cn,Ve,hs?null:et.lut),ro||oi.defines.push("DIFFUSE_SHADED"),Ir&&oi.defines.push("SHADOWS_SINGLE_CASCADE"),Ia&&(oa?Ia.numRenderedVerticesInShadowPass+=Cn.vertexArray.length:Ia.numRenderedVerticesInTransparentPass+=Cn.vertexArray.length),oa){Sf(Cn,tr.nodeModelMatrix,Ve,et);continue}let Ti=null;if(st){const Ju=Eu(tr.nodeModelMatrix,Ve.transform);if(Ti=new Float32Array(Ju),it.projection.name!=="globe"){const vl=Cn.aabb.min,qd=Cn.aabb.max,[go,Sh]=st.getOpacityForBounds(Ju,vl[0],vl[1],qd[0],qd[1]);oi.overrideFog=go>=Ma||Sh>=Ma}}const os=Cn.material;let Cc;os.occlusionTexture&&os.occlusionTexture.offsetScale&&(Cc=os.occlusionTexture.offsetScale,oi.defines.push("OCCLUSION_TEXTURE_TRANSFORM"));const qo=Ve.getOrCreateProgram("model",oi);!oa&&ot&&ot.setupShadowsFromMatrix(tr.tileModelMatrix,qo,ot.useNormalOffset),Ve.uploadCommonUniforms(dt,qo,null,Ti);const iu=os.pbrMetallicRoughness;iu.metallicFactor=.9,iu.roughnessFactor=.5;const Ll=ur(new Float32Array(On),new Float32Array(cn),new Float32Array(Vn),new Float32Array($n.matrix),Ve,tr.opacity,iu.baseColorFactor.toRenderColor(null),os.emissiveFactor,iu.metallicFactor,iu.roughnessFactor,os,Ws,et,[0,0,0],Cc);!ii&&(sn.hasTranslucentParts||tr.opacity<1)&&qo.draw(Ve,dt.gl.TRIANGLES,Lt,Rr.disabled,br.disabled,vr.backCCW,Ll,et.id,Cn.vertexBuffer,Cn.indexBuffer,Cn.segments,et.paint,Ve.transform.zoom,void 0,yo),qo.draw(Ve,dt.gl.TRIANGLES,ii?sa:Lt,Rr.disabled,ii||tr.opacity<1||sn.hasTranslucentParts?br.alphaBlended:br.unblended,vr.backCCW,Ll,et.id,Cn.vertexBuffer,Cn.indexBuffer,Cn.segments,et.paint,Ve.transform.zoom,void 0,yo)}}}}()}(g,o,c,A),void j();if($.type!=="model")return;const W=$.getModels(),te=[],ae=g.transform.getFreeCameraOptions().position,de=n.ad.vec3.scale([],[ae.x,ae.y,ae.z],g.transform.worldSize);n.ad.vec3.negate(de,de);const Te=[],ve=[];let Ee=0;for(const Ve of W){const Be=c.paint.get("model-rotation").constantOr(null),et=c.paint.get("model-scale").constantOr(null),Je=c.paint.get("model-translation").constantOr(null);Ve.computeModelMatrix(g,Be,et,Je,!0,!0,!1);const dt=n.ad.mat4.identity([]),it=n.dm(Ve.position.lat,g.transform.zoom),st=n.ad.mat4.fromScaling([],[1,1,1/it]);n.ad.mat4.translate(dt,dt,de),te.push({zScaleMatrix:st,negCameraPosMatrix:dt});for(const ot of Ve.nodes)Yc(g.transform,ot,Ve.matrix,g.transform.expandedFarZProjMatrix,Ee,Te,ve);Ee++}if(Te.sort((Ve,Be)=>Be.depth-Ve.depth),g.renderPass!=="shadow"){if(R===1)for(const Ve of ve)Nu(Ve,g,c,te[Ve.modelIndex],Rr.disabled,g.colorModeForRenderPass());else{for(const Ve of ve)Nu(Ve,g,c,te[Ve.modelIndex],Rr.disabled,br.disabled);for(const Ve of ve)Nu(Ve,g,c,te[Ve.modelIndex],g.stencilModeFor3D(),g.colorModeForRenderPass());g.resetStencilClippingMasks()}for(const Ve of Te)Nu(Ve,g,c,te[Ve.modelIndex],Rr.disabled,g.colorModeForRenderPass());j()}else{for(const Ve of ve)Sf(Ve.mesh,Ve.nodeModelMatrix,g,c);for(const Ve of Te)Sf(Ve.mesh,Ve.nodeModelMatrix,g,c);j()}}},Gd={line:function(g,o,c){if(g.hasElevatedBuckets=!1,g.hasNonElevatedBuckets=!1,g._unevaluatedLayout.getValue("line-elevation-reference")!==void 0||g._unevaluatedLayout.getValue("line-z-offset")!==void 0){if(o){const A=o.getVisibleCoordinates();for(const R of A){const C=o.getTile(R).getBucket(g);if(C&&(C.hasZOffset?g.hasElevatedBuckets=!0:g.hasNonElevatedBuckets=!0,g.hasElevatedBuckets&&g.hasNonElevatedBuckets))break}}}else g.hasNonElevatedBuckets=!0},model:function(g,o,c){const A=o.getSource();if(!A.loaded())return;if(A.type==="vector"||A.type==="geojson")return void(c.modelManager&&c.modelManager.upload(c,A.type==="vector"?g.scope:""));if(A.type==="batched-model"||A.type!=="model")return;const R=A.getModels();for(const C of R)C.upload(c.context)},raster:function(g,o,c){const A=o.getSource();if(!(A instanceof zi&&A.loaded()))return;const R=g.sourceLayer||A.rasterLayerIds&&A.rasterLayerIds[0];if(!R)return;const C=g.paint.get("raster-array-band")||A.getInitialBand(R);if(C==null)return;const E=o.getIds().map(L=>o.getTileByID(L));for(const L of E)L.updateNeeded(R,C)&&A.prepareTile(L,R,C)},"raster-particle":function(g,o,c){const A=o.getSource();if(!(A instanceof zi&&A.loaded()))return;const R=g.sourceLayer||A.rasterLayerIds&&A.rasterLayerIds[0];if(!R)return;const C=g.paint.get("raster-particle-array-band")||A.getInitialBand(R);if(C==null)return;const E=o.getIds().map(L=>o.getTileByID(L));for(const L of E)L.updateNeeded(R,C)&&A.prepareTile(L,R,C)}},Wm={fill:To};class Xp{constructor(o,c,A,R,C){this.context=new _n(o,c),this.transform=A,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.tp=C,this._timeStamp=n.q.now(),this._averageFPS=0,this._fpsHistory=[],this._dt=0,this._debugParams={forceEnablePrecipitation:!1,showTerrainProxyTiles:!1,fpsWindow:30,continousRedraw:!1,enabledLayers:{}};const E=["fill","line","symbol","circle","heatmap","fill-extrusion","raster","raster-particle","hillshade","model","background","sky"];for(const j of E)this._debugParams.enabledLayers[j]=!0;C.registerParameter(this._debugParams,["Terrain"],"showTerrainProxyTiles",{},()=>{this.style.map.triggerRepaint()}),C.registerParameter(this._debugParams,["Precipitation"],"forceEnablePrecipitation"),C.registerParameter(this._debugParams,["FPS"],"fpsWindow",{min:1,max:100,step:1}),C.registerBinding(this._debugParams,["FPS"],"continousRedraw",{readonly:!0,label:"continuous redraw"}),C.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"value"}),C.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"graph",view:"graph",min:0,max:200});for(const j of E)C.registerParameter(this._debugParams.enabledLayers,["Debug","Layers"],j);this.occlusionParams=new np(C),this.setup(),this.numSublayers=Yo.maxUnderzooming+Yo.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new n.dy,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new ho(this),this._wireframeDebugCache=new Jc,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0,this.layersWithOcclusionOpacity=[];const L=new n.r({width:1,height:1},Uint8Array.of(0,0,0,0));this.emptyDepthTexture=new n.T(this.context,L,o.RGBA8),this._clippingActiveLastFrame=!1,this.scaleFactor=R}updateTerrain(o,c){const A=!!o&&!!o.terrain&&this.transform.projection.supportsTerrain;if(!(A||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Fd(this,o));const R=this._terrain;this.transform.elevation=A?R:null,R.update(o,this.transform,c),this.transform.elevation&&!R.enabled&&(this.transform.elevation=null)}_updateFog(o){const c=o.fog;if(!c||this.transform.projection.name==="globe"||c.getOpacity(this.transform.pitch)<1||c.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[A,R]=c.getFovAdjustedRange(this.transform._fov);if(A>R)return void(this.transform.fogCullDistSq=null);const C=A+.78*(R-A);this.transform.fogCullDistSq=C*C}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled||this._forceTerrainMode?this._terrain:null}get forceTerrainMode(){return this._forceTerrainMode}set forceTerrainMode(o){o&&!this._terrain&&(this._terrain=new Fd(this,this.style)),this._forceTerrainMode=o}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(o,c){if(this.width=o*n.q.devicePixelRatio,this.height=c*n.q.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const A of this.style.order)this.style._mergedLayers[A].resize()}setup(){const o=this.context,c=new n.b5;c.emplaceBack(0,0),c.emplaceBack(n.ai,0),c.emplaceBack(0,n.ai),c.emplaceBack(n.ai,n.ai),this.tileExtentBuffer=o.createVertexBuffer(c,n.b7.members),this.tileExtentSegments=n.b8.simpleSegment(0,0,4,2);const A=new n.b5;A.emplaceBack(0,0),A.emplaceBack(n.ai,0),A.emplaceBack(0,n.ai),A.emplaceBack(n.ai,n.ai),this.debugBuffer=o.createVertexBuffer(A,n.b7.members),this.debugSegments=n.b8.simpleSegment(0,0,4,5);const R=new n.b5;R.emplaceBack(-1,-1),R.emplaceBack(1,-1),R.emplaceBack(-1,1),R.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(R,n.b7.members),this.viewportSegments=n.b8.simpleSegment(0,0,4,2);const C=new n.aU;C.emplaceBack(0,0,0,0),C.emplaceBack(n.ai,0,n.ai,0),C.emplaceBack(0,n.ai,0,n.ai),C.emplaceBack(n.ai,n.ai,n.ai,n.ai),this.mercatorBoundsBuffer=o.createVertexBuffer(C,n.ba.members),this.mercatorBoundsSegments=n.b8.simpleSegment(0,0,4,2);const E=new n.aV;E.emplaceBack(0,1,2),E.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(E);const L=new n.b6;for(const $ of[0,1,3,2,0])L.emplaceBack($);this.debugIndexBuffer=o.createIndexBuffer(L),this.emptyTexture=new n.T(o,new n.r({width:1,height:1},Uint8Array.of(0,0,0,0)),o.gl.RGBA8),this.identityMat=n.ad.mat4.create();const j=this.context.gl;this.stencilClearMode=new Rr({func:j.ALWAYS,mask:0},0,255,j.ZERO,j.ZERO,j.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(o){return o._makeTileBoundsBuffers(this.context,this.transform.projection),o._tileBoundsBuffer?{tileBoundsBuffer:o._tileBoundsBuffer,tileBoundsIndexBuffer:o._tileBoundsIndexBuffer,tileBoundsSegments:o._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const o=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,o.TRIANGLES,ir.disabled,this.stencilClearMode,br.disabled,vr.disabled,Zc(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(o,c,A){if(!c||this.currentStencilSource===c.id||!o.isTileClipped()||!A||A.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let L=!1;for(const j of A)if(this._tileClippingMaskIDs[j.key]===void 0){L=!0;break}if(!L)return}this.currentStencilSource=c.id;const R=this.context,C=R.gl;this.nextStencilID+A.length>256&&this.clearStencil(),R.setColorMode(br.disabled),R.setDepthMode(ir.disabled);const E=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(const L of A){const j=c.getTile(L),$=this._tileClippingMaskIDs[L.key]=this.nextStencilID++,{tileBoundsBuffer:W,tileBoundsIndexBuffer:te,tileBoundsSegments:ae}=this.getTileBoundsBuffers(j);E.draw(this,C.TRIANGLES,ir.disabled,new Rr({func:C.ALWAYS,mask:0},$,255,C.KEEP,C.KEEP,C.REPLACE),br.disabled,vr.disabled,Zc(L.projMatrix),"$clipping",W,te,ae)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const o=this.nextStencilID++,c=this.context.gl;return new Rr({func:c.NOTEQUAL,mask:255},o,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(o){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(o);const c=this.context.gl;return new Rr({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(o){const c=this.context.gl,A=o.sort((E,L)=>L.overscaledZ-E.overscaledZ),R=A[A.length-1].overscaledZ,C=A[0].overscaledZ-R+1;if(C>1){this.currentStencilSource=void 0,this.nextStencilID+C>256&&this.clearStencil();const E={};for(let L=0;L<C;L++)E[L+R]=new Rr({func:c.GEQUAL,mask:255},L+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=C,[E,A]}return[{[R]:Rr.disabled},A]}colorModeForRenderPass(){const o=this.context.gl;return this._showOverdrawInspector?new br([o.CONSTANT_COLOR,o.ONE,o.CONSTANT_COLOR,o.ONE],new n.al(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?br.unblended:br.alphaBlended}colorModeForDrapableLayerRenderPass(o){const c=this.context.gl;return this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture&&this.renderPass==="translucent"?new br([c.ONE,c.ONE_MINUS_SRC_ALPHA,c.CONSTANT_ALPHA,c.ONE_MINUS_SRC_ALPHA],new n.al(0,0,0,o===void 0?0:o),[!0,!0,!0,!0]):this.colorModeForRenderPass()}depthModeForSublayer(o,c,A,R=!1){if(this.depthOcclusion)return new ir(this.context.gl.GREATER,ir.ReadOnly,this.depthRangeFor3D);if(!this.opaquePassEnabledForLayer()&&!R)return ir.disabled;const C=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new ir(A||this.context.gl.LEQUAL,c,[C,C])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}blitDepth(){const o=this.context.gl,c=Math.ceil(this.width),A=Math.ceil(this.height),R=this.context.bindFramebuffer.get(),C=o.getParameter(o.TEXTURE_BINDING_2D);this.depthFBO&&this.depthFBO.width===c&&this.depthFBO.height===A||(this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),c!==0&&A!==0&&(this.depthFBO=new kn(this.context,c,A,!1,"texture"),this.depthTexture=new n.T(this.context,{width:c,height:A,data:null},o.DEPTH24_STENCIL8),this.depthFBO.depthAttachment.set(this.depthTexture.texture))),this.context.bindFramebuffer.set(R),o.bindTexture(o.TEXTURE_2D,C),this.depthFBO&&(o.bindFramebuffer(o.READ_FRAMEBUFFER,null),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,this.depthFBO.framebuffer),o.blitFramebuffer(0,0,c,A,0,0,c,A,o.DEPTH_BUFFER_BIT,o.NEAREST),o.bindFramebuffer(o.FRAMEBUFFER,this.context.bindFramebuffer.current))}updateAverageFPS(){this._fpsHistory.push(this._dt===0?0:1e3/this._dt),this._fpsHistory.length>this._debugParams.fpsWindow&&this._fpsHistory.splice(0,this._fpsHistory.length-this._debugParams.fpsWindow),this._averageFPS=Math.round(this._fpsHistory.reduce((o,c)=>o+c/this._fpsHistory.length,0))}render(o,c){const A=n.q.now();this._dt=A-this._timeStamp,this._timeStamp=A,this._wireframeDebugCache.update(this.frameCounter),this._debugParams.continousRedraw=o.map.repaint,this.style=o,this.options=c;const R=this.style._mergedLayers,C=!(!this.terrain||!this.terrain.enabled),E=()=>this.style._getOrder(C).filter(Lt=>{const sa=R[Lt];return!(sa.type in this._debugParams.enabledLayers)||this._debugParams.enabledLayers[sa.type]});let L=E(),j=!1,$=!1;for(const Lt of L){const sa=R[Lt];sa.type==="circle"&&(j=!0),sa.type==="symbol"&&(sa.hasInitialOcclusionOpacityProperties?$=!0:j=!0)}let W=L.map(Lt=>R[Lt]);const te=this.style._mergedSourceCaches;this.imageManager=o.imageManager,this.modelManager=o.modelManager,this.symbolFadeChange=o.placement.symbolFadeChange(n.q.now()),this.imageManager.beginFrame();let ae=0,de=!1;for(const Lt in te){const sa=te[Lt];sa.used&&(sa.prepare(this.context),sa.getSource().usedInConflation&&++ae)}let Te=!1;for(const Lt of W)Lt.isHidden(this.transform.zoom)||(Lt.type==="clip"&&(Te=!0),this.prepareLayer(Lt));const ve={},Ee={},Ve={},Be={},et={};for(const Lt in te){const sa=te[Lt];ve[Lt]=sa.getVisibleCoordinates(),Ee[Lt]=ve[Lt].slice().reverse(),Ve[Lt]=sa.getVisibleCoordinates(!0).reverse(),Be[Lt]=sa.getShadowCasterCoordinates(),et[Lt]=sa.sortCoordinatesByDistance(ve[Lt])}const Je=Lt=>{const sa=this.style.getLayerSourceCache(Lt);return sa&&sa.used?sa.getSource():null};if(ae||Te||this._clippingActiveLastFrame){const Lt=[],sa=[];let zt=0;for(const oa of W)this.isSourceForClippingOrConflation(oa,Je(oa))&&(Lt.push(oa),sa.push(zt)),zt++;if(Lt&&(Te||Lt.length>1)||this._clippingActiveLastFrame){Te=!1;const oa=[];for(let ea=0;ea<Lt.length;ea++){const da=Lt[ea],Wt=sa[ea],pa=this.style.getLayerSourceCache(da);if(!pa||!pa.used||!pa.getSource().usedInConflation&&da.type!=="clip")continue;let Ia=n.dA,La=n.by.None;const Ea=[];let sr=!0;if(da.type==="clip"){Ia=Wt;for(const Fr of da.layout.get("clip-layer-types"))La|=Fr==="model"?n.by.Model:Fr==="symbol"?n.by.Symbol:n.by.FillExtrusion;for(const Fr of da.layout.get("clip-layer-scope"))Ea.push(Fr);da.isHidden(this.transform.zoom)?sr=!1:Te=!0}sr&&oa.push({layer:da.fqid,cache:pa,order:Ia,clipMask:La,clipScope:Ea})}this.replacementSource.setSources(oa),de=!0}}this._clippingActiveLastFrame=Te,de||this.replacementSource.clear(),this.conflationActive=de,this.minCutoffZoom=0,this.longestCutoffRange=0,this.opaquePassCutoff=1/0,this._lastOcclusionLayer=-1,this.layersWithOcclusionOpacity=[];for(let Lt=0;Lt<W.length;Lt++){const sa=W[Lt],zt=sa.cutoffRange();if(this.longestCutoffRange=Math.max(zt,this.longestCutoffRange),zt>0){const oa=Je(sa);oa&&(this.minCutoffZoom=Math.max(oa.minzoom,this.minCutoffZoom)),sa.minzoom&&(this.minCutoffZoom=Math.max(sa.minzoom,this.minCutoffZoom))}sa.is3D(C)&&(this.opaquePassCutoff===1/0&&(this.opaquePassCutoff=Lt),this._lastOcclusionLayer=Lt)}const dt=this.style&&this.style.fog;dt?(this._fogVisible=dt.getOpacity(this.transform.pitch)!==0,this._fogVisible&&this.transform.projection.name!=="globe"&&(this._fogVisible=dt.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding(Ve),this.opaquePassCutoff=0,L=E(),W=L.map(Lt=>R[Lt]));const it=this._shadowRenderer;if(it){it.updateShadowParameters(this.transform,this.style.directionalLight);for(const Lt in te)for(const sa of ve[Lt]){let zt={min:0,max:0};this.terrain&&(zt=this.terrain.getMinMaxForTile(sa)||zt),it.addShadowReceiver(sa.toUnwrapped(),zt.min,zt.max)}}this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new n.dz(this.context)),this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new tp(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0);const st=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.snow),ot=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.rain);if(st&&!this._snow&&(this._snow=new Hh(this)),!st&&this._snow&&(this._snow.destroy(),delete this._snow),ot&&!this._rain&&(this._rain=new _h(this)),!ot&&this._rain&&(this._rain.destroy(),delete this._rain),this._snow&&this._snow.update(this),this._rain&&this._rain.update(this),!qt.has(this.context.gl))return;this.renderPass="offscreen";for(const Lt of W){const sa=o.getLayerSourceCache(Lt);if(!Lt.hasOffscreenPass()||Lt.isHidden(this.transform.zoom))continue;const zt=sa?Ee[sa.id]:void 0;(Lt.type==="custom"||Lt.type==="raster"||Lt.type==="raster-particle"||Lt.isSky()||zt&&zt.length)&&this.renderLayer(this,sa,Lt,zt)}this.depthRangeFor3D=[0,1-(W.length+2)*this.numSublayers*this.depthEpsilon],this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,Be)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);const gt=this.transform.projection.name==="globe"||this.transform.isHorizonVisible(),Tt=(()=>{if(c.showOverdrawInspector)return n.al.black;const Lt=this.style.fog;if(Lt&&this.transform.projection.supportsFog){const sa=this.style.getLut(Lt.scope);if(!gt){const zt=Lt.properties.get("color-use-theme")==="none",oa=Lt.properties.get("color").toRenderColor(zt?null:sa).toArray01();return new n.al(...oa)}if(gt){const zt=Lt.properties.get("space-color-use-theme")==="none",oa=Lt.properties.get("space-color").toRenderColor(zt?null:sa).toArray01();return new n.al(...oa)}}return n.al.transparent})();if(this.context.clear({color:Tt,depth:1}),this.clearStencil(),this._showOverdrawInspector=c.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&gt&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=L.length-1;this.currentLayer>=0;this.currentLayer--){const Lt=W[this.currentLayer],sa=o.getLayerSourceCache(Lt);if(Lt.isSky())continue;const zt=sa?(Lt.is3D(C)?et:Ee)[sa.id]:void 0;this._renderTileClippingMasks(Lt,sa,zt),this.renderLayer(this,sa,Lt,zt)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&gt&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||n.ag(this.transform.zoom)>0)&&(this.transform.projection.name==="globe"||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<L.length;this.currentLayer++){const Lt=W[this.currentLayer],sa=o.getLayerSourceCache(Lt);Lt.isSky()&&this.renderLayer(this,sa,Lt,sa?Ee[sa.id]:void 0)}function Xt(Lt,sa){let zt;return sa&&(zt=(Lt.type==="symbol"?Ve:Lt.is3D(C)?et:Ee)[sa.id]),zt}if(this.renderPass="translucent",this.transform.projection.name==="globe"){for(this.renderElevatedRasterBackface=!0,this.currentLayer=0;this.currentLayer<L.length;){const Lt=W[this.currentLayer];if(Lt.type==="raster"||Lt.type==="raster-particle"){const sa=o.getLayerSourceCache(Lt);this.renderLayer(this,sa,Lt,Xt(Lt,sa))}++this.currentLayer}this.renderElevatedRasterBackface=!1}this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;let Ft=0;it&&(Ft=it.getShadowCastingLayerCount());let ra=!1,ua=-1;for(let Lt=0;Lt<L.length;++Lt){const sa=W[Lt];sa.isHidden(this.transform.zoom)||sa.is3D(C)&&(ua=Lt)}$&&ua===-1&&(j=!0);let Ca=!1;for(;this.currentLayer<L.length;){const Lt=W[this.currentLayer],sa=o.getLayerSourceCache(Lt);if(Lt.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(Lt)){if(Lt.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer),this._lastOcclusionLayer=Math.max(this.currentLayer,this._lastOcclusionLayer)}else{if(!Ca&&Lt.is3D(C)&&!C){const zt=this.currentLayer,oa=ea=>{for(this.currentLayer=0;this.currentLayer<W.length;this.currentLayer++){const da=W[this.currentLayer];if(Wm[da.type]){const Wt=this.style.getLayerSourceCache(da);Wm[da.type](this,Wt,da,Xt(da,Wt),ea)}}};oa("initialize"),oa("reset"),this.currentLayer=zt,Ca=!0}if(j&&!ra&&this.terrain&&!this.transform.isOrthographic&&(ra=!0,this.blitDepth()),$&&ua!==-1&&this.currentLayer===ua+1&&!this.transform.isOrthographic&&this.blitDepth(),this.terrain||this._renderTileClippingMasks(Lt,sa,sa?ve[sa.id]:void 0),this.renderLayer(this,sa,Lt,Xt(Lt,sa)),!this.terrain&&it&&Ft>0&&Lt.hasShadowPass()&&--Ft==0&&(it.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer)){const zt=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=zt;this.currentLayer++){const oa=W[this.currentLayer];if(!oa.hasLightBeamPass())continue;const ea=o.getLayerSourceCache(oa);this.renderLayer(this,ea,oa,ea?Ee[ea.id]:void 0)}this.currentLayer=zt,this.renderPass="translucent"}if(this.currentLayer>=this._lastOcclusionLayer&&this.layersWithOcclusionOpacity.length>0){const zt=this.currentLayer;this.depthOcclusion=!0;for(const oa of this.layersWithOcclusionOpacity){this.currentLayer=oa;const ea=W[this.currentLayer],da=o.getLayerSourceCache(ea),Wt=da?Ee[da.id]:void 0;this.terrain||this._renderTileClippingMasks(ea,da,da?ve[da.id]:void 0),this.renderLayer(this,da,ea,Wt)}this.depthOcclusion=!1,this.currentLayer=zt,this.renderPass="translucent",this.layersWithOcclusionOpacity=[]}++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this._snow&&this._snow.draw(this),this._rain&&this._rain.draw(this),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let Lt=null;W.forEach(sa=>{const zt=o.getLayerSourceCache(sa);zt&&!sa.isHidden(this.transform.zoom)&&zt.getVisibleCoordinates().length&&(!Lt||Lt.getSource().maxzoom<zt.getSource().maxzoom)&&(Lt=zt)}),Lt&&this.options.showTileBoundaries&&vh.debug(this,Lt,Lt.getVisibleCoordinates(),n.al.red,!1,this.options.showParseStatus)}this.terrain&&this._debugParams.showTerrainProxyTiles&&vh.debug(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new n.al(1,.8,.1,1),!0,this.options.showParseStatus),this.options.showPadding&&function(Lt){const sa=Lt.transform.padding;Zh(Lt,Lt.transform.height-(sa.top||0),3,$u),Zh(Lt,sa.bottom||0,3,Hm),$c(Lt,sa.left||0,3,Qf),$c(Lt,Lt.transform.width-(sa.right||0),3,$m);const zt=Lt.transform.centerPoint;(function(oa,ea,da,Wt){Kc(oa,ea-1,da-10,2,20,Wt),Kc(oa,ea-10,da-1,20,2,Wt)})(Lt,zt.x,Lt.transform.height-zt.y,yh)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),de||(this.conflationActive=!1)}prepareLayer(o){this.gpuTimingStart(o);const{unsupportedLayers:c}=this.transform.projection,A=!c||!c.includes(o.type);if(Gd[o.type]&&(A||this.terrain&&o.type==="custom")){const R=this.style.getLayerSourceCache(o);Gd[o.type](o,R,this)}this.gpuTimingEnd()}renderLayer(o,c,A,R){A.isHidden(this.transform.zoom)||(A.type==="background"||A.type==="sky"||A.type==="custom"||A.type==="model"||A.type==="raster"||A.type==="raster-particle"||R&&R.length)&&(this.id=A.id,this.gpuTimingStart(A),o.transform.projection.unsupportedLayers&&o.transform.projection.unsupportedLayers.includes(A.type)&&(!o.terrain||A.type!=="custom")||A.type==="clip"||vh[A.type](o,c,A,R,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(o){if(!this.options.gpuTiming)return;const c=this.context.extTimerQuery,A=this.context.gl;let R=this.gpuTimers[o.id];R||(R=this.gpuTimers[o.id]={calls:0,cpuTime:0,query:A.createQuery()}),R.calls++,A.beginQuery(c.TIME_ELAPSED_EXT,R.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const o=this.context.extTimerQuery,c=this.context.gl,A=c.createQuery();this.deferredRenderGpuTimeQueries.push(A),c.beginQuery(o.TIME_ELAPSED_EXT,A)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){const o=this.gpuTimers;return this.gpuTimers={},o}collectDeferredRenderGpuQueries(){const o=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],o}queryGpuTimers(o){const c={};for(const A in o){const R=o[A],C=this.context.extTimerQuery,E=C.getQueryParameter(R.query,this.context.gl.QUERY_RESULT)/1e6;C.deleteQueryEXT(R.query),c[A]=E}return c}queryGpuTimeDeferredRender(o){if(!this.options.gpuTimingDeferredRender)return 0;const c=this.context.gl;let A=0;for(const R of o)A+=c.getQueryParameter(R,c.QUERY_RESULT)/1e6,c.deleteQuery(R);return A}translatePosMatrix(o,c,A,R,C){if(!A[0]&&!A[1])return o;const E=C?R==="map"?this.transform.angle:0:R==="viewport"?-this.transform.angle:0;if(E){const $=Math.sin(E),W=Math.cos(E);A=[A[0]*W-A[1]*$,A[0]*$+A[1]*W]}const L=[C?A[0]:n.at(c,A[0],this.transform.zoom),C?A[1]:n.at(c,A[1],this.transform.zoom),0],j=new Float32Array(16);return n.ad.mat4.translate(j,o,L),j}saveTileTexture(o){const c=o.size[0],A=this._tileTextures[c];A?A.push(o):this._tileTextures[c]=[o]}getTileTexture(o){const c=this._tileTextures[o];return c&&c.length>0?c.pop():null}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture||this.forceTerrainMode}linearFloatFilteringSupported(){return this.context.extTextureFloatLinear!=null}currentGlobalDefines(o,c,A){const R=A===void 0?this.terrain&&this.terrain.renderingToTexture:A,C=[];return this.style&&this.style.enable3dLights()&&(o==="globeRaster"||o==="terrainRaster"?(C.push("LIGHTING_3D_MODE"),C.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):R||C.push("LIGHTING_3D_MODE")),this.renderPass==="shadow"&&(this._shadowMapDebug||C.push("DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(C.push("TERRAIN"),this.linearFloatFilteringSupported()&&C.push("TERRAIN_DEM_FLOAT_FORMAT")),this.transform.projection.name==="globe"&&C.push("GLOBE"),!this._fogVisible||R||c!==void 0&&!c||C.push("FOG","FOG_DITHERING"),R&&C.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&C.push("OVERDRAW_INSPECTOR"),C}getOrCreateProgram(o,c){this.cache=this.cache||{};const A=c&&c.defines||[],R=c&&c.config,C=this.currentGlobalDefines(o,c&&c.overrideFog,c&&c.overrideRtt).concat(A),E=qm.cacheKey(Qo[o],o,C,R);return this.cache[E]||(this.cache[E]=new qm(this.context,o,Qo[o],R,xi[o],C)),this.cache[E]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new n.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA8))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy(),this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),this.emptyDepthTexture&&this.emptyDepthTexture.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(o,c){if(this.style.enable3dLights()){const A=this.style.directionalLight,R=this.style.ambientLight;if(A&&R){const C=((E,L,j)=>{const $=E.properties.get("direction"),W=E.properties.get("color-use-theme")==="none",te=E.properties.get("color").toRenderColor(W?null:j.getLut(E.scope)).toArray01(),ae=E.properties.get("intensity"),de=L.properties.get("color-use-theme")==="none",Te=L.properties.get("color").toRenderColor(de?null:j.getLut(L.scope)).toArray01(),ve=L.properties.get("intensity"),Ee=[$.x,$.y,$.z],Ve=n.cN(Te,ve),Be=n.cN(te,ae);return{u_lighting_ambient_color:Ve,u_lighting_directional_dir:Ee,u_lighting_directional_color:Be,u_ground_radiance:Hc(Ee,Be,Ve)}})(A,R,this.style);c.setLightsUniformValues(o,C)}}}uploadCommonUniforms(o,c,A,R,C){if(this.uploadCommonLightUniforms(o,c),this.terrain&&this.terrain.renderingToTexture)return;const E=this.style.fog;if(E){const L=E.getOpacity(this.transform.pitch),j=(($,W,te,ae,de,Te,ve,Ee,Ve,Be,et,Je)=>{const dt=$.transform,it=W.properties.get("color-use-theme")==="none",st=W.properties.get("color").toRenderColor(it?null:$.style.getLut(W.scope)).toArray01();st[3]=ae;const ot=$.frameCounter/1e3%1,[gt,Tt]=W.properties.get("vertical-range");return{u_fog_matrix:te?dt.calculateFogTileMatrix(te):Je||$.identityMat,u_fog_range:W.getFovAdjustedRange(dt._fov),u_fog_color:st,u_fog_horizon_blend:W.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(gt,Tt),Tt],u_fog_temporal_offset:ot,u_frustum_tl:de,u_frustum_tr:Te,u_frustum_br:ve,u_frustum_bl:Ee,u_globe_pos:Ve,u_globe_radius:Be,u_viewport:et,u_globe_transition:n.ag(dt.zoom),u_is_globe:+(dt.projection.name==="globe")}})(this,E,A,L,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*n.q.devicePixelRatio,this.transform.height*n.q.devicePixelRatio],R);c.setFogUniformValues(o,j)}C&&c.setCutoffUniformValues(o,C.uniformValues)}setTileLoadedFlag(o){this.tileLoaded=o}saveCanvasCopy(){const o=this.canvasCopy();o&&(this.frameCopies.push(o),this.tileLoaded=!1)}canvasCopy(){const o=this.context.gl,c=o.createTexture();return o.bindTexture(o.TEXTURE_2D,c),o.copyTexImage2D(o.TEXTURE_2D,0,o.RGBA,0,0,o.drawingBufferWidth,o.drawingBufferHeight,0),c}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const o=this.style&&this.style.fog;return!!o&&o.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const o=this._backgroundTiles,c=this._backgroundTiles={},A=this.transform.coveringTiles({tileSize:512});for(const R of A)c[R.key]=o[R.key]||new $l(R,512,this.transform.tileZoom,this);return c}clearBackgroundTiles(){this._backgroundTiles={}}isSourceForClippingOrConflation(o,c){return!(!o.is3D(!(!this.terrain||!this.terrain.enabled))||o.type!=="clip"&&(o.minzoom&&o.minzoom>this.transform.zoom||(this.style._clipLayerPresent||o.sourceLayer!=="building")&&(!c||c.type!=="batched-model")))}isTileAffectedByFog(o){if(!this.style||!this.style.fog)return!1;if(this.transform.projection.name==="globe")return!0;let c=this._cachedTileFogOpacities[o.key];return c||(this._cachedTileFogOpacities[o.key]=c=this.style.fog.getOpacityForTile(o)),c[0]>=Ma||c[1]>=Ma}setupDepthForOcclusion(o,c,A){const R=this.context,C=R.gl,E=!!A;var L;A||(A={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0}),R.activeTexture.set(C.TEXTURE3),o&&this.depthFBO&&this.depthTexture?(this.depthTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE),A.u_depth_size_inv=[1/this.depthFBO.width,1/this.depthFBO.height],A.u_depth_range_unpack=[2/((L=this.depthRangeFor3D)[1]-L[0]),-1-2*L[0]/(L[1]-L[0])],A.u_occluder_half_size=.5*this.occlusionParams.occluderSize,A.u_occlusion_depth_offset=this.occlusionParams.depthOffset):this.emptyDepthTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE),R.activeTexture.set(C.TEXTURE0),E||c.setTerrainUniformValues(R,A)}}function Ym(g,o){let c=!1,A=null;const R=()=>{A=null,c&&(g(),A=setTimeout(R,o),c=!1)};return()=>(c=!0,A||R(),A)}class ky{constructor(o){this._hashName=o&&encodeURIComponent(o),n.aQ(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Ym(this._updateHashUnthrottled.bind(this),300)}addTo(o){return this._map=o,window.addEventListener("hashchange",this._onHashChange,!1),o.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const o=this._map;if(!o)return"";const c=aA(o);if(this._hashName){const A=this._hashName;let R=!1;const C=location.hash.slice(1).split("&").map(E=>{const L=E.split("=")[0];return L===A?(R=!0,`${L}=${c}`):E}).filter(E=>E);return R||C.push(`${A}=${c}`),`#${C.join("&")}`}return`#${c}`}_getCurrentHash(){const o=location.hash.replace("#","");if(this._hashName){let c;return o.split("&").map(A=>A.split("=")).forEach(A=>{A[0]===this._hashName&&(c=A)}),(c&&c[1]||"").split("/")}return o.split("/")}_onHashChange(){const o=this._map;if(!o)return!1;const c=this._getCurrentHash();if(c.length>=3&&!c.some(A=>isNaN(A))){const A=o.dragRotate.isEnabled()&&o.touchZoomRotate.isEnabled()?+(c[3]||0):o.getBearing();return o.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:A,pitch:+(c[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function aA(g,o){const c=g.getCenter(),A=Math.round(100*g.getZoom())/100,R=Math.ceil((A*Math.LN2+Math.log(512/360/.5))/Math.LN10),C=Math.pow(10,R),E=Math.round(c.lng*C)/C,L=Math.round(c.lat*C)/C,j=g.getBearing(),$=g.getPitch();let W=o?`/${E}/${L}/${A}`:`${A}/${L}/${E}`;return(j||$)&&(W+="/"+Math.round(10*j)/10),$&&(W+=`/${Math.round($)}`),W}const Jp={linearity:.3,easing:n.dB(0,0,.3,1)},sl=n.l({deceleration:2500,maxSpeed:1400},Jp),yl=n.l({deceleration:20,maxSpeed:1400},Jp),rA=n.l({deceleration:1e3,maxSpeed:360},Jp),nA=n.l({deceleration:1e3,maxSpeed:90},Jp);class iA{constructor(o){this._map=o,this.clear()}clear(){this._inertiaBuffer=[]}record(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:n.q.now(),settings:o})}_drainInertiaBuffer(){const o=this._inertiaBuffer,c=n.q.now();for(;o.length>0&&c-o[0].time>160;)o.shift()}_onMoveEnd(o){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const c={zoom:0,bearing:0,pitch:0,pan:new n.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:C}of this._inertiaBuffer)c.zoom+=C.zoomDelta||0,c.bearing+=C.bearingDelta||0,c.pitch+=C.pitchDelta||0,C.panDelta&&c.pan._add(C.panDelta),C.around&&(c.around=C.around),C.pinchAround&&(c.pinchAround=C.pinchAround);const A=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,R={};if(c.pan.mag()){const C=em(c.pan.mag(),A,n.l({},sl,o||{}));R.offset=c.pan.mult(C.amount/c.pan.mag()),R.center=this._map.transform.center,Qp(R,C)}if(c.zoom){const C=em(c.zoom,A,yl);R.zoom=this._map.transform.zoom+C.amount,Qp(R,C)}if(c.bearing){const C=em(c.bearing,A,rA);R.bearing=this._map.transform.bearing+n.ay(C.amount,-179,179),Qp(R,C)}if(c.pitch){const C=em(c.pitch,A,nA);R.pitch=this._map.transform.pitch+C.amount,Qp(R,C)}if(R.zoom||R.bearing){const C=c.pinchAround===void 0?c.around:c.pinchAround;R.around=C?this._map.unproject(C):this._map.getCenter()}return this.clear(),R.noMoveStart=!0,R}}function Qp(g,o){(!g.duration||g.duration<o.duration)&&(g.duration=o.duration,g.easing=o.easing)}function em(g,o,c){const{maxSpeed:A,linearity:R,deceleration:C}=c,E=n.ay(g*R/(o/1e3),-A,A),L=Math.abs(E)/(C*R);return{easing:c.easing,duration:1e3*L,amount:E*(L/2)}}class gl extends n.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,c,A,R={}){const C=Re(c.getCanvasContainer(),A),E=c.unproject(C);super(o,n.l({point:C,lngLat:E,originalEvent:A},R)),this._defaultPrevented=!1,this.target=c}}class sp extends n.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,c,A){const R=o==="touchend"?A.changedTouches:A.touches,C=be(c.getCanvasContainer(),R),E=C.map(j=>c.unproject(j)),L=C.reduce((j,$,W,te)=>j.add($.div(te.length)),new n.P(0,0));super(o,{points:C,point:L,lngLats:E,lngLat:c.unproject(L),originalEvent:A}),this._defaultPrevented=!1}}class sA extends n.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,c){super("wheel",{originalEvent:c}),this._defaultPrevented=!1}}class oA{constructor(o,c){this._map=o,this._clickTolerance=c.clickTolerance}reset(){this._mousedownPos=void 0}wheel(o){return this._firePreventable(new sA(this._map,o))}mousedown(o,c){return this._mousedownPos=c,this._firePreventable(new gl(o.type,this._map,o))}mouseup(o){this._map.fire(new gl(o.type,this._map,o))}preclick(o){const c=n.l({},o);c.type="preclick",this._map.fire(new gl(c.type,this._map,c))}click(o,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||(this.preclick(o),this._map.fire(new gl(o.type,this._map,o)))}dblclick(o){return this._firePreventable(new gl(o.type,this._map,o))}mouseover(o){this._map.fire(new gl(o.type,this._map,o))}mouseout(o){this._map.fire(new gl(o.type,this._map,o))}touchstart(o){return this._firePreventable(new sp(o.type,this._map,o))}touchmove(o){this._map.fire(new sp(o.type,this._map,o))}touchend(o){this._map.fire(new sp(o.type,this._map,o))}touchcancel(o){this._map.fire(new sp(o.type,this._map,o))}_firePreventable(o){if(this._map.fire(o),o.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class U0{constructor(o){this._map=o}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(o){this._map.fire(new gl(o.type,this._map,o))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new gl("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(o){this._delayContextMenu?this._contextMenuEvent=o:this._map.fire(new gl(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class lA{constructor(o,c){this._map=o,this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(o,c){this.isEnabled()&&o.shiftKey&&o.button===0&&(ye(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(o,c){if(!this._active)return;const A=c,R=this._startPos,C=this._lastPos;if(!R||!C||C.equals(A)||!this._box&&A.dist(R)<this._clickTolerance)return;this._lastPos=A,this._box||(this._box=H("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",o));const E=Math.min(R.x,A.x),L=Math.max(R.x,A.x),j=Math.min(R.y,A.y),$=Math.max(R.y,A.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${E}px,${j}px)`,this._box.style.width=L-E+"px",this._box.style.height=$-j+"px")})}mouseupWindow(o,c){if(!this._active)return;const A=this._startPos,R=c;if(A&&o.button===0){if(this.reset(),me(),A.x!==R.x||A.y!==R.y)return this._map.fire(new n.A("boxzoomend",{originalEvent:o})),{cameraAnimation:C=>C.fitScreenCoordinates(A,R,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",o)}}keydown(o){this._active&&o.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",o))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),he(),delete this._startPos,delete this._lastPos}_fireEvent(o,c){return this._map.fire(new n.A(o,{originalEvent:c}))}}function Di(g,o){const c={};for(let A=0;A<g.length;A++)c[g[A].identifier]=o[A];return c}class By{constructor(o){this.reset(),this.numTouches=o.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(o,c,A){(this.centroid||A.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=o.timeStamp),A.length===this.numTouches&&(this.centroid=function(R){const C=new n.P(0,0);for(const E of R)C._add(E);return C.div(R.length)}(c),this.touches=Di(A,c)))}touchmove(o,c,A){if(this.aborted||!this.centroid)return;const R=Di(A,c);for(const C in this.touches){const E=R[C];(!E||E.dist(this.touches[C])>30)&&(this.aborted=!0)}}touchend(o,c,A){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),A.length===0){const R=!this.aborted&&this.centroid;if(this.reset(),R)return R}}}class Gy{constructor(o){this.singleTap=new By(o),this.numTaps=o.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(o,c,A){this.singleTap.touchstart(o,c,A)}touchmove(o,c,A){this.singleTap.touchmove(o,c,A)}touchend(o,c,A){const R=this.singleTap.touchend(o,c,A);if(R){const C=o.timeStamp-this.lastTime<500,E=!this.lastTap||this.lastTap.dist(R)<30;if(C&&E||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=R,this.count===this.numTaps)return this.reset(),R}}}class uA{constructor(){this._zoomIn=new Gy({numTouches:1,numTaps:2}),this._zoomOut=new Gy({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(o,c,A){this._zoomIn.touchstart(o,c,A),this._zoomOut.touchstart(o,c,A)}touchmove(o,c,A){this._zoomIn.touchmove(o,c,A),this._zoomOut.touchmove(o,c,A)}touchend(o,c,A){const R=this._zoomIn.touchend(o,c,A),C=this._zoomOut.touchend(o,c,A);return R?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:E.getZoom()+1,around:E.unproject(R)},{originalEvent:o})}):C?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:E.getZoom()-1,around:E.unproject(C)},{originalEvent:o})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const op={0:1,2:2},Xm={Control:"ctrlKey",Alt:"altKey",Shift:"shiftKey",Meta:"metaKey"};class tm{constructor(o){this.reset(),this._clickTolerance=o.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(o,c){return!1}_move(o,c){return{}}mousedown(o,c){if(this._lastPoint)return;const A=De(o);this._correctButton(o,A)&&(this._lastPoint=c,this._eventButton=A)}mousemoveWindow(o,c){const A=this._lastPoint;if(A){if(o.preventDefault(),this._eventButton!=null&&function(R,C){const E=op[C];return R.buttons===void 0||(R.buttons&E)!==E}(o,this._eventButton))this.reset();else if(this._moved||!(c.dist(A)<this._clickTolerance))return this._moved=!0,this._lastPoint=c,this._move(A,c)}}mouseupWindow(o){this._lastPoint&&De(o)===this._eventButton&&(this._moved&&me(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class am extends tm{mousedown(o,c){super.mousedown(o,c),this._lastPoint&&(this._active=!0)}_correctButton(o,c){return c===0&&!o.ctrlKey}_move(o,c){return{around:c,panDelta:c.sub(o)}}}class jd extends tm{constructor(o){super(o),this._pitchRotateKey=o.pitchRotateKey?Xm[o.pitchRotateKey]:void 0}_correctButton(o,c){return this._pitchRotateKey?c===0&&o[this._pitchRotateKey]:c===0&&o.ctrlKey||c===2}_move(o,c){const A=.8*(c.x-o.x);if(A)return this._active=!0,{bearingDelta:A}}contextmenu(o){this._pitchRotateKey||o.preventDefault()}}class Rc extends tm{constructor(o){super(o),this._pitchRotateKey=o.pitchRotateKey?Xm[o.pitchRotateKey]:void 0}_correctButton(o,c){return this._pitchRotateKey?c===0&&o[this._pitchRotateKey]:c===0&&o.ctrlKey||c===2}_move(o,c){const A=-.5*(c.y-o.y);if(A)return this._active=!0,{pitchDelta:A}}contextmenu(o){this._pitchRotateKey||o.preventDefault()}}class ms{constructor(o,c){this._map=o,this._el=o.getCanvasContainer(),this._minTouches=1,this._clickTolerance=c.clickTolerance||1,this.reset(),n.aQ(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new n.P(0,0)}touchstart(o,c,A){return this._calculateTransform(o,c,A)}touchmove(o,c,A){if(this._active&&!(A.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(A.length===1&&!n.dC())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return o.cancelable&&o.preventDefault(),this._calculateTransform(o,c,A)}}touchend(o,c,A){this._calculateTransform(o,c,A),this._active&&A.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(o,c,A){A.length>0&&(this._active=!0);const R=Di(A,c),C=new n.P(0,0),E=new n.P(0,0);let L=0;for(const $ in R){const W=R[$],te=this._touches[$];te&&(C._add(W),E._add(W.sub(te)),L++,R[$]=W)}if(this._touches=R,L<this._minTouches||!E.mag())return;const j=E.div(L);return this._sum._add(j),this._sum.mag()<this._clickTolerance?void 0:{around:C.div(L),panDelta:j}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=H("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")},500)}}class Qc{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(o){}_move(o,c,A){return{}}touchstart(o,c,A){this._firstTwoTouches||A.length<2||(this._firstTwoTouches=[A[0].identifier,A[1].identifier],this._start([c[0],c[1]]))}touchmove(o,c,A){const R=this._firstTwoTouches;if(!R)return;o.preventDefault();const[C,E]=R,L=lp(A,c,C),j=lp(A,c,E);if(!L||!j)return;const $=this._aroundCenter?null:L.add(j).div(2);return this._move([L,j],$,o)}touchend(o,c,A){if(!this._firstTwoTouches)return;const[R,C]=this._firstTwoTouches,E=lp(A,c,R),L=lp(A,c,C);E&&L||(this._active&&me(),this.reset())}touchcancel(){this.reset()}enable(o){this._enabled=!0,this._aroundCenter=!!o&&o.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function lp(g,o,c){for(let A=0;A<g.length;A++)if(g[A].identifier===c)return o[A]}function up(g,o){return Math.log(g/o)/Math.LN2}class bf extends Qc{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(o){this._startDistance=this._distance=o[0].dist(o[1])}_move(o,c){const A=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(up(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:up(this._distance,A),pinchAround:c}}}function wh(g,o){return 180*g.angleWith(o)/Math.PI}class ed extends Qc{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])}_move(o,c){const A=this._vector;if(this._vector=o[0].sub(o[1]),A&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:wh(this._vector,A),pinchAround:c}}_isBelowThreshold(o){this._minDiameter=Math.min(this._minDiameter,o.mag());const c=25/(Math.PI*this._minDiameter)*360,A=this._startVector;if(!A)return!1;const R=wh(o,A);return Math.abs(R)<c}}function Zd(g){return Math.abs(g.y)>Math.abs(g.x)}class cA extends Qc{constructor(o){super(),this._map=o}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(o){this._lastPoints=o,Zd(o[0].sub(o[1]))&&(this._valid=!1)}_move(o,c,A){const R=this._lastPoints;if(!R)return;const C=o[0].sub(R[0]),E=o[1].sub(R[1]);return this._map._cooperativeGestures&&!n.dC()&&A.touches.length<3||(this._valid=this.gestureBeginsVertically(C,E,A.timeStamp),!this._valid)?void 0:(this._lastPoints=o,this._active=!0,{pitchDelta:(C.y+E.y)/2*-.5})}gestureBeginsVertically(o,c,A){if(this._valid!==void 0)return this._valid;const R=o.mag()>=2,C=c.mag()>=2;if(!R&&!C)return;if(!R||!C)return this._firstMove==null&&(this._firstMove=A),A-this._firstMove<100&&void 0;const E=o.y>0==c.y>0;return Zd(o)&&Zd(c)&&E}}const Jm={panStep:100,bearingStep:15,pitchStep:10};class cp{constructor(){const o=Jm;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(o){if(o.altKey||o.ctrlKey||o.metaKey)return;let c=0,A=0,R=0,C=0,E=0;switch(o.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:o.shiftKey?A=-1:(o.preventDefault(),C=-1);break;case 39:o.shiftKey?A=1:(o.preventDefault(),C=1);break;case 38:o.shiftKey?R=1:(o.preventDefault(),E=-1);break;case 40:o.shiftKey?R=-1:(o.preventDefault(),E=1);break;default:return}return this._rotationDisabled&&(A=0,R=0),{cameraAnimation:L=>{const j=L.getZoom();L.easeTo({duration:300,easeId:"keyboardHandler",easing:xf,zoom:c?Math.round(j)+c*(o.shiftKey?2:1):j,bearing:L.getBearing()+A*this._bearingStep,pitch:L.getPitch()+R*this._pitchStep,offset:[-C*this._panStep,-E*this._panStep],center:L.getCenter()},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function xf(g){return g*(2-g)}const Tc=4.000244140625,Ks=1/450;class Wu{constructor(o,c){this._map=o,this._el=o.getCanvasContainer(),this._handler=c,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Ks,n.aQ(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(o){this._defaultZoomRate=o}setWheelZoomRate(o){this._wheelZoomRate=o}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!o&&o.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(o){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(o.ctrlKey||o.metaKey||this.isZooming()||n.dC()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let c=o.deltaMode===WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY;const A=n.q.now(),R=A-(this._lastWheelEventTime||0);this._lastWheelEventTime=A,c!==0&&c%Tc==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":R>400?(this._type=null,this._lastValue=c,this._timeout=window.setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(R*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),o.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=o,this._delta-=c,this._active||this._start(o)),o.preventDefault()}_onTimeout(o){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(o)}_start(o){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=Re(this._el,o);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:c,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const o=this._map.transform;this._type==="wheel"&&o.projection.wrap&&(o._center.lng>=180||o._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const c=()=>o._terrainEnabled()&&this._aroundCoord?o.computeZoomRelativeTo(this._aroundCoord):o.zoom;if(this._delta!==0){const $=this._type==="wheel"&&Math.abs(this._delta)>Tc?this._wheelZoomRate:this._defaultZoomRate;let W=2/(1+Math.exp(-Math.abs(this._delta*$)));this._delta<0&&W!==0&&(W=1/W);const te=c(),ae=Math.pow(2,te),de=typeof this._targetZoom=="number"?o.zoomScale(this._targetZoom):ae;this._targetZoom=Math.min(o.maxZoom,Math.max(o.minZoom,o.scaleZoom(de*W))),this._type==="wheel"&&(this._startZoom=te,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}const A=typeof this._targetZoom=="number"?this._targetZoom:c(),R=this._startZoom,C=this._easing;let E,L=!1;if(this._type==="wheel"&&R&&C){const $=Math.min((n.q.now()-this._lastWheelEventTime)/200,1),W=C($);E=n.ah(R,A,W),$<1?this._frameId||(this._frameId=!0):L=!0}else E=A,L=!0;this._active=!0,L&&(this._active=!1,this._finishTimeout=window.setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let j=E-c();return j*this._lastDelta<0&&(j=0),{noInertia:!0,needsRenderFrame:!L,zoomDelta:j,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(o){let c=n.dD;if(this._prevEase){const A=this._prevEase,R=(n.q.now()-A.start)/A.duration,C=A.easing(R+.01)-A.easing(R),E=.27/Math.sqrt(C*C+1e-4)*.01,L=Math.sqrt(.0729-E*E);c=n.dB(E,L,.25,1)}return this._prevEase={start:n.q.now(),duration:o,easing:c},c}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=H("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")},200)}}class $h{constructor(o,c){this._clickZoom=o,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Yu{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(o,c){return o.preventDefault(),{cameraAnimation:A=>{A.easeTo({duration:300,zoom:A.getZoom()+(o.shiftKey?-1:1),around:A.unproject(c)},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Rh{constructor(){this._tap=new Gy({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(o,c,A){this._swipePoint||(this._tapTime&&o.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?A.length>0&&(this._swipePoint=c[0],this._swipeTouch=A[0].identifier):this._tap.touchstart(o,c,A))}touchmove(o,c,A){if(this._tapTime){if(this._swipePoint){if(A[0].identifier!==this._swipeTouch)return;const R=c[0],C=R.y-this._swipePoint.y;return this._swipePoint=R,o.preventDefault(),this._active=!0,{zoomDelta:C/128}}}else this._tap.touchmove(o,c,A)}touchend(o,c,A){this._tapTime?this._swipePoint&&A.length===0&&this.reset():this._tap.touchend(o,c,A)&&(this._tapTime=o.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class dA{constructor(o,c,A){this._el=o,this._mousePan=c,this._touchPan=A}enable(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Pf{constructor(o,c,A){this._pitchWithRotate=o.pitchWithRotate,this._mouseRotate=c,this._mousePitch=A}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Ef{constructor(o,c,A,R){this._el=o,this._touchZoom=c,this._touchRotate=A,this._tapDragZoom=R,this._rotationDisabled=!1,this._enabled=!0}enable(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Nf=g=>g.zoom||g.drag||g.pitch||g.rotate;class jy extends n.A{}class Al{constructor(){this.constants=[1,1,.01],this.radius=0}setup(o,c){const A=n.ad.vec3.sub([],c,o);this.radius=n.ad.vec3.length(A[2]<0?n.ad.vec3.div([],A,this.constants):[A[0],A[1],0])}projectRay(o){n.ad.vec3.div(o,o,this.constants),n.ad.vec3.normalize(o,o),n.ad.vec3.mul(o,o,this.constants);const c=n.ad.vec3.scale([],o,this.radius);if(c[2]>0){const A=n.ad.vec3.scale([],[0,0,1],n.ad.vec3.dot(c,[0,0,1])),R=n.ad.vec3.scale([],n.ad.vec3.normalize([],[c[0],c[1],0]),this.radius),C=n.ad.vec3.add([],c,n.ad.vec3.scale([],n.ad.vec3.sub([],n.ad.vec3.add([],R,A),c),2));c[0]=C[0],c[1]=C[1]}return c}}function Th(g){return g.panDelta&&g.panDelta.mag()||g.zoomDelta||g.bearingDelta||g.pitchDelta}class rm{constructor(o,c){this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new iA(o),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Al,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(c),n.aQ(["handleEvent","handleWindowEvent"],this);const A=this._el;this._listeners=[[A,"touchstart",{passive:!0}],[A,"touchmove",{passive:!1}],[A,"touchend",void 0],[A,"touchcancel",void 0],[A,"mousedown",void 0],[A,"mousemove",void 0],[A,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[A,"mouseover",void 0],[A,"mouseout",void 0],[A,"dblclick",void 0],[A,"click",void 0],[A,"keydown",{capture:!1}],[A,"keyup",void 0],[A,"wheel",{passive:!1}],[A,"contextmenu",void 0],[window,"blur",void 0]];for(const[R,C,E]of this._listeners){const L=R===document?this.handleWindowEvent:this.handleEvent;R.addEventListener(C,L,E)}}destroy(){for(const[o,c,A]of this._listeners){const R=o===document?this.handleWindowEvent:this.handleEvent;o.removeEventListener(c,R,A)}}_addDefaultHandlers(o){const c=this._map,A=c.getCanvasContainer();this._add("mapEvent",new oA(c,o));const R=c.boxZoom=new lA(c,o);this._add("boxZoom",R);const C=new uA,E=new Yu;c.doubleClickZoom=new $h(E,C),this._add("tapZoom",C),this._add("clickZoom",E);const L=new Rh;this._add("tapDragZoom",L);const j=c.touchPitch=new cA(c);this._add("touchPitch",j);const $=new jd(o),W=new Rc(o);c.dragRotate=new Pf(o,$,W),this._add("mouseRotate",$,["mousePitch"]),this._add("mousePitch",W,["mouseRotate"]);const te=new am(o),ae=new ms(c,o);c.dragPan=new dA(A,te,ae),this._add("mousePan",te),this._add("touchPan",ae,["touchZoom","touchRotate"]);const de=new ed,Te=new bf;c.touchZoomRotate=new Ef(A,Te,de,L),this._add("touchRotate",de,["touchPan","touchZoom"]),this._add("touchZoom",Te,["touchPan","touchRotate"]),this._add("blockableMapEvent",new U0(c));const ve=c.scrollZoom=new Wu(c,this);this._add("scrollZoom",ve,["mousePan"]);const Ee=c.keyboard=new cp;this._add("keyboard",Ee);for(const Ve of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])o.interactive&&o[Ve]&&c[Ve].enable(o[Ve])}_add(o,c,A){this._handlers.push({handlerName:o,handler:c,allowed:A}),this._handlersById[o]=c}stop(o){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[],this._originalZoom=void 0}}isActive(){for(const{handler:o}of this._handlers)if(o.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Nf(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(o,c,A){for(const R in o)if(R!==A&&(!c||c.indexOf(R)<0))return!0;return!1}handleWindowEvent(o){this.handleEvent(o,`${o.type}Window`)}_getMapTouches(o){const c=[];for(const A of o)this._el.contains(A.target)&&c.push(A);return c}handleEvent(o,c){this._updatingCamera=!0;const A=o.type==="renderFrame",R=A?void 0:o,C={needsRenderFrame:!1},E={},L={},j=o.touches?this._getMapTouches(o.touches):void 0,$=j?be(this._el,j):A?void 0:Re(this._el,o);for(const{handlerName:ae,handler:de,allowed:Te}of this._handlers){if(!de.isEnabled())continue;let ve;this._blockedByActive(L,Te,ae)?de.reset():de[c||o.type]&&(ve=de[c||o.type](o,$,j),this.mergeHandlerResult(C,E,ve,ae,R),ve&&ve.needsRenderFrame&&this._triggerRenderFrame()),(ve||de.isActive())&&(L[ae]=de)}const W={};for(const ae in this._previousActiveHandlers)L[ae]||(W[ae]=R);this._previousActiveHandlers=L,(Object.keys(W).length||Th(C))&&(this._changes.push([C,E,W]),this._triggerRenderFrame()),(Object.keys(L).length||Th(C))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:te}=C;te&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],te(this._map))}mergeHandlerResult(o,c,A,R,C){if(!A)return;n.l(o,A);const E={handlerName:R,originalEvent:A.originalEvent||C};A.zoomDelta!==void 0&&(c.zoom=E),A.panDelta!==void 0&&(c.drag=E),A.pitchDelta!==void 0&&(c.pitch=E),A.bearingDelta!==void 0&&(c.rotate=E)}_applyChanges(){const o={},c={},A={};for(const[R,C,E]of this._changes)R.panDelta&&(o.panDelta=(o.panDelta||new n.P(0,0))._add(R.panDelta)),R.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+R.zoomDelta),R.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+R.bearingDelta),R.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+R.pitchDelta),R.around!==void 0&&(o.around=R.around),R.aroundCoord!==void 0&&(o.aroundCoord=R.aroundCoord),R.pinchAround!==void 0&&(o.pinchAround=R.pinchAround),R.noInertia&&(o.noInertia=R.noInertia),n.l(c,C),n.l(A,E);this._updateMapTransform(o,c,A),this._changes=[]}_updateMapTransform(o,c,A){const R=this._map,C=R.transform,E=Be=>[Be.x,Be.y,Be.z];if((Be=>{const et=this._eventsInProgress.drag;return et&&!this._handlersById[et.handlerName].isActive()})()&&!Th(o)){const Be=C.zoom;C.cameraElevationReference="sea",this._originalZoom!=null&&C._orthographicProjectionAtLowPitch&&C.projection.name!=="globe"&&C.pitch===0?(C.cameraElevationReference="ground",C.zoom=this._originalZoom):(C.recenterOnTerrain(),C.cameraElevationReference="ground"),Be!==C.zoom&&this._map._update(!0)}if(C._isCameraConstrained&&R._stop(!0),!Th(o))return void this._fireEvents(c,A,!0);let{panDelta:L,zoomDelta:j,bearingDelta:$,pitchDelta:W,around:te,aroundCoord:ae,pinchAround:de}=o;C._isCameraConstrained&&(j>0&&(j=0),C._isCameraConstrained=!1),de!==void 0&&(te=de),(j||(Be=>c[Be]&&!this._eventsInProgress[Be])("drag"))&&te&&(this._dragOrigin=E(C.pointCoordinate3D(te)),this._originalZoom=C.zoom,this._trackingEllipsoid.setup(C._camera.position,this._dragOrigin)),C.cameraElevationReference="sea",R._stop(!0),te=te||R.transform.centerPoint,$&&(C.bearing+=$),W&&(C.pitch+=W),C._updateCameraState();const Te=[0,0,0];if(L)if(C.projection.name==="mercator"){const Be=this._trackingEllipsoid.projectRay(C.screenPointToMercatorRay(te).dir),et=this._trackingEllipsoid.projectRay(C.screenPointToMercatorRay(te.sub(L)).dir);Te[0]=et[0]-Be[0],Te[1]=et[1]-Be[1]}else{const Be=C.pointCoordinate(te);if(C.projection.name==="globe"){L=L.rotate(-C.angle);const et=C._pixelsPerMercatorPixel/C.worldSize;Te[0]=-L.x*n.dE(n.aT(Be.y))*et,Te[1]=-L.y*n.dE(C.center.lat)*et}else{const et=C.pointCoordinate(te.sub(L));Be&&et&&(Te[0]=et.x-Be.x,Te[1]=et.y-Be.y)}}const ve=C.zoom,Ee=[0,0,0];if(j){const Be=E(ae||C.pointCoordinate3D(te)),et={dir:n.ad.vec3.normalize([],n.ad.vec3.sub([],Be,C._camera.position))};if(et.dir[2]<0){const Je=C.zoomDeltaToMovement(Be,j);n.ad.vec3.scale(Ee,et.dir,Je)}}const Ve=n.ad.vec3.add(Te,Te,Ee);C._translateCameraConstrained(Ve),j&&Math.abs(C.zoom-ve)>1e-4&&C.recenterOnTerrain(),C.cameraElevationReference="ground",this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(c,A,!0)}_fireEvents(o,c,A){const R=Nf(this._eventsInProgress),C=Nf(o),E={};for(const W in o){const{originalEvent:te}=o[W];this._eventsInProgress[W]||(E[`${W}start`]=te),this._eventsInProgress[W]=o[W]}!R&&C&&this._fireEvent("movestart",C.originalEvent);for(const W in E)this._fireEvent(W,E[W]);C&&this._fireEvent("move",C.originalEvent);for(const W in o){const{originalEvent:te}=o[W];this._fireEvent(W,te)}const L={};let j;for(const W in this._eventsInProgress){const{handlerName:te,originalEvent:ae}=this._eventsInProgress[W];this._handlersById[te].isActive()||(delete this._eventsInProgress[W],j=c[te]||ae,L[`${W}end`]=j)}for(const W in L)this._fireEvent(W,L[W]);const $=Nf(this._eventsInProgress);if(A&&(R||C)&&!$){this._updatingCamera=!0;const W=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),te=ae=>ae!==0&&-this._bearingSnap<ae&&ae<this._bearingSnap;W?(te(W.bearing||this._map.getBearing())&&(W.bearing=0),this._map.easeTo(W,{originalEvent:j})):(this._map.fire(new n.A("moveend",{originalEvent:j})),te(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(o,c){this._map.fire(new n.A(o,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(o=>{this._frameId=void 0,this.handleEvent(new jy("renderFrame",{timeStamp:o})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const hA="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class dp extends n.E{constructor(o,c){super(),this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=c.bearingSnap,this._respectPrefersReducedMotion=c.respectPrefersReducedMotion!==!1,n.aQ(["_renderFrameCallback"],this)}getCenter(){return new n.bO(this.transform.center.lng,this.transform.center.lat)}setCenter(o,c){return this.jumpTo({center:o},c)}panBy(o,c,A){return o=n.P.convert(o).mult(-1),this.panTo(this.transform.center,n.l({offset:o},c),A)}panTo(o,c,A){return this.easeTo(n.l({center:o},c),A)}getZoom(){return this.transform.zoom}setZoom(o,c){return this.jumpTo({zoom:o},c),this}zoomTo(o,c,A){return this.easeTo(n.l({zoom:o},c),A)}zoomIn(o,c){return this.zoomTo(this.getZoom()+1,o,c),this}zoomOut(o,c){return this.zoomTo(this.getZoom()-1,o,c),this}getBearing(){return this.transform.bearing}setBearing(o,c){return this.jumpTo({bearing:o},c),this}getPadding(){return this.transform.padding}setPadding(o,c){return this.jumpTo({padding:o},c),this}rotateTo(o,c,A){return this.easeTo(n.l({bearing:o},c),A)}resetNorth(o,c){return this.rotateTo(0,n.l({duration:1e3},o),c),this}resetNorthPitch(o,c){return this.easeTo(n.l({bearing:0,pitch:0,duration:1e3},o),c),this}snapToNorth(o,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,c):this}getPitch(){return this.transform.pitch}setPitch(o,c){return this.jumpTo({pitch:o},c),this}cameraForBounds(o,c){o=n.aB.convert(o);const A=c&&c.bearing||0,R=c&&c.pitch||0,C=o.getNorthWest(),E=o.getSouthEast();return this._cameraForBounds(this.transform,C,E,A,R,c)}_extendPadding(o){const c={top:0,right:0,bottom:0,left:0};return o==null?n.l({},c,this.transform.padding):typeof o=="number"?{top:o,bottom:o,right:o,left:o}:n.l({},c,o)}_extendCameraOptions(o){return(o=n.l({offset:[0,0],maxZoom:this.transform.maxZoom},o)).padding=this._extendPadding(o.padding),o}_minimumAABBFrustumDistance(o,c){const A=c.max[0]-c.min[0],R=c.max[1]-c.min[1];return A/R>o.aspect?A/(2*Math.tan(.5*o.fovX)*o.aspect):R/(2*Math.tan(.5*o.fovY)*o.aspect)}_cameraForBoundsOnGlobe(o,c,A,R,C,E){const L=o.clone(),j=this._extendCameraOptions(E);L.bearing=R,L.pitch=C;const $=n.bO.convert(c),W=n.bO.convert(A),te=.5*($.lat+W.lat),ae=.5*($.lng+W.lng),de=n.dF(te,ae),Te=n.ad.vec3.normalize([],de),ve=n.ad.vec3.normalize([],n.ad.vec3.cross([],Te,[0,1,0])),Ee=n.ad.vec3.cross([],ve,Te),Ve=[ve[0],ve[1],ve[2],0,Ee[0],Ee[1],Ee[2],0,Te[0],Te[1],Te[2],0,0,0,0,1],Be=[de,n.dF($.lat,$.lng),n.dF(W.lat,$.lng),n.dF(W.lat,W.lng),n.dF($.lat,W.lng),n.dF(te,$.lng),n.dF(te,W.lng),n.dF($.lat,ae),n.dF(W.lat,ae)];let et=n.ce.fromPoints(Be.map(ea=>[n.ad.vec3.dot(ve,ea),n.ad.vec3.dot(Ee,ea),n.ad.vec3.dot(Te,ea)]));const Je=n.ad.vec3.transformMat4([],et.center,Ve);n.ad.vec3.squaredLength(Je)===0&&n.ad.vec3.set(Je,0,0,1),n.ad.vec3.normalize(Je,Je),n.ad.vec3.scale(Je,Je,n.az),L.center=n.dG(Je);const dt=L.getWorldToCameraMatrix(),it=n.ad.mat4.invert(new Float64Array(16),dt);et=n.ce.applyTransform(et,n.ad.mat4.multiply([],dt,Ve));const st=this._extendAABB(et,L,j,R);if(!st)return void n.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");et=st,n.ad.vec3.transformMat4(Je,Je,dt);const ot=.5*(et.max[2]-et.min[2]),gt=this._minimumAABBFrustumDistance(L,et),Tt=n.ad.vec3.scale([],[0,0,1],ot),Xt=n.ad.vec3.add(Tt,Je,Tt),Ft=gt+(L.pitch===0?0:n.ad.vec3.distance(Je,Xt)),ra=L.globeCenterInViewSpace,ua=n.ad.vec3.sub([],Je,[ra[0],ra[1],ra[2]]);n.ad.vec3.normalize(ua,ua),n.ad.vec3.scale(ua,ua,Ft);const Ca=n.ad.vec3.add([],Je,ua);n.ad.vec3.transformMat4(Ca,Ca,it);const Lt=n.dv/n.az,sa=n.ad.vec3.length(Ca),zt=n.bH(Math.max(sa*Lt-n.dv,Number.EPSILON),0),oa=Math.min(L.zoomFromMercatorZAdjusted(zt),j.maxZoom);return oa>.5*(n.c6+n.bY)?(L.setProjection({name:"mercator"}),L.zoom=oa,this._cameraForBounds(L,c,A,R,C,E)):{center:L.center,zoom:oa,bearing:R,pitch:C}}_extendAABB(o,c,A,R){const C=.5*((A.padding.left||0)+(A.padding.right||0)),E=.5*((A.padding.top||0)+(A.padding.bottom||0)),L=E,j=C,$=C,W=E,te=c.width-(j+$),ae=c.height-(L+W),de=n.ad.vec3.sub([],o.max,o.min),Te=Math.min(te/de[0],ae/de[1]),ve=Math.min(c.scaleZoom(c.scale*Te),A.maxZoom);if(isNaN(ve))return null;const Ee=c.scale/c.zoomScale(ve),Ve=new n.ce([o.min[0]-j*Ee,o.min[1]-W*Ee,o.min[2]],[o.max[0]+$*Ee,o.max[1]+L*Ee,o.max[2]]),Be=(typeof A.offset.x=="number"&&typeof A.offset.y=="number"?new n.P(A.offset.x,A.offset.y):n.P.convert(A.offset)).rotate(-n.ak(R));return Ve.center[0]-=Be.x*Ee,Ve.center[1]+=Be.y*Ee,Ve}queryTerrainElevation(o,c){const A=this.transform.elevation;return A?(c=n.l({},{exaggerated:!0},c),A.getAtPoint(n.ac.fromLngLat(o),null,c.exaggerated)):null}_cameraForBounds(o,c,A,R,C,E){if(o.projection.name==="globe")return this._cameraForBoundsOnGlobe(o,c,A,R,C,E);const L=o.clone(),j=this._extendCameraOptions(E);L.bearing=R,L.pitch=C;const $=n.bO.convert(c),W=n.bO.convert(A),te=new n.bO($.lng,W.lat),ae=new n.bO(W.lng,$.lat),de=L.project($),Te=L.project(W),ve=this.queryTerrainElevation($),Ee=this.queryTerrainElevation(W),Ve=this.queryTerrainElevation(te),Be=this.queryTerrainElevation(ae),et=[[de.x,de.y,Math.min(ve||0,Ee||0,Ve||0,Be||0)],[Te.x,Te.y,Math.max(ve||0,Ee||0,Ve||0,Be||0)]];let Je=n.ce.fromPoints(et);const dt=L.getWorldToCameraMatrix(),it=n.ad.mat4.invert(new Float64Array(16),dt);Je=n.ce.applyTransform(Je,dt);const st=this._extendAABB(Je,L,j,R);if(!st)return void n.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");Je=st;const ot=.5*n.ad.vec3.sub([],Je.max,Je.min)[2],gt=this._minimumAABBFrustumDistance(L,Je),Tt=[0,0,1,0];n.ad.vec4.transformMat4(Tt,Tt,dt),n.ad.vec4.normalize(Tt,Tt);const Xt=n.ad.vec3.scale([],Tt,gt+ot),Ft=n.ad.vec3.add([],Je.center,Xt);n.ad.vec3.transformMat4(Je.center,Je.center,it),n.ad.vec3.transformMat4(Ft,Ft,it);const ra=L.unproject(new n.P(Je.center[0],Je.center[1])),ua=n.dH(L.projection,ra),Ca=Math.pow(2,ua),Lt=Math.min(L._zoomFromMercatorZ(Ft[2]*L.pixelsPerMeter*Ca/L.worldSize),j.maxZoom);return L.mercatorFromTransition&&Lt<.5*(n.c6+n.bY)?(L.setProjection({name:"globe"}),L.zoom=Lt,this._cameraForBounds(L,c,A,R,C,E)):{center:ra,zoom:Lt,bearing:R,pitch:C}}fitBounds(o,c,A){const R=this.cameraForBounds(o,c);return this._fitInternal(R,c,A)}fitScreenCoordinates(o,c,A,R,C){const E=n.P.convert(o),L=n.P.convert(c),j=new n.P(Math.min(E.x,L.x),Math.min(E.y,L.y)),$=new n.P(Math.max(E.x,L.x),Math.max(E.y,L.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(E,L))return this;const W=this.transform.pointLocation3D(j),te=this.transform.pointLocation3D($),ae=this.transform.pointLocation3D(new n.P(j.x,$.y)),de=this.transform.pointLocation3D(new n.P($.x,j.y)),Te=[Math.min(W.lng,te.lng,ae.lng,de.lng),Math.min(W.lat,te.lat,ae.lat,de.lat)],ve=[Math.max(W.lng,te.lng,ae.lng,de.lng),Math.max(W.lat,te.lat,ae.lat,de.lat)],Ee=R&&R.pitch?R.pitch:this.getPitch(),Ve=this._cameraForBounds(this.transform,Te,ve,A,Ee,R);return this._fitInternal(Ve,R,C)}_fitInternal(o,c,A){return o?(c=n.l(o,c)).linear?this.easeTo(c,A):this.flyTo(c,A):this}jumpTo(o,c){this.stop();const A=o.preloadOnly?this.transform.clone():this.transform;let R=!1,C=!1,E=!1;"zoom"in o&&A.zoom!==+o.zoom&&(R=!0,A.zoom=+o.zoom),o.center!==void 0&&(A.center=n.bO.convert(o.center)),"bearing"in o&&A.bearing!==+o.bearing&&(C=!0,A.bearing=+o.bearing),"pitch"in o&&A.pitch!==+o.pitch&&(E=!0,A.pitch=+o.pitch);const L=typeof o.padding=="number"?this._extendPadding(o.padding):o.padding;if(o.padding!=null&&!A.isPaddingEqual(L))if(o.retainPadding===!1){const j=A.clone();j.padding=L,A.setLocationAtPoint(A.center,j.centerPoint)}else A.padding=L;return o.preloadOnly?(this._preloadTiles(A),this):(this.fire(new n.A("movestart",c)).fire(new n.A("move",c)),R&&this.fire(new n.A("zoomstart",c)).fire(new n.A("zoom",c)).fire(new n.A("zoomend",c)),C&&this.fire(new n.A("rotatestart",c)).fire(new n.A("rotate",c)).fire(new n.A("rotateend",c)),E&&this.fire(new n.A("pitchstart",c)).fire(new n.A("pitch",c)).fire(new n.A("pitchend",c)),this.fire(new n.A("moveend",c)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||n.w(hA),this.transform.getFreeCameraOptions()}setFreeCameraOptions(o,c){const A=this.transform;if(!A.projection.supportsFreeCamera)return n.w(hA),this;this.stop();const R=A.zoom,C=A.pitch,E=A.bearing;A.setFreeCameraOptions(o);const L=R!==A.zoom,j=C!==A.pitch,$=E!==A.bearing;return this.fire(new n.A("movestart",c)).fire(new n.A("move",c)),L&&this.fire(new n.A("zoomstart",c)).fire(new n.A("zoom",c)).fire(new n.A("zoomend",c)),$&&this.fire(new n.A("rotatestart",c)).fire(new n.A("rotate",c)).fire(new n.A("rotateend",c)),j&&this.fire(new n.A("pitchstart",c)).fire(new n.A("pitch",c)).fire(new n.A("pitchend",c)),this.fire(new n.A("moveend",c)),this}easeTo(o,c){this._stop(!1,o.easeId),((o=n.l({offset:[0,0],duration:500,easing:n.dD},o)).animate===!1||this._prefersReducedMotion(o))&&(o.duration=0);const A=this.transform,R=this.getZoom(),C=this.getBearing(),E=this.getPitch(),L=this.getPadding(),j="zoom"in o?+o.zoom:R,$="bearing"in o?this._normalizeBearing(o.bearing,C):C,W="pitch"in o?+o.pitch:E,te=this._extendPadding(o.padding),ae=n.P.convert(o.offset);let de,Te,ve;if(A.projection.name==="globe"){const Tt=n.ac.fromLngLat(A.center),Xt=ae.rotate(-A.angle);Tt.x+=Xt.x/A.worldSize,Tt.y+=Xt.y/A.worldSize;const Ft=Tt.toLngLat(),ra=n.bO.convert(o.center||Ft);this._normalizeCenter(ra),de=A.centerPoint.add(Xt),Te=new n.P(Tt.x,Tt.y).mult(A.worldSize),ve=new n.P(n.av(ra.lng),n.aC(ra.lat)).mult(A.worldSize).sub(Te)}else{de=A.centerPoint.add(ae);const Tt=A.pointLocation(de),Xt=n.bO.convert(o.center||Tt);this._normalizeCenter(Xt),Te=A.project(Tt),ve=A.project(Xt).sub(Te)}const Ee=A.zoomScale(j-R);let Ve,Be;o.around&&(Ve=n.bO.convert(o.around),Be=A.locationPoint(Ve));const et=this._zooming||j!==R,Je=this._rotating||C!==$,dt=this._pitching||W!==E,it=!A.isPaddingEqual(te),st=o.retainPadding===!1?A.clone():A,ot=Tt=>Xt=>{if(et&&(Tt.zoom=n.ah(R,j,Xt)),Je&&(Tt.bearing=n.ah(C,$,Xt)),dt&&(Tt.pitch=n.ah(E,W,Xt)),it&&(st.interpolatePadding(L,te,Xt),de=st.centerPoint.add(ae)),Ve)Tt.setLocationAtPoint(Ve,Be);else{const Ft=Tt.zoomScale(Tt.zoom-R),ra=j>R?Math.min(2,Ee):Math.max(.5,Ee),ua=Math.pow(ra,1-Xt),Ca=Tt.unproject(Te.add(ve.mult(Xt*ua)).mult(Ft));Tt.setLocationAtPoint(Tt.renderWorldCopies?Ca.wrap():Ca,de)}return o.preloadOnly||this._fireMoveEvents(c),Tt};if(o.preloadOnly){const Tt=this._emulate(ot,o.duration,A);return this._preloadTiles(Tt),this}const gt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=et,this._rotating=Je,this._pitching=dt,this._padding=it,this._easeId=o.easeId,this._prepareEase(c,o.noMoveStart,gt),this._ease(ot(A),Tt=>{A.cameraElevationReference==="sea"&&A.recenterOnTerrain(),this._afterEase(c,Tt)},o),this}_prepareEase(o,c,A={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&this.transform.pitch===0&&this.transform.projection.name!=="globe"&&(this.transform.cameraElevationReference="ground"),c||A.moving||this.fire(new n.A("movestart",o)),this._zooming&&!A.zooming&&this.fire(new n.A("zoomstart",o)),this._rotating&&!A.rotating&&this.fire(new n.A("rotatestart",o)),this._pitching&&!A.pitching&&this.fire(new n.A("pitchstart",o))}_fireMoveEvents(o){this.fire(new n.A("move",o)),this._zooming&&this.fire(new n.A("zoom",o)),this._rotating&&this.fire(new n.A("rotate",o)),this._pitching&&this.fire(new n.A("pitch",o))}_afterEase(o,c){if(this._easeId&&c&&this._easeId===c)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const A=this._zooming,R=this._rotating,C=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,A&&this.fire(new n.A("zoomend",o)),R&&this.fire(new n.A("rotateend",o)),C&&this.fire(new n.A("pitchend",o)),this.fire(new n.A("moveend",o))}flyTo(o,c){if(this._prefersReducedMotion(o)){const ea=n.aA(o,["center","zoom","bearing","pitch","around","padding","retainPadding"]);return this.jumpTo(ea,c)}this.stop(),o=n.l({offset:[0,0],speed:1.2,curve:1.42,easing:n.dD},o);const A=this.transform,R=this.getZoom(),C=this.getBearing(),E=this.getPitch(),L=this.getPadding(),j="zoom"in o?n.ay(+o.zoom,A.minZoom,A.maxZoom):R,$="bearing"in o?this._normalizeBearing(o.bearing,C):C,W="pitch"in o?+o.pitch:E,te=this._extendPadding(o.padding),ae=A.zoomScale(j-R),de=n.P.convert(o.offset);let Te=A.centerPoint.add(de);const ve=A.pointLocation(Te),Ee=n.bO.convert(o.center||ve);this._normalizeCenter(Ee);const Ve=A.project(ve),Be=A.project(Ee).sub(Ve);let et=o.curve;const Je=Math.max(A.width,A.height),dt=Je/ae,it=Be.mag();if("minZoom"in o){const ea=n.ay(Math.min(o.minZoom,R,j),A.minZoom,A.maxZoom),da=Je/A.zoomScale(ea-R);et=Math.sqrt(da/it*2)}const st=et*et;function ot(ea){const da=(dt*dt-Je*Je+(ea?-1:1)*st*st*it*it)/(2*(ea?dt:Je)*st*it);return Math.log(Math.sqrt(da*da+1)-da)}function gt(ea){return(Math.exp(ea)-Math.exp(-ea))/2}function Tt(ea){return(Math.exp(ea)+Math.exp(-ea))/2}const Xt=ot(0);let Ft=function(ea){return Tt(Xt)/Tt(Xt+et*ea)},ra=function(ea){return Je*((Tt(Xt)*(gt(da=Xt+et*ea)/Tt(da))-gt(Xt))/st)/it;var da},ua=(ot(1)-Xt)/et;if(Math.abs(it)<1e-6||!isFinite(ua)){if(Math.abs(Je-dt)<1e-6)return this.easeTo(o,c);const ea=dt<Je?-1:1;ua=Math.abs(Math.log(dt/Je))/et,ra=function(){return 0},Ft=function(da){return Math.exp(ea*et*da)}}o.duration="duration"in o?+o.duration:1e3*ua/("screenSpeed"in o?+o.screenSpeed/et:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0);const Ca=C!==$,Lt=W!==E,sa=!A.isPaddingEqual(te),zt=o.retainPadding===!1?A.clone():A,oa=ea=>da=>{const Wt=da*ua,pa=1/Ft(Wt);ea.zoom=da===1?j:R+ea.scaleZoom(pa),Ca&&(ea.bearing=n.ah(C,$,da)),Lt&&(ea.pitch=n.ah(E,W,da)),sa&&(zt.interpolatePadding(L,te,da),Te=zt.centerPoint.add(de));const Ia=da===1?Ee:ea.unproject(Ve.add(Be.mult(ra(Wt))).mult(pa));return ea.setLocationAtPoint(ea.renderWorldCopies?Ia.wrap():Ia,Te),ea._updateCameraOnTerrain(),o.preloadOnly||this._fireMoveEvents(c),ea};if(o.preloadOnly){const ea=this._emulate(oa,o.duration,A);return this._preloadTiles(ea),this}return this._zooming=!0,this._rotating=Ca,this._pitching=Lt,this._padding=sa,this._prepareEase(c,!1),this._ease(oa(A),()=>this._afterEase(c),o),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_requestRenderFrame(o){}_cancelRenderFrame(o){}_stop(o,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const A=this._onEaseEnd;this._onEaseEnd=void 0,A.call(this,c)}if(!o){const A=this.handlers;A&&A.stop(!1)}return this}_ease(o,c,A){A.animate===!1||A.duration===0?(o(1),c()):(this._easeStart=n.q.now(),this._easeOptions=A,this._onEaseFrame=o,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const o=Math.min((n.q.now()-this._easeStart)/this._easeOptions.duration,1),c=this._onEaseFrame;c&&c(this._easeOptions.easing(o)),o<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(o,c){o=n.bF(o,-180,180);const A=Math.abs(o-c);return Math.abs(o-360-c)<A&&(o-=360),Math.abs(o+360-c)<A&&(o+=360),o}_normalizeCenter(o){const c=this.transform;if(c.maxBounds||c.projection.name!=="globe"&&!c.renderWorldCopies)return;const A=o.lng-c.center.lng;o.lng+=A>180?-360:A<-180?360:0}_prefersReducedMotion(o){return this._respectPrefersReducedMotion&&n.q.prefersReducedMotion&&!(o&&o.essential)}_emulate(o,c,A){const R=Math.ceil(15*c/1e3),C=[],E=o(A.clone());for(let L=0;L<=R;L++){const j=E(L/R);C.push(j.clone())}return C}_preloadTiles(o,c){}}class Vf{constructor(o={}){this.options=o,n.aQ(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(o){const c=this.options&&this.options.compact,A=o._getUIString("AttributionControl.ToggleAttribution");this._map=o,this._container=H("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=H("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._compactButton.setAttribute("aria-label",A);const R=H("span","mapboxgl-ctrl-icon",this._compactButton);return R.setAttribute("aria-hidden","true"),R.setAttribute("title",A),this._innerContainer=H("div","mapboxgl-ctrl-attrib-inner",this._container),c&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),c===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let o=this._editLink;o||(o=this._editLink=this._container.querySelector(".mapbox-improve-map"));const c=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||n.e.ACCESS_TOKEN}];if(o){const A=c.reduce((R,C,E)=>(C.value&&(R+=`${C.key}=${C.value}${E<c.length-1?"&":""}`),R),"?");o.href=`${n.e.FEEDBACK_URL}/${A}#${aA(this._map,!0)}`,o.rel="noopener nofollow"}}_updateData(o){!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let o=[];if(this._map.style.stylesheet){const R=this._map.style.stylesheet;this.styleOwner=R.owner,this.styleId=R.id}const c=this._map.style._mergedSourceCaches;for(const R in c){const C=c[R];if(C.used){const E=C.getSource();E.attribution&&o.indexOf(E.attribution)<0&&o.push(E.attribution)}}o.sort((R,C)=>R.length-C.length),o=o.filter((R,C)=>{for(let E=C+1;E<o.length;E++)if(o[E].indexOf(R)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=[...this.options.customAttribution,...o]:o.unshift(this.options.customAttribution));const A=o.join(" | ");A!==this._attribHTML&&(this._attribHTML=A,o.length?(this._innerContainer.innerHTML=A,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Go{constructor(){n.aQ(["_updateLogo","_updateCompact"],this)}onAdd(o){this._map=o,this._container=H("div","mapboxgl-ctrl");const c=H("a","mapboxgl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://www.mapbox.com/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(o){o&&o.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const o=this._map.style._sourceCaches;if(Object.entries(o).length===0)return!0;for(const c in o){const A=o[c].getSource();if(A.hasOwnProperty("mapbox_logo")&&!A.mapbox_logo)return!1}return!0}_updateCompact(){const o=this._container.children;if(o.length){const c=o[0];this._map.getCanvasContainer().offsetWidth<250?c.classList.add("mapboxgl-compact"):c.classList.remove("mapboxgl-compact")}}}class Xu{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(o){const c=++this._id;return this._queue.push({callback:o,id:c,cancelled:!1}),c}remove(o){const c=this._currentlyRunning,A=c?this._queue.concat(c):this._queue;for(const R of A)if(R.id===o)return void(R.cancelled=!0)}run(o=0){const c=this._currentlyRunning=this._queue;this._queue=[];for(const A of c)if(!A.cancelled&&(A.callback(o),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}class hp{constructor(o){this.jumpTo(o)}getValue(o){if(o<=this._startTime)return this._start;if(o>=this._endTime)return this._end;const c=n.cC((o-this._startTime)/(this._endTime-this._startTime));return this._start*(1-c)+this._end*c}isEasing(o){return o>=this._startTime&&o<=this._endTime}jumpTo(o){this._startTime=-1/0,this._endTime=-1/0,this._start=o,this._end=o}easeTo(o,c,A){this._start=this.getValue(c),this._end=o,this._startTime=c,this._endTime=c+A}}const Sc={"AttributionControl.ToggleAttribution":"Toggle attribution","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox homepage","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"};class ol extends n.A{constructor(o,c,A,R){const{point:C,lngLat:E,originalEvent:L,target:j}=o;super(o.type,{point:C,lngLat:E,originalEvent:L,target:j}),this.preventDefault=()=>{o.preventDefault()},this.id=c,this.interaction=A,this.feature=R}}class Zy{constructor(o){this.map=o,this.interactionsByType=new Map,this.delegatedInteractions=new Map,this.typeById=new Map,this.filters=new Map,this.handleType=this.handleType.bind(this),this.handleMove=this.handleMove.bind(this),this.handleOut=this.handleOut.bind(this),this.hoveredFeatures=new Map,this.prevHoveredFeatures=new Map}add(o,c){if(this.typeById.has(o))throw new Error(`Interaction id "${o}" already exists.`);const A=c.filter;let R=c.type;A&&this.filters.set(o,n.a_(A)),R==="mouseover"&&(R="mouseenter"),R==="mouseout"&&(R="mouseleave");const C=this.interactionsByType.get(R)||new Map;R==="mouseenter"||R==="mouseleave"?(this.delegatedInteractions.size===0&&(this.map.on("mousemove",this.handleMove),this.map.on("mouseout",this.handleOut)),this.delegatedInteractions.set(o,c)):C.size===0&&this.map.on(R,this.handleType),C.size===0&&this.interactionsByType.set(R,C),C.set(o,c),this.typeById.set(o,R)}get(o){const c=this.typeById.get(o);if(!c)return;const A=this.interactionsByType.get(c);return A?A.get(o):void 0}remove(o){const c=this.typeById.get(o);if(!c)return;this.typeById.delete(o),this.filters.delete(o);const A=this.interactionsByType.get(c);A&&(A.delete(o),c==="mouseenter"||c==="mouseleave"?(this.delegatedInteractions.delete(o),this.delegatedInteractions.size===0&&(this.map.off("mousemove",this.handleMove),this.map.off("mouseout",this.handleOut))):A.size===0&&this.map.off(c,this.handleType))}queryTargets(o,c){const A=[];for(const[R,C]of c)C.target&&A.push({targetId:R,target:C.target,filter:this.filters.get(R)});return this.map.style.queryRenderedTargets(o,A,this.map.transform)}handleMove(o){this.prevHoveredFeatures=this.hoveredFeatures,this.hoveredFeatures=new Map;const c=this.queryTargets(o.point,Array.from(this.delegatedInteractions).reverse());c.length&&(o.type="mouseenter",this.handleType(o,c));const A=new Map;for(const[R,{feature:C}]of this.prevHoveredFeatures)this.hoveredFeatures.has(R)||A.set(C.id,C);A.size&&(o.type="mouseleave",this.handleType(o,Array.from(A.values())))}handleOut(o){const c=Array.from(this.hoveredFeatures.values()).map(({feature:A})=>A);c.length&&(o.type="mouseleave",this.handleType(o,c)),this.hoveredFeatures.clear()}handleType(o,c){const A=Array.from(this.interactionsByType.get(o.type)).reverse(),R=!!c;c=c||this.queryTargets(o.point,A);const C=o.type==="mouseenter";let E=!1;const L=new Set;for(const j of c){for(const[$,W]of A){if(!W.target)continue;const te=j.variants?j.variants[$]:null;if(te){for(const ae of te){if(zc(ae,j,L,$))continue;const de=new n.cx(j,ae),Te=wd(ae,j,$);R&&(de.state=this.map.getFeatureState(de));const ve=C?this.prevHoveredFeatures.get(Te):null,Ee=new ol(o,$,W,de),Ve=ve?ve.stop:W.handler(Ee);if(C&&this.hoveredFeatures.set(Te,{feature:j,stop:Ve}),Ve!==!1){E=!0;break}}if(E)break}}if(E)break}if(!E)for(const[j,$]of A){const{handler:W,target:te}=$;if(!te&&W(new ol(o,j,$,null))!==!1)break}}}function Ln(g,o){if(Array.isArray(g)&&Array.isArray(o)){const c=new Set(g),A=new Set(o);return c.size===A.size&&g.every(R=>A.has(R))}return n.bn(g,o)}const Kh={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1,precompilePrograms:!0,scaleFactor:1,spriteFormat:"auto"},fA={showCompass:!0,showZoom:!0,visualizePitch:!1};class pA{constructor(o,c,A=!1){this._clickTolerance=10,this.element=c,this.mouseRotate=new jd({clickTolerance:o.dragRotate._mouseRotate._clickTolerance}),this.map=o,A&&(this.mousePitch=new Rc({clickTolerance:o.dragRotate._mousePitch._clickTolerance})),n.aQ(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),c.addEventListener("mousedown",this.mousedown),c.addEventListener("touchstart",this.touchstart,{passive:!1}),c.addEventListener("touchmove",this.touchmove),c.addEventListener("touchend",this.touchend),c.addEventListener("touchcancel",this.reset)}down(o,c){this.mouseRotate.mousedown(o,c),this.mousePitch&&this.mousePitch.mousedown(o,c),ye()}move(o,c){const A=this.map,R=this.mouseRotate.mousemoveWindow(o,c),C=R&&R.bearingDelta;if(C&&A.setBearing(A.getBearing()+C),this.mousePitch){const E=this.mousePitch.mousemoveWindow(o,c),L=E&&E.pitchDelta;L&&A.setPitch(A.getPitch()+L)}}off(){const o=this.element;o.removeEventListener("mousedown",this.mousedown),o.removeEventListener("touchstart",this.touchstart,{passive:!1}),o.removeEventListener("touchmove",this.touchmove),o.removeEventListener("touchend",this.touchend),o.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){he(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(o){this.down(n.l({},o,{ctrlKey:!0,preventDefault:()=>o.preventDefault()}),Re(this.element,o)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(o){this.move(o,Re(this.element,o))}mouseup(o){this.mouseRotate.mouseupWindow(o),this.mousePitch&&this.mousePitch.mouseupWindow(o),this.offTemp()}touchstart(o){o.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=be(this.element,o.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>o.preventDefault()},this._startPos))}touchmove(o){o.targetTouches.length!==1?this.reset():(this._lastPos=be(this.element,o.targetTouches)[0],this.move({preventDefault:()=>o.preventDefault()},this._lastPos))}touchend(o){o.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function fp(g,o,c){if(g=new n.bO(g.lng,g.lat),o){const A=new n.bO(g.lng-360,g.lat),R=new n.bO(g.lng+360,g.lat),C=360*Math.ceil(Math.abs(g.lng-c.center.lng)/360),E=c.locationPoint3D(g).distSqr(o),L=o.x<0||o.y<0||o.x>c.width||o.y>c.height;c.locationPoint3D(A).distSqr(o)<E&&(L||Math.abs(A.lng-c.center.lng)<C)?g=A:c.locationPoint3D(R).distSqr(o)<E&&(L||Math.abs(R.lng-c.center.lng)<C)&&(g=R)}for(;Math.abs(g.lng-c.center.lng)>180;){const A=c.locationPoint3D(g);if(A.x>=0&&A.y>=0&&A.x<=c.width&&A.y<=c.height)break;g.lng>c.center.lng?g.lng-=360:g.lng+=360}return g}const _l={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},Pi={anchor:"center",color:"#3FB1CE",scale:1,draggable:!1,clickTolerance:0,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto",occludedOpacity:.2,altitude:0};class jo extends n.E{constructor(o,c){super(),(o instanceof HTMLElement||c)&&(o=n.l({element:o},c)),n.aQ(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),o=n.l({},Pi,o),this._anchor=o.anchor,this._color=o.color,this._scale=o.scale,this._draggable=o.draggable,this._clickTolerance=o.clickTolerance,this._rotation=o.rotation,this._rotationAlignment=o.rotationAlignment,this._pitchAlignment=o.pitchAlignment,this._occludedOpacity=o.occludedOpacity,this._altitude=o.altitude,this._state="inactive",this._isDragging=!1,this._updateMoving=()=>this._update(!0),o&&o.element?(this._element=o.element,this._offset=n.P.convert(o&&o.offset||[0,0])):(this._defaultMarker=!0,this._element=this._createDefaultMarker(),this._offset=n.P.convert(o&&o.offset||[0,-14])),this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",C=>{C.preventDefault()}),this._element.addEventListener("mousedown",C=>{C.preventDefault()});const A=this._element.classList;for(const C in _l)A.remove(`mapboxgl-marker-anchor-${C}`);A.add(`mapboxgl-marker-anchor-${this._anchor}`);const R=o&&o.className?o.className.trim().split(/\s+/):[];A.add(...R),this._popup=null}_createDefaultMarker(){const o=H("div"),c=q("svg",{display:"block",height:41*this._scale+"px",width:27*this._scale+"px",viewBox:"0 0 27 41"},o);if(this._altitude===0){const A=q("radialGradient",{id:"shadowGradient"},q("defs",{},c));q("stop",{offset:"10%","stop-opacity":.4},A),q("stop",{offset:"100%","stop-opacity":.05},A),q("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},c)}return q("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},c),q("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},c),q("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},c),o}addTo(o){return o===this._map||(this.remove(),this._map=o,o.getCanvasContainer().appendChild(this._element),o.on("move",this._updateMoving),o.on("moveend",this._update),o.on("remove",this._clearFadeTimer),o._addMarker(this),this.setDraggable(this._draggable),this._update(),o.on("click",this._onMapClick)),this}remove(){const o=this._map;return o&&(o.off("click",this._onMapClick),o.off("move",this._updateMoving),o.off("moveend",this._update),o.off("mousedown",this._addDragHandler),o.off("touchstart",this._addDragHandler),o.off("mouseup",this._onUp),o.off("touchend",this._onUp),o.off("mousemove",this._onMove),o.off("touchmove",this._onMove),o.off("remove",this._clearFadeTimer),o._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(o){return this._lngLat=n.bO.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}setAltitude(o){return o===this._altitude||(this._defaultMarker&&(this._altitude===0&&o!==0||this._altitude!==0&&o===0)&&(this._element=this._createDefaultMarker()),this._altitude=o||Pi.altitude,this._update()),this}getAltitude(){return this._altitude}getElement(){return this._element}setPopup(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){const R=Math.sqrt(Math.pow(13.5,2)/2);o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[R,-1*(38.1-13.5+R)],"bottom-right":[-R,-1*(38.1-13.5+R)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=o,o._marker=this,o._altitude=this._altitude,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(o){const c=o.code,A=o.charCode||o.keyCode;c!=="Space"&&c!=="Enter"&&A!==32&&A!==13||this.togglePopup()}_onMapClick(o){const c=o.originalEvent.target,A=this._element;this._popup&&(c===A||A.contains(c))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const o=this._popup;return o?(o.isOpen()?(o.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(o.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const o=this._map,c=this._pos;if(!o||!c)return!1;const A=o.unproject(c,this._altitude),R=o.getFreeCameraOptions();if(!R.position)return!1;const C=R.position.toLngLat();return C.distanceTo(A)<.9*C.distanceTo(this._lngLat)}_evaluateOpacity(){const o=this._map;if(!o)return;const c=this._pos;if(!c||c.x<0||c.x>o.transform.width||c.y<0||c.y>o.transform.height)return void this._clearFadeTimer();const A=o.unproject(c,this._altitude);let R;o._showingGlobe()&&n.dK(o.transform,this._lngLat)?R=0:(R=1-o._queryFogOpacity(A),o.transform._terrainEnabled()&&o.getTerrain()&&this._behindTerrain()&&(R*=this._occludedOpacity)),this._element.style.opacity=`${R}`,this._element.style.pointerEvents=R>0?"auto":"none",this._popup&&this._popup._setOpacity(R),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const o=this._pos;if(!o||!this._map)return;const c=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${o.x}px,${o.y}px)
            ${_l[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${c.x}px,${c.y}px)
        `}_calculateXYTransform(){const o=this._pos,c=this._map,A=this.getPitchAlignment();if(!c||!o||A!=="map")return"";if(!c._showingGlobe()){const j=c.getPitch();return j?`rotateX(${j}deg)`:""}const R=n.c4(n.dL(c.transform,this._lngLat)),C=o.sub(n.dM(c.transform)),E=Math.abs(C.x)+Math.abs(C.y);if(E===0)return"";const L=R/E;return`rotateX(${-C.y*L}deg) rotateY(${C.x*L}deg)`}_calculateZTransform(){const o=this._pos,c=this._map;if(!c||!o)return"";let A=0;const R=this.getRotationAlignment();if(R==="map")if(c._showingGlobe()){const C=c.project(new n.bO(this._lngLat.lng,this._lngLat.lat+.001),this._altitude),E=c.project(new n.bO(this._lngLat.lng,this._lngLat.lat-.001),this._altitude).sub(C);A=n.c4(Math.atan2(E.y,E.x))-90}else A=-c.getBearing();else if(R==="horizon"){const C=n.ae(4,6,c.getZoom()),E=n.dM(c.transform);E.y+=C*c.transform.height;const L=o.sub(E),j=n.c4(Math.atan2(L.y,L.x));A=(j>90?j-270:j+90)*(1-C)}return A+=this._rotation,A?`rotateZ(${A}deg)`:""}_update(o){cancelAnimationFrame(this._updateFrameId);const c=this._map;c&&(c.transform.renderWorldCopies&&(this._lngLat=fp(this._lngLat,this._pos,c.transform)),this._pos=c.project(this._lngLat,this._altitude),o===!0?this._updateFrameId=requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),c._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(c._showingGlobe()||c.getTerrain()||c.getFog())&&!this._fadeTimer&&(this._fadeTimer=window.setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(o){return this._offset=n.P.convert(o),this._update(),this}addClassName(o){return this._element.classList.add(o),this}removeClassName(o){return this._element.classList.remove(o),this}toggleClassName(o){return this._element.classList.toggle(o)}_onMove(o){const c=this._map;if(!c)return;const A=this._pointerdownPos,R=this._positionDelta;if(A&&R){if(!this._isDragging){const C=this._clickTolerance||c._clickTolerance;if(o.point.dist(A)<C)return;this._isDragging=!0}this._pos=o.point.sub(R),this._lngLat=c.unproject(this._pos,this._altitude),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new n.A("dragstart"))),this.fire(new n.A("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const o=this._map;o&&(o.off("mousemove",this._onMove),o.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new n.A("dragend")),this._state="inactive"}_addDragHandler(o){const c=this._map,A=this._pos;c&&A&&this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(A),this._pointerdownPos=o.point,this._state="pending",c.on("mousemove",this._onMove),c.on("touchmove",this._onMove),c.once("mouseup",this._onUp),c.once("touchend",this._onUp))}setDraggable(o){this._draggable=!!o;const c=this._map;return c&&(o?(c.on("mousedown",this._addDragHandler),c.on("touchstart",this._addDragHandler)):(c.off("mousedown",this._addDragHandler),c.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(o){return this._rotation=o||Pi.rotation,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(o){return this._rotationAlignment=o||Pi.rotationAlignment,this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(o){return this._pitchAlignment=o||Pi.pitchAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(o){return this._occludedOpacity=o||Pi.occludedOpacity,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Ou={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Ri={maxWidth:100,unit:"metric"},qy={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},Du={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",altitude:0},mA=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Wh(g=new n.P(0,0),o="bottom"){if(typeof g=="number"){const c=Math.round(Math.sqrt(.5*Math.pow(g,2)));switch(o){case"top":return new n.P(0,g);case"top-left":return new n.P(c,c);case"top-right":return new n.P(-c,c);case"bottom":return new n.P(0,-g);case"bottom-left":return new n.P(c,-c);case"bottom-right":return new n.P(-c,-c);case"left":return new n.P(g,0);case"right":return new n.P(-g,0)}return new n.P(0,0)}return g instanceof n.P||Array.isArray(g)?n.P.convert(g):n.P.convert(g[o]||[0,0])}return{version:w,supported:Z.supported,setRTLTextPlugin:n.dN,getRTLTextPluginStatus:n.dO,Map:class extends dp{constructor(g){P.mark(T.create);const o=g;if((g=n.l({},Kh,g)).minZoom!=null&&g.maxZoom!=null&&g.minZoom>g.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(g.minPitch!=null&&g.maxPitch!=null&&g.minPitch>g.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(g.minPitch!=null&&g.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(g.maxPitch!=null&&g.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(g.antialias&&n.dI(window)&&(g.antialias=!1,n.w("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Pd(g.minZoom,g.maxZoom,g.minPitch,g.maxPitch,g.renderWorldCopies,null,null),g),this._repaint=!!g.repaint,this._interactive=g.interactive,this._minTileCacheSize=g.minTileCacheSize,this._maxTileCacheSize=g.maxTileCacheSize,this._failIfMajorPerformanceCaveat=g.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=g.preserveDrawingBuffer,this._antialias=g.antialias,this._trackResize=g.trackResize,this._bearingSnap=g.bearingSnap,this._refreshExpiredTiles=g.refreshExpiredTiles,this._fadeDuration=g.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=g.crossSourceCollisions,this._collectResourceTiming=g.collectResourceTiming,this._language=this._parseLanguage(g.language),this._worldview=g.worldview,this._renderTaskQueue=new Xu,this._domRenderTaskQueue=new Xu,this._controls=[],this._markers=[],this._popups=[],this._mapId=n.aW(),this._locale=n.l({},Sc,g.locale),this._clickTolerance=g.clickTolerance,this._cooperativeGestures=g.cooperativeGestures,this._performanceMetricsCollection=g.performanceMetricsCollection,this._tessellationStep=g.tessellationStep,this._containerWidth=0,this._containerHeight=0,this._showParseStatus=!0,this._precompilePrograms=g.precompilePrograms,this._scaleFactorChanged=!1,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new hp(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._frameId=0,this._scaleFactor=g.scaleFactor,this._requestManager=new ze(g.transformRequest,g.accessToken,g.testMode),this._silenceAuthErrors=!!g.testMode,this._contextCreateOptions=g.contextCreateOptions?Object.assign({},g.contextCreateOptions):{},typeof g.container=="string"){const c=document.getElementById(g.container);if(!c)throw new Error(`Container '${g.container.toString()}' not found.`);this._container=c}else{if(!(g.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=g.container}if(this._container.childNodes.length>0&&n.w("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),g.maxBounds&&this.setMaxBounds(g.maxBounds),this._spriteFormat=g.spriteFormat,n.aQ(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._tp||(this._tp=new Vu),this._tp.registerParameter(this,["Debug"],"showOverdrawInspector"),this._tp.registerParameter(this,["Debug"],"showTileBoundaries"),this._tp.registerParameter(this,["Debug"],"showParseStatus"),this._tp.registerParameter(this,["Debug"],"repaint"),this._tp.registerParameter(this,["Debug"],"showTileAABBs"),this._tp.registerParameter(this,["Debug"],"showPadding"),this._tp.registerParameter(this,["Debug"],"showCollisionBoxes",{noSave:!0}),this._tp.registerParameter(this.transform,["Debug"],"freezeTileCoverage",{noSave:!0},()=>{this._update()}),this._tp.registerParameter(this,["Debug","Wireframe"],"showTerrainWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers2DWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers3DWireframe"),this._tp.registerParameter(this,["Scaling"],"_scaleFactor",{min:.1,max:10,step:.1},()=>{this.setScaleFactor(this._scaleFactor)}),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new rm(this,g),this._localFontFamily=g.localFontFamily,this._localIdeographFontFamily=g.localIdeographFontFamily,(g.style||!g.testMode)&&this.setStyle(g.style||n.e.DEFAULT_STYLE,{config:g.config,localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),g.projection&&this.setProjection(g.projection),this.indoor=new Ic(this),g.hash&&(this._hash=new ky(typeof g.hash=="string"&&g.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){o.center==null&&o.zoom==null||(this.transform._unmodified=!1),this.jumpTo({center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch});const c=g.bounds;c&&(this.resize(),this.fitBounds(c,n.l({},g.fitBoundsOptions,{duration:0})))}this.resize(),g.attributionControl&&this.addControl(new Vf({customAttribution:g.customAttribution})),this._logoControl=new Go,this.addControl(this._logoControl,g.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this._postStyleLoadEvent()}),this.on("data",c=>{this._update(c.dataType==="style"),this.fire(new n.A(`${c.dataType}data`,c))}),this.on("dataloading",c=>{this.fire(new n.A(`${c.dataType}dataloading`,c))}),this._interactions=new Zy(this)}_getMapId(){return this._mapId}addControl(g,o){if(o===void 0&&(o=g.getDefaultPosition?g.getDefaultPosition():"top-right"),!g||!g.onAdd)return this.fire(new n.z(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=g.onAdd(this);this._controls.push(g);const A=this._controlPositions[o];return o.indexOf("bottom")!==-1?A.insertBefore(c,A.firstChild):A.appendChild(c),this}removeControl(g){if(!g||!g.onRemove)return this.fire(new n.z(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const o=this._controls.indexOf(g);return o>-1&&this._controls.splice(o,1),g.onRemove(this),this}hasControl(g){return this._controls.indexOf(g)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(g){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const o=!this._moving;return o&&this.fire(new n.A("movestart",g)).fire(new n.A("move",g)),this.fire(new n.A("resize",g)),o&&this.fire(new n.A("moveend",g)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(g){return this.transform.setMaxBounds(n.aB.convert(g)),this._update()}setMinZoom(g){if((g=g??-2)>=-2&&g<=this.transform.maxZoom)return this.transform.minZoom=g,this._update(),this.getZoom()<g?this.setZoom(g):this.fire(new n.A("zoomstart")).fire(new n.A("zoom")).fire(new n.A("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(g){if((g=g??22)>=this.transform.minZoom)return this.transform.maxZoom=g,this._update(),this.getZoom()>g?this.setZoom(g):this.fire(new n.A("zoomstart")).fire(new n.A("zoom")).fire(new n.A("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(g){if((g=g??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(g>=0&&g<=this.transform.maxPitch)return this.transform.minPitch=g,this._update(),this.getPitch()<g?this.setPitch(g):this.fire(new n.A("pitchstart")).fire(new n.A("pitch")).fire(new n.A("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(g){if((g=g??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(g>=this.transform.minPitch)return this.transform.maxPitch=g,this._update(),this.getPitch()>g?this.setPitch(g):this.fire(new n.A("pitchstart")).fire(new n.A("pitch")).fire(new n.A("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getScaleFactor(){return this._scaleFactor}setScaleFactor(g){return this._scaleFactor=g,this.painter.scaleFactor=g,this._tp.refreshUI(),this._scaleFactorChanged=!0,this.style._updateFilteredLayers(o=>o.type==="symbol"),this._update(!0),this}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(g){return this.transform.renderWorldCopies=g,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(g){return g==="auto"?navigator.language:Array.isArray(g)?g.length===0?void 0:g.map(o=>o==="auto"?navigator.language:o):g}setLanguage(g){const o=this._parseLanguage(g);if(!this.style||o===this._language)return this;this._language=o,this.style.reloadSources();for(const c of this._controls)c._setLanguage&&c._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(g){return this.style&&g!==this._worldview?(this._worldview=g,this.style.reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(g){return this._lazyInitEmptyStyle(),g?typeof g=="string"&&(g={name:g}):g=null,this._useExplicitProjection=!!g,this._prioritizeAndUpdateProjection(g,this.style.projection)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const g=this.transform,o=g.projection.name;let c;o==="globe"&&g.zoom>=n.bY?(g.setMercatorFromTransition(),c=!0):o==="mercator"&&g.zoom<n.bY&&(g.setProjection({name:"globe"}),c=!0),c&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(g,o){return this._updateProjection(g||o||{name:"mercator"})}_updateProjection(g){let o;return o=g.name==="globe"&&this.transform.zoom>=n.bY?this.transform.setMercatorFromTransition():this.transform.setProjection(g),this.style.applyProjectionUpdate(),o&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(g,o){return this.transform.locationPoint3D(n.bO.convert(g),o)}unproject(g,o){return this.transform.pointLocation3D(n.P.convert(g),o)}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(g,o,c){const A=R=>{let C=[];if(Array.isArray(o)){const E=o.filter(L=>this.getLayer(L));C=E.length?this.queryRenderedFeatures(R,{layers:E}):[]}else C=this.queryRenderedFeatures(R,{target:o});return C};if(g==="mouseenter"||g==="mouseover"){let R=!1;return{listener:c,targets:o,delegates:{mousemove:E=>{const L=A(E.point);L.length?R||(R=!0,c.call(this,new gl(g,this,E.originalEvent,{features:L}))):R=!1},mouseout:()=>{R=!1}}}}if(g==="mouseleave"||g==="mouseout"){let R=!1;return{listener:c,targets:o,delegates:{mousemove:L=>{A(L.point).length?R=!0:R&&(R=!1,c.call(this,new gl(g,this,L.originalEvent)))},mouseout:L=>{R&&(R=!1,c.call(this,new gl(g,this,L.originalEvent)))}}}}{const R=C=>{const E=A(C.point);E.length&&(C.features=E,c.call(this,C),delete C.features)};return{listener:c,targets:o,delegates:{[g]:R}}}}on(g,o,c){if(typeof o=="function"||c===void 0)return super.on(g,o);if(typeof o=="string"&&(o=[o]),!this._areTargetsValid(o))return this;const A=this._createDelegatedListener(g,o,c);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[g]=this._delegatedListeners[g]||[],this._delegatedListeners[g].push(A);for(const R in A.delegates)this.on(R,A.delegates[R]);return this}once(g,o,c){if(typeof o=="function"||c===void 0)return super.once(g,o);if(typeof o=="string"&&(o=[o]),!this._areTargetsValid(o))return this;const A=this._createDelegatedListener(g,o,c);for(const R in A.delegates)this.once(R,A.delegates[R]);return this}off(g,o,c){if(typeof o=="function"||c===void 0)return super.off(g,o);if(typeof o=="string"&&(o=[o]),!this._areTargetsValid(o))return this;const A=this._delegatedListeners?this._delegatedListeners[g]:void 0;return A&&(R=>{for(let C=0;C<R.length;C++){const E=R[C];if(E.listener===c&&Ln(E.targets,o)){for(const L in E.delegates)this.off(L,E.delegates[L]);return R.splice(C,1),this}}})(A),this}queryRenderedFeatures(g,o){if(!this.style)return[];if(g===void 0||g instanceof n.P||Array.isArray(g)||o!==void 0||(o=g,g=void 0),g=g||[[0,0],[this.transform.width,this.transform.height]],!o){const C=this.style.queryRenderedFeatures(g,void 0,this.transform),E=this.style.queryRenderedFeatureset(g,void 0,this.transform);return C.concat(E)}let c=!0;if(o.target&&(c=this._isTargetValid(o.target),c&&!o.layers))return this.style.queryRenderedFeatureset(g,o,this.transform);let A=!0;if(o.layers&&Array.isArray(o.layers)){for(const C of o.layers)if(!this._isValidId(C)){A=!1;break}if(A&&!o.target)return this.style.queryRenderedFeatures(g,o,this.transform)}let R=[];return A&&(R=R.concat(this.style.queryRenderedFeatures(g,o,this.transform))),c&&(R=R.concat(this.style.queryRenderedFeatureset(g,o,this.transform))),R}querySourceFeatures(g,o){return!g||typeof g=="string"&&!this._isValidId(g)?[]:this.style.querySourceFeatures(g,o)}isPointOnSurface(g){const{name:o}=this.transform.projection;return o!=="globe"&&o!=="mercator"&&n.w(`${o} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(n.P.convert(g))}addInteraction(g,o){return this._interactions.add(g,o),this}removeInteraction(g){return this._interactions.remove(g),this}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(g){return this._cooperativeGestures=g,this}setStyle(g,o){return o=n.l({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},o),this.style&&g&&o.diff!==!1&&o.localFontFamily===this._localFontFamily&&o.localIdeographFontFamily===this._localIdeographFontFamily&&!o.config?(this.style._diffStyle(g,(c,A)=>{c?(n.w(`Unable to perform style diff: ${String(c.message||c.error||c)}. Rebuilding the style from scratch.`),this._updateStyle(g,o)):A&&this._update(!0)},()=>{this._postStyleLoadEvent()}),this):(this._localIdeographFontFamily=o.localIdeographFontFamily,this._localFontFamily=o.localFontFamily,this._updateStyle(g,o))}_getUIString(g){const o=this._locale[g];if(o==null)throw new Error(`Missing UI string '${g}'`);return o}_updateStyle(g,o){if(this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),g){const c=n.l({},o);o&&o.config&&(c.initialConfig=o.config,delete c.config),this.style=new eo(this,c).load(g),this.style.setEventedParent(this,{style:this.style})}return this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new eo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(n.w("There is no style added to the map."),!1)}_isValidId(g){return g==null?(this.fire(new n.z(new Error("IDs can't be empty."))),!1):!n.cs(g)||(this.fire(new n.z(new Error(`IDs can't contain special symbols: "${g}".`))),!1)}_isTargetValid(g){return"featuresetId"in g?this._isValidId("importId"in g?g.importId:g.featuresetId):"layerId"in g&&this._isValidId(g.layerId)}_areTargetsValid(g){if(Array.isArray(g)){for(const o of g)if(!this._isValidId(o))return!1;return!0}return this._isTargetValid(g)}addSource(g,o){return this._isValidId(g)?(this._lazyInitEmptyStyle(),this.style.addSource(g,o),this._update(!0)):this}isSourceLoaded(g){return!!this._isValidId(g)&&!!this.style&&this.style._isSourceCacheLoaded(g)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(g,o,c){this._lazyInitEmptyStyle(),this.style.addSourceType(g,o,c)}removeSource(g){return this._isValidId(g)?(this.style.removeSource(g),this._updateTerrain(),this._update(!0)):this}getSource(g){return this._isValidId(g)?this.style.getOwnSource(g):null}addImage(g,o,{pixelRatio:c=1,sdf:A=!1,stretchX:R,stretchY:C,content:E}={}){this._lazyInitEmptyStyle();const L=n.I.from(g);if(o instanceof HTMLImageElement||ImageBitmap&&o instanceof ImageBitmap){const{width:j,height:$,data:W}=n.q.getImageData(o);this.style.addImage(L,{data:new n.r({width:j,height:$},W),pixelRatio:c,stretchX:R,stretchY:C,content:E,sdf:A,version:0,usvg:!1})}else if(o.width===void 0||o.height===void 0)this.fire(new n.z(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:j,height:$}=o,W=o;this.style.addImage(L,{data:new n.r({width:j,height:$},new Uint8Array(W.data)),pixelRatio:c,stretchX:R,stretchY:C,content:E,sdf:A,usvg:!1,version:0,userImage:W}),W.onAdd&&W.onAdd(this,g)}}updateImage(g,o){this._lazyInitEmptyStyle();const c=n.I.from(g),A=this.style.getImage(c);if(!A)return void this.fire(new n.z(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const R=o instanceof HTMLImageElement||ImageBitmap&&o instanceof ImageBitmap?n.q.getImageData(o):o,{width:C,height:E,data:L}=R;if(C===void 0||E===void 0)return void this.fire(new n.z(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(C!==(A.usvg?A.icon.usvg_tree.width:A.data.width)||E!==(A.usvg?A.icon.usvg_tree.height:A.data.height))return void this.fire(new n.z(new Error(`The width and height of the updated image (${C}, ${E})
                must be that same as the previous version of the image
                (${A.data.width}, ${A.data.height})`)));const j=!(o instanceof HTMLImageElement||ImageBitmap&&o instanceof ImageBitmap);let $=!1;A.usvg?(A.data=new n.r({width:C,height:E},new Uint8Array(L)),A.usvg=!1,A.icon=void 0,$=!0):A.data.replace(L,j),this.style.updateImage(c,A,$)}hasImage(g){return g?!!this.style&&!!this.style.getImage(n.I.from(g)):(this.fire(new n.z(new Error("Missing required image id"))),!1)}removeImage(g){this.style.removeImage(n.I.from(g))}loadImage(g,o){n.o(this._requestManager.transformRequest(g,n.R.Image),(c,A)=>{o(c,A instanceof HTMLImageElement?n.q.getImageData(A):A)})}listImages(){return this.style.listImages().map(g=>g.name)}addModel(g,o){this._lazyInitEmptyStyle(),this.style.addModel(g,o)}hasModel(g){return g?this.style.hasModel(g):(this.fire(new n.z(new Error("Missing required model id"))),!1)}removeModel(g){this.style.removeModel(g)}listModels(){return this.style.listModels()}addLayer(g,o){return this._isValidId(g.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(g,o),this._update(!0)):this}getSlot(g){const o=this.getLayer(g);return o&&o.slot||null}setSlot(g,o){return this.style.setSlot(g,o),this.style.mergeLayers(),this._update(!0)}addImport(g,o){return this.style.addImport(g,o),this}updateImport(g,o){return typeof o!="string"&&o.id!==g?(this.removeImport(g),this.addImport(o)):(this.style.updateImport(g,o),this._update(!0))}removeImport(g){return this.style.removeImport(g),this}moveImport(g,o){return this.style.moveImport(g,o),this._update(!0)}moveLayer(g,o){return this._isValidId(g)?(this.style.moveLayer(g,o),this._update(!0)):this}removeLayer(g){return this._isValidId(g)?(this.style.removeLayer(g),this._update(!0)):this}getLayer(g){if(!this._isValidId(g))return null;const o=this.style.getOwnLayer(g);return o?o.type==="custom"?o.implementation:o.serialize():void 0}getSlots(){return this.style.getSlots()}setLayerZoomRange(g,o,c){return this._isValidId(g)?(this.style.setLayerZoomRange(g,o,c),this._update(!0)):this}setFilter(g,o,c={}){return this._isValidId(g)?(this.style.setFilter(g,o,c),this._update(!0)):this}getFilter(g){return this._isValidId(g)?this.style.getFilter(g):null}setPaintProperty(g,o,c,A={}){return this._isValidId(g)?(this.style.setPaintProperty(g,o,c,A),this._update(!0)):this}getPaintProperty(g,o){return this._isValidId(g)?this.style.getPaintProperty(g,o):null}setLayoutProperty(g,o,c,A={}){return this._isValidId(g)?(this.style.setLayoutProperty(g,o,c,A),this._update(!0)):this}getLayoutProperty(g,o){return this._isValidId(g)?this.style.getLayoutProperty(g,o):null}getGlyphsUrl(){return this.style.getGlyphsUrl()}setGlyphsUrl(g){return this.style.setGlyphsUrl(g),this._update(!0)}getSchema(g){return this.style.getSchema(g)}setSchema(g,o){return this.style.setSchema(g,o),this._update(!0)}getConfig(g){return this.style.getConfig(g)}setConfig(g,o){return this.style.setConfig(g,o),this._update(!0)}getConfigProperty(g,o){return this.style.getConfigProperty(g,o)}setConfigProperty(g,o,c){return this.style.setConfigProperty(g,o,c),this._update(!0)}getFeaturesetDescriptors(g){return this.style.getFeaturesetDescriptors(g)}setLights(g){if(this._lazyInitEmptyStyle(),g&&g.length===1&&g[0].type==="flat"){const o=g[0];o.properties?this.style.setFlatLight(o.properties,o.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(g),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){const g=this.style.getLights()||[];return g.length===0&&g.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),g}setLight(g,o={}){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:g}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(g){return this._lazyInitEmptyStyle(),!g&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(g),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(g){return this._lazyInitEmptyStyle(),this.style.setFog(g),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setSnow(g){return this._lazyInitEmptyStyle(),this.style.setSnow(g),this._update(!0)}getSnow(){return this.style?this.style.getSnow():null}setRain(g){return this._lazyInitEmptyStyle(),this.style.setRain(g),this._update(!0)}getRain(){return this.style?this.style.getRain():null}setColorTheme(g){return this._lazyInitEmptyStyle(),this.style.setColorTheme(g),this._update(!0)}setImportColorTheme(g,o){return this._lazyInitEmptyStyle(),this.style.setImportColorTheme(g,o),this._update(!0)}setCamera(g){return this.style.setCamera(g),this._triggerCameraUpdate(g)}_triggerCameraUpdate(g){return this._update(this.transform.setOrthographicProjectionAtLowPitch(g["camera-projection"]==="orthographic"))}getCamera(){return this.style.camera}_queryFogOpacity(g){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(n.bO.convert(g),this.transform):0}setFeatureState(g,o){return g.source&&!this._isValidId(g.source)?this:(this.style.setFeatureState(g,o),this._update())}removeFeatureState(g,o){return g.source&&!this._isValidId(g.source)?this:(this.style.removeFeatureState(g,o),this._update())}getFeatureState(g){return g.source&&!this._isValidId(g.source)?null:this.style.getFeatureState(g)}_updateContainerDimensions(){if(!this._container)return;const g=this._container.getBoundingClientRect().width||400,o=this._container.getBoundingClientRect().height||300;let c,A,R,C=this._container;for(;C&&(!A||!R);){const E=window.getComputedStyle(C).transform;E&&E!=="none"&&(c=E.match(/matrix.*\((.+)\)/)[1].split(", "),c[0]&&c[0]!=="0"&&c[0]!=="1"&&(A=c[0]),c[3]&&c[3]!=="0"&&c[3]!=="1"&&(R=c[3])),C=C.parentElement}this._containerWidth=A?Math.abs(g/A):g,this._containerHeight=R?Math.abs(o/R):o}_detectMissingCSS(){window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&n.w("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const g=this._container;g.classList.add("mapboxgl-map"),(this._missingCSSCanary=H("div","mapboxgl-canary",g)).style.visibility="hidden",this._detectMissingCSS();const o=this._canvasContainer=H("div","mapboxgl-canvas-container",g);this._canvas=H("canvas","mapboxgl-canvas",o),this._interactive&&(o.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const c=this._controlContainer=H("div","mapboxgl-control-container",g),A=this._controlPositions={};["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"].forEach(R=>{A[R]=H("div",`mapboxgl-ctrl-${R}`,c)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(g,o){const c=n.q.devicePixelRatio||1;this._canvas.width=c*Math.ceil(g),this._canvas.height=c*Math.ceil(o),this._canvas.style.width=`${g}px`,this._canvas.style.height=`${o}px`}_addMarker(g){this._markers.push(g)}_removeMarker(g){const o=this._markers.indexOf(g);o!==-1&&this._markers.splice(o,1)}_addPopup(g){this._popups.push(g)}_removePopup(g){const o=this._popups.indexOf(g);o!==-1&&this._popups.splice(o,1)}_setupPainter(){const g=n.l({},Z.supported.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),o=this._canvas.getContext("webgl2",g);o?(Gt(o,!0),this.painter=new Xp(o,this._contextCreateOptions,this.transform,this._scaleFactor,this._tp),this.on("data",c=>{c.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),n.m.testSupport(o)):this.fire(new n.z(new Error("Failed to initialize WebGL")))}_contextLost(g){g.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new n.A("webglcontextlost",{originalEvent:g}))}_contextRestored(g){this._setupPainter(),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight)),this._updateTerrain(),this.style.reloadModels(),this.style.clearSources(),this._update(),this.fire(new n.A("webglcontextrestored",{originalEvent:g}))}_onMapScroll(g){if(g.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}idle(){return!this.isMoving()&&this.loaded()}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}frameReady(){return this.loaded()&&!this._placementDirty}_update(g){return this.style?(this._styleDirty=this._styleDirty||g,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(g){return this._update(),this._renderTaskQueue.add(g)}_cancelRenderFrame(g){this._renderTaskQueue.remove(g)}_requestDomTask(g){!this.loaded()||this.loaded()&&!this.isMoving()?g():this._domRenderTaskQueue.add(g)}_render(g){let o;this.fire(new n.A("renderstart")),++this._frameId;const c=this.painter.context.extTimerQuery,A=n.q.now(),R=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(o=R.createQuery(),R.beginQuery(c.TIME_ELAPSED_EXT,o)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(g),this._domRenderTaskQueue.run(g),this._removed)return;this._updateProjectionTransition();const C=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const $=this.transform.zoom,W=this.transform.pitch,te=n.q.now(),ae=new n.aa($,{now:te,fadeDuration:C,pitch:W,transition:this.style.transition});this.style.update(ae)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let E=!1;this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),E=this._updateAverageElevation(A),this.style.updateSources(this.transform),this.isMoving()||this._forceMarkerAndPopupUpdate()):E=this._updateAverageElevation(A);const L=this.style&&this.style._updatePlacement(this.painter,this.painter.transform,this.showCollisionBoxes,C,this._crossSourceCollisions,this.painter.replacementSource,this._scaleFactorChanged);if(this._scaleFactorChanged&&(this._scaleFactorChanged=!1),L&&(this._placementDirty=L.needsRerender),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showParseStatus:this.showParseStatus,wireframe:{terrain:this.showTerrainWireframe,layers2D:this.showLayers2DWireframe,layers3D:this.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:C,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new n.A("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,P.mark(T.load),this.fire(new n.A("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&(this.style.snow||this.style.rain)&&(this._styleDirty=!0),this.style&&this.style.imageManager.hasPatternsInFlight()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),o){const $=n.q.now()-A;R.endQuery(c.TIME_ELAPSED_EXT),setTimeout(()=>{const W=R.getQueryParameter(o,R.QUERY_RESULT)/1e6;R.deleteQuery(o),this.fire(new n.A("gpu-timing-frame",{cpuTime:$,gpuTime:W}))},50)}if(this.listens("gpu-timing-layer")){const $=this.painter.collectGpuTimers();setTimeout(()=>{const W=this.painter.queryGpuTimers($);this.fire(new n.A("gpu-timing-layer",{layerTimes:W}))},50)}if(this.listens("gpu-timing-deferred-render")){const $=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const W=this.painter.queryGpuTimeDeferredRender($);this.fire(new n.A("gpu-timing-deferred-render",{gpuTime:W}))},50)}const j=this._sourcesDirty||this._styleDirty||this._placementDirty||E;if(j||this._repaint)this.triggerRepaint();else{const $=this.idle();if($&&(E=this._updateAverageElevation(A,!0)),E)this.triggerRepaint();else if(this._triggerFrame(!1),$&&(this.fire(new n.A("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const W=this._calculateSpeedIndex();this.fire(new n.A("speedindexcompleted",{speedIndex:W})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||j||(this._fullyLoaded=!0,P.mark(T.fullLoad),this._performanceMetricsCollection&&Rt(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(g){for(const o of this._markers)g&&!this.getRenderWorldCopies()&&(o._lngLat=o._lngLat.wrap()),o._update();for(const o of this._popups)!g||this.getRenderWorldCopies()||o._trackPointer||(o._lngLat=o._lngLat.wrap()),o._update()}_updateAverageElevation(g,o=!1){const c=R=>(this.transform.averageElevation=R,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&c(0);const A=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(A||(o||g-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(g)){const R=this.transform.averageElevation;let C=this.transform.sampleAverageElevation();this.transform.elevation!=null&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(C)?C=0:this._averageElevationLastSampledAt=g;const E=Math.abs(R-C);if(E>1){if(this._isInitialLoad||A)return this._averageElevation.jumpTo(C),c(C);this._averageElevation.easeTo(C,g,300)}else if(E>1e-4)return this._averageElevation.jumpTo(C),c(C)}return!!this._averageElevation.isEasing(g)&&c(this._averageElevation.getValue(g))}_authenticate(){Ae(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,g=>{if(g&&(g.message===Me||g.status===401)){const o=this.painter.context.gl;Gt(o,!1),this._logoControl instanceof Go&&this._logoControl._updateLogo(),o&&o.clear(o.DEPTH_BUFFER_BIT|o.COLOR_BUFFER_BIT|o.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new n.z(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),$e(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_postStyleLoadEvent(){this.style.globalId&&ft(this._requestManager._customAccessToken,{map:this,style:this.style.globalId,importedStyles:this.style.getImportGlobalIds()})}_updateTerrain(){const g=this._isDragging();this.painter.updateTerrain(this.style,g)}_calculateSpeedIndex(){const g=this.painter.canvasCopy(),o=this.painter.getCanvasCopiesAndTimestamps();o.timeStamps.push(performance.now());const c=this.painter.context.gl,A=c.createFramebuffer();function R(C){c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,C,0);const E=new Uint8Array(c.drawingBufferWidth*c.drawingBufferHeight*4);return c.readPixels(0,0,c.drawingBufferWidth,c.drawingBufferHeight,c.RGBA,c.UNSIGNED_BYTE,E),E}return c.bindFramebuffer(c.FRAMEBUFFER,A),this._canvasPixelComparison(R(g),o.canvasCopies.map(R),o.timeStamps)}_canvasPixelComparison(g,o,c){let A=c[1]-c[0];const R=g.length/4;for(let C=0;C<o.length;C++){const E=o[C];let L=0;for(let j=0;j<E.length;j+=4)E[j]===g[j]&&E[j+1]===g[j+1]&&E[j+2]===g[j+2]&&E[j+3]===g[j+3]&&(L+=1);A+=(c[C+2]-c[C+1])*(1-L/R)}return A}remove(){this._hash&&this._hash.remove();for(const o of this._controls)o.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.indoor.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);const g=this.painter.context.gl.getExtension("WEBGL_lose_context");g&&g.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),qt.delete(this.painter.context.gl),We.remove(),Se.remove(),this._removed=!0,this.fire(new n.A("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(g){this._renderNextFrame=this._renderNextFrame||g,this.style&&!this._frame&&(this._frame=n.q.frame(o=>{const c=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,c&&this._render(o)}))}_preloadTiles(g){const o=this.style?this.style.getSourceCaches():[];return n.bl(o,(c,A)=>c._preloadTiles(g,A),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(g){this._trackResize&&this.resize({originalEvent:g})._update()}_onVisibilityChange(){document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(g){this._showTileBoundaries!==g&&(this._showTileBoundaries=g,this._tp.refreshUI(),this._update())}get showParseStatus(){return!!this._showParseStatus}set showParseStatus(g){this._showParseStatus!==g&&(this._showParseStatus=g,this._tp.refreshUI(),this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(g){this._showTerrainWireframe!==g&&(this._showTerrainWireframe=g,this._tp.refreshUI(),this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(g){this._showLayers2DWireframe!==g&&(this._showLayers2DWireframe=g,this._tp.refreshUI(),this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(g){this._showLayers3DWireframe!==g&&(this._showLayers3DWireframe=g,this._tp.refreshUI(),this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(g){this._speedIndexTiming!==g&&(this._speedIndexTiming=g,this._update())}get showPadding(){return!!this._showPadding}set showPadding(g){this._showPadding!==g&&(this._showPadding=g,this._tp.refreshUI(),this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(g){this._showCollisionBoxes!==g&&(this._showCollisionBoxes=g,this._tp.refreshUI(),g?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(g){this._showOverdrawInspector!==g&&(this._showOverdrawInspector=g,this._tp.refreshUI(),this._update())}get repaint(){return!!this._repaint}set repaint(g){this._repaint!==g&&(this._repaint=g,this._tp.refreshUI(),this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(g){this._vertices=g,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(g){this._showTileAABBs!==g&&(this._showTileAABBs=g,this._tp.refreshUI(),g&&this._update())}_setCacheLimits(g,o){n.dJ(g,o)}get version(){return w}},NavigationControl:class{constructor(g={}){this.options=n.l({},fA,g),this._container=H("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",o=>o.preventDefault()),this.options.showZoom&&(n.aQ(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",o=>{this._map&&this._map.zoomIn({},{originalEvent:o})}),H("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",o=>{this._map&&this._map.zoomOut({},{originalEvent:o})}),H("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(n.aQ(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",o=>{const c=this._map;c&&(this.options.visualizePitch?c.resetNorthPitch({},{originalEvent:o}):c.resetNorth({},{originalEvent:o}))}),this._compassIcon=H("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const g=this._map;if(!g)return;const o=g.getZoom(),c=o===g.getMaxZoom(),A=o===g.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=A,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",A.toString())}_rotateCompassArrow(){const g=this._map;if(!g)return;const o=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(g.transform.pitch*(Math.PI/180)),.5)}) rotateX(${g.transform.pitch}deg) rotateZ(${g.transform.angle*(180/Math.PI)}deg)`:`rotate(${g.transform.angle*(180/Math.PI)}deg)`;g._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=o)})}onAdd(g){return this._map=g,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),g.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&g.on("pitch",this._rotateCompassArrow),g.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new pA(g,this._compass,this.options.visualizePitch)),this._container}onRemove(){const g=this._map;g&&(this._container.remove(),this.options.showZoom&&g.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&g.off("pitch",this._rotateCompassArrow),g.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(g,o){const c=H("button",g,this._container);return c.type="button",c.addEventListener("click",o),c}_setButtonTitle(g,o){if(!this._map)return;const c=this._map._getUIString(`NavigationControl.${o}`);g.setAttribute("aria-label",c),g.firstElementChild&&g.firstElementChild.setAttribute("title",c)}},GeolocateControl:class extends n.E{constructor(g={}){super();const o=navigator.geolocation;this.options=n.l({geolocation:o},Ou,g),n.aQ(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Ym(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(g){return this._map=g,this._container=H("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(g){const o=(c=!!this.options.geolocation)=>{this._supportsGeolocation=c,g(c)};this._supportsGeolocation!==void 0?g(this._supportsGeolocation):navigator.permissions!==void 0?navigator.permissions.query({name:"geolocation"}).then(c=>o(c.state!=="denied")).catch(()=>o()):o()}_isOutOfMapMaxBounds(g){const o=this._map.getMaxBounds(),c=g.coords;return!!o&&(c.longitude<o.getWest()||c.longitude>o.getEast()||c.latitude<o.getSouth()||c.latitude>o.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(g){if(this._map){if(this._isOutOfMapMaxBounds(g))return this._setErrorState(),this.fire(new n.A("outofmaxbounds",g)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=g,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(g),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(g),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new n.A("geolocate",g)),this._finish()}}_updateCamera(g){const o=new n.bO(g.coords.longitude,g.coords.latitude),c=g.coords.accuracy,A=this._map.getBearing(),R=n.l({bearing:A},this.options.fitBoundsOptions);this._map.fitBounds(o.toBounds(c),R,{geolocateSource:!0})}_updateMarker(g){if(g){const o=new n.bO(g.coords.longitude,g.coords.latitude);this._accuracyCircleMarker.setLngLat(o).addTo(this._map),this._userLocationDotMarker.setLngLat(o).addTo(this._map),this._accuracy=g.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const g=this._map.transform,o=n.bH(1,g._center.lat)*g.worldSize,c=Math.ceil(2*this._accuracy*o);this._circleElement.style.width=`${c}px`,this._circleElement.style.height=`${c}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(g){if(this._map){if(this.options.trackUserLocation)if(g.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(g.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new n.A("error",g)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(g){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",o=>o.preventDefault()),this._geolocateButton=H("button","mapboxgl-ctrl-geolocate",this._container),H("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",g===!1){n.w("Geolocation support is not available so the GeolocateControl will be disabled.");const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o)}else{const o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=H("div","mapboxgl-user-location"),this._dotElement.appendChild(H("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(H("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new jo({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=H("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new jo({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",o=>{o.geolocateSource||this._watchState!=="ACTIVE_LOCK"||o.originalEvent&&o.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new n.A("trackuserlocationend")))})}}_onDeviceOrientation(g){this._userLocationDotMarker&&(g.webkitCompassHeading?this._heading=g.webkitCompassHeading:g.absolute===!0&&(this._heading=-1*g.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return n.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new n.A("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new n.A("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new n.A("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let g;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(g={maximumAge:6e5,timeout:0},this._noTimeout=!0):(g=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,g),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=window.setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const g=()=>{"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",this._onDeviceOrientation):window.addEventListener("deviceorientation",this._onDeviceOrientation)};typeof DeviceMotionEvent<"u"&&typeof DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(o=>{o==="granted"&&g()}).catch(console.error):g()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Vf,ScaleControl:class{constructor(g={}){this.options=n.l({},Ri,g),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),n.aQ(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const g=this.options.maxWidth||100,o=this._map,c=o._containerHeight/2,A=o._containerWidth/2-g/2,R=o.unproject([A,c]),C=o.unproject([A+g,c]),E=R.distanceTo(C);if(this.options.unit==="imperial"){const L=3.2808*E;L>5280?this._setScale(g,L/5280,"mile"):this._setScale(g,L,"foot")}else this.options.unit==="nautical"?this._setScale(g,E/1852,"nautical-mile"):E>=1e3?this._setScale(g,E/1e3,"kilometer"):this._setScale(g,E,"meter")}_setScale(g,o,c){this._map._requestDomTask(()=>{const A=function(C){const E=Math.pow(10,`${Math.floor(C)}`.length-1);let L=C/E;return L=L>=10?10:L>=5?5:L>=3?3:L>=2?2:L>=1?1:function(j){const $=Math.pow(10,Math.ceil(-Math.log(j)/Math.LN10));return Math.round(j*$)/$}(L),E*L}(o),R=A/o;this._container.innerHTML=this._isNumberFormatSupported&&c!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:c}).format(A):`${A}&nbsp;${qy[c]}`,this._container.style.width=g*R+"px"})}onAdd(g){return this._map=g,this._language=g.getLanguage(),this._container=H("div","mapboxgl-ctrl mapboxgl-ctrl-scale",g.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(g){this._language=g,this._update()}setUnit(g){this.options.unit=g,this._update()}},FullscreenControl:class{constructor(g={}){this._fullscreen=!1,g&&g.container&&(g.container instanceof HTMLElement?this._container=g.container:n.w("Full screen control 'container' must be a DOM element.")),n.aQ(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(g){return this._map=g,this._container||(this._container=this._map.getContainer()),this._controlContainer=H("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",n.w("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){const g=this._fullscreenButton=H("button","mapboxgl-ctrl-fullscreen",this._controlContainer);H("span","mapboxgl-ctrl-icon",g).setAttribute("aria-hidden","true"),g.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const g=this._getTitle();this._fullscreenButton.setAttribute("aria-label",g),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",g)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends n.E{constructor(g){super(),this.options=n.l(Object.create(Du),g),this._altitude=this.options.altitude,n.aQ(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(g&&g.className?g.className.trim().split(/\s+/):[])}addTo(g){return this._map&&this.remove(),this._map=g,this.options.closeOnClick&&g.on("preclick",this._onClose),this.options.closeOnMove&&g.on("move",this._onClose),g.on("remove",this.remove),this._update(),g._addPopup(this),this._focusFirstElement(),this._trackPointer?(g.on("mousemove",this._onMouseEvent),g.on("mouseup",this._onMouseEvent),g._canvasContainer.classList.add("mapboxgl-track-pointer")):g.on("move",this._update),this.fire(new n.A("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const g=this._map;return g&&(g.off("move",this._update),g.off("move",this._onClose),g.off("preclick",this._onClose),g.off("click",this._onClose),g.off("remove",this.remove),g.off("mousemove",this._onMouseEvent),g.off("mouseup",this._onMouseEvent),g.off("drag",this._onMouseEvent),g._canvasContainer&&g._canvasContainer.classList.remove("mapboxgl-track-pointer"),g._removePopup(this),this._map=void 0),this.fire(new n.A("close")),this}getLngLat(){return this._lngLat}setLngLat(g){this._lngLat=n.bO.convert(g),this._pos=null,this._trackPointer=!1,this._update();const o=this._map;return o&&(o.on("move",this._update),o.off("mousemove",this._onMouseEvent),o._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}getAltitude(){return this._altitude}setAltitude(g){return this._altitude=g,this._update(),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const g=this._map;return g&&(g.off("move",this._update),g.on("mousemove",this._onMouseEvent),g.on("drag",this._onMouseEvent),g._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(g){return this.setDOMContent(document.createTextNode(g))}setHTML(g){const o=document.createDocumentFragment(),c=document.createElement("body");let A;for(c.innerHTML=g;A=c.firstChild,A;)o.appendChild(A);return this.setDOMContent(o)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(g){return this.options.maxWidth=g,this._update(),this}setDOMContent(g){let o=this._content;if(o)for(;o.hasChildNodes();)o.firstChild&&o.removeChild(o.firstChild);else o=this._content=H("div","mapboxgl-popup-content",this._container||void 0);if(o.appendChild(g),this.options.closeButton){const c=this._closeButton=H("button","mapboxgl-popup-close-button",o);c.type="button",c.setAttribute("aria-label","Close popup"),c.innerHTML='<span aria-hidden="true">&#215;</span>',c.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(g){return this._classList.add(g),this._updateClassList(),this}removeClassName(g){return this._classList.delete(g),this._updateClassList(),this}setOffset(g){return this.options.offset=g,this._update(),this}toggleClassName(g){let o;return this._classList.delete(g)?o=!1:(this._classList.add(g),o=!0),this._updateClassList(),o}_onMouseEvent(g){this._update(g.point)}_getAnchor(g){if(this.options.anchor)return this.options.anchor;const o=this._map,c=this._container,A=this._pos;if(!o||!c||!A)return"bottom";const R=c.offsetWidth,C=c.offsetHeight,E=A.x<R/2,L=A.x>o.transform.width-R/2;if(A.y+g<C)return E?"top-left":L?"top-right":"top";if(A.y>o.transform.height-C){if(E)return"bottom-left";if(L)return"bottom-right"}return E?"left":L?"right":"bottom"}_updateClassList(){const g=this._container;if(!g)return;const o=[...this._classList];o.push("mapboxgl-popup"),this._anchor&&o.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&o.push("mapboxgl-popup-track-pointer"),g.className=o.join(" ")}_update(g){const o=this._map,c=this._content;if(!o||!this._lngLat&&!this._trackPointer||!c)return;let A=this._container;if(A||(A=this._container=H("div","mapboxgl-popup",o.getContainer()),this._tip=H("div","mapboxgl-popup-tip",A),A.appendChild(c)),this.options.maxWidth&&A.style.maxWidth!==this.options.maxWidth&&(A.style.maxWidth=this.options.maxWidth),o.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=fp(this._lngLat,this._pos,o.transform)),!this._trackPointer||g){const R=this._pos=this._trackPointer&&g instanceof n.P?g:o.project(this._lngLat,this._altitude),C=Wh(this.options.offset),E=this._anchor=this._getAnchor(C.y),L=Wh(this.options.offset,E),j=R.add(L).round();o._requestDomTask(()=>{this._container&&E&&(this._container.style.transform=`${_l[E]} translate(${j.x}px,${j.y}px)`)})}if(!this._marker&&o._showingGlobe()){const R=n.dK(o.transform,this._lngLat)?0:1;this._setOpacity(R)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const g=this._container.querySelector(mA);g&&g.focus()}_onClose(){this.remove()}_setOpacity(g){this._container&&(this._container.style.opacity=`${g}`),this._content&&(this._content.style.pointerEvents=g?"auto":"none")}},Marker:jo,Style:eo,LngLat:n.bO,LngLatBounds:n.aB,Point:n.P,MercatorCoordinate:n.ac,FreeCameraOptions:xd,Evented:n.E,config:n.e,prewarm:n.dP,clearPrewarmedResources:n.dQ,get accessToken(){return n.e.ACCESS_TOKEN},set accessToken(g){n.e.ACCESS_TOKEN=g},get baseApiUrl(){return n.e.API_URL},set baseApiUrl(g){n.e.API_URL=g},get workerCount(){return n.dR.workerCount},set workerCount(g){n.dR.workerCount=g},get maxParallelImageRequests(){return n.e.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(g){n.e.MAX_PARALLEL_IMAGE_REQUESTS=g},clearStorage(g){n.dS(g)},get workerUrl(){return n.dT.workerUrl},set workerUrl(g){n.dT.workerUrl=g},get workerClass(){return n.dT.workerClass},set workerClass(g){n.dT.workerClass=g},get workerParams(){return n.dT.workerParams},set workerParams(g){n.dT.workerParams=g},get dracoUrl(){return n.dU()},set dracoUrl(g){n.dV(g)},get meshoptUrl(){return n.dW()},set meshoptUrl(g){n.dX(g)},setNow:n.q.setNow,restoreNow:n.q.restoreNow}});var h=s;return h})}(YC)),YC.exports}var Sde=Tde();const Zf=Ji(Sde);function oW(t){var e,a,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(a=oW(t[e]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a);return r}function ci(){for(var t,e,a=0,r="",s=arguments.length;a<s;a++)(t=arguments[a])&&(e=oW(t))&&(r&&(r+=" "),r+=e);return r}var nN,sk;function zh(){if(sk)return nN;sk=1;var t=Array.isArray;return nN=t,nN}var iN,ok;function lW(){if(ok)return iN;ok=1;var t=typeof nC=="object"&&nC&&nC.Object===Object&&nC;return iN=t,iN}var sN,lk;function km(){if(lk)return sN;lk=1;var t=lW(),e=typeof self=="object"&&self&&self.Object===Object&&self,a=t||e||Function("return this")();return sN=a,sN}var oN,uk;function FT(){if(uk)return oN;uk=1;var t=km(),e=t.Symbol;return oN=e,oN}var lN,ck;function Cde(){if(ck)return lN;ck=1;var t=FT(),e=Object.prototype,a=e.hasOwnProperty,r=e.toString,s=t?t.toStringTag:void 0;function l(h){var n=a.call(h,s),w=h[s];try{h[s]=void 0;var T=!0}catch{}var P=r.call(h);return T&&(n?h[s]=w:delete h[s]),P}return lN=l,lN}var uN,dk;function bde(){if(dk)return uN;dk=1;var t=Object.prototype,e=t.toString;function a(r){return e.call(r)}return uN=a,uN}var cN,hk;function zy(){if(hk)return cN;hk=1;var t=FT(),e=Cde(),a=bde(),r="[object Null]",s="[object Undefined]",l=t?t.toStringTag:void 0;function h(n){return n==null?n===void 0?s:r:l&&l in Object(n)?e(n):a(n)}return cN=h,cN}var dN,fk;function Oy(){if(fk)return dN;fk=1;function t(e){return e!=null&&typeof e=="object"}return dN=t,dN}var hN,pk;function t1(){if(pk)return hN;pk=1;var t=zy(),e=Oy(),a="[object Symbol]";function r(s){return typeof s=="symbol"||e(s)&&t(s)==a}return hN=r,hN}var fN,mk;function B3(){if(mk)return fN;mk=1;var t=zh(),e=t1(),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function s(l,h){if(t(l))return!1;var n=typeof l;return n=="number"||n=="symbol"||n=="boolean"||l==null||e(l)?!0:r.test(l)||!a.test(l)||h!=null&&l in Object(h)}return fN=s,fN}var pN,yk;function Xg(){if(yk)return pN;yk=1;function t(e){var a=typeof e;return e!=null&&(a=="object"||a=="function")}return pN=t,pN}var mN,gk;function G3(){if(gk)return mN;gk=1;var t=zy(),e=Xg(),a="[object AsyncFunction]",r="[object Function]",s="[object GeneratorFunction]",l="[object Proxy]";function h(n){if(!e(n))return!1;var w=t(n);return w==r||w==s||w==a||w==l}return mN=h,mN}var yN,Ak;function xde(){if(Ak)return yN;Ak=1;var t=km(),e=t["__core-js_shared__"];return yN=e,yN}var gN,_k;function Pde(){if(_k)return gN;_k=1;var t=xde(),e=function(){var r=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function a(r){return!!e&&e in r}return gN=a,gN}var AN,vk;function uW(){if(vk)return AN;vk=1;var t=Function.prototype,e=t.toString;function a(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return AN=a,AN}var _N,wk;function Ede(){if(wk)return _N;wk=1;var t=G3(),e=Pde(),a=Xg(),r=uW(),s=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,h=Function.prototype,n=Object.prototype,w=h.toString,T=n.hasOwnProperty,P=RegExp("^"+w.call(T).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function z(k){if(!a(k)||e(k))return!1;var U=t(k)?P:l;return U.test(r(k))}return _N=z,_N}var vN,Rk;function Nde(){if(Rk)return vN;Rk=1;function t(e,a){return e==null?void 0:e[a]}return vN=t,vN}var wN,Tk;function N0(){if(Tk)return wN;Tk=1;var t=Ede(),e=Nde();function a(r,s){var l=e(r,s);return t(l)?l:void 0}return wN=a,wN}var RN,Sk;function N2(){if(Sk)return RN;Sk=1;var t=N0(),e=t(Object,"create");return RN=e,RN}var TN,Ck;function Vde(){if(Ck)return TN;Ck=1;var t=N2();function e(){this.__data__=t?t(null):{},this.size=0}return TN=e,TN}var SN,bk;function zde(){if(bk)return SN;bk=1;function t(e){var a=this.has(e)&&delete this.__data__[e];return this.size-=a?1:0,a}return SN=t,SN}var CN,xk;function Ode(){if(xk)return CN;xk=1;var t=N2(),e="__lodash_hash_undefined__",a=Object.prototype,r=a.hasOwnProperty;function s(l){var h=this.__data__;if(t){var n=h[l];return n===e?void 0:n}return r.call(h,l)?h[l]:void 0}return CN=s,CN}var bN,Pk;function Dde(){if(Pk)return bN;Pk=1;var t=N2(),e=Object.prototype,a=e.hasOwnProperty;function r(s){var l=this.__data__;return t?l[s]!==void 0:a.call(l,s)}return bN=r,bN}var xN,Ek;function Mde(){if(Ek)return xN;Ek=1;var t=N2(),e="__lodash_hash_undefined__";function a(r,s){var l=this.__data__;return this.size+=this.has(r)?0:1,l[r]=t&&s===void 0?e:s,this}return xN=a,xN}var PN,Nk;function Ide(){if(Nk)return PN;Nk=1;var t=Vde(),e=zde(),a=Ode(),r=Dde(),s=Mde();function l(h){var n=-1,w=h==null?0:h.length;for(this.clear();++n<w;){var T=h[n];this.set(T[0],T[1])}}return l.prototype.clear=t,l.prototype.delete=e,l.prototype.get=a,l.prototype.has=r,l.prototype.set=s,PN=l,PN}var EN,Vk;function Lde(){if(Vk)return EN;Vk=1;function t(){this.__data__=[],this.size=0}return EN=t,EN}var NN,zk;function j3(){if(zk)return NN;zk=1;function t(e,a){return e===a||e!==e&&a!==a}return NN=t,NN}var VN,Ok;function V2(){if(Ok)return VN;Ok=1;var t=j3();function e(a,r){for(var s=a.length;s--;)if(t(a[s][0],r))return s;return-1}return VN=e,VN}var zN,Dk;function Fde(){if(Dk)return zN;Dk=1;var t=V2(),e=Array.prototype,a=e.splice;function r(s){var l=this.__data__,h=t(l,s);if(h<0)return!1;var n=l.length-1;return h==n?l.pop():a.call(l,h,1),--this.size,!0}return zN=r,zN}var ON,Mk;function Ude(){if(Mk)return ON;Mk=1;var t=V2();function e(a){var r=this.__data__,s=t(r,a);return s<0?void 0:r[s][1]}return ON=e,ON}var DN,Ik;function kde(){if(Ik)return DN;Ik=1;var t=V2();function e(a){return t(this.__data__,a)>-1}return DN=e,DN}var MN,Lk;function Bde(){if(Lk)return MN;Lk=1;var t=V2();function e(a,r){var s=this.__data__,l=t(s,a);return l<0?(++this.size,s.push([a,r])):s[l][1]=r,this}return MN=e,MN}var IN,Fk;function z2(){if(Fk)return IN;Fk=1;var t=Lde(),e=Fde(),a=Ude(),r=kde(),s=Bde();function l(h){var n=-1,w=h==null?0:h.length;for(this.clear();++n<w;){var T=h[n];this.set(T[0],T[1])}}return l.prototype.clear=t,l.prototype.delete=e,l.prototype.get=a,l.prototype.has=r,l.prototype.set=s,IN=l,IN}var LN,Uk;function Z3(){if(Uk)return LN;Uk=1;var t=N0(),e=km(),a=t(e,"Map");return LN=a,LN}var FN,kk;function Gde(){if(kk)return FN;kk=1;var t=Ide(),e=z2(),a=Z3();function r(){this.size=0,this.__data__={hash:new t,map:new(a||e),string:new t}}return FN=r,FN}var UN,Bk;function jde(){if(Bk)return UN;Bk=1;function t(e){var a=typeof e;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?e!=="__proto__":e===null}return UN=t,UN}var kN,Gk;function O2(){if(Gk)return kN;Gk=1;var t=jde();function e(a,r){var s=a.__data__;return t(r)?s[typeof r=="string"?"string":"hash"]:s.map}return kN=e,kN}var BN,jk;function Zde(){if(jk)return BN;jk=1;var t=O2();function e(a){var r=t(this,a).delete(a);return this.size-=r?1:0,r}return BN=e,BN}var GN,Zk;function qde(){if(Zk)return GN;Zk=1;var t=O2();function e(a){return t(this,a).get(a)}return GN=e,GN}var jN,qk;function Hde(){if(qk)return jN;qk=1;var t=O2();function e(a){return t(this,a).has(a)}return jN=e,jN}var ZN,Hk;function $de(){if(Hk)return ZN;Hk=1;var t=O2();function e(a,r){var s=t(this,a),l=s.size;return s.set(a,r),this.size+=s.size==l?0:1,this}return ZN=e,ZN}var qN,$k;function q3(){if($k)return qN;$k=1;var t=Gde(),e=Zde(),a=qde(),r=Hde(),s=$de();function l(h){var n=-1,w=h==null?0:h.length;for(this.clear();++n<w;){var T=h[n];this.set(T[0],T[1])}}return l.prototype.clear=t,l.prototype.delete=e,l.prototype.get=a,l.prototype.has=r,l.prototype.set=s,qN=l,qN}var HN,Kk;function cW(){if(Kk)return HN;Kk=1;var t=q3(),e="Expected a function";function a(r,s){if(typeof r!="function"||s!=null&&typeof s!="function")throw new TypeError(e);var l=function(){var h=arguments,n=s?s.apply(this,h):h[0],w=l.cache;if(w.has(n))return w.get(n);var T=r.apply(this,h);return l.cache=w.set(n,T)||w,T};return l.cache=new(a.Cache||t),l}return a.Cache=t,HN=a,HN}var $N,Wk;function Kde(){if(Wk)return $N;Wk=1;var t=cW(),e=500;function a(r){var s=t(r,function(h){return l.size===e&&l.clear(),h}),l=s.cache;return s}return $N=a,$N}var KN,Yk;function Wde(){if(Yk)return KN;Yk=1;var t=Kde(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,r=t(function(s){var l=[];return s.charCodeAt(0)===46&&l.push(""),s.replace(e,function(h,n,w,T){l.push(w?T.replace(a,"$1"):n||h)}),l});return KN=r,KN}var WN,Xk;function H3(){if(Xk)return WN;Xk=1;function t(e,a){for(var r=-1,s=e==null?0:e.length,l=Array(s);++r<s;)l[r]=a(e[r],r,e);return l}return WN=t,WN}var YN,Jk;function Yde(){if(Jk)return YN;Jk=1;var t=FT(),e=H3(),a=zh(),r=t1(),s=t?t.prototype:void 0,l=s?s.toString:void 0;function h(n){if(typeof n=="string")return n;if(a(n))return e(n,h)+"";if(r(n))return l?l.call(n):"";var w=n+"";return w=="0"&&1/n==-1/0?"-0":w}return YN=h,YN}var XN,Qk;function dW(){if(Qk)return XN;Qk=1;var t=Yde();function e(a){return a==null?"":t(a)}return XN=e,XN}var JN,eB;function hW(){if(eB)return JN;eB=1;var t=zh(),e=B3(),a=Wde(),r=dW();function s(l,h){return t(l)?l:e(l,h)?[l]:a(r(l))}return JN=s,JN}var QN,tB;function D2(){if(tB)return QN;tB=1;var t=t1();function e(a){if(typeof a=="string"||t(a))return a;var r=a+"";return r=="0"&&1/a==-1/0?"-0":r}return QN=e,QN}var eV,aB;function $3(){if(aB)return eV;aB=1;var t=hW(),e=D2();function a(r,s){s=t(s,r);for(var l=0,h=s.length;r!=null&&l<h;)r=r[e(s[l++])];return l&&l==h?r:void 0}return eV=a,eV}var tV,rB;function fW(){if(rB)return tV;rB=1;var t=$3();function e(a,r,s){var l=a==null?void 0:t(a,r);return l===void 0?s:l}return tV=e,tV}var Xde=fW();const hf=Ji(Xde);var aV,nB;function Jde(){if(nB)return aV;nB=1;function t(e){return e==null}return aV=t,aV}var Qde=Jde();const Un=Ji(Qde);var rV,iB;function ehe(){if(iB)return rV;iB=1;var t=zy(),e=zh(),a=Oy(),r="[object String]";function s(l){return typeof l=="string"||!e(l)&&a(l)&&t(l)==r}return rV=s,rV}var the=ehe();const UT=Ji(the);var ahe=G3();const Fn=Ji(ahe);var rhe=Xg();const a1=Ji(rhe);var nV={exports:{}},Vs={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sB;function nhe(){if(sB)return Vs;sB=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),n=Symbol.for("react.server_context"),w=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),U=Symbol.for("react.offscreen"),Z;Z=Symbol.for("react.module.reference");function H(q){if(typeof q=="object"&&q!==null){var J=q.$$typeof;switch(J){case t:switch(q=q.type,q){case a:case s:case r:case T:case P:return q;default:switch(q=q&&q.$$typeof,q){case n:case h:case w:case k:case z:case l:return q;default:return J}}case e:return J}}}return Vs.ContextConsumer=h,Vs.ContextProvider=l,Vs.Element=t,Vs.ForwardRef=w,Vs.Fragment=a,Vs.Lazy=k,Vs.Memo=z,Vs.Portal=e,Vs.Profiler=s,Vs.StrictMode=r,Vs.Suspense=T,Vs.SuspenseList=P,Vs.isAsyncMode=function(){return!1},Vs.isConcurrentMode=function(){return!1},Vs.isContextConsumer=function(q){return H(q)===h},Vs.isContextProvider=function(q){return H(q)===l},Vs.isElement=function(q){return typeof q=="object"&&q!==null&&q.$$typeof===t},Vs.isForwardRef=function(q){return H(q)===w},Vs.isFragment=function(q){return H(q)===a},Vs.isLazy=function(q){return H(q)===k},Vs.isMemo=function(q){return H(q)===z},Vs.isPortal=function(q){return H(q)===e},Vs.isProfiler=function(q){return H(q)===s},Vs.isStrictMode=function(q){return H(q)===r},Vs.isSuspense=function(q){return H(q)===T},Vs.isSuspenseList=function(q){return H(q)===P},Vs.isValidElementType=function(q){return typeof q=="string"||typeof q=="function"||q===a||q===s||q===r||q===T||q===P||q===U||typeof q=="object"&&q!==null&&(q.$$typeof===k||q.$$typeof===z||q.$$typeof===l||q.$$typeof===h||q.$$typeof===w||q.$$typeof===Z||q.getModuleId!==void 0)},Vs.typeOf=H,Vs}var oB;function ihe(){return oB||(oB=1,nV.exports=nhe()),nV.exports}var she=ihe(),iV,lB;function pW(){if(lB)return iV;lB=1;var t=zy(),e=Oy(),a="[object Number]";function r(s){return typeof s=="number"||e(s)&&t(s)==a}return iV=r,iV}var sV,uB;function ohe(){if(uB)return sV;uB=1;var t=pW();function e(a){return t(a)&&a!=+a}return sV=e,sV}var lhe=ohe();const r1=Ji(lhe);var uhe=pW();const che=Ji(uhe);var Qd=function(e){return e===0?0:e>0?1:-1},QA=function(e){return UT(e)&&e.indexOf("%")===e.length-1},yr=function(e){return che(e)&&!r1(e)},Fu=function(e){return yr(e)||UT(e)},dhe=0,Jg=function(e){var a=++dhe;return"".concat(e||"").concat(a)},eh=function(e,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!yr(e)&&!UT(e))return r;var l;if(QA(e)){var h=e.indexOf("%");l=a*parseFloat(e.slice(0,h))/100}else l=+e;return r1(l)&&(l=r),s&&l>a&&(l=a),l},bg=function(e){if(!e)return null;var a=Object.keys(e);return a&&a.length?e[a[0]]:null},hhe=function(e){if(!Array.isArray(e))return!1;for(var a=e.length,r={},s=0;s<a;s++)if(!r[e[s]])r[e[s]]=!0;else return!0;return!1},ul=function(e,a){return yr(e)&&yr(a)?function(r){return e+r*(a-e)}:function(){return a}};function Ib(t,e,a){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):hf(r,e))===a})}var fhe=function(e){if(!e||!e.length)return null;for(var a=e.length,r=0,s=0,l=0,h=0,n=1/0,w=-1/0,T=0,P=0,z=0;z<a;z++)T=e[z].cx||0,P=e[z].cy||0,r+=T,s+=P,l+=T*P,h+=T*T,n=Math.min(n,T),w=Math.max(w,T);var k=a*h!==r*r?(a*l-r*s)/(a*h-r*r):0;return{xmin:n,xmax:w,a:k,b:(s-k*r)/a}};function X_(t,e){for(var a in t)if({}.hasOwnProperty.call(t,a)&&(!{}.hasOwnProperty.call(e,a)||t[a]!==e[a]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function PD(t){"@babel/helpers - typeof";return PD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PD(t)}var phe=["viewBox","children"],mhe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],cB=["points","pathLength"],oV={svg:phe,polygon:cB,polyline:cB},K3=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Lb=function(e,a){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(nt.isValidElement(e)&&(r=e.props),!a1(r))return null;var s={};return Object.keys(r).forEach(function(l){K3.includes(l)&&(s[l]=a||function(h){return r[l](r,h)})}),s},yhe=function(e,a,r){return function(s){return e(a,r,s),null}},Bg=function(e,a,r){if(!a1(e)||PD(e)!=="object")return null;var s=null;return Object.keys(e).forEach(function(l){var h=e[l];K3.includes(l)&&typeof h=="function"&&(s||(s={}),s[l]=yhe(h,a,r))}),s},ghe=["children"],Ahe=["children"];function dB(t,e){if(t==null)return{};var a=_he(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function _he(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function ED(t){"@babel/helpers - typeof";return ED=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ED(t)}var hB={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},_y=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},fB=null,lV=null,W3=function t(e){if(e===fB&&Array.isArray(lV))return lV;var a=[];return nt.Children.forEach(e,function(r){Un(r)||(she.isFragment(r)?a=a.concat(t(r.props.children)):a.push(r))}),lV=a,fB=e,a};function nh(t,e){var a=[],r=[];return Array.isArray(e)?r=e.map(function(s){return _y(s)}):r=[_y(e)],W3(t).forEach(function(s){var l=hf(s,"type.displayName")||hf(s,"type.name");r.indexOf(l)!==-1&&a.push(s)}),a}function rf(t,e){var a=nh(t,e);return a&&a[0]}var pB=function(e){if(!e||!e.props)return!1;var a=e.props,r=a.width,s=a.height;return!(!yr(r)||r<=0||!yr(s)||s<=0)},vhe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],whe=function(e){return e&&e.type&&UT(e.type)&&vhe.indexOf(e.type)>=0},mW=function(e){return e&&ED(e)==="object"&&"clipDot"in e},Rhe=function(e,a,r,s){var l,h=(l=oV==null?void 0:oV[s])!==null&&l!==void 0?l:[];return!Fn(e)&&(s&&h.includes(a)||mhe.includes(a))||r&&K3.includes(a)},ln=function(e,a,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var s=e;if(nt.isValidElement(e)&&(s=e.props),!a1(s))return null;var l={};return Object.keys(s).forEach(function(h){var n;Rhe((n=s)===null||n===void 0?void 0:n[h],h,a,r)&&(l[h]=s[h])}),l},ND=function t(e,a){if(e===a)return!0;var r=nt.Children.count(e);if(r!==nt.Children.count(a))return!1;if(r===0)return!0;if(r===1)return mB(Array.isArray(e)?e[0]:e,Array.isArray(a)?a[0]:a);for(var s=0;s<r;s++){var l=e[s],h=a[s];if(Array.isArray(l)||Array.isArray(h)){if(!t(l,h))return!1}else if(!mB(l,h))return!1}return!0},mB=function(e,a){if(Un(e)&&Un(a))return!0;if(!Un(e)&&!Un(a)){var r=e.props||{},s=r.children,l=dB(r,ghe),h=a.props||{},n=h.children,w=dB(h,Ahe);return s&&n?X_(l,w)&&ND(s,n):!s&&!n?X_(l,w):!1}return!1},yB=function(e,a){var r=[],s={};return W3(e).forEach(function(l,h){if(whe(l))r.push(l);else if(l){var n=_y(l.type),w=a[n]||{},T=w.handler,P=w.once;if(T&&(!P||!s[n])){var z=T(l,n,h);r.push(z),s[n]=!0}}}),r},The=function(e){var a=e&&e.type;return a&&hB[a]?hB[a]:null},She=function(e,a){return W3(a).indexOf(e)},Che=["children","width","height","viewBox","className","style","title","desc"];function VD(){return VD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},VD.apply(this,arguments)}function bhe(t,e){if(t==null)return{};var a=xhe(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function xhe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function zD(t){var e=t.children,a=t.width,r=t.height,s=t.viewBox,l=t.className,h=t.style,n=t.title,w=t.desc,T=bhe(t,Che),P=s||{width:a,height:r,x:0,y:0},z=ci("recharts-surface",l);return Vt.createElement("svg",VD({},ln(T,!0,"svg"),{className:z,width:a,height:r,style:h,viewBox:"".concat(P.x," ").concat(P.y," ").concat(P.width," ").concat(P.height)}),Vt.createElement("title",null,n),Vt.createElement("desc",null,w),e)}var Phe=["children","className"];function OD(){return OD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},OD.apply(this,arguments)}function Ehe(t,e){if(t==null)return{};var a=Nhe(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Nhe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}var fi=Vt.forwardRef(function(t,e){var a=t.children,r=t.className,s=Ehe(t,Phe),l=ci("recharts-layer",r);return Vt.createElement("g",OD({className:l},ln(s,!0),{ref:e}),a)}),Mp=function(e,a){for(var r=arguments.length,s=new Array(r>2?r-2:0),l=2;l<r;l++)s[l-2]=arguments[l]},uV,gB;function Vhe(){if(gB)return uV;gB=1;function t(e,a,r){var s=-1,l=e.length;a<0&&(a=-a>l?0:l+a),r=r>l?l:r,r<0&&(r+=l),l=a>r?0:r-a>>>0,a>>>=0;for(var h=Array(l);++s<l;)h[s]=e[s+a];return h}return uV=t,uV}var cV,AB;function zhe(){if(AB)return cV;AB=1;var t=Vhe();function e(a,r,s){var l=a.length;return s=s===void 0?l:s,!r&&s>=l?a:t(a,r,s)}return cV=e,cV}var dV,_B;function yW(){if(_B)return dV;_B=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",s=e+a+r,l="\\ufe0e\\ufe0f",h="\\u200d",n=RegExp("["+h+t+s+l+"]");function w(T){return n.test(T)}return dV=w,dV}var hV,vB;function Ohe(){if(vB)return hV;vB=1;function t(e){return e.split("")}return hV=t,hV}var fV,wB;function Dhe(){if(wB)return fV;wB=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",s=e+a+r,l="\\ufe0e\\ufe0f",h="["+t+"]",n="["+s+"]",w="\\ud83c[\\udffb-\\udfff]",T="(?:"+n+"|"+w+")",P="[^"+t+"]",z="(?:\\ud83c[\\udde6-\\uddff]){2}",k="[\\ud800-\\udbff][\\udc00-\\udfff]",U="\\u200d",Z=T+"?",H="["+l+"]?",q="(?:"+U+"(?:"+[P,z,k].join("|")+")"+H+Z+")*",J=H+Z+q,re="(?:"+[P+n+"?",n,z,k,h].join("|")+")",ce=RegExp(w+"(?="+w+")|"+re+J,"g");function ye(he){return he.match(ce)||[]}return fV=ye,fV}var pV,RB;function Mhe(){if(RB)return pV;RB=1;var t=Ohe(),e=yW(),a=Dhe();function r(s){return e(s)?a(s):t(s)}return pV=r,pV}var mV,TB;function Ihe(){if(TB)return mV;TB=1;var t=zhe(),e=yW(),a=Mhe(),r=dW();function s(l){return function(h){h=r(h);var n=e(h)?a(h):void 0,w=n?n[0]:h.charAt(0),T=n?t(n,1).join(""):h.slice(1);return w[l]()+T}}return mV=s,mV}var yV,SB;function Lhe(){if(SB)return yV;SB=1;var t=Ihe(),e=t("toUpperCase");return yV=e,yV}var Fhe=Lhe();const M2=Ji(Fhe);function vo(t){return function(){return t}}const gW=Math.cos,Fb=Math.sin,Bp=Math.sqrt,Ub=Math.PI,I2=2*Ub,DD=Math.PI,MD=2*DD,qA=1e-6,Uhe=MD-qA;function AW(t){this._+=t[0];for(let e=1,a=t.length;e<a;++e)this._+=arguments[e]+t[e]}function khe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return AW;const a=10**e;return function(r){this._+=r[0];for(let s=1,l=r.length;s<l;++s)this._+=Math.round(arguments[s]*a)/a+r[s]}}class Bhe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?AW:khe(e)}moveTo(e,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+a}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,a){this._append`L${this._x1=+e},${this._y1=+a}`}quadraticCurveTo(e,a,r,s){this._append`Q${+e},${+a},${this._x1=+r},${this._y1=+s}`}bezierCurveTo(e,a,r,s,l,h){this._append`C${+e},${+a},${+r},${+s},${this._x1=+l},${this._y1=+h}`}arcTo(e,a,r,s,l){if(e=+e,a=+a,r=+r,s=+s,l=+l,l<0)throw new Error(`negative radius: ${l}`);let h=this._x1,n=this._y1,w=r-e,T=s-a,P=h-e,z=n-a,k=P*P+z*z;if(this._x1===null)this._append`M${this._x1=e},${this._y1=a}`;else if(k>qA)if(!(Math.abs(z*w-T*P)>qA)||!l)this._append`L${this._x1=e},${this._y1=a}`;else{let U=r-h,Z=s-n,H=w*w+T*T,q=U*U+Z*Z,J=Math.sqrt(H),re=Math.sqrt(k),ce=l*Math.tan((DD-Math.acos((H+k-q)/(2*J*re)))/2),ye=ce/re,he=ce/J;Math.abs(ye-1)>qA&&this._append`L${e+ye*P},${a+ye*z}`,this._append`A${l},${l},0,0,${+(z*U>P*Z)},${this._x1=e+he*w},${this._y1=a+he*T}`}}arc(e,a,r,s,l,h){if(e=+e,a=+a,r=+r,h=!!h,r<0)throw new Error(`negative radius: ${r}`);let n=r*Math.cos(s),w=r*Math.sin(s),T=e+n,P=a+w,z=1^h,k=h?s-l:l-s;this._x1===null?this._append`M${T},${P}`:(Math.abs(this._x1-T)>qA||Math.abs(this._y1-P)>qA)&&this._append`L${T},${P}`,r&&(k<0&&(k=k%MD+MD),k>Uhe?this._append`A${r},${r},0,1,${z},${e-n},${a-w}A${r},${r},0,1,${z},${this._x1=T},${this._y1=P}`:k>qA&&this._append`A${r},${r},0,${+(k>=DD)},${z},${this._x1=e+r*Math.cos(l)},${this._y1=a+r*Math.sin(l)}`)}rect(e,a,r,s){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+a}h${r=+r}v${+s}h${-r}Z`}toString(){return this._}}function Y3(t){let e=3;return t.digits=function(a){if(!arguments.length)return e;if(a==null)e=null;else{const r=Math.floor(a);if(!(r>=0))throw new RangeError(`invalid digits: ${a}`);e=r}return t},()=>new Bhe(e)}function X3(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function _W(t){this._context=t}_W.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function L2(t){return new _W(t)}function vW(t){return t[0]}function wW(t){return t[1]}function RW(t,e){var a=vo(!0),r=null,s=L2,l=null,h=Y3(n);t=typeof t=="function"?t:t===void 0?vW:vo(t),e=typeof e=="function"?e:e===void 0?wW:vo(e);function n(w){var T,P=(w=X3(w)).length,z,k=!1,U;for(r==null&&(l=s(U=h())),T=0;T<=P;++T)!(T<P&&a(z=w[T],T,w))===k&&((k=!k)?l.lineStart():l.lineEnd()),k&&l.point(+t(z,T,w),+e(z,T,w));if(U)return l=null,U+""||null}return n.x=function(w){return arguments.length?(t=typeof w=="function"?w:vo(+w),n):t},n.y=function(w){return arguments.length?(e=typeof w=="function"?w:vo(+w),n):e},n.defined=function(w){return arguments.length?(a=typeof w=="function"?w:vo(!!w),n):a},n.curve=function(w){return arguments.length?(s=w,r!=null&&(l=s(r)),n):s},n.context=function(w){return arguments.length?(w==null?r=l=null:l=s(r=w),n):r},n}function gC(t,e,a){var r=null,s=vo(!0),l=null,h=L2,n=null,w=Y3(T);t=typeof t=="function"?t:t===void 0?vW:vo(+t),e=typeof e=="function"?e:vo(e===void 0?0:+e),a=typeof a=="function"?a:a===void 0?wW:vo(+a);function T(z){var k,U,Z,H=(z=X3(z)).length,q,J=!1,re,ce=new Array(H),ye=new Array(H);for(l==null&&(n=h(re=w())),k=0;k<=H;++k){if(!(k<H&&s(q=z[k],k,z))===J)if(J=!J)U=k,n.areaStart(),n.lineStart();else{for(n.lineEnd(),n.lineStart(),Z=k-1;Z>=U;--Z)n.point(ce[Z],ye[Z]);n.lineEnd(),n.areaEnd()}J&&(ce[k]=+t(q,k,z),ye[k]=+e(q,k,z),n.point(r?+r(q,k,z):ce[k],a?+a(q,k,z):ye[k]))}if(re)return n=null,re+""||null}function P(){return RW().defined(s).curve(h).context(l)}return T.x=function(z){return arguments.length?(t=typeof z=="function"?z:vo(+z),r=null,T):t},T.x0=function(z){return arguments.length?(t=typeof z=="function"?z:vo(+z),T):t},T.x1=function(z){return arguments.length?(r=z==null?null:typeof z=="function"?z:vo(+z),T):r},T.y=function(z){return arguments.length?(e=typeof z=="function"?z:vo(+z),a=null,T):e},T.y0=function(z){return arguments.length?(e=typeof z=="function"?z:vo(+z),T):e},T.y1=function(z){return arguments.length?(a=z==null?null:typeof z=="function"?z:vo(+z),T):a},T.lineX0=T.lineY0=function(){return P().x(t).y(e)},T.lineY1=function(){return P().x(t).y(a)},T.lineX1=function(){return P().x(r).y(e)},T.defined=function(z){return arguments.length?(s=typeof z=="function"?z:vo(!!z),T):s},T.curve=function(z){return arguments.length?(h=z,l!=null&&(n=h(l)),T):h},T.context=function(z){return arguments.length?(z==null?l=n=null:n=h(l=z),T):l},T}class TW{constructor(e,a){this._context=e,this._x=a}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,a){switch(e=+e,a=+a,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,a):this._context.moveTo(e,a);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,a,e,a):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+a)/2,e,this._y0,e,a);break}}this._x0=e,this._y0=a}}function Ghe(t){return new TW(t,!0)}function jhe(t){return new TW(t,!1)}const J3={draw(t,e){const a=Bp(e/Ub);t.moveTo(a,0),t.arc(0,0,a,0,I2)}},Zhe={draw(t,e){const a=Bp(e/5)/2;t.moveTo(-3*a,-a),t.lineTo(-a,-a),t.lineTo(-a,-3*a),t.lineTo(a,-3*a),t.lineTo(a,-a),t.lineTo(3*a,-a),t.lineTo(3*a,a),t.lineTo(a,a),t.lineTo(a,3*a),t.lineTo(-a,3*a),t.lineTo(-a,a),t.lineTo(-3*a,a),t.closePath()}},SW=Bp(1/3),qhe=SW*2,Hhe={draw(t,e){const a=Bp(e/qhe),r=a*SW;t.moveTo(0,-a),t.lineTo(r,0),t.lineTo(0,a),t.lineTo(-r,0),t.closePath()}},$he={draw(t,e){const a=Bp(e),r=-a/2;t.rect(r,r,a,a)}},Khe=.8908130915292852,CW=Fb(Ub/10)/Fb(7*Ub/10),Whe=Fb(I2/10)*CW,Yhe=-gW(I2/10)*CW,Xhe={draw(t,e){const a=Bp(e*Khe),r=Whe*a,s=Yhe*a;t.moveTo(0,-a),t.lineTo(r,s);for(let l=1;l<5;++l){const h=I2*l/5,n=gW(h),w=Fb(h);t.lineTo(w*a,-n*a),t.lineTo(n*r-w*s,w*r+n*s)}t.closePath()}},gV=Bp(3),Jhe={draw(t,e){const a=-Bp(e/(gV*3));t.moveTo(0,a*2),t.lineTo(-gV*a,-a),t.lineTo(gV*a,-a),t.closePath()}},Uf=-.5,kf=Bp(3)/2,ID=1/Bp(12),Qhe=(ID/2+1)*3,efe={draw(t,e){const a=Bp(e/Qhe),r=a/2,s=a*ID,l=r,h=a*ID+a,n=-l,w=h;t.moveTo(r,s),t.lineTo(l,h),t.lineTo(n,w),t.lineTo(Uf*r-kf*s,kf*r+Uf*s),t.lineTo(Uf*l-kf*h,kf*l+Uf*h),t.lineTo(Uf*n-kf*w,kf*n+Uf*w),t.lineTo(Uf*r+kf*s,Uf*s-kf*r),t.lineTo(Uf*l+kf*h,Uf*h-kf*l),t.lineTo(Uf*n+kf*w,Uf*w-kf*n),t.closePath()}};function tfe(t,e){let a=null,r=Y3(s);t=typeof t=="function"?t:vo(t||J3),e=typeof e=="function"?e:vo(e===void 0?64:+e);function s(){let l;if(a||(a=l=r()),t.apply(this,arguments).draw(a,+e.apply(this,arguments)),l)return a=null,l+""||null}return s.type=function(l){return arguments.length?(t=typeof l=="function"?l:vo(l),s):t},s.size=function(l){return arguments.length?(e=typeof l=="function"?l:vo(+l),s):e},s.context=function(l){return arguments.length?(a=l??null,s):a},s}function kb(){}function Bb(t,e,a){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+a)/6)}function bW(t){this._context=t}bW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Bb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Bb(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function afe(t){return new bW(t)}function xW(t){this._context=t}xW.prototype={areaStart:kb,areaEnd:kb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Bb(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function rfe(t){return new xW(t)}function PW(t){this._context=t}PW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var a=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(a,r):this._context.moveTo(a,r);break;case 3:this._point=4;default:Bb(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function nfe(t){return new PW(t)}function EW(t){this._context=t}EW.prototype={areaStart:kb,areaEnd:kb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function ife(t){return new EW(t)}function CB(t){return t<0?-1:1}function bB(t,e,a){var r=t._x1-t._x0,s=e-t._x1,l=(t._y1-t._y0)/(r||s<0&&-0),h=(a-t._y1)/(s||r<0&&-0),n=(l*s+h*r)/(r+s);return(CB(l)+CB(h))*Math.min(Math.abs(l),Math.abs(h),.5*Math.abs(n))||0}function xB(t,e){var a=t._x1-t._x0;return a?(3*(t._y1-t._y0)/a-e)/2:e}function AV(t,e,a){var r=t._x0,s=t._y0,l=t._x1,h=t._y1,n=(l-r)/3;t._context.bezierCurveTo(r+n,s+n*e,l-n,h-n*a,l,h)}function Gb(t){this._context=t}Gb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:AV(this,this._t0,xB(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var a=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,AV(this,xB(this,a=bB(this,t,e)),a);break;default:AV(this,this._t0,a=bB(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=a}}};function NW(t){this._context=new VW(t)}(NW.prototype=Object.create(Gb.prototype)).point=function(t,e){Gb.prototype.point.call(this,e,t)};function VW(t){this._context=t}VW.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,a,r,s,l){this._context.bezierCurveTo(e,t,r,a,l,s)}};function sfe(t){return new Gb(t)}function ofe(t){return new NW(t)}function zW(t){this._context=t}zW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,a=t.length;if(a)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),a===2)this._context.lineTo(t[1],e[1]);else for(var r=PB(t),s=PB(e),l=0,h=1;h<a;++l,++h)this._context.bezierCurveTo(r[0][l],s[0][l],r[1][l],s[1][l],t[h],e[h]);(this._line||this._line!==0&&a===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function PB(t){var e,a=t.length-1,r,s=new Array(a),l=new Array(a),h=new Array(a);for(s[0]=0,l[0]=2,h[0]=t[0]+2*t[1],e=1;e<a-1;++e)s[e]=1,l[e]=4,h[e]=4*t[e]+2*t[e+1];for(s[a-1]=2,l[a-1]=7,h[a-1]=8*t[a-1]+t[a],e=1;e<a;++e)r=s[e]/l[e-1],l[e]-=r,h[e]-=r*h[e-1];for(s[a-1]=h[a-1]/l[a-1],e=a-2;e>=0;--e)s[e]=(h[e]-s[e+1])/l[e];for(l[a-1]=(t[a]+s[a-1])/2,e=0;e<a-1;++e)l[e]=2*t[e+1]-s[e+1];return[s,l]}function lfe(t){return new zW(t)}function F2(t,e){this._context=t,this._t=e}F2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var a=this._x*(1-this._t)+t*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,e)}break}}this._x=t,this._y=e}};function ufe(t){return new F2(t,.5)}function cfe(t){return new F2(t,0)}function dfe(t){return new F2(t,1)}function fv(t,e){if((h=t.length)>1)for(var a=1,r,s,l=t[e[0]],h,n=l.length;a<h;++a)for(s=l,l=t[e[a]],r=0;r<n;++r)l[r][1]+=l[r][0]=isNaN(s[r][1])?s[r][0]:s[r][1]}function LD(t){for(var e=t.length,a=new Array(e);--e>=0;)a[e]=e;return a}function hfe(t,e){return t[e]}function ffe(t){const e=[];return e.key=t,e}function pfe(){var t=vo([]),e=LD,a=fv,r=hfe;function s(l){var h=Array.from(t.apply(this,arguments),ffe),n,w=h.length,T=-1,P;for(const z of l)for(n=0,++T;n<w;++n)(h[n][T]=[0,+r(z,h[n].key,T,l)]).data=z;for(n=0,P=X3(e(h));n<w;++n)h[P[n]].index=n;return a(h,P),h}return s.keys=function(l){return arguments.length?(t=typeof l=="function"?l:vo(Array.from(l)),s):t},s.value=function(l){return arguments.length?(r=typeof l=="function"?l:vo(+l),s):r},s.order=function(l){return arguments.length?(e=l==null?LD:typeof l=="function"?l:vo(Array.from(l)),s):e},s.offset=function(l){return arguments.length?(a=l??fv,s):a},s}function mfe(t,e){if((r=t.length)>0){for(var a,r,s=0,l=t[0].length,h;s<l;++s){for(h=a=0;a<r;++a)h+=t[a][s][1]||0;if(h)for(a=0;a<r;++a)t[a][s][1]/=h}fv(t,e)}}function yfe(t,e){if((s=t.length)>0){for(var a=0,r=t[e[0]],s,l=r.length;a<l;++a){for(var h=0,n=0;h<s;++h)n+=t[h][a][1]||0;r[a][1]+=r[a][0]=-n/2}fv(t,e)}}function gfe(t,e){if(!(!((h=t.length)>0)||!((l=(s=t[e[0]]).length)>0))){for(var a=0,r=1,s,l,h;r<l;++r){for(var n=0,w=0,T=0;n<h;++n){for(var P=t[e[n]],z=P[r][1]||0,k=P[r-1][1]||0,U=(z-k)/2,Z=0;Z<n;++Z){var H=t[e[Z]],q=H[r][1]||0,J=H[r-1][1]||0;U+=q-J}w+=z,T+=U*z}s[r-1][1]+=s[r-1][0]=a,w&&(a-=T/w)}s[r-1][1]+=s[r-1][0]=a,fv(t,e)}}function NR(t){"@babel/helpers - typeof";return NR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},NR(t)}var Afe=["type","size","sizeType"];function FD(){return FD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},FD.apply(this,arguments)}function EB(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function NB(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?EB(Object(a),!0).forEach(function(r){_fe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):EB(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function _fe(t,e,a){return e=vfe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function vfe(t){var e=wfe(t,"string");return NR(e)=="symbol"?e:e+""}function wfe(t,e){if(NR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(NR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Rfe(t,e){if(t==null)return{};var a=Tfe(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Tfe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}var OW={symbolCircle:J3,symbolCross:Zhe,symbolDiamond:Hhe,symbolSquare:$he,symbolStar:Xhe,symbolTriangle:Jhe,symbolWye:efe},Sfe=Math.PI/180,Cfe=function(e){var a="symbol".concat(M2(e));return OW[a]||J3},bfe=function(e,a,r){if(a==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var s=18*Sfe;return 1.25*e*e*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},xfe=function(e,a){OW["symbol".concat(M2(e))]=a},U2=function(e){var a=e.type,r=a===void 0?"circle":a,s=e.size,l=s===void 0?64:s,h=e.sizeType,n=h===void 0?"area":h,w=Rfe(e,Afe),T=NB(NB({},w),{},{type:r,size:l,sizeType:n}),P=function(){var q=Cfe(r),J=tfe().type(q).size(bfe(l,n,r));return J()},z=T.className,k=T.cx,U=T.cy,Z=ln(T,!0);return k===+k&&U===+U&&l===+l?Vt.createElement("path",FD({},Z,{className:ci("recharts-symbols",z),transform:"translate(".concat(k,", ").concat(U,")"),d:P()})):null};U2.registerSymbol=xfe;function pv(t){"@babel/helpers - typeof";return pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pv(t)}function UD(){return UD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},UD.apply(this,arguments)}function VB(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function Pfe(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?VB(Object(a),!0).forEach(function(r){VR(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):VB(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Efe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nfe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,MW(r.key),r)}}function Vfe(t,e,a){return e&&Nfe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function zfe(t,e,a){return e=jb(e),Ofe(t,DW()?Reflect.construct(e,a||[],jb(t).constructor):e.apply(t,a))}function Ofe(t,e){if(e&&(pv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dfe(t)}function Dfe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function DW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DW=function(){return!!t})()}function jb(t){return jb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},jb(t)}function Mfe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kD(t,e)}function kD(t,e){return kD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},kD(t,e)}function VR(t,e,a){return e=MW(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function MW(t){var e=Ife(t,"string");return pv(e)=="symbol"?e:e+""}function Ife(t,e){if(pv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(pv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Tp=32,Q3=function(t){function e(){return Efe(this,e),zfe(this,e,arguments)}return Mfe(e,t),Vfe(e,[{key:"renderIcon",value:function(r){var s=this.props.inactiveColor,l=Tp/2,h=Tp/6,n=Tp/3,w=r.inactive?s:r.color;if(r.type==="plainline")return Vt.createElement("line",{strokeWidth:4,fill:"none",stroke:w,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:l,x2:Tp,y2:l,className:"recharts-legend-icon"});if(r.type==="line")return Vt.createElement("path",{strokeWidth:4,fill:"none",stroke:w,d:"M0,".concat(l,"h").concat(n,`
            A`).concat(h,",").concat(h,",0,1,1,").concat(2*n,",").concat(l,`
            H`).concat(Tp,"M").concat(2*n,",").concat(l,`
            A`).concat(h,",").concat(h,",0,1,1,").concat(n,",").concat(l),className:"recharts-legend-icon"});if(r.type==="rect")return Vt.createElement("path",{stroke:"none",fill:w,d:"M0,".concat(Tp/8,"h").concat(Tp,"v").concat(Tp*3/4,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(Vt.isValidElement(r.legendIcon)){var T=Pfe({},r);return delete T.legendIcon,Vt.cloneElement(r.legendIcon,T)}return Vt.createElement(U2,{fill:w,cx:l,cy:l,size:Tp,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,s=this.props,l=s.payload,h=s.iconSize,n=s.layout,w=s.formatter,T=s.inactiveColor,P={x:0,y:0,width:Tp,height:Tp},z={display:n==="horizontal"?"inline-block":"block",marginRight:10},k={display:"inline-block",verticalAlign:"middle",marginRight:4};return l.map(function(U,Z){var H=U.formatter||w,q=ci(VR(VR({"recharts-legend-item":!0},"legend-item-".concat(Z),!0),"inactive",U.inactive));if(U.type==="none")return null;var J=Fn(U.value)?null:U.value;Mp(!Fn(U.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var re=U.inactive?T:U.color;return Vt.createElement("li",UD({className:q,style:z,key:"legend-item-".concat(Z)},Bg(r.props,U,Z)),Vt.createElement(zD,{width:h,height:h,viewBox:P,style:k},r.renderIcon(U)),Vt.createElement("span",{className:"recharts-legend-item-text",style:{color:re}},H?H(J,U,Z):J))})}},{key:"render",value:function(){var r=this.props,s=r.payload,l=r.layout,h=r.align;if(!s||!s.length)return null;var n={padding:0,margin:0,textAlign:l==="horizontal"?h:"left"};return Vt.createElement("ul",{className:"recharts-default-legend",style:n},this.renderItems())}}])}(nt.PureComponent);VR(Q3,"displayName","Legend");VR(Q3,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var _V,zB;function Lfe(){if(zB)return _V;zB=1;var t=z2();function e(){this.__data__=new t,this.size=0}return _V=e,_V}var vV,OB;function Ffe(){if(OB)return vV;OB=1;function t(e){var a=this.__data__,r=a.delete(e);return this.size=a.size,r}return vV=t,vV}var wV,DB;function Ufe(){if(DB)return wV;DB=1;function t(e){return this.__data__.get(e)}return wV=t,wV}var RV,MB;function kfe(){if(MB)return RV;MB=1;function t(e){return this.__data__.has(e)}return RV=t,RV}var TV,IB;function Bfe(){if(IB)return TV;IB=1;var t=z2(),e=Z3(),a=q3(),r=200;function s(l,h){var n=this.__data__;if(n instanceof t){var w=n.__data__;if(!e||w.length<r-1)return w.push([l,h]),this.size=++n.size,this;n=this.__data__=new a(w)}return n.set(l,h),this.size=n.size,this}return TV=s,TV}var SV,LB;function IW(){if(LB)return SV;LB=1;var t=z2(),e=Lfe(),a=Ffe(),r=Ufe(),s=kfe(),l=Bfe();function h(n){var w=this.__data__=new t(n);this.size=w.size}return h.prototype.clear=e,h.prototype.delete=a,h.prototype.get=r,h.prototype.has=s,h.prototype.set=l,SV=h,SV}var CV,FB;function Gfe(){if(FB)return CV;FB=1;var t="__lodash_hash_undefined__";function e(a){return this.__data__.set(a,t),this}return CV=e,CV}var bV,UB;function jfe(){if(UB)return bV;UB=1;function t(e){return this.__data__.has(e)}return bV=t,bV}var xV,kB;function LW(){if(kB)return xV;kB=1;var t=q3(),e=Gfe(),a=jfe();function r(s){var l=-1,h=s==null?0:s.length;for(this.__data__=new t;++l<h;)this.add(s[l])}return r.prototype.add=r.prototype.push=e,r.prototype.has=a,xV=r,xV}var PV,BB;function FW(){if(BB)return PV;BB=1;function t(e,a){for(var r=-1,s=e==null?0:e.length;++r<s;)if(a(e[r],r,e))return!0;return!1}return PV=t,PV}var EV,GB;function UW(){if(GB)return EV;GB=1;function t(e,a){return e.has(a)}return EV=t,EV}var NV,jB;function kW(){if(jB)return NV;jB=1;var t=LW(),e=FW(),a=UW(),r=1,s=2;function l(h,n,w,T,P,z){var k=w&r,U=h.length,Z=n.length;if(U!=Z&&!(k&&Z>U))return!1;var H=z.get(h),q=z.get(n);if(H&&q)return H==n&&q==h;var J=-1,re=!0,ce=w&s?new t:void 0;for(z.set(h,n),z.set(n,h);++J<U;){var ye=h[J],he=n[J];if(T)var _e=k?T(he,ye,J,n,h,z):T(ye,he,J,h,n,z);if(_e!==void 0){if(_e)continue;re=!1;break}if(ce){if(!e(n,function(me,Re){if(!a(ce,Re)&&(ye===me||P(ye,me,w,T,z)))return ce.push(Re)})){re=!1;break}}else if(!(ye===he||P(ye,he,w,T,z))){re=!1;break}}return z.delete(h),z.delete(n),re}return NV=l,NV}var VV,ZB;function Zfe(){if(ZB)return VV;ZB=1;var t=km(),e=t.Uint8Array;return VV=e,VV}var zV,qB;function qfe(){if(qB)return zV;qB=1;function t(e){var a=-1,r=Array(e.size);return e.forEach(function(s,l){r[++a]=[l,s]}),r}return zV=t,zV}var OV,HB;function e4(){if(HB)return OV;HB=1;function t(e){var a=-1,r=Array(e.size);return e.forEach(function(s){r[++a]=s}),r}return OV=t,OV}var DV,$B;function Hfe(){if($B)return DV;$B=1;var t=FT(),e=Zfe(),a=j3(),r=kW(),s=qfe(),l=e4(),h=1,n=2,w="[object Boolean]",T="[object Date]",P="[object Error]",z="[object Map]",k="[object Number]",U="[object RegExp]",Z="[object Set]",H="[object String]",q="[object Symbol]",J="[object ArrayBuffer]",re="[object DataView]",ce=t?t.prototype:void 0,ye=ce?ce.valueOf:void 0;function he(_e,me,Re,be,De,ie,ge){switch(Re){case re:if(_e.byteLength!=me.byteLength||_e.byteOffset!=me.byteOffset)return!1;_e=_e.buffer,me=me.buffer;case J:return!(_e.byteLength!=me.byteLength||!ie(new e(_e),new e(me)));case w:case T:case k:return a(+_e,+me);case P:return _e.name==me.name&&_e.message==me.message;case U:case H:return _e==me+"";case z:var Me=s;case Z:var ze=be&h;if(Me||(Me=l),_e.size!=me.size&&!ze)return!1;var Le=ge.get(_e);if(Le)return Le==me;be|=n,ge.set(_e,me);var Ie=r(Me(_e),Me(me),be,De,ie,ge);return ge.delete(_e),Ie;case q:if(ye)return ye.call(_e)==ye.call(me)}return!1}return DV=he,DV}var MV,KB;function BW(){if(KB)return MV;KB=1;function t(e,a){for(var r=-1,s=a.length,l=e.length;++r<s;)e[l+r]=a[r];return e}return MV=t,MV}var IV,WB;function $fe(){if(WB)return IV;WB=1;var t=BW(),e=zh();function a(r,s,l){var h=s(r);return e(r)?h:t(h,l(r))}return IV=a,IV}var LV,YB;function Kfe(){if(YB)return LV;YB=1;function t(e,a){for(var r=-1,s=e==null?0:e.length,l=0,h=[];++r<s;){var n=e[r];a(n,r,e)&&(h[l++]=n)}return h}return LV=t,LV}var FV,XB;function Wfe(){if(XB)return FV;XB=1;function t(){return[]}return FV=t,FV}var UV,JB;function Yfe(){if(JB)return UV;JB=1;var t=Kfe(),e=Wfe(),a=Object.prototype,r=a.propertyIsEnumerable,s=Object.getOwnPropertySymbols,l=s?function(h){return h==null?[]:(h=Object(h),t(s(h),function(n){return r.call(h,n)}))}:e;return UV=l,UV}var kV,QB;function Xfe(){if(QB)return kV;QB=1;function t(e,a){for(var r=-1,s=Array(e);++r<e;)s[r]=a(r);return s}return kV=t,kV}var BV,e8;function Jfe(){if(e8)return BV;e8=1;var t=zy(),e=Oy(),a="[object Arguments]";function r(s){return e(s)&&t(s)==a}return BV=r,BV}var GV,t8;function t4(){if(t8)return GV;t8=1;var t=Jfe(),e=Oy(),a=Object.prototype,r=a.hasOwnProperty,s=a.propertyIsEnumerable,l=t(function(){return arguments}())?t:function(h){return e(h)&&r.call(h,"callee")&&!s.call(h,"callee")};return GV=l,GV}var qw={exports:{}},jV,a8;function Qfe(){if(a8)return jV;a8=1;function t(){return!1}return jV=t,jV}qw.exports;var r8;function GW(){return r8||(r8=1,function(t,e){var a=km(),r=Qfe(),s=e&&!e.nodeType&&e,l=s&&!0&&t&&!t.nodeType&&t,h=l&&l.exports===s,n=h?a.Buffer:void 0,w=n?n.isBuffer:void 0,T=w||r;t.exports=T}(qw,qw.exports)),qw.exports}var ZV,n8;function a4(){if(n8)return ZV;n8=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function a(r,s){var l=typeof r;return s=s??t,!!s&&(l=="number"||l!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<s}return ZV=a,ZV}var qV,i8;function r4(){if(i8)return qV;i8=1;var t=9007199254740991;function e(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=t}return qV=e,qV}var HV,s8;function epe(){if(s8)return HV;s8=1;var t=zy(),e=r4(),a=Oy(),r="[object Arguments]",s="[object Array]",l="[object Boolean]",h="[object Date]",n="[object Error]",w="[object Function]",T="[object Map]",P="[object Number]",z="[object Object]",k="[object RegExp]",U="[object Set]",Z="[object String]",H="[object WeakMap]",q="[object ArrayBuffer]",J="[object DataView]",re="[object Float32Array]",ce="[object Float64Array]",ye="[object Int8Array]",he="[object Int16Array]",_e="[object Int32Array]",me="[object Uint8Array]",Re="[object Uint8ClampedArray]",be="[object Uint16Array]",De="[object Uint32Array]",ie={};ie[re]=ie[ce]=ie[ye]=ie[he]=ie[_e]=ie[me]=ie[Re]=ie[be]=ie[De]=!0,ie[r]=ie[s]=ie[q]=ie[l]=ie[J]=ie[h]=ie[n]=ie[w]=ie[T]=ie[P]=ie[z]=ie[k]=ie[U]=ie[Z]=ie[H]=!1;function ge(Me){return a(Me)&&e(Me.length)&&!!ie[t(Me)]}return HV=ge,HV}var $V,o8;function jW(){if(o8)return $V;o8=1;function t(e){return function(a){return e(a)}}return $V=t,$V}var Hw={exports:{}};Hw.exports;var l8;function tpe(){return l8||(l8=1,function(t,e){var a=lW(),r=e&&!e.nodeType&&e,s=r&&!0&&t&&!t.nodeType&&t,l=s&&s.exports===r,h=l&&a.process,n=function(){try{var w=s&&s.require&&s.require("util").types;return w||h&&h.binding&&h.binding("util")}catch{}}();t.exports=n}(Hw,Hw.exports)),Hw.exports}var KV,u8;function ZW(){if(u8)return KV;u8=1;var t=epe(),e=jW(),a=tpe(),r=a&&a.isTypedArray,s=r?e(r):t;return KV=s,KV}var WV,c8;function ape(){if(c8)return WV;c8=1;var t=Xfe(),e=t4(),a=zh(),r=GW(),s=a4(),l=ZW(),h=Object.prototype,n=h.hasOwnProperty;function w(T,P){var z=a(T),k=!z&&e(T),U=!z&&!k&&r(T),Z=!z&&!k&&!U&&l(T),H=z||k||U||Z,q=H?t(T.length,String):[],J=q.length;for(var re in T)(P||n.call(T,re))&&!(H&&(re=="length"||U&&(re=="offset"||re=="parent")||Z&&(re=="buffer"||re=="byteLength"||re=="byteOffset")||s(re,J)))&&q.push(re);return q}return WV=w,WV}var YV,d8;function rpe(){if(d8)return YV;d8=1;var t=Object.prototype;function e(a){var r=a&&a.constructor,s=typeof r=="function"&&r.prototype||t;return a===s}return YV=e,YV}var XV,h8;function qW(){if(h8)return XV;h8=1;function t(e,a){return function(r){return e(a(r))}}return XV=t,XV}var JV,f8;function npe(){if(f8)return JV;f8=1;var t=qW(),e=t(Object.keys,Object);return JV=e,JV}var QV,p8;function ipe(){if(p8)return QV;p8=1;var t=rpe(),e=npe(),a=Object.prototype,r=a.hasOwnProperty;function s(l){if(!t(l))return e(l);var h=[];for(var n in Object(l))r.call(l,n)&&n!="constructor"&&h.push(n);return h}return QV=s,QV}var ez,m8;function kT(){if(m8)return ez;m8=1;var t=G3(),e=r4();function a(r){return r!=null&&e(r.length)&&!t(r)}return ez=a,ez}var tz,y8;function k2(){if(y8)return tz;y8=1;var t=ape(),e=ipe(),a=kT();function r(s){return a(s)?t(s):e(s)}return tz=r,tz}var az,g8;function spe(){if(g8)return az;g8=1;var t=$fe(),e=Yfe(),a=k2();function r(s){return t(s,a,e)}return az=r,az}var rz,A8;function ope(){if(A8)return rz;A8=1;var t=spe(),e=1,a=Object.prototype,r=a.hasOwnProperty;function s(l,h,n,w,T,P){var z=n&e,k=t(l),U=k.length,Z=t(h),H=Z.length;if(U!=H&&!z)return!1;for(var q=U;q--;){var J=k[q];if(!(z?J in h:r.call(h,J)))return!1}var re=P.get(l),ce=P.get(h);if(re&&ce)return re==h&&ce==l;var ye=!0;P.set(l,h),P.set(h,l);for(var he=z;++q<U;){J=k[q];var _e=l[J],me=h[J];if(w)var Re=z?w(me,_e,J,h,l,P):w(_e,me,J,l,h,P);if(!(Re===void 0?_e===me||T(_e,me,n,w,P):Re)){ye=!1;break}he||(he=J=="constructor")}if(ye&&!he){var be=l.constructor,De=h.constructor;be!=De&&"constructor"in l&&"constructor"in h&&!(typeof be=="function"&&be instanceof be&&typeof De=="function"&&De instanceof De)&&(ye=!1)}return P.delete(l),P.delete(h),ye}return rz=s,rz}var nz,_8;function lpe(){if(_8)return nz;_8=1;var t=N0(),e=km(),a=t(e,"DataView");return nz=a,nz}var iz,v8;function upe(){if(v8)return iz;v8=1;var t=N0(),e=km(),a=t(e,"Promise");return iz=a,iz}var sz,w8;function HW(){if(w8)return sz;w8=1;var t=N0(),e=km(),a=t(e,"Set");return sz=a,sz}var oz,R8;function cpe(){if(R8)return oz;R8=1;var t=N0(),e=km(),a=t(e,"WeakMap");return oz=a,oz}var lz,T8;function dpe(){if(T8)return lz;T8=1;var t=lpe(),e=Z3(),a=upe(),r=HW(),s=cpe(),l=zy(),h=uW(),n="[object Map]",w="[object Object]",T="[object Promise]",P="[object Set]",z="[object WeakMap]",k="[object DataView]",U=h(t),Z=h(e),H=h(a),q=h(r),J=h(s),re=l;return(t&&re(new t(new ArrayBuffer(1)))!=k||e&&re(new e)!=n||a&&re(a.resolve())!=T||r&&re(new r)!=P||s&&re(new s)!=z)&&(re=function(ce){var ye=l(ce),he=ye==w?ce.constructor:void 0,_e=he?h(he):"";if(_e)switch(_e){case U:return k;case Z:return n;case H:return T;case q:return P;case J:return z}return ye}),lz=re,lz}var uz,S8;function hpe(){if(S8)return uz;S8=1;var t=IW(),e=kW(),a=Hfe(),r=ope(),s=dpe(),l=zh(),h=GW(),n=ZW(),w=1,T="[object Arguments]",P="[object Array]",z="[object Object]",k=Object.prototype,U=k.hasOwnProperty;function Z(H,q,J,re,ce,ye){var he=l(H),_e=l(q),me=he?P:s(H),Re=_e?P:s(q);me=me==T?z:me,Re=Re==T?z:Re;var be=me==z,De=Re==z,ie=me==Re;if(ie&&h(H)){if(!h(q))return!1;he=!0,be=!1}if(ie&&!be)return ye||(ye=new t),he||n(H)?e(H,q,J,re,ce,ye):a(H,q,me,J,re,ce,ye);if(!(J&w)){var ge=be&&U.call(H,"__wrapped__"),Me=De&&U.call(q,"__wrapped__");if(ge||Me){var ze=ge?H.value():H,Le=Me?q.value():q;return ye||(ye=new t),ce(ze,Le,J,re,ye)}}return ie?(ye||(ye=new t),r(H,q,J,re,ce,ye)):!1}return uz=Z,uz}var cz,C8;function n4(){if(C8)return cz;C8=1;var t=hpe(),e=Oy();function a(r,s,l,h,n){return r===s?!0:r==null||s==null||!e(r)&&!e(s)?r!==r&&s!==s:t(r,s,l,h,a,n)}return cz=a,cz}var dz,b8;function fpe(){if(b8)return dz;b8=1;var t=IW(),e=n4(),a=1,r=2;function s(l,h,n,w){var T=n.length,P=T,z=!w;if(l==null)return!P;for(l=Object(l);T--;){var k=n[T];if(z&&k[2]?k[1]!==l[k[0]]:!(k[0]in l))return!1}for(;++T<P;){k=n[T];var U=k[0],Z=l[U],H=k[1];if(z&&k[2]){if(Z===void 0&&!(U in l))return!1}else{var q=new t;if(w)var J=w(Z,H,U,l,h,q);if(!(J===void 0?e(H,Z,a|r,w,q):J))return!1}}return!0}return dz=s,dz}var hz,x8;function $W(){if(x8)return hz;x8=1;var t=Xg();function e(a){return a===a&&!t(a)}return hz=e,hz}var fz,P8;function ppe(){if(P8)return fz;P8=1;var t=$W(),e=k2();function a(r){for(var s=e(r),l=s.length;l--;){var h=s[l],n=r[h];s[l]=[h,n,t(n)]}return s}return fz=a,fz}var pz,E8;function KW(){if(E8)return pz;E8=1;function t(e,a){return function(r){return r==null?!1:r[e]===a&&(a!==void 0||e in Object(r))}}return pz=t,pz}var mz,N8;function mpe(){if(N8)return mz;N8=1;var t=fpe(),e=ppe(),a=KW();function r(s){var l=e(s);return l.length==1&&l[0][2]?a(l[0][0],l[0][1]):function(h){return h===s||t(h,s,l)}}return mz=r,mz}var yz,V8;function ype(){if(V8)return yz;V8=1;function t(e,a){return e!=null&&a in Object(e)}return yz=t,yz}var gz,z8;function gpe(){if(z8)return gz;z8=1;var t=hW(),e=t4(),a=zh(),r=a4(),s=r4(),l=D2();function h(n,w,T){w=t(w,n);for(var P=-1,z=w.length,k=!1;++P<z;){var U=l(w[P]);if(!(k=n!=null&&T(n,U)))break;n=n[U]}return k||++P!=z?k:(z=n==null?0:n.length,!!z&&s(z)&&r(U,z)&&(a(n)||e(n)))}return gz=h,gz}var Az,O8;function Ape(){if(O8)return Az;O8=1;var t=ype(),e=gpe();function a(r,s){return r!=null&&e(r,s,t)}return Az=a,Az}var _z,D8;function _pe(){if(D8)return _z;D8=1;var t=n4(),e=fW(),a=Ape(),r=B3(),s=$W(),l=KW(),h=D2(),n=1,w=2;function T(P,z){return r(P)&&s(z)?l(h(P),z):function(k){var U=e(k,P);return U===void 0&&U===z?a(k,P):t(z,U,n|w)}}return _z=T,_z}var vz,M8;function n1(){if(M8)return vz;M8=1;function t(e){return e}return vz=t,vz}var wz,I8;function vpe(){if(I8)return wz;I8=1;function t(e){return function(a){return a==null?void 0:a[e]}}return wz=t,wz}var Rz,L8;function wpe(){if(L8)return Rz;L8=1;var t=$3();function e(a){return function(r){return t(r,a)}}return Rz=e,Rz}var Tz,F8;function Rpe(){if(F8)return Tz;F8=1;var t=vpe(),e=wpe(),a=B3(),r=D2();function s(l){return a(l)?t(r(l)):e(l)}return Tz=s,Tz}var Sz,U8;function Bm(){if(U8)return Sz;U8=1;var t=mpe(),e=_pe(),a=n1(),r=zh(),s=Rpe();function l(h){return typeof h=="function"?h:h==null?a:typeof h=="object"?r(h)?e(h[0],h[1]):t(h):s(h)}return Sz=l,Sz}var Cz,k8;function WW(){if(k8)return Cz;k8=1;function t(e,a,r,s){for(var l=e.length,h=r+(s?1:-1);s?h--:++h<l;)if(a(e[h],h,e))return h;return-1}return Cz=t,Cz}var bz,B8;function Tpe(){if(B8)return bz;B8=1;function t(e){return e!==e}return bz=t,bz}var xz,G8;function Spe(){if(G8)return xz;G8=1;function t(e,a,r){for(var s=r-1,l=e.length;++s<l;)if(e[s]===a)return s;return-1}return xz=t,xz}var Pz,j8;function Cpe(){if(j8)return Pz;j8=1;var t=WW(),e=Tpe(),a=Spe();function r(s,l,h){return l===l?a(s,l,h):t(s,e,h)}return Pz=r,Pz}var Ez,Z8;function bpe(){if(Z8)return Ez;Z8=1;var t=Cpe();function e(a,r){var s=a==null?0:a.length;return!!s&&t(a,r,0)>-1}return Ez=e,Ez}var Nz,q8;function xpe(){if(q8)return Nz;q8=1;function t(e,a,r){for(var s=-1,l=e==null?0:e.length;++s<l;)if(r(a,e[s]))return!0;return!1}return Nz=t,Nz}var Vz,H8;function Ppe(){if(H8)return Vz;H8=1;function t(){}return Vz=t,Vz}var zz,$8;function Epe(){if($8)return zz;$8=1;var t=HW(),e=Ppe(),a=e4(),r=1/0,s=t&&1/a(new t([,-0]))[1]==r?function(l){return new t(l)}:e;return zz=s,zz}var Oz,K8;function Npe(){if(K8)return Oz;K8=1;var t=LW(),e=bpe(),a=xpe(),r=UW(),s=Epe(),l=e4(),h=200;function n(w,T,P){var z=-1,k=e,U=w.length,Z=!0,H=[],q=H;if(P)Z=!1,k=a;else if(U>=h){var J=T?null:s(w);if(J)return l(J);Z=!1,k=r,q=new t}else q=T?[]:H;e:for(;++z<U;){var re=w[z],ce=T?T(re):re;if(re=P||re!==0?re:0,Z&&ce===ce){for(var ye=q.length;ye--;)if(q[ye]===ce)continue e;T&&q.push(ce),H.push(re)}else k(q,ce,P)||(q!==H&&q.push(ce),H.push(re))}return H}return Oz=n,Oz}var Dz,W8;function Vpe(){if(W8)return Dz;W8=1;var t=Bm(),e=Npe();function a(r,s){return r&&r.length?e(r,t(s,2)):[]}return Dz=a,Dz}var zpe=Vpe();const Y8=Ji(zpe);function YW(t,e,a){return e===!0?Y8(t,a):Fn(e)?Y8(t,e):t}function mv(t){"@babel/helpers - typeof";return mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mv(t)}var Ope=["ref"];function X8(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function oy(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?X8(Object(a),!0).forEach(function(r){B2(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):X8(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Dpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function J8(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,JW(r.key),r)}}function Mpe(t,e,a){return e&&J8(t.prototype,e),a&&J8(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ipe(t,e,a){return e=Zb(e),Lpe(t,XW()?Reflect.construct(e,a||[],Zb(t).constructor):e.apply(t,a))}function Lpe(t,e){if(e&&(mv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fpe(t)}function Fpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function XW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XW=function(){return!!t})()}function Zb(t){return Zb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Zb(t)}function Upe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BD(t,e)}function BD(t,e){return BD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},BD(t,e)}function B2(t,e,a){return e=JW(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function JW(t){var e=kpe(t,"string");return mv(e)=="symbol"?e:e+""}function kpe(t,e){if(mv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(mv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Bpe(t,e){if(t==null)return{};var a=Gpe(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Gpe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function jpe(t){return t.value}function Zpe(t,e){if(Vt.isValidElement(t))return Vt.cloneElement(t,e);if(typeof t=="function")return Vt.createElement(t,e);e.ref;var a=Bpe(e,Ope);return Vt.createElement(Q3,a)}var Q8=1,nf=function(t){function e(){var a;Dpe(this,e);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return a=Ipe(this,e,[].concat(s)),B2(a,"lastBoundingBox",{width:-1,height:-1}),a}return Upe(e,t),Mpe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>Q8||Math.abs(s.height-this.lastBoundingBox.height)>Q8)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,r&&r(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?oy({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var s=this.props,l=s.layout,h=s.align,n=s.verticalAlign,w=s.margin,T=s.chartWidth,P=s.chartHeight,z,k;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(h==="center"&&l==="vertical"){var U=this.getBBoxSnapshot();z={left:((T||0)-U.width)/2}}else z=h==="right"?{right:w&&w.right||0}:{left:w&&w.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(n==="middle"){var Z=this.getBBoxSnapshot();k={top:((P||0)-Z.height)/2}}else k=n==="bottom"?{bottom:w&&w.bottom||0}:{top:w&&w.top||0};return oy(oy({},z),k)}},{key:"render",value:function(){var r=this,s=this.props,l=s.content,h=s.width,n=s.height,w=s.wrapperStyle,T=s.payloadUniqBy,P=s.payload,z=oy(oy({position:"absolute",width:h||"auto",height:n||"auto"},this.getDefaultPosition(w)),w);return Vt.createElement("div",{className:"recharts-legend-wrapper",style:z,ref:function(U){r.wrapperNode=U}},Zpe(l,oy(oy({},this.props),{},{payload:YW(P,T,jpe)})))}}],[{key:"getWithHeight",value:function(r,s){var l=oy(oy({},this.defaultProps),r.props),h=l.layout;return h==="vertical"&&yr(r.props.height)?{height:r.props.height}:h==="horizontal"?{width:r.props.width||s}:null}}])}(nt.PureComponent);B2(nf,"displayName","Legend");B2(nf,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Mz,eG;function qpe(){if(eG)return Mz;eG=1;var t=FT(),e=t4(),a=zh(),r=t?t.isConcatSpreadable:void 0;function s(l){return a(l)||e(l)||!!(r&&l&&l[r])}return Mz=s,Mz}var Iz,tG;function QW(){if(tG)return Iz;tG=1;var t=BW(),e=qpe();function a(r,s,l,h,n){var w=-1,T=r.length;for(l||(l=e),n||(n=[]);++w<T;){var P=r[w];s>0&&l(P)?s>1?a(P,s-1,l,h,n):t(n,P):h||(n[n.length]=P)}return n}return Iz=a,Iz}var Lz,aG;function Hpe(){if(aG)return Lz;aG=1;function t(e){return function(a,r,s){for(var l=-1,h=Object(a),n=s(a),w=n.length;w--;){var T=n[e?w:++l];if(r(h[T],T,h)===!1)break}return a}}return Lz=t,Lz}var Fz,rG;function $pe(){if(rG)return Fz;rG=1;var t=Hpe(),e=t();return Fz=e,Fz}var Uz,nG;function eY(){if(nG)return Uz;nG=1;var t=$pe(),e=k2();function a(r,s){return r&&t(r,s,e)}return Uz=a,Uz}var kz,iG;function Kpe(){if(iG)return kz;iG=1;var t=kT();function e(a,r){return function(s,l){if(s==null)return s;if(!t(s))return a(s,l);for(var h=s.length,n=r?h:-1,w=Object(s);(r?n--:++n<h)&&l(w[n],n,w)!==!1;);return s}}return kz=e,kz}var Bz,sG;function i4(){if(sG)return Bz;sG=1;var t=eY(),e=Kpe(),a=e(t);return Bz=a,Bz}var Gz,oG;function tY(){if(oG)return Gz;oG=1;var t=i4(),e=kT();function a(r,s){var l=-1,h=e(r)?Array(r.length):[];return t(r,function(n,w,T){h[++l]=s(n,w,T)}),h}return Gz=a,Gz}var jz,lG;function Wpe(){if(lG)return jz;lG=1;function t(e,a){var r=e.length;for(e.sort(a);r--;)e[r]=e[r].value;return e}return jz=t,jz}var Zz,uG;function Ype(){if(uG)return Zz;uG=1;var t=t1();function e(a,r){if(a!==r){var s=a!==void 0,l=a===null,h=a===a,n=t(a),w=r!==void 0,T=r===null,P=r===r,z=t(r);if(!T&&!z&&!n&&a>r||n&&w&&P&&!T&&!z||l&&w&&P||!s&&P||!h)return 1;if(!l&&!n&&!z&&a<r||z&&s&&h&&!l&&!n||T&&s&&h||!w&&h||!P)return-1}return 0}return Zz=e,Zz}var qz,cG;function Xpe(){if(cG)return qz;cG=1;var t=Ype();function e(a,r,s){for(var l=-1,h=a.criteria,n=r.criteria,w=h.length,T=s.length;++l<w;){var P=t(h[l],n[l]);if(P){if(l>=T)return P;var z=s[l];return P*(z=="desc"?-1:1)}}return a.index-r.index}return qz=e,qz}var Hz,dG;function Jpe(){if(dG)return Hz;dG=1;var t=H3(),e=$3(),a=Bm(),r=tY(),s=Wpe(),l=jW(),h=Xpe(),n=n1(),w=zh();function T(P,z,k){z.length?z=t(z,function(H){return w(H)?function(q){return e(q,H.length===1?H[0]:H)}:H}):z=[n];var U=-1;z=t(z,l(a));var Z=r(P,function(H,q,J){var re=t(z,function(ce){return ce(H)});return{criteria:re,index:++U,value:H}});return s(Z,function(H,q){return h(H,q,k)})}return Hz=T,Hz}var $z,hG;function Qpe(){if(hG)return $z;hG=1;function t(e,a,r){switch(r.length){case 0:return e.call(a);case 1:return e.call(a,r[0]);case 2:return e.call(a,r[0],r[1]);case 3:return e.call(a,r[0],r[1],r[2])}return e.apply(a,r)}return $z=t,$z}var Kz,fG;function eme(){if(fG)return Kz;fG=1;var t=Qpe(),e=Math.max;function a(r,s,l){return s=e(s===void 0?r.length-1:s,0),function(){for(var h=arguments,n=-1,w=e(h.length-s,0),T=Array(w);++n<w;)T[n]=h[s+n];n=-1;for(var P=Array(s+1);++n<s;)P[n]=h[n];return P[s]=l(T),t(r,this,P)}}return Kz=a,Kz}var Wz,pG;function tme(){if(pG)return Wz;pG=1;function t(e){return function(){return e}}return Wz=t,Wz}var Yz,mG;function aY(){if(mG)return Yz;mG=1;var t=N0(),e=function(){try{var a=t(Object,"defineProperty");return a({},"",{}),a}catch{}}();return Yz=e,Yz}var Xz,yG;function ame(){if(yG)return Xz;yG=1;var t=tme(),e=aY(),a=n1(),r=e?function(s,l){return e(s,"toString",{configurable:!0,enumerable:!1,value:t(l),writable:!0})}:a;return Xz=r,Xz}var Jz,gG;function rme(){if(gG)return Jz;gG=1;var t=800,e=16,a=Date.now;function r(s){var l=0,h=0;return function(){var n=a(),w=e-(n-h);if(h=n,w>0){if(++l>=t)return arguments[0]}else l=0;return s.apply(void 0,arguments)}}return Jz=r,Jz}var Qz,AG;function nme(){if(AG)return Qz;AG=1;var t=ame(),e=rme(),a=e(t);return Qz=a,Qz}var eO,_G;function ime(){if(_G)return eO;_G=1;var t=n1(),e=eme(),a=nme();function r(s,l){return a(e(s,l,t),s+"")}return eO=r,eO}var tO,vG;function G2(){if(vG)return tO;vG=1;var t=j3(),e=kT(),a=a4(),r=Xg();function s(l,h,n){if(!r(n))return!1;var w=typeof h;return(w=="number"?e(n)&&a(h,n.length):w=="string"&&h in n)?t(n[h],l):!1}return tO=s,tO}var aO,wG;function sme(){if(wG)return aO;wG=1;var t=QW(),e=Jpe(),a=ime(),r=G2(),s=a(function(l,h){if(l==null)return[];var n=h.length;return n>1&&r(l,h[0],h[1])?h=[]:n>2&&r(h[0],h[1],h[2])&&(h=[h[0]]),e(l,t(h,1),[])});return aO=s,aO}var ome=sme();const s4=Ji(ome);function zR(t){"@babel/helpers - typeof";return zR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zR(t)}function GD(){return GD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},GD.apply(this,arguments)}function lme(t,e){return hme(t)||dme(t,e)||cme(t,e)||ume()}function ume(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cme(t,e){if(t){if(typeof t=="string")return RG(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return RG(t,e)}}function RG(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function dme(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,s,l,h,n=[],w=!0,T=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(w=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);w=!0);}catch(P){T=!0,s=P}finally{try{if(!w&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(T)throw s}}return n}}function hme(t){if(Array.isArray(t))return t}function TG(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function rO(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?TG(Object(a),!0).forEach(function(r){fme(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):TG(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function fme(t,e,a){return e=pme(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function pme(t){var e=mme(t,"string");return zR(e)=="symbol"?e:e+""}function mme(t,e){if(zR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(zR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yme(t){return Array.isArray(t)&&Fu(t[0])&&Fu(t[1])?t.join(" ~ "):t}var gme=function(e){var a=e.separator,r=a===void 0?" : ":a,s=e.contentStyle,l=s===void 0?{}:s,h=e.itemStyle,n=h===void 0?{}:h,w=e.labelStyle,T=w===void 0?{}:w,P=e.payload,z=e.formatter,k=e.itemSorter,U=e.wrapperClassName,Z=e.labelClassName,H=e.label,q=e.labelFormatter,J=e.accessibilityLayer,re=J===void 0?!1:J,ce=function(){if(P&&P.length){var ge={padding:0,margin:0},Me=(k?s4(P,k):P).map(function(ze,Le){if(ze.type==="none")return null;var Ie=rO({display:"block",paddingTop:4,paddingBottom:4,color:ze.color||"#000"},n),Ze=ze.formatter||z||yme,ke=ze.value,tt=ze.name,Ue=ke,He=tt;if(Ze&&Ue!=null&&He!=null){var Ce=Ze(ke,tt,ze,Le,P);if(Array.isArray(Ce)){var Se=lme(Ce,2);Ue=Se[0],He=Se[1]}else Ue=Ce}return Vt.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Le),style:Ie},Fu(He)?Vt.createElement("span",{className:"recharts-tooltip-item-name"},He):null,Fu(He)?Vt.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,Vt.createElement("span",{className:"recharts-tooltip-item-value"},Ue),Vt.createElement("span",{className:"recharts-tooltip-item-unit"},ze.unit||""))});return Vt.createElement("ul",{className:"recharts-tooltip-item-list",style:ge},Me)}return null},ye=rO({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},l),he=rO({margin:0},T),_e=!Un(H),me=_e?H:"",Re=ci("recharts-default-tooltip",U),be=ci("recharts-tooltip-label",Z);_e&&q&&P!==void 0&&P!==null&&(me=q(H,P));var De=re?{role:"status","aria-live":"assertive"}:{};return Vt.createElement("div",GD({className:Re,style:ye},De),Vt.createElement("p",{className:be,style:he},Vt.isValidElement(me)?me:"".concat(me)),ce())};function OR(t){"@babel/helpers - typeof";return OR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},OR(t)}function AC(t,e,a){return e=Ame(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Ame(t){var e=_me(t,"string");return OR(e)=="symbol"?e:e+""}function _me(t,e){if(OR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(OR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Rw="recharts-tooltip-wrapper",vme={visibility:"hidden"};function wme(t){var e=t.coordinate,a=t.translateX,r=t.translateY;return ci(Rw,AC(AC(AC(AC({},"".concat(Rw,"-right"),yr(a)&&e&&yr(e.x)&&a>=e.x),"".concat(Rw,"-left"),yr(a)&&e&&yr(e.x)&&a<e.x),"".concat(Rw,"-bottom"),yr(r)&&e&&yr(e.y)&&r>=e.y),"".concat(Rw,"-top"),yr(r)&&e&&yr(e.y)&&r<e.y))}function SG(t){var e=t.allowEscapeViewBox,a=t.coordinate,r=t.key,s=t.offsetTopLeft,l=t.position,h=t.reverseDirection,n=t.tooltipDimension,w=t.viewBox,T=t.viewBoxDimension;if(l&&yr(l[r]))return l[r];var P=a[r]-n-s,z=a[r]+s;if(e[r])return h[r]?P:z;if(h[r]){var k=P,U=w[r];return k<U?Math.max(z,w[r]):Math.max(P,w[r])}var Z=z+n,H=w[r]+T;return Z>H?Math.max(P,w[r]):Math.max(z,w[r])}function Rme(t){var e=t.translateX,a=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(a,"px, 0)"):"translate(".concat(e,"px, ").concat(a,"px)")}}function Tme(t){var e=t.allowEscapeViewBox,a=t.coordinate,r=t.offsetTopLeft,s=t.position,l=t.reverseDirection,h=t.tooltipBox,n=t.useTranslate3d,w=t.viewBox,T,P,z;return h.height>0&&h.width>0&&a?(P=SG({allowEscapeViewBox:e,coordinate:a,key:"x",offsetTopLeft:r,position:s,reverseDirection:l,tooltipDimension:h.width,viewBox:w,viewBoxDimension:w.width}),z=SG({allowEscapeViewBox:e,coordinate:a,key:"y",offsetTopLeft:r,position:s,reverseDirection:l,tooltipDimension:h.height,viewBox:w,viewBoxDimension:w.height}),T=Rme({translateX:P,translateY:z,useTranslate3d:n})):T=vme,{cssProperties:T,cssClasses:wme({translateX:P,translateY:z,coordinate:a})}}function yv(t){"@babel/helpers - typeof";return yv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yv(t)}function CG(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function bG(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?CG(Object(a),!0).forEach(function(r){ZD(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):CG(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Sme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Cme(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nY(r.key),r)}}function bme(t,e,a){return e&&Cme(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function xme(t,e,a){return e=qb(e),Pme(t,rY()?Reflect.construct(e,a||[],qb(t).constructor):e.apply(t,a))}function Pme(t,e){if(e&&(yv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Eme(t)}function Eme(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rY=function(){return!!t})()}function qb(t){return qb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},qb(t)}function Nme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jD(t,e)}function jD(t,e){return jD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},jD(t,e)}function ZD(t,e,a){return e=nY(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function nY(t){var e=Vme(t,"string");return yv(e)=="symbol"?e:e+""}function Vme(t,e){if(yv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(yv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var xG=1,zme=function(t){function e(){var a;Sme(this,e);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return a=xme(this,e,[].concat(s)),ZD(a,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),ZD(a,"handleKeyDown",function(h){if(h.key==="Escape"){var n,w,T,P;a.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(w=a.props.coordinate)===null||w===void 0?void 0:w.x)!==null&&n!==void 0?n:0,y:(T=(P=a.props.coordinate)===null||P===void 0?void 0:P.y)!==null&&T!==void 0?T:0}})}}),a}return Nme(e,t),bme(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>xG||Math.abs(r.height-this.state.lastBoundingBox.height)>xG)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,s=this.props,l=s.active,h=s.allowEscapeViewBox,n=s.animationDuration,w=s.animationEasing,T=s.children,P=s.coordinate,z=s.hasPayload,k=s.isAnimationActive,U=s.offset,Z=s.position,H=s.reverseDirection,q=s.useTranslate3d,J=s.viewBox,re=s.wrapperStyle,ce=Tme({allowEscapeViewBox:h,coordinate:P,offsetTopLeft:U,position:Z,reverseDirection:H,tooltipBox:this.state.lastBoundingBox,useTranslate3d:q,viewBox:J}),ye=ce.cssClasses,he=ce.cssProperties,_e=bG(bG({transition:k&&l?"transform ".concat(n,"ms ").concat(w):void 0},he),{},{pointerEvents:"none",visibility:!this.state.dismissed&&l&&z?"visible":"hidden",position:"absolute",top:0,left:0},re);return Vt.createElement("div",{tabIndex:-1,className:ye,style:_e,ref:function(Re){r.wrapperNode=Re}},T)}}])}(nt.PureComponent),Ome=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Dy={isSsr:Ome()};function gv(t){"@babel/helpers - typeof";return gv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gv(t)}function PG(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function EG(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?PG(Object(a),!0).forEach(function(r){o4(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):PG(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Dme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mme(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,sY(r.key),r)}}function Ime(t,e,a){return e&&Mme(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Lme(t,e,a){return e=Hb(e),Fme(t,iY()?Reflect.construct(e,a||[],Hb(t).constructor):e.apply(t,a))}function Fme(t,e){if(e&&(gv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ume(t)}function Ume(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iY=function(){return!!t})()}function Hb(t){return Hb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Hb(t)}function kme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qD(t,e)}function qD(t,e){return qD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},qD(t,e)}function o4(t,e,a){return e=sY(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function sY(t){var e=Bme(t,"string");return gv(e)=="symbol"?e:e+""}function Bme(t,e){if(gv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(gv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Gme(t){return t.dataKey}function jme(t,e){return Vt.isValidElement(t)?Vt.cloneElement(t,e):typeof t=="function"?Vt.createElement(t,e):Vt.createElement(gme,e)}var cu=function(t){function e(){return Dme(this,e),Lme(this,e,arguments)}return kme(e,t),Ime(e,[{key:"render",value:function(){var r=this,s=this.props,l=s.active,h=s.allowEscapeViewBox,n=s.animationDuration,w=s.animationEasing,T=s.content,P=s.coordinate,z=s.filterNull,k=s.isAnimationActive,U=s.offset,Z=s.payload,H=s.payloadUniqBy,q=s.position,J=s.reverseDirection,re=s.useTranslate3d,ce=s.viewBox,ye=s.wrapperStyle,he=Z??[];z&&he.length&&(he=YW(Z.filter(function(me){return me.value!=null&&(me.hide!==!0||r.props.includeHidden)}),H,Gme));var _e=he.length>0;return Vt.createElement(zme,{allowEscapeViewBox:h,animationDuration:n,animationEasing:w,isAnimationActive:k,active:l,coordinate:P,hasPayload:_e,offset:U,position:q,reverseDirection:J,useTranslate3d:re,viewBox:ce,wrapperStyle:ye},jme(T,EG(EG({},this.props),{},{payload:he})))}}])}(nt.PureComponent);o4(cu,"displayName","Tooltip");o4(cu,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Dy.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var nO,NG;function Zme(){if(NG)return nO;NG=1;var t=km(),e=function(){return t.Date.now()};return nO=e,nO}var iO,VG;function qme(){if(VG)return iO;VG=1;var t=/\s/;function e(a){for(var r=a.length;r--&&t.test(a.charAt(r)););return r}return iO=e,iO}var sO,zG;function Hme(){if(zG)return sO;zG=1;var t=qme(),e=/^\s+/;function a(r){return r&&r.slice(0,t(r)+1).replace(e,"")}return sO=a,sO}var oO,OG;function oY(){if(OG)return oO;OG=1;var t=Hme(),e=Xg(),a=t1(),r=NaN,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,h=/^0o[0-7]+$/i,n=parseInt;function w(T){if(typeof T=="number")return T;if(a(T))return r;if(e(T)){var P=typeof T.valueOf=="function"?T.valueOf():T;T=e(P)?P+"":P}if(typeof T!="string")return T===0?T:+T;T=t(T);var z=l.test(T);return z||h.test(T)?n(T.slice(2),z?2:8):s.test(T)?r:+T}return oO=w,oO}var lO,DG;function $me(){if(DG)return lO;DG=1;var t=Xg(),e=Zme(),a=oY(),r="Expected a function",s=Math.max,l=Math.min;function h(n,w,T){var P,z,k,U,Z,H,q=0,J=!1,re=!1,ce=!0;if(typeof n!="function")throw new TypeError(r);w=a(w)||0,t(T)&&(J=!!T.leading,re="maxWait"in T,k=re?s(a(T.maxWait)||0,w):k,ce="trailing"in T?!!T.trailing:ce);function ye(Me){var ze=P,Le=z;return P=z=void 0,q=Me,U=n.apply(Le,ze),U}function he(Me){return q=Me,Z=setTimeout(Re,w),J?ye(Me):U}function _e(Me){var ze=Me-H,Le=Me-q,Ie=w-ze;return re?l(Ie,k-Le):Ie}function me(Me){var ze=Me-H,Le=Me-q;return H===void 0||ze>=w||ze<0||re&&Le>=k}function Re(){var Me=e();if(me(Me))return be(Me);Z=setTimeout(Re,_e(Me))}function be(Me){return Z=void 0,ce&&P?ye(Me):(P=z=void 0,U)}function De(){Z!==void 0&&clearTimeout(Z),q=0,P=H=z=Z=void 0}function ie(){return Z===void 0?U:be(e())}function ge(){var Me=e(),ze=me(Me);if(P=arguments,z=this,H=Me,ze){if(Z===void 0)return he(H);if(re)return clearTimeout(Z),Z=setTimeout(Re,w),ye(H)}return Z===void 0&&(Z=setTimeout(Re,w)),U}return ge.cancel=De,ge.flush=ie,ge}return lO=h,lO}var uO,MG;function Kme(){if(MG)return uO;MG=1;var t=$me(),e=Xg(),a="Expected a function";function r(s,l,h){var n=!0,w=!0;if(typeof s!="function")throw new TypeError(a);return e(h)&&(n="leading"in h?!!h.leading:n,w="trailing"in h?!!h.trailing:w),t(s,l,{leading:n,maxWait:l,trailing:w})}return uO=r,uO}var Wme=Kme();const lY=Ji(Wme);function DR(t){"@babel/helpers - typeof";return DR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},DR(t)}function IG(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function _C(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?IG(Object(a),!0).forEach(function(r){Yme(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):IG(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Yme(t,e,a){return e=Xme(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Xme(t){var e=Jme(t,"string");return DR(e)=="symbol"?e:e+""}function Jme(t,e){if(DR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(DR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qme(t,e){return rye(t)||aye(t,e)||tye(t,e)||eye()}function eye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tye(t,e){if(t){if(typeof t=="string")return LG(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return LG(t,e)}}function LG(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function aye(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,s,l,h,n=[],w=!0,T=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(w=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);w=!0);}catch(P){T=!0,s=P}finally{try{if(!w&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(T)throw s}}return n}}function rye(t){if(Array.isArray(t))return t}var Pp=nt.forwardRef(function(t,e){var a=t.aspect,r=t.initialDimension,s=r===void 0?{width:-1,height:-1}:r,l=t.width,h=l===void 0?"100%":l,n=t.height,w=n===void 0?"100%":n,T=t.minWidth,P=T===void 0?0:T,z=t.minHeight,k=t.maxHeight,U=t.children,Z=t.debounce,H=Z===void 0?0:Z,q=t.id,J=t.className,re=t.onResize,ce=t.style,ye=ce===void 0?{}:ce,he=nt.useRef(null),_e=nt.useRef();_e.current=re,nt.useImperativeHandle(e,function(){return Object.defineProperty(he.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),he.current},configurable:!0})});var me=nt.useState({containerWidth:s.width,containerHeight:s.height}),Re=Qme(me,2),be=Re[0],De=Re[1],ie=nt.useCallback(function(Me,ze){De(function(Le){var Ie=Math.round(Me),Ze=Math.round(ze);return Le.containerWidth===Ie&&Le.containerHeight===Ze?Le:{containerWidth:Ie,containerHeight:Ze}})},[]);nt.useEffect(function(){var Me=function(tt){var Ue,He=tt[0].contentRect,Ce=He.width,Se=He.height;ie(Ce,Se),(Ue=_e.current)===null||Ue===void 0||Ue.call(_e,Ce,Se)};H>0&&(Me=lY(Me,H,{trailing:!0,leading:!1}));var ze=new ResizeObserver(Me),Le=he.current.getBoundingClientRect(),Ie=Le.width,Ze=Le.height;return ie(Ie,Ze),ze.observe(he.current),function(){ze.disconnect()}},[ie,H]);var ge=nt.useMemo(function(){var Me=be.containerWidth,ze=be.containerHeight;if(Me<0||ze<0)return null;Mp(QA(h)||QA(w),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,h,w),Mp(!a||a>0,"The aspect(%s) must be greater than zero.",a);var Le=QA(h)?Me:h,Ie=QA(w)?ze:w;a&&a>0&&(Le?Ie=Le/a:Ie&&(Le=Ie*a),k&&Ie>k&&(Ie=k)),Mp(Le>0||Ie>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Le,Ie,h,w,P,z,a);var Ze=!Array.isArray(U)&&_y(U.type).endsWith("Chart");return Vt.Children.map(U,function(ke){return Vt.isValidElement(ke)?nt.cloneElement(ke,_C({width:Le,height:Ie},Ze?{style:_C({height:"100%",width:"100%",maxHeight:Ie,maxWidth:Le},ke.props.style)}:{})):ke})},[a,U,w,k,z,P,be,h]);return Vt.createElement("div",{id:q?"".concat(q):void 0,className:ci("recharts-responsive-container",J),style:_C(_C({},ye),{},{width:h,height:w,minWidth:P,minHeight:z,maxHeight:k}),ref:he},ge)}),Av=function(e){return null};Av.displayName="Cell";function MR(t){"@babel/helpers - typeof";return MR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},MR(t)}function FG(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function HD(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?FG(Object(a),!0).forEach(function(r){nye(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):FG(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function nye(t,e,a){return e=iye(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function iye(t){var e=sye(t,"string");return MR(e)=="symbol"?e:e+""}function sye(t,e){if(MR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(MR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var T_={widthCache:{},cacheCount:0},oye=2e3,lye={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},UG="recharts_measurement_span";function uye(t){var e=HD({},t);return Object.keys(e).forEach(function(a){e[a]||delete e[a]}),e}var eR=function(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Dy.isSsr)return{width:0,height:0};var r=uye(a),s=JSON.stringify({text:e,copyStyle:r});if(T_.widthCache[s])return T_.widthCache[s];try{var l=document.getElementById(UG);l||(l=document.createElement("span"),l.setAttribute("id",UG),l.setAttribute("aria-hidden","true"),document.body.appendChild(l));var h=HD(HD({},lye),r);Object.assign(l.style,h),l.textContent="".concat(e);var n=l.getBoundingClientRect(),w={width:n.width,height:n.height};return T_.widthCache[s]=w,++T_.cacheCount>oye&&(T_.cacheCount=0,T_.widthCache={}),w}catch{return{width:0,height:0}}},cye=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function IR(t){"@babel/helpers - typeof";return IR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},IR(t)}function $b(t,e){return pye(t)||fye(t,e)||hye(t,e)||dye()}function dye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hye(t,e){if(t){if(typeof t=="string")return kG(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return kG(t,e)}}function kG(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function fye(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,s,l,h,n=[],w=!0,T=!1;try{if(l=(a=a.call(t)).next,e===0){if(Object(a)!==a)return;w=!1}else for(;!(w=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);w=!0);}catch(P){T=!0,s=P}finally{try{if(!w&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(T)throw s}}return n}}function pye(t){if(Array.isArray(t))return t}function mye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function BG(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gye(r.key),r)}}function yye(t,e,a){return e&&BG(t.prototype,e),a&&BG(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function gye(t){var e=Aye(t,"string");return IR(e)=="symbol"?e:e+""}function Aye(t,e){if(IR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(IR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var GG=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,jG=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,_ye=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,vye=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,uY={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},wye=Object.keys(uY),F_="NaN";function Rye(t,e){return t*uY[e]}var vC=function(){function t(e,a){mye(this,t),this.num=e,this.unit=a,this.num=e,this.unit=a,Number.isNaN(e)&&(this.unit=""),a!==""&&!_ye.test(a)&&(this.num=NaN,this.unit=""),wye.includes(a)&&(this.num=Rye(e,a),this.unit="px")}return yye(t,[{key:"add",value:function(a){return this.unit!==a.unit?new t(NaN,""):new t(this.num+a.num,this.unit)}},{key:"subtract",value:function(a){return this.unit!==a.unit?new t(NaN,""):new t(this.num-a.num,this.unit)}},{key:"multiply",value:function(a){return this.unit!==""&&a.unit!==""&&this.unit!==a.unit?new t(NaN,""):new t(this.num*a.num,this.unit||a.unit)}},{key:"divide",value:function(a){return this.unit!==""&&a.unit!==""&&this.unit!==a.unit?new t(NaN,""):new t(this.num/a.num,this.unit||a.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(a){var r,s=(r=vye.exec(a))!==null&&r!==void 0?r:[],l=$b(s,3),h=l[1],n=l[2];return new t(parseFloat(h),n??"")}}])}();function cY(t){if(t.includes(F_))return F_;for(var e=t;e.includes("*")||e.includes("/");){var a,r=(a=GG.exec(e))!==null&&a!==void 0?a:[],s=$b(r,4),l=s[1],h=s[2],n=s[3],w=vC.parse(l??""),T=vC.parse(n??""),P=h==="*"?w.multiply(T):w.divide(T);if(P.isNaN())return F_;e=e.replace(GG,P.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var z,k=(z=jG.exec(e))!==null&&z!==void 0?z:[],U=$b(k,4),Z=U[1],H=U[2],q=U[3],J=vC.parse(Z??""),re=vC.parse(q??""),ce=H==="+"?J.add(re):J.subtract(re);if(ce.isNaN())return F_;e=e.replace(jG,ce.toString())}return e}var ZG=/\(([^()]*)\)/;function Tye(t){for(var e=t;e.includes("(");){var a=ZG.exec(e),r=$b(a,2),s=r[1];e=e.replace(ZG,cY(s))}return e}function Sye(t){var e=t.replace(/\s+/g,"");return e=Tye(e),e=cY(e),e}function Cye(t){try{return Sye(t)}catch{return F_}}function cO(t){var e=Cye(t.slice(5,-1));return e===F_?"":e}var bye=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],xye=["dx","dy","angle","className","breakAll"];function $D(){return $D=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},$D.apply(this,arguments)}function qG(t,e){if(t==null)return{};var a=Pye(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Pye(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function HG(t,e){return zye(t)||Vye(t,e)||Nye(t,e)||Eye()}function Eye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nye(t,e){if(t){if(typeof t=="string")return $G(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return $G(t,e)}}function $G(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function Vye(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,s,l,h,n=[],w=!0,T=!1;try{if(l=(a=a.call(t)).next,e===0){if(Object(a)!==a)return;w=!1}else for(;!(w=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);w=!0);}catch(P){T=!0,s=P}finally{try{if(!w&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(T)throw s}}return n}}function zye(t){if(Array.isArray(t))return t}var dY=/[ \f\n\r\t\v\u2028\u2029]+/,hY=function(e){var a=e.children,r=e.breakAll,s=e.style;try{var l=[];Un(a)||(r?l=a.toString().split(""):l=a.toString().split(dY));var h=l.map(function(w){return{word:w,width:eR(w,s).width}}),n=r?0:eR("",s).width;return{wordsWithComputedWidth:h,spaceWidth:n}}catch{return null}},Oye=function(e,a,r,s,l){var h=e.maxLines,n=e.children,w=e.style,T=e.breakAll,P=yr(h),z=n,k=function(){var Le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Le.reduce(function(Ie,Ze){var ke=Ze.word,tt=Ze.width,Ue=Ie[Ie.length-1];if(Ue&&(s==null||l||Ue.width+tt+r<Number(s)))Ue.words.push(ke),Ue.width+=tt+r;else{var He={words:[ke],width:tt};Ie.push(He)}return Ie},[])},U=k(a),Z=function(Le){return Le.reduce(function(Ie,Ze){return Ie.width>Ze.width?Ie:Ze})};if(!P)return U;for(var H="",q=function(Le){var Ie=z.slice(0,Le),Ze=hY({breakAll:T,style:w,children:Ie+H}).wordsWithComputedWidth,ke=k(Ze),tt=ke.length>h||Z(ke).width>Number(s);return[tt,ke]},J=0,re=z.length-1,ce=0,ye;J<=re&&ce<=z.length-1;){var he=Math.floor((J+re)/2),_e=he-1,me=q(_e),Re=HG(me,2),be=Re[0],De=Re[1],ie=q(he),ge=HG(ie,1),Me=ge[0];if(!be&&!Me&&(J=he+1),be&&Me&&(re=he-1),!be&&Me){ye=De;break}ce++}return ye||U},KG=function(e){var a=Un(e)?[]:e.toString().split(dY);return[{words:a}]},Dye=function(e){var a=e.width,r=e.scaleToFit,s=e.children,l=e.style,h=e.breakAll,n=e.maxLines;if((a||r)&&!Dy.isSsr){var w,T,P=hY({breakAll:h,children:s,style:l});if(P){var z=P.wordsWithComputedWidth,k=P.spaceWidth;w=z,T=k}else return KG(s);return Oye({breakAll:h,children:s,maxLines:n,style:l},w,T,a,r)}return KG(s)},WG="#808080",_0=function(e){var a=e.x,r=a===void 0?0:a,s=e.y,l=s===void 0?0:s,h=e.lineHeight,n=h===void 0?"1em":h,w=e.capHeight,T=w===void 0?"0.71em":w,P=e.scaleToFit,z=P===void 0?!1:P,k=e.textAnchor,U=k===void 0?"start":k,Z=e.verticalAnchor,H=Z===void 0?"end":Z,q=e.fill,J=q===void 0?WG:q,re=qG(e,bye),ce=nt.useMemo(function(){return Dye({breakAll:re.breakAll,children:re.children,maxLines:re.maxLines,scaleToFit:z,style:re.style,width:re.width})},[re.breakAll,re.children,re.maxLines,z,re.style,re.width]),ye=re.dx,he=re.dy,_e=re.angle,me=re.className,Re=re.breakAll,be=qG(re,xye);if(!Fu(r)||!Fu(l))return null;var De=r+(yr(ye)?ye:0),ie=l+(yr(he)?he:0),ge;switch(H){case"start":ge=cO("calc(".concat(T,")"));break;case"middle":ge=cO("calc(".concat((ce.length-1)/2," * -").concat(n," + (").concat(T," / 2))"));break;default:ge=cO("calc(".concat(ce.length-1," * -").concat(n,")"));break}var Me=[];if(z){var ze=ce[0].width,Le=re.width;Me.push("scale(".concat((yr(Le)?Le/ze:1)/ze,")"))}return _e&&Me.push("rotate(".concat(_e,", ").concat(De,", ").concat(ie,")")),Me.length&&(be.transform=Me.join(" ")),Vt.createElement("text",$D({},ln(be,!0),{x:De,y:ie,className:ci("recharts-text",me),textAnchor:U,fill:J.includes("url")?WG:J}),ce.map(function(Ie,Ze){var ke=Ie.words.join(Re?"":" ");return Vt.createElement("tspan",{x:De,dy:Ze===0?ge:n,key:"".concat(ke,"-").concat(Ze)},ke)}))};function Ig(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Mye(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function l4(t){let e,a,r;t.length!==2?(e=Ig,a=(n,w)=>Ig(t(n),w),r=(n,w)=>t(n)-w):(e=t===Ig||t===Mye?t:Iye,a=t,r=t);function s(n,w,T=0,P=n.length){if(T<P){if(e(w,w)!==0)return P;do{const z=T+P>>>1;a(n[z],w)<0?T=z+1:P=z}while(T<P)}return T}function l(n,w,T=0,P=n.length){if(T<P){if(e(w,w)!==0)return P;do{const z=T+P>>>1;a(n[z],w)<=0?T=z+1:P=z}while(T<P)}return T}function h(n,w,T=0,P=n.length){const z=s(n,w,T,P-1);return z>T&&r(n[z-1],w)>-r(n[z],w)?z-1:z}return{left:s,center:h,right:l}}function Iye(){return 0}function fY(t){return t===null?NaN:+t}function*Lye(t,e){for(let a of t)a!=null&&(a=+a)>=a&&(yield a)}const Fye=l4(Ig),BT=Fye.right;l4(fY).center;class YG extends Map{constructor(e,a=Bye){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),e!=null)for(const[r,s]of e)this.set(r,s)}get(e){return super.get(XG(this,e))}has(e){return super.has(XG(this,e))}set(e,a){return super.set(Uye(this,e),a)}delete(e){return super.delete(kye(this,e))}}function XG({_intern:t,_key:e},a){const r=e(a);return t.has(r)?t.get(r):a}function Uye({_intern:t,_key:e},a){const r=e(a);return t.has(r)?t.get(r):(t.set(r,a),a)}function kye({_intern:t,_key:e},a){const r=e(a);return t.has(r)&&(a=t.get(r),t.delete(r)),a}function Bye(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Gye(t=Ig){if(t===Ig)return pY;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,a)=>{const r=t(e,a);return r||r===0?r:(t(a,a)===0)-(t(e,e)===0)}}function pY(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const jye=Math.sqrt(50),Zye=Math.sqrt(10),qye=Math.sqrt(2);function Kb(t,e,a){const r=(e-t)/Math.max(0,a),s=Math.floor(Math.log10(r)),l=r/Math.pow(10,s),h=l>=jye?10:l>=Zye?5:l>=qye?2:1;let n,w,T;return s<0?(T=Math.pow(10,-s)/h,n=Math.round(t*T),w=Math.round(e*T),n/T<t&&++n,w/T>e&&--w,T=-T):(T=Math.pow(10,s)*h,n=Math.round(t/T),w=Math.round(e/T),n*T<t&&++n,w*T>e&&--w),w<n&&.5<=a&&a<2?Kb(t,e,a*2):[n,w,T]}function KD(t,e,a){if(e=+e,t=+t,a=+a,!(a>0))return[];if(t===e)return[t];const r=e<t,[s,l,h]=r?Kb(e,t,a):Kb(t,e,a);if(!(l>=s))return[];const n=l-s+1,w=new Array(n);if(r)if(h<0)for(let T=0;T<n;++T)w[T]=(l-T)/-h;else for(let T=0;T<n;++T)w[T]=(l-T)*h;else if(h<0)for(let T=0;T<n;++T)w[T]=(s+T)/-h;else for(let T=0;T<n;++T)w[T]=(s+T)*h;return w}function WD(t,e,a){return e=+e,t=+t,a=+a,Kb(t,e,a)[2]}function YD(t,e,a){e=+e,t=+t,a=+a;const r=e<t,s=r?WD(e,t,a):WD(t,e,a);return(r?-1:1)*(s<0?1/-s:s)}function JG(t,e){let a;for(const r of t)r!=null&&(a<r||a===void 0&&r>=r)&&(a=r);return a}function QG(t,e){let a;for(const r of t)r!=null&&(a>r||a===void 0&&r>=r)&&(a=r);return a}function mY(t,e,a=0,r=1/0,s){if(e=Math.floor(e),a=Math.floor(Math.max(0,a)),r=Math.floor(Math.min(t.length-1,r)),!(a<=e&&e<=r))return t;for(s=s===void 0?pY:Gye(s);r>a;){if(r-a>600){const w=r-a+1,T=e-a+1,P=Math.log(w),z=.5*Math.exp(2*P/3),k=.5*Math.sqrt(P*z*(w-z)/w)*(T-w/2<0?-1:1),U=Math.max(a,Math.floor(e-T*z/w+k)),Z=Math.min(r,Math.floor(e+(w-T)*z/w+k));mY(t,e,U,Z,s)}const l=t[e];let h=a,n=r;for(Tw(t,a,e),s(t[r],l)>0&&Tw(t,a,r);h<n;){for(Tw(t,h,n),++h,--n;s(t[h],l)<0;)++h;for(;s(t[n],l)>0;)--n}s(t[a],l)===0?Tw(t,a,n):(++n,Tw(t,n,r)),n<=e&&(a=n+1),e<=n&&(r=n-1)}return t}function Tw(t,e,a){const r=t[e];t[e]=t[a],t[a]=r}function Hye(t,e,a){if(t=Float64Array.from(Lye(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return QG(t);if(e>=1)return JG(t);var r,s=(r-1)*e,l=Math.floor(s),h=JG(mY(t,l).subarray(0,l+1)),n=QG(t.subarray(l+1));return h+(n-h)*(s-l)}}function $ye(t,e,a=fY){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+a(t[0],0,t);if(e>=1)return+a(t[r-1],r-1,t);var r,s=(r-1)*e,l=Math.floor(s),h=+a(t[l],l,t),n=+a(t[l+1],l+1,t);return h+(n-h)*(s-l)}}function Kye(t,e,a){t=+t,e=+e,a=(s=arguments.length)<2?(e=t,t=0,1):s<3?1:+a;for(var r=-1,s=Math.max(0,Math.ceil((e-t)/a))|0,l=new Array(s);++r<s;)l[r]=t+r*a;return l}function Wf(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function My(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const XD=Symbol("implicit");function u4(){var t=new YG,e=[],a=[],r=XD;function s(l){let h=t.get(l);if(h===void 0){if(r!==XD)return r;t.set(l,h=e.push(l)-1)}return a[h%a.length]}return s.domain=function(l){if(!arguments.length)return e.slice();e=[],t=new YG;for(const h of l)t.has(h)||t.set(h,e.push(h)-1);return s},s.range=function(l){return arguments.length?(a=Array.from(l),s):a.slice()},s.unknown=function(l){return arguments.length?(r=l,s):r},s.copy=function(){return u4(e,a).unknown(r)},Wf.apply(s,arguments),s}function LR(){var t=u4().unknown(void 0),e=t.domain,a=t.range,r=0,s=1,l,h,n=!1,w=0,T=0,P=.5;delete t.unknown;function z(){var k=e().length,U=s<r,Z=U?s:r,H=U?r:s;l=(H-Z)/Math.max(1,k-w+T*2),n&&(l=Math.floor(l)),Z+=(H-Z-l*(k-w))*P,h=l*(1-w),n&&(Z=Math.round(Z),h=Math.round(h));var q=Kye(k).map(function(J){return Z+l*J});return a(U?q.reverse():q)}return t.domain=function(k){return arguments.length?(e(k),z()):e()},t.range=function(k){return arguments.length?([r,s]=k,r=+r,s=+s,z()):[r,s]},t.rangeRound=function(k){return[r,s]=k,r=+r,s=+s,n=!0,z()},t.bandwidth=function(){return h},t.step=function(){return l},t.round=function(k){return arguments.length?(n=!!k,z()):n},t.padding=function(k){return arguments.length?(w=Math.min(1,T=+k),z()):w},t.paddingInner=function(k){return arguments.length?(w=Math.min(1,k),z()):w},t.paddingOuter=function(k){return arguments.length?(T=+k,z()):T},t.align=function(k){return arguments.length?(P=Math.max(0,Math.min(1,k)),z()):P},t.copy=function(){return LR(e(),[r,s]).round(n).paddingInner(w).paddingOuter(T).align(P)},Wf.apply(z(),arguments)}function yY(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return yY(e())},t}function tR(){return yY(LR.apply(null,arguments).paddingInner(1))}function c4(t,e,a){t.prototype=e.prototype=a,a.constructor=t}function gY(t,e){var a=Object.create(t.prototype);for(var r in e)a[r]=e[r];return a}function GT(){}var FR=.7,Wb=1/FR,J_="\\s*([+-]?\\d+)\\s*",UR="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",zm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Wye=/^#([0-9a-f]{3,8})$/,Yye=new RegExp(`^rgb\\(${J_},${J_},${J_}\\)$`),Xye=new RegExp(`^rgb\\(${zm},${zm},${zm}\\)$`),Jye=new RegExp(`^rgba\\(${J_},${J_},${J_},${UR}\\)$`),Qye=new RegExp(`^rgba\\(${zm},${zm},${zm},${UR}\\)$`),ege=new RegExp(`^hsl\\(${UR},${zm},${zm}\\)$`),tge=new RegExp(`^hsla\\(${UR},${zm},${zm},${UR}\\)$`),e7={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};c4(GT,kR,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:t7,formatHex:t7,formatHex8:age,formatHsl:rge,formatRgb:a7,toString:a7});function t7(){return this.rgb().formatHex()}function age(){return this.rgb().formatHex8()}function rge(){return AY(this).formatHsl()}function a7(){return this.rgb().formatRgb()}function kR(t){var e,a;return t=(t+"").trim().toLowerCase(),(e=Wye.exec(t))?(a=e[1].length,e=parseInt(e[1],16),a===6?r7(e):a===3?new Eh(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):a===8?wC(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):a===4?wC(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Yye.exec(t))?new Eh(e[1],e[2],e[3],1):(e=Xye.exec(t))?new Eh(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Jye.exec(t))?wC(e[1],e[2],e[3],e[4]):(e=Qye.exec(t))?wC(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=ege.exec(t))?s7(e[1],e[2]/100,e[3]/100,1):(e=tge.exec(t))?s7(e[1],e[2]/100,e[3]/100,e[4]):e7.hasOwnProperty(t)?r7(e7[t]):t==="transparent"?new Eh(NaN,NaN,NaN,0):null}function r7(t){return new Eh(t>>16&255,t>>8&255,t&255,1)}function wC(t,e,a,r){return r<=0&&(t=e=a=NaN),new Eh(t,e,a,r)}function nge(t){return t instanceof GT||(t=kR(t)),t?(t=t.rgb(),new Eh(t.r,t.g,t.b,t.opacity)):new Eh}function JD(t,e,a,r){return arguments.length===1?nge(t):new Eh(t,e,a,r??1)}function Eh(t,e,a,r){this.r=+t,this.g=+e,this.b=+a,this.opacity=+r}c4(Eh,JD,gY(GT,{brighter(t){return t=t==null?Wb:Math.pow(Wb,t),new Eh(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?FR:Math.pow(FR,t),new Eh(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Eh(o0(this.r),o0(this.g),o0(this.b),Yb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:n7,formatHex:n7,formatHex8:ige,formatRgb:i7,toString:i7}));function n7(){return`#${e0(this.r)}${e0(this.g)}${e0(this.b)}`}function ige(){return`#${e0(this.r)}${e0(this.g)}${e0(this.b)}${e0((isNaN(this.opacity)?1:this.opacity)*255)}`}function i7(){const t=Yb(this.opacity);return`${t===1?"rgb(":"rgba("}${o0(this.r)}, ${o0(this.g)}, ${o0(this.b)}${t===1?")":`, ${t})`}`}function Yb(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function o0(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function e0(t){return t=o0(t),(t<16?"0":"")+t.toString(16)}function s7(t,e,a,r){return r<=0?t=e=a=NaN:a<=0||a>=1?t=e=NaN:e<=0&&(t=NaN),new Dp(t,e,a,r)}function AY(t){if(t instanceof Dp)return new Dp(t.h,t.s,t.l,t.opacity);if(t instanceof GT||(t=kR(t)),!t)return new Dp;if(t instanceof Dp)return t;t=t.rgb();var e=t.r/255,a=t.g/255,r=t.b/255,s=Math.min(e,a,r),l=Math.max(e,a,r),h=NaN,n=l-s,w=(l+s)/2;return n?(e===l?h=(a-r)/n+(a<r)*6:a===l?h=(r-e)/n+2:h=(e-a)/n+4,n/=w<.5?l+s:2-l-s,h*=60):n=w>0&&w<1?0:h,new Dp(h,n,w,t.opacity)}function sge(t,e,a,r){return arguments.length===1?AY(t):new Dp(t,e,a,r??1)}function Dp(t,e,a,r){this.h=+t,this.s=+e,this.l=+a,this.opacity=+r}c4(Dp,sge,gY(GT,{brighter(t){return t=t==null?Wb:Math.pow(Wb,t),new Dp(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?FR:Math.pow(FR,t),new Dp(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,a=this.l,r=a+(a<.5?a:1-a)*e,s=2*a-r;return new Eh(dO(t>=240?t-240:t+120,s,r),dO(t,s,r),dO(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new Dp(o7(this.h),RC(this.s),RC(this.l),Yb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Yb(this.opacity);return`${t===1?"hsl(":"hsla("}${o7(this.h)}, ${RC(this.s)*100}%, ${RC(this.l)*100}%${t===1?")":`, ${t})`}`}}));function o7(t){return t=(t||0)%360,t<0?t+360:t}function RC(t){return Math.max(0,Math.min(1,t||0))}function dO(t,e,a){return(t<60?e+(a-e)*t/60:t<180?a:t<240?e+(a-e)*(240-t)/60:e)*255}const d4=t=>()=>t;function oge(t,e){return function(a){return t+a*e}}function lge(t,e,a){return t=Math.pow(t,a),e=Math.pow(e,a)-t,a=1/a,function(r){return Math.pow(t+r*e,a)}}function uge(t){return(t=+t)==1?_Y:function(e,a){return a-e?lge(e,a,t):d4(isNaN(e)?a:e)}}function _Y(t,e){var a=e-t;return a?oge(t,a):d4(isNaN(t)?e:t)}const l7=function t(e){var a=uge(e);function r(s,l){var h=a((s=JD(s)).r,(l=JD(l)).r),n=a(s.g,l.g),w=a(s.b,l.b),T=_Y(s.opacity,l.opacity);return function(P){return s.r=h(P),s.g=n(P),s.b=w(P),s.opacity=T(P),s+""}}return r.gamma=t,r}(1);function cge(t,e){e||(e=[]);var a=t?Math.min(e.length,t.length):0,r=e.slice(),s;return function(l){for(s=0;s<a;++s)r[s]=t[s]*(1-l)+e[s]*l;return r}}function dge(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function hge(t,e){var a=e?e.length:0,r=t?Math.min(a,t.length):0,s=new Array(r),l=new Array(a),h;for(h=0;h<r;++h)s[h]=i1(t[h],e[h]);for(;h<a;++h)l[h]=e[h];return function(n){for(h=0;h<r;++h)l[h]=s[h](n);return l}}function fge(t,e){var a=new Date;return t=+t,e=+e,function(r){return a.setTime(t*(1-r)+e*r),a}}function Xb(t,e){return t=+t,e=+e,function(a){return t*(1-a)+e*a}}function pge(t,e){var a={},r={},s;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in t?a[s]=i1(t[s],e[s]):r[s]=e[s];return function(l){for(s in a)r[s]=a[s](l);return r}}var QD=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hO=new RegExp(QD.source,"g");function mge(t){return function(){return t}}function yge(t){return function(e){return t(e)+""}}function gge(t,e){var a=QD.lastIndex=hO.lastIndex=0,r,s,l,h=-1,n=[],w=[];for(t=t+"",e=e+"";(r=QD.exec(t))&&(s=hO.exec(e));)(l=s.index)>a&&(l=e.slice(a,l),n[h]?n[h]+=l:n[++h]=l),(r=r[0])===(s=s[0])?n[h]?n[h]+=s:n[++h]=s:(n[++h]=null,w.push({i:h,x:Xb(r,s)})),a=hO.lastIndex;return a<e.length&&(l=e.slice(a),n[h]?n[h]+=l:n[++h]=l),n.length<2?w[0]?yge(w[0].x):mge(e):(e=w.length,function(T){for(var P=0,z;P<e;++P)n[(z=w[P]).i]=z.x(T);return n.join("")})}function i1(t,e){var a=typeof e,r;return e==null||a==="boolean"?d4(e):(a==="number"?Xb:a==="string"?(r=kR(e))?(e=r,l7):gge:e instanceof kR?l7:e instanceof Date?fge:dge(e)?cge:Array.isArray(e)?hge:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?pge:Xb)(t,e)}function h4(t,e){return t=+t,e=+e,function(a){return Math.round(t*(1-a)+e*a)}}function Age(t,e){e===void 0&&(e=t,t=i1);for(var a=0,r=e.length-1,s=e[0],l=new Array(r<0?0:r);a<r;)l[a]=t(s,s=e[++a]);return function(h){var n=Math.max(0,Math.min(r-1,Math.floor(h*=r)));return l[n](h-n)}}function _ge(t){return function(){return t}}function Jb(t){return+t}var u7=[0,1];function th(t){return t}function eM(t,e){return(e-=t=+t)?function(a){return(a-t)/e}:_ge(isNaN(e)?NaN:.5)}function vge(t,e){var a;return t>e&&(a=t,t=e,e=a),function(r){return Math.max(t,Math.min(e,r))}}function wge(t,e,a){var r=t[0],s=t[1],l=e[0],h=e[1];return s<r?(r=eM(s,r),l=a(h,l)):(r=eM(r,s),l=a(l,h)),function(n){return l(r(n))}}function Rge(t,e,a){var r=Math.min(t.length,e.length)-1,s=new Array(r),l=new Array(r),h=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++h<r;)s[h]=eM(t[h],t[h+1]),l[h]=a(e[h],e[h+1]);return function(n){var w=BT(t,n,1,r)-1;return l[w](s[w](n))}}function jT(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function j2(){var t=u7,e=u7,a=i1,r,s,l,h=th,n,w,T;function P(){var k=Math.min(t.length,e.length);return h!==th&&(h=vge(t[0],t[k-1])),n=k>2?Rge:wge,w=T=null,z}function z(k){return k==null||isNaN(k=+k)?l:(w||(w=n(t.map(r),e,a)))(r(h(k)))}return z.invert=function(k){return h(s((T||(T=n(e,t.map(r),Xb)))(k)))},z.domain=function(k){return arguments.length?(t=Array.from(k,Jb),P()):t.slice()},z.range=function(k){return arguments.length?(e=Array.from(k),P()):e.slice()},z.rangeRound=function(k){return e=Array.from(k),a=h4,P()},z.clamp=function(k){return arguments.length?(h=k?!0:th,P()):h!==th},z.interpolate=function(k){return arguments.length?(a=k,P()):a},z.unknown=function(k){return arguments.length?(l=k,z):l},function(k,U){return r=k,s=U,P()}}function f4(){return j2()(th,th)}function Tge(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Qb(t,e){if((a=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var a,r=t.slice(0,a);return[r.length>1?r[0]+r.slice(2):r,+t.slice(a+1)]}function _v(t){return t=Qb(Math.abs(t)),t?t[1]:NaN}function Sge(t,e){return function(a,r){for(var s=a.length,l=[],h=0,n=t[0],w=0;s>0&&n>0&&(w+n+1>r&&(n=Math.max(1,r-w)),l.push(a.substring(s-=n,s+n)),!((w+=n+1)>r));)n=t[h=(h+1)%t.length];return l.reverse().join(e)}}function Cge(t){return function(e){return e.replace(/[0-9]/g,function(a){return t[+a]})}}var bge=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function BR(t){if(!(e=bge.exec(t)))throw new Error("invalid format: "+t);var e;return new p4({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}BR.prototype=p4.prototype;function p4(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}p4.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function xge(t){e:for(var e=t.length,a=1,r=-1,s;a<e;++a)switch(t[a]){case".":r=s=a;break;case"0":r===0&&(r=a),s=a;break;default:if(!+t[a])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(s+1):t}var vY;function Pge(t,e){var a=Qb(t,e);if(!a)return t+"";var r=a[0],s=a[1],l=s-(vY=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,h=r.length;return l===h?r:l>h?r+new Array(l-h+1).join("0"):l>0?r.slice(0,l)+"."+r.slice(l):"0."+new Array(1-l).join("0")+Qb(t,Math.max(0,e+l-1))[0]}function c7(t,e){var a=Qb(t,e);if(!a)return t+"";var r=a[0],s=a[1];return s<0?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}const d7={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Tge,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>c7(t*100,e),r:c7,s:Pge,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function h7(t){return t}var f7=Array.prototype.map,p7=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Ege(t){var e=t.grouping===void 0||t.thousands===void 0?h7:Sge(f7.call(t.grouping,Number),t.thousands+""),a=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",s=t.decimal===void 0?".":t.decimal+"",l=t.numerals===void 0?h7:Cge(f7.call(t.numerals,String)),h=t.percent===void 0?"%":t.percent+"",n=t.minus===void 0?"":t.minus+"",w=t.nan===void 0?"NaN":t.nan+"";function T(z){z=BR(z);var k=z.fill,U=z.align,Z=z.sign,H=z.symbol,q=z.zero,J=z.width,re=z.comma,ce=z.precision,ye=z.trim,he=z.type;he==="n"?(re=!0,he="g"):d7[he]||(ce===void 0&&(ce=12),ye=!0,he="g"),(q||k==="0"&&U==="=")&&(q=!0,k="0",U="=");var _e=H==="$"?a:H==="#"&&/[boxX]/.test(he)?"0"+he.toLowerCase():"",me=H==="$"?r:/[%p]/.test(he)?h:"",Re=d7[he],be=/[defgprs%]/.test(he);ce=ce===void 0?6:/[gprs]/.test(he)?Math.max(1,Math.min(21,ce)):Math.max(0,Math.min(20,ce));function De(ie){var ge=_e,Me=me,ze,Le,Ie;if(he==="c")Me=Re(ie)+Me,ie="";else{ie=+ie;var Ze=ie<0||1/ie<0;if(ie=isNaN(ie)?w:Re(Math.abs(ie),ce),ye&&(ie=xge(ie)),Ze&&+ie==0&&Z!=="+"&&(Ze=!1),ge=(Ze?Z==="("?Z:n:Z==="-"||Z==="("?"":Z)+ge,Me=(he==="s"?p7[8+vY/3]:"")+Me+(Ze&&Z==="("?")":""),be){for(ze=-1,Le=ie.length;++ze<Le;)if(Ie=ie.charCodeAt(ze),48>Ie||Ie>57){Me=(Ie===46?s+ie.slice(ze+1):ie.slice(ze))+Me,ie=ie.slice(0,ze);break}}}re&&!q&&(ie=e(ie,1/0));var ke=ge.length+ie.length+Me.length,tt=ke<J?new Array(J-ke+1).join(k):"";switch(re&&q&&(ie=e(tt+ie,tt.length?J-Me.length:1/0),tt=""),U){case"<":ie=ge+ie+Me+tt;break;case"=":ie=ge+tt+ie+Me;break;case"^":ie=tt.slice(0,ke=tt.length>>1)+ge+ie+Me+tt.slice(ke);break;default:ie=tt+ge+ie+Me;break}return l(ie)}return De.toString=function(){return z+""},De}function P(z,k){var U=T((z=BR(z),z.type="f",z)),Z=Math.max(-8,Math.min(8,Math.floor(_v(k)/3)))*3,H=Math.pow(10,-Z),q=p7[8+Z/3];return function(J){return U(H*J)+q}}return{format:T,formatPrefix:P}}var TC,m4,wY;Nge({thousands:",",grouping:[3],currency:["$",""]});function Nge(t){return TC=Ege(t),m4=TC.format,wY=TC.formatPrefix,TC}function Vge(t){return Math.max(0,-_v(Math.abs(t)))}function zge(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(_v(e)/3)))*3-_v(Math.abs(t)))}function Oge(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,_v(e)-_v(t))+1}function RY(t,e,a,r){var s=YD(t,e,a),l;switch(r=BR(r??",f"),r.type){case"s":{var h=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(l=zge(s,h))&&(r.precision=l),wY(r,h)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(l=Oge(s,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=l-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(l=Vge(s))&&(r.precision=l-(r.type==="%")*2);break}}return m4(r)}function Qg(t){var e=t.domain;return t.ticks=function(a){var r=e();return KD(r[0],r[r.length-1],a??10)},t.tickFormat=function(a,r){var s=e();return RY(s[0],s[s.length-1],a??10,r)},t.nice=function(a){a==null&&(a=10);var r=e(),s=0,l=r.length-1,h=r[s],n=r[l],w,T,P=10;for(n<h&&(T=h,h=n,n=T,T=s,s=l,l=T);P-- >0;){if(T=WD(h,n,a),T===w)return r[s]=h,r[l]=n,e(r);if(T>0)h=Math.floor(h/T)*T,n=Math.ceil(n/T)*T;else if(T<0)h=Math.ceil(h*T)/T,n=Math.floor(n*T)/T;else break;w=T}return t},t}function ex(){var t=f4();return t.copy=function(){return jT(t,ex())},Wf.apply(t,arguments),Qg(t)}function TY(t){var e;function a(r){return r==null||isNaN(r=+r)?e:r}return a.invert=a,a.domain=a.range=function(r){return arguments.length?(t=Array.from(r,Jb),a):t.slice()},a.unknown=function(r){return arguments.length?(e=r,a):e},a.copy=function(){return TY(t).unknown(e)},t=arguments.length?Array.from(t,Jb):[0,1],Qg(a)}function SY(t,e){t=t.slice();var a=0,r=t.length-1,s=t[a],l=t[r],h;return l<s&&(h=a,a=r,r=h,h=s,s=l,l=h),t[a]=e.floor(s),t[r]=e.ceil(l),t}function m7(t){return Math.log(t)}function y7(t){return Math.exp(t)}function Dge(t){return-Math.log(-t)}function Mge(t){return-Math.exp(-t)}function Ige(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Lge(t){return t===10?Ige:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Fge(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function g7(t){return(e,a)=>-t(-e,a)}function y4(t){const e=t(m7,y7),a=e.domain;let r=10,s,l;function h(){return s=Fge(r),l=Lge(r),a()[0]<0?(s=g7(s),l=g7(l),t(Dge,Mge)):t(m7,y7),e}return e.base=function(n){return arguments.length?(r=+n,h()):r},e.domain=function(n){return arguments.length?(a(n),h()):a()},e.ticks=n=>{const w=a();let T=w[0],P=w[w.length-1];const z=P<T;z&&([T,P]=[P,T]);let k=s(T),U=s(P),Z,H;const q=n==null?10:+n;let J=[];if(!(r%1)&&U-k<q){if(k=Math.floor(k),U=Math.ceil(U),T>0){for(;k<=U;++k)for(Z=1;Z<r;++Z)if(H=k<0?Z/l(-k):Z*l(k),!(H<T)){if(H>P)break;J.push(H)}}else for(;k<=U;++k)for(Z=r-1;Z>=1;--Z)if(H=k>0?Z/l(-k):Z*l(k),!(H<T)){if(H>P)break;J.push(H)}J.length*2<q&&(J=KD(T,P,q))}else J=KD(k,U,Math.min(U-k,q)).map(l);return z?J.reverse():J},e.tickFormat=(n,w)=>{if(n==null&&(n=10),w==null&&(w=r===10?"s":","),typeof w!="function"&&(!(r%1)&&(w=BR(w)).precision==null&&(w.trim=!0),w=m4(w)),n===1/0)return w;const T=Math.max(1,r*n/e.ticks().length);return P=>{let z=P/l(Math.round(s(P)));return z*r<r-.5&&(z*=r),z<=T?w(P):""}},e.nice=()=>a(SY(a(),{floor:n=>l(Math.floor(s(n))),ceil:n=>l(Math.ceil(s(n)))})),e}function CY(){const t=y4(j2()).domain([1,10]);return t.copy=()=>jT(t,CY()).base(t.base()),Wf.apply(t,arguments),t}function A7(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function _7(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function g4(t){var e=1,a=t(A7(e),_7(e));return a.constant=function(r){return arguments.length?t(A7(e=+r),_7(e)):e},Qg(a)}function bY(){var t=g4(j2());return t.copy=function(){return jT(t,bY()).constant(t.constant())},Wf.apply(t,arguments)}function v7(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Uge(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function kge(t){return t<0?-t*t:t*t}function A4(t){var e=t(th,th),a=1;function r(){return a===1?t(th,th):a===.5?t(Uge,kge):t(v7(a),v7(1/a))}return e.exponent=function(s){return arguments.length?(a=+s,r()):a},Qg(e)}function _4(){var t=A4(j2());return t.copy=function(){return jT(t,_4()).exponent(t.exponent())},Wf.apply(t,arguments),t}function Bge(){return _4.apply(null,arguments).exponent(.5)}function w7(t){return Math.sign(t)*t*t}function Gge(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function xY(){var t=f4(),e=[0,1],a=!1,r;function s(l){var h=Gge(t(l));return isNaN(h)?r:a?Math.round(h):h}return s.invert=function(l){return t.invert(w7(l))},s.domain=function(l){return arguments.length?(t.domain(l),s):t.domain()},s.range=function(l){return arguments.length?(t.range((e=Array.from(l,Jb)).map(w7)),s):e.slice()},s.rangeRound=function(l){return s.range(l).round(!0)},s.round=function(l){return arguments.length?(a=!!l,s):a},s.clamp=function(l){return arguments.length?(t.clamp(l),s):t.clamp()},s.unknown=function(l){return arguments.length?(r=l,s):r},s.copy=function(){return xY(t.domain(),e).round(a).clamp(t.clamp()).unknown(r)},Wf.apply(s,arguments),Qg(s)}function PY(){var t=[],e=[],a=[],r;function s(){var h=0,n=Math.max(1,e.length);for(a=new Array(n-1);++h<n;)a[h-1]=$ye(t,h/n);return l}function l(h){return h==null||isNaN(h=+h)?r:e[BT(a,h)]}return l.invertExtent=function(h){var n=e.indexOf(h);return n<0?[NaN,NaN]:[n>0?a[n-1]:t[0],n<a.length?a[n]:t[t.length-1]]},l.domain=function(h){if(!arguments.length)return t.slice();t=[];for(let n of h)n!=null&&!isNaN(n=+n)&&t.push(n);return t.sort(Ig),s()},l.range=function(h){return arguments.length?(e=Array.from(h),s()):e.slice()},l.unknown=function(h){return arguments.length?(r=h,l):r},l.quantiles=function(){return a.slice()},l.copy=function(){return PY().domain(t).range(e).unknown(r)},Wf.apply(l,arguments)}function EY(){var t=0,e=1,a=1,r=[.5],s=[0,1],l;function h(w){return w!=null&&w<=w?s[BT(r,w,0,a)]:l}function n(){var w=-1;for(r=new Array(a);++w<a;)r[w]=((w+1)*e-(w-a)*t)/(a+1);return h}return h.domain=function(w){return arguments.length?([t,e]=w,t=+t,e=+e,n()):[t,e]},h.range=function(w){return arguments.length?(a=(s=Array.from(w)).length-1,n()):s.slice()},h.invertExtent=function(w){var T=s.indexOf(w);return T<0?[NaN,NaN]:T<1?[t,r[0]]:T>=a?[r[a-1],e]:[r[T-1],r[T]]},h.unknown=function(w){return arguments.length&&(l=w),h},h.thresholds=function(){return r.slice()},h.copy=function(){return EY().domain([t,e]).range(s).unknown(l)},Wf.apply(Qg(h),arguments)}function NY(){var t=[.5],e=[0,1],a,r=1;function s(l){return l!=null&&l<=l?e[BT(t,l,0,r)]:a}return s.domain=function(l){return arguments.length?(t=Array.from(l),r=Math.min(t.length,e.length-1),s):t.slice()},s.range=function(l){return arguments.length?(e=Array.from(l),r=Math.min(t.length,e.length-1),s):e.slice()},s.invertExtent=function(l){var h=e.indexOf(l);return[t[h-1],t[h]]},s.unknown=function(l){return arguments.length?(a=l,s):a},s.copy=function(){return NY().domain(t).range(e).unknown(a)},Wf.apply(s,arguments)}const fO=new Date,pO=new Date;function Uu(t,e,a,r){function s(l){return t(l=arguments.length===0?new Date:new Date(+l)),l}return s.floor=l=>(t(l=new Date(+l)),l),s.ceil=l=>(t(l=new Date(l-1)),e(l,1),t(l),l),s.round=l=>{const h=s(l),n=s.ceil(l);return l-h<n-l?h:n},s.offset=(l,h)=>(e(l=new Date(+l),h==null?1:Math.floor(h)),l),s.range=(l,h,n)=>{const w=[];if(l=s.ceil(l),n=n==null?1:Math.floor(n),!(l<h)||!(n>0))return w;let T;do w.push(T=new Date(+l)),e(l,n),t(l);while(T<l&&l<h);return w},s.filter=l=>Uu(h=>{if(h>=h)for(;t(h),!l(h);)h.setTime(h-1)},(h,n)=>{if(h>=h)if(n<0)for(;++n<=0;)for(;e(h,-1),!l(h););else for(;--n>=0;)for(;e(h,1),!l(h););}),a&&(s.count=(l,h)=>(fO.setTime(+l),pO.setTime(+h),t(fO),t(pO),Math.floor(a(fO,pO))),s.every=l=>(l=Math.floor(l),!isFinite(l)||!(l>0)?null:l>1?s.filter(r?h=>r(h)%l===0:h=>s.count(0,h)%l===0):s)),s}const tx=Uu(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);tx.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Uu(e=>{e.setTime(Math.floor(e/t)*t)},(e,a)=>{e.setTime(+e+a*t)},(e,a)=>(a-e)/t):tx);tx.range;const py=1e3,qf=py*60,my=qf*60,Py=my*24,v4=Py*7,R7=Py*30,mO=Py*365,t0=Uu(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*py)},(t,e)=>(e-t)/py,t=>t.getUTCSeconds());t0.range;const w4=Uu(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*py)},(t,e)=>{t.setTime(+t+e*qf)},(t,e)=>(e-t)/qf,t=>t.getMinutes());w4.range;const R4=Uu(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*qf)},(t,e)=>(e-t)/qf,t=>t.getUTCMinutes());R4.range;const T4=Uu(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*py-t.getMinutes()*qf)},(t,e)=>{t.setTime(+t+e*my)},(t,e)=>(e-t)/my,t=>t.getHours());T4.range;const S4=Uu(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*my)},(t,e)=>(e-t)/my,t=>t.getUTCHours());S4.range;const ZT=Uu(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*qf)/Py,t=>t.getDate()-1);ZT.range;const Z2=Uu(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Py,t=>t.getUTCDate()-1);Z2.range;const VY=Uu(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Py,t=>Math.floor(t/Py));VY.range;function V0(t){return Uu(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,a)=>{e.setDate(e.getDate()+a*7)},(e,a)=>(a-e-(a.getTimezoneOffset()-e.getTimezoneOffset())*qf)/v4)}const q2=V0(0),ax=V0(1),jge=V0(2),Zge=V0(3),vv=V0(4),qge=V0(5),Hge=V0(6);q2.range;ax.range;jge.range;Zge.range;vv.range;qge.range;Hge.range;function z0(t){return Uu(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,a)=>{e.setUTCDate(e.getUTCDate()+a*7)},(e,a)=>(a-e)/v4)}const H2=z0(0),rx=z0(1),$ge=z0(2),Kge=z0(3),wv=z0(4),Wge=z0(5),Yge=z0(6);H2.range;rx.range;$ge.range;Kge.range;wv.range;Wge.range;Yge.range;const C4=Uu(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());C4.range;const b4=Uu(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());b4.range;const Ey=Uu(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Ey.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Uu(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,a)=>{e.setFullYear(e.getFullYear()+a*t)});Ey.range;const Ny=Uu(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ny.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Uu(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,a)=>{e.setUTCFullYear(e.getUTCFullYear()+a*t)});Ny.range;function zY(t,e,a,r,s,l){const h=[[t0,1,py],[t0,5,5*py],[t0,15,15*py],[t0,30,30*py],[l,1,qf],[l,5,5*qf],[l,15,15*qf],[l,30,30*qf],[s,1,my],[s,3,3*my],[s,6,6*my],[s,12,12*my],[r,1,Py],[r,2,2*Py],[a,1,v4],[e,1,R7],[e,3,3*R7],[t,1,mO]];function n(T,P,z){const k=P<T;k&&([T,P]=[P,T]);const U=z&&typeof z.range=="function"?z:w(T,P,z),Z=U?U.range(T,+P+1):[];return k?Z.reverse():Z}function w(T,P,z){const k=Math.abs(P-T)/z,U=l4(([,,q])=>q).right(h,k);if(U===h.length)return t.every(YD(T/mO,P/mO,z));if(U===0)return tx.every(Math.max(YD(T,P,z),1));const[Z,H]=h[k/h[U-1][2]<h[U][2]/k?U-1:U];return Z.every(H)}return[n,w]}const[Xge,Jge]=zY(Ny,b4,H2,VY,S4,R4),[Qge,eAe]=zY(Ey,C4,q2,ZT,T4,w4);function yO(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function gO(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Sw(t,e,a){return{y:t,m:e,d:a,H:0,M:0,S:0,L:0}}function tAe(t){var e=t.dateTime,a=t.date,r=t.time,s=t.periods,l=t.days,h=t.shortDays,n=t.months,w=t.shortMonths,T=Cw(s),P=bw(s),z=Cw(l),k=bw(l),U=Cw(h),Z=bw(h),H=Cw(n),q=bw(n),J=Cw(w),re=bw(w),ce={a:Ze,A:ke,b:tt,B:Ue,c:null,d:P7,e:P7,f:SAe,g:DAe,G:IAe,H:wAe,I:RAe,j:TAe,L:OY,m:CAe,M:bAe,p:He,q:Ce,Q:V7,s:z7,S:xAe,u:PAe,U:EAe,V:NAe,w:VAe,W:zAe,x:null,X:null,y:OAe,Y:MAe,Z:LAe,"%":N7},ye={a:Se,A:$e,b:ht,B:ft,c:null,d:E7,e:E7,f:BAe,g:XAe,G:QAe,H:FAe,I:UAe,j:kAe,L:MY,m:GAe,M:jAe,p:ut,q:Rt,Q:V7,s:z7,S:ZAe,u:qAe,U:HAe,V:$Ae,w:KAe,W:WAe,x:null,X:null,y:YAe,Y:JAe,Z:e0e,"%":N7},he={a:De,A:ie,b:ge,B:Me,c:ze,d:b7,e:b7,f:gAe,g:C7,G:S7,H:x7,I:x7,j:fAe,L:yAe,m:hAe,M:pAe,p:be,q:dAe,Q:_Ae,s:vAe,S:mAe,u:sAe,U:oAe,V:lAe,w:iAe,W:uAe,x:Le,X:Ie,y:C7,Y:S7,Z:cAe,"%":AAe};ce.x=_e(a,ce),ce.X=_e(r,ce),ce.c=_e(e,ce),ye.x=_e(a,ye),ye.X=_e(r,ye),ye.c=_e(e,ye);function _e(We,Ae){return function(qt){var Gt=[],Aa=-1,It=0,ta=We.length,vt,or,Na;for(qt instanceof Date||(qt=new Date(+qt));++Aa<ta;)We.charCodeAt(Aa)===37&&(Gt.push(We.slice(It,Aa)),(or=T7[vt=We.charAt(++Aa)])!=null?vt=We.charAt(++Aa):or=vt==="e"?" ":"0",(Na=Ae[vt])&&(vt=Na(qt,or)),Gt.push(vt),It=Aa+1);return Gt.push(We.slice(It,Aa)),Gt.join("")}}function me(We,Ae){return function(qt){var Gt=Sw(1900,void 0,1),Aa=Re(Gt,We,qt+="",0),It,ta;if(Aa!=qt.length)return null;if("Q"in Gt)return new Date(Gt.Q);if("s"in Gt)return new Date(Gt.s*1e3+("L"in Gt?Gt.L:0));if(Ae&&!("Z"in Gt)&&(Gt.Z=0),"p"in Gt&&(Gt.H=Gt.H%12+Gt.p*12),Gt.m===void 0&&(Gt.m="q"in Gt?Gt.q:0),"V"in Gt){if(Gt.V<1||Gt.V>53)return null;"w"in Gt||(Gt.w=1),"Z"in Gt?(It=gO(Sw(Gt.y,0,1)),ta=It.getUTCDay(),It=ta>4||ta===0?rx.ceil(It):rx(It),It=Z2.offset(It,(Gt.V-1)*7),Gt.y=It.getUTCFullYear(),Gt.m=It.getUTCMonth(),Gt.d=It.getUTCDate()+(Gt.w+6)%7):(It=yO(Sw(Gt.y,0,1)),ta=It.getDay(),It=ta>4||ta===0?ax.ceil(It):ax(It),It=ZT.offset(It,(Gt.V-1)*7),Gt.y=It.getFullYear(),Gt.m=It.getMonth(),Gt.d=It.getDate()+(Gt.w+6)%7)}else("W"in Gt||"U"in Gt)&&("w"in Gt||(Gt.w="u"in Gt?Gt.u%7:"W"in Gt?1:0),ta="Z"in Gt?gO(Sw(Gt.y,0,1)).getUTCDay():yO(Sw(Gt.y,0,1)).getDay(),Gt.m=0,Gt.d="W"in Gt?(Gt.w+6)%7+Gt.W*7-(ta+5)%7:Gt.w+Gt.U*7-(ta+6)%7);return"Z"in Gt?(Gt.H+=Gt.Z/100|0,Gt.M+=Gt.Z%100,gO(Gt)):yO(Gt)}}function Re(We,Ae,qt,Gt){for(var Aa=0,It=Ae.length,ta=qt.length,vt,or;Aa<It;){if(Gt>=ta)return-1;if(vt=Ae.charCodeAt(Aa++),vt===37){if(vt=Ae.charAt(Aa++),or=he[vt in T7?Ae.charAt(Aa++):vt],!or||(Gt=or(We,qt,Gt))<0)return-1}else if(vt!=qt.charCodeAt(Gt++))return-1}return Gt}function be(We,Ae,qt){var Gt=T.exec(Ae.slice(qt));return Gt?(We.p=P.get(Gt[0].toLowerCase()),qt+Gt[0].length):-1}function De(We,Ae,qt){var Gt=U.exec(Ae.slice(qt));return Gt?(We.w=Z.get(Gt[0].toLowerCase()),qt+Gt[0].length):-1}function ie(We,Ae,qt){var Gt=z.exec(Ae.slice(qt));return Gt?(We.w=k.get(Gt[0].toLowerCase()),qt+Gt[0].length):-1}function ge(We,Ae,qt){var Gt=J.exec(Ae.slice(qt));return Gt?(We.m=re.get(Gt[0].toLowerCase()),qt+Gt[0].length):-1}function Me(We,Ae,qt){var Gt=H.exec(Ae.slice(qt));return Gt?(We.m=q.get(Gt[0].toLowerCase()),qt+Gt[0].length):-1}function ze(We,Ae,qt){return Re(We,e,Ae,qt)}function Le(We,Ae,qt){return Re(We,a,Ae,qt)}function Ie(We,Ae,qt){return Re(We,r,Ae,qt)}function Ze(We){return h[We.getDay()]}function ke(We){return l[We.getDay()]}function tt(We){return w[We.getMonth()]}function Ue(We){return n[We.getMonth()]}function He(We){return s[+(We.getHours()>=12)]}function Ce(We){return 1+~~(We.getMonth()/3)}function Se(We){return h[We.getUTCDay()]}function $e(We){return l[We.getUTCDay()]}function ht(We){return w[We.getUTCMonth()]}function ft(We){return n[We.getUTCMonth()]}function ut(We){return s[+(We.getUTCHours()>=12)]}function Rt(We){return 1+~~(We.getUTCMonth()/3)}return{format:function(We){var Ae=_e(We+="",ce);return Ae.toString=function(){return We},Ae},parse:function(We){var Ae=me(We+="",!1);return Ae.toString=function(){return We},Ae},utcFormat:function(We){var Ae=_e(We+="",ye);return Ae.toString=function(){return We},Ae},utcParse:function(We){var Ae=me(We+="",!0);return Ae.toString=function(){return We},Ae}}}var T7={"-":"",_:" ",0:"0"},ic=/^\s*\d+/,aAe=/^%/,rAe=/[\\^$*+?|[\]().{}]/g;function ps(t,e,a){var r=t<0?"-":"",s=(r?-t:t)+"",l=s.length;return r+(l<a?new Array(a-l+1).join(e)+s:s)}function nAe(t){return t.replace(rAe,"\\$&")}function Cw(t){return new RegExp("^(?:"+t.map(nAe).join("|")+")","i")}function bw(t){return new Map(t.map((e,a)=>[e.toLowerCase(),a]))}function iAe(t,e,a){var r=ic.exec(e.slice(a,a+1));return r?(t.w=+r[0],a+r[0].length):-1}function sAe(t,e,a){var r=ic.exec(e.slice(a,a+1));return r?(t.u=+r[0],a+r[0].length):-1}function oAe(t,e,a){var r=ic.exec(e.slice(a,a+2));return r?(t.U=+r[0],a+r[0].length):-1}function lAe(t,e,a){var r=ic.exec(e.slice(a,a+2));return r?(t.V=+r[0],a+r[0].length):-1}function uAe(t,e,a){var r=ic.exec(e.slice(a,a+2));return r?(t.W=+r[0],a+r[0].length):-1}function S7(t,e,a){var r=ic.exec(e.slice(a,a+4));return r?(t.y=+r[0],a+r[0].length):-1}function C7(t,e,a){var r=ic.exec(e.slice(a,a+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),a+r[0].length):-1}function cAe(t,e,a){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(a,a+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),a+r[0].length):-1}function dAe(t,e,a){var r=ic.exec(e.slice(a,a+1));return r?(t.q=r[0]*3-3,a+r[0].length):-1}function hAe(t,e,a){var r=ic.exec(e.slice(a,a+2));return r?(t.m=r[0]-1,a+r[0].length):-1}function b7(t,e,a){var r=ic.exec(e.slice(a,a+2));return r?(t.d=+r[0],a+r[0].length):-1}function fAe(t,e,a){var r=ic.exec(e.slice(a,a+3));return r?(t.m=0,t.d=+r[0],a+r[0].length):-1}function x7(t,e,a){var r=ic.exec(e.slice(a,a+2));return r?(t.H=+r[0],a+r[0].length):-1}function pAe(t,e,a){var r=ic.exec(e.slice(a,a+2));return r?(t.M=+r[0],a+r[0].length):-1}function mAe(t,e,a){var r=ic.exec(e.slice(a,a+2));return r?(t.S=+r[0],a+r[0].length):-1}function yAe(t,e,a){var r=ic.exec(e.slice(a,a+3));return r?(t.L=+r[0],a+r[0].length):-1}function gAe(t,e,a){var r=ic.exec(e.slice(a,a+6));return r?(t.L=Math.floor(r[0]/1e3),a+r[0].length):-1}function AAe(t,e,a){var r=aAe.exec(e.slice(a,a+1));return r?a+r[0].length:-1}function _Ae(t,e,a){var r=ic.exec(e.slice(a));return r?(t.Q=+r[0],a+r[0].length):-1}function vAe(t,e,a){var r=ic.exec(e.slice(a));return r?(t.s=+r[0],a+r[0].length):-1}function P7(t,e){return ps(t.getDate(),e,2)}function wAe(t,e){return ps(t.getHours(),e,2)}function RAe(t,e){return ps(t.getHours()%12||12,e,2)}function TAe(t,e){return ps(1+ZT.count(Ey(t),t),e,3)}function OY(t,e){return ps(t.getMilliseconds(),e,3)}function SAe(t,e){return OY(t,e)+"000"}function CAe(t,e){return ps(t.getMonth()+1,e,2)}function bAe(t,e){return ps(t.getMinutes(),e,2)}function xAe(t,e){return ps(t.getSeconds(),e,2)}function PAe(t){var e=t.getDay();return e===0?7:e}function EAe(t,e){return ps(q2.count(Ey(t)-1,t),e,2)}function DY(t){var e=t.getDay();return e>=4||e===0?vv(t):vv.ceil(t)}function NAe(t,e){return t=DY(t),ps(vv.count(Ey(t),t)+(Ey(t).getDay()===4),e,2)}function VAe(t){return t.getDay()}function zAe(t,e){return ps(ax.count(Ey(t)-1,t),e,2)}function OAe(t,e){return ps(t.getFullYear()%100,e,2)}function DAe(t,e){return t=DY(t),ps(t.getFullYear()%100,e,2)}function MAe(t,e){return ps(t.getFullYear()%1e4,e,4)}function IAe(t,e){var a=t.getDay();return t=a>=4||a===0?vv(t):vv.ceil(t),ps(t.getFullYear()%1e4,e,4)}function LAe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ps(e/60|0,"0",2)+ps(e%60,"0",2)}function E7(t,e){return ps(t.getUTCDate(),e,2)}function FAe(t,e){return ps(t.getUTCHours(),e,2)}function UAe(t,e){return ps(t.getUTCHours()%12||12,e,2)}function kAe(t,e){return ps(1+Z2.count(Ny(t),t),e,3)}function MY(t,e){return ps(t.getUTCMilliseconds(),e,3)}function BAe(t,e){return MY(t,e)+"000"}function GAe(t,e){return ps(t.getUTCMonth()+1,e,2)}function jAe(t,e){return ps(t.getUTCMinutes(),e,2)}function ZAe(t,e){return ps(t.getUTCSeconds(),e,2)}function qAe(t){var e=t.getUTCDay();return e===0?7:e}function HAe(t,e){return ps(H2.count(Ny(t)-1,t),e,2)}function IY(t){var e=t.getUTCDay();return e>=4||e===0?wv(t):wv.ceil(t)}function $Ae(t,e){return t=IY(t),ps(wv.count(Ny(t),t)+(Ny(t).getUTCDay()===4),e,2)}function KAe(t){return t.getUTCDay()}function WAe(t,e){return ps(rx.count(Ny(t)-1,t),e,2)}function YAe(t,e){return ps(t.getUTCFullYear()%100,e,2)}function XAe(t,e){return t=IY(t),ps(t.getUTCFullYear()%100,e,2)}function JAe(t,e){return ps(t.getUTCFullYear()%1e4,e,4)}function QAe(t,e){var a=t.getUTCDay();return t=a>=4||a===0?wv(t):wv.ceil(t),ps(t.getUTCFullYear()%1e4,e,4)}function e0e(){return"+0000"}function N7(){return"%"}function V7(t){return+t}function z7(t){return Math.floor(+t/1e3)}var S_,LY,FY;t0e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function t0e(t){return S_=tAe(t),LY=S_.format,S_.parse,FY=S_.utcFormat,S_.utcParse,S_}function a0e(t){return new Date(t)}function r0e(t){return t instanceof Date?+t:+new Date(+t)}function x4(t,e,a,r,s,l,h,n,w,T){var P=f4(),z=P.invert,k=P.domain,U=T(".%L"),Z=T(":%S"),H=T("%I:%M"),q=T("%I %p"),J=T("%a %d"),re=T("%b %d"),ce=T("%B"),ye=T("%Y");function he(_e){return(w(_e)<_e?U:n(_e)<_e?Z:h(_e)<_e?H:l(_e)<_e?q:r(_e)<_e?s(_e)<_e?J:re:a(_e)<_e?ce:ye)(_e)}return P.invert=function(_e){return new Date(z(_e))},P.domain=function(_e){return arguments.length?k(Array.from(_e,r0e)):k().map(a0e)},P.ticks=function(_e){var me=k();return t(me[0],me[me.length-1],_e??10)},P.tickFormat=function(_e,me){return me==null?he:T(me)},P.nice=function(_e){var me=k();return(!_e||typeof _e.range!="function")&&(_e=e(me[0],me[me.length-1],_e??10)),_e?k(SY(me,_e)):P},P.copy=function(){return jT(P,x4(t,e,a,r,s,l,h,n,w,T))},P}function n0e(){return Wf.apply(x4(Qge,eAe,Ey,C4,q2,ZT,T4,w4,t0,LY).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function i0e(){return Wf.apply(x4(Xge,Jge,Ny,b4,H2,Z2,S4,R4,t0,FY).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function $2(){var t=0,e=1,a,r,s,l,h=th,n=!1,w;function T(z){return z==null||isNaN(z=+z)?w:h(s===0?.5:(z=(l(z)-a)*s,n?Math.max(0,Math.min(1,z)):z))}T.domain=function(z){return arguments.length?([t,e]=z,a=l(t=+t),r=l(e=+e),s=a===r?0:1/(r-a),T):[t,e]},T.clamp=function(z){return arguments.length?(n=!!z,T):n},T.interpolator=function(z){return arguments.length?(h=z,T):h};function P(z){return function(k){var U,Z;return arguments.length?([U,Z]=k,h=z(U,Z),T):[h(0),h(1)]}}return T.range=P(i1),T.rangeRound=P(h4),T.unknown=function(z){return arguments.length?(w=z,T):w},function(z){return l=z,a=z(t),r=z(e),s=a===r?0:1/(r-a),T}}function eA(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function UY(){var t=Qg($2()(th));return t.copy=function(){return eA(t,UY())},My.apply(t,arguments)}function kY(){var t=y4($2()).domain([1,10]);return t.copy=function(){return eA(t,kY()).base(t.base())},My.apply(t,arguments)}function BY(){var t=g4($2());return t.copy=function(){return eA(t,BY()).constant(t.constant())},My.apply(t,arguments)}function P4(){var t=A4($2());return t.copy=function(){return eA(t,P4()).exponent(t.exponent())},My.apply(t,arguments)}function s0e(){return P4.apply(null,arguments).exponent(.5)}function GY(){var t=[],e=th;function a(r){if(r!=null&&!isNaN(r=+r))return e((BT(t,r,1)-1)/(t.length-1))}return a.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let s of r)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(Ig),a},a.interpolator=function(r){return arguments.length?(e=r,a):e},a.range=function(){return t.map((r,s)=>e(s/(t.length-1)))},a.quantiles=function(r){return Array.from({length:r+1},(s,l)=>Hye(t,l/r))},a.copy=function(){return GY(e).domain(t)},My.apply(a,arguments)}function K2(){var t=0,e=.5,a=1,r=1,s,l,h,n,w,T=th,P,z=!1,k;function U(H){return isNaN(H=+H)?k:(H=.5+((H=+P(H))-l)*(r*H<r*l?n:w),T(z?Math.max(0,Math.min(1,H)):H))}U.domain=function(H){return arguments.length?([t,e,a]=H,s=P(t=+t),l=P(e=+e),h=P(a=+a),n=s===l?0:.5/(l-s),w=l===h?0:.5/(h-l),r=l<s?-1:1,U):[t,e,a]},U.clamp=function(H){return arguments.length?(z=!!H,U):z},U.interpolator=function(H){return arguments.length?(T=H,U):T};function Z(H){return function(q){var J,re,ce;return arguments.length?([J,re,ce]=q,T=Age(H,[J,re,ce]),U):[T(0),T(.5),T(1)]}}return U.range=Z(i1),U.rangeRound=Z(h4),U.unknown=function(H){return arguments.length?(k=H,U):k},function(H){return P=H,s=H(t),l=H(e),h=H(a),n=s===l?0:.5/(l-s),w=l===h?0:.5/(h-l),r=l<s?-1:1,U}}function jY(){var t=Qg(K2()(th));return t.copy=function(){return eA(t,jY())},My.apply(t,arguments)}function ZY(){var t=y4(K2()).domain([.1,1,10]);return t.copy=function(){return eA(t,ZY()).base(t.base())},My.apply(t,arguments)}function qY(){var t=g4(K2());return t.copy=function(){return eA(t,qY()).constant(t.constant())},My.apply(t,arguments)}function E4(){var t=A4(K2());return t.copy=function(){return eA(t,E4()).exponent(t.exponent())},My.apply(t,arguments)}function o0e(){return E4.apply(null,arguments).exponent(.5)}const O7=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:LR,scaleDiverging:jY,scaleDivergingLog:ZY,scaleDivergingPow:E4,scaleDivergingSqrt:o0e,scaleDivergingSymlog:qY,scaleIdentity:TY,scaleImplicit:XD,scaleLinear:ex,scaleLog:CY,scaleOrdinal:u4,scalePoint:tR,scalePow:_4,scaleQuantile:PY,scaleQuantize:EY,scaleRadial:xY,scaleSequential:UY,scaleSequentialLog:kY,scaleSequentialPow:P4,scaleSequentialQuantile:GY,scaleSequentialSqrt:s0e,scaleSequentialSymlog:BY,scaleSqrt:Bge,scaleSymlog:bY,scaleThreshold:NY,scaleTime:n0e,scaleUtc:i0e,tickFormat:RY},Symbol.toStringTag,{value:"Module"}));var AO,D7;function W2(){if(D7)return AO;D7=1;var t=t1();function e(a,r,s){for(var l=-1,h=a.length;++l<h;){var n=a[l],w=r(n);if(w!=null&&(T===void 0?w===w&&!t(w):s(w,T)))var T=w,P=n}return P}return AO=e,AO}var _O,M7;function HY(){if(M7)return _O;M7=1;function t(e,a){return e>a}return _O=t,_O}var vO,I7;function l0e(){if(I7)return vO;I7=1;var t=W2(),e=HY(),a=n1();function r(s){return s&&s.length?t(s,a,e):void 0}return vO=r,vO}var u0e=l0e();const Eg=Ji(u0e);var wO,L7;function $Y(){if(L7)return wO;L7=1;function t(e,a){return e<a}return wO=t,wO}var RO,F7;function c0e(){if(F7)return RO;F7=1;var t=W2(),e=$Y(),a=n1();function r(s){return s&&s.length?t(s,a,e):void 0}return RO=r,RO}var d0e=c0e();const Y2=Ji(d0e);var TO,U7;function h0e(){if(U7)return TO;U7=1;var t=H3(),e=Bm(),a=tY(),r=zh();function s(l,h){var n=r(l)?t:a;return n(l,e(h,3))}return TO=s,TO}var SO,k7;function f0e(){if(k7)return SO;k7=1;var t=QW(),e=h0e();function a(r,s){return t(e(r,s),1)}return SO=a,SO}var p0e=f0e();const m0e=Ji(p0e);var CO,B7;function y0e(){if(B7)return CO;B7=1;var t=n4();function e(a,r){return t(a,r)}return CO=e,CO}var g0e=y0e();const Gg=Ji(g0e);var s1=1e9,A0e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},V4,$o=!0,$f="[DecimalError] ",l0=$f+"Invalid argument: ",N4=$f+"Exponent out of range: ",o1=Math.floor,HA=Math.pow,_0e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,sf,ec=1e7,Po=7,KY=9007199254740991,nx=o1(KY/Po),Wr={};Wr.absoluteValue=Wr.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Wr.comparedTo=Wr.cmp=function(t){var e,a,r,s,l=this;if(t=new l.constructor(t),l.s!==t.s)return l.s||-t.s;if(l.e!==t.e)return l.e>t.e^l.s<0?1:-1;for(r=l.d.length,s=t.d.length,e=0,a=r<s?r:s;e<a;++e)if(l.d[e]!==t.d[e])return l.d[e]>t.d[e]^l.s<0?1:-1;return r===s?0:r>s^l.s<0?1:-1};Wr.decimalPlaces=Wr.dp=function(){var t=this,e=t.d.length-1,a=(e-t.e)*Po;if(e=t.d[e],e)for(;e%10==0;e/=10)a--;return a<0?0:a};Wr.dividedBy=Wr.div=function(t){return vy(this,new this.constructor(t))};Wr.dividedToIntegerBy=Wr.idiv=function(t){var e=this,a=e.constructor;return so(vy(e,new a(t),0,1),a.precision)};Wr.equals=Wr.eq=function(t){return!this.cmp(t)};Wr.exponent=function(){return hu(this)};Wr.greaterThan=Wr.gt=function(t){return this.cmp(t)>0};Wr.greaterThanOrEqualTo=Wr.gte=function(t){return this.cmp(t)>=0};Wr.isInteger=Wr.isint=function(){return this.e>this.d.length-2};Wr.isNegative=Wr.isneg=function(){return this.s<0};Wr.isPositive=Wr.ispos=function(){return this.s>0};Wr.isZero=function(){return this.s===0};Wr.lessThan=Wr.lt=function(t){return this.cmp(t)<0};Wr.lessThanOrEqualTo=Wr.lte=function(t){return this.cmp(t)<1};Wr.logarithm=Wr.log=function(t){var e,a=this,r=a.constructor,s=r.precision,l=s+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(sf))throw Error($f+"NaN");if(a.s<1)throw Error($f+(a.s?"NaN":"-Infinity"));return a.eq(sf)?new r(0):($o=!1,e=vy(GR(a,l),GR(t,l),l),$o=!0,so(e,s))};Wr.minus=Wr.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?XY(e,t):WY(e,(t.s=-t.s,t))};Wr.modulo=Wr.mod=function(t){var e,a=this,r=a.constructor,s=r.precision;if(t=new r(t),!t.s)throw Error($f+"NaN");return a.s?($o=!1,e=vy(a,t,0,1).times(t),$o=!0,a.minus(e)):so(new r(a),s)};Wr.naturalExponential=Wr.exp=function(){return YY(this)};Wr.naturalLogarithm=Wr.ln=function(){return GR(this)};Wr.negated=Wr.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Wr.plus=Wr.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?WY(e,t):XY(e,(t.s=-t.s,t))};Wr.precision=Wr.sd=function(t){var e,a,r,s=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(l0+t);if(e=hu(s)+1,r=s.d.length-1,a=r*Po+1,r=s.d[r],r){for(;r%10==0;r/=10)a--;for(r=s.d[0];r>=10;r/=10)a++}return t&&e>a?e:a};Wr.squareRoot=Wr.sqrt=function(){var t,e,a,r,s,l,h,n=this,w=n.constructor;if(n.s<1){if(!n.s)return new w(0);throw Error($f+"NaN")}for(t=hu(n),$o=!1,s=Math.sqrt(+n),s==0||s==1/0?(e=Sm(n.d),(e.length+t)%2==0&&(e+="0"),s=Math.sqrt(e),t=o1((t+1)/2)-(t<0||t%2),s==1/0?e="5e"+t:(e=s.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new w(e)):r=new w(s.toString()),a=w.precision,s=h=a+3;;)if(l=r,r=l.plus(vy(n,l,h+2)).times(.5),Sm(l.d).slice(0,h)===(e=Sm(r.d)).slice(0,h)){if(e=e.slice(h-3,h+1),s==h&&e=="4999"){if(so(l,a+1,0),l.times(l).eq(n)){r=l;break}}else if(e!="9999")break;h+=4}return $o=!0,so(r,a)};Wr.times=Wr.mul=function(t){var e,a,r,s,l,h,n,w,T,P=this,z=P.constructor,k=P.d,U=(t=new z(t)).d;if(!P.s||!t.s)return new z(0);for(t.s*=P.s,a=P.e+t.e,w=k.length,T=U.length,w<T&&(l=k,k=U,U=l,h=w,w=T,T=h),l=[],h=w+T,r=h;r--;)l.push(0);for(r=T;--r>=0;){for(e=0,s=w+r;s>r;)n=l[s]+U[r]*k[s-r-1]+e,l[s--]=n%ec|0,e=n/ec|0;l[s]=(l[s]+e)%ec|0}for(;!l[--h];)l.pop();return e?++a:l.shift(),t.d=l,t.e=a,$o?so(t,z.precision):t};Wr.toDecimalPlaces=Wr.todp=function(t,e){var a=this,r=a.constructor;return a=new r(a),t===void 0?a:(Lm(t,0,s1),e===void 0?e=r.rounding:Lm(e,0,8),so(a,t+hu(a)+1,e))};Wr.toExponential=function(t,e){var a,r=this,s=r.constructor;return t===void 0?a=v0(r,!0):(Lm(t,0,s1),e===void 0?e=s.rounding:Lm(e,0,8),r=so(new s(r),t+1,e),a=v0(r,!0,t+1)),a};Wr.toFixed=function(t,e){var a,r,s=this,l=s.constructor;return t===void 0?v0(s):(Lm(t,0,s1),e===void 0?e=l.rounding:Lm(e,0,8),r=so(new l(s),t+hu(s)+1,e),a=v0(r.abs(),!1,t+hu(r)+1),s.isneg()&&!s.isZero()?"-"+a:a)};Wr.toInteger=Wr.toint=function(){var t=this,e=t.constructor;return so(new e(t),hu(t)+1,e.rounding)};Wr.toNumber=function(){return+this};Wr.toPower=Wr.pow=function(t){var e,a,r,s,l,h,n=this,w=n.constructor,T=12,P=+(t=new w(t));if(!t.s)return new w(sf);if(n=new w(n),!n.s){if(t.s<1)throw Error($f+"Infinity");return n}if(n.eq(sf))return n;if(r=w.precision,t.eq(sf))return so(n,r);if(e=t.e,a=t.d.length-1,h=e>=a,l=n.s,h){if((a=P<0?-P:P)<=KY){for(s=new w(sf),e=Math.ceil(r/Po+4),$o=!1;a%2&&(s=s.times(n),j7(s.d,e)),a=o1(a/2),a!==0;)n=n.times(n),j7(n.d,e);return $o=!0,t.s<0?new w(sf).div(s):so(s,r)}}else if(l<0)throw Error($f+"NaN");return l=l<0&&t.d[Math.max(e,a)]&1?-1:1,n.s=1,$o=!1,s=t.times(GR(n,r+T)),$o=!0,s=YY(s),s.s=l,s};Wr.toPrecision=function(t,e){var a,r,s=this,l=s.constructor;return t===void 0?(a=hu(s),r=v0(s,a<=l.toExpNeg||a>=l.toExpPos)):(Lm(t,1,s1),e===void 0?e=l.rounding:Lm(e,0,8),s=so(new l(s),t,e),a=hu(s),r=v0(s,t<=a||a<=l.toExpNeg,t)),r};Wr.toSignificantDigits=Wr.tosd=function(t,e){var a=this,r=a.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Lm(t,1,s1),e===void 0?e=r.rounding:Lm(e,0,8)),so(new r(a),t,e)};Wr.toString=Wr.valueOf=Wr.val=Wr.toJSON=Wr[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=hu(t),a=t.constructor;return v0(t,e<=a.toExpNeg||e>=a.toExpPos)};function WY(t,e){var a,r,s,l,h,n,w,T,P=t.constructor,z=P.precision;if(!t.s||!e.s)return e.s||(e=new P(t)),$o?so(e,z):e;if(w=t.d,T=e.d,h=t.e,s=e.e,w=w.slice(),l=h-s,l){for(l<0?(r=w,l=-l,n=T.length):(r=T,s=h,n=w.length),h=Math.ceil(z/Po),n=h>n?h+1:n+1,l>n&&(l=n,r.length=1),r.reverse();l--;)r.push(0);r.reverse()}for(n=w.length,l=T.length,n-l<0&&(l=n,r=T,T=w,w=r),a=0;l;)a=(w[--l]=w[l]+T[l]+a)/ec|0,w[l]%=ec;for(a&&(w.unshift(a),++s),n=w.length;w[--n]==0;)w.pop();return e.d=w,e.e=s,$o?so(e,z):e}function Lm(t,e,a){if(t!==~~t||t<e||t>a)throw Error(l0+t)}function Sm(t){var e,a,r,s=t.length-1,l="",h=t[0];if(s>0){for(l+=h,e=1;e<s;e++)r=t[e]+"",a=Po-r.length,a&&(l+=wg(a)),l+=r;h=t[e],r=h+"",a=Po-r.length,a&&(l+=wg(a))}else if(h===0)return"0";for(;h%10===0;)h/=10;return l+h}var vy=function(){function t(r,s){var l,h=0,n=r.length;for(r=r.slice();n--;)l=r[n]*s+h,r[n]=l%ec|0,h=l/ec|0;return h&&r.unshift(h),r}function e(r,s,l,h){var n,w;if(l!=h)w=l>h?1:-1;else for(n=w=0;n<l;n++)if(r[n]!=s[n]){w=r[n]>s[n]?1:-1;break}return w}function a(r,s,l){for(var h=0;l--;)r[l]-=h,h=r[l]<s[l]?1:0,r[l]=h*ec+r[l]-s[l];for(;!r[0]&&r.length>1;)r.shift()}return function(r,s,l,h){var n,w,T,P,z,k,U,Z,H,q,J,re,ce,ye,he,_e,me,Re,be=r.constructor,De=r.s==s.s?1:-1,ie=r.d,ge=s.d;if(!r.s)return new be(r);if(!s.s)throw Error($f+"Division by zero");for(w=r.e-s.e,me=ge.length,he=ie.length,U=new be(De),Z=U.d=[],T=0;ge[T]==(ie[T]||0);)++T;if(ge[T]>(ie[T]||0)&&--w,l==null?re=l=be.precision:h?re=l+(hu(r)-hu(s))+1:re=l,re<0)return new be(0);if(re=re/Po+2|0,T=0,me==1)for(P=0,ge=ge[0],re++;(T<he||P)&&re--;T++)ce=P*ec+(ie[T]||0),Z[T]=ce/ge|0,P=ce%ge|0;else{for(P=ec/(ge[0]+1)|0,P>1&&(ge=t(ge,P),ie=t(ie,P),me=ge.length,he=ie.length),ye=me,H=ie.slice(0,me),q=H.length;q<me;)H[q++]=0;Re=ge.slice(),Re.unshift(0),_e=ge[0],ge[1]>=ec/2&&++_e;do P=0,n=e(ge,H,me,q),n<0?(J=H[0],me!=q&&(J=J*ec+(H[1]||0)),P=J/_e|0,P>1?(P>=ec&&(P=ec-1),z=t(ge,P),k=z.length,q=H.length,n=e(z,H,k,q),n==1&&(P--,a(z,me<k?Re:ge,k))):(P==0&&(n=P=1),z=ge.slice()),k=z.length,k<q&&z.unshift(0),a(H,z,q),n==-1&&(q=H.length,n=e(ge,H,me,q),n<1&&(P++,a(H,me<q?Re:ge,q))),q=H.length):n===0&&(P++,H=[0]),Z[T++]=P,n&&H[0]?H[q++]=ie[ye]||0:(H=[ie[ye]],q=1);while((ye++<he||H[0]!==void 0)&&re--)}return Z[0]||Z.shift(),U.e=w,so(U,h?l+hu(U)+1:l)}}();function YY(t,e){var a,r,s,l,h,n,w=0,T=0,P=t.constructor,z=P.precision;if(hu(t)>16)throw Error(N4+hu(t));if(!t.s)return new P(sf);for($o=!1,n=z,h=new P(.03125);t.abs().gte(.1);)t=t.times(h),T+=5;for(r=Math.log(HA(2,T))/Math.LN10*2+5|0,n+=r,a=s=l=new P(sf),P.precision=n;;){if(s=so(s.times(t),n),a=a.times(++w),h=l.plus(vy(s,a,n)),Sm(h.d).slice(0,n)===Sm(l.d).slice(0,n)){for(;T--;)l=so(l.times(l),n);return P.precision=z,e==null?($o=!0,so(l,z)):l}l=h}}function hu(t){for(var e=t.e*Po,a=t.d[0];a>=10;a/=10)e++;return e}function bO(t,e,a){if(e>t.LN10.sd())throw $o=!0,a&&(t.precision=a),Error($f+"LN10 precision limit exceeded");return so(new t(t.LN10),e)}function wg(t){for(var e="";t--;)e+="0";return e}function GR(t,e){var a,r,s,l,h,n,w,T,P,z=1,k=10,U=t,Z=U.d,H=U.constructor,q=H.precision;if(U.s<1)throw Error($f+(U.s?"NaN":"-Infinity"));if(U.eq(sf))return new H(0);if(e==null?($o=!1,T=q):T=e,U.eq(10))return e==null&&($o=!0),bO(H,T);if(T+=k,H.precision=T,a=Sm(Z),r=a.charAt(0),l=hu(U),Math.abs(l)<15e14){for(;r<7&&r!=1||r==1&&a.charAt(1)>3;)U=U.times(t),a=Sm(U.d),r=a.charAt(0),z++;l=hu(U),r>1?(U=new H("0."+a),l++):U=new H(r+"."+a.slice(1))}else return w=bO(H,T+2,q).times(l+""),U=GR(new H(r+"."+a.slice(1)),T-k).plus(w),H.precision=q,e==null?($o=!0,so(U,q)):U;for(n=h=U=vy(U.minus(sf),U.plus(sf),T),P=so(U.times(U),T),s=3;;){if(h=so(h.times(P),T),w=n.plus(vy(h,new H(s),T)),Sm(w.d).slice(0,T)===Sm(n.d).slice(0,T))return n=n.times(2),l!==0&&(n=n.plus(bO(H,T+2,q).times(l+""))),n=vy(n,new H(z),T),H.precision=q,e==null?($o=!0,so(n,q)):n;n=w,s+=2}}function G7(t,e){var a,r,s;for((a=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(a<0&&(a=r),a+=+e.slice(r+1),e=e.substring(0,r)):a<0&&(a=e.length),r=0;e.charCodeAt(r)===48;)++r;for(s=e.length;e.charCodeAt(s-1)===48;)--s;if(e=e.slice(r,s),e){if(s-=r,a=a-r-1,t.e=o1(a/Po),t.d=[],r=(a+1)%Po,a<0&&(r+=Po),r<s){for(r&&t.d.push(+e.slice(0,r)),s-=Po;r<s;)t.d.push(+e.slice(r,r+=Po));e=e.slice(r),r=Po-e.length}else r-=s;for(;r--;)e+="0";if(t.d.push(+e),$o&&(t.e>nx||t.e<-nx))throw Error(N4+a)}else t.s=0,t.e=0,t.d=[0];return t}function so(t,e,a){var r,s,l,h,n,w,T,P,z=t.d;for(h=1,l=z[0];l>=10;l/=10)h++;if(r=e-h,r<0)r+=Po,s=e,T=z[P=0];else{if(P=Math.ceil((r+1)/Po),l=z.length,P>=l)return t;for(T=l=z[P],h=1;l>=10;l/=10)h++;r%=Po,s=r-Po+h}if(a!==void 0&&(l=HA(10,h-s-1),n=T/l%10|0,w=e<0||z[P+1]!==void 0||T%l,w=a<4?(n||w)&&(a==0||a==(t.s<0?3:2)):n>5||n==5&&(a==4||w||a==6&&(r>0?s>0?T/HA(10,h-s):0:z[P-1])%10&1||a==(t.s<0?8:7))),e<1||!z[0])return w?(l=hu(t),z.length=1,e=e-l-1,z[0]=HA(10,(Po-e%Po)%Po),t.e=o1(-e/Po)||0):(z.length=1,z[0]=t.e=t.s=0),t;if(r==0?(z.length=P,l=1,P--):(z.length=P+1,l=HA(10,Po-r),z[P]=s>0?(T/HA(10,h-s)%HA(10,s)|0)*l:0),w)for(;;)if(P==0){(z[0]+=l)==ec&&(z[0]=1,++t.e);break}else{if(z[P]+=l,z[P]!=ec)break;z[P--]=0,l=1}for(r=z.length;z[--r]===0;)z.pop();if($o&&(t.e>nx||t.e<-nx))throw Error(N4+hu(t));return t}function XY(t,e){var a,r,s,l,h,n,w,T,P,z,k=t.constructor,U=k.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new k(t),$o?so(e,U):e;if(w=t.d,z=e.d,r=e.e,T=t.e,w=w.slice(),h=T-r,h){for(P=h<0,P?(a=w,h=-h,n=z.length):(a=z,r=T,n=w.length),s=Math.max(Math.ceil(U/Po),n)+2,h>s&&(h=s,a.length=1),a.reverse(),s=h;s--;)a.push(0);a.reverse()}else{for(s=w.length,n=z.length,P=s<n,P&&(n=s),s=0;s<n;s++)if(w[s]!=z[s]){P=w[s]<z[s];break}h=0}for(P&&(a=w,w=z,z=a,e.s=-e.s),n=w.length,s=z.length-n;s>0;--s)w[n++]=0;for(s=z.length;s>h;){if(w[--s]<z[s]){for(l=s;l&&w[--l]===0;)w[l]=ec-1;--w[l],w[s]+=ec}w[s]-=z[s]}for(;w[--n]===0;)w.pop();for(;w[0]===0;w.shift())--r;return w[0]?(e.d=w,e.e=r,$o?so(e,U):e):new k(0)}function v0(t,e,a){var r,s=hu(t),l=Sm(t.d),h=l.length;return e?(a&&(r=a-h)>0?l=l.charAt(0)+"."+l.slice(1)+wg(r):h>1&&(l=l.charAt(0)+"."+l.slice(1)),l=l+(s<0?"e":"e+")+s):s<0?(l="0."+wg(-s-1)+l,a&&(r=a-h)>0&&(l+=wg(r))):s>=h?(l+=wg(s+1-h),a&&(r=a-s-1)>0&&(l=l+"."+wg(r))):((r=s+1)<h&&(l=l.slice(0,r)+"."+l.slice(r)),a&&(r=a-h)>0&&(s+1===h&&(l+="."),l+=wg(r))),t.s<0?"-"+l:l}function j7(t,e){if(t.length>e)return t.length=e,!0}function JY(t){var e,a,r;function s(l){var h=this;if(!(h instanceof s))return new s(l);if(h.constructor=s,l instanceof s){h.s=l.s,h.e=l.e,h.d=(l=l.d)?l.slice():l;return}if(typeof l=="number"){if(l*0!==0)throw Error(l0+l);if(l>0)h.s=1;else if(l<0)l=-l,h.s=-1;else{h.s=0,h.e=0,h.d=[0];return}if(l===~~l&&l<1e7){h.e=0,h.d=[l];return}return G7(h,l.toString())}else if(typeof l!="string")throw Error(l0+l);if(l.charCodeAt(0)===45?(l=l.slice(1),h.s=-1):h.s=1,_0e.test(l))G7(h,l);else throw Error(l0+l)}if(s.prototype=Wr,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=JY,s.config=s.set=v0e,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(a=r[e++])||(t[a]=this[a]);return s.config(t),s}function v0e(t){if(!t||typeof t!="object")throw Error($f+"Object expected");var e,a,r,s=["precision",1,s1,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<s.length;e+=3)if((r=t[a=s[e]])!==void 0)if(o1(r)===r&&r>=s[e+1]&&r<=s[e+2])this[a]=r;else throw Error(l0+a+": "+r);if((r=t[a="LN10"])!==void 0)if(r==Math.LN10)this[a]=new this(r);else throw Error(l0+a+": "+r);return this}var V4=JY(A0e);sf=new V4(1);const Ys=V4;function w0e(t){return C0e(t)||S0e(t)||T0e(t)||R0e()}function R0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T0e(t,e){if(t){if(typeof t=="string")return tM(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return tM(t,e)}}function S0e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function C0e(t){if(Array.isArray(t))return tM(t)}function tM(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}var b0e=function(e){return e},QY={},eX=function(e){return e===QY},Z7=function(e){return function a(){return arguments.length===0||arguments.length===1&&eX(arguments.length<=0?void 0:arguments[0])?a:e.apply(void 0,arguments)}},x0e=function t(e,a){return e===1?a:Z7(function(){for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];var h=s.filter(function(n){return n!==QY}).length;return h>=e?a.apply(void 0,s):t(e-h,Z7(function(){for(var n=arguments.length,w=new Array(n),T=0;T<n;T++)w[T]=arguments[T];var P=s.map(function(z){return eX(z)?w.shift():z});return a.apply(void 0,w0e(P).concat(w))}))})},X2=function(e){return x0e(e.length,e)},aM=function(e,a){for(var r=[],s=e;s<a;++s)r[s-e]=s;return r},P0e=X2(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(a){return e[a]}).map(t)}),E0e=function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];if(!a.length)return b0e;var s=a.reverse(),l=s[0],h=s.slice(1);return function(){return h.reduce(function(n,w){return w(n)},l.apply(void 0,arguments))}},rM=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},tX=function(e){var a=null,r=null;return function(){for(var s=arguments.length,l=new Array(s),h=0;h<s;h++)l[h]=arguments[h];return a&&l.every(function(n,w){return n===a[w]})||(a=l,r=e.apply(void 0,l)),r}};function N0e(t){var e;return t===0?e=1:e=Math.floor(new Ys(t).abs().log(10).toNumber())+1,e}function V0e(t,e,a){for(var r=new Ys(t),s=0,l=[];r.lt(e)&&s<1e5;)l.push(r.toNumber()),r=r.add(a),s++;return l}var z0e=X2(function(t,e,a){var r=+t,s=+e;return r+a*(s-r)}),O0e=X2(function(t,e,a){var r=e-+t;return r=r||1/0,(a-t)/r}),D0e=X2(function(t,e,a){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(a-t)/r))});const J2={rangeStep:V0e,getDigitCount:N0e,interpolateNumber:z0e,uninterpolateNumber:O0e,uninterpolateTruncation:D0e};function nM(t){return L0e(t)||I0e(t)||aX(t)||M0e()}function M0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I0e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function L0e(t){if(Array.isArray(t))return iM(t)}function jR(t,e){return k0e(t)||U0e(t,e)||aX(t,e)||F0e()}function F0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aX(t,e){if(t){if(typeof t=="string")return iM(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return iM(t,e)}}function iM(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function U0e(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var a=[],r=!0,s=!1,l=void 0;try{for(var h=t[Symbol.iterator](),n;!(r=(n=h.next()).done)&&(a.push(n.value),!(e&&a.length===e));r=!0);}catch(w){s=!0,l=w}finally{try{!r&&h.return!=null&&h.return()}finally{if(s)throw l}}return a}}function k0e(t){if(Array.isArray(t))return t}function rX(t){var e=jR(t,2),a=e[0],r=e[1],s=a,l=r;return a>r&&(s=r,l=a),[s,l]}function nX(t,e,a){if(t.lte(0))return new Ys(0);var r=J2.getDigitCount(t.toNumber()),s=new Ys(10).pow(r),l=t.div(s),h=r!==1?.05:.1,n=new Ys(Math.ceil(l.div(h).toNumber())).add(a).mul(h),w=n.mul(s);return e?w:new Ys(Math.ceil(w))}function B0e(t,e,a){var r=1,s=new Ys(t);if(!s.isint()&&a){var l=Math.abs(t);l<1?(r=new Ys(10).pow(J2.getDigitCount(t)-1),s=new Ys(Math.floor(s.div(r).toNumber())).mul(r)):l>1&&(s=new Ys(Math.floor(t)))}else t===0?s=new Ys(Math.floor((e-1)/2)):a||(s=new Ys(Math.floor(t)));var h=Math.floor((e-1)/2),n=E0e(P0e(function(w){return s.add(new Ys(w-h).mul(r)).toNumber()}),aM);return n(0,e)}function iX(t,e,a,r){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(a-1)))return{step:new Ys(0),tickMin:new Ys(0),tickMax:new Ys(0)};var l=nX(new Ys(e).sub(t).div(a-1),r,s),h;t<=0&&e>=0?h=new Ys(0):(h=new Ys(t).add(e).div(2),h=h.sub(new Ys(h).mod(l)));var n=Math.ceil(h.sub(t).div(l).toNumber()),w=Math.ceil(new Ys(e).sub(h).div(l).toNumber()),T=n+w+1;return T>a?iX(t,e,a,r,s+1):(T<a&&(w=e>0?w+(a-T):w,n=e>0?n:n+(a-T)),{step:l,tickMin:h.sub(new Ys(n).mul(l)),tickMax:h.add(new Ys(w).mul(l))})}function G0e(t){var e=jR(t,2),a=e[0],r=e[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,h=Math.max(s,2),n=rX([a,r]),w=jR(n,2),T=w[0],P=w[1];if(T===-1/0||P===1/0){var z=P===1/0?[T].concat(nM(aM(0,s-1).map(function(){return 1/0}))):[].concat(nM(aM(0,s-1).map(function(){return-1/0})),[P]);return a>r?rM(z):z}if(T===P)return B0e(T,s,l);var k=iX(T,P,h,l),U=k.step,Z=k.tickMin,H=k.tickMax,q=J2.rangeStep(Z,H.add(new Ys(.1).mul(U)),U);return a>r?rM(q):q}function j0e(t,e){var a=jR(t,2),r=a[0],s=a[1],l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,h=rX([r,s]),n=jR(h,2),w=n[0],T=n[1];if(w===-1/0||T===1/0)return[r,s];if(w===T)return[w];var P=Math.max(e,2),z=nX(new Ys(T).sub(w).div(P-1),l,0),k=[].concat(nM(J2.rangeStep(new Ys(w),new Ys(T).sub(new Ys(.99).mul(z)),z)),[T]);return r>s?rM(k):k}var Z0e=tX(G0e),q0e=tX(j0e),H0e="Invariant failed";function w0(t,e){throw new Error(H0e)}var $0e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Rv(t){"@babel/helpers - typeof";return Rv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rv(t)}function ix(){return ix=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ix.apply(this,arguments)}function K0e(t,e){return J0e(t)||X0e(t,e)||Y0e(t,e)||W0e()}function W0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y0e(t,e){if(t){if(typeof t=="string")return q7(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return q7(t,e)}}function q7(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function X0e(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,s,l,h,n=[],w=!0,T=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(w=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);w=!0);}catch(P){T=!0,s=P}finally{try{if(!w&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(T)throw s}}return n}}function J0e(t){if(Array.isArray(t))return t}function Q0e(t,e){if(t==null)return{};var a=e_e(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function e_e(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function t_e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a_e(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lX(r.key),r)}}function r_e(t,e,a){return e&&a_e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function n_e(t,e,a){return e=sx(e),i_e(t,sX()?Reflect.construct(e,a||[],sx(t).constructor):e.apply(t,a))}function i_e(t,e){if(e&&(Rv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s_e(t)}function s_e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sX=function(){return!!t})()}function sx(t){return sx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},sx(t)}function o_e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sM(t,e)}function sM(t,e){return sM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},sM(t,e)}function oX(t,e,a){return e=lX(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function lX(t){var e=l_e(t,"string");return Rv(e)=="symbol"?e:e+""}function l_e(t,e){if(Rv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Rv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var l1=function(t){function e(){return t_e(this,e),n_e(this,e,arguments)}return o_e(e,t),r_e(e,[{key:"render",value:function(){var r=this.props,s=r.offset,l=r.layout,h=r.width,n=r.dataKey,w=r.data,T=r.dataPointFormatter,P=r.xAxis,z=r.yAxis,k=Q0e(r,$0e),U=ln(k,!1);this.props.direction==="x"&&P.type!=="number"&&w0();var Z=w.map(function(H){var q=T(H,n),J=q.x,re=q.y,ce=q.value,ye=q.errorVal;if(!ye)return null;var he=[],_e,me;if(Array.isArray(ye)){var Re=K0e(ye,2);_e=Re[0],me=Re[1]}else _e=me=ye;if(l==="vertical"){var be=P.scale,De=re+s,ie=De+h,ge=De-h,Me=be(ce-_e),ze=be(ce+me);he.push({x1:ze,y1:ie,x2:ze,y2:ge}),he.push({x1:Me,y1:De,x2:ze,y2:De}),he.push({x1:Me,y1:ie,x2:Me,y2:ge})}else if(l==="horizontal"){var Le=z.scale,Ie=J+s,Ze=Ie-h,ke=Ie+h,tt=Le(ce-_e),Ue=Le(ce+me);he.push({x1:Ze,y1:Ue,x2:ke,y2:Ue}),he.push({x1:Ie,y1:tt,x2:Ie,y2:Ue}),he.push({x1:Ze,y1:tt,x2:ke,y2:tt})}return Vt.createElement(fi,ix({className:"recharts-errorBar",key:"bar-".concat(he.map(function(He){return"".concat(He.x1,"-").concat(He.x2,"-").concat(He.y1,"-").concat(He.y2)}))},U),he.map(function(He){return Vt.createElement("line",ix({},He,{key:"line-".concat(He.x1,"-").concat(He.x2,"-").concat(He.y1,"-").concat(He.y2)}))}))});return Vt.createElement(fi,{className:"recharts-errorBars"},Z)}}])}(Vt.Component);oX(l1,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});oX(l1,"displayName","ErrorBar");function ZR(t){"@babel/helpers - typeof";return ZR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ZR(t)}function H7(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function BA(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?H7(Object(a),!0).forEach(function(r){u_e(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):H7(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function u_e(t,e,a){return e=c_e(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function c_e(t){var e=d_e(t,"string");return ZR(e)=="symbol"?e:e+""}function d_e(t,e){if(ZR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(ZR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uX=function(e){var a=e.children,r=e.formattedGraphicalItems,s=e.legendWidth,l=e.legendContent,h=rf(a,nf);if(!h)return null;var n=nf.defaultProps,w=n!==void 0?BA(BA({},n),h.props):{},T;return h.props&&h.props.payload?T=h.props&&h.props.payload:l==="children"?T=(r||[]).reduce(function(P,z){var k=z.item,U=z.props,Z=U.sectors||U.data||[];return P.concat(Z.map(function(H){return{type:h.props.iconType||k.props.legendType,value:H.name,color:H.fill,payload:H}}))},[]):T=(r||[]).map(function(P){var z=P.item,k=z.type.defaultProps,U=k!==void 0?BA(BA({},k),z.props):{},Z=U.dataKey,H=U.name,q=U.legendType,J=U.hide;return{inactive:J,dataKey:Z,type:w.iconType||q||"square",color:z4(z),value:H||Z,payload:U}}),BA(BA(BA({},w),nf.getWithHeight(h,s)),{},{payload:T,item:h})};function qR(t){"@babel/helpers - typeof";return qR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qR(t)}function $7(t){return m_e(t)||p_e(t)||f_e(t)||h_e()}function h_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f_e(t,e){if(t){if(typeof t=="string")return oM(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return oM(t,e)}}function p_e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function m_e(t){if(Array.isArray(t))return oM(t)}function oM(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function K7(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function Tl(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?K7(Object(a),!0).forEach(function(r){Q_(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):K7(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Q_(t,e,a){return e=y_e(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function y_e(t){var e=g_e(t,"string");return qR(e)=="symbol"?e:e+""}function g_e(t,e){if(qR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(qR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function No(t,e,a){return Un(t)||Un(e)?a:Fu(e)?hf(t,e,a):Fn(e)?e(t):a}function aR(t,e,a,r){var s=m0e(t,function(n){return No(n,e)});if(a==="number"){var l=s.filter(function(n){return yr(n)||parseFloat(n)});return l.length?[Y2(l),Eg(l)]:[1/0,-1/0]}var h=r?s.filter(function(n){return!Un(n)}):s;return h.map(function(n){return Fu(n)||n instanceof Date?n:""})}var A_e=function(e){var a,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0,h=-1,n=(a=r==null?void 0:r.length)!==null&&a!==void 0?a:0;if(n<=1)return 0;if(l&&l.axisType==="angleAxis"&&Math.abs(Math.abs(l.range[1]-l.range[0])-360)<=1e-6)for(var w=l.range,T=0;T<n;T++){var P=T>0?s[T-1].coordinate:s[n-1].coordinate,z=s[T].coordinate,k=T>=n-1?s[0].coordinate:s[T+1].coordinate,U=void 0;if(Qd(z-P)!==Qd(k-z)){var Z=[];if(Qd(k-z)===Qd(w[1]-w[0])){U=k;var H=z+w[1]-w[0];Z[0]=Math.min(H,(H+P)/2),Z[1]=Math.max(H,(H+P)/2)}else{U=P;var q=k+w[1]-w[0];Z[0]=Math.min(z,(q+z)/2),Z[1]=Math.max(z,(q+z)/2)}var J=[Math.min(z,(U+z)/2),Math.max(z,(U+z)/2)];if(e>J[0]&&e<=J[1]||e>=Z[0]&&e<=Z[1]){h=s[T].index;break}}else{var re=Math.min(P,k),ce=Math.max(P,k);if(e>(re+z)/2&&e<=(ce+z)/2){h=s[T].index;break}}}else for(var ye=0;ye<n;ye++)if(ye===0&&e<=(r[ye].coordinate+r[ye+1].coordinate)/2||ye>0&&ye<n-1&&e>(r[ye].coordinate+r[ye-1].coordinate)/2&&e<=(r[ye].coordinate+r[ye+1].coordinate)/2||ye===n-1&&e>(r[ye].coordinate+r[ye-1].coordinate)/2){h=r[ye].index;break}return h},z4=function(e){var a,r=e,s=r.type.displayName,l=(a=e.type)!==null&&a!==void 0&&a.defaultProps?Tl(Tl({},e.type.defaultProps),e.props):e.props,h=l.stroke,n=l.fill,w;switch(s){case"Line":w=h;break;case"Area":case"Radar":w=h&&h!=="none"?h:n;break;default:w=n;break}return w},__e=function(e){var a=e.barSize,r=e.totalSize,s=e.stackGroups,l=s===void 0?{}:s;if(!l)return{};for(var h={},n=Object.keys(l),w=0,T=n.length;w<T;w++)for(var P=l[n[w]].stackGroups,z=Object.keys(P),k=0,U=z.length;k<U;k++){var Z=P[z[k]],H=Z.items,q=Z.cateAxisId,J=H.filter(function(me){return _y(me.type).indexOf("Bar")>=0});if(J&&J.length){var re=J[0].type.defaultProps,ce=re!==void 0?Tl(Tl({},re),J[0].props):J[0].props,ye=ce.barSize,he=ce[q];h[he]||(h[he]=[]);var _e=Un(ye)?a:ye;h[he].push({item:J[0],stackList:J.slice(1),barSize:Un(_e)?void 0:eh(_e,r,0)})}}return h},v_e=function(e){var a=e.barGap,r=e.barCategoryGap,s=e.bandSize,l=e.sizeList,h=l===void 0?[]:l,n=e.maxBarSize,w=h.length;if(w<1)return null;var T=eh(a,s,0,!0),P,z=[];if(h[0].barSize===+h[0].barSize){var k=!1,U=s/w,Z=h.reduce(function(ye,he){return ye+he.barSize||0},0);Z+=(w-1)*T,Z>=s&&(Z-=(w-1)*T,T=0),Z>=s&&U>0&&(k=!0,U*=.9,Z=w*U);var H=(s-Z)/2>>0,q={offset:H-T,size:0};P=h.reduce(function(ye,he){var _e={item:he.item,position:{offset:q.offset+q.size+T,size:k?U:he.barSize}},me=[].concat($7(ye),[_e]);return q=me[me.length-1].position,he.stackList&&he.stackList.length&&he.stackList.forEach(function(Re){me.push({item:Re,position:q})}),me},z)}else{var J=eh(r,s,0,!0);s-2*J-(w-1)*T<=0&&(T=0);var re=(s-2*J-(w-1)*T)/w;re>1&&(re>>=0);var ce=n===+n?Math.min(re,n):re;P=h.reduce(function(ye,he,_e){var me=[].concat($7(ye),[{item:he.item,position:{offset:J+(re+T)*_e+(re-ce)/2,size:ce}}]);return he.stackList&&he.stackList.length&&he.stackList.forEach(function(Re){me.push({item:Re,position:me[me.length-1].position})}),me},z)}return P},w_e=function(e,a,r,s){var l=r.children,h=r.width,n=r.margin,w=h-(n.left||0)-(n.right||0),T=uX({children:l,legendWidth:w});if(T){var P=s||{},z=P.width,k=P.height,U=T.align,Z=T.verticalAlign,H=T.layout;if((H==="vertical"||H==="horizontal"&&Z==="middle")&&U!=="center"&&yr(e[U]))return Tl(Tl({},e),{},Q_({},U,e[U]+(z||0)));if((H==="horizontal"||H==="vertical"&&U==="center")&&Z!=="middle"&&yr(e[Z]))return Tl(Tl({},e),{},Q_({},Z,e[Z]+(k||0)))}return e},R_e=function(e,a,r){return Un(a)?!0:e==="horizontal"?a==="yAxis":e==="vertical"||r==="x"?a==="xAxis":r==="y"?a==="yAxis":!0},cX=function(e,a,r,s,l){var h=a.props.children,n=nh(h,l1).filter(function(T){return R_e(s,l,T.props.direction)});if(n&&n.length){var w=n.map(function(T){return T.props.dataKey});return e.reduce(function(T,P){var z=No(P,r);if(Un(z))return T;var k=Array.isArray(z)?[Y2(z),Eg(z)]:[z,z],U=w.reduce(function(Z,H){var q=No(P,H,0),J=k[0]-Math.abs(Array.isArray(q)?q[0]:q),re=k[1]+Math.abs(Array.isArray(q)?q[1]:q);return[Math.min(J,Z[0]),Math.max(re,Z[1])]},[1/0,-1/0]);return[Math.min(U[0],T[0]),Math.max(U[1],T[1])]},[1/0,-1/0])}return null},T_e=function(e,a,r,s,l){var h=a.map(function(n){return cX(e,n,r,l,s)}).filter(function(n){return!Un(n)});return h&&h.length?h.reduce(function(n,w){return[Math.min(n[0],w[0]),Math.max(n[1],w[1])]},[1/0,-1/0]):null},dX=function(e,a,r,s,l){var h=a.map(function(w){var T=w.props.dataKey;return r==="number"&&T&&cX(e,w,T,s)||aR(e,T,r,l)});if(r==="number")return h.reduce(function(w,T){return[Math.min(w[0],T[0]),Math.max(w[1],T[1])]},[1/0,-1/0]);var n={};return h.reduce(function(w,T){for(var P=0,z=T.length;P<z;P++)n[T[P]]||(n[T[P]]=!0,w.push(T[P]));return w},[])},hX=function(e,a){return e==="horizontal"&&a==="xAxis"||e==="vertical"&&a==="yAxis"||e==="centric"&&a==="angleAxis"||e==="radial"&&a==="radiusAxis"},fX=function(e,a,r,s){if(s)return e.map(function(w){return w.coordinate});var l,h,n=e.map(function(w){return w.coordinate===a&&(l=!0),w.coordinate===r&&(h=!0),w.coordinate});return l||n.push(a),h||n.push(r),n},yy=function(e,a,r){if(!e)return null;var s=e.scale,l=e.duplicateDomain,h=e.type,n=e.range,w=e.realScaleType==="scaleBand"?s.bandwidth()/2:2,T=(a||r)&&h==="category"&&s.bandwidth?s.bandwidth()/w:0;if(T=e.axisType==="angleAxis"&&(n==null?void 0:n.length)>=2?Qd(n[0]-n[1])*2*T:T,a&&(e.ticks||e.niceTicks)){var P=(e.ticks||e.niceTicks).map(function(z){var k=l?l.indexOf(z):z;return{coordinate:s(k)+T,value:z,offset:T}});return P.filter(function(z){return!r1(z.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(z,k){return{coordinate:s(z)+T,value:z,index:k,offset:T}}):s.ticks&&!r?s.ticks(e.tickCount).map(function(z){return{coordinate:s(z)+T,value:z,offset:T}}):s.domain().map(function(z,k){return{coordinate:s(z)+T,value:l?l[z]:z,index:k,offset:T}})},xO=new WeakMap,SC=function(e,a){if(typeof a!="function")return e;xO.has(e)||xO.set(e,new WeakMap);var r=xO.get(e);if(r.has(a))return r.get(a);var s=function(){e.apply(void 0,arguments),a.apply(void 0,arguments)};return r.set(a,s),s},pX=function(e,a,r){var s=e.scale,l=e.type,h=e.layout,n=e.axisType;if(s==="auto")return h==="radial"&&n==="radiusAxis"?{scale:LR(),realScaleType:"band"}:h==="radial"&&n==="angleAxis"?{scale:ex(),realScaleType:"linear"}:l==="category"&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!r)?{scale:tR(),realScaleType:"point"}:l==="category"?{scale:LR(),realScaleType:"band"}:{scale:ex(),realScaleType:"linear"};if(UT(s)){var w="scale".concat(M2(s));return{scale:(O7[w]||tR)(),realScaleType:O7[w]?w:"point"}}return Fn(s)?{scale:s}:{scale:tR(),realScaleType:"point"}},W7=1e-4,mX=function(e){var a=e.domain();if(!(!a||a.length<=2)){var r=a.length,s=e.range(),l=Math.min(s[0],s[1])-W7,h=Math.max(s[0],s[1])+W7,n=e(a[0]),w=e(a[r-1]);(n<l||n>h||w<l||w>h)&&e.domain([a[0],a[r-1]])}},S_e=function(e,a){if(!e)return null;for(var r=0,s=e.length;r<s;r++)if(e[r].item===a)return e[r].position;return null},C_e=function(e,a){if(!a||a.length!==2||!yr(a[0])||!yr(a[1]))return e;var r=Math.min(a[0],a[1]),s=Math.max(a[0],a[1]),l=[e[0],e[1]];return(!yr(e[0])||e[0]<r)&&(l[0]=r),(!yr(e[1])||e[1]>s)&&(l[1]=s),l[0]>s&&(l[0]=s),l[1]<r&&(l[1]=r),l},b_e=function(e){var a=e.length;if(!(a<=0))for(var r=0,s=e[0].length;r<s;++r)for(var l=0,h=0,n=0;n<a;++n){var w=r1(e[n][r][1])?e[n][r][0]:e[n][r][1];w>=0?(e[n][r][0]=l,e[n][r][1]=l+w,l=e[n][r][1]):(e[n][r][0]=h,e[n][r][1]=h+w,h=e[n][r][1])}},x_e=function(e){var a=e.length;if(!(a<=0))for(var r=0,s=e[0].length;r<s;++r)for(var l=0,h=0;h<a;++h){var n=r1(e[h][r][1])?e[h][r][0]:e[h][r][1];n>=0?(e[h][r][0]=l,e[h][r][1]=l+n,l=e[h][r][1]):(e[h][r][0]=0,e[h][r][1]=0)}},P_e={sign:b_e,expand:mfe,none:fv,silhouette:yfe,wiggle:gfe,positive:x_e},E_e=function(e,a,r){var s=a.map(function(n){return n.props.dataKey}),l=P_e[r],h=pfe().keys(s).value(function(n,w){return+No(n,w,0)}).order(LD).offset(l);return h(e)},N_e=function(e,a,r,s,l,h){if(!e)return null;var n=h?a.reverse():a,w={},T=n.reduce(function(z,k){var U,Z=(U=k.type)!==null&&U!==void 0&&U.defaultProps?Tl(Tl({},k.type.defaultProps),k.props):k.props,H=Z.stackId,q=Z.hide;if(q)return z;var J=Z[r],re=z[J]||{hasStack:!1,stackGroups:{}};if(Fu(H)){var ce=re.stackGroups[H]||{numericAxisId:r,cateAxisId:s,items:[]};ce.items.push(k),re.hasStack=!0,re.stackGroups[H]=ce}else re.stackGroups[Jg("_stackId_")]={numericAxisId:r,cateAxisId:s,items:[k]};return Tl(Tl({},z),{},Q_({},J,re))},w),P={};return Object.keys(T).reduce(function(z,k){var U=T[k];if(U.hasStack){var Z={};U.stackGroups=Object.keys(U.stackGroups).reduce(function(H,q){var J=U.stackGroups[q];return Tl(Tl({},H),{},Q_({},q,{numericAxisId:r,cateAxisId:s,items:J.items,stackedData:E_e(e,J.items,l)}))},Z)}return Tl(Tl({},z),{},Q_({},k,U))},P)},yX=function(e,a){var r=a.realScaleType,s=a.type,l=a.tickCount,h=a.originalDomain,n=a.allowDecimals,w=r||a.scale;if(w!=="auto"&&w!=="linear")return null;if(l&&s==="number"&&h&&(h[0]==="auto"||h[1]==="auto")){var T=e.domain();if(!T.length)return null;var P=Z0e(T,l,n);return e.domain([Y2(P),Eg(P)]),{niceTicks:P}}if(l&&s==="number"){var z=e.domain(),k=q0e(z,l,n);return{niceTicks:k}}return null};function Tv(t){var e=t.axis,a=t.ticks,r=t.bandSize,s=t.entry,l=t.index,h=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Un(s[e.dataKey])){var n=Ib(a,"value",s[e.dataKey]);if(n)return n.coordinate+r/2}return a[l]?a[l].coordinate+r/2:null}var w=No(s,Un(h)?e.dataKey:h);return Un(w)?null:e.scale(w)}var Y7=function(e){var a=e.axis,r=e.ticks,s=e.offset,l=e.bandSize,h=e.entry,n=e.index;if(a.type==="category")return r[n]?r[n].coordinate+s:null;var w=No(h,a.dataKey,a.domain[n]);return Un(w)?null:a.scale(w)-l/2+s},V_e=function(e){var a=e.numericAxis,r=a.scale.domain();if(a.type==="number"){var s=Math.min(r[0],r[1]),l=Math.max(r[0],r[1]);return s<=0&&l>=0?0:l<0?l:s}return r[0]},z_e=function(e,a){var r,s=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Tl(Tl({},e.type.defaultProps),e.props):e.props,l=s.stackId;if(Fu(l)){var h=a[l];if(h){var n=h.items.indexOf(e);return n>=0?h.stackedData[n]:null}}return null},O_e=function(e){return e.reduce(function(a,r){return[Y2(r.concat([a[0]]).filter(yr)),Eg(r.concat([a[1]]).filter(yr))]},[1/0,-1/0])},gX=function(e,a,r){return Object.keys(e).reduce(function(s,l){var h=e[l],n=h.stackedData,w=n.reduce(function(T,P){var z=O_e(P.slice(a,r+1));return[Math.min(T[0],z[0]),Math.max(T[1],z[1])]},[1/0,-1/0]);return[Math.min(w[0],s[0]),Math.max(w[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},X7=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,J7=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,lM=function(e,a,r){if(Fn(e))return e(a,r);if(!Array.isArray(e))return a;var s=[];if(yr(e[0]))s[0]=r?e[0]:Math.min(e[0],a[0]);else if(X7.test(e[0])){var l=+X7.exec(e[0])[1];s[0]=a[0]-l}else Fn(e[0])?s[0]=e[0](a[0]):s[0]=a[0];if(yr(e[1]))s[1]=r?e[1]:Math.max(e[1],a[1]);else if(J7.test(e[1])){var h=+J7.exec(e[1])[1];s[1]=a[1]+h}else Fn(e[1])?s[1]=e[1](a[1]):s[1]=a[1];return s},ox=function(e,a,r){if(e&&e.scale&&e.scale.bandwidth){var s=e.scale.bandwidth();if(!r||s>0)return s}if(e&&a&&a.length>=2){for(var l=s4(a,function(z){return z.coordinate}),h=1/0,n=1,w=l.length;n<w;n++){var T=l[n],P=l[n-1];h=Math.min((T.coordinate||0)-(P.coordinate||0),h)}return h===1/0?0:h}return r?void 0:0},Q7=function(e,a,r){return!e||!e.length||Gg(e,hf(r,"type.defaultProps.domain"))?a:e},AX=function(e,a){var r=e.type.defaultProps?Tl(Tl({},e.type.defaultProps),e.props):e.props,s=r.dataKey,l=r.name,h=r.unit,n=r.formatter,w=r.tooltipType,T=r.chartType,P=r.hide;return Tl(Tl({},ln(e,!1)),{},{dataKey:s,unit:h,formatter:n,name:l||s,color:z4(e),value:No(a,s),type:w,payload:a,chartType:T,hide:P})};function HR(t){"@babel/helpers - typeof";return HR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HR(t)}function ej(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function cy(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?ej(Object(a),!0).forEach(function(r){_X(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ej(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function _X(t,e,a){return e=D_e(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function D_e(t){var e=M_e(t,"string");return HR(e)=="symbol"?e:e+""}function M_e(t,e){if(HR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(HR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function I_e(t,e){return k_e(t)||U_e(t,e)||F_e(t,e)||L_e()}function L_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F_e(t,e){if(t){if(typeof t=="string")return tj(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return tj(t,e)}}function tj(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function U_e(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,s,l,h,n=[],w=!0,T=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(w=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);w=!0);}catch(P){T=!0,s=P}finally{try{if(!w&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(T)throw s}}return n}}function k_e(t){if(Array.isArray(t))return t}var lx=Math.PI/180,B_e=function(e){return e*180/Math.PI},wo=function(e,a,r,s){return{x:e+Math.cos(-lx*s)*r,y:a+Math.sin(-lx*s)*r}},vX=function(e,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(a-(r.top||0)-(r.bottom||0)))/2},G_e=function(e,a,r,s,l){var h=e.width,n=e.height,w=e.startAngle,T=e.endAngle,P=eh(e.cx,h,h/2),z=eh(e.cy,n,n/2),k=vX(h,n,r),U=eh(e.innerRadius,k,0),Z=eh(e.outerRadius,k,k*.8),H=Object.keys(a);return H.reduce(function(q,J){var re=a[J],ce=re.domain,ye=re.reversed,he;if(Un(re.range))s==="angleAxis"?he=[w,T]:s==="radiusAxis"&&(he=[U,Z]),ye&&(he=[he[1],he[0]]);else{he=re.range;var _e=he,me=I_e(_e,2);w=me[0],T=me[1]}var Re=pX(re,l),be=Re.realScaleType,De=Re.scale;De.domain(ce).range(he),mX(De);var ie=yX(De,cy(cy({},re),{},{realScaleType:be})),ge=cy(cy(cy({},re),ie),{},{range:he,radius:Z,realScaleType:be,scale:De,cx:P,cy:z,innerRadius:U,outerRadius:Z,startAngle:w,endAngle:T});return cy(cy({},q),{},_X({},J,ge))},{})},j_e=function(e,a){var r=e.x,s=e.y,l=a.x,h=a.y;return Math.sqrt(Math.pow(r-l,2)+Math.pow(s-h,2))},Z_e=function(e,a){var r=e.x,s=e.y,l=a.cx,h=a.cy,n=j_e({x:r,y:s},{x:l,y:h});if(n<=0)return{radius:n};var w=(r-l)/n,T=Math.acos(w);return s>h&&(T=2*Math.PI-T),{radius:n,angle:B_e(T),angleInRadian:T}},q_e=function(e){var a=e.startAngle,r=e.endAngle,s=Math.floor(a/360),l=Math.floor(r/360),h=Math.min(s,l);return{startAngle:a-h*360,endAngle:r-h*360}},H_e=function(e,a){var r=a.startAngle,s=a.endAngle,l=Math.floor(r/360),h=Math.floor(s/360),n=Math.min(l,h);return e+n*360},aj=function(e,a){var r=e.x,s=e.y,l=Z_e({x:r,y:s},a),h=l.radius,n=l.angle,w=a.innerRadius,T=a.outerRadius;if(h<w||h>T)return!1;if(h===0)return!0;var P=q_e(a),z=P.startAngle,k=P.endAngle,U=n,Z;if(z<=k){for(;U>k;)U-=360;for(;U<z;)U+=360;Z=U>=z&&U<=k}else{for(;U>z;)U-=360;for(;U<k;)U+=360;Z=U>=k&&U<=z}return Z?cy(cy({},a),{},{radius:h,angle:H_e(U,a)}):null},wX=function(e){return!nt.isValidElement(e)&&!Fn(e)&&typeof e!="boolean"?e.className:""};function $R(t){"@babel/helpers - typeof";return $R=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$R(t)}var $_e=["offset"];function K_e(t){return J_e(t)||X_e(t)||Y_e(t)||W_e()}function W_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y_e(t,e){if(t){if(typeof t=="string")return uM(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return uM(t,e)}}function X_e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function J_e(t){if(Array.isArray(t))return uM(t)}function uM(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function Q_e(t,e){if(t==null)return{};var a=eve(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function eve(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function rj(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function Lu(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?rj(Object(a),!0).forEach(function(r){tve(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):rj(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function tve(t,e,a){return e=ave(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function ave(t){var e=rve(t,"string");return $R(e)=="symbol"?e:e+""}function rve(t,e){if($R(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if($R(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function KR(){return KR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},KR.apply(this,arguments)}var nve=function(e){var a=e.value,r=e.formatter,s=Un(e.children)?a:e.children;return Fn(r)?r(s):s},ive=function(e,a){var r=Qd(a-e),s=Math.min(Math.abs(a-e),360);return r*s},sve=function(e,a,r){var s=e.position,l=e.viewBox,h=e.offset,n=e.className,w=l,T=w.cx,P=w.cy,z=w.innerRadius,k=w.outerRadius,U=w.startAngle,Z=w.endAngle,H=w.clockWise,q=(z+k)/2,J=ive(U,Z),re=J>=0?1:-1,ce,ye;s==="insideStart"?(ce=U+re*h,ye=H):s==="insideEnd"?(ce=Z-re*h,ye=!H):s==="end"&&(ce=Z+re*h,ye=H),ye=J<=0?ye:!ye;var he=wo(T,P,q,ce),_e=wo(T,P,q,ce+(ye?1:-1)*359),me="M".concat(he.x,",").concat(he.y,`
    A`).concat(q,",").concat(q,",0,1,").concat(ye?0:1,`,
    `).concat(_e.x,",").concat(_e.y),Re=Un(e.id)?Jg("recharts-radial-line-"):e.id;return Vt.createElement("text",KR({},r,{dominantBaseline:"central",className:ci("recharts-radial-bar-label",n)}),Vt.createElement("defs",null,Vt.createElement("path",{id:Re,d:me})),Vt.createElement("textPath",{xlinkHref:"#".concat(Re)},a))},ove=function(e){var a=e.viewBox,r=e.offset,s=e.position,l=a,h=l.cx,n=l.cy,w=l.innerRadius,T=l.outerRadius,P=l.startAngle,z=l.endAngle,k=(P+z)/2;if(s==="outside"){var U=wo(h,n,T+r,k),Z=U.x,H=U.y;return{x:Z,y:H,textAnchor:Z>=h?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:h,y:n,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:h,y:n,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:h,y:n,textAnchor:"middle",verticalAnchor:"end"};var q=(w+T)/2,J=wo(h,n,q,k),re=J.x,ce=J.y;return{x:re,y:ce,textAnchor:"middle",verticalAnchor:"middle"}},lve=function(e){var a=e.viewBox,r=e.parentViewBox,s=e.offset,l=e.position,h=a,n=h.x,w=h.y,T=h.width,P=h.height,z=P>=0?1:-1,k=z*s,U=z>0?"end":"start",Z=z>0?"start":"end",H=T>=0?1:-1,q=H*s,J=H>0?"end":"start",re=H>0?"start":"end";if(l==="top"){var ce={x:n+T/2,y:w-z*s,textAnchor:"middle",verticalAnchor:U};return Lu(Lu({},ce),r?{height:Math.max(w-r.y,0),width:T}:{})}if(l==="bottom"){var ye={x:n+T/2,y:w+P+k,textAnchor:"middle",verticalAnchor:Z};return Lu(Lu({},ye),r?{height:Math.max(r.y+r.height-(w+P),0),width:T}:{})}if(l==="left"){var he={x:n-q,y:w+P/2,textAnchor:J,verticalAnchor:"middle"};return Lu(Lu({},he),r?{width:Math.max(he.x-r.x,0),height:P}:{})}if(l==="right"){var _e={x:n+T+q,y:w+P/2,textAnchor:re,verticalAnchor:"middle"};return Lu(Lu({},_e),r?{width:Math.max(r.x+r.width-_e.x,0),height:P}:{})}var me=r?{width:T,height:P}:{};return l==="insideLeft"?Lu({x:n+q,y:w+P/2,textAnchor:re,verticalAnchor:"middle"},me):l==="insideRight"?Lu({x:n+T-q,y:w+P/2,textAnchor:J,verticalAnchor:"middle"},me):l==="insideTop"?Lu({x:n+T/2,y:w+k,textAnchor:"middle",verticalAnchor:Z},me):l==="insideBottom"?Lu({x:n+T/2,y:w+P-k,textAnchor:"middle",verticalAnchor:U},me):l==="insideTopLeft"?Lu({x:n+q,y:w+k,textAnchor:re,verticalAnchor:Z},me):l==="insideTopRight"?Lu({x:n+T-q,y:w+k,textAnchor:J,verticalAnchor:Z},me):l==="insideBottomLeft"?Lu({x:n+q,y:w+P-k,textAnchor:re,verticalAnchor:U},me):l==="insideBottomRight"?Lu({x:n+T-q,y:w+P-k,textAnchor:J,verticalAnchor:U},me):a1(l)&&(yr(l.x)||QA(l.x))&&(yr(l.y)||QA(l.y))?Lu({x:n+eh(l.x,T),y:w+eh(l.y,P),textAnchor:"end",verticalAnchor:"end"},me):Lu({x:n+T/2,y:w+P/2,textAnchor:"middle",verticalAnchor:"middle"},me)},uve=function(e){return"cx"in e&&yr(e.cx)};function ac(t){var e=t.offset,a=e===void 0?5:e,r=Q_e(t,$_e),s=Lu({offset:a},r),l=s.viewBox,h=s.position,n=s.value,w=s.children,T=s.content,P=s.className,z=P===void 0?"":P,k=s.textBreakAll;if(!l||Un(n)&&Un(w)&&!nt.isValidElement(T)&&!Fn(T))return null;if(nt.isValidElement(T))return nt.cloneElement(T,s);var U;if(Fn(T)){if(U=nt.createElement(T,s),nt.isValidElement(U))return U}else U=nve(s);var Z=uve(l),H=ln(s,!0);if(Z&&(h==="insideStart"||h==="insideEnd"||h==="end"))return sve(s,U,H);var q=Z?ove(s):lve(s);return Vt.createElement(_0,KR({className:ci("recharts-label",z)},H,q,{breakAll:k}),U)}ac.displayName="Label";var RX=function(e){var a=e.cx,r=e.cy,s=e.angle,l=e.startAngle,h=e.endAngle,n=e.r,w=e.radius,T=e.innerRadius,P=e.outerRadius,z=e.x,k=e.y,U=e.top,Z=e.left,H=e.width,q=e.height,J=e.clockWise,re=e.labelViewBox;if(re)return re;if(yr(H)&&yr(q)){if(yr(z)&&yr(k))return{x:z,y:k,width:H,height:q};if(yr(U)&&yr(Z))return{x:U,y:Z,width:H,height:q}}return yr(z)&&yr(k)?{x:z,y:k,width:0,height:0}:yr(a)&&yr(r)?{cx:a,cy:r,startAngle:l||s||0,endAngle:h||s||0,innerRadius:T||0,outerRadius:P||w||n||0,clockWise:J}:e.viewBox?e.viewBox:{}},cve=function(e,a){return e?e===!0?Vt.createElement(ac,{key:"label-implicit",viewBox:a}):Fu(e)?Vt.createElement(ac,{key:"label-implicit",viewBox:a,value:e}):nt.isValidElement(e)?e.type===ac?nt.cloneElement(e,{key:"label-implicit",viewBox:a}):Vt.createElement(ac,{key:"label-implicit",content:e,viewBox:a}):Fn(e)?Vt.createElement(ac,{key:"label-implicit",content:e,viewBox:a}):a1(e)?Vt.createElement(ac,KR({viewBox:a},e,{key:"label-implicit"})):null:null},dve=function(e,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var s=e.children,l=RX(e),h=nh(s,ac).map(function(w,T){return nt.cloneElement(w,{viewBox:a||l,key:"label-".concat(T)})});if(!r)return h;var n=cve(e.label,a||l);return[n].concat(K_e(h))};ac.parseViewBox=RX;ac.renderCallByParent=dve;var PO,nj;function hve(){if(nj)return PO;nj=1;function t(e){var a=e==null?0:e.length;return a?e[a-1]:void 0}return PO=t,PO}var fve=hve();const pve=Ji(fve);function WR(t){"@babel/helpers - typeof";return WR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},WR(t)}var mve=["valueAccessor"],yve=["data","dataKey","clockWise","id","textBreakAll"];function gve(t){return wve(t)||vve(t)||_ve(t)||Ave()}function Ave(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _ve(t,e){if(t){if(typeof t=="string")return cM(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return cM(t,e)}}function vve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function wve(t){if(Array.isArray(t))return cM(t)}function cM(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function ux(){return ux=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ux.apply(this,arguments)}function ij(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function sj(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?ij(Object(a),!0).forEach(function(r){Rve(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ij(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Rve(t,e,a){return e=Tve(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Tve(t){var e=Sve(t,"string");return WR(e)=="symbol"?e:e+""}function Sve(t,e){if(WR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(WR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oj(t,e){if(t==null)return{};var a=Cve(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Cve(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}var bve=function(e){return Array.isArray(e.value)?pve(e.value):e.value};function Hf(t){var e=t.valueAccessor,a=e===void 0?bve:e,r=oj(t,mve),s=r.data,l=r.dataKey,h=r.clockWise,n=r.id,w=r.textBreakAll,T=oj(r,yve);return!s||!s.length?null:Vt.createElement(fi,{className:"recharts-label-list"},s.map(function(P,z){var k=Un(l)?a(P,z):No(P&&P.payload,l),U=Un(n)?{}:{id:"".concat(n,"-").concat(z)};return Vt.createElement(ac,ux({},ln(P,!0),T,U,{parentViewBox:P.parentViewBox,value:k,textBreakAll:w,viewBox:ac.parseViewBox(Un(h)?P:sj(sj({},P),{},{clockWise:h})),key:"label-".concat(z),index:z}))}))}Hf.displayName="LabelList";function xve(t,e){return t?t===!0?Vt.createElement(Hf,{key:"labelList-implicit",data:e}):Vt.isValidElement(t)||Fn(t)?Vt.createElement(Hf,{key:"labelList-implicit",data:e,content:t}):a1(t)?Vt.createElement(Hf,ux({data:e},t,{key:"labelList-implicit"})):null:null}function Pve(t,e){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var r=t.children,s=nh(r,Hf).map(function(h,n){return nt.cloneElement(h,{data:e,key:"labelList-".concat(n)})});if(!a)return s;var l=xve(t.label,e);return[l].concat(gve(s))}Hf.renderCallByParent=Pve;function YR(t){"@babel/helpers - typeof";return YR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},YR(t)}function dM(){return dM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},dM.apply(this,arguments)}function lj(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function uj(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?lj(Object(a),!0).forEach(function(r){Eve(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):lj(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Eve(t,e,a){return e=Nve(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Nve(t){var e=Vve(t,"string");return YR(e)=="symbol"?e:e+""}function Vve(t,e){if(YR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(YR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zve=function(e,a){var r=Qd(a-e),s=Math.min(Math.abs(a-e),359.999);return r*s},CC=function(e){var a=e.cx,r=e.cy,s=e.radius,l=e.angle,h=e.sign,n=e.isExternal,w=e.cornerRadius,T=e.cornerIsExternal,P=w*(n?1:-1)+s,z=Math.asin(w/P)/lx,k=T?l:l+h*z,U=wo(a,r,P,k),Z=wo(a,r,s,k),H=T?l-h*z:l,q=wo(a,r,P*Math.cos(z*lx),H);return{center:U,circleTangency:Z,lineTangency:q,theta:z}},TX=function(e){var a=e.cx,r=e.cy,s=e.innerRadius,l=e.outerRadius,h=e.startAngle,n=e.endAngle,w=zve(h,n),T=h+w,P=wo(a,r,l,h),z=wo(a,r,l,T),k="M ".concat(P.x,",").concat(P.y,`
    A `).concat(l,",").concat(l,`,0,
    `).concat(+(Math.abs(w)>180),",").concat(+(h>T),`,
    `).concat(z.x,",").concat(z.y,`
  `);if(s>0){var U=wo(a,r,s,h),Z=wo(a,r,s,T);k+="L ".concat(Z.x,",").concat(Z.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(w)>180),",").concat(+(h<=T),`,
            `).concat(U.x,",").concat(U.y," Z")}else k+="L ".concat(a,",").concat(r," Z");return k},Ove=function(e){var a=e.cx,r=e.cy,s=e.innerRadius,l=e.outerRadius,h=e.cornerRadius,n=e.forceCornerRadius,w=e.cornerIsExternal,T=e.startAngle,P=e.endAngle,z=Qd(P-T),k=CC({cx:a,cy:r,radius:l,angle:T,sign:z,cornerRadius:h,cornerIsExternal:w}),U=k.circleTangency,Z=k.lineTangency,H=k.theta,q=CC({cx:a,cy:r,radius:l,angle:P,sign:-z,cornerRadius:h,cornerIsExternal:w}),J=q.circleTangency,re=q.lineTangency,ce=q.theta,ye=w?Math.abs(T-P):Math.abs(T-P)-H-ce;if(ye<0)return n?"M ".concat(Z.x,",").concat(Z.y,`
        a`).concat(h,",").concat(h,",0,0,1,").concat(h*2,`,0
        a`).concat(h,",").concat(h,",0,0,1,").concat(-h*2,`,0
      `):TX({cx:a,cy:r,innerRadius:s,outerRadius:l,startAngle:T,endAngle:P});var he="M ".concat(Z.x,",").concat(Z.y,`
    A`).concat(h,",").concat(h,",0,0,").concat(+(z<0),",").concat(U.x,",").concat(U.y,`
    A`).concat(l,",").concat(l,",0,").concat(+(ye>180),",").concat(+(z<0),",").concat(J.x,",").concat(J.y,`
    A`).concat(h,",").concat(h,",0,0,").concat(+(z<0),",").concat(re.x,",").concat(re.y,`
  `);if(s>0){var _e=CC({cx:a,cy:r,radius:s,angle:T,sign:z,isExternal:!0,cornerRadius:h,cornerIsExternal:w}),me=_e.circleTangency,Re=_e.lineTangency,be=_e.theta,De=CC({cx:a,cy:r,radius:s,angle:P,sign:-z,isExternal:!0,cornerRadius:h,cornerIsExternal:w}),ie=De.circleTangency,ge=De.lineTangency,Me=De.theta,ze=w?Math.abs(T-P):Math.abs(T-P)-be-Me;if(ze<0&&h===0)return"".concat(he,"L").concat(a,",").concat(r,"Z");he+="L".concat(ge.x,",").concat(ge.y,`
      A`).concat(h,",").concat(h,",0,0,").concat(+(z<0),",").concat(ie.x,",").concat(ie.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(ze>180),",").concat(+(z>0),",").concat(me.x,",").concat(me.y,`
      A`).concat(h,",").concat(h,",0,0,").concat(+(z<0),",").concat(Re.x,",").concat(Re.y,"Z")}else he+="L".concat(a,",").concat(r,"Z");return he},Dve={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},SX=function(e){var a=uj(uj({},Dve),e),r=a.cx,s=a.cy,l=a.innerRadius,h=a.outerRadius,n=a.cornerRadius,w=a.forceCornerRadius,T=a.cornerIsExternal,P=a.startAngle,z=a.endAngle,k=a.className;if(h<l||P===z)return null;var U=ci("recharts-sector",k),Z=h-l,H=eh(n,Z,0,!0),q;return H>0&&Math.abs(P-z)<360?q=Ove({cx:r,cy:s,innerRadius:l,outerRadius:h,cornerRadius:Math.min(H,Z/2),forceCornerRadius:w,cornerIsExternal:T,startAngle:P,endAngle:z}):q=TX({cx:r,cy:s,innerRadius:l,outerRadius:h,startAngle:P,endAngle:z}),Vt.createElement("path",dM({},ln(a,!0),{className:U,d:q,role:"img"}))};function XR(t){"@babel/helpers - typeof";return XR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},XR(t)}function hM(){return hM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},hM.apply(this,arguments)}function cj(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function dj(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?cj(Object(a),!0).forEach(function(r){Mve(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):cj(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Mve(t,e,a){return e=Ive(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Ive(t){var e=Lve(t,"string");return XR(e)=="symbol"?e:e+""}function Lve(t,e){if(XR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(XR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hj={curveBasisClosed:rfe,curveBasisOpen:nfe,curveBasis:afe,curveBumpX:Ghe,curveBumpY:jhe,curveLinearClosed:ife,curveLinear:L2,curveMonotoneX:sfe,curveMonotoneY:ofe,curveNatural:lfe,curveStep:ufe,curveStepAfter:dfe,curveStepBefore:cfe},bC=function(e){return e.x===+e.x&&e.y===+e.y},xw=function(e){return e.x},Pw=function(e){return e.y},Fve=function(e,a){if(Fn(e))return e;var r="curve".concat(M2(e));return(r==="curveMonotone"||r==="curveBump")&&a?hj["".concat(r).concat(a==="vertical"?"Y":"X")]:hj[r]||L2},Uve=function(e){var a=e.type,r=a===void 0?"linear":a,s=e.points,l=s===void 0?[]:s,h=e.baseLine,n=e.layout,w=e.connectNulls,T=w===void 0?!1:w,P=Fve(r,n),z=T?l.filter(function(H){return bC(H)}):l,k;if(Array.isArray(h)){var U=T?h.filter(function(H){return bC(H)}):h,Z=z.map(function(H,q){return dj(dj({},H),{},{base:U[q]})});return n==="vertical"?k=gC().y(Pw).x1(xw).x0(function(H){return H.base.x}):k=gC().x(xw).y1(Pw).y0(function(H){return H.base.y}),k.defined(bC).curve(P),k(Z)}return n==="vertical"&&yr(h)?k=gC().y(Pw).x1(xw).x0(h):yr(h)?k=gC().x(xw).y1(Pw).y0(h):k=RW().x(xw).y(Pw),k.defined(bC).curve(P),k(z)},Lg=function(e){var a=e.className,r=e.points,s=e.path,l=e.pathRef;if((!r||!r.length)&&!s)return null;var h=r&&r.length?Uve(e):s;return Vt.createElement("path",hM({},ln(e,!1),Lb(e),{className:ci("recharts-curve",a),d:h,ref:l}))},EO={exports:{}},NO,fj;function kve(){if(fj)return NO;fj=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return NO=t,NO}var VO,pj;function Bve(){if(pj)return VO;pj=1;var t=kve();function e(){}function a(){}return a.resetWarningCache=e,VO=function(){function r(h,n,w,T,P,z){if(z!==t){var k=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw k.name="Invariant Violation",k}}r.isRequired=r;function s(){return r}var l={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:a,resetWarningCache:e};return l.PropTypes=l,l},VO}var mj;function Gve(){return mj||(mj=1,EO.exports=Bve()()),EO.exports}var jve=Gve();const zs=Ji(jve);var Zve=Object.getOwnPropertyNames,qve=Object.getOwnPropertySymbols,Hve=Object.prototype.hasOwnProperty;function yj(t,e){return function(r,s,l){return t(r,s,l)&&e(r,s,l)}}function xC(t){return function(a,r,s){if(!a||!r||typeof a!="object"||typeof r!="object")return t(a,r,s);var l=s.cache,h=l.get(a),n=l.get(r);if(h&&n)return h===r&&n===a;l.set(a,r),l.set(r,a);var w=t(a,r,s);return l.delete(a),l.delete(r),w}}function gj(t){return Zve(t).concat(qve(t))}var $ve=Object.hasOwn||function(t,e){return Hve.call(t,e)};function O0(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var Kve="__v",Wve="__o",Yve="_owner",Aj=Object.getOwnPropertyDescriptor,_j=Object.keys;function Xve(t,e,a){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!a.equals(t[r],e[r],r,r,t,e,a))return!1;return!0}function Jve(t,e){return O0(t.getTime(),e.getTime())}function Qve(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function e1e(t,e){return t===e}function vj(t,e,a){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var s=new Array(r),l=t.entries(),h,n,w=0;(h=l.next())&&!h.done;){for(var T=e.entries(),P=!1,z=0;(n=T.next())&&!n.done;){if(s[z]){z++;continue}var k=h.value,U=n.value;if(a.equals(k[0],U[0],w,z,t,e,a)&&a.equals(k[1],U[1],k[0],U[0],t,e,a)){P=s[z]=!0;break}z++}if(!P)return!1;w++}return!0}var t1e=O0;function a1e(t,e,a){var r=_j(t),s=r.length;if(_j(e).length!==s)return!1;for(;s-- >0;)if(!CX(t,e,a,r[s]))return!1;return!0}function Ew(t,e,a){var r=gj(t),s=r.length;if(gj(e).length!==s)return!1;for(var l,h,n;s-- >0;)if(l=r[s],!CX(t,e,a,l)||(h=Aj(t,l),n=Aj(e,l),(h||n)&&(!h||!n||h.configurable!==n.configurable||h.enumerable!==n.enumerable||h.writable!==n.writable)))return!1;return!0}function r1e(t,e){return O0(t.valueOf(),e.valueOf())}function n1e(t,e){return t.source===e.source&&t.flags===e.flags}function wj(t,e,a){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var s=new Array(r),l=t.values(),h,n;(h=l.next())&&!h.done;){for(var w=e.values(),T=!1,P=0;(n=w.next())&&!n.done;){if(!s[P]&&a.equals(h.value,n.value,h.value,n.value,t,e,a)){T=s[P]=!0;break}P++}if(!T)return!1}return!0}function i1e(t,e){var a=t.length;if(e.length!==a)return!1;for(;a-- >0;)if(t[a]!==e[a])return!1;return!0}function s1e(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function CX(t,e,a,r){return(r===Yve||r===Wve||r===Kve)&&(t.$$typeof||e.$$typeof)?!0:$ve(e,r)&&a.equals(t[r],e[r],r,r,t,e,a)}var o1e="[object Arguments]",l1e="[object Boolean]",u1e="[object Date]",c1e="[object Error]",d1e="[object Map]",h1e="[object Number]",f1e="[object Object]",p1e="[object RegExp]",m1e="[object Set]",y1e="[object String]",g1e="[object URL]",A1e=Array.isArray,Rj=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,Tj=Object.assign,_1e=Object.prototype.toString.call.bind(Object.prototype.toString);function v1e(t){var e=t.areArraysEqual,a=t.areDatesEqual,r=t.areErrorsEqual,s=t.areFunctionsEqual,l=t.areMapsEqual,h=t.areNumbersEqual,n=t.areObjectsEqual,w=t.arePrimitiveWrappersEqual,T=t.areRegExpsEqual,P=t.areSetsEqual,z=t.areTypedArraysEqual,k=t.areUrlsEqual;return function(Z,H,q){if(Z===H)return!0;if(Z==null||H==null)return!1;var J=typeof Z;if(J!==typeof H)return!1;if(J!=="object")return J==="number"?h(Z,H,q):J==="function"?s(Z,H,q):!1;var re=Z.constructor;if(re!==H.constructor)return!1;if(re===Object)return n(Z,H,q);if(A1e(Z))return e(Z,H,q);if(Rj!=null&&Rj(Z))return z(Z,H,q);if(re===Date)return a(Z,H,q);if(re===RegExp)return T(Z,H,q);if(re===Map)return l(Z,H,q);if(re===Set)return P(Z,H,q);var ce=_1e(Z);return ce===u1e?a(Z,H,q):ce===p1e?T(Z,H,q):ce===d1e?l(Z,H,q):ce===m1e?P(Z,H,q):ce===f1e?typeof Z.then!="function"&&typeof H.then!="function"&&n(Z,H,q):ce===g1e?k(Z,H,q):ce===c1e?r(Z,H,q):ce===o1e?n(Z,H,q):ce===l1e||ce===h1e||ce===y1e?w(Z,H,q):!1}}function w1e(t){var e=t.circular,a=t.createCustomConfig,r=t.strict,s={areArraysEqual:r?Ew:Xve,areDatesEqual:Jve,areErrorsEqual:Qve,areFunctionsEqual:e1e,areMapsEqual:r?yj(vj,Ew):vj,areNumbersEqual:t1e,areObjectsEqual:r?Ew:a1e,arePrimitiveWrappersEqual:r1e,areRegExpsEqual:n1e,areSetsEqual:r?yj(wj,Ew):wj,areTypedArraysEqual:r?Ew:i1e,areUrlsEqual:s1e};if(a&&(s=Tj({},s,a(s))),e){var l=xC(s.areArraysEqual),h=xC(s.areMapsEqual),n=xC(s.areObjectsEqual),w=xC(s.areSetsEqual);s=Tj({},s,{areArraysEqual:l,areMapsEqual:h,areObjectsEqual:n,areSetsEqual:w})}return s}function R1e(t){return function(e,a,r,s,l,h,n){return t(e,a,n)}}function T1e(t){var e=t.circular,a=t.comparator,r=t.createState,s=t.equals,l=t.strict;if(r)return function(w,T){var P=r(),z=P.cache,k=z===void 0?e?new WeakMap:void 0:z,U=P.meta;return a(w,T,{cache:k,equals:s,meta:U,strict:l})};if(e)return function(w,T){return a(w,T,{cache:new WeakMap,equals:s,meta:void 0,strict:l})};var h={cache:void 0,equals:s,meta:void 0,strict:l};return function(w,T){return a(w,T,h)}}var S1e=tA();tA({strict:!0});tA({circular:!0});tA({circular:!0,strict:!0});tA({createInternalComparator:function(){return O0}});tA({strict:!0,createInternalComparator:function(){return O0}});tA({circular:!0,createInternalComparator:function(){return O0}});tA({circular:!0,createInternalComparator:function(){return O0},strict:!0});function tA(t){t===void 0&&(t={});var e=t.circular,a=e===void 0?!1:e,r=t.createInternalComparator,s=t.createState,l=t.strict,h=l===void 0?!1:l,n=w1e(t),w=v1e(n),T=r?r(w):R1e(w);return T1e({circular:a,comparator:w,createState:s,equals:T,strict:h})}function C1e(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function Sj(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=-1,r=function s(l){a<0&&(a=l),l-a>e?(t(l),a=-1):C1e(s)};requestAnimationFrame(r)}function fM(t){"@babel/helpers - typeof";return fM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fM(t)}function b1e(t){return N1e(t)||E1e(t)||P1e(t)||x1e()}function x1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P1e(t,e){if(t){if(typeof t=="string")return Cj(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Cj(t,e)}}function Cj(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function E1e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function N1e(t){if(Array.isArray(t))return t}function V1e(){var t={},e=function(){return null},a=!1,r=function s(l){if(!a){if(Array.isArray(l)){if(!l.length)return;var h=l,n=b1e(h),w=n[0],T=n.slice(1);if(typeof w=="number"){Sj(s.bind(null,T),w);return}s(w),Sj(s.bind(null,T));return}fM(l)==="object"&&(t=l,e(t)),typeof l=="function"&&l()}};return{stop:function(){a=!0},start:function(l){a=!1,r(l)},subscribe:function(l){return e=l,function(){e=function(){return null}}}}}function JR(t){"@babel/helpers - typeof";return JR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},JR(t)}function bj(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function xj(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?bj(Object(a),!0).forEach(function(r){bX(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):bj(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function bX(t,e,a){return e=z1e(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function z1e(t){var e=O1e(t,"string");return JR(e)==="symbol"?e:String(e)}function O1e(t,e){if(JR(t)!=="object"||t===null)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(JR(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var D1e=function(e,a){return[Object.keys(e),Object.keys(a)].reduce(function(r,s){return r.filter(function(l){return s.includes(l)})})},M1e=function(e){return e},I1e=function(e){return e.replace(/([A-Z])/g,function(a){return"-".concat(a.toLowerCase())})},rR=function(e,a){return Object.keys(a).reduce(function(r,s){return xj(xj({},r),{},bX({},s,e(s,a[s])))},{})},Pj=function(e,a,r){return e.map(function(s){return"".concat(I1e(s)," ").concat(a,"ms ").concat(r)}).join(",")};function L1e(t,e){return k1e(t)||U1e(t,e)||xX(t,e)||F1e()}function F1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U1e(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,s,l,h,n=[],w=!0,T=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(w=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);w=!0);}catch(P){T=!0,s=P}finally{try{if(!w&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(T)throw s}}return n}}function k1e(t){if(Array.isArray(t))return t}function B1e(t){return Z1e(t)||j1e(t)||xX(t)||G1e()}function G1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xX(t,e){if(t){if(typeof t=="string")return pM(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return pM(t,e)}}function j1e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Z1e(t){if(Array.isArray(t))return pM(t)}function pM(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}var cx=1e-4,PX=function(e,a){return[0,3*e,3*a-6*e,3*e-3*a+1]},EX=function(e,a){return e.map(function(r,s){return r*Math.pow(a,s)}).reduce(function(r,s){return r+s})},Ej=function(e,a){return function(r){var s=PX(e,a);return EX(s,r)}},q1e=function(e,a){return function(r){var s=PX(e,a),l=[].concat(B1e(s.map(function(h,n){return h*n}).slice(1)),[0]);return EX(l,r)}},Nj=function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];var s=a[0],l=a[1],h=a[2],n=a[3];if(a.length===1)switch(a[0]){case"linear":s=0,l=0,h=1,n=1;break;case"ease":s=.25,l=.1,h=.25,n=1;break;case"ease-in":s=.42,l=0,h=1,n=1;break;case"ease-out":s=.42,l=0,h=.58,n=1;break;case"ease-in-out":s=0,l=0,h=.58,n=1;break;default:{var w=a[0].split("(");if(w[0]==="cubic-bezier"&&w[1].split(")")[0].split(",").length===4){var T=w[1].split(")")[0].split(",").map(function(q){return parseFloat(q)}),P=L1e(T,4);s=P[0],l=P[1],h=P[2],n=P[3]}}}var z=Ej(s,h),k=Ej(l,n),U=q1e(s,h),Z=function(J){return J>1?1:J<0?0:J},H=function(J){for(var re=J>1?1:J,ce=re,ye=0;ye<8;++ye){var he=z(ce)-re,_e=U(ce);if(Math.abs(he-re)<cx||_e<cx)return k(ce);ce=Z(ce-he/_e)}return k(ce)};return H.isStepper=!1,H},H1e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=e.stiff,r=a===void 0?100:a,s=e.damping,l=s===void 0?8:s,h=e.dt,n=h===void 0?17:h,w=function(P,z,k){var U=-(P-z)*r,Z=k*l,H=k+(U-Z)*n/1e3,q=k*n/1e3+P;return Math.abs(q-z)<cx&&Math.abs(H)<cx?[z,0]:[q,H]};return w.isStepper=!0,w.dt=n,w},$1e=function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];var s=a[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Nj(s);case"spring":return H1e();default:if(s.split("(")[0]==="cubic-bezier")return Nj(s)}return typeof s=="function"?s:null};function QR(t){"@babel/helpers - typeof";return QR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QR(t)}function Vj(t){return Y1e(t)||W1e(t)||NX(t)||K1e()}function K1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W1e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Y1e(t){if(Array.isArray(t))return yM(t)}function zj(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function xc(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?zj(Object(a),!0).forEach(function(r){mM(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):zj(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function mM(t,e,a){return e=X1e(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function X1e(t){var e=J1e(t,"string");return QR(e)==="symbol"?e:String(e)}function J1e(t,e){if(QR(t)!=="object"||t===null)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(QR(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Q1e(t,e){return awe(t)||twe(t,e)||NX(t,e)||ewe()}function ewe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NX(t,e){if(t){if(typeof t=="string")return yM(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return yM(t,e)}}function yM(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function twe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,s,l,h,n=[],w=!0,T=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(w=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);w=!0);}catch(P){T=!0,s=P}finally{try{if(!w&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(T)throw s}}return n}}function awe(t){if(Array.isArray(t))return t}var dx=function(e,a,r){return e+(a-e)*r},gM=function(e){var a=e.from,r=e.to;return a!==r},rwe=function t(e,a,r){var s=rR(function(l,h){if(gM(h)){var n=e(h.from,h.to,h.velocity),w=Q1e(n,2),T=w[0],P=w[1];return xc(xc({},h),{},{from:T,velocity:P})}return h},a);return r<1?rR(function(l,h){return gM(h)?xc(xc({},h),{},{velocity:dx(h.velocity,s[l].velocity,r),from:dx(h.from,s[l].from,r)}):h},a):t(e,s,r-1)};const nwe=function(t,e,a,r,s){var l=D1e(t,e),h=l.reduce(function(q,J){return xc(xc({},q),{},mM({},J,[t[J],e[J]]))},{}),n=l.reduce(function(q,J){return xc(xc({},q),{},mM({},J,{from:t[J],velocity:0,to:e[J]}))},{}),w=-1,T,P,z=function(){return null},k=function(){return rR(function(J,re){return re.from},n)},U=function(){return!Object.values(n).filter(gM).length},Z=function(J){T||(T=J);var re=J-T,ce=re/a.dt;n=rwe(a,n,ce),s(xc(xc(xc({},t),e),k())),T=J,U()||(w=requestAnimationFrame(z))},H=function(J){P||(P=J);var re=(J-P)/r,ce=rR(function(he,_e){return dx.apply(void 0,Vj(_e).concat([a(re)]))},h);if(s(xc(xc(xc({},t),e),ce)),re<1)w=requestAnimationFrame(z);else{var ye=rR(function(he,_e){return dx.apply(void 0,Vj(_e).concat([a(1)]))},h);s(xc(xc(xc({},t),e),ye))}};return z=a.isStepper?Z:H,function(){return requestAnimationFrame(z),function(){cancelAnimationFrame(w)}}};function Sv(t){"@babel/helpers - typeof";return Sv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sv(t)}var iwe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function swe(t,e){if(t==null)return{};var a=owe(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function owe(t,e){if(t==null)return{};var a={},r=Object.keys(t),s,l;for(l=0;l<r.length;l++)s=r[l],!(e.indexOf(s)>=0)&&(a[s]=t[s]);return a}function zO(t){return dwe(t)||cwe(t)||uwe(t)||lwe()}function lwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uwe(t,e){if(t){if(typeof t=="string")return AM(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return AM(t,e)}}function cwe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function dwe(t){if(Array.isArray(t))return AM(t)}function AM(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function Oj(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function Sp(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Oj(Object(a),!0).forEach(function(r){$w(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Oj(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function $w(t,e,a){return e=VX(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function hwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fwe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,VX(r.key),r)}}function pwe(t,e,a){return e&&fwe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function VX(t){var e=mwe(t,"string");return Sv(e)==="symbol"?e:String(e)}function mwe(t,e){if(Sv(t)!=="object"||t===null)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Sv(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ywe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_M(t,e)}function _M(t,e){return _M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},_M(t,e)}function gwe(t){var e=Awe();return function(){var r=hx(t),s;if(e){var l=hx(this).constructor;s=Reflect.construct(r,arguments,l)}else s=r.apply(this,arguments);return vM(this,s)}}function vM(t,e){if(e&&(Sv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wM(t)}function wM(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Awe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function hx(t){return hx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},hx(t)}var Kf=function(t){ywe(a,t);var e=gwe(a);function a(r,s){var l;hwe(this,a),l=e.call(this,r,s);var h=l.props,n=h.isActive,w=h.attributeName,T=h.from,P=h.to,z=h.steps,k=h.children,U=h.duration;if(l.handleStyleChange=l.handleStyleChange.bind(wM(l)),l.changeStyle=l.changeStyle.bind(wM(l)),!n||U<=0)return l.state={style:{}},typeof k=="function"&&(l.state={style:P}),vM(l);if(z&&z.length)l.state={style:z[0].style};else if(T){if(typeof k=="function")return l.state={style:T},vM(l);l.state={style:w?$w({},w,T):T}}else l.state={style:{}};return l}return pwe(a,[{key:"componentDidMount",value:function(){var s=this.props,l=s.isActive,h=s.canBegin;this.mounted=!0,!(!l||!h)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var l=this.props,h=l.isActive,n=l.canBegin,w=l.attributeName,T=l.shouldReAnimate,P=l.to,z=l.from,k=this.state.style;if(n){if(!h){var U={style:w?$w({},w,P):P};this.state&&k&&(w&&k[w]!==P||!w&&k!==P)&&this.setState(U);return}if(!(S1e(s.to,P)&&s.canBegin&&s.isActive)){var Z=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var H=Z||T?z:s.to;if(this.state&&k){var q={style:w?$w({},w,H):H};(w&&k[w]!==H||!w&&k!==H)&&this.setState(q)}this.runAnimation(Sp(Sp({},this.props),{},{from:H,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var l=this,h=s.from,n=s.to,w=s.duration,T=s.easing,P=s.begin,z=s.onAnimationEnd,k=s.onAnimationStart,U=nwe(h,n,$1e(T),w,this.changeStyle),Z=function(){l.stopJSAnimation=U()};this.manager.start([k,P,Z,w,z])}},{key:"runStepAnimation",value:function(s){var l=this,h=s.steps,n=s.begin,w=s.onAnimationStart,T=h[0],P=T.style,z=T.duration,k=z===void 0?0:z,U=function(H,q,J){if(J===0)return H;var re=q.duration,ce=q.easing,ye=ce===void 0?"ease":ce,he=q.style,_e=q.properties,me=q.onAnimationEnd,Re=J>0?h[J-1]:q,be=_e||Object.keys(he);if(typeof ye=="function"||ye==="spring")return[].concat(zO(H),[l.runJSAnimation.bind(l,{from:Re.style,to:he,duration:re,easing:ye}),re]);var De=Pj(be,re,ye),ie=Sp(Sp(Sp({},Re.style),he),{},{transition:De});return[].concat(zO(H),[ie,re,me]).filter(M1e)};return this.manager.start([w].concat(zO(h.reduce(U,[P,Math.max(k,n)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=V1e());var l=s.begin,h=s.duration,n=s.attributeName,w=s.to,T=s.easing,P=s.onAnimationStart,z=s.onAnimationEnd,k=s.steps,U=s.children,Z=this.manager;if(this.unSubscribe=Z.subscribe(this.handleStyleChange),typeof T=="function"||typeof U=="function"||T==="spring"){this.runJSAnimation(s);return}if(k.length>1){this.runStepAnimation(s);return}var H=n?$w({},n,w):w,q=Pj(Object.keys(H),h,T);Z.start([P,l,Sp(Sp({},H),{},{transition:q}),h,z])}},{key:"render",value:function(){var s=this.props,l=s.children;s.begin;var h=s.duration;s.attributeName,s.easing;var n=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var w=swe(s,iwe),T=nt.Children.count(l),P=this.state.style;if(typeof l=="function")return l(P);if(!n||T===0||h<=0)return l;var z=function(U){var Z=U.props,H=Z.style,q=H===void 0?{}:H,J=Z.className,re=nt.cloneElement(U,Sp(Sp({},w),{},{style:Sp(Sp({},q),P),className:J}));return re};return T===1?z(nt.Children.only(l)):Vt.createElement("div",null,nt.Children.map(l,function(k){return z(k)}))}}]),a}(nt.PureComponent);Kf.displayName="Animate";Kf.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Kf.propTypes={from:zs.oneOfType([zs.object,zs.string]),to:zs.oneOfType([zs.object,zs.string]),attributeName:zs.string,duration:zs.number,begin:zs.number,easing:zs.oneOfType([zs.string,zs.func]),steps:zs.arrayOf(zs.shape({duration:zs.number.isRequired,style:zs.object.isRequired,easing:zs.oneOfType([zs.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),zs.func]),properties:zs.arrayOf("string"),onAnimationEnd:zs.func})),children:zs.oneOfType([zs.node,zs.func]),isActive:zs.bool,canBegin:zs.bool,onAnimationEnd:zs.func,shouldReAnimate:zs.bool,onAnimationStart:zs.func,onAnimationReStart:zs.func};function eT(t){"@babel/helpers - typeof";return eT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eT(t)}function fx(){return fx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},fx.apply(this,arguments)}function _we(t,e){return Twe(t)||Rwe(t,e)||wwe(t,e)||vwe()}function vwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wwe(t,e){if(t){if(typeof t=="string")return Dj(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Dj(t,e)}}function Dj(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function Rwe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,s,l,h,n=[],w=!0,T=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(w=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);w=!0);}catch(P){T=!0,s=P}finally{try{if(!w&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(T)throw s}}return n}}function Twe(t){if(Array.isArray(t))return t}function Mj(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function Ij(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Mj(Object(a),!0).forEach(function(r){Swe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Mj(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Swe(t,e,a){return e=Cwe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Cwe(t){var e=bwe(t,"string");return eT(e)=="symbol"?e:e+""}function bwe(t,e){if(eT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(eT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Lj=function(e,a,r,s,l){var h=Math.min(Math.abs(r)/2,Math.abs(s)/2),n=s>=0?1:-1,w=r>=0?1:-1,T=s>=0&&r>=0||s<0&&r<0?1:0,P;if(h>0&&l instanceof Array){for(var z=[0,0,0,0],k=0,U=4;k<U;k++)z[k]=l[k]>h?h:l[k];P="M".concat(e,",").concat(a+n*z[0]),z[0]>0&&(P+="A ".concat(z[0],",").concat(z[0],",0,0,").concat(T,",").concat(e+w*z[0],",").concat(a)),P+="L ".concat(e+r-w*z[1],",").concat(a),z[1]>0&&(P+="A ".concat(z[1],",").concat(z[1],",0,0,").concat(T,`,
        `).concat(e+r,",").concat(a+n*z[1])),P+="L ".concat(e+r,",").concat(a+s-n*z[2]),z[2]>0&&(P+="A ".concat(z[2],",").concat(z[2],",0,0,").concat(T,`,
        `).concat(e+r-w*z[2],",").concat(a+s)),P+="L ".concat(e+w*z[3],",").concat(a+s),z[3]>0&&(P+="A ".concat(z[3],",").concat(z[3],",0,0,").concat(T,`,
        `).concat(e,",").concat(a+s-n*z[3])),P+="Z"}else if(h>0&&l===+l&&l>0){var Z=Math.min(h,l);P="M ".concat(e,",").concat(a+n*Z,`
            A `).concat(Z,",").concat(Z,",0,0,").concat(T,",").concat(e+w*Z,",").concat(a,`
            L `).concat(e+r-w*Z,",").concat(a,`
            A `).concat(Z,",").concat(Z,",0,0,").concat(T,",").concat(e+r,",").concat(a+n*Z,`
            L `).concat(e+r,",").concat(a+s-n*Z,`
            A `).concat(Z,",").concat(Z,",0,0,").concat(T,",").concat(e+r-w*Z,",").concat(a+s,`
            L `).concat(e+w*Z,",").concat(a+s,`
            A `).concat(Z,",").concat(Z,",0,0,").concat(T,",").concat(e,",").concat(a+s-n*Z," Z")}else P="M ".concat(e,",").concat(a," h ").concat(r," v ").concat(s," h ").concat(-r," Z");return P},xwe=function(e,a){if(!e||!a)return!1;var r=e.x,s=e.y,l=a.x,h=a.y,n=a.width,w=a.height;if(Math.abs(n)>0&&Math.abs(w)>0){var T=Math.min(l,l+n),P=Math.max(l,l+n),z=Math.min(h,h+w),k=Math.max(h,h+w);return r>=T&&r<=P&&s>=z&&s<=k}return!1},Pwe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},O4=function(e){var a=Ij(Ij({},Pwe),e),r=nt.useRef(),s=nt.useState(-1),l=_we(s,2),h=l[0],n=l[1];nt.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var ye=r.current.getTotalLength();ye&&n(ye)}catch{}},[]);var w=a.x,T=a.y,P=a.width,z=a.height,k=a.radius,U=a.className,Z=a.animationEasing,H=a.animationDuration,q=a.animationBegin,J=a.isAnimationActive,re=a.isUpdateAnimationActive;if(w!==+w||T!==+T||P!==+P||z!==+z||P===0||z===0)return null;var ce=ci("recharts-rectangle",U);return re?Vt.createElement(Kf,{canBegin:h>0,from:{width:P,height:z,x:w,y:T},to:{width:P,height:z,x:w,y:T},duration:H,animationEasing:Z,isActive:re},function(ye){var he=ye.width,_e=ye.height,me=ye.x,Re=ye.y;return Vt.createElement(Kf,{canBegin:h>0,from:"0px ".concat(h===-1?1:h,"px"),to:"".concat(h,"px 0px"),attributeName:"strokeDasharray",begin:q,duration:H,isActive:J,easing:Z},Vt.createElement("path",fx({},ln(a,!0),{className:ce,d:Lj(me,Re,he,_e,k),ref:r})))}):Vt.createElement("path",fx({},ln(a,!0),{className:ce,d:Lj(w,T,P,z,k)}))},Ewe=["points","className","baseLinePoints","connectNulls"];function U_(){return U_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},U_.apply(this,arguments)}function Nwe(t,e){if(t==null)return{};var a=Vwe(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Vwe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function Fj(t){return Mwe(t)||Dwe(t)||Owe(t)||zwe()}function zwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Owe(t,e){if(t){if(typeof t=="string")return RM(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return RM(t,e)}}function Dwe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Mwe(t){if(Array.isArray(t))return RM(t)}function RM(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}var Uj=function(e){return e&&e.x===+e.x&&e.y===+e.y},Iwe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=[[]];return e.forEach(function(r){Uj(r)?a[a.length-1].push(r):a[a.length-1].length>0&&a.push([])}),Uj(e[0])&&a[a.length-1].push(e[0]),a[a.length-1].length<=0&&(a=a.slice(0,-1)),a},nR=function(e,a){var r=Iwe(e);a&&(r=[r.reduce(function(l,h){return[].concat(Fj(l),Fj(h))},[])]);var s=r.map(function(l){return l.reduce(function(h,n,w){return"".concat(h).concat(w===0?"M":"L").concat(n.x,",").concat(n.y)},"")}).join("");return r.length===1?"".concat(s,"Z"):s},Lwe=function(e,a,r){var s=nR(e,r);return"".concat(s.slice(-1)==="Z"?s.slice(0,-1):s,"L").concat(nR(a.reverse(),r).slice(1))},Fwe=function(e){var a=e.points,r=e.className,s=e.baseLinePoints,l=e.connectNulls,h=Nwe(e,Ewe);if(!a||!a.length)return null;var n=ci("recharts-polygon",r);if(s&&s.length){var w=h.stroke&&h.stroke!=="none",T=Lwe(a,s,l);return Vt.createElement("g",{className:n},Vt.createElement("path",U_({},ln(h,!0),{fill:T.slice(-1)==="Z"?h.fill:"none",stroke:"none",d:T})),w?Vt.createElement("path",U_({},ln(h,!0),{fill:"none",d:nR(a,l)})):null,w?Vt.createElement("path",U_({},ln(h,!0),{fill:"none",d:nR(s,l)})):null)}var P=nR(a,l);return Vt.createElement("path",U_({},ln(h,!0),{fill:P.slice(-1)==="Z"?h.fill:"none",className:n,d:P}))};function TM(){return TM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},TM.apply(this,arguments)}var qT=function(e){var a=e.cx,r=e.cy,s=e.r,l=e.className,h=ci("recharts-dot",l);return a===+a&&r===+r&&s===+s?Vt.createElement("circle",TM({},ln(e,!1),Lb(e),{className:h,cx:a,cy:r,r:s})):null};function tT(t){"@babel/helpers - typeof";return tT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tT(t)}var Uwe=["x","y","top","left","width","height","className"];function SM(){return SM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},SM.apply(this,arguments)}function kj(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function kwe(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?kj(Object(a),!0).forEach(function(r){Bwe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):kj(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Bwe(t,e,a){return e=Gwe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Gwe(t){var e=jwe(t,"string");return tT(e)=="symbol"?e:e+""}function jwe(t,e){if(tT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(tT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zwe(t,e){if(t==null)return{};var a=qwe(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function qwe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}var Hwe=function(e,a,r,s,l,h){return"M".concat(e,",").concat(l,"v").concat(s,"M").concat(h,",").concat(a,"h").concat(r)},$we=function(e){var a=e.x,r=a===void 0?0:a,s=e.y,l=s===void 0?0:s,h=e.top,n=h===void 0?0:h,w=e.left,T=w===void 0?0:w,P=e.width,z=P===void 0?0:P,k=e.height,U=k===void 0?0:k,Z=e.className,H=Zwe(e,Uwe),q=kwe({x:r,y:l,top:n,left:T,width:z,height:U},H);return!yr(r)||!yr(l)||!yr(z)||!yr(U)||!yr(n)||!yr(T)?null:Vt.createElement("path",SM({},ln(q,!0),{className:ci("recharts-cross",Z),d:Hwe(r,l,z,U,n,T)}))},OO,Bj;function Kwe(){if(Bj)return OO;Bj=1;var t=W2(),e=HY(),a=Bm();function r(s,l){return s&&s.length?t(s,a(l,2),e):void 0}return OO=r,OO}var Wwe=Kwe();const Ywe=Ji(Wwe);var DO,Gj;function Xwe(){if(Gj)return DO;Gj=1;var t=W2(),e=Bm(),a=$Y();function r(s,l){return s&&s.length?t(s,e(l,2),a):void 0}return DO=r,DO}var Jwe=Xwe();const Qwe=Ji(Jwe);var eRe=["cx","cy","angle","ticks","axisLine"],tRe=["ticks","tick","angle","tickFormatter","stroke"];function Cv(t){"@babel/helpers - typeof";return Cv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cv(t)}function iR(){return iR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},iR.apply(this,arguments)}function jj(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function GA(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?jj(Object(a),!0).forEach(function(r){Q2(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):jj(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Zj(t,e){if(t==null)return{};var a=aRe(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function aRe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function rRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qj(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,OX(r.key),r)}}function nRe(t,e,a){return e&&qj(t.prototype,e),a&&qj(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function iRe(t,e,a){return e=px(e),sRe(t,zX()?Reflect.construct(e,a||[],px(t).constructor):e.apply(t,a))}function sRe(t,e){if(e&&(Cv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oRe(t)}function oRe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zX=function(){return!!t})()}function px(t){return px=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},px(t)}function lRe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CM(t,e)}function CM(t,e){return CM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},CM(t,e)}function Q2(t,e,a){return e=OX(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function OX(t){var e=uRe(t,"string");return Cv(e)=="symbol"?e:e+""}function uRe(t,e){if(Cv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Cv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var eP=function(t){function e(){return rRe(this,e),iRe(this,e,arguments)}return lRe(e,t),nRe(e,[{key:"getTickValueCoord",value:function(r){var s=r.coordinate,l=this.props,h=l.angle,n=l.cx,w=l.cy;return wo(n,w,s,h)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,s;switch(r){case"left":s="end";break;case"right":s="start";break;default:s="middle";break}return s}},{key:"getViewBox",value:function(){var r=this.props,s=r.cx,l=r.cy,h=r.angle,n=r.ticks,w=Ywe(n,function(P){return P.coordinate||0}),T=Qwe(n,function(P){return P.coordinate||0});return{cx:s,cy:l,startAngle:h,endAngle:h,innerRadius:T.coordinate||0,outerRadius:w.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.cx,l=r.cy,h=r.angle,n=r.ticks,w=r.axisLine,T=Zj(r,eRe),P=n.reduce(function(Z,H){return[Math.min(Z[0],H.coordinate),Math.max(Z[1],H.coordinate)]},[1/0,-1/0]),z=wo(s,l,P[0],h),k=wo(s,l,P[1],h),U=GA(GA(GA({},ln(T,!1)),{},{fill:"none"},ln(w,!1)),{},{x1:z.x,y1:z.y,x2:k.x,y2:k.y});return Vt.createElement("line",iR({className:"recharts-polar-radius-axis-line"},U))}},{key:"renderTicks",value:function(){var r=this,s=this.props,l=s.ticks,h=s.tick,n=s.angle,w=s.tickFormatter,T=s.stroke,P=Zj(s,tRe),z=this.getTickTextAnchor(),k=ln(P,!1),U=ln(h,!1),Z=l.map(function(H,q){var J=r.getTickValueCoord(H),re=GA(GA(GA(GA({textAnchor:z,transform:"rotate(".concat(90-n,", ").concat(J.x,", ").concat(J.y,")")},k),{},{stroke:"none",fill:T},U),{},{index:q},J),{},{payload:H});return Vt.createElement(fi,iR({className:ci("recharts-polar-radius-axis-tick",wX(h)),key:"tick-".concat(H.coordinate)},Bg(r.props,H,q)),e.renderTickItem(h,re,w?w(H.value,q):H.value))});return Vt.createElement(fi,{className:"recharts-polar-radius-axis-ticks"},Z)}},{key:"render",value:function(){var r=this.props,s=r.ticks,l=r.axisLine,h=r.tick;return!s||!s.length?null:Vt.createElement(fi,{className:ci("recharts-polar-radius-axis",this.props.className)},l&&this.renderAxisLine(),h&&this.renderTicks(),ac.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,s,l){var h;return Vt.isValidElement(r)?h=Vt.cloneElement(r,s):Fn(r)?h=r(s):h=Vt.createElement(_0,iR({},s,{className:"recharts-polar-radius-axis-tick-value"}),l),h}}])}(nt.PureComponent);Q2(eP,"displayName","PolarRadiusAxis");Q2(eP,"axisType","radiusAxis");Q2(eP,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function bv(t){"@babel/helpers - typeof";return bv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bv(t)}function KA(){return KA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},KA.apply(this,arguments)}function Hj(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function jA(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Hj(Object(a),!0).forEach(function(r){tP(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Hj(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function cRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $j(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,MX(r.key),r)}}function dRe(t,e,a){return e&&$j(t.prototype,e),a&&$j(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function hRe(t,e,a){return e=mx(e),fRe(t,DX()?Reflect.construct(e,a||[],mx(t).constructor):e.apply(t,a))}function fRe(t,e){if(e&&(bv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pRe(t)}function pRe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function DX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DX=function(){return!!t})()}function mx(t){return mx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},mx(t)}function mRe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bM(t,e)}function bM(t,e){return bM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},bM(t,e)}function tP(t,e,a){return e=MX(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function MX(t){var e=yRe(t,"string");return bv(e)=="symbol"?e:e+""}function yRe(t,e){if(bv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(bv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var gRe=Math.PI/180,ARe=1e-5,aP=function(t){function e(){return cRe(this,e),hRe(this,e,arguments)}return mRe(e,t),dRe(e,[{key:"getTickLineCoord",value:function(r){var s=this.props,l=s.cx,h=s.cy,n=s.radius,w=s.orientation,T=s.tickSize,P=T||8,z=wo(l,h,n,r.coordinate),k=wo(l,h,n+(w==="inner"?-1:1)*P,r.coordinate);return{x1:z.x,y1:z.y,x2:k.x,y2:k.y}}},{key:"getTickTextAnchor",value:function(r){var s=this.props.orientation,l=Math.cos(-r.coordinate*gRe),h;return l>ARe?h=s==="outer"?"start":"end":l<-1e-5?h=s==="outer"?"end":"start":h="middle",h}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.cx,l=r.cy,h=r.radius,n=r.axisLine,w=r.axisLineType,T=jA(jA({},ln(this.props,!1)),{},{fill:"none"},ln(n,!1));if(w==="circle")return Vt.createElement(qT,KA({className:"recharts-polar-angle-axis-line"},T,{cx:s,cy:l,r:h}));var P=this.props.ticks,z=P.map(function(k){return wo(s,l,h,k.coordinate)});return Vt.createElement(Fwe,KA({className:"recharts-polar-angle-axis-line"},T,{points:z}))}},{key:"renderTicks",value:function(){var r=this,s=this.props,l=s.ticks,h=s.tick,n=s.tickLine,w=s.tickFormatter,T=s.stroke,P=ln(this.props,!1),z=ln(h,!1),k=jA(jA({},P),{},{fill:"none"},ln(n,!1)),U=l.map(function(Z,H){var q=r.getTickLineCoord(Z),J=r.getTickTextAnchor(Z),re=jA(jA(jA({textAnchor:J},P),{},{stroke:"none",fill:T},z),{},{index:H,payload:Z,x:q.x2,y:q.y2});return Vt.createElement(fi,KA({className:ci("recharts-polar-angle-axis-tick",wX(h)),key:"tick-".concat(Z.coordinate)},Bg(r.props,Z,H)),n&&Vt.createElement("line",KA({className:"recharts-polar-angle-axis-tick-line"},k,q)),h&&e.renderTickItem(h,re,w?w(Z.value,H):Z.value))});return Vt.createElement(fi,{className:"recharts-polar-angle-axis-ticks"},U)}},{key:"render",value:function(){var r=this.props,s=r.ticks,l=r.radius,h=r.axisLine;return l<=0||!s||!s.length?null:Vt.createElement(fi,{className:ci("recharts-polar-angle-axis",this.props.className)},h&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,s,l){var h;return Vt.isValidElement(r)?h=Vt.cloneElement(r,s):Fn(r)?h=r(s):h=Vt.createElement(_0,KA({},s,{className:"recharts-polar-angle-axis-tick-value"}),l),h}}])}(nt.PureComponent);tP(aP,"displayName","PolarAngleAxis");tP(aP,"axisType","angleAxis");tP(aP,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var MO,Kj;function _Re(){if(Kj)return MO;Kj=1;var t=qW(),e=t(Object.getPrototypeOf,Object);return MO=e,MO}var IO,Wj;function vRe(){if(Wj)return IO;Wj=1;var t=zy(),e=_Re(),a=Oy(),r="[object Object]",s=Function.prototype,l=Object.prototype,h=s.toString,n=l.hasOwnProperty,w=h.call(Object);function T(P){if(!a(P)||t(P)!=r)return!1;var z=e(P);if(z===null)return!0;var k=n.call(z,"constructor")&&z.constructor;return typeof k=="function"&&k instanceof k&&h.call(k)==w}return IO=T,IO}var wRe=vRe();const RRe=Ji(wRe);var LO,Yj;function TRe(){if(Yj)return LO;Yj=1;var t=zy(),e=Oy(),a="[object Boolean]";function r(s){return s===!0||s===!1||e(s)&&t(s)==a}return LO=r,LO}var SRe=TRe();const CRe=Ji(SRe);function aT(t){"@babel/helpers - typeof";return aT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aT(t)}function yx(){return yx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},yx.apply(this,arguments)}function bRe(t,e){return NRe(t)||ERe(t,e)||PRe(t,e)||xRe()}function xRe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PRe(t,e){if(t){if(typeof t=="string")return Xj(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Xj(t,e)}}function Xj(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function ERe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,s,l,h,n=[],w=!0,T=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(w=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);w=!0);}catch(P){T=!0,s=P}finally{try{if(!w&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(T)throw s}}return n}}function NRe(t){if(Array.isArray(t))return t}function Jj(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function Qj(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Jj(Object(a),!0).forEach(function(r){VRe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Jj(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function VRe(t,e,a){return e=zRe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function zRe(t){var e=ORe(t,"string");return aT(e)=="symbol"?e:e+""}function ORe(t,e){if(aT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(aT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var e9=function(e,a,r,s,l){var h=r-s,n;return n="M ".concat(e,",").concat(a),n+="L ".concat(e+r,",").concat(a),n+="L ".concat(e+r-h/2,",").concat(a+l),n+="L ".concat(e+r-h/2-s,",").concat(a+l),n+="L ".concat(e,",").concat(a," Z"),n},DRe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},MRe=function(e){var a=Qj(Qj({},DRe),e),r=nt.useRef(),s=nt.useState(-1),l=bRe(s,2),h=l[0],n=l[1];nt.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var ce=r.current.getTotalLength();ce&&n(ce)}catch{}},[]);var w=a.x,T=a.y,P=a.upperWidth,z=a.lowerWidth,k=a.height,U=a.className,Z=a.animationEasing,H=a.animationDuration,q=a.animationBegin,J=a.isUpdateAnimationActive;if(w!==+w||T!==+T||P!==+P||z!==+z||k!==+k||P===0&&z===0||k===0)return null;var re=ci("recharts-trapezoid",U);return J?Vt.createElement(Kf,{canBegin:h>0,from:{upperWidth:0,lowerWidth:0,height:k,x:w,y:T},to:{upperWidth:P,lowerWidth:z,height:k,x:w,y:T},duration:H,animationEasing:Z,isActive:J},function(ce){var ye=ce.upperWidth,he=ce.lowerWidth,_e=ce.height,me=ce.x,Re=ce.y;return Vt.createElement(Kf,{canBegin:h>0,from:"0px ".concat(h===-1?1:h,"px"),to:"".concat(h,"px 0px"),attributeName:"strokeDasharray",begin:q,duration:H,easing:Z},Vt.createElement("path",yx({},ln(a,!0),{className:re,d:e9(me,Re,ye,he,_e),ref:r})))}):Vt.createElement("g",null,Vt.createElement("path",yx({},ln(a,!0),{className:re,d:e9(w,T,P,z,k)})))},IRe=["option","shapeType","propTransformer","activeClassName","isActive"];function rT(t){"@babel/helpers - typeof";return rT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rT(t)}function LRe(t,e){if(t==null)return{};var a=FRe(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function FRe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function t9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function gx(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?t9(Object(a),!0).forEach(function(r){URe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):t9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function URe(t,e,a){return e=kRe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function kRe(t){var e=BRe(t,"string");return rT(e)=="symbol"?e:e+""}function BRe(t,e){if(rT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(rT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function GRe(t,e){return gx(gx({},e),t)}function jRe(t,e){return t==="symbols"}function a9(t){var e=t.shapeType,a=t.elementProps;switch(e){case"rectangle":return Vt.createElement(O4,a);case"trapezoid":return Vt.createElement(MRe,a);case"sector":return Vt.createElement(SX,a);case"symbols":if(jRe(e))return Vt.createElement(U2,a);break;default:return null}}function ZRe(t){return nt.isValidElement(t)?t.props:t}function Ax(t){var e=t.option,a=t.shapeType,r=t.propTransformer,s=r===void 0?GRe:r,l=t.activeClassName,h=l===void 0?"recharts-active-shape":l,n=t.isActive,w=LRe(t,IRe),T;if(nt.isValidElement(e))T=nt.cloneElement(e,gx(gx({},w),ZRe(e)));else if(Fn(e))T=e(w);else if(RRe(e)&&!CRe(e)){var P=s(e,w);T=Vt.createElement(a9,{shapeType:a,elementProps:P})}else{var z=w;T=Vt.createElement(a9,{shapeType:a,elementProps:z})}return n?Vt.createElement(fi,{className:h},T):T}function rP(t,e){return e!=null&&"trapezoids"in t.props}function nP(t,e){return e!=null&&"sectors"in t.props}function nT(t,e){return e!=null&&"points"in t.props}function qRe(t,e){var a,r,s=t.x===(e==null||(a=e.labelViewBox)===null||a===void 0?void 0:a.x)||t.x===e.x,l=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return s&&l}function HRe(t,e){var a=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return a&&r}function $Re(t,e){var a=t.x===e.x,r=t.y===e.y,s=t.z===e.z;return a&&r&&s}function KRe(t,e){var a;return rP(t,e)?a=qRe:nP(t,e)?a=HRe:nT(t,e)&&(a=$Re),a}function WRe(t,e){var a;return rP(t,e)?a="trapezoids":nP(t,e)?a="sectors":nT(t,e)&&(a="points"),a}function YRe(t,e){if(rP(t,e)){var a;return(a=e.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}if(nP(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return nT(t,e)?e.payload:{}}function XRe(t){var e=t.activeTooltipItem,a=t.graphicalItem,r=t.itemData,s=WRe(a,e),l=YRe(a,e),h=r.filter(function(w,T){var P=Gg(l,w),z=a.props[s].filter(function(Z){var H=KRe(a,e);return H(Z,e)}),k=a.props[s].indexOf(z[z.length-1]),U=T===k;return P&&U}),n=r.indexOf(h[h.length-1]);return n}var XC;function xv(t){"@babel/helpers - typeof";return xv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xv(t)}function k_(){return k_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},k_.apply(this,arguments)}function r9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function _o(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?r9(Object(a),!0).forEach(function(r){jf(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):r9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function JRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n9(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,LX(r.key),r)}}function QRe(t,e,a){return e&&n9(t.prototype,e),a&&n9(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function eTe(t,e,a){return e=_x(e),tTe(t,IX()?Reflect.construct(e,a||[],_x(t).constructor):e.apply(t,a))}function tTe(t,e){if(e&&(xv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aTe(t)}function aTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function IX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IX=function(){return!!t})()}function _x(t){return _x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},_x(t)}function rTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xM(t,e)}function xM(t,e){return xM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},xM(t,e)}function jf(t,e,a){return e=LX(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function LX(t){var e=nTe(t,"string");return xv(e)=="symbol"?e:e+""}function nTe(t,e){if(xv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(xv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Iy=function(t){function e(a){var r;return JRe(this,e),r=eTe(this,e,[a]),jf(r,"pieRef",null),jf(r,"sectorRefs",[]),jf(r,"id",Jg("recharts-pie-")),jf(r,"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Fn(s)&&s()}),jf(r,"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Fn(s)&&s()}),r.state={isAnimationFinished:!a.isAnimationActive,prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,sectorToFocus:0},r}return rTe(e,t),QRe(e,[{key:"isActiveIndex",value:function(r){var s=this.props.activeIndex;return Array.isArray(s)?s.indexOf(r)!==-1:r===s}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var l=this.props,h=l.label,n=l.labelLine,w=l.dataKey,T=l.valueKey,P=ln(this.props,!1),z=ln(h,!1),k=ln(n,!1),U=h&&h.offsetRadius||20,Z=r.map(function(H,q){var J=(H.startAngle+H.endAngle)/2,re=wo(H.cx,H.cy,H.outerRadius+U,J),ce=_o(_o(_o(_o({},P),H),{},{stroke:"none"},z),{},{index:q,textAnchor:e.getTextAnchor(re.x,H.cx)},re),ye=_o(_o(_o(_o({},P),H),{},{fill:"none",stroke:H.fill},k),{},{index:q,points:[wo(H.cx,H.cy,H.outerRadius,J),re]}),he=w;return Un(w)&&Un(T)?he="value":Un(w)&&(he=T),Vt.createElement(fi,{key:"label-".concat(H.startAngle,"-").concat(H.endAngle,"-").concat(H.midAngle,"-").concat(q)},n&&e.renderLabelLineItem(n,ye,"line"),e.renderLabelItem(h,ce,No(H,he)))});return Vt.createElement(fi,{className:"recharts-pie-labels"},Z)}},{key:"renderSectorsStatically",value:function(r){var s=this,l=this.props,h=l.activeShape,n=l.blendStroke,w=l.inactiveShape;return r.map(function(T,P){if((T==null?void 0:T.startAngle)===0&&(T==null?void 0:T.endAngle)===0&&r.length!==1)return null;var z=s.isActiveIndex(P),k=w&&s.hasActiveIndex()?w:null,U=z?h:k,Z=_o(_o({},T),{},{stroke:n?T.fill:T.stroke,tabIndex:-1});return Vt.createElement(fi,k_({ref:function(q){q&&!s.sectorRefs.includes(q)&&s.sectorRefs.push(q)},tabIndex:-1,className:"recharts-pie-sector"},Bg(s.props,T,P),{key:"sector-".concat(T==null?void 0:T.startAngle,"-").concat(T==null?void 0:T.endAngle,"-").concat(T.midAngle,"-").concat(P)}),Vt.createElement(Ax,k_({option:U,isActive:z,shapeType:"sector"},Z)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,s=this.props,l=s.sectors,h=s.isAnimationActive,n=s.animationBegin,w=s.animationDuration,T=s.animationEasing,P=s.animationId,z=this.state,k=z.prevSectors,U=z.prevIsAnimationActive;return Vt.createElement(Kf,{begin:n,duration:w,isActive:h,easing:T,from:{t:0},to:{t:1},key:"pie-".concat(P,"-").concat(U),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(Z){var H=Z.t,q=[],J=l&&l[0],re=J.startAngle;return l.forEach(function(ce,ye){var he=k&&k[ye],_e=ye>0?hf(ce,"paddingAngle",0):0;if(he){var me=ul(he.endAngle-he.startAngle,ce.endAngle-ce.startAngle),Re=_o(_o({},ce),{},{startAngle:re+_e,endAngle:re+me(H)+_e});q.push(Re),re=Re.endAngle}else{var be=ce.endAngle,De=ce.startAngle,ie=ul(0,be-De),ge=ie(H),Me=_o(_o({},ce),{},{startAngle:re+_e,endAngle:re+ge+_e});q.push(Me),re=Me.endAngle}}),Vt.createElement(fi,null,r.renderSectorsStatically(q))})}},{key:"attachKeyboardHandlers",value:function(r){var s=this;r.onkeydown=function(l){if(!l.altKey)switch(l.key){case"ArrowLeft":{var h=++s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[h].focus(),s.setState({sectorToFocus:h});break}case"ArrowRight":{var n=--s.state.sectorToFocus<0?s.sectorRefs.length-1:s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[n].focus(),s.setState({sectorToFocus:n});break}case"Escape":{s.sectorRefs[s.state.sectorToFocus].blur(),s.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,s=r.sectors,l=r.isAnimationActive,h=this.state.prevSectors;return l&&s&&s.length&&(!h||!Gg(h,s))?this.renderSectorsWithAnimation():this.renderSectorsStatically(s)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,s=this.props,l=s.hide,h=s.sectors,n=s.className,w=s.label,T=s.cx,P=s.cy,z=s.innerRadius,k=s.outerRadius,U=s.isAnimationActive,Z=this.state.isAnimationFinished;if(l||!h||!h.length||!yr(T)||!yr(P)||!yr(z)||!yr(k))return null;var H=ci("recharts-pie",n);return Vt.createElement(fi,{tabIndex:this.props.rootTabIndex,className:H,ref:function(J){r.pieRef=J}},this.renderSectors(),w&&this.renderLabels(h),ac.renderCallByParent(this.props,null,!1),(!U||Z)&&Hf.renderCallByParent(this.props,h,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return s.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:s.curSectors,isAnimationFinished:!0}:r.sectors!==s.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,s){return r>s?"start":r<s?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,s,l){if(Vt.isValidElement(r))return Vt.cloneElement(r,s);if(Fn(r))return r(s);var h=ci("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return Vt.createElement(Lg,k_({},s,{key:l,type:"linear",className:h}))}},{key:"renderLabelItem",value:function(r,s,l){if(Vt.isValidElement(r))return Vt.cloneElement(r,s);var h=l;if(Fn(r)&&(h=r(s),Vt.isValidElement(h)))return h;var n=ci("recharts-pie-label-text",typeof r!="boolean"&&!Fn(r)?r.className:"");return Vt.createElement(_0,k_({},s,{alignmentBaseline:"middle",className:n}),h)}}])}(nt.PureComponent);XC=Iy;jf(Iy,"displayName","Pie");jf(Iy,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Dy.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});jf(Iy,"parseDeltaAngle",function(t,e){var a=Qd(e-t),r=Math.min(Math.abs(e-t),360);return a*r});jf(Iy,"getRealPieData",function(t){var e=t.data,a=t.children,r=ln(t,!1),s=nh(a,Av);return e&&e.length?e.map(function(l,h){return _o(_o(_o({payload:l},r),l),s&&s[h]&&s[h].props)}):s&&s.length?s.map(function(l){return _o(_o({},r),l.props)}):[]});jf(Iy,"parseCoordinateOfPie",function(t,e){var a=e.top,r=e.left,s=e.width,l=e.height,h=vX(s,l),n=r+eh(t.cx,s,s/2),w=a+eh(t.cy,l,l/2),T=eh(t.innerRadius,h,0),P=eh(t.outerRadius,h,h*.8),z=t.maxRadius||Math.sqrt(s*s+l*l)/2;return{cx:n,cy:w,innerRadius:T,outerRadius:P,maxRadius:z}});jf(Iy,"getComposedData",function(t){var e=t.item,a=t.offset,r=e.type.defaultProps!==void 0?_o(_o({},e.type.defaultProps),e.props):e.props,s=XC.getRealPieData(r);if(!s||!s.length)return null;var l=r.cornerRadius,h=r.startAngle,n=r.endAngle,w=r.paddingAngle,T=r.dataKey,P=r.nameKey,z=r.valueKey,k=r.tooltipType,U=Math.abs(r.minAngle),Z=XC.parseCoordinateOfPie(r,a),H=XC.parseDeltaAngle(h,n),q=Math.abs(H),J=T;Un(T)&&Un(z)?(Mp(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),J="value"):Un(T)&&(Mp(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),J=z);var re=s.filter(function(Re){return No(Re,J,0)!==0}).length,ce=(q>=360?re:re-1)*w,ye=q-re*U-ce,he=s.reduce(function(Re,be){var De=No(be,J,0);return Re+(yr(De)?De:0)},0),_e;if(he>0){var me;_e=s.map(function(Re,be){var De=No(Re,J,0),ie=No(Re,P,be),ge=(yr(De)?De:0)/he,Me;be?Me=me.endAngle+Qd(H)*w*(De!==0?1:0):Me=h;var ze=Me+Qd(H)*((De!==0?U:0)+ge*ye),Le=(Me+ze)/2,Ie=(Z.innerRadius+Z.outerRadius)/2,Ze=[{name:ie,value:De,payload:Re,dataKey:J,type:k}],ke=wo(Z.cx,Z.cy,Ie,Le);return me=_o(_o(_o({percent:ge,cornerRadius:l,name:ie,tooltipPayload:Ze,midAngle:Le,middleRadius:Ie,tooltipPosition:ke},Re),Z),{},{value:No(Re,J),startAngle:Me,endAngle:ze,payload:Re,paddingAngle:Qd(H)*w}),me})}return _o(_o({},Z),{},{sectors:_e,data:s})});var FO,i9;function iTe(){if(i9)return FO;i9=1;var t=Math.ceil,e=Math.max;function a(r,s,l,h){for(var n=-1,w=e(t((s-r)/(l||1)),0),T=Array(w);w--;)T[h?w:++n]=r,r+=l;return T}return FO=a,FO}var UO,s9;function FX(){if(s9)return UO;s9=1;var t=oY(),e=1/0,a=17976931348623157e292;function r(s){if(!s)return s===0?s:0;if(s=t(s),s===e||s===-1/0){var l=s<0?-1:1;return l*a}return s===s?s:0}return UO=r,UO}var kO,o9;function sTe(){if(o9)return kO;o9=1;var t=iTe(),e=G2(),a=FX();function r(s){return function(l,h,n){return n&&typeof n!="number"&&e(l,h,n)&&(h=n=void 0),l=a(l),h===void 0?(h=l,l=0):h=a(h),n=n===void 0?l<h?1:-1:a(n),t(l,h,n,s)}}return kO=r,kO}var BO,l9;function oTe(){if(l9)return BO;l9=1;var t=sTe(),e=t();return BO=e,BO}var lTe=oTe();const vx=Ji(lTe);function iT(t){"@babel/helpers - typeof";return iT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iT(t)}function u9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function c9(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?u9(Object(a),!0).forEach(function(r){UX(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function UX(t,e,a){return e=uTe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function uTe(t){var e=cTe(t,"string");return iT(e)=="symbol"?e:e+""}function cTe(t,e){if(iT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(iT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dTe=["Webkit","Moz","O","ms"],hTe=function(e,a){var r=e.replace(/(\w)/,function(l){return l.toUpperCase()}),s=dTe.reduce(function(l,h){return c9(c9({},l),{},UX({},h+r,a))},{});return s[e]=a,s};function Pv(t){"@babel/helpers - typeof";return Pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pv(t)}function wx(){return wx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},wx.apply(this,arguments)}function d9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function GO(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?d9(Object(a),!0).forEach(function(r){af(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function fTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h9(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,BX(r.key),r)}}function pTe(t,e,a){return e&&h9(t.prototype,e),a&&h9(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function mTe(t,e,a){return e=Rx(e),yTe(t,kX()?Reflect.construct(e,a||[],Rx(t).constructor):e.apply(t,a))}function yTe(t,e){if(e&&(Pv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gTe(t)}function gTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kX=function(){return!!t})()}function Rx(t){return Rx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Rx(t)}function ATe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PM(t,e)}function PM(t,e){return PM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},PM(t,e)}function af(t,e,a){return e=BX(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function BX(t){var e=_Te(t,"string");return Pv(e)=="symbol"?e:e+""}function _Te(t,e){if(Pv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Pv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var vTe=function(e){var a=e.data,r=e.startIndex,s=e.endIndex,l=e.x,h=e.width,n=e.travellerWidth;if(!a||!a.length)return{};var w=a.length,T=tR().domain(vx(0,w)).range([l,l+h-n]),P=T.domain().map(function(z){return T(z)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:T(r),endX:T(s),scale:T,scaleValues:P}},f9=function(e){return e.changedTouches&&!!e.changedTouches.length},Ev=function(t){function e(a){var r;return fTe(this,e),r=mTe(this,e,[a]),af(r,"handleDrag",function(s){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(s):r.state.isSlideMoving&&r.handleSlideDrag(s)}),af(r,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&r.handleDrag(s.changedTouches[0])}),af(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=r.props,l=s.endIndex,h=s.onDragEnd,n=s.startIndex;h==null||h({endIndex:l,startIndex:n})}),r.detachDragEndListener()}),af(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),af(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),af(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),af(r,"handleSlideDragStart",function(s){var l=f9(s)?s.changedTouches[0]:s;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:l.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return ATe(e,t),pTe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var s=r.startX,l=r.endX,h=this.state.scaleValues,n=this.props,w=n.gap,T=n.data,P=T.length-1,z=Math.min(s,l),k=Math.max(s,l),U=e.getIndexInRange(h,z),Z=e.getIndexInRange(h,k);return{startIndex:U-U%w,endIndex:Z===P?P:Z-Z%w}}},{key:"getTextOfTick",value:function(r){var s=this.props,l=s.data,h=s.tickFormatter,n=s.dataKey,w=No(l[r],n,r);return Fn(h)?h(w,r):w}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var s=this.state,l=s.slideMoveStartX,h=s.startX,n=s.endX,w=this.props,T=w.x,P=w.width,z=w.travellerWidth,k=w.startIndex,U=w.endIndex,Z=w.onChange,H=r.pageX-l;H>0?H=Math.min(H,T+P-z-n,T+P-z-h):H<0&&(H=Math.max(H,T-h,T-n));var q=this.getIndex({startX:h+H,endX:n+H});(q.startIndex!==k||q.endIndex!==U)&&Z&&Z(q),this.setState({startX:h+H,endX:n+H,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,s){var l=f9(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:l.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var s=this.state,l=s.brushMoveStartX,h=s.movingTravellerId,n=s.endX,w=s.startX,T=this.state[h],P=this.props,z=P.x,k=P.width,U=P.travellerWidth,Z=P.onChange,H=P.gap,q=P.data,J={startX:this.state.startX,endX:this.state.endX},re=r.pageX-l;re>0?re=Math.min(re,z+k-U-T):re<0&&(re=Math.max(re,z-T)),J[h]=T+re;var ce=this.getIndex(J),ye=ce.startIndex,he=ce.endIndex,_e=function(){var Re=q.length-1;return h==="startX"&&(n>w?ye%H===0:he%H===0)||n<w&&he===Re||h==="endX"&&(n>w?he%H===0:ye%H===0)||n>w&&he===Re};this.setState(af(af({},h,T+re),"brushMoveStartX",r.pageX),function(){Z&&_e()&&Z(ce)})}},{key:"handleTravellerMoveKeyboard",value:function(r,s){var l=this,h=this.state,n=h.scaleValues,w=h.startX,T=h.endX,P=this.state[s],z=n.indexOf(P);if(z!==-1){var k=z+r;if(!(k===-1||k>=n.length)){var U=n[k];s==="startX"&&U>=T||s==="endX"&&U<=w||this.setState(af({},s,U),function(){l.props.onChange(l.getIndex({startX:l.state.startX,endX:l.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,s=r.x,l=r.y,h=r.width,n=r.height,w=r.fill,T=r.stroke;return Vt.createElement("rect",{stroke:T,fill:w,x:s,y:l,width:h,height:n})}},{key:"renderPanorama",value:function(){var r=this.props,s=r.x,l=r.y,h=r.width,n=r.height,w=r.data,T=r.children,P=r.padding,z=nt.Children.only(T);return z?Vt.cloneElement(z,{x:s,y:l,width:h,height:n,margin:P,compact:!0,data:w}):null}},{key:"renderTravellerLayer",value:function(r,s){var l,h,n=this,w=this.props,T=w.y,P=w.travellerWidth,z=w.height,k=w.traveller,U=w.ariaLabel,Z=w.data,H=w.startIndex,q=w.endIndex,J=Math.max(r,this.props.x),re=GO(GO({},ln(this.props,!1)),{},{x:J,y:T,width:P,height:z}),ce=U||"Min value: ".concat((l=Z[H])===null||l===void 0?void 0:l.name,", Max value: ").concat((h=Z[q])===null||h===void 0?void 0:h.name);return Vt.createElement(fi,{tabIndex:0,role:"slider","aria-label":ce,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(he){["ArrowLeft","ArrowRight"].includes(he.key)&&(he.preventDefault(),he.stopPropagation(),n.handleTravellerMoveKeyboard(he.key==="ArrowRight"?1:-1,s))},onFocus:function(){n.setState({isTravellerFocused:!0})},onBlur:function(){n.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(k,re))}},{key:"renderSlide",value:function(r,s){var l=this.props,h=l.y,n=l.height,w=l.stroke,T=l.travellerWidth,P=Math.min(r,s)+T,z=Math.max(Math.abs(s-r)-T,0);return Vt.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:w,fillOpacity:.2,x:P,y:h,width:z,height:n})}},{key:"renderText",value:function(){var r=this.props,s=r.startIndex,l=r.endIndex,h=r.y,n=r.height,w=r.travellerWidth,T=r.stroke,P=this.state,z=P.startX,k=P.endX,U=5,Z={pointerEvents:"none",fill:T};return Vt.createElement(fi,{className:"recharts-brush-texts"},Vt.createElement(_0,wx({textAnchor:"end",verticalAnchor:"middle",x:Math.min(z,k)-U,y:h+n/2},Z),this.getTextOfTick(s)),Vt.createElement(_0,wx({textAnchor:"start",verticalAnchor:"middle",x:Math.max(z,k)+w+U,y:h+n/2},Z),this.getTextOfTick(l)))}},{key:"render",value:function(){var r=this.props,s=r.data,l=r.className,h=r.children,n=r.x,w=r.y,T=r.width,P=r.height,z=r.alwaysShowText,k=this.state,U=k.startX,Z=k.endX,H=k.isTextActive,q=k.isSlideMoving,J=k.isTravellerMoving,re=k.isTravellerFocused;if(!s||!s.length||!yr(n)||!yr(w)||!yr(T)||!yr(P)||T<=0||P<=0)return null;var ce=ci("recharts-brush",l),ye=Vt.Children.count(h)===1,he=hTe("userSelect","none");return Vt.createElement(fi,{className:ce,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:he},this.renderBackground(),ye&&this.renderPanorama(),this.renderSlide(U,Z),this.renderTravellerLayer(U,"startX"),this.renderTravellerLayer(Z,"endX"),(H||q||J||re||z)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var s=r.x,l=r.y,h=r.width,n=r.height,w=r.stroke,T=Math.floor(l+n/2)-1;return Vt.createElement(Vt.Fragment,null,Vt.createElement("rect",{x:s,y:l,width:h,height:n,fill:w,stroke:"none"}),Vt.createElement("line",{x1:s+1,y1:T,x2:s+h-1,y2:T,fill:"none",stroke:"#fff"}),Vt.createElement("line",{x1:s+1,y1:T+2,x2:s+h-1,y2:T+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,s){var l;return Vt.isValidElement(r)?l=Vt.cloneElement(r,s):Fn(r)?l=r(s):l=e.renderDefaultTraveller(s),l}},{key:"getDerivedStateFromProps",value:function(r,s){var l=r.data,h=r.width,n=r.x,w=r.travellerWidth,T=r.updateId,P=r.startIndex,z=r.endIndex;if(l!==s.prevData||T!==s.prevUpdateId)return GO({prevData:l,prevTravellerWidth:w,prevUpdateId:T,prevX:n,prevWidth:h},l&&l.length?vTe({data:l,width:h,x:n,travellerWidth:w,startIndex:P,endIndex:z}):{scale:null,scaleValues:null});if(s.scale&&(h!==s.prevWidth||n!==s.prevX||w!==s.prevTravellerWidth)){s.scale.range([n,n+h-w]);var k=s.scale.domain().map(function(U){return s.scale(U)});return{prevData:l,prevTravellerWidth:w,prevUpdateId:T,prevX:n,prevWidth:h,startX:s.scale(r.startIndex),endX:s.scale(r.endIndex),scaleValues:k}}return null}},{key:"getIndexInRange",value:function(r,s){for(var l=r.length,h=0,n=l-1;n-h>1;){var w=Math.floor((h+n)/2);r[w]>s?n=w:h=w}return s>=r[n]?n:h}}])}(nt.PureComponent);af(Ev,"displayName","Brush");af(Ev,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var jO,p9;function wTe(){if(p9)return jO;p9=1;var t=i4();function e(a,r){var s;return t(a,function(l,h,n){return s=r(l,h,n),!s}),!!s}return jO=e,jO}var ZO,m9;function RTe(){if(m9)return ZO;m9=1;var t=FW(),e=Bm(),a=wTe(),r=zh(),s=G2();function l(h,n,w){var T=r(h)?t:a;return w&&s(h,n,w)&&(n=void 0),T(h,e(n,3))}return ZO=l,ZO}var TTe=RTe();const STe=Ji(TTe);var Om=function(e,a){var r=e.alwaysShow,s=e.ifOverflow;return r&&(s="extendDomain"),s===a},qO,y9;function CTe(){if(y9)return qO;y9=1;var t=aY();function e(a,r,s){r=="__proto__"&&t?t(a,r,{configurable:!0,enumerable:!0,value:s,writable:!0}):a[r]=s}return qO=e,qO}var HO,g9;function bTe(){if(g9)return HO;g9=1;var t=CTe(),e=eY(),a=Bm();function r(s,l){var h={};return l=a(l,3),e(s,function(n,w,T){t(h,w,l(n,w,T))}),h}return HO=r,HO}var xTe=bTe();const PTe=Ji(xTe);var $O,A9;function ETe(){if(A9)return $O;A9=1;function t(e,a){for(var r=-1,s=e==null?0:e.length;++r<s;)if(!a(e[r],r,e))return!1;return!0}return $O=t,$O}var KO,_9;function NTe(){if(_9)return KO;_9=1;var t=i4();function e(a,r){var s=!0;return t(a,function(l,h,n){return s=!!r(l,h,n),s}),s}return KO=e,KO}var WO,v9;function VTe(){if(v9)return WO;v9=1;var t=ETe(),e=NTe(),a=Bm(),r=zh(),s=G2();function l(h,n,w){var T=r(h)?t:e;return w&&s(h,n,w)&&(n=void 0),T(h,a(n,3))}return WO=l,WO}var zTe=VTe();const GX=Ji(zTe);var OTe=["x","y"];function sT(t){"@babel/helpers - typeof";return sT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sT(t)}function EM(){return EM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},EM.apply(this,arguments)}function w9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function Nw(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?w9(Object(a),!0).forEach(function(r){DTe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):w9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function DTe(t,e,a){return e=MTe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function MTe(t){var e=ITe(t,"string");return sT(e)=="symbol"?e:e+""}function ITe(t,e){if(sT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(sT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function LTe(t,e){if(t==null)return{};var a=FTe(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function FTe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function UTe(t,e){var a=t.x,r=t.y,s=LTe(t,OTe),l="".concat(a),h=parseInt(l,10),n="".concat(r),w=parseInt(n,10),T="".concat(e.height||s.height),P=parseInt(T,10),z="".concat(e.width||s.width),k=parseInt(z,10);return Nw(Nw(Nw(Nw(Nw({},e),s),h?{x:h}:{}),w?{y:w}:{}),{},{height:P,width:k,name:e.name,radius:e.radius})}function R9(t){return Vt.createElement(Ax,EM({shapeType:"rectangle",propTransformer:UTe,activeClassName:"recharts-active-bar"},t))}var kTe=function(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,s){if(typeof e=="number")return e;var l=typeof r=="number";return l?e(r,s):(l||w0(),a)}},BTe=["value","background"],jX;function Nv(t){"@babel/helpers - typeof";return Nv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nv(t)}function GTe(t,e){if(t==null)return{};var a=jTe(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function jTe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function Tx(){return Tx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Tx.apply(this,arguments)}function T9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function lu(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?T9(Object(a),!0).forEach(function(r){Ng(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):T9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function ZTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S9(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qX(r.key),r)}}function qTe(t,e,a){return e&&S9(t.prototype,e),a&&S9(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function HTe(t,e,a){return e=Sx(e),$Te(t,ZX()?Reflect.construct(e,a||[],Sx(t).constructor):e.apply(t,a))}function $Te(t,e){if(e&&(Nv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KTe(t)}function KTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZX=function(){return!!t})()}function Sx(t){return Sx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Sx(t)}function WTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&NM(t,e)}function NM(t,e){return NM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},NM(t,e)}function Ng(t,e,a){return e=qX(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function qX(t){var e=YTe(t,"string");return Nv(e)=="symbol"?e:e+""}function YTe(t,e){if(Nv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Nv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var kp=function(t){function e(){var a;ZTe(this,e);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return a=HTe(this,e,[].concat(s)),Ng(a,"state",{isAnimationFinished:!1}),Ng(a,"id",Jg("recharts-bar-")),Ng(a,"handleAnimationEnd",function(){var h=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),h&&h()}),Ng(a,"handleAnimationStart",function(){var h=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),h&&h()}),a}return WTe(e,t),qTe(e,[{key:"renderRectanglesStatically",value:function(r){var s=this,l=this.props,h=l.shape,n=l.dataKey,w=l.activeIndex,T=l.activeBar,P=ln(this.props,!1);return r&&r.map(function(z,k){var U=k===w,Z=U?T:h,H=lu(lu(lu({},P),z),{},{isActive:U,option:Z,index:k,dataKey:n,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return Vt.createElement(fi,Tx({className:"recharts-bar-rectangle"},Bg(s.props,z,k),{key:"rectangle-".concat(z==null?void 0:z.x,"-").concat(z==null?void 0:z.y,"-").concat(z==null?void 0:z.value)}),Vt.createElement(R9,H))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,s=this.props,l=s.data,h=s.layout,n=s.isAnimationActive,w=s.animationBegin,T=s.animationDuration,P=s.animationEasing,z=s.animationId,k=this.state.prevData;return Vt.createElement(Kf,{begin:w,duration:T,isActive:n,easing:P,from:{t:0},to:{t:1},key:"bar-".concat(z),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(U){var Z=U.t,H=l.map(function(q,J){var re=k&&k[J];if(re){var ce=ul(re.x,q.x),ye=ul(re.y,q.y),he=ul(re.width,q.width),_e=ul(re.height,q.height);return lu(lu({},q),{},{x:ce(Z),y:ye(Z),width:he(Z),height:_e(Z)})}if(h==="horizontal"){var me=ul(0,q.height),Re=me(Z);return lu(lu({},q),{},{y:q.y+q.height-Re,height:Re})}var be=ul(0,q.width),De=be(Z);return lu(lu({},q),{},{width:De})});return Vt.createElement(fi,null,r.renderRectanglesStatically(H))})}},{key:"renderRectangles",value:function(){var r=this.props,s=r.data,l=r.isAnimationActive,h=this.state.prevData;return l&&s&&s.length&&(!h||!Gg(h,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var r=this,s=this.props,l=s.data,h=s.dataKey,n=s.activeIndex,w=ln(this.props.background,!1);return l.map(function(T,P){T.value;var z=T.background,k=GTe(T,BTe);if(!z)return null;var U=lu(lu(lu(lu(lu({},k),{},{fill:"#eee"},z),w),Bg(r.props,T,P)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:h,index:P,className:"recharts-bar-background-rectangle"});return Vt.createElement(R9,Tx({key:"background-bar-".concat(P),option:r.props.background,isActive:P===n},U))})}},{key:"renderErrorBar",value:function(r,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var l=this.props,h=l.data,n=l.xAxis,w=l.yAxis,T=l.layout,P=l.children,z=nh(P,l1);if(!z)return null;var k=T==="vertical"?h[0].height/2:h[0].width/2,U=function(q,J){var re=Array.isArray(q.value)?q.value[1]:q.value;return{x:q.x,y:q.y,value:re,errorVal:No(q,J)}},Z={clipPath:r?"url(#clipPath-".concat(s,")"):null};return Vt.createElement(fi,Z,z.map(function(H){return Vt.cloneElement(H,{key:"error-bar-".concat(s,"-").concat(H.props.dataKey),data:h,xAxis:n,yAxis:w,layout:T,offset:k,dataPointFormatter:U})}))}},{key:"render",value:function(){var r=this.props,s=r.hide,l=r.data,h=r.className,n=r.xAxis,w=r.yAxis,T=r.left,P=r.top,z=r.width,k=r.height,U=r.isAnimationActive,Z=r.background,H=r.id;if(s||!l||!l.length)return null;var q=this.state.isAnimationFinished,J=ci("recharts-bar",h),re=n&&n.allowDataOverflow,ce=w&&w.allowDataOverflow,ye=re||ce,he=Un(H)?this.id:H;return Vt.createElement(fi,{className:J},re||ce?Vt.createElement("defs",null,Vt.createElement("clipPath",{id:"clipPath-".concat(he)},Vt.createElement("rect",{x:re?T:T-z/2,y:ce?P:P-k/2,width:re?z:z*2,height:ce?k:k*2}))):null,Vt.createElement(fi,{className:"recharts-bar-rectangles",clipPath:ye?"url(#clipPath-".concat(he,")"):null},Z?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(ye,he),(!U||q)&&Hf.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:s.curData}:r.data!==s.curData?{curData:r.data}:null}}])}(nt.PureComponent);jX=kp;Ng(kp,"displayName","Bar");Ng(kp,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Dy.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Ng(kp,"getComposedData",function(t){var e=t.props,a=t.item,r=t.barPosition,s=t.bandSize,l=t.xAxis,h=t.yAxis,n=t.xAxisTicks,w=t.yAxisTicks,T=t.stackedData,P=t.dataStartIndex,z=t.displayedData,k=t.offset,U=S_e(r,a);if(!U)return null;var Z=e.layout,H=a.type.defaultProps,q=H!==void 0?lu(lu({},H),a.props):a.props,J=q.dataKey,re=q.children,ce=q.minPointSize,ye=Z==="horizontal"?h:l,he=T?ye.scale.domain():null,_e=V_e({numericAxis:ye}),me=nh(re,Av),Re=z.map(function(be,De){var ie,ge,Me,ze,Le,Ie;T?ie=C_e(T[P+De],he):(ie=No(be,J),Array.isArray(ie)||(ie=[_e,ie]));var Ze=kTe(ce,jX.defaultProps.minPointSize)(ie[1],De);if(Z==="horizontal"){var ke,tt=[h.scale(ie[0]),h.scale(ie[1])],Ue=tt[0],He=tt[1];ge=Y7({axis:l,ticks:n,bandSize:s,offset:U.offset,entry:be,index:De}),Me=(ke=He??Ue)!==null&&ke!==void 0?ke:void 0,ze=U.size;var Ce=Ue-He;if(Le=Number.isNaN(Ce)?0:Ce,Ie={x:ge,y:h.y,width:ze,height:h.height},Math.abs(Ze)>0&&Math.abs(Le)<Math.abs(Ze)){var Se=Qd(Le||Ze)*(Math.abs(Ze)-Math.abs(Le));Me-=Se,Le+=Se}}else{var $e=[l.scale(ie[0]),l.scale(ie[1])],ht=$e[0],ft=$e[1];if(ge=ht,Me=Y7({axis:h,ticks:w,bandSize:s,offset:U.offset,entry:be,index:De}),ze=ft-ht,Le=U.size,Ie={x:l.x,y:Me,width:l.width,height:Le},Math.abs(Ze)>0&&Math.abs(ze)<Math.abs(Ze)){var ut=Qd(ze||Ze)*(Math.abs(Ze)-Math.abs(ze));ze+=ut}}return lu(lu(lu({},be),{},{x:ge,y:Me,width:ze,height:Le,value:T?ie:ie[1],payload:be,background:Ie},me&&me[De]&&me[De].props),{},{tooltipPayload:[AX(a,be)],tooltipPosition:{x:ge+ze/2,y:Me+Le/2}})});return lu({data:Re,layout:Z},k)});function oT(t){"@babel/helpers - typeof";return oT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oT(t)}function XTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C9(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,HX(r.key),r)}}function JTe(t,e,a){return e&&C9(t.prototype,e),a&&C9(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function b9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function Np(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?b9(Object(a),!0).forEach(function(r){iP(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):b9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function iP(t,e,a){return e=HX(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function HX(t){var e=QTe(t,"string");return oT(e)=="symbol"?e:e+""}function QTe(t,e){if(oT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(oT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sP=function(e,a,r,s,l){var h=e.width,n=e.height,w=e.layout,T=e.children,P=Object.keys(a),z={left:r.left,leftMirror:r.left,right:h-r.right,rightMirror:h-r.right,top:r.top,topMirror:r.top,bottom:n-r.bottom,bottomMirror:n-r.bottom},k=!!rf(T,kp);return P.reduce(function(U,Z){var H=a[Z],q=H.orientation,J=H.domain,re=H.padding,ce=re===void 0?{}:re,ye=H.mirror,he=H.reversed,_e="".concat(q).concat(ye?"Mirror":""),me,Re,be,De,ie;if(H.type==="number"&&(H.padding==="gap"||H.padding==="no-gap")){var ge=J[1]-J[0],Me=1/0,ze=H.categoricalDomain.sort();if(ze.forEach(function($e,ht){ht>0&&(Me=Math.min(($e||0)-(ze[ht-1]||0),Me))}),Number.isFinite(Me)){var Le=Me/ge,Ie=H.layout==="vertical"?r.height:r.width;if(H.padding==="gap"&&(me=Le*Ie/2),H.padding==="no-gap"){var Ze=eh(e.barCategoryGap,Le*Ie),ke=Le*Ie/2;me=ke-Ze-(ke-Ze)/Ie*Ze}}}s==="xAxis"?Re=[r.left+(ce.left||0)+(me||0),r.left+r.width-(ce.right||0)-(me||0)]:s==="yAxis"?Re=w==="horizontal"?[r.top+r.height-(ce.bottom||0),r.top+(ce.top||0)]:[r.top+(ce.top||0)+(me||0),r.top+r.height-(ce.bottom||0)-(me||0)]:Re=H.range,he&&(Re=[Re[1],Re[0]]);var tt=pX(H,l,k),Ue=tt.scale,He=tt.realScaleType;Ue.domain(J).range(Re),mX(Ue);var Ce=yX(Ue,Np(Np({},H),{},{realScaleType:He}));s==="xAxis"?(ie=q==="top"&&!ye||q==="bottom"&&ye,be=r.left,De=z[_e]-ie*H.height):s==="yAxis"&&(ie=q==="left"&&!ye||q==="right"&&ye,be=z[_e]-ie*H.width,De=r.top);var Se=Np(Np(Np({},H),Ce),{},{realScaleType:He,x:be,y:De,scale:Ue,width:s==="xAxis"?r.width:H.width,height:s==="yAxis"?r.height:H.height});return Se.bandSize=ox(Se,Ce),!H.hide&&s==="xAxis"?z[_e]+=(ie?-1:1)*Se.height:H.hide||(z[_e]+=(ie?-1:1)*Se.width),Np(Np({},U),{},iP({},Z,Se))},{})},$X=function(e,a){var r=e.x,s=e.y,l=a.x,h=a.y;return{x:Math.min(r,l),y:Math.min(s,h),width:Math.abs(l-r),height:Math.abs(h-s)}},eSe=function(e){var a=e.x1,r=e.y1,s=e.x2,l=e.y2;return $X({x:a,y:r},{x:s,y:l})},KX=function(){function t(e){XTe(this,t),this.scale=e}return JTe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.bandAware,l=r.position;if(a!==void 0){if(l)switch(l){case"start":return this.scale(a);case"middle":{var h=this.bandwidth?this.bandwidth()/2:0;return this.scale(a)+h}case"end":{var n=this.bandwidth?this.bandwidth():0;return this.scale(a)+n}default:return this.scale(a)}if(s){var w=this.bandwidth?this.bandwidth()/2:0;return this.scale(a)+w}return this.scale(a)}}},{key:"isInRange",value:function(a){var r=this.range(),s=r[0],l=r[r.length-1];return s<=l?a>=s&&a<=l:a>=l&&a<=s}}],[{key:"create",value:function(a){return new t(a)}}])}();iP(KX,"EPS",1e-4);var D4=function(e){var a=Object.keys(e).reduce(function(r,s){return Np(Np({},r),{},iP({},s,KX.create(e[s])))},{});return Np(Np({},a),{},{apply:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=l.bandAware,n=l.position;return PTe(s,function(w,T){return a[T].apply(w,{bandAware:h,position:n})})},isInRange:function(s){return GX(s,function(l,h){return a[h].isInRange(l)})}})};function tSe(t){return(t%180+180)%180}var aSe=function(e){var a=e.width,r=e.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=tSe(s),h=l*Math.PI/180,n=Math.atan(r/a),w=h>n&&h<Math.PI-n?r/Math.sin(h):a/Math.cos(h);return Math.abs(w)},YO,x9;function rSe(){if(x9)return YO;x9=1;var t=Bm(),e=kT(),a=k2();function r(s){return function(l,h,n){var w=Object(l);if(!e(l)){var T=t(h,3);l=a(l),h=function(z){return T(w[z],z,w)}}var P=s(l,h,n);return P>-1?w[T?l[P]:P]:void 0}}return YO=r,YO}var XO,P9;function nSe(){if(P9)return XO;P9=1;var t=FX();function e(a){var r=t(a),s=r%1;return r===r?s?r-s:r:0}return XO=e,XO}var JO,E9;function iSe(){if(E9)return JO;E9=1;var t=WW(),e=Bm(),a=nSe(),r=Math.max;function s(l,h,n){var w=l==null?0:l.length;if(!w)return-1;var T=n==null?0:a(n);return T<0&&(T=r(w+T,0)),t(l,e(h,3),T)}return JO=s,JO}var QO,N9;function sSe(){if(N9)return QO;N9=1;var t=rSe(),e=iSe(),a=t(e);return QO=a,QO}var oSe=sSe();const lSe=Ji(oSe);var uSe=cW();const cSe=Ji(uSe);var dSe=cSe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),M4=nt.createContext(void 0),I4=nt.createContext(void 0),WX=nt.createContext(void 0),YX=nt.createContext({}),XX=nt.createContext(void 0),JX=nt.createContext(0),QX=nt.createContext(0),V9=function(e){var a=e.state,r=a.xAxisMap,s=a.yAxisMap,l=a.offset,h=e.clipPathId,n=e.children,w=e.width,T=e.height,P=dSe(l);return Vt.createElement(M4.Provider,{value:r},Vt.createElement(I4.Provider,{value:s},Vt.createElement(YX.Provider,{value:l},Vt.createElement(WX.Provider,{value:P},Vt.createElement(XX.Provider,{value:h},Vt.createElement(JX.Provider,{value:T},Vt.createElement(QX.Provider,{value:w},n)))))))},hSe=function(){return nt.useContext(XX)},eJ=function(e){var a=nt.useContext(M4);a==null&&w0();var r=a[e];return r==null&&w0(),r},fSe=function(){var e=nt.useContext(M4);return bg(e)},pSe=function(){var e=nt.useContext(I4),a=lSe(e,function(r){return GX(r.domain,Number.isFinite)});return a||bg(e)},tJ=function(e){var a=nt.useContext(I4);a==null&&w0();var r=a[e];return r==null&&w0(),r},mSe=function(){var e=nt.useContext(WX);return e},ySe=function(){return nt.useContext(YX)},L4=function(){return nt.useContext(QX)},F4=function(){return nt.useContext(JX)};function Vv(t){"@babel/helpers - typeof";return Vv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vv(t)}function gSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ASe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rJ(r.key),r)}}function _Se(t,e,a){return e&&ASe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function vSe(t,e,a){return e=Cx(e),wSe(t,aJ()?Reflect.construct(e,a||[],Cx(t).constructor):e.apply(t,a))}function wSe(t,e){if(e&&(Vv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RSe(t)}function RSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aJ=function(){return!!t})()}function Cx(t){return Cx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Cx(t)}function TSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VM(t,e)}function VM(t,e){return VM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},VM(t,e)}function z9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function O9(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?z9(Object(a),!0).forEach(function(r){U4(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):z9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function U4(t,e,a){return e=rJ(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function rJ(t){var e=SSe(t,"string");return Vv(e)=="symbol"?e:e+""}function SSe(t,e){if(Vv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Vv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function CSe(t,e){return ESe(t)||PSe(t,e)||xSe(t,e)||bSe()}function bSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xSe(t,e){if(t){if(typeof t=="string")return D9(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return D9(t,e)}}function D9(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function PSe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,s,l,h,n=[],w=!0,T=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(w=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);w=!0);}catch(P){T=!0,s=P}finally{try{if(!w&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(T)throw s}}return n}}function ESe(t){if(Array.isArray(t))return t}function zM(){return zM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},zM.apply(this,arguments)}var NSe=function(e,a){var r;return Vt.isValidElement(e)?r=Vt.cloneElement(e,a):Fn(e)?r=e(a):r=Vt.createElement("line",zM({},a,{className:"recharts-reference-line-line"})),r},VSe=function(e,a,r,s,l,h,n,w,T){var P=l.x,z=l.y,k=l.width,U=l.height;if(r){var Z=T.y,H=e.y.apply(Z,{position:h});if(Om(T,"discard")&&!e.y.isInRange(H))return null;var q=[{x:P+k,y:H},{x:P,y:H}];return w==="left"?q.reverse():q}if(a){var J=T.x,re=e.x.apply(J,{position:h});if(Om(T,"discard")&&!e.x.isInRange(re))return null;var ce=[{x:re,y:z+U},{x:re,y:z}];return n==="top"?ce.reverse():ce}if(s){var ye=T.segment,he=ye.map(function(_e){return e.apply(_e,{position:h})});return Om(T,"discard")&&STe(he,function(_e){return!e.isInRange(_e)})?null:he}return null};function zSe(t){var e=t.x,a=t.y,r=t.segment,s=t.xAxisId,l=t.yAxisId,h=t.shape,n=t.className,w=t.alwaysShow,T=hSe(),P=eJ(s),z=tJ(l),k=mSe();if(!T||!k)return null;Mp(w===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var U=D4({x:P.scale,y:z.scale}),Z=Fu(e),H=Fu(a),q=r&&r.length===2,J=VSe(U,Z,H,q,k,t.position,P.orientation,z.orientation,t);if(!J)return null;var re=CSe(J,2),ce=re[0],ye=ce.x,he=ce.y,_e=re[1],me=_e.x,Re=_e.y,be=Om(t,"hidden")?"url(#".concat(T,")"):void 0,De=O9(O9({clipPath:be},ln(t,!0)),{},{x1:ye,y1:he,x2:me,y2:Re});return Vt.createElement(fi,{className:ci("recharts-reference-line",n)},NSe(h,De),ac.renderCallByParent(t,eSe({x1:ye,y1:he,x2:me,y2:Re})))}var k4=function(t){function e(){return gSe(this,e),vSe(this,e,arguments)}return TSe(e,t),_Se(e,[{key:"render",value:function(){return Vt.createElement(zSe,this.props)}}])}(Vt.Component);U4(k4,"displayName","ReferenceLine");U4(k4,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function OM(){return OM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},OM.apply(this,arguments)}function zv(t){"@babel/helpers - typeof";return zv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zv(t)}function M9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function I9(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?M9(Object(a),!0).forEach(function(r){oP(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):M9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function OSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function DSe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,iJ(r.key),r)}}function MSe(t,e,a){return e&&DSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ISe(t,e,a){return e=bx(e),LSe(t,nJ()?Reflect.construct(e,a||[],bx(t).constructor):e.apply(t,a))}function LSe(t,e){if(e&&(zv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FSe(t)}function FSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nJ=function(){return!!t})()}function bx(t){return bx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},bx(t)}function USe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DM(t,e)}function DM(t,e){return DM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},DM(t,e)}function oP(t,e,a){return e=iJ(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function iJ(t){var e=kSe(t,"string");return zv(e)=="symbol"?e:e+""}function kSe(t,e){if(zv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(zv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var BSe=function(e){var a=e.x,r=e.y,s=e.xAxis,l=e.yAxis,h=D4({x:s.scale,y:l.scale}),n=h.apply({x:a,y:r},{bandAware:!0});return Om(e,"discard")&&!h.isInRange(n)?null:n},lP=function(t){function e(){return OSe(this,e),ISe(this,e,arguments)}return USe(e,t),MSe(e,[{key:"render",value:function(){var r=this.props,s=r.x,l=r.y,h=r.r,n=r.alwaysShow,w=r.clipPathId,T=Fu(s),P=Fu(l);if(Mp(n===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!T||!P)return null;var z=BSe(this.props);if(!z)return null;var k=z.x,U=z.y,Z=this.props,H=Z.shape,q=Z.className,J=Om(this.props,"hidden")?"url(#".concat(w,")"):void 0,re=I9(I9({clipPath:J},ln(this.props,!0)),{},{cx:k,cy:U});return Vt.createElement(fi,{className:ci("recharts-reference-dot",q)},e.renderDot(H,re),ac.renderCallByParent(this.props,{x:k-h,y:U-h,width:2*h,height:2*h}))}}])}(Vt.Component);oP(lP,"displayName","ReferenceDot");oP(lP,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});oP(lP,"renderDot",function(t,e){var a;return Vt.isValidElement(t)?a=Vt.cloneElement(t,e):Fn(t)?a=t(e):a=Vt.createElement(qT,OM({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),a});function MM(){return MM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},MM.apply(this,arguments)}function Ov(t){"@babel/helpers - typeof";return Ov=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ov(t)}function L9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function F9(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?L9(Object(a),!0).forEach(function(r){uP(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):L9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function GSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jSe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,oJ(r.key),r)}}function ZSe(t,e,a){return e&&jSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function qSe(t,e,a){return e=xx(e),HSe(t,sJ()?Reflect.construct(e,a||[],xx(t).constructor):e.apply(t,a))}function HSe(t,e){if(e&&(Ov(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $Se(t)}function $Se(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sJ=function(){return!!t})()}function xx(t){return xx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},xx(t)}function KSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IM(t,e)}function IM(t,e){return IM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},IM(t,e)}function uP(t,e,a){return e=oJ(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function oJ(t){var e=WSe(t,"string");return Ov(e)=="symbol"?e:e+""}function WSe(t,e){if(Ov(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Ov(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var YSe=function(e,a,r,s,l){var h=l.x1,n=l.x2,w=l.y1,T=l.y2,P=l.xAxis,z=l.yAxis;if(!P||!z)return null;var k=D4({x:P.scale,y:z.scale}),U={x:e?k.x.apply(h,{position:"start"}):k.x.rangeMin,y:r?k.y.apply(w,{position:"start"}):k.y.rangeMin},Z={x:a?k.x.apply(n,{position:"end"}):k.x.rangeMax,y:s?k.y.apply(T,{position:"end"}):k.y.rangeMax};return Om(l,"discard")&&(!k.isInRange(U)||!k.isInRange(Z))?null:$X(U,Z)},cP=function(t){function e(){return GSe(this,e),qSe(this,e,arguments)}return KSe(e,t),ZSe(e,[{key:"render",value:function(){var r=this.props,s=r.x1,l=r.x2,h=r.y1,n=r.y2,w=r.className,T=r.alwaysShow,P=r.clipPathId;Mp(T===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var z=Fu(s),k=Fu(l),U=Fu(h),Z=Fu(n),H=this.props.shape;if(!z&&!k&&!U&&!Z&&!H)return null;var q=YSe(z,k,U,Z,this.props);if(!q&&!H)return null;var J=Om(this.props,"hidden")?"url(#".concat(P,")"):void 0;return Vt.createElement(fi,{className:ci("recharts-reference-area",w)},e.renderRect(H,F9(F9({clipPath:J},ln(this.props,!0)),q)),ac.renderCallByParent(this.props,q))}}])}(Vt.Component);uP(cP,"displayName","ReferenceArea");uP(cP,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});uP(cP,"renderRect",function(t,e){var a;return Vt.isValidElement(t)?a=Vt.cloneElement(t,e):Fn(t)?a=t(e):a=Vt.createElement(O4,MM({},e,{className:"recharts-reference-area-rect"})),a});function lJ(t,e,a){if(e<1)return[];if(e===1&&a===void 0)return t;for(var r=[],s=0;s<t.length;s+=e)r.push(t[s]);return r}function XSe(t,e,a){var r={width:t.width+e.width,height:t.height+e.height};return aSe(r,a)}function JSe(t,e,a){var r=a==="width",s=t.x,l=t.y,h=t.width,n=t.height;return e===1?{start:r?s:l,end:r?s+h:l+n}:{start:r?s+h:l+n,end:r?s:l}}function Px(t,e,a,r,s){if(t*e<t*r||t*e>t*s)return!1;var l=a();return t*(e-t*l/2-r)>=0&&t*(e+t*l/2-s)<=0}function QSe(t,e){return lJ(t,e+1)}function eCe(t,e,a,r,s){for(var l=(r||[]).slice(),h=e.start,n=e.end,w=0,T=1,P=h,z=function(){var Z=r==null?void 0:r[w];if(Z===void 0)return{v:lJ(r,T)};var H=w,q,J=function(){return q===void 0&&(q=a(Z,H)),q},re=Z.coordinate,ce=w===0||Px(t,re,J,P,n);ce||(w=0,P=h,T+=1),ce&&(P=re+t*(J()/2+s),w+=T)},k;T<=l.length;)if(k=z(),k)return k.v;return[]}function lT(t){"@babel/helpers - typeof";return lT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lT(t)}function U9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function od(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?U9(Object(a),!0).forEach(function(r){tCe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):U9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function tCe(t,e,a){return e=aCe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function aCe(t){var e=rCe(t,"string");return lT(e)=="symbol"?e:e+""}function rCe(t,e){if(lT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(lT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nCe(t,e,a,r,s){for(var l=(r||[]).slice(),h=l.length,n=e.start,w=e.end,T=function(k){var U=l[k],Z,H=function(){return Z===void 0&&(Z=a(U,k)),Z};if(k===h-1){var q=t*(U.coordinate+t*H()/2-w);l[k]=U=od(od({},U),{},{tickCoord:q>0?U.coordinate-q*t:U.coordinate})}else l[k]=U=od(od({},U),{},{tickCoord:U.coordinate});var J=Px(t,U.tickCoord,H,n,w);J&&(w=U.tickCoord-t*(H()/2+s),l[k]=od(od({},U),{},{isShow:!0}))},P=h-1;P>=0;P--)T(P);return l}function iCe(t,e,a,r,s,l){var h=(r||[]).slice(),n=h.length,w=e.start,T=e.end;if(l){var P=r[n-1],z=a(P,n-1),k=t*(P.coordinate+t*z/2-T);h[n-1]=P=od(od({},P),{},{tickCoord:k>0?P.coordinate-k*t:P.coordinate});var U=Px(t,P.tickCoord,function(){return z},w,T);U&&(T=P.tickCoord-t*(z/2+s),h[n-1]=od(od({},P),{},{isShow:!0}))}for(var Z=l?n-1:n,H=function(re){var ce=h[re],ye,he=function(){return ye===void 0&&(ye=a(ce,re)),ye};if(re===0){var _e=t*(ce.coordinate-t*he()/2-w);h[re]=ce=od(od({},ce),{},{tickCoord:_e<0?ce.coordinate-_e*t:ce.coordinate})}else h[re]=ce=od(od({},ce),{},{tickCoord:ce.coordinate});var me=Px(t,ce.tickCoord,he,w,T);me&&(w=ce.tickCoord+t*(he()/2+s),h[re]=od(od({},ce),{},{isShow:!0}))},q=0;q<Z;q++)H(q);return h}function B4(t,e,a){var r=t.tick,s=t.ticks,l=t.viewBox,h=t.minTickGap,n=t.orientation,w=t.interval,T=t.tickFormatter,P=t.unit,z=t.angle;if(!s||!s.length||!r)return[];if(yr(w)||Dy.isSsr)return QSe(s,typeof w=="number"&&yr(w)?w:0);var k=[],U=n==="top"||n==="bottom"?"width":"height",Z=P&&U==="width"?eR(P,{fontSize:e,letterSpacing:a}):{width:0,height:0},H=function(ce,ye){var he=Fn(T)?T(ce.value,ye):ce.value;return U==="width"?XSe(eR(he,{fontSize:e,letterSpacing:a}),Z,z):eR(he,{fontSize:e,letterSpacing:a})[U]},q=s.length>=2?Qd(s[1].coordinate-s[0].coordinate):1,J=JSe(l,q,U);return w==="equidistantPreserveStart"?eCe(q,J,H,s,h):(w==="preserveStart"||w==="preserveStartEnd"?k=iCe(q,J,H,s,h,w==="preserveStartEnd"):k=nCe(q,J,H,s,h),k.filter(function(re){return re.isShow}))}var sCe=["viewBox"],oCe=["viewBox"],lCe=["ticks"];function Dv(t){"@babel/helpers - typeof";return Dv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dv(t)}function B_(){return B_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},B_.apply(this,arguments)}function k9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function Yd(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?k9(Object(a),!0).forEach(function(r){G4(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):k9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function e5(t,e){if(t==null)return{};var a=uCe(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function uCe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function cCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function B9(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,cJ(r.key),r)}}function dCe(t,e,a){return e&&B9(t.prototype,e),a&&B9(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function hCe(t,e,a){return e=Ex(e),fCe(t,uJ()?Reflect.construct(e,a||[],Ex(t).constructor):e.apply(t,a))}function fCe(t,e){if(e&&(Dv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pCe(t)}function pCe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uJ=function(){return!!t})()}function Ex(t){return Ex=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Ex(t)}function mCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LM(t,e)}function LM(t,e){return LM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},LM(t,e)}function G4(t,e,a){return e=cJ(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function cJ(t){var e=yCe(t,"string");return Dv(e)=="symbol"?e:e+""}function yCe(t,e){if(Dv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Dv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var u1=function(t){function e(a){var r;return cCe(this,e),r=hCe(this,e,[a]),r.state={fontSize:"",letterSpacing:""},r}return mCe(e,t),dCe(e,[{key:"shouldComponentUpdate",value:function(r,s){var l=r.viewBox,h=e5(r,sCe),n=this.props,w=n.viewBox,T=e5(n,oCe);return!X_(l,w)||!X_(h,T)||!X_(s,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var s=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var s=this.props,l=s.x,h=s.y,n=s.width,w=s.height,T=s.orientation,P=s.tickSize,z=s.mirror,k=s.tickMargin,U,Z,H,q,J,re,ce=z?-1:1,ye=r.tickSize||P,he=yr(r.tickCoord)?r.tickCoord:r.coordinate;switch(T){case"top":U=Z=r.coordinate,q=h+ +!z*w,H=q-ce*ye,re=H-ce*k,J=he;break;case"left":H=q=r.coordinate,Z=l+ +!z*n,U=Z-ce*ye,J=U-ce*k,re=he;break;case"right":H=q=r.coordinate,Z=l+ +z*n,U=Z+ce*ye,J=U+ce*k,re=he;break;default:U=Z=r.coordinate,q=h+ +z*w,H=q+ce*ye,re=H+ce*k,J=he;break}return{line:{x1:U,y1:H,x2:Z,y2:q},tick:{x:J,y:re}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,s=r.orientation,l=r.mirror,h;switch(s){case"left":h=l?"start":"end";break;case"right":h=l?"end":"start";break;default:h="middle";break}return h}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,s=r.orientation,l=r.mirror,h="end";switch(s){case"left":case"right":h="middle";break;case"top":h=l?"start":"end";break;default:h=l?"end":"start";break}return h}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.x,l=r.y,h=r.width,n=r.height,w=r.orientation,T=r.mirror,P=r.axisLine,z=Yd(Yd(Yd({},ln(this.props,!1)),ln(P,!1)),{},{fill:"none"});if(w==="top"||w==="bottom"){var k=+(w==="top"&&!T||w==="bottom"&&T);z=Yd(Yd({},z),{},{x1:s,y1:l+k*n,x2:s+h,y2:l+k*n})}else{var U=+(w==="left"&&!T||w==="right"&&T);z=Yd(Yd({},z),{},{x1:s+U*h,y1:l,x2:s+U*h,y2:l+n})}return Vt.createElement("line",B_({},z,{className:ci("recharts-cartesian-axis-line",hf(P,"className"))}))}},{key:"renderTicks",value:function(r,s,l){var h=this,n=this.props,w=n.tickLine,T=n.stroke,P=n.tick,z=n.tickFormatter,k=n.unit,U=B4(Yd(Yd({},this.props),{},{ticks:r}),s,l),Z=this.getTickTextAnchor(),H=this.getTickVerticalAnchor(),q=ln(this.props,!1),J=ln(P,!1),re=Yd(Yd({},q),{},{fill:"none"},ln(w,!1)),ce=U.map(function(ye,he){var _e=h.getTickLineCoord(ye),me=_e.line,Re=_e.tick,be=Yd(Yd(Yd(Yd({textAnchor:Z,verticalAnchor:H},q),{},{stroke:"none",fill:T},J),Re),{},{index:he,payload:ye,visibleTicksCount:U.length,tickFormatter:z});return Vt.createElement(fi,B_({className:"recharts-cartesian-axis-tick",key:"tick-".concat(ye.value,"-").concat(ye.coordinate,"-").concat(ye.tickCoord)},Bg(h.props,ye,he)),w&&Vt.createElement("line",B_({},re,me,{className:ci("recharts-cartesian-axis-tick-line",hf(w,"className"))})),P&&e.renderTickItem(P,be,"".concat(Fn(z)?z(ye.value,he):ye.value).concat(k||"")))});return Vt.createElement("g",{className:"recharts-cartesian-axis-ticks"},ce)}},{key:"render",value:function(){var r=this,s=this.props,l=s.axisLine,h=s.width,n=s.height,w=s.ticksGenerator,T=s.className,P=s.hide;if(P)return null;var z=this.props,k=z.ticks,U=e5(z,lCe),Z=k;return Fn(w)&&(Z=k&&k.length>0?w(this.props):w(U)),h<=0||n<=0||!Z||!Z.length?null:Vt.createElement(fi,{className:ci("recharts-cartesian-axis",T),ref:function(q){r.layerReference=q}},l&&this.renderAxisLine(),this.renderTicks(Z,this.state.fontSize,this.state.letterSpacing),ac.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,s,l){var h;return Vt.isValidElement(r)?h=Vt.cloneElement(r,s):Fn(r)?h=r(s):h=Vt.createElement(_0,B_({},s,{className:"recharts-cartesian-axis-tick-value"}),l),h}}])}(nt.Component);G4(u1,"displayName","CartesianAxis");G4(u1,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var gCe=["x1","y1","x2","y2","key"],ACe=["offset"];function R0(t){"@babel/helpers - typeof";return R0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R0(t)}function G9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function fd(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?G9(Object(a),!0).forEach(function(r){_Ce(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):G9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function _Ce(t,e,a){return e=vCe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function vCe(t){var e=wCe(t,"string");return R0(e)=="symbol"?e:e+""}function wCe(t,e){if(R0(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(R0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function a0(){return a0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},a0.apply(this,arguments)}function j9(t,e){if(t==null)return{};var a=RCe(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function RCe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}var TCe=function(e){var a=e.fill;if(!a||a==="none")return null;var r=e.fillOpacity,s=e.x,l=e.y,h=e.width,n=e.height,w=e.ry;return Vt.createElement("rect",{x:s,y:l,ry:w,width:h,height:n,stroke:"none",fill:a,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function dJ(t,e){var a;if(Vt.isValidElement(t))a=Vt.cloneElement(t,e);else if(Fn(t))a=t(e);else{var r=e.x1,s=e.y1,l=e.x2,h=e.y2,n=e.key,w=j9(e,gCe),T=ln(w,!1);T.offset;var P=j9(T,ACe);a=Vt.createElement("line",a0({},P,{x1:r,y1:s,x2:l,y2:h,fill:"none",key:n}))}return a}function SCe(t){var e=t.x,a=t.width,r=t.horizontal,s=r===void 0?!0:r,l=t.horizontalPoints;if(!s||!l||!l.length)return null;var h=l.map(function(n,w){var T=fd(fd({},t),{},{x1:e,y1:n,x2:e+a,y2:n,key:"line-".concat(w),index:w});return dJ(s,T)});return Vt.createElement("g",{className:"recharts-cartesian-grid-horizontal"},h)}function CCe(t){var e=t.y,a=t.height,r=t.vertical,s=r===void 0?!0:r,l=t.verticalPoints;if(!s||!l||!l.length)return null;var h=l.map(function(n,w){var T=fd(fd({},t),{},{x1:n,y1:e,x2:n,y2:e+a,key:"line-".concat(w),index:w});return dJ(s,T)});return Vt.createElement("g",{className:"recharts-cartesian-grid-vertical"},h)}function bCe(t){var e=t.horizontalFill,a=t.fillOpacity,r=t.x,s=t.y,l=t.width,h=t.height,n=t.horizontalPoints,w=t.horizontal,T=w===void 0?!0:w;if(!T||!e||!e.length)return null;var P=n.map(function(k){return Math.round(k+s-s)}).sort(function(k,U){return k-U});s!==P[0]&&P.unshift(0);var z=P.map(function(k,U){var Z=!P[U+1],H=Z?s+h-k:P[U+1]-k;if(H<=0)return null;var q=U%e.length;return Vt.createElement("rect",{key:"react-".concat(U),y:k,x:r,height:H,width:l,stroke:"none",fill:e[q],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return Vt.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},z)}function xCe(t){var e=t.vertical,a=e===void 0?!0:e,r=t.verticalFill,s=t.fillOpacity,l=t.x,h=t.y,n=t.width,w=t.height,T=t.verticalPoints;if(!a||!r||!r.length)return null;var P=T.map(function(k){return Math.round(k+l-l)}).sort(function(k,U){return k-U});l!==P[0]&&P.unshift(0);var z=P.map(function(k,U){var Z=!P[U+1],H=Z?l+n-k:P[U+1]-k;if(H<=0)return null;var q=U%r.length;return Vt.createElement("rect",{key:"react-".concat(U),x:k,y:h,width:H,height:w,stroke:"none",fill:r[q],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return Vt.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},z)}var PCe=function(e,a){var r=e.xAxis,s=e.width,l=e.height,h=e.offset;return fX(B4(fd(fd(fd({},u1.defaultProps),r),{},{ticks:yy(r,!0),viewBox:{x:0,y:0,width:s,height:l}})),h.left,h.left+h.width,a)},ECe=function(e,a){var r=e.yAxis,s=e.width,l=e.height,h=e.offset;return fX(B4(fd(fd(fd({},u1.defaultProps),r),{},{ticks:yy(r,!0),viewBox:{x:0,y:0,width:s,height:l}})),h.top,h.top+h.height,a)},C_={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Vp(t){var e,a,r,s,l,h,n=L4(),w=F4(),T=ySe(),P=fd(fd({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:C_.stroke,fill:(a=t.fill)!==null&&a!==void 0?a:C_.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:C_.horizontal,horizontalFill:(s=t.horizontalFill)!==null&&s!==void 0?s:C_.horizontalFill,vertical:(l=t.vertical)!==null&&l!==void 0?l:C_.vertical,verticalFill:(h=t.verticalFill)!==null&&h!==void 0?h:C_.verticalFill,x:yr(t.x)?t.x:T.left,y:yr(t.y)?t.y:T.top,width:yr(t.width)?t.width:T.width,height:yr(t.height)?t.height:T.height}),z=P.x,k=P.y,U=P.width,Z=P.height,H=P.syncWithTicks,q=P.horizontalValues,J=P.verticalValues,re=fSe(),ce=pSe();if(!yr(U)||U<=0||!yr(Z)||Z<=0||!yr(z)||z!==+z||!yr(k)||k!==+k)return null;var ye=P.verticalCoordinatesGenerator||PCe,he=P.horizontalCoordinatesGenerator||ECe,_e=P.horizontalPoints,me=P.verticalPoints;if((!_e||!_e.length)&&Fn(he)){var Re=q&&q.length,be=he({yAxis:ce?fd(fd({},ce),{},{ticks:Re?q:ce.ticks}):void 0,width:n,height:w,offset:T},Re?!0:H);Mp(Array.isArray(be),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(R0(be),"]")),Array.isArray(be)&&(_e=be)}if((!me||!me.length)&&Fn(ye)){var De=J&&J.length,ie=ye({xAxis:re?fd(fd({},re),{},{ticks:De?J:re.ticks}):void 0,width:n,height:w,offset:T},De?!0:H);Mp(Array.isArray(ie),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(R0(ie),"]")),Array.isArray(ie)&&(me=ie)}return Vt.createElement("g",{className:"recharts-cartesian-grid"},Vt.createElement(TCe,{fill:P.fill,fillOpacity:P.fillOpacity,x:P.x,y:P.y,width:P.width,height:P.height,ry:P.ry}),Vt.createElement(SCe,a0({},P,{offset:T,horizontalPoints:_e,xAxis:re,yAxis:ce})),Vt.createElement(CCe,a0({},P,{offset:T,verticalPoints:me,xAxis:re,yAxis:ce})),Vt.createElement(bCe,a0({},P,{horizontalPoints:_e})),Vt.createElement(xCe,a0({},P,{verticalPoints:me})))}Vp.displayName="CartesianGrid";var NCe=["type","layout","connectNulls","ref"],VCe=["key"];function Mv(t){"@babel/helpers - typeof";return Mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mv(t)}function Z9(t,e){if(t==null)return{};var a=zCe(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function zCe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function sR(){return sR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},sR.apply(this,arguments)}function q9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function tf(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?q9(Object(a),!0).forEach(function(r){zp(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):q9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function b_(t){return ICe(t)||MCe(t)||DCe(t)||OCe()}function OCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DCe(t,e){if(t){if(typeof t=="string")return FM(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return FM(t,e)}}function MCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ICe(t){if(Array.isArray(t))return FM(t)}function FM(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function LCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function H9(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fJ(r.key),r)}}function FCe(t,e,a){return e&&H9(t.prototype,e),a&&H9(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function UCe(t,e,a){return e=Nx(e),kCe(t,hJ()?Reflect.construct(e,a||[],Nx(t).constructor):e.apply(t,a))}function kCe(t,e){if(e&&(Mv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BCe(t)}function BCe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hJ=function(){return!!t})()}function Nx(t){return Nx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Nx(t)}function GCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UM(t,e)}function UM(t,e){return UM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},UM(t,e)}function zp(t,e,a){return e=fJ(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function fJ(t){var e=jCe(t,"string");return Mv(e)=="symbol"?e:e+""}function jCe(t,e){if(Mv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Mv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var D0=function(t){function e(){var a;LCe(this,e);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return a=UCe(this,e,[].concat(s)),zp(a,"state",{isAnimationFinished:!0,totalLength:0}),zp(a,"generateSimpleStrokeDasharray",function(h,n){return"".concat(n,"px ").concat(h-n,"px")}),zp(a,"getStrokeDasharray",function(h,n,w){var T=w.reduce(function(J,re){return J+re});if(!T)return a.generateSimpleStrokeDasharray(n,h);for(var P=Math.floor(h/T),z=h%T,k=n-h,U=[],Z=0,H=0;Z<w.length;H+=w[Z],++Z)if(H+w[Z]>z){U=[].concat(b_(w.slice(0,Z)),[z-H]);break}var q=U.length%2===0?[0,k]:[k];return[].concat(b_(e.repeat(w,P)),b_(U),q).map(function(J){return"".concat(J,"px")}).join(", ")}),zp(a,"id",Jg("recharts-line-")),zp(a,"pathRef",function(h){a.mainCurve=h}),zp(a,"handleAnimationEnd",function(){a.setState({isAnimationFinished:!0}),a.props.onAnimationEnd&&a.props.onAnimationEnd()}),zp(a,"handleAnimationStart",function(){a.setState({isAnimationFinished:!1}),a.props.onAnimationStart&&a.props.onAnimationStart()}),a}return GCe(e,t),FCe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var l=this.props,h=l.points,n=l.xAxis,w=l.yAxis,T=l.layout,P=l.children,z=nh(P,l1);if(!z)return null;var k=function(H,q){return{x:H.x,y:H.y,value:H.value,errorVal:No(H.payload,q)}},U={clipPath:r?"url(#clipPath-".concat(s,")"):null};return Vt.createElement(fi,U,z.map(function(Z){return Vt.cloneElement(Z,{key:"bar-".concat(Z.props.dataKey),data:h,xAxis:n,yAxis:w,layout:T,dataPointFormatter:k})}))}},{key:"renderDots",value:function(r,s,l){var h=this.props.isAnimationActive;if(h&&!this.state.isAnimationFinished)return null;var n=this.props,w=n.dot,T=n.points,P=n.dataKey,z=ln(this.props,!1),k=ln(w,!0),U=T.map(function(H,q){var J=tf(tf(tf({key:"dot-".concat(q),r:3},z),k),{},{value:H.value,dataKey:P,cx:H.x,cy:H.y,index:q,payload:H.payload});return e.renderDotItem(w,J)}),Z={clipPath:r?"url(#clipPath-".concat(s?"":"dots-").concat(l,")"):null};return Vt.createElement(fi,sR({className:"recharts-line-dots",key:"dots"},Z),U)}},{key:"renderCurveStatically",value:function(r,s,l,h){var n=this.props,w=n.type,T=n.layout,P=n.connectNulls;n.ref;var z=Z9(n,NCe),k=tf(tf(tf({},ln(z,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(l,")"):null,points:r},h),{},{type:w,layout:T,connectNulls:P});return Vt.createElement(Lg,sR({},k,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,s){var l=this,h=this.props,n=h.points,w=h.strokeDasharray,T=h.isAnimationActive,P=h.animationBegin,z=h.animationDuration,k=h.animationEasing,U=h.animationId,Z=h.animateNewValues,H=h.width,q=h.height,J=this.state,re=J.prevPoints,ce=J.totalLength;return Vt.createElement(Kf,{begin:P,duration:z,isActive:T,easing:k,from:{t:0},to:{t:1},key:"line-".concat(U),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(ye){var he=ye.t;if(re){var _e=re.length/n.length,me=n.map(function(ge,Me){var ze=Math.floor(Me*_e);if(re[ze]){var Le=re[ze],Ie=ul(Le.x,ge.x),Ze=ul(Le.y,ge.y);return tf(tf({},ge),{},{x:Ie(he),y:Ze(he)})}if(Z){var ke=ul(H*2,ge.x),tt=ul(q/2,ge.y);return tf(tf({},ge),{},{x:ke(he),y:tt(he)})}return tf(tf({},ge),{},{x:ge.x,y:ge.y})});return l.renderCurveStatically(me,r,s)}var Re=ul(0,ce),be=Re(he),De;if(w){var ie="".concat(w).split(/[,\s]+/gim).map(function(ge){return parseFloat(ge)});De=l.getStrokeDasharray(be,ce,ie)}else De=l.generateSimpleStrokeDasharray(ce,be);return l.renderCurveStatically(n,r,s,{strokeDasharray:De})})}},{key:"renderCurve",value:function(r,s){var l=this.props,h=l.points,n=l.isAnimationActive,w=this.state,T=w.prevPoints,P=w.totalLength;return n&&h&&h.length&&(!T&&P>0||!Gg(T,h))?this.renderCurveWithAnimation(r,s):this.renderCurveStatically(h,r,s)}},{key:"render",value:function(){var r,s=this.props,l=s.hide,h=s.dot,n=s.points,w=s.className,T=s.xAxis,P=s.yAxis,z=s.top,k=s.left,U=s.width,Z=s.height,H=s.isAnimationActive,q=s.id;if(l||!n||!n.length)return null;var J=this.state.isAnimationFinished,re=n.length===1,ce=ci("recharts-line",w),ye=T&&T.allowDataOverflow,he=P&&P.allowDataOverflow,_e=ye||he,me=Un(q)?this.id:q,Re=(r=ln(h,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},be=Re.r,De=be===void 0?3:be,ie=Re.strokeWidth,ge=ie===void 0?2:ie,Me=mW(h)?h:{},ze=Me.clipDot,Le=ze===void 0?!0:ze,Ie=De*2+ge;return Vt.createElement(fi,{className:ce},ye||he?Vt.createElement("defs",null,Vt.createElement("clipPath",{id:"clipPath-".concat(me)},Vt.createElement("rect",{x:ye?k:k-U/2,y:he?z:z-Z/2,width:ye?U:U*2,height:he?Z:Z*2})),!Le&&Vt.createElement("clipPath",{id:"clipPath-dots-".concat(me)},Vt.createElement("rect",{x:k-Ie/2,y:z-Ie/2,width:U+Ie,height:Z+Ie}))):null,!re&&this.renderCurve(_e,me),this.renderErrorBar(_e,me),(re||h)&&this.renderDots(_e,Le,me),(!H||J)&&Hf.renderCallByParent(this.props,n))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:s.curPoints}:r.points!==s.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,s){for(var l=r.length%2!==0?[].concat(b_(r),[0]):r,h=[],n=0;n<s;++n)h=[].concat(b_(h),b_(l));return h}},{key:"renderDotItem",value:function(r,s){var l;if(Vt.isValidElement(r))l=Vt.cloneElement(r,s);else if(Fn(r))l=r(s);else{var h=s.key,n=Z9(s,VCe),w=ci("recharts-line-dot",typeof r!="boolean"?r.className:"");l=Vt.createElement(qT,sR({key:h},n,{className:w}))}return l}}])}(nt.PureComponent);zp(D0,"displayName","Line");zp(D0,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Dy.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});zp(D0,"getComposedData",function(t){var e=t.props,a=t.xAxis,r=t.yAxis,s=t.xAxisTicks,l=t.yAxisTicks,h=t.dataKey,n=t.bandSize,w=t.displayedData,T=t.offset,P=e.layout,z=w.map(function(k,U){var Z=No(k,h);return P==="horizontal"?{x:Tv({axis:a,ticks:s,bandSize:n,entry:k,index:U}),y:Un(Z)?null:r.scale(Z),value:Z,payload:k}:{x:Un(Z)?null:a.scale(Z),y:Tv({axis:r,ticks:l,bandSize:n,entry:k,index:U}),value:Z,payload:k}});return tf({points:z,layout:P},T)});var ZCe=["layout","type","stroke","connectNulls","isRange","ref"],qCe=["key"],pJ;function Iv(t){"@babel/helpers - typeof";return Iv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Iv(t)}function mJ(t,e){if(t==null)return{};var a=HCe(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function HCe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function r0(){return r0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},r0.apply(this,arguments)}function $9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function vg(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?$9(Object(a),!0).forEach(function(r){Cm(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):$9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function $Ce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function K9(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gJ(r.key),r)}}function KCe(t,e,a){return e&&K9(t.prototype,e),a&&K9(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function WCe(t,e,a){return e=Vx(e),YCe(t,yJ()?Reflect.construct(e,a||[],Vx(t).constructor):e.apply(t,a))}function YCe(t,e){if(e&&(Iv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XCe(t)}function XCe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yJ=function(){return!!t})()}function Vx(t){return Vx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Vx(t)}function JCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kM(t,e)}function kM(t,e){return kM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},kM(t,e)}function Cm(t,e,a){return e=gJ(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function gJ(t){var e=QCe(t,"string");return Iv(e)=="symbol"?e:e+""}function QCe(t,e){if(Iv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Iv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var of=function(t){function e(){var a;$Ce(this,e);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return a=WCe(this,e,[].concat(s)),Cm(a,"state",{isAnimationFinished:!0}),Cm(a,"id",Jg("recharts-area-")),Cm(a,"handleAnimationEnd",function(){var h=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),Fn(h)&&h()}),Cm(a,"handleAnimationStart",function(){var h=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),Fn(h)&&h()}),a}return JCe(e,t),KCe(e,[{key:"renderDots",value:function(r,s,l){var h=this.props.isAnimationActive,n=this.state.isAnimationFinished;if(h&&!n)return null;var w=this.props,T=w.dot,P=w.points,z=w.dataKey,k=ln(this.props,!1),U=ln(T,!0),Z=P.map(function(q,J){var re=vg(vg(vg({key:"dot-".concat(J),r:3},k),U),{},{index:J,cx:q.x,cy:q.y,dataKey:z,value:q.value,payload:q.payload,points:P});return e.renderDotItem(T,re)}),H={clipPath:r?"url(#clipPath-".concat(s?"":"dots-").concat(l,")"):null};return Vt.createElement(fi,r0({className:"recharts-area-dots"},H),Z)}},{key:"renderHorizontalRect",value:function(r){var s=this.props,l=s.baseLine,h=s.points,n=s.strokeWidth,w=h[0].x,T=h[h.length-1].x,P=r*Math.abs(w-T),z=Eg(h.map(function(k){return k.y||0}));return yr(l)&&typeof l=="number"?z=Math.max(l,z):l&&Array.isArray(l)&&l.length&&(z=Math.max(Eg(l.map(function(k){return k.y||0})),z)),yr(z)?Vt.createElement("rect",{x:w<T?w:w-P,y:0,width:P,height:Math.floor(z+(n?parseInt("".concat(n),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var s=this.props,l=s.baseLine,h=s.points,n=s.strokeWidth,w=h[0].y,T=h[h.length-1].y,P=r*Math.abs(w-T),z=Eg(h.map(function(k){return k.x||0}));return yr(l)&&typeof l=="number"?z=Math.max(l,z):l&&Array.isArray(l)&&l.length&&(z=Math.max(Eg(l.map(function(k){return k.x||0})),z)),yr(z)?Vt.createElement("rect",{x:0,y:w<T?w:w-P,width:z+(n?parseInt("".concat(n),10):1),height:Math.floor(P)}):null}},{key:"renderClipRect",value:function(r){var s=this.props.layout;return s==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,s,l,h){var n=this.props,w=n.layout,T=n.type,P=n.stroke,z=n.connectNulls,k=n.isRange;n.ref;var U=mJ(n,ZCe);return Vt.createElement(fi,{clipPath:l?"url(#clipPath-".concat(h,")"):null},Vt.createElement(Lg,r0({},ln(U,!0),{points:r,connectNulls:z,type:T,baseLine:s,layout:w,stroke:"none",className:"recharts-area-area"})),P!=="none"&&Vt.createElement(Lg,r0({},ln(this.props,!1),{className:"recharts-area-curve",layout:w,type:T,connectNulls:z,fill:"none",points:r})),P!=="none"&&k&&Vt.createElement(Lg,r0({},ln(this.props,!1),{className:"recharts-area-curve",layout:w,type:T,connectNulls:z,fill:"none",points:s})))}},{key:"renderAreaWithAnimation",value:function(r,s){var l=this,h=this.props,n=h.points,w=h.baseLine,T=h.isAnimationActive,P=h.animationBegin,z=h.animationDuration,k=h.animationEasing,U=h.animationId,Z=this.state,H=Z.prevPoints,q=Z.prevBaseLine;return Vt.createElement(Kf,{begin:P,duration:z,isActive:T,easing:k,from:{t:0},to:{t:1},key:"area-".concat(U),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(J){var re=J.t;if(H){var ce=H.length/n.length,ye=n.map(function(Re,be){var De=Math.floor(be*ce);if(H[De]){var ie=H[De],ge=ul(ie.x,Re.x),Me=ul(ie.y,Re.y);return vg(vg({},Re),{},{x:ge(re),y:Me(re)})}return Re}),he;if(yr(w)&&typeof w=="number"){var _e=ul(q,w);he=_e(re)}else if(Un(w)||r1(w)){var me=ul(q,0);he=me(re)}else he=w.map(function(Re,be){var De=Math.floor(be*ce);if(q[De]){var ie=q[De],ge=ul(ie.x,Re.x),Me=ul(ie.y,Re.y);return vg(vg({},Re),{},{x:ge(re),y:Me(re)})}return Re});return l.renderAreaStatically(ye,he,r,s)}return Vt.createElement(fi,null,Vt.createElement("defs",null,Vt.createElement("clipPath",{id:"animationClipPath-".concat(s)},l.renderClipRect(re))),Vt.createElement(fi,{clipPath:"url(#animationClipPath-".concat(s,")")},l.renderAreaStatically(n,w,r,s)))})}},{key:"renderArea",value:function(r,s){var l=this.props,h=l.points,n=l.baseLine,w=l.isAnimationActive,T=this.state,P=T.prevPoints,z=T.prevBaseLine,k=T.totalLength;return w&&h&&h.length&&(!P&&k>0||!Gg(P,h)||!Gg(z,n))?this.renderAreaWithAnimation(r,s):this.renderAreaStatically(h,n,r,s)}},{key:"render",value:function(){var r,s=this.props,l=s.hide,h=s.dot,n=s.points,w=s.className,T=s.top,P=s.left,z=s.xAxis,k=s.yAxis,U=s.width,Z=s.height,H=s.isAnimationActive,q=s.id;if(l||!n||!n.length)return null;var J=this.state.isAnimationFinished,re=n.length===1,ce=ci("recharts-area",w),ye=z&&z.allowDataOverflow,he=k&&k.allowDataOverflow,_e=ye||he,me=Un(q)?this.id:q,Re=(r=ln(h,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},be=Re.r,De=be===void 0?3:be,ie=Re.strokeWidth,ge=ie===void 0?2:ie,Me=mW(h)?h:{},ze=Me.clipDot,Le=ze===void 0?!0:ze,Ie=De*2+ge;return Vt.createElement(fi,{className:ce},ye||he?Vt.createElement("defs",null,Vt.createElement("clipPath",{id:"clipPath-".concat(me)},Vt.createElement("rect",{x:ye?P:P-U/2,y:he?T:T-Z/2,width:ye?U:U*2,height:he?Z:Z*2})),!Le&&Vt.createElement("clipPath",{id:"clipPath-dots-".concat(me)},Vt.createElement("rect",{x:P-Ie/2,y:T-Ie/2,width:U+Ie,height:Z+Ie}))):null,re?null:this.renderArea(_e,me),(h||re)&&this.renderDots(_e,Le,me),(!H||J)&&Hf.renderCallByParent(this.props,n))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:s.curPoints,prevBaseLine:s.curBaseLine}:r.points!==s.curPoints||r.baseLine!==s.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(nt.PureComponent);pJ=of;Cm(of,"displayName","Area");Cm(of,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Dy.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Cm(of,"getBaseValue",function(t,e,a,r){var s=t.layout,l=t.baseValue,h=e.props.baseValue,n=h??l;if(yr(n)&&typeof n=="number")return n;var w=s==="horizontal"?r:a,T=w.scale.domain();if(w.type==="number"){var P=Math.max(T[0],T[1]),z=Math.min(T[0],T[1]);return n==="dataMin"?z:n==="dataMax"||P<0?P:Math.max(Math.min(T[0],T[1]),0)}return n==="dataMin"?T[0]:n==="dataMax"?T[1]:T[0]});Cm(of,"getComposedData",function(t){var e=t.props,a=t.item,r=t.xAxis,s=t.yAxis,l=t.xAxisTicks,h=t.yAxisTicks,n=t.bandSize,w=t.dataKey,T=t.stackedData,P=t.dataStartIndex,z=t.displayedData,k=t.offset,U=e.layout,Z=T&&T.length,H=pJ.getBaseValue(e,a,r,s),q=U==="horizontal",J=!1,re=z.map(function(ye,he){var _e;Z?_e=T[P+he]:(_e=No(ye,w),Array.isArray(_e)?J=!0:_e=[H,_e]);var me=_e[1]==null||Z&&No(ye,w)==null;return q?{x:Tv({axis:r,ticks:l,bandSize:n,entry:ye,index:he}),y:me?null:s.scale(_e[1]),value:_e,payload:ye}:{x:me?null:r.scale(_e[1]),y:Tv({axis:s,ticks:h,bandSize:n,entry:ye,index:he}),value:_e,payload:ye}}),ce;return Z||J?ce=re.map(function(ye){var he=Array.isArray(ye.value)?ye.value[0]:null;return q?{x:ye.x,y:he!=null&&ye.y!=null?s.scale(he):null}:{x:he!=null?r.scale(he):null,y:ye.y}}):ce=q?s.scale(H):r.scale(H),vg({points:re,baseLine:ce,layout:U,isRange:J},k)});Cm(of,"renderDotItem",function(t,e){var a;if(Vt.isValidElement(t))a=Vt.cloneElement(t,e);else if(Fn(t))a=t(e);else{var r=ci("recharts-area-dot",typeof t!="boolean"?t.className:""),s=e.key,l=mJ(e,qCe);a=Vt.createElement(qT,r0({},l,{key:s,className:r}))}return a});function Lv(t){"@babel/helpers - typeof";return Lv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lv(t)}function ebe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tbe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vJ(r.key),r)}}function abe(t,e,a){return e&&tbe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function rbe(t,e,a){return e=zx(e),nbe(t,AJ()?Reflect.construct(e,a||[],zx(t).constructor):e.apply(t,a))}function nbe(t,e){if(e&&(Lv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ibe(t)}function ibe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function AJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AJ=function(){return!!t})()}function zx(t){return zx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},zx(t)}function sbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BM(t,e)}function BM(t,e){return BM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},BM(t,e)}function _J(t,e,a){return e=vJ(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function vJ(t){var e=obe(t,"string");return Lv(e)=="symbol"?e:e+""}function obe(t,e){if(Lv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Lv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var dP=function(t){function e(){return ebe(this,e),rbe(this,e,arguments)}return sbe(e,t),abe(e,[{key:"render",value:function(){return null}}])}(Vt.Component);_J(dP,"displayName","ZAxis");_J(dP,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var lbe=["option","isActive"];function oR(){return oR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},oR.apply(this,arguments)}function ube(t,e){if(t==null)return{};var a=cbe(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function cbe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function dbe(t){var e=t.option,a=t.isActive,r=ube(t,lbe);return typeof e=="string"?Vt.createElement(Ax,oR({option:Vt.createElement(U2,oR({type:e},r)),isActive:a,shapeType:"symbols"},r)):Vt.createElement(Ax,oR({option:e,isActive:a,shapeType:"symbols"},r))}function Fv(t){"@babel/helpers - typeof";return Fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fv(t)}function lR(){return lR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},lR.apply(this,arguments)}function W9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function Bf(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?W9(Object(a),!0).forEach(function(r){Vg(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):W9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function hbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Y9(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,RJ(r.key),r)}}function fbe(t,e,a){return e&&Y9(t.prototype,e),a&&Y9(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function pbe(t,e,a){return e=Ox(e),mbe(t,wJ()?Reflect.construct(e,a||[],Ox(t).constructor):e.apply(t,a))}function mbe(t,e){if(e&&(Fv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ybe(t)}function ybe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wJ=function(){return!!t})()}function Ox(t){return Ox=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Ox(t)}function gbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GM(t,e)}function GM(t,e){return GM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},GM(t,e)}function Vg(t,e,a){return e=RJ(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function RJ(t){var e=Abe(t,"string");return Fv(e)=="symbol"?e:e+""}function Abe(t,e){if(Fv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Fv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var hP=function(t){function e(){var a;hbe(this,e);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return a=pbe(this,e,[].concat(s)),Vg(a,"state",{isAnimationFinished:!1}),Vg(a,"handleAnimationEnd",function(){a.setState({isAnimationFinished:!0})}),Vg(a,"handleAnimationStart",function(){a.setState({isAnimationFinished:!1})}),Vg(a,"id",Jg("recharts-scatter-")),a}return gbe(e,t),fbe(e,[{key:"renderSymbolsStatically",value:function(r){var s=this,l=this.props,h=l.shape,n=l.activeShape,w=l.activeIndex,T=ln(this.props,!1);return r.map(function(P,z){var k=w===z,U=k?n:h,Z=Bf(Bf({},T),P);return Vt.createElement(fi,lR({className:"recharts-scatter-symbol",key:"symbol-".concat(P==null?void 0:P.cx,"-").concat(P==null?void 0:P.cy,"-").concat(P==null?void 0:P.size,"-").concat(z)},Bg(s.props,P,z),{role:"img"}),Vt.createElement(dbe,lR({option:U,isActive:k,key:"symbol-".concat(z)},Z)))})}},{key:"renderSymbolsWithAnimation",value:function(){var r=this,s=this.props,l=s.points,h=s.isAnimationActive,n=s.animationBegin,w=s.animationDuration,T=s.animationEasing,P=s.animationId,z=this.state.prevPoints;return Vt.createElement(Kf,{begin:n,duration:w,isActive:h,easing:T,from:{t:0},to:{t:1},key:"pie-".concat(P),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(k){var U=k.t,Z=l.map(function(H,q){var J=z&&z[q];if(J){var re=ul(J.cx,H.cx),ce=ul(J.cy,H.cy),ye=ul(J.size,H.size);return Bf(Bf({},H),{},{cx:re(U),cy:ce(U),size:ye(U)})}var he=ul(0,H.size);return Bf(Bf({},H),{},{size:he(U)})});return Vt.createElement(fi,null,r.renderSymbolsStatically(Z))})}},{key:"renderSymbols",value:function(){var r=this.props,s=r.points,l=r.isAnimationActive,h=this.state.prevPoints;return l&&s&&s.length&&(!h||!Gg(h,s))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(s)}},{key:"renderErrorBar",value:function(){var r=this.props.isAnimationActive;if(r&&!this.state.isAnimationFinished)return null;var s=this.props,l=s.points,h=s.xAxis,n=s.yAxis,w=s.children,T=nh(w,l1);return T?T.map(function(P,z){var k=P.props,U=k.direction,Z=k.dataKey;return Vt.cloneElement(P,{key:"".concat(U,"-").concat(Z,"-").concat(l[z]),data:l,xAxis:h,yAxis:n,layout:U==="x"?"vertical":"horizontal",dataPointFormatter:function(q,J){return{x:q.cx,y:q.cy,value:U==="x"?+q.node.x:+q.node.y,errorVal:No(q,J)}}})}):null}},{key:"renderLine",value:function(){var r=this.props,s=r.points,l=r.line,h=r.lineType,n=r.lineJointType,w=ln(this.props,!1),T=ln(l,!1),P,z;if(h==="joint")P=s.map(function(ce){return{x:ce.cx,y:ce.cy}});else if(h==="fitting"){var k=fhe(s),U=k.xmin,Z=k.xmax,H=k.a,q=k.b,J=function(ye){return H*ye+q};P=[{x:U,y:J(U)},{x:Z,y:J(Z)}]}var re=Bf(Bf(Bf({},w),{},{fill:"none",stroke:w&&w.fill},T),{},{points:P});return Vt.isValidElement(l)?z=Vt.cloneElement(l,re):Fn(l)?z=l(re):z=Vt.createElement(Lg,lR({},re,{type:n})),Vt.createElement(fi,{className:"recharts-scatter-line",key:"recharts-scatter-line"},z)}},{key:"render",value:function(){var r=this.props,s=r.hide,l=r.points,h=r.line,n=r.className,w=r.xAxis,T=r.yAxis,P=r.left,z=r.top,k=r.width,U=r.height,Z=r.id,H=r.isAnimationActive;if(s||!l||!l.length)return null;var q=this.state.isAnimationFinished,J=ci("recharts-scatter",n),re=w&&w.allowDataOverflow,ce=T&&T.allowDataOverflow,ye=re||ce,he=Un(Z)?this.id:Z;return Vt.createElement(fi,{className:J,clipPath:ye?"url(#clipPath-".concat(he,")"):null},re||ce?Vt.createElement("defs",null,Vt.createElement("clipPath",{id:"clipPath-".concat(he)},Vt.createElement("rect",{x:re?P:P-k/2,y:ce?z:z-U/2,width:re?k:k*2,height:ce?U:U*2}))):null,h&&this.renderLine(),this.renderErrorBar(),Vt.createElement(fi,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!H||q)&&Hf.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:s.curPoints}:r.points!==s.curPoints?{curPoints:r.points}:null}}])}(nt.PureComponent);Vg(hP,"displayName","Scatter");Vg(hP,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!Dy.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});Vg(hP,"getComposedData",function(t){var e=t.xAxis,a=t.yAxis,r=t.zAxis,s=t.item,l=t.displayedData,h=t.xAxisTicks,n=t.yAxisTicks,w=t.offset,T=s.props.tooltipType,P=nh(s.props.children,Av),z=Un(e.dataKey)?s.props.dataKey:e.dataKey,k=Un(a.dataKey)?s.props.dataKey:a.dataKey,U=r&&r.dataKey,Z=r?r.range:dP.defaultProps.range,H=Z&&Z[0],q=e.scale.bandwidth?e.scale.bandwidth():0,J=a.scale.bandwidth?a.scale.bandwidth():0,re=l.map(function(ce,ye){var he=No(ce,z),_e=No(ce,k),me=!Un(U)&&No(ce,U)||"-",Re=[{name:Un(e.dataKey)?s.props.name:e.name||e.dataKey,unit:e.unit||"",value:he,payload:ce,dataKey:z,type:T},{name:Un(a.dataKey)?s.props.name:a.name||a.dataKey,unit:a.unit||"",value:_e,payload:ce,dataKey:k,type:T}];me!=="-"&&Re.push({name:r.name||r.dataKey,unit:r.unit||"",value:me,payload:ce,dataKey:U,type:T});var be=Tv({axis:e,ticks:h,bandSize:q,entry:ce,index:ye,dataKey:z}),De=Tv({axis:a,ticks:n,bandSize:J,entry:ce,index:ye,dataKey:k}),ie=me!=="-"?r.scale(me):H,ge=Math.sqrt(Math.max(ie,0)/Math.PI);return Bf(Bf({},ce),{},{cx:be,cy:De,x:be-ge,y:De-ge,xAxis:e,yAxis:a,zAxis:r,width:2*ge,height:2*ge,size:ie,node:{x:he,y:_e,z:me},tooltipPayload:Re,tooltipPosition:{x:be,y:De},payload:ce},P&&P[ye]&&P[ye].props)});return Bf({points:re},w)});function Uv(t){"@babel/helpers - typeof";return Uv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uv(t)}function _be(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vbe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,CJ(r.key),r)}}function wbe(t,e,a){return e&&vbe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Rbe(t,e,a){return e=Dx(e),Tbe(t,TJ()?Reflect.construct(e,a||[],Dx(t).constructor):e.apply(t,a))}function Tbe(t,e){if(e&&(Uv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sbe(t)}function Sbe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function TJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TJ=function(){return!!t})()}function Dx(t){return Dx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Dx(t)}function Cbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jM(t,e)}function jM(t,e){return jM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},jM(t,e)}function SJ(t,e,a){return e=CJ(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function CJ(t){var e=bbe(t,"string");return Uv(e)=="symbol"?e:e+""}function bbe(t,e){if(Uv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Uv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function ZM(){return ZM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ZM.apply(this,arguments)}function xbe(t){var e=t.xAxisId,a=L4(),r=F4(),s=eJ(e);return s==null?null:Vt.createElement(u1,ZM({},s,{className:ci("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:a,height:r},ticksGenerator:function(h){return yy(h,!0)}}))}var ud=function(t){function e(){return _be(this,e),Rbe(this,e,arguments)}return Cbe(e,t),wbe(e,[{key:"render",value:function(){return Vt.createElement(xbe,this.props)}}])}(Vt.Component);SJ(ud,"displayName","XAxis");SJ(ud,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function kv(t){"@babel/helpers - typeof";return kv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kv(t)}function Pbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ebe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,PJ(r.key),r)}}function Nbe(t,e,a){return e&&Ebe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Vbe(t,e,a){return e=Mx(e),zbe(t,bJ()?Reflect.construct(e,a||[],Mx(t).constructor):e.apply(t,a))}function zbe(t,e){if(e&&(kv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Obe(t)}function Obe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bJ=function(){return!!t})()}function Mx(t){return Mx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Mx(t)}function Dbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qM(t,e)}function qM(t,e){return qM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},qM(t,e)}function xJ(t,e,a){return e=PJ(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function PJ(t){var e=Mbe(t,"string");return kv(e)=="symbol"?e:e+""}function Mbe(t,e){if(kv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(kv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function HM(){return HM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},HM.apply(this,arguments)}var Ibe=function(e){var a=e.yAxisId,r=L4(),s=F4(),l=tJ(a);return l==null?null:Vt.createElement(u1,HM({},l,{className:ci("recharts-".concat(l.axisType," ").concat(l.axisType),l.className),viewBox:{x:0,y:0,width:r,height:s},ticksGenerator:function(n){return yy(n,!0)}}))},cd=function(t){function e(){return Pbe(this,e),Vbe(this,e,arguments)}return Dbe(e,t),Nbe(e,[{key:"render",value:function(){return Vt.createElement(Ibe,this.props)}}])}(Vt.Component);xJ(cd,"displayName","YAxis");xJ(cd,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function X9(t){return kbe(t)||Ube(t)||Fbe(t)||Lbe()}function Lbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fbe(t,e){if(t){if(typeof t=="string")return $M(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return $M(t,e)}}function Ube(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function kbe(t){if(Array.isArray(t))return $M(t)}function $M(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}var KM=function(e,a,r,s,l){var h=nh(e,k4),n=nh(e,lP),w=[].concat(X9(h),X9(n)),T=nh(e,cP),P="".concat(s,"Id"),z=s[0],k=a;if(w.length&&(k=w.reduce(function(H,q){if(q.props[P]===r&&Om(q.props,"extendDomain")&&yr(q.props[z])){var J=q.props[z];return[Math.min(H[0],J),Math.max(H[1],J)]}return H},k)),T.length){var U="".concat(z,"1"),Z="".concat(z,"2");k=T.reduce(function(H,q){if(q.props[P]===r&&Om(q.props,"extendDomain")&&yr(q.props[U])&&yr(q.props[Z])){var J=q.props[U],re=q.props[Z];return[Math.min(H[0],J,re),Math.max(H[1],J,re)]}return H},k)}return l&&l.length&&(k=l.reduce(function(H,q){return yr(q)?[Math.min(H[0],q),Math.max(H[1],q)]:H},k)),k},t5={exports:{}},J9;function Bbe(){return J9||(J9=1,function(t){var e=Object.prototype.hasOwnProperty,a="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(a=!1));function s(w,T,P){this.fn=w,this.context=T,this.once=P||!1}function l(w,T,P,z,k){if(typeof P!="function")throw new TypeError("The listener must be a function");var U=new s(P,z||w,k),Z=a?a+T:T;return w._events[Z]?w._events[Z].fn?w._events[Z]=[w._events[Z],U]:w._events[Z].push(U):(w._events[Z]=U,w._eventsCount++),w}function h(w,T){--w._eventsCount===0?w._events=new r:delete w._events[T]}function n(){this._events=new r,this._eventsCount=0}n.prototype.eventNames=function(){var T=[],P,z;if(this._eventsCount===0)return T;for(z in P=this._events)e.call(P,z)&&T.push(a?z.slice(1):z);return Object.getOwnPropertySymbols?T.concat(Object.getOwnPropertySymbols(P)):T},n.prototype.listeners=function(T){var P=a?a+T:T,z=this._events[P];if(!z)return[];if(z.fn)return[z.fn];for(var k=0,U=z.length,Z=new Array(U);k<U;k++)Z[k]=z[k].fn;return Z},n.prototype.listenerCount=function(T){var P=a?a+T:T,z=this._events[P];return z?z.fn?1:z.length:0},n.prototype.emit=function(T,P,z,k,U,Z){var H=a?a+T:T;if(!this._events[H])return!1;var q=this._events[H],J=arguments.length,re,ce;if(q.fn){switch(q.once&&this.removeListener(T,q.fn,void 0,!0),J){case 1:return q.fn.call(q.context),!0;case 2:return q.fn.call(q.context,P),!0;case 3:return q.fn.call(q.context,P,z),!0;case 4:return q.fn.call(q.context,P,z,k),!0;case 5:return q.fn.call(q.context,P,z,k,U),!0;case 6:return q.fn.call(q.context,P,z,k,U,Z),!0}for(ce=1,re=new Array(J-1);ce<J;ce++)re[ce-1]=arguments[ce];q.fn.apply(q.context,re)}else{var ye=q.length,he;for(ce=0;ce<ye;ce++)switch(q[ce].once&&this.removeListener(T,q[ce].fn,void 0,!0),J){case 1:q[ce].fn.call(q[ce].context);break;case 2:q[ce].fn.call(q[ce].context,P);break;case 3:q[ce].fn.call(q[ce].context,P,z);break;case 4:q[ce].fn.call(q[ce].context,P,z,k);break;default:if(!re)for(he=1,re=new Array(J-1);he<J;he++)re[he-1]=arguments[he];q[ce].fn.apply(q[ce].context,re)}}return!0},n.prototype.on=function(T,P,z){return l(this,T,P,z,!1)},n.prototype.once=function(T,P,z){return l(this,T,P,z,!0)},n.prototype.removeListener=function(T,P,z,k){var U=a?a+T:T;if(!this._events[U])return this;if(!P)return h(this,U),this;var Z=this._events[U];if(Z.fn)Z.fn===P&&(!k||Z.once)&&(!z||Z.context===z)&&h(this,U);else{for(var H=0,q=[],J=Z.length;H<J;H++)(Z[H].fn!==P||k&&!Z[H].once||z&&Z[H].context!==z)&&q.push(Z[H]);q.length?this._events[U]=q.length===1?q[0]:q:h(this,U)}return this},n.prototype.removeAllListeners=function(T){var P;return T?(P=a?a+T:T,this._events[P]&&h(this,P)):(this._events=new r,this._eventsCount=0),this},n.prototype.off=n.prototype.removeListener,n.prototype.addListener=n.prototype.on,n.prefixed=a,n.EventEmitter=n,t.exports=n}(t5)),t5.exports}var Gbe=Bbe();const jbe=Ji(Gbe);var a5=new jbe,r5="recharts.syncMouseEvents";function uT(t){"@babel/helpers - typeof";return uT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uT(t)}function Zbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qbe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,EJ(r.key),r)}}function Hbe(t,e,a){return e&&qbe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function n5(t,e,a){return e=EJ(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function EJ(t){var e=$be(t,"string");return uT(e)=="symbol"?e:e+""}function $be(t,e){if(uT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(uT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Kbe=function(){function t(){Zbe(this,t),n5(this,"activeIndex",0),n5(this,"coordinateList",[]),n5(this,"layout","horizontal")}return Hbe(t,[{key:"setDetails",value:function(a){var r,s=a.coordinateList,l=s===void 0?null:s,h=a.container,n=h===void 0?null:h,w=a.layout,T=w===void 0?null:w,P=a.offset,z=P===void 0?null:P,k=a.mouseHandlerCallback,U=k===void 0?null:k;this.coordinateList=(r=l??this.coordinateList)!==null&&r!==void 0?r:[],this.container=n??this.container,this.layout=T??this.layout,this.offset=z??this.offset,this.mouseHandlerCallback=U??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(a){if(this.coordinateList.length!==0)switch(a.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(a){this.activeIndex=a}},{key:"spoofMouse",value:function(){var a,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),l=s.x,h=s.y,n=s.height,w=this.coordinateList[this.activeIndex].coordinate,T=((a=window)===null||a===void 0?void 0:a.scrollX)||0,P=((r=window)===null||r===void 0?void 0:r.scrollY)||0,z=l+w+T,k=h+this.offset.top+n/2+P;this.mouseHandlerCallback({pageX:z,pageY:k})}}}])}();function Wbe(t,e,a){if(a==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],s=t==null?void 0:t[1];if(r&&s&&yr(r)&&yr(s))return!0}return!1}function Ybe(t,e,a,r){var s=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-s:a.left+.5,y:t==="horizontal"?a.top+.5:e.y-s,width:t==="horizontal"?r:a.width-1,height:t==="horizontal"?a.height-1:r}}function NJ(t){var e=t.cx,a=t.cy,r=t.radius,s=t.startAngle,l=t.endAngle,h=wo(e,a,r,s),n=wo(e,a,r,l);return{points:[h,n],cx:e,cy:a,radius:r,startAngle:s,endAngle:l}}function Xbe(t,e,a){var r,s,l,h;if(t==="horizontal")r=e.x,l=r,s=a.top,h=a.top+a.height;else if(t==="vertical")s=e.y,h=s,r=a.left,l=a.left+a.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var n=e.cx,w=e.cy,T=e.innerRadius,P=e.outerRadius,z=e.angle,k=wo(n,w,T,z),U=wo(n,w,P,z);r=k.x,s=k.y,l=U.x,h=U.y}else return NJ(e);return[{x:r,y:s},{x:l,y:h}]}function cT(t){"@babel/helpers - typeof";return cT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cT(t)}function Q9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function PC(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Q9(Object(a),!0).forEach(function(r){Jbe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Q9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Jbe(t,e,a){return e=Qbe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Qbe(t){var e=exe(t,"string");return cT(e)=="symbol"?e:e+""}function exe(t,e){if(cT(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(cT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function txe(t){var e,a,r=t.element,s=t.tooltipEventType,l=t.isActive,h=t.activeCoordinate,n=t.activePayload,w=t.offset,T=t.activeTooltipIndex,P=t.tooltipAxisBandSize,z=t.layout,k=t.chartName,U=(e=r.props.cursor)!==null&&e!==void 0?e:(a=r.type.defaultProps)===null||a===void 0?void 0:a.cursor;if(!r||!U||!l||!h||k!=="ScatterChart"&&s!=="axis")return null;var Z,H=Lg;if(k==="ScatterChart")Z=h,H=$we;else if(k==="BarChart")Z=Ybe(z,h,w,P),H=O4;else if(z==="radial"){var q=NJ(h),J=q.cx,re=q.cy,ce=q.radius,ye=q.startAngle,he=q.endAngle;Z={cx:J,cy:re,startAngle:ye,endAngle:he,innerRadius:ce,outerRadius:ce},H=SX}else Z={points:Xbe(z,h,w)},H=Lg;var _e=PC(PC(PC(PC({stroke:"#ccc",pointerEvents:"none"},w),Z),ln(U,!1)),{},{payload:n,payloadIndex:T,className:ci("recharts-tooltip-cursor",U.className)});return nt.isValidElement(U)?nt.cloneElement(U,_e):nt.createElement(H,_e)}var axe=["item"],rxe=["children","className","width","height","style","compact","title","desc"];function Bv(t){"@babel/helpers - typeof";return Bv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bv(t)}function G_(){return G_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},G_.apply(this,arguments)}function eZ(t,e){return sxe(t)||ixe(t,e)||zJ(t,e)||nxe()}function nxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ixe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,s,l,h,n=[],w=!0,T=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(w=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);w=!0);}catch(P){T=!0,s=P}finally{try{if(!w&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(T)throw s}}return n}}function sxe(t){if(Array.isArray(t))return t}function tZ(t,e){if(t==null)return{};var a=oxe(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function oxe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function lxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uxe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,OJ(r.key),r)}}function cxe(t,e,a){return e&&uxe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function dxe(t,e,a){return e=Ix(e),hxe(t,VJ()?Reflect.construct(e,a||[],Ix(t).constructor):e.apply(t,a))}function hxe(t,e){if(e&&(Bv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fxe(t)}function fxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function VJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VJ=function(){return!!t})()}function Ix(t){return Ix=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Ix(t)}function pxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WM(t,e)}function WM(t,e){return WM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},WM(t,e)}function Gv(t){return gxe(t)||yxe(t)||zJ(t)||mxe()}function mxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zJ(t,e){if(t){if(typeof t=="string")return YM(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return YM(t,e)}}function yxe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function gxe(t){if(Array.isArray(t))return YM(t)}function YM(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function aZ(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function Ha(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?aZ(Object(a),!0).forEach(function(r){Gn(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):aZ(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Gn(t,e,a){return e=OJ(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function OJ(t){var e=Axe(t,"string");return Bv(e)=="symbol"?e:e+""}function Axe(t,e){if(Bv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Bv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _xe={xAxis:["bottom","top"],yAxis:["left","right"]},vxe={width:"100%",height:"100%"},DJ={x:0,y:0};function EC(t){return t}var wxe=function(e,a){return a==="horizontal"?e.x:a==="vertical"?e.y:a==="centric"?e.angle:e.radius},Rxe=function(e,a,r,s){var l=a.find(function(P){return P&&P.index===r});if(l){if(e==="horizontal")return{x:l.coordinate,y:s.y};if(e==="vertical")return{x:s.x,y:l.coordinate};if(e==="centric"){var h=l.coordinate,n=s.radius;return Ha(Ha(Ha({},s),wo(s.cx,s.cy,n,h)),{},{angle:h,radius:n})}var w=l.coordinate,T=s.angle;return Ha(Ha(Ha({},s),wo(s.cx,s.cy,w,T)),{},{angle:T,radius:w})}return DJ},fP=function(e,a){var r=a.graphicalItems,s=a.dataStartIndex,l=a.dataEndIndex,h=(r??[]).reduce(function(n,w){var T=w.props.data;return T&&T.length?[].concat(Gv(n),Gv(T)):n},[]);return h.length>0?h:e&&e.length&&yr(s)&&yr(l)?e.slice(s,l+1):[]};function MJ(t){return t==="number"?[0,"auto"]:void 0}var XM=function(e,a,r,s){var l=e.graphicalItems,h=e.tooltipAxis,n=fP(a,e);return r<0||!l||!l.length||r>=n.length?null:l.reduce(function(w,T){var P,z=(P=T.props.data)!==null&&P!==void 0?P:a;z&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(z=z.slice(e.dataStartIndex,e.dataEndIndex+1));var k;if(h.dataKey&&!h.allowDuplicatedCategory){var U=z===void 0?n:z;k=Ib(U,h.dataKey,s)}else k=z&&z[r]||n[r];return k?[].concat(Gv(w),[AX(T,k)]):w},[])},rZ=function(e,a,r,s){var l=s||{x:e.chartX,y:e.chartY},h=wxe(l,r),n=e.orderedTooltipTicks,w=e.tooltipAxis,T=e.tooltipTicks,P=A_e(h,n,T,w);if(P>=0&&T){var z=T[P]&&T[P].value,k=XM(e,a,P,z),U=Rxe(r,n,P,l);return{activeTooltipIndex:P,activeLabel:z,activePayload:k,activeCoordinate:U}}return null},Txe=function(e,a){var r=a.axes,s=a.graphicalItems,l=a.axisType,h=a.axisIdKey,n=a.stackGroups,w=a.dataStartIndex,T=a.dataEndIndex,P=e.layout,z=e.children,k=e.stackOffset,U=hX(P,l);return r.reduce(function(Z,H){var q,J=H.type.defaultProps!==void 0?Ha(Ha({},H.type.defaultProps),H.props):H.props,re=J.type,ce=J.dataKey,ye=J.allowDataOverflow,he=J.allowDuplicatedCategory,_e=J.scale,me=J.ticks,Re=J.includeHidden,be=J[h];if(Z[be])return Z;var De=fP(e.data,{graphicalItems:s.filter(function(Ce){var Se,$e=h in Ce.props?Ce.props[h]:(Se=Ce.type.defaultProps)===null||Se===void 0?void 0:Se[h];return $e===be}),dataStartIndex:w,dataEndIndex:T}),ie=De.length,ge,Me,ze;Wbe(J.domain,ye,re)&&(ge=lM(J.domain,null,ye),U&&(re==="number"||_e!=="auto")&&(ze=aR(De,ce,"category")));var Le=MJ(re);if(!ge||ge.length===0){var Ie,Ze=(Ie=J.domain)!==null&&Ie!==void 0?Ie:Le;if(ce){if(ge=aR(De,ce,re),re==="category"&&U){var ke=hhe(ge);he&&ke?(Me=ge,ge=vx(0,ie)):he||(ge=Q7(Ze,ge,H).reduce(function(Ce,Se){return Ce.indexOf(Se)>=0?Ce:[].concat(Gv(Ce),[Se])},[]))}else if(re==="category")he?ge=ge.filter(function(Ce){return Ce!==""&&!Un(Ce)}):ge=Q7(Ze,ge,H).reduce(function(Ce,Se){return Ce.indexOf(Se)>=0||Se===""||Un(Se)?Ce:[].concat(Gv(Ce),[Se])},[]);else if(re==="number"){var tt=T_e(De,s.filter(function(Ce){var Se,$e,ht=h in Ce.props?Ce.props[h]:(Se=Ce.type.defaultProps)===null||Se===void 0?void 0:Se[h],ft="hide"in Ce.props?Ce.props.hide:($e=Ce.type.defaultProps)===null||$e===void 0?void 0:$e.hide;return ht===be&&(Re||!ft)}),ce,l,P);tt&&(ge=tt)}U&&(re==="number"||_e!=="auto")&&(ze=aR(De,ce,"category"))}else U?ge=vx(0,ie):n&&n[be]&&n[be].hasStack&&re==="number"?ge=k==="expand"?[0,1]:gX(n[be].stackGroups,w,T):ge=dX(De,s.filter(function(Ce){var Se=h in Ce.props?Ce.props[h]:Ce.type.defaultProps[h],$e="hide"in Ce.props?Ce.props.hide:Ce.type.defaultProps.hide;return Se===be&&(Re||!$e)}),re,P,!0);if(re==="number")ge=KM(z,ge,be,l,me),Ze&&(ge=lM(Ze,ge,ye));else if(re==="category"&&Ze){var Ue=Ze,He=ge.every(function(Ce){return Ue.indexOf(Ce)>=0});He&&(ge=Ue)}}return Ha(Ha({},Z),{},Gn({},be,Ha(Ha({},J),{},{axisType:l,domain:ge,categoricalDomain:ze,duplicateDomain:Me,originalDomain:(q=J.domain)!==null&&q!==void 0?q:Le,isCategorical:U,layout:P})))},{})},Sxe=function(e,a){var r=a.graphicalItems,s=a.Axis,l=a.axisType,h=a.axisIdKey,n=a.stackGroups,w=a.dataStartIndex,T=a.dataEndIndex,P=e.layout,z=e.children,k=fP(e.data,{graphicalItems:r,dataStartIndex:w,dataEndIndex:T}),U=k.length,Z=hX(P,l),H=-1;return r.reduce(function(q,J){var re=J.type.defaultProps!==void 0?Ha(Ha({},J.type.defaultProps),J.props):J.props,ce=re[h],ye=MJ("number");if(!q[ce]){H++;var he;return Z?he=vx(0,U):n&&n[ce]&&n[ce].hasStack?(he=gX(n[ce].stackGroups,w,T),he=KM(z,he,ce,l)):(he=lM(ye,dX(k,r.filter(function(_e){var me,Re,be=h in _e.props?_e.props[h]:(me=_e.type.defaultProps)===null||me===void 0?void 0:me[h],De="hide"in _e.props?_e.props.hide:(Re=_e.type.defaultProps)===null||Re===void 0?void 0:Re.hide;return be===ce&&!De}),"number",P),s.defaultProps.allowDataOverflow),he=KM(z,he,ce,l)),Ha(Ha({},q),{},Gn({},ce,Ha(Ha({axisType:l},s.defaultProps),{},{hide:!0,orientation:hf(_xe,"".concat(l,".").concat(H%2),null),domain:he,originalDomain:ye,isCategorical:Z,layout:P})))}return q},{})},Cxe=function(e,a){var r=a.axisType,s=r===void 0?"xAxis":r,l=a.AxisComp,h=a.graphicalItems,n=a.stackGroups,w=a.dataStartIndex,T=a.dataEndIndex,P=e.children,z="".concat(s,"Id"),k=nh(P,l),U={};return k&&k.length?U=Txe(e,{axes:k,graphicalItems:h,axisType:s,axisIdKey:z,stackGroups:n,dataStartIndex:w,dataEndIndex:T}):h&&h.length&&(U=Sxe(e,{Axis:l,graphicalItems:h,axisType:s,axisIdKey:z,stackGroups:n,dataStartIndex:w,dataEndIndex:T})),U},bxe=function(e){var a=bg(e),r=yy(a,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:s4(r,function(s){return s.coordinate}),tooltipAxis:a,tooltipAxisBandSize:ox(a,r)}},nZ=function(e){var a=e.children,r=e.defaultShowTooltip,s=rf(a,Ev),l=0,h=0;return e.data&&e.data.length!==0&&(h=e.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(l=s.props.startIndex),s.props.endIndex>=0&&(h=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:l,dataEndIndex:h,activeTooltipIndex:-1,isTooltipActive:!!r}},xxe=function(e){return!e||!e.length?!1:e.some(function(a){var r=_y(a&&a.type);return r&&r.indexOf("Bar")>=0})},iZ=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Pxe=function(e,a){var r=e.props,s=e.graphicalItems,l=e.xAxisMap,h=l===void 0?{}:l,n=e.yAxisMap,w=n===void 0?{}:n,T=r.width,P=r.height,z=r.children,k=r.margin||{},U=rf(z,Ev),Z=rf(z,nf),H=Object.keys(w).reduce(function(he,_e){var me=w[_e],Re=me.orientation;return!me.mirror&&!me.hide?Ha(Ha({},he),{},Gn({},Re,he[Re]+me.width)):he},{left:k.left||0,right:k.right||0}),q=Object.keys(h).reduce(function(he,_e){var me=h[_e],Re=me.orientation;return!me.mirror&&!me.hide?Ha(Ha({},he),{},Gn({},Re,hf(he,"".concat(Re))+me.height)):he},{top:k.top||0,bottom:k.bottom||0}),J=Ha(Ha({},q),H),re=J.bottom;U&&(J.bottom+=U.props.height||Ev.defaultProps.height),Z&&a&&(J=w_e(J,s,r,a));var ce=T-J.left-J.right,ye=P-J.top-J.bottom;return Ha(Ha({brushBottom:re},J),{},{width:Math.max(ce,0),height:Math.max(ye,0)})},Exe=function(e,a){if(a==="xAxis")return e[a].width;if(a==="yAxis")return e[a].height},HT=function(e){var a=e.chartName,r=e.GraphicalChild,s=e.defaultTooltipEventType,l=s===void 0?"axis":s,h=e.validateTooltipEventTypes,n=h===void 0?["axis"]:h,w=e.axisComponents,T=e.legendContent,P=e.formatAxisMap,z=e.defaultProps,k=function(J,re){var ce=re.graphicalItems,ye=re.stackGroups,he=re.offset,_e=re.updateId,me=re.dataStartIndex,Re=re.dataEndIndex,be=J.barSize,De=J.layout,ie=J.barGap,ge=J.barCategoryGap,Me=J.maxBarSize,ze=iZ(De),Le=ze.numericAxisName,Ie=ze.cateAxisName,Ze=xxe(ce),ke=[];return ce.forEach(function(tt,Ue){var He=fP(J.data,{graphicalItems:[tt],dataStartIndex:me,dataEndIndex:Re}),Ce=tt.type.defaultProps!==void 0?Ha(Ha({},tt.type.defaultProps),tt.props):tt.props,Se=Ce.dataKey,$e=Ce.maxBarSize,ht=Ce["".concat(Le,"Id")],ft=Ce["".concat(Ie,"Id")],ut={},Rt=w.reduce(function(dr,cr){var Pr=re["".concat(cr.axisType,"Map")],ka=Ce["".concat(cr.axisType,"Id")];Pr&&Pr[ka]||cr.axisType==="zAxis"||w0();var jr=Pr[ka];return Ha(Ha({},dr),{},Gn(Gn({},cr.axisType,jr),"".concat(cr.axisType,"Ticks"),yy(jr)))},ut),We=Rt[Ie],Ae=Rt["".concat(Ie,"Ticks")],qt=ye&&ye[ht]&&ye[ht].hasStack&&z_e(tt,ye[ht].stackGroups),Gt=_y(tt.type).indexOf("Bar")>=0,Aa=ox(We,Ae),It=[],ta=Ze&&__e({barSize:be,stackGroups:ye,totalSize:Exe(Rt,Ie)});if(Gt){var vt,or,Na=Un($e)?Me:$e,za=(vt=(or=ox(We,Ae,!0))!==null&&or!==void 0?or:Na)!==null&&vt!==void 0?vt:0;It=v_e({barGap:ie,barCategoryGap:ge,bandSize:za!==Aa?za:Aa,sizeList:ta[ft],maxBarSize:Na}),za!==Aa&&(It=It.map(function(dr){return Ha(Ha({},dr),{},{position:Ha(Ha({},dr.position),{},{offset:dr.position.offset-za/2})})}))}var er=tt&&tt.type&&tt.type.getComposedData;er&&ke.push({props:Ha(Ha({},er(Ha(Ha({},Rt),{},{displayedData:He,props:J,dataKey:Se,item:tt,bandSize:Aa,barPosition:It,offset:he,stackedData:qt,layout:De,dataStartIndex:me,dataEndIndex:Re}))),{},Gn(Gn(Gn({key:tt.key||"item-".concat(Ue)},Le,Rt[Le]),Ie,Rt[Ie]),"animationId",_e)),childIndex:She(tt,J.children),item:tt})}),ke},U=function(J,re){var ce=J.props,ye=J.dataStartIndex,he=J.dataEndIndex,_e=J.updateId;if(!pB({props:ce}))return null;var me=ce.children,Re=ce.layout,be=ce.stackOffset,De=ce.data,ie=ce.reverseStackOrder,ge=iZ(Re),Me=ge.numericAxisName,ze=ge.cateAxisName,Le=nh(me,r),Ie=N_e(De,Le,"".concat(Me,"Id"),"".concat(ze,"Id"),be,ie),Ze=w.reduce(function(Ce,Se){var $e="".concat(Se.axisType,"Map");return Ha(Ha({},Ce),{},Gn({},$e,Cxe(ce,Ha(Ha({},Se),{},{graphicalItems:Le,stackGroups:Se.axisType===Me&&Ie,dataStartIndex:ye,dataEndIndex:he}))))},{}),ke=Pxe(Ha(Ha({},Ze),{},{props:ce,graphicalItems:Le}),re==null?void 0:re.legendBBox);Object.keys(Ze).forEach(function(Ce){Ze[Ce]=P(ce,Ze[Ce],ke,Ce.replace("Map",""),a)});var tt=Ze["".concat(ze,"Map")],Ue=bxe(tt),He=k(ce,Ha(Ha({},Ze),{},{dataStartIndex:ye,dataEndIndex:he,updateId:_e,graphicalItems:Le,stackGroups:Ie,offset:ke}));return Ha(Ha({formattedGraphicalItems:He,graphicalItems:Le,offset:ke,stackGroups:Ie},Ue),Ze)},Z=function(q){function J(re){var ce,ye,he;return lxe(this,J),he=dxe(this,J,[re]),Gn(he,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Gn(he,"accessibilityManager",new Kbe),Gn(he,"handleLegendBBoxUpdate",function(_e){if(_e){var me=he.state,Re=me.dataStartIndex,be=me.dataEndIndex,De=me.updateId;he.setState(Ha({legendBBox:_e},U({props:he.props,dataStartIndex:Re,dataEndIndex:be,updateId:De},Ha(Ha({},he.state),{},{legendBBox:_e}))))}}),Gn(he,"handleReceiveSyncEvent",function(_e,me,Re){if(he.props.syncId===_e){if(Re===he.eventEmitterSymbol&&typeof he.props.syncMethod!="function")return;he.applySyncEvent(me)}}),Gn(he,"handleBrushChange",function(_e){var me=_e.startIndex,Re=_e.endIndex;if(me!==he.state.dataStartIndex||Re!==he.state.dataEndIndex){var be=he.state.updateId;he.setState(function(){return Ha({dataStartIndex:me,dataEndIndex:Re},U({props:he.props,dataStartIndex:me,dataEndIndex:Re,updateId:be},he.state))}),he.triggerSyncEvent({dataStartIndex:me,dataEndIndex:Re})}}),Gn(he,"handleMouseEnter",function(_e){var me=he.getMouseInfo(_e);if(me){var Re=Ha(Ha({},me),{},{isTooltipActive:!0});he.setState(Re),he.triggerSyncEvent(Re);var be=he.props.onMouseEnter;Fn(be)&&be(Re,_e)}}),Gn(he,"triggeredAfterMouseMove",function(_e){var me=he.getMouseInfo(_e),Re=me?Ha(Ha({},me),{},{isTooltipActive:!0}):{isTooltipActive:!1};he.setState(Re),he.triggerSyncEvent(Re);var be=he.props.onMouseMove;Fn(be)&&be(Re,_e)}),Gn(he,"handleItemMouseEnter",function(_e){he.setState(function(){return{isTooltipActive:!0,activeItem:_e,activePayload:_e.tooltipPayload,activeCoordinate:_e.tooltipPosition||{x:_e.cx,y:_e.cy}}})}),Gn(he,"handleItemMouseLeave",function(){he.setState(function(){return{isTooltipActive:!1}})}),Gn(he,"handleMouseMove",function(_e){_e.persist(),he.throttleTriggeredAfterMouseMove(_e)}),Gn(he,"handleMouseLeave",function(_e){he.throttleTriggeredAfterMouseMove.cancel();var me={isTooltipActive:!1};he.setState(me),he.triggerSyncEvent(me);var Re=he.props.onMouseLeave;Fn(Re)&&Re(me,_e)}),Gn(he,"handleOuterEvent",function(_e){var me=The(_e),Re=hf(he.props,"".concat(me));if(me&&Fn(Re)){var be,De;/.*touch.*/i.test(me)?De=he.getMouseInfo(_e.changedTouches[0]):De=he.getMouseInfo(_e),Re((be=De)!==null&&be!==void 0?be:{},_e)}}),Gn(he,"handleClick",function(_e){var me=he.getMouseInfo(_e);if(me){var Re=Ha(Ha({},me),{},{isTooltipActive:!0});he.setState(Re),he.triggerSyncEvent(Re);var be=he.props.onClick;Fn(be)&&be(Re,_e)}}),Gn(he,"handleMouseDown",function(_e){var me=he.props.onMouseDown;if(Fn(me)){var Re=he.getMouseInfo(_e);me(Re,_e)}}),Gn(he,"handleMouseUp",function(_e){var me=he.props.onMouseUp;if(Fn(me)){var Re=he.getMouseInfo(_e);me(Re,_e)}}),Gn(he,"handleTouchMove",function(_e){_e.changedTouches!=null&&_e.changedTouches.length>0&&he.throttleTriggeredAfterMouseMove(_e.changedTouches[0])}),Gn(he,"handleTouchStart",function(_e){_e.changedTouches!=null&&_e.changedTouches.length>0&&he.handleMouseDown(_e.changedTouches[0])}),Gn(he,"handleTouchEnd",function(_e){_e.changedTouches!=null&&_e.changedTouches.length>0&&he.handleMouseUp(_e.changedTouches[0])}),Gn(he,"handleDoubleClick",function(_e){var me=he.props.onDoubleClick;if(Fn(me)){var Re=he.getMouseInfo(_e);me(Re,_e)}}),Gn(he,"handleContextMenu",function(_e){var me=he.props.onContextMenu;if(Fn(me)){var Re=he.getMouseInfo(_e);me(Re,_e)}}),Gn(he,"triggerSyncEvent",function(_e){he.props.syncId!==void 0&&a5.emit(r5,he.props.syncId,_e,he.eventEmitterSymbol)}),Gn(he,"applySyncEvent",function(_e){var me=he.props,Re=me.layout,be=me.syncMethod,De=he.state.updateId,ie=_e.dataStartIndex,ge=_e.dataEndIndex;if(_e.dataStartIndex!==void 0||_e.dataEndIndex!==void 0)he.setState(Ha({dataStartIndex:ie,dataEndIndex:ge},U({props:he.props,dataStartIndex:ie,dataEndIndex:ge,updateId:De},he.state)));else if(_e.activeTooltipIndex!==void 0){var Me=_e.chartX,ze=_e.chartY,Le=_e.activeTooltipIndex,Ie=he.state,Ze=Ie.offset,ke=Ie.tooltipTicks;if(!Ze)return;if(typeof be=="function")Le=be(ke,_e);else if(be==="value"){Le=-1;for(var tt=0;tt<ke.length;tt++)if(ke[tt].value===_e.activeLabel){Le=tt;break}}var Ue=Ha(Ha({},Ze),{},{x:Ze.left,y:Ze.top}),He=Math.min(Me,Ue.x+Ue.width),Ce=Math.min(ze,Ue.y+Ue.height),Se=ke[Le]&&ke[Le].value,$e=XM(he.state,he.props.data,Le),ht=ke[Le]?{x:Re==="horizontal"?ke[Le].coordinate:He,y:Re==="horizontal"?Ce:ke[Le].coordinate}:DJ;he.setState(Ha(Ha({},_e),{},{activeLabel:Se,activeCoordinate:ht,activePayload:$e,activeTooltipIndex:Le}))}else he.setState(_e)}),Gn(he,"renderCursor",function(_e){var me,Re=he.state,be=Re.isTooltipActive,De=Re.activeCoordinate,ie=Re.activePayload,ge=Re.offset,Me=Re.activeTooltipIndex,ze=Re.tooltipAxisBandSize,Le=he.getTooltipEventType(),Ie=(me=_e.props.active)!==null&&me!==void 0?me:be,Ze=he.props.layout,ke=_e.key||"_recharts-cursor";return Vt.createElement(txe,{key:ke,activeCoordinate:De,activePayload:ie,activeTooltipIndex:Me,chartName:a,element:_e,isActive:Ie,layout:Ze,offset:ge,tooltipAxisBandSize:ze,tooltipEventType:Le})}),Gn(he,"renderPolarAxis",function(_e,me,Re){var be=hf(_e,"type.axisType"),De=hf(he.state,"".concat(be,"Map")),ie=_e.type.defaultProps,ge=ie!==void 0?Ha(Ha({},ie),_e.props):_e.props,Me=De&&De[ge["".concat(be,"Id")]];return nt.cloneElement(_e,Ha(Ha({},Me),{},{className:ci(be,Me.className),key:_e.key||"".concat(me,"-").concat(Re),ticks:yy(Me,!0)}))}),Gn(he,"renderPolarGrid",function(_e){var me=_e.props,Re=me.radialLines,be=me.polarAngles,De=me.polarRadius,ie=he.state,ge=ie.radiusAxisMap,Me=ie.angleAxisMap,ze=bg(ge),Le=bg(Me),Ie=Le.cx,Ze=Le.cy,ke=Le.innerRadius,tt=Le.outerRadius;return nt.cloneElement(_e,{polarAngles:Array.isArray(be)?be:yy(Le,!0).map(function(Ue){return Ue.coordinate}),polarRadius:Array.isArray(De)?De:yy(ze,!0).map(function(Ue){return Ue.coordinate}),cx:Ie,cy:Ze,innerRadius:ke,outerRadius:tt,key:_e.key||"polar-grid",radialLines:Re})}),Gn(he,"renderLegend",function(){var _e=he.state.formattedGraphicalItems,me=he.props,Re=me.children,be=me.width,De=me.height,ie=he.props.margin||{},ge=be-(ie.left||0)-(ie.right||0),Me=uX({children:Re,formattedGraphicalItems:_e,legendWidth:ge,legendContent:T});if(!Me)return null;var ze=Me.item,Le=tZ(Me,axe);return nt.cloneElement(ze,Ha(Ha({},Le),{},{chartWidth:be,chartHeight:De,margin:ie,onBBoxUpdate:he.handleLegendBBoxUpdate}))}),Gn(he,"renderTooltip",function(){var _e,me=he.props,Re=me.children,be=me.accessibilityLayer,De=rf(Re,cu);if(!De)return null;var ie=he.state,ge=ie.isTooltipActive,Me=ie.activeCoordinate,ze=ie.activePayload,Le=ie.activeLabel,Ie=ie.offset,Ze=(_e=De.props.active)!==null&&_e!==void 0?_e:ge;return nt.cloneElement(De,{viewBox:Ha(Ha({},Ie),{},{x:Ie.left,y:Ie.top}),active:Ze,label:Le,payload:Ze?ze:[],coordinate:Me,accessibilityLayer:be})}),Gn(he,"renderBrush",function(_e){var me=he.props,Re=me.margin,be=me.data,De=he.state,ie=De.offset,ge=De.dataStartIndex,Me=De.dataEndIndex,ze=De.updateId;return nt.cloneElement(_e,{key:_e.key||"_recharts-brush",onChange:SC(he.handleBrushChange,_e.props.onChange),data:be,x:yr(_e.props.x)?_e.props.x:ie.left,y:yr(_e.props.y)?_e.props.y:ie.top+ie.height+ie.brushBottom-(Re.bottom||0),width:yr(_e.props.width)?_e.props.width:ie.width,startIndex:ge,endIndex:Me,updateId:"brush-".concat(ze)})}),Gn(he,"renderReferenceElement",function(_e,me,Re){if(!_e)return null;var be=he,De=be.clipPathId,ie=he.state,ge=ie.xAxisMap,Me=ie.yAxisMap,ze=ie.offset,Le=_e.type.defaultProps||{},Ie=_e.props,Ze=Ie.xAxisId,ke=Ze===void 0?Le.xAxisId:Ze,tt=Ie.yAxisId,Ue=tt===void 0?Le.yAxisId:tt;return nt.cloneElement(_e,{key:_e.key||"".concat(me,"-").concat(Re),xAxis:ge[ke],yAxis:Me[Ue],viewBox:{x:ze.left,y:ze.top,width:ze.width,height:ze.height},clipPathId:De})}),Gn(he,"renderActivePoints",function(_e){var me=_e.item,Re=_e.activePoint,be=_e.basePoint,De=_e.childIndex,ie=_e.isRange,ge=[],Me=me.props.key,ze=me.item.type.defaultProps!==void 0?Ha(Ha({},me.item.type.defaultProps),me.item.props):me.item.props,Le=ze.activeDot,Ie=ze.dataKey,Ze=Ha(Ha({index:De,dataKey:Ie,cx:Re.x,cy:Re.y,r:4,fill:z4(me.item),strokeWidth:2,stroke:"#fff",payload:Re.payload,value:Re.value},ln(Le,!1)),Lb(Le));return ge.push(J.renderActiveDot(Le,Ze,"".concat(Me,"-activePoint-").concat(De))),be?ge.push(J.renderActiveDot(Le,Ha(Ha({},Ze),{},{cx:be.x,cy:be.y}),"".concat(Me,"-basePoint-").concat(De))):ie&&ge.push(null),ge}),Gn(he,"renderGraphicChild",function(_e,me,Re){var be=he.filterFormatItem(_e,me,Re);if(!be)return null;var De=he.getTooltipEventType(),ie=he.state,ge=ie.isTooltipActive,Me=ie.tooltipAxis,ze=ie.activeTooltipIndex,Le=ie.activeLabel,Ie=he.props.children,Ze=rf(Ie,cu),ke=be.props,tt=ke.points,Ue=ke.isRange,He=ke.baseLine,Ce=be.item.type.defaultProps!==void 0?Ha(Ha({},be.item.type.defaultProps),be.item.props):be.item.props,Se=Ce.activeDot,$e=Ce.hide,ht=Ce.activeBar,ft=Ce.activeShape,ut=!!(!$e&&ge&&Ze&&(Se||ht||ft)),Rt={};De!=="axis"&&Ze&&Ze.props.trigger==="click"?Rt={onClick:SC(he.handleItemMouseEnter,_e.props.onClick)}:De!=="axis"&&(Rt={onMouseLeave:SC(he.handleItemMouseLeave,_e.props.onMouseLeave),onMouseEnter:SC(he.handleItemMouseEnter,_e.props.onMouseEnter)});var We=nt.cloneElement(_e,Ha(Ha({},be.props),Rt));function Ae(cr){return typeof Me.dataKey=="function"?Me.dataKey(cr.payload):null}if(ut)if(ze>=0){var qt,Gt;if(Me.dataKey&&!Me.allowDuplicatedCategory){var Aa=typeof Me.dataKey=="function"?Ae:"payload.".concat(Me.dataKey.toString());qt=Ib(tt,Aa,Le),Gt=Ue&&He&&Ib(He,Aa,Le)}else qt=tt==null?void 0:tt[ze],Gt=Ue&&He&&He[ze];if(ft||ht){var It=_e.props.activeIndex!==void 0?_e.props.activeIndex:ze;return[nt.cloneElement(_e,Ha(Ha(Ha({},be.props),Rt),{},{activeIndex:It})),null,null]}if(!Un(qt))return[We].concat(Gv(he.renderActivePoints({item:be,activePoint:qt,basePoint:Gt,childIndex:ze,isRange:Ue})))}else{var ta,vt=(ta=he.getItemByXY(he.state.activeCoordinate))!==null&&ta!==void 0?ta:{graphicalItem:We},or=vt.graphicalItem,Na=or.item,za=Na===void 0?_e:Na,er=or.childIndex,dr=Ha(Ha(Ha({},be.props),Rt),{},{activeIndex:er});return[nt.cloneElement(za,dr),null,null]}return Ue?[We,null,null]:[We,null]}),Gn(he,"renderCustomized",function(_e,me,Re){return nt.cloneElement(_e,Ha(Ha({key:"recharts-customized-".concat(Re)},he.props),he.state))}),Gn(he,"renderMap",{CartesianGrid:{handler:EC,once:!0},ReferenceArea:{handler:he.renderReferenceElement},ReferenceLine:{handler:EC},ReferenceDot:{handler:he.renderReferenceElement},XAxis:{handler:EC},YAxis:{handler:EC},Brush:{handler:he.renderBrush,once:!0},Bar:{handler:he.renderGraphicChild},Line:{handler:he.renderGraphicChild},Area:{handler:he.renderGraphicChild},Radar:{handler:he.renderGraphicChild},RadialBar:{handler:he.renderGraphicChild},Scatter:{handler:he.renderGraphicChild},Pie:{handler:he.renderGraphicChild},Funnel:{handler:he.renderGraphicChild},Tooltip:{handler:he.renderCursor,once:!0},PolarGrid:{handler:he.renderPolarGrid,once:!0},PolarAngleAxis:{handler:he.renderPolarAxis},PolarRadiusAxis:{handler:he.renderPolarAxis},Customized:{handler:he.renderCustomized}}),he.clipPathId="".concat((ce=re.id)!==null&&ce!==void 0?ce:Jg("recharts"),"-clip"),he.throttleTriggeredAfterMouseMove=lY(he.triggeredAfterMouseMove,(ye=re.throttleDelay)!==null&&ye!==void 0?ye:1e3/60),he.state={},he}return pxe(J,q),cxe(J,[{key:"componentDidMount",value:function(){var ce,ye;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(ce=this.props.margin.left)!==null&&ce!==void 0?ce:0,top:(ye=this.props.margin.top)!==null&&ye!==void 0?ye:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var ce=this.props,ye=ce.children,he=ce.data,_e=ce.height,me=ce.layout,Re=rf(ye,cu);if(Re){var be=Re.props.defaultIndex;if(!(typeof be!="number"||be<0||be>this.state.tooltipTicks.length-1)){var De=this.state.tooltipTicks[be]&&this.state.tooltipTicks[be].value,ie=XM(this.state,he,be,De),ge=this.state.tooltipTicks[be].coordinate,Me=(this.state.offset.top+_e)/2,ze=me==="horizontal",Le=ze?{x:ge,y:Me}:{y:ge,x:Me},Ie=this.state.formattedGraphicalItems.find(function(ke){var tt=ke.item;return tt.type.name==="Scatter"});Ie&&(Le=Ha(Ha({},Le),Ie.props.points[be].tooltipPosition),ie=Ie.props.points[be].tooltipPayload);var Ze={activeTooltipIndex:be,isTooltipActive:!0,activeLabel:De,activePayload:ie,activeCoordinate:Le};this.setState(Ze),this.renderCursor(Re),this.accessibilityManager.setIndex(be)}}}},{key:"getSnapshotBeforeUpdate",value:function(ce,ye){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==ye.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==ce.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==ce.margin){var he,_e;this.accessibilityManager.setDetails({offset:{left:(he=this.props.margin.left)!==null&&he!==void 0?he:0,top:(_e=this.props.margin.top)!==null&&_e!==void 0?_e:0}})}return null}},{key:"componentDidUpdate",value:function(ce){ND([rf(ce.children,cu)],[rf(this.props.children,cu)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var ce=rf(this.props.children,cu);if(ce&&typeof ce.props.shared=="boolean"){var ye=ce.props.shared?"axis":"item";return n.indexOf(ye)>=0?ye:l}return l}},{key:"getMouseInfo",value:function(ce){if(!this.container)return null;var ye=this.container,he=ye.getBoundingClientRect(),_e=cye(he),me={chartX:Math.round(ce.pageX-_e.left),chartY:Math.round(ce.pageY-_e.top)},Re=he.width/ye.offsetWidth||1,be=this.inRange(me.chartX,me.chartY,Re);if(!be)return null;var De=this.state,ie=De.xAxisMap,ge=De.yAxisMap,Me=this.getTooltipEventType();if(Me!=="axis"&&ie&&ge){var ze=bg(ie).scale,Le=bg(ge).scale,Ie=ze&&ze.invert?ze.invert(me.chartX):null,Ze=Le&&Le.invert?Le.invert(me.chartY):null;return Ha(Ha({},me),{},{xValue:Ie,yValue:Ze})}var ke=rZ(this.state,this.props.data,this.props.layout,be);return ke?Ha(Ha({},me),ke):null}},{key:"inRange",value:function(ce,ye){var he=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,_e=this.props.layout,me=ce/he,Re=ye/he;if(_e==="horizontal"||_e==="vertical"){var be=this.state.offset,De=me>=be.left&&me<=be.left+be.width&&Re>=be.top&&Re<=be.top+be.height;return De?{x:me,y:Re}:null}var ie=this.state,ge=ie.angleAxisMap,Me=ie.radiusAxisMap;if(ge&&Me){var ze=bg(ge);return aj({x:me,y:Re},ze)}return null}},{key:"parseEventsOfWrapper",value:function(){var ce=this.props.children,ye=this.getTooltipEventType(),he=rf(ce,cu),_e={};he&&ye==="axis"&&(he.props.trigger==="click"?_e={onClick:this.handleClick}:_e={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var me=Lb(this.props,this.handleOuterEvent);return Ha(Ha({},me),_e)}},{key:"addListener",value:function(){a5.on(r5,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){a5.removeListener(r5,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(ce,ye,he){for(var _e=this.state.formattedGraphicalItems,me=0,Re=_e.length;me<Re;me++){var be=_e[me];if(be.item===ce||be.props.key===ce.key||ye===_y(be.item.type)&&he===be.childIndex)return be}return null}},{key:"renderClipPath",value:function(){var ce=this.clipPathId,ye=this.state.offset,he=ye.left,_e=ye.top,me=ye.height,Re=ye.width;return Vt.createElement("defs",null,Vt.createElement("clipPath",{id:ce},Vt.createElement("rect",{x:he,y:_e,height:me,width:Re})))}},{key:"getXScales",value:function(){var ce=this.state.xAxisMap;return ce?Object.entries(ce).reduce(function(ye,he){var _e=eZ(he,2),me=_e[0],Re=_e[1];return Ha(Ha({},ye),{},Gn({},me,Re.scale))},{}):null}},{key:"getYScales",value:function(){var ce=this.state.yAxisMap;return ce?Object.entries(ce).reduce(function(ye,he){var _e=eZ(he,2),me=_e[0],Re=_e[1];return Ha(Ha({},ye),{},Gn({},me,Re.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(ce){var ye;return(ye=this.state.xAxisMap)===null||ye===void 0||(ye=ye[ce])===null||ye===void 0?void 0:ye.scale}},{key:"getYScaleByAxisId",value:function(ce){var ye;return(ye=this.state.yAxisMap)===null||ye===void 0||(ye=ye[ce])===null||ye===void 0?void 0:ye.scale}},{key:"getItemByXY",value:function(ce){var ye=this.state,he=ye.formattedGraphicalItems,_e=ye.activeItem;if(he&&he.length)for(var me=0,Re=he.length;me<Re;me++){var be=he[me],De=be.props,ie=be.item,ge=ie.type.defaultProps!==void 0?Ha(Ha({},ie.type.defaultProps),ie.props):ie.props,Me=_y(ie.type);if(Me==="Bar"){var ze=(De.data||[]).find(function(ke){return xwe(ce,ke)});if(ze)return{graphicalItem:be,payload:ze}}else if(Me==="RadialBar"){var Le=(De.data||[]).find(function(ke){return aj(ce,ke)});if(Le)return{graphicalItem:be,payload:Le}}else if(rP(be,_e)||nP(be,_e)||nT(be,_e)){var Ie=XRe({graphicalItem:be,activeTooltipItem:_e,itemData:ge.data}),Ze=ge.activeIndex===void 0?Ie:ge.activeIndex;return{graphicalItem:Ha(Ha({},be),{},{childIndex:Ze}),payload:nT(be,_e)?ge.data[Ie]:be.props.data[Ie]}}}return null}},{key:"render",value:function(){var ce=this;if(!pB(this))return null;var ye=this.props,he=ye.children,_e=ye.className,me=ye.width,Re=ye.height,be=ye.style,De=ye.compact,ie=ye.title,ge=ye.desc,Me=tZ(ye,rxe),ze=ln(Me,!1);if(De)return Vt.createElement(V9,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Vt.createElement(zD,G_({},ze,{width:me,height:Re,title:ie,desc:ge}),this.renderClipPath(),yB(he,this.renderMap)));if(this.props.accessibilityLayer){var Le,Ie;ze.tabIndex=(Le=this.props.tabIndex)!==null&&Le!==void 0?Le:0,ze.role=(Ie=this.props.role)!==null&&Ie!==void 0?Ie:"application",ze.onKeyDown=function(ke){ce.accessibilityManager.keyboardEvent(ke)},ze.onFocus=function(){ce.accessibilityManager.focus()}}var Ze=this.parseEventsOfWrapper();return Vt.createElement(V9,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Vt.createElement("div",G_({className:ci("recharts-wrapper",_e),style:Ha({position:"relative",cursor:"default",width:me,height:Re},be)},Ze,{ref:function(tt){ce.container=tt}}),Vt.createElement(zD,G_({},ze,{width:me,height:Re,title:ie,desc:ge,style:vxe}),this.renderClipPath(),yB(he,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(nt.Component);Gn(Z,"displayName",a),Gn(Z,"defaultProps",Ha({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},z)),Gn(Z,"getDerivedStateFromProps",function(q,J){var re=q.dataKey,ce=q.data,ye=q.children,he=q.width,_e=q.height,me=q.layout,Re=q.stackOffset,be=q.margin,De=J.dataStartIndex,ie=J.dataEndIndex;if(J.updateId===void 0){var ge=nZ(q);return Ha(Ha(Ha({},ge),{},{updateId:0},U(Ha(Ha({props:q},ge),{},{updateId:0}),J)),{},{prevDataKey:re,prevData:ce,prevWidth:he,prevHeight:_e,prevLayout:me,prevStackOffset:Re,prevMargin:be,prevChildren:ye})}if(re!==J.prevDataKey||ce!==J.prevData||he!==J.prevWidth||_e!==J.prevHeight||me!==J.prevLayout||Re!==J.prevStackOffset||!X_(be,J.prevMargin)){var Me=nZ(q),ze={chartX:J.chartX,chartY:J.chartY,isTooltipActive:J.isTooltipActive},Le=Ha(Ha({},rZ(J,ce,me)),{},{updateId:J.updateId+1}),Ie=Ha(Ha(Ha({},Me),ze),Le);return Ha(Ha(Ha({},Ie),U(Ha({props:q},Ie),J)),{},{prevDataKey:re,prevData:ce,prevWidth:he,prevHeight:_e,prevLayout:me,prevStackOffset:Re,prevMargin:be,prevChildren:ye})}if(!ND(ye,J.prevChildren)){var Ze,ke,tt,Ue,He=rf(ye,Ev),Ce=He&&(Ze=(ke=He.props)===null||ke===void 0?void 0:ke.startIndex)!==null&&Ze!==void 0?Ze:De,Se=He&&(tt=(Ue=He.props)===null||Ue===void 0?void 0:Ue.endIndex)!==null&&tt!==void 0?tt:ie,$e=Ce!==De||Se!==ie,ht=!Un(ce),ft=ht&&!$e?J.updateId:J.updateId+1;return Ha(Ha({updateId:ft},U(Ha(Ha({props:q},J),{},{updateId:ft,dataStartIndex:Ce,dataEndIndex:Se}),J)),{},{prevChildren:ye,dataStartIndex:Ce,dataEndIndex:Se})}return null}),Gn(Z,"renderActiveDot",function(q,J,re){var ce;return nt.isValidElement(q)?ce=nt.cloneElement(q,J):Fn(q)?ce=q(J):ce=Vt.createElement(qT,J),Vt.createElement(fi,{className:"recharts-active-dot",key:re},ce)});var H=nt.forwardRef(function(J,re){return Vt.createElement(Z,G_({},J,{ref:re}))});return H.displayName=Z.displayName,H},Nxe=HT({chartName:"LineChart",GraphicalChild:D0,axisComponents:[{axisType:"xAxis",AxisComp:ud},{axisType:"yAxis",AxisComp:cd}],formatAxisMap:sP}),JM=HT({chartName:"BarChart",GraphicalChild:kp,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:ud},{axisType:"yAxis",AxisComp:cd}],formatAxisMap:sP}),Vxe=HT({chartName:"PieChart",GraphicalChild:Iy,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:aP},{axisType:"radiusAxis",AxisComp:eP}],formatAxisMap:G_e,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),Vw=HT({chartName:"AreaChart",GraphicalChild:of,axisComponents:[{axisType:"xAxis",AxisComp:ud},{axisType:"yAxis",AxisComp:cd}],formatAxisMap:sP}),zxe=HT({chartName:"ComposedChart",GraphicalChild:[D0,of,kp,hP],axisComponents:[{axisType:"xAxis",AxisComp:ud},{axisType:"yAxis",AxisComp:cd},{axisType:"zAxis",AxisComp:dP}],formatAxisMap:sP}),JC={exports:{}},Oxe=JC.exports,sZ;function Dxe(){return sZ||(sZ=1,function(t,e){(function(a,r){t.exports=r()})(Oxe,function(){var a=1e3,r=6e4,s=36e5,l="millisecond",h="second",n="minute",w="hour",T="day",P="week",z="month",k="quarter",U="year",Z="date",H="Invalid Date",q=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,J=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,re={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(ze){var Le=["th","st","nd","rd"],Ie=ze%100;return"["+ze+(Le[(Ie-20)%10]||Le[Ie]||Le[0])+"]"}},ce=function(ze,Le,Ie){var Ze=String(ze);return!Ze||Ze.length>=Le?ze:""+Array(Le+1-Ze.length).join(Ie)+ze},ye={s:ce,z:function(ze){var Le=-ze.utcOffset(),Ie=Math.abs(Le),Ze=Math.floor(Ie/60),ke=Ie%60;return(Le<=0?"+":"-")+ce(Ze,2,"0")+":"+ce(ke,2,"0")},m:function ze(Le,Ie){if(Le.date()<Ie.date())return-ze(Ie,Le);var Ze=12*(Ie.year()-Le.year())+(Ie.month()-Le.month()),ke=Le.clone().add(Ze,z),tt=Ie-ke<0,Ue=Le.clone().add(Ze+(tt?-1:1),z);return+(-(Ze+(Ie-ke)/(tt?ke-Ue:Ue-ke))||0)},a:function(ze){return ze<0?Math.ceil(ze)||0:Math.floor(ze)},p:function(ze){return{M:z,y:U,w:P,d:T,D:Z,h:w,m:n,s:h,ms:l,Q:k}[ze]||String(ze||"").toLowerCase().replace(/s$/,"")},u:function(ze){return ze===void 0}},he="en",_e={};_e[he]=re;var me="$isDayjsObject",Re=function(ze){return ze instanceof ge||!(!ze||!ze[me])},be=function ze(Le,Ie,Ze){var ke;if(!Le)return he;if(typeof Le=="string"){var tt=Le.toLowerCase();_e[tt]&&(ke=tt),Ie&&(_e[tt]=Ie,ke=tt);var Ue=Le.split("-");if(!ke&&Ue.length>1)return ze(Ue[0])}else{var He=Le.name;_e[He]=Le,ke=He}return!Ze&&ke&&(he=ke),ke||!Ze&&he},De=function(ze,Le){if(Re(ze))return ze.clone();var Ie=typeof Le=="object"?Le:{};return Ie.date=ze,Ie.args=arguments,new ge(Ie)},ie=ye;ie.l=be,ie.i=Re,ie.w=function(ze,Le){return De(ze,{locale:Le.$L,utc:Le.$u,x:Le.$x,$offset:Le.$offset})};var ge=function(){function ze(Ie){this.$L=be(Ie.locale,null,!0),this.parse(Ie),this.$x=this.$x||Ie.x||{},this[me]=!0}var Le=ze.prototype;return Le.parse=function(Ie){this.$d=function(Ze){var ke=Ze.date,tt=Ze.utc;if(ke===null)return new Date(NaN);if(ie.u(ke))return new Date;if(ke instanceof Date)return new Date(ke);if(typeof ke=="string"&&!/Z$/i.test(ke)){var Ue=ke.match(q);if(Ue){var He=Ue[2]-1||0,Ce=(Ue[7]||"0").substring(0,3);return tt?new Date(Date.UTC(Ue[1],He,Ue[3]||1,Ue[4]||0,Ue[5]||0,Ue[6]||0,Ce)):new Date(Ue[1],He,Ue[3]||1,Ue[4]||0,Ue[5]||0,Ue[6]||0,Ce)}}return new Date(ke)}(Ie),this.init()},Le.init=function(){var Ie=this.$d;this.$y=Ie.getFullYear(),this.$M=Ie.getMonth(),this.$D=Ie.getDate(),this.$W=Ie.getDay(),this.$H=Ie.getHours(),this.$m=Ie.getMinutes(),this.$s=Ie.getSeconds(),this.$ms=Ie.getMilliseconds()},Le.$utils=function(){return ie},Le.isValid=function(){return this.$d.toString()!==H},Le.isSame=function(Ie,Ze){var ke=De(Ie);return this.startOf(Ze)<=ke&&ke<=this.endOf(Ze)},Le.isAfter=function(Ie,Ze){return De(Ie)<this.startOf(Ze)},Le.isBefore=function(Ie,Ze){return this.endOf(Ze)<De(Ie)},Le.$g=function(Ie,Ze,ke){return ie.u(Ie)?this[Ze]:this.set(ke,Ie)},Le.unix=function(){return Math.floor(this.valueOf()/1e3)},Le.valueOf=function(){return this.$d.getTime()},Le.startOf=function(Ie,Ze){var ke=this,tt=!!ie.u(Ze)||Ze,Ue=ie.p(Ie),He=function(We,Ae){var qt=ie.w(ke.$u?Date.UTC(ke.$y,Ae,We):new Date(ke.$y,Ae,We),ke);return tt?qt:qt.endOf(T)},Ce=function(We,Ae){return ie.w(ke.toDate()[We].apply(ke.toDate("s"),(tt?[0,0,0,0]:[23,59,59,999]).slice(Ae)),ke)},Se=this.$W,$e=this.$M,ht=this.$D,ft="set"+(this.$u?"UTC":"");switch(Ue){case U:return tt?He(1,0):He(31,11);case z:return tt?He(1,$e):He(0,$e+1);case P:var ut=this.$locale().weekStart||0,Rt=(Se<ut?Se+7:Se)-ut;return He(tt?ht-Rt:ht+(6-Rt),$e);case T:case Z:return Ce(ft+"Hours",0);case w:return Ce(ft+"Minutes",1);case n:return Ce(ft+"Seconds",2);case h:return Ce(ft+"Milliseconds",3);default:return this.clone()}},Le.endOf=function(Ie){return this.startOf(Ie,!1)},Le.$set=function(Ie,Ze){var ke,tt=ie.p(Ie),Ue="set"+(this.$u?"UTC":""),He=(ke={},ke[T]=Ue+"Date",ke[Z]=Ue+"Date",ke[z]=Ue+"Month",ke[U]=Ue+"FullYear",ke[w]=Ue+"Hours",ke[n]=Ue+"Minutes",ke[h]=Ue+"Seconds",ke[l]=Ue+"Milliseconds",ke)[tt],Ce=tt===T?this.$D+(Ze-this.$W):Ze;if(tt===z||tt===U){var Se=this.clone().set(Z,1);Se.$d[He](Ce),Se.init(),this.$d=Se.set(Z,Math.min(this.$D,Se.daysInMonth())).$d}else He&&this.$d[He](Ce);return this.init(),this},Le.set=function(Ie,Ze){return this.clone().$set(Ie,Ze)},Le.get=function(Ie){return this[ie.p(Ie)]()},Le.add=function(Ie,Ze){var ke,tt=this;Ie=Number(Ie);var Ue=ie.p(Ze),He=function($e){var ht=De(tt);return ie.w(ht.date(ht.date()+Math.round($e*Ie)),tt)};if(Ue===z)return this.set(z,this.$M+Ie);if(Ue===U)return this.set(U,this.$y+Ie);if(Ue===T)return He(1);if(Ue===P)return He(7);var Ce=(ke={},ke[n]=r,ke[w]=s,ke[h]=a,ke)[Ue]||1,Se=this.$d.getTime()+Ie*Ce;return ie.w(Se,this)},Le.subtract=function(Ie,Ze){return this.add(-1*Ie,Ze)},Le.format=function(Ie){var Ze=this,ke=this.$locale();if(!this.isValid())return ke.invalidDate||H;var tt=Ie||"YYYY-MM-DDTHH:mm:ssZ",Ue=ie.z(this),He=this.$H,Ce=this.$m,Se=this.$M,$e=ke.weekdays,ht=ke.months,ft=ke.meridiem,ut=function(Ae,qt,Gt,Aa){return Ae&&(Ae[qt]||Ae(Ze,tt))||Gt[qt].slice(0,Aa)},Rt=function(Ae){return ie.s(He%12||12,Ae,"0")},We=ft||function(Ae,qt,Gt){var Aa=Ae<12?"AM":"PM";return Gt?Aa.toLowerCase():Aa};return tt.replace(J,function(Ae,qt){return qt||function(Gt){switch(Gt){case"YY":return String(Ze.$y).slice(-2);case"YYYY":return ie.s(Ze.$y,4,"0");case"M":return Se+1;case"MM":return ie.s(Se+1,2,"0");case"MMM":return ut(ke.monthsShort,Se,ht,3);case"MMMM":return ut(ht,Se);case"D":return Ze.$D;case"DD":return ie.s(Ze.$D,2,"0");case"d":return String(Ze.$W);case"dd":return ut(ke.weekdaysMin,Ze.$W,$e,2);case"ddd":return ut(ke.weekdaysShort,Ze.$W,$e,3);case"dddd":return $e[Ze.$W];case"H":return String(He);case"HH":return ie.s(He,2,"0");case"h":return Rt(1);case"hh":return Rt(2);case"a":return We(He,Ce,!0);case"A":return We(He,Ce,!1);case"m":return String(Ce);case"mm":return ie.s(Ce,2,"0");case"s":return String(Ze.$s);case"ss":return ie.s(Ze.$s,2,"0");case"SSS":return ie.s(Ze.$ms,3,"0");case"Z":return Ue}return null}(Ae)||Ue.replace(":","")})},Le.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},Le.diff=function(Ie,Ze,ke){var tt,Ue=this,He=ie.p(Ze),Ce=De(Ie),Se=(Ce.utcOffset()-this.utcOffset())*r,$e=this-Ce,ht=function(){return ie.m(Ue,Ce)};switch(He){case U:tt=ht()/12;break;case z:tt=ht();break;case k:tt=ht()/3;break;case P:tt=($e-Se)/6048e5;break;case T:tt=($e-Se)/864e5;break;case w:tt=$e/s;break;case n:tt=$e/r;break;case h:tt=$e/a;break;default:tt=$e}return ke?tt:ie.a(tt)},Le.daysInMonth=function(){return this.endOf(z).$D},Le.$locale=function(){return _e[this.$L]},Le.locale=function(Ie,Ze){if(!Ie)return this.$L;var ke=this.clone(),tt=be(Ie,Ze,!0);return tt&&(ke.$L=tt),ke},Le.clone=function(){return ie.w(this.$d,this)},Le.toDate=function(){return new Date(this.valueOf())},Le.toJSON=function(){return this.isValid()?this.toISOString():null},Le.toISOString=function(){return this.$d.toISOString()},Le.toString=function(){return this.$d.toUTCString()},ze}(),Me=ge.prototype;return De.prototype=Me,[["$ms",l],["$s",h],["$m",n],["$H",w],["$W",T],["$M",z],["$y",U],["$D",Z]].forEach(function(ze){Me[ze[1]]=function(Le){return this.$g(Le,ze[0],ze[1])}}),De.extend=function(ze,Le){return ze.$i||(ze(Le,ge,De),ze.$i=!0),De},De.locale=be,De.isDayjs=Re,De.unix=function(ze){return De(1e3*ze)},De.en=_e[he],De.Ls=_e,De.p={},De})}(JC)),JC.exports}var Mxe=Dxe();const Ui=Ji(Mxe);var QC={exports:{}},Ixe=QC.exports,oZ;function Lxe(){return oZ||(oZ=1,function(t,e){(function(a,r){t.exports=r()})(Ixe,function(){var a={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,s=/\d/,l=/\d\d/,h=/\d\d?/,n=/\d*[^-_:/,()\s\d]+/,w={},T=function(q){return(q=+q)+(q>68?1900:2e3)},P=function(q){return function(J){this[q]=+J}},z=[/[+-]\d\d:?(\d\d)?|Z/,function(q){(this.zone||(this.zone={})).offset=function(J){if(!J||J==="Z")return 0;var re=J.match(/([+-]|\d\d)/g),ce=60*re[1]+(+re[2]||0);return ce===0?0:re[0]==="+"?-ce:ce}(q)}],k=function(q){var J=w[q];return J&&(J.indexOf?J:J.s.concat(J.f))},U=function(q,J){var re,ce=w.meridiem;if(ce){for(var ye=1;ye<=24;ye+=1)if(q.indexOf(ce(ye,0,J))>-1){re=ye>12;break}}else re=q===(J?"pm":"PM");return re},Z={A:[n,function(q){this.afternoon=U(q,!1)}],a:[n,function(q){this.afternoon=U(q,!0)}],Q:[s,function(q){this.month=3*(q-1)+1}],S:[s,function(q){this.milliseconds=100*+q}],SS:[l,function(q){this.milliseconds=10*+q}],SSS:[/\d{3}/,function(q){this.milliseconds=+q}],s:[h,P("seconds")],ss:[h,P("seconds")],m:[h,P("minutes")],mm:[h,P("minutes")],H:[h,P("hours")],h:[h,P("hours")],HH:[h,P("hours")],hh:[h,P("hours")],D:[h,P("day")],DD:[l,P("day")],Do:[n,function(q){var J=w.ordinal,re=q.match(/\d+/);if(this.day=re[0],J)for(var ce=1;ce<=31;ce+=1)J(ce).replace(/\[|\]/g,"")===q&&(this.day=ce)}],w:[h,P("week")],ww:[l,P("week")],M:[h,P("month")],MM:[l,P("month")],MMM:[n,function(q){var J=k("months"),re=(k("monthsShort")||J.map(function(ce){return ce.slice(0,3)})).indexOf(q)+1;if(re<1)throw new Error;this.month=re%12||re}],MMMM:[n,function(q){var J=k("months").indexOf(q)+1;if(J<1)throw new Error;this.month=J%12||J}],Y:[/[+-]?\d+/,P("year")],YY:[l,function(q){this.year=T(q)}],YYYY:[/\d{4}/,P("year")],Z:z,ZZ:z};function H(q){var J,re;J=q,re=w&&w.formats;for(var ce=(q=J.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(De,ie,ge){var Me=ge&&ge.toUpperCase();return ie||re[ge]||a[ge]||re[Me].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(ze,Le,Ie){return Le||Ie.slice(1)})})).match(r),ye=ce.length,he=0;he<ye;he+=1){var _e=ce[he],me=Z[_e],Re=me&&me[0],be=me&&me[1];ce[he]=be?{regex:Re,parser:be}:_e.replace(/^\[|\]$/g,"")}return function(De){for(var ie={},ge=0,Me=0;ge<ye;ge+=1){var ze=ce[ge];if(typeof ze=="string")Me+=ze.length;else{var Le=ze.regex,Ie=ze.parser,Ze=De.slice(Me),ke=Le.exec(Ze)[0];Ie.call(ie,ke),De=De.replace(ke,"")}}return function(tt){var Ue=tt.afternoon;if(Ue!==void 0){var He=tt.hours;Ue?He<12&&(tt.hours+=12):He===12&&(tt.hours=0),delete tt.afternoon}}(ie),ie}}return function(q,J,re){re.p.customParseFormat=!0,q&&q.parseTwoDigitYear&&(T=q.parseTwoDigitYear);var ce=J.prototype,ye=ce.parse;ce.parse=function(he){var _e=he.date,me=he.utc,Re=he.args;this.$u=me;var be=Re[1];if(typeof be=="string"){var De=Re[2]===!0,ie=Re[3]===!0,ge=De||ie,Me=Re[2];ie&&(Me=Re[2]),w=this.$locale(),!De&&Me&&(w=re.Ls[Me]),this.$d=function(Ze,ke,tt,Ue){try{if(["x","X"].indexOf(ke)>-1)return new Date((ke==="X"?1e3:1)*Ze);var He=H(ke)(Ze),Ce=He.year,Se=He.month,$e=He.day,ht=He.hours,ft=He.minutes,ut=He.seconds,Rt=He.milliseconds,We=He.zone,Ae=He.week,qt=new Date,Gt=$e||(Ce||Se?1:qt.getDate()),Aa=Ce||qt.getFullYear(),It=0;Ce&&!Se||(It=Se>0?Se-1:qt.getMonth());var ta,vt=ht||0,or=ft||0,Na=ut||0,za=Rt||0;return We?new Date(Date.UTC(Aa,It,Gt,vt,or,Na,za+60*We.offset*1e3)):tt?new Date(Date.UTC(Aa,It,Gt,vt,or,Na,za)):(ta=new Date(Aa,It,Gt,vt,or,Na,za),Ae&&(ta=Ue(ta).week(Ae).toDate()),ta)}catch{return new Date("")}}(_e,be,me,re),this.init(),Me&&Me!==!0&&(this.$L=this.locale(Me).$L),ge&&_e!=this.format(be)&&(this.$d=new Date("")),w={}}else if(be instanceof Array)for(var ze=be.length,Le=1;Le<=ze;Le+=1){Re[1]=be[Le-1];var Ie=re.apply(this,Re);if(Ie.isValid()){this.$d=Ie.$d,this.$L=Ie.$L,this.init();break}Le===ze&&(this.$d=new Date(""))}else ye.call(this,he)}}})}(QC)),QC.exports}var Fxe=Lxe();const Uxe=Ji(Fxe);Ui.extend(Uxe);Zf.accessToken="pk.eyJ1IjoiY29jb2xlbW9uMTIiLCJhIjoiY204YTBoMnZpMHplbzJzcTR3dDFmOXc4NiJ9.NqqEHSBe8cn9Gy9knbUqew";const kxe=()=>{const[t,e]=nt.useState(""),[a,r]=nt.useState(0),[s,l]=nt.useState(0),[h,n]=nt.useState(!1),[w,T]=nt.useState(null),[P,z]=nt.useState([]),[k,U]=nt.useState({}),[Z,H]=nt.useState(0),[q,J]=nt.useState({totalDistance:0,totalDuration:0,totalCalories:0,totalCarbon:0,totalRevenue:0}),[re,ce]=nt.useState({today:0,weekly:0,monthly:0}),[ye,he]=nt.useState(Array(24).fill(0)),[_e,me]=nt.useState(0),[Re,be]=nt.useState({}),De=nt.useRef(null),ie=nt.useRef(null);nt.useRef(null);const ge=nt.useRef({}),Me=Se=>{let $e=Se.replace("UTC+","+").replace("UTC-","-");return $e=$e.replace(/([+\-]\d{1,2})$/,"$1:00"),Ui($e,"D MMMM YYYY [at] HH:mm:ss Z")},ze=Se=>typeof Se=="string"?Me(Se):Se&&typeof Se.toDate=="function"?Ui(Se.toDate()):Ui(Se),Le=async()=>{try{const Se=await Xi(Zn(zr,"bikes"));r(Se.size)}catch(Se){console.error("Error fetching total bikes:",Se)}},Ie=async()=>{try{const Se=Ui().startOf("day"),$e=Zn(zr,"ride_history"),ht=await Xi($e);let ft=0;ht.forEach(ut=>{const We=ut.data().rideEndedAt;We&&ze(We).isSame(Se,"day")&&ft++}),console.log("Today's total rides:",ft),l(ft)}catch(Se){console.error("Error fetching total rides today:",Se)}},Ze=async()=>{try{const Se=Ui().startOf("day"),$e=Zn(zr,"ride_history"),ht=await Xi($e);let ft={totalDistance:0,totalDuration:0,totalCalories:0,totalCarbon:0,totalRevenue:0};ht.forEach(ut=>{var We,Ae,qt;const Rt=ut.data();Rt.rideEndedAt&&ze(Rt.rideEndedAt).isSame(Se,"day")&&(ft.totalDistance+=((We=Rt.currentMetrics)==null?void 0:We.distance)||0,ft.totalDuration+=((Ae=Rt.currentMetrics)==null?void 0:Ae.duration)||0,ft.totalCalories+=((qt=Rt.currentMetrics)==null?void 0:qt.calories)||0,ft.totalCarbon+=Rt.carbonSaved||0,ft.totalRevenue+=Rt.amountPaid||0)}),J({totalDistance:ft.totalDistance||0,totalDuration:ft.totalDuration||0,totalCalories:ft.totalCalories||0,totalCarbon:ft.totalCarbon||0,totalRevenue:ft.totalRevenue||0})}catch(Se){console.error("Error fetching today's metrics:",Se)}},ke=async()=>{try{const Se=await Xi(Zn(zr,"approved_users"));let $e=0,ht=0,ft=0;const ut=Ui().startOf("day"),Rt=Ui().startOf("week"),We=Ui().startOf("month");for(const Ae of Se.docs){const qt=Zn(zr,"approved_users",Ae.id,"rideHistory"),Gt=await Xi(qt);for(const Aa of Gt.docs){const It=Aa.data(),ta=ze(It.rideStartedAt),vt=It.amountPaid||0;ta.isSame(ut,"day")&&($e+=vt),ta.isAfter(Rt)&&(ht+=vt),ta.isAfter(We)&&(ft+=vt)}}ce({today:$e,weekly:ht,monthly:ft})}catch(Se){console.error("Error fetching revenue:",Se)}},tt=async()=>{try{const Se=Ui().startOf("day"),$e=Zn(zr,"ride_history");return uy($e,ft=>{let ut=Array(24).fill(0);ft.forEach(Rt=>{const We=Rt.data();if(We.rideEndedAt&&We.amountPaid){const Ae=ze(We.rideEndedAt);if(Ae.isSame(Se,"day")){const qt=Ae.hour();ut[qt]+=Number(We.amountPaid||0)}}}),console.log("Hourly revenue data:",ut),he(ut)})}catch(Se){console.error("Error fetching hourly revenue:",Se)}},Ue=()=>{try{const Se=Zn(zr,"activeRides"),$e=L_(Se,yC("rideStatus","==","started"));return uy($e,async ft=>{const ut=[];for(const Rt of ft.docs){const We=Rt.data();console.log("Ride data:",We);try{const Ae=Is(zr,"approved_users",We.userId),qt=await Op(Ae),Gt=qt.exists()?qt.data():{};console.log("User data:",Gt);const Aa=Is(zr,"bikes",We.bikeId),It=await Op(Aa),ta=It.exists()?It.data():{};console.log("Bike data:",ta);let vt="Unknown Station";if(We.startStation){console.log("Attempting to fetch station with ID:",We.startStation);const Na=Is(zr,"stations",We.startStation),za=await Op(Na);if(console.log("Station doc exists:",za.exists()),za.exists()){const er=za.data();console.log("Station data:",er),vt=er.stationName||er.name||"Unknown Station"}}const or={rideId:Rt.id,userName:Gt.name||`${Gt.first_name||""} ${Gt.surname||""}`.trim(),startTime:We.startTime,bikeName:ta.bikeName||"Unknown Bike",stationName:vt};console.log("Pushing ride info:",or),ut.push(or)}catch(Ae){console.error("Error fetching related documents:",Ae),console.error("Error details:",{rideId:Rt.id,userId:We.userId,bikeId:We.bikeId,startStation:We.startStation})}}console.log("Final active rides array:",ut),z(ut)})}catch(Se){return console.error("Error in fetchActiveRides:",Se),()=>{}}},He=()=>{try{const Se=Zn(zr,"admins");return uy(Se,$e=>{const ht=$e.docs.reduce((ft,ut)=>{const Rt=ut.data();return Rt.status==="Active"&&Rt.stationAssignedTo?ft+1:ft},0);me(ht)})}catch(Se){return console.error("Error fetching active admins:",Se),()=>{}}};nt.useEffect(()=>{Le(),Ie(),Ze(),tt(),ke();const Se=e1.onAuthStateChanged(async $e=>{if($e)try{const ht=Is(zr,"users",$e.uid),ft=await Op(ht);if(ft.exists()){const ut=ft.data(),Rt=(ut==null?void 0:ut.name)||"Super Admin";e(Rt)}else e("Super Admin")}catch(ht){console.error("Error fetching user data:",ht),e("Super Admin")}else e("Unknown User")});return()=>Se()},[]),nt.useEffect(()=>{if(!(ie.current||!De.current))try{ie.current=new Zf.Map({container:De.current,style:"mapbox://styles/mapbox/streets-v11",center:[120.9882053036898,14.693467677226026],zoom:12}),ie.current.addControl(new Zf.NavigationControl,"top-right");const Se=Zn(zr,"activeRides"),$e=uy(L_(Se,yC("rideStatus","==","started")),ht=>{ie.current});return()=>{$e(),ie.current&&(ie.current.remove(),ie.current=null)}}catch(Se){console.error("Error initializing map:",Se)}},[De.current]),nt.useEffect(()=>{if(!ie.current)return;const Se=Zn(zr,"activeRides"),$e=L_(Se,yC("rideStatus","==","started")),ht=uy($e,async ft=>{try{ft.docChanges().forEach(async ut=>{const Rt=ut.doc.data(),We=ut.doc.id;if((ut.type==="added"||ut.type==="modified")&&Rt.locationData){const{latitude:Ae,longitude:qt}=Rt.locationData,Gt=Is(zr,"approved_users",Rt.userId),Aa=await Op(Gt),It=Aa.exists()?Aa.data():{},ta=`${It.first_name||""} ${It.surname||""}`.trim(),vt=Is(zr,"bikes",Rt.bikeId),or=await Op(vt),za=(or.exists()?or.data():{}).bikeName||"Unknown Bike";if(ge.current[We])ge.current[We].setLngLat([qt,Ae]).getPopup().setHTML(`
                  <div class="simple-popup">
                    <p><strong>${ta}</strong></p>
                    <p>Bike: ${za}</p>
                  </div>
                `);else{const er=document.createElement("div");er.className="user-location-marker";const dr=new Zf.Popup({closeButton:!1,closeOnClick:!1,anchor:"top",offset:[0,-10]}).setHTML(`
                <div class="simple-popup">
                  <p><strong>${ta}</strong></p>
                  <p>Bike: ${za}</p>
                </div>
              `);ge.current[We]=new Zf.Marker({element:er,anchor:"center"}).setLngLat([qt,Ae]).setPopup(dr).addTo(ie.current)}}ut.type==="removed"&&ge.current[We]&&(ge.current[We].remove(),delete ge.current[We])})}catch(ut){console.error("Error updating markers:",ut)}});return()=>{ht(),Object.values(ge.current).forEach(ft=>ft.remove()),ge.current={}}},[]),nt.useEffect(()=>{const Se=Zn(zr,"activeRides"),$e=L_(Se,yC("rideStatus","==","started")),ht=uy($e,ft=>{H(ft.size)});return()=>ht()},[]),nt.useEffect(()=>{let Se;try{Se=Ue()}catch($e){console.error("Error setting up active rides listener:",$e)}return()=>{typeof Se=="function"&&Se()}},[]),nt.useEffect(()=>{const Se=He();return()=>{typeof Se=="function"&&Se()}},[]),nt.useEffect(()=>{const Se=Ui().startOf("day"),$e=Zn(zr,"ride_history");let ht=null;try{ht=uy($e,ft=>{let ut={totalDistance:0,totalDuration:0,totalCalories:0,totalCarbon:0,totalRevenue:0},Rt=Array(24).fill(0),We=0;ft.forEach(Ae=>{const qt=Ae.data();if(qt.rideEndedAt){const Gt=ze(qt.rideEndedAt);if(Gt.isSame(Se,"day")){ut.totalDistance+=Number(qt.distance||0),ut.totalDuration+=Number(qt.duration||0),ut.totalCalories+=Number(qt.caloriesBurned||0),ut.totalCarbon+=Number(qt.carbonSaved||0),ut.totalRevenue+=Number(qt.amountPaid||0);const Aa=Gt.hour();Rt[Aa]+=Number(qt.amountPaid||0),We++}}}),J(ut),he(Rt),l(We)})}catch(ft){console.error("Error setting up ride history listener:",ft)}return()=>{typeof ht=="function"&&ht()}},[]);const Ce=[{name:"Bikes Available",value:a},{name:"Active Users",value:Z},{name:"Active Admins",value:_e},{name:"Today's Revenue",value:Number((q==null?void 0:q.totalRevenue)||0)},{name:"Rides Today",value:s}];return K.jsxs("div",{className:"content-container",children:[K.jsxs("div",{className:"content-header",children:[K.jsxs("h1",{className:"content-header__title",children:["Hello ",t,"!"]}),K.jsx("p",{className:"content-header__subtitle",children:"Keeping the wheels turning for a greener future."})]}),K.jsx("div",{className:"stats-section",children:Ce.map((Se,$e)=>K.jsxs("div",{className:"stat-card",children:[K.jsx("h3",{className:"stat-card__title",children:Se.name}),K.jsx("p",{className:"stat-card__value",children:Se.name==="Today's Revenue"?Number(Se.value).toFixed(2):typeof Se.value>"u"?"0":Se.value})]},$e))}),K.jsxs("div",{className:"tracking-section",children:[K.jsxs("div",{className:"active-rides-table",children:[K.jsx("h3",{className:"section-title",children:"Active Rides"}),K.jsxs("table",{children:[K.jsx("thead",{children:K.jsxs("tr",{children:[K.jsx("th",{children:"Rider Name"}),K.jsx("th",{children:"Start Time"}),K.jsx("th",{children:"Bike Name"}),K.jsx("th",{children:"Station"})]})}),K.jsxs("tbody",{children:[P.slice(0,5).map(Se=>K.jsxs("tr",{children:[K.jsx("td",{children:Se.userName}),K.jsx("td",{children:ze(Se.startTime).format("HH:mm:ss")}),K.jsx("td",{children:Se.bikeName}),K.jsx("td",{children:Se.stationName})]},Se.rideId)),P.length===0&&K.jsx("tr",{children:K.jsx("td",{colSpan:"4",className:"no-rides",children:"No active rides at the moment"})})]})]})]}),K.jsxs("div",{className:"map-container",children:[K.jsxs("div",{className:"map-section-header",children:[K.jsxs("h2",{className:"map-title",children:[K.jsx(cde,{})," Live User Activity Map"]}),K.jsx("p",{className:"map-subtitle",children:"Track real-time locations of active riders across the system"})]}),K.jsx("div",{ref:De,className:"ride-tracking-map"})]})]}),K.jsxs("div",{className:"charts-grid",children:[K.jsxs("div",{className:"charts-row",children:[K.jsxs("div",{className:"chart-container",children:[K.jsx("h3",{className:"chart-title",children:"Today's Ride Metrics"}),K.jsx(Pp,{width:"100%",height:300,children:K.jsxs(JM,{data:[{name:"Distance",value:parseFloat(q.totalDistance||0),unit:"km"},{name:"Duration",value:parseFloat((q.totalDuration||0)/60),unit:"min"},{name:"Calories",value:parseFloat(q.totalCalories||0),unit:"cal"},{name:"CO2 Saved",value:parseFloat(q.totalCarbon||0),unit:"kg"}],margin:{top:5,right:30,left:20,bottom:60},children:[K.jsx(Vp,{strokeDasharray:"3 3"}),K.jsx(ud,{dataKey:"name",angle:-45,textAnchor:"end",height:60,tick:{fontSize:12},interval:0}),K.jsx(cd,{tickFormatter:Se=>Se.toFixed(2),tick:{fontSize:12}}),K.jsx(cu,{formatter:(Se,$e,ht)=>ht&&ht.payload?[`${Se.toFixed(2)} ${ht.payload.unit}`,$e]:[Se,$e],contentStyle:{fontSize:12}}),K.jsx(kp,{dataKey:"value",fill:"#009C8C",children:K.jsx(Hf,{dataKey:"value",position:"top",formatter:(Se,$e)=>$e&&$e.payload?`${Se.toFixed(2)} ${$e.payload.unit}`:Se.toFixed(2),style:{fontSize:"11px"}})})]})})]}),K.jsxs("div",{className:"chart-container",children:[K.jsx("h3",{className:"chart-title",children:"System Overview"}),K.jsx(Pp,{width:"100%",height:300,children:K.jsxs(JM,{data:Ce,margin:{top:5,right:30,left:20,bottom:60},children:[K.jsx(Vp,{strokeDasharray:"3 3"}),K.jsx(ud,{dataKey:"name",angle:-45,textAnchor:"end",height:60,tick:{fontSize:12},interval:0}),K.jsx(cd,{tick:{fontSize:12}}),K.jsx(cu,{contentStyle:{fontSize:12}}),K.jsx(kp,{dataKey:"value",fill:"#009C8C"})]})})]})]}),K.jsxs("div",{className:"revenue-section",children:[K.jsx("h3",{className:"chart-title",children:"Today's Hourly Revenue"}),K.jsx(Pp,{width:"100%",height:300,children:K.jsxs(Nxe,{data:ye.map((Se,$e)=>({hour:`${String($e).padStart(2,"0")}:00`,value:Se})),margin:{top:5,right:30,left:20,bottom:5},children:[K.jsx(Vp,{strokeDasharray:"3 3"}),K.jsx(ud,{dataKey:"hour",tick:{fontSize:12},interval:2}),K.jsx(cd,{tick:{fontSize:12},tickFormatter:Se=>`${Se.toFixed(2)}`}),K.jsx(cu,{formatter:Se=>[`${Number(Se).toFixed(2)}`,"Revenue"],contentStyle:{fontSize:12}}),K.jsx(D0,{type:"monotone",dataKey:"value",stroke:"#4CAF50",strokeWidth:2,dot:{fill:"#4CAF50"}})]})})]})]})]})},i5=()=>K.jsxs("div",{className:"dashboard",children:[K.jsx(iW,{})," ",K.jsxs("div",{className:"dashboard-content",children:[K.jsx(Yg,{})," ",K.jsx(kxe,{})," "]})]}),gm=()=>{const t=vI(),[e,a]=nt.useState(""),[r,s]=nt.useState(""),[l,h]=nt.useState(""),n=T=>`/ecpcaps/assets/${T}`,w=async T=>{T.preventDefault();try{await Uie(e1,e,r),t("/dashboard")}catch(P){h(P.message)}};return K.jsxs("div",{className:"login-container",children:[K.jsx("div",{className:"login-logo-container",children:K.jsx("img",{src:n("ecoridelogo2.png"),alt:"Eco Ride Logo",className:"login-logo"})}),K.jsx("p",{className:"login-subtitle",children:"Drive Green, Ride Clean!"}),K.jsx("h2",{className:"login-title",children:"Super Admin Login"}),K.jsxs("form",{className:"login-form",onSubmit:w,children:[l&&K.jsx("p",{className:"error",children:l}),K.jsxs("div",{className:"form-group",children:[K.jsx("label",{children:"Email"}),K.jsx("input",{type:"email",value:e,onChange:T=>a(T.target.value),required:!0})]}),K.jsxs("div",{className:"form-group",children:[K.jsx("label",{children:"Password"}),K.jsx("input",{type:"password",required:!0,autoComplete:"current-password",value:r,onChange:T=>s(T.target.value)})]}),K.jsx("button",{type:"submit",className:"login-button",children:"LOG IN"})]})]})},Bxe=JSON.parse('[{"Raw Address":"168 SALAZAR ST. BO.PARADA Valenzuela City"},{"Raw Address":"235 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"118-CAPT.CRUZ PARADA Valenzuela City"},{"Raw Address":"330 T. MANANG ST Parada Valenzuela City"},{"Raw Address":"21 EARTH STREET Parada Valenzuela City"},{"Raw Address":"70 PARADA ST.RD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"188 M DE GULA ST.PARADA Valenzuela City"},{"Raw Address":"104 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"9 E&E COMP. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"395 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"155 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"332 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"BLK1 LOT 12 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"237 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"338 T.MANAG ST. PARADA Valenzuela City"},{"Raw Address":"362 B. TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"109 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"9R CABRAL STREET Parada Valenzuela City"},{"Raw Address":"126 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"110 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"170 Parada Valenzuela City"},{"Raw Address":"198 CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"195 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"CANDIDO APT. SAN ANDRES Parada Valenzuela City"},{"Raw Address":"250 S. DE GUZMAN ST BO Parada Valenzuela City"},{"Raw Address":"274 PILAR ST FV4 Village Parada Valenzuela City"},{"Raw Address":"371 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"98 7TH ST. FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"341 20TH ST. Parada Valenzuela City"},{"Raw Address":"233 Fortune Village 5 19TH ST. Parada Valenzuela City"},{"Raw Address":"TATA ERRO ST. Parada Valenzuela City"},{"Raw Address":"0002 Parada Valenzuela City"},{"Raw Address":"T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"249 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"192 RAMON FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"440 SERVICE ROAD Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"91 DAET COMPD. Parada Valenzuela City"},{"Raw Address":"095 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"012 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"244 7TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"257 M DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"308 JIMENEZ ST. PARADA Valenzuela City"},{"Raw Address":"99 VENUS ST F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"12 D PARADA ROAD Parada Valenzuela City"},{"Raw Address":"187 UNIT14 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"230 18ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"181 FELIZA T. Parada Valenzuela City"},{"Raw Address":"7 ALFONSO APARTMENT 101 CAPT CRUZ ST COR Parada Valenzuela City"},{"Raw Address":"087 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"140 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"441 P GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"234 Fortune Village 5 19T Parada Valenzuela City"},{"Raw Address":"412 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"#90 ADOR STREET Parada Valenzuela City"},{"Raw Address":"BLK 12 LOT1 Parada Valenzuela City"},{"Raw Address":"36-A PARADA RD. Parada Valenzuela City"},{"Raw Address":"93 A. CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"139 LAGMDAMEO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"185 B. FELIZA ST Parada Valenzuela City"},{"Raw Address":"74 PARADA ST. Parada Valenzuela City"},{"Raw Address":"192 RAMON ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"244 ESTRELLA APRT. 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"178 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"170 DOON COMP. SALAZAR ST Parada Valenzuela City"},{"Raw Address":"039 D SANTIAGO COMPD. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"1992 1ST. BENMARIE COMP FV5 Parada Valenzuela City"},{"Raw Address":"390 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"166 SALAZAR Parada Valenzuela City"},{"Raw Address":"192 M DE GULA ST. PARADA Valenzuela City"},{"Raw Address":"93 E. CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"21ST PARADA ROAD Parada Valenzuela City"},{"Raw Address":"339 BO. Parada Valenzuela City"},{"Raw Address":"295 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"276B S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"04 Parada Valenzuela City"},{"Raw Address":"436 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"5 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"388 IMPONG JUANA S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"99 SATURN ST F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"191 24TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B6 L7 F. FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"064 PARADA RD. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"DE GUZMAN CPD. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"307 PEARL ST. HIYAS HOMES. PARADA Valenzuela City"},{"Raw Address":"39C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"199 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ ST. PARADA Valenzuela City"},{"Raw Address":"LOT 23 BLK 14 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"259 25TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"87 PARADA ST. Parada Valenzuela City"},{"Raw Address":"99 SATURN ST. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"465 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"199 21ST ST. FORTUNE VillageAG 5 Parada Valenzuela City"},{"Raw Address":"234 ALOHA COMP. S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"234 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"L13 B19 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"091 FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"07 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"372 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"43 B. SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"199 21ST. BENMARIE COMP. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"330 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"141 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"250 B S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"234 19TH Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"121 CONZUELO ST. Parada Valenzuela City"},{"Raw Address":"177 CAPITAN CRUZ ST Parada Valenzuela City"},{"Raw Address":"19921 ST.FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"260 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"143 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"468 KAINGIN ST. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"233 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"172-B MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"106 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"BLK6 LOT7 GINTONG SILANGAN ST. F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"400 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"15 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"438 E FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"440 RUMARAO COMPOUND Parada Valenzuela City"},{"Raw Address":"232 SAN MIGUEL COMP. Parada Valenzuela City"},{"Raw Address":"430 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"75 PARADA RD. EXT. Parada Valenzuela City"},{"Raw Address":"248 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"101 LAGADAMEO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"321 S. DEG GUZMAN Parada Valenzuela City"},{"Raw Address":"269 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"195 6TH ST. FORTUNE   Parada Valenzuela City"},{"Raw Address":"77 PARADA RD. EXT. FORTUNE7 Parada Valenzuela City"},{"Raw Address":"264 25TH ST. FORTUNE VIL 5 Parada Valenzuela City"},{"Raw Address":"0090 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"412 Fortune Village 7 ZAMORA ST. PARADA Valenzuela City"},{"Raw Address":"#207 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"UNIT 3 LOT 16 BLK 8 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"278 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"113 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"287 SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"306-A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"114-E LAGDAMEO Parada Valenzuela City"},{"Raw Address":"247 PARADA ROAD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"58 PARADA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"466 KA BERONG Parada Valenzuela City"},{"Raw Address":"321 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"202 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"190 B MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"9 5TH STEET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"134 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"386 IMPONG JUANA STREET Parada Valenzuela City"},{"Raw Address":"0419 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"B5 L7GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"207 ANTHONY ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"099 CAPT.CRUZ PARADA Valenzuela City"},{"Raw Address":"260 S. DE GUSMAN ST. Parada Valenzuela City"},{"Raw Address":"98 CAPT. CRUZ ST. BO.PARADA Valenzuela City"},{"Raw Address":"388 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"71 FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"#93-C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"20 ZAMORA ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 12 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"032 Parada Valenzuela City"},{"Raw Address":"276 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"BK3 LT12 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"58 Fortune Village 6 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"39 D. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"302-B CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"125 DAET COMPOUND Parada Valenzuela City"},{"Raw Address":"320 J S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"182 MOLAVE Parada Valenzuela City"},{"Raw Address":"0011 UNIT C MOLAVE ST Parada Valenzuela City"},{"Raw Address":"201 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"#146 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"84 PARADA ROAD Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"# 365 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"96 FELIZA ST Parada Valenzuela City"},{"Raw Address":"039 RAMON ST. Parada Valenzuela City"},{"Raw Address":"236 7ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"055 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"92 FORTUNE DRIVE FV 5 Parada Valenzuela City"},{"Raw Address":"AGLIHAM COMPD. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 9 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"91-A CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"7 CONSUELO ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"414 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"184 RAMON ST FV4 Parada Valenzuela City"},{"Raw Address":"26 F SANTIAGO Parada Valenzuela City"},{"Raw Address":"19-B ZAMORA Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"18 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"# 43 PARADA RD. Parada Valenzuela City"},{"Raw Address":"083 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"391 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"90 G. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"86 SALVADOR ST Parada Valenzuela City"},{"Raw Address":"322 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"448 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"297-D T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"87 PARADA RD. Parada Valenzuela City"},{"Raw Address":"SISCAR APARTMENT ADOR STREET Parada Valenzuela City"},{"Raw Address":"114 YAKAL ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"452 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"223 ABELARDO Parada Valenzuela City"},{"Raw Address":"22 T. EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"199 6TH ST. FORTUNE Village 6. PARADA Valenzuela City"},{"Raw Address":"276A S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"120 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"245 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"0094 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"101 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"301 T.MANANG Parada Valenzuela City"},{"Raw Address":"004 Parada Valenzuela City"},{"Raw Address":"246 7TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"#93 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"105 KAMAGONG Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"B5L3 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"BLOCK 5 LOT 11 FRANCISCO ST GINTONG Parada Valenzuela City"},{"Raw Address":"87 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"317 TADANG MANANG Parada Valenzuela City"},{"Raw Address":"8-FIFTH ST. Parada Valenzuela City"},{"Raw Address":"157 ELAGDAMEO ST. FV4 Parada Valenzuela City"},{"Raw Address":"122 CALLE ONSE ST. PARADA Valenzuela City"},{"Raw Address":"#12 PARADA RD. Parada Valenzuela City"},{"Raw Address":"254 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"89 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"468-G KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"LOT 41 BLK 10 NARA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"6 Parada Valenzuela City"},{"Raw Address":"333 A TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"LOT 19 BLK 8 FORTUNE DR. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"170 RAMON FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"122 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"202 ANTHONY ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"242 19TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"199 6TH ST. COR. Parada Valenzuela City"},{"Raw Address":"043 PARADA Valenzuela City"},{"Raw Address":"108 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"339 21ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"031 PARADA RD Parada Valenzuela City"},{"Raw Address":"FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"35 Parada Valenzuela City"},{"Raw Address":"184 Fortune Village 6 MOLAVE ST. PARADA Valenzuela City"},{"Raw Address":"302 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"SALAZAR Parada Valenzuela City"},{"Raw Address":"20 EUGENIO Parada Valenzuela City"},{"Raw Address":"01 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"B13L27 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"253 Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. FORUNE Village4 Parada Valenzuela City"},{"Raw Address":"B1 L9 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"00002 B CALLE ONSE Parada Valenzuela City"},{"Raw Address":"187 UNIT 11 3RD FLOOR FELIZA ST. Parada Valenzuela City"},{"Raw Address":"87 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"181 FELIZA Parada Valenzuela City"},{"Raw Address":"136 E. LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"200 B CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"97 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"214-S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"# 86 C. CAPITAN CRUZ Parada Valenzuela City"},{"Raw Address":"# 95 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"231 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"139 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"154 ALICIA STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 2 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"BLK3 LOT20 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"347 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"241 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"427 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"207 FELISA ST. Parada Valenzuela City"},{"Raw Address":"248 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"268 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"88 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"404 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"5 PARADA Valenzuela City"},{"Raw Address":"04 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"369 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"405-B P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"145 C NARRA ST. Parada Valenzuela City"},{"Raw Address":"274 PILAR ST. Parada Valenzuela City"},{"Raw Address":"367 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE Parada Valenzuela City"},{"Raw Address":"339 T. MANANG Parada Valenzuela City"},{"Raw Address":"39 C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"315 MENES COMP. Parada Valenzuela City"},{"Raw Address":"255 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"091 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"357 FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"188 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"324 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"156 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"412-B P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"204B F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"162 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"31 EARTH ST. Parada Valenzuela City"},{"Raw Address":"028 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"464 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"LOT 10 BLK. 2 PARADA ROAD EXT. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"L 9 B 9 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"172 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"185 B. FELIZA ST. Parada Valenzuela City"},{"Raw Address":"419 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"127 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"PARADA ROAD PARADA Valenzuela City"},{"Raw Address":"332 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"231 18TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"FRANCISCO Parada Valenzuela City"},{"Raw Address":"172 MOLAVE ST. Fortune Village 5&6 Parada Valenzuela City"},{"Raw Address":"21ST PARADA RD Parada Valenzuela City"},{"Raw Address":"290 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"177 GONZALES COMP. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. BENMARIE COMP. Parada Valenzuela City"},{"Raw Address":"#39D. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"3A LOT 13 BLK 13 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"9001 LOT 4 A CALLE ONCE Parada Valenzuela City"},{"Raw Address":"450 Parada Valenzuela City"},{"Raw Address":"283 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"143 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"043 6TH ST. CORNER NARRRA ST. Parada Valenzuela City"},{"Raw Address":"413-J P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"L26 NARRA ST Parada Valenzuela City"},{"Raw Address":"065 BO.PARADA Valenzuela City"},{"Raw Address":"27 DIAMOND ST HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"404 P.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"140 DALAWAN ST.PARADA Valenzuela City"},{"Raw Address":"412 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"273 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"84 A. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"123 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"91-A CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"222 20TH STREET FORTUNE5 Parada Valenzuela City"},{"Raw Address":"#12 PARADA ST. Parada Valenzuela City"},{"Raw Address":"276-B S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"410 P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"420 ZAMORA FV7 Parada Valenzuela City"},{"Raw Address":"18 A F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"73 GOMEZ ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"199 6TH ST. MANALANG APT. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"UNIT1 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"413 ZAMORA ST. PARADA Valenzuela City"},{"Raw Address":"315 JIMENEZ ST. PARADA Valenzuela City"},{"Raw Address":"20 EUGENIO ST. CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"63 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"78 PARADA RD. EXT. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"39 D RAMON ST. SANTIAGO COMPOUND F4 Parada Valenzuela City"},{"Raw Address":"26 MARS ST. Parada Valenzuela City"},{"Raw Address":"224 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"SERVE 1 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"220D 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"046 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"11 5TH FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"26 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"176 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"141 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"178 KAMAGONG FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"420 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"144 E FRANCISCO Parada Valenzuela City"},{"Raw Address":"259 2ST ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 7 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"411 C P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"286 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"410-A P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"99 VENUS ST. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"36-G TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"413 FV7 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ ST Parada Valenzuela City"},{"Raw Address":"100 CAPTAIN CRUZ ST. COR. M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"248 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"0006 BLOCK 3 LOT 4 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"269 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"122 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"168 ACACIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"440 WEST SERVICE RUMARAO COMPD Parada Valenzuela City"},{"Raw Address":"171 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 8 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"134 E.LAGDAMEO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"151 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"125 CONSUELO ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"COR. PEARL & CORAL ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"409 P.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"192 RAMON FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMPUND Parada Valenzuela City"},{"Raw Address":"29 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"414 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"437 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"227 ABLERADO ST. Parada Valenzuela City"},{"Raw Address":"196 22ND ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"1F DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"119A KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST.FV 4 Parada Valenzuela City"},{"Raw Address":"22 Parada Valenzuela City"},{"Raw Address":"10 5TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"ABELARDO Parada Valenzuela City"},{"Raw Address":"199 6TH Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"65 PARADA RD. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"109 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"283 MARTA ST. Parada Valenzuela City"},{"Raw Address":"371 -A TATA ANDRES Parada Valenzuela City"},{"Raw Address":"274 PILAR ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"UNIT A 276 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"274 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"B2 L22 JADE ST Parada Valenzuela City"},{"Raw Address":"2 CALLE ONSE FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"067 PARADA RD Parada Valenzuela City"},{"Raw Address":"165 G ACACIA ST Parada Valenzuela City"},{"Raw Address":"441 GOMEZ Parada Valenzuela City"},{"Raw Address":"18 GP WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"9 VENUS ST. Parada Valenzuela City"},{"Raw Address":"028 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"BLK1 LOT5 TMHOA T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"181 23RD STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"135 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"360 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"207 FELA BUKID Parada Valenzuela City"},{"Raw Address":"173 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"269 S. GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"250 ABELARDO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"42 PARADA RD. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"466 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"RAMON ST. Parada Valenzuela City"},{"Raw Address":"93 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"91B S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"101 A CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"UNIT 4 CALYE 7 Parada Valenzuela City"},{"Raw Address":"123 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"080 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"322 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"199 6TH ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"122 CALE ONCE ST. Parada Valenzuela City"},{"Raw Address":"193-C M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"62 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"222 ANTHONY STREET Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"201 6ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"165 Parada Valenzuela City"},{"Raw Address":"217 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"#80 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"97 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"# 26 MARS ST. Parada Valenzuela City"},{"Raw Address":"358 J.FRANCISCO Parada Valenzuela City"},{"Raw Address":"4389 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"LOT 10 NEPTUNE STREET F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"246 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"165 YAKAL ST. Parada Valenzuela City"},{"Raw Address":"194 FORTUNE Village 5 CORNER 6 ST. Parada Valenzuela City"},{"Raw Address":"94A FELIZA ST. Parada Valenzuela City"},{"Raw Address":"159 6TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"342 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"0118A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"372 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"139 Fortune Village 5 DRIVE Village Parada Valenzuela City"},{"Raw Address":"ADOR ST. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"128 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"30B PARADA ROAD Parada Valenzuela City"},{"Raw Address":"361 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"88 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"251 ABELARDO ST.PARADA Valenzuela City"},{"Raw Address":"109 KAMAGONG Parada Valenzuela City"},{"Raw Address":"LOT 10 NEPTUNE F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"122 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"39 D. SANTIAGO COMPD. FV4 Parada Valenzuela City"},{"Raw Address":"439 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"307 JIMENEZ ST.PARADA Valenzuela City"},{"Raw Address":"ACACIA ST. Parada Valenzuela City"},{"Raw Address":"358 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"6TH ST. CORNER NARRA Parada Valenzuela City"},{"Raw Address":"192 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"400 SAN ANDRES ST Parada Valenzuela City"},{"Raw Address":"123 C. CRUZ Parada Valenzuela City"},{"Raw Address":"414 PARADA ST. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"CANDIDO APT. Parada Valenzuela City"},{"Raw Address":"RUMARAO COMPOUND WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"260 TATA ROMAN ST Parada Valenzuela City"},{"Raw Address":"B4 L11 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. Parada Valenzuela City"},{"Raw Address":"170 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"1243 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"244 7TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"416 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"169 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"212 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"140 E FRANCISCO Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST. FORUNE Village 4 Parada Valenzuela City"},{"Raw Address":"349-F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"039 RAMON ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"435 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"CALL ONSE Parada Valenzuela City"},{"Raw Address":"097 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 22 JADE ST. Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"104 A CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"#330 TADANG MANANG Parada Valenzuela City"},{"Raw Address":"B2L20 349 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"449 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"146 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"177 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"228 ABELARDO FV 4 Parada Valenzuela City"},{"Raw Address":"279-B S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"35 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"#42 PARADA RD. Parada Valenzuela City"},{"Raw Address":"117 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"BLK 4 LOT 18 PEARL ST. HIYAS Parada Valenzuela City"},{"Raw Address":"28 PARADA RD Parada Valenzuela City"},{"Raw Address":"95 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"462 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"203 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"055 KAMAGONG STREET Parada Valenzuela City"},{"Raw Address":"# 12 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"103 KAMAGONG STREET. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"235 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"365 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"BLK9 LOT29-A KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"169 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID CALLE ONCE Parada Valenzuela City"},{"Raw Address":"464 KAINGIN Parada Valenzuela City"},{"Raw Address":"182 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"442 ROSILOS Parada Valenzuela City"},{"Raw Address":"470 CARACTA VillageE KAINGIN ST Parada Valenzuela City"},{"Raw Address":"457 F KAINGIN ST Parada Valenzuela City"},{"Raw Address":"0147E LOT 0147 DOON COMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"105 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"289-D S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"283 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"348 CAPT.CRUZ ST. BO. PARADA Valenzuela City"},{"Raw Address":"377 TATA ANDREZ ST. Parada Valenzuela City"},{"Raw Address":"26 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"8 M. LAUREL DRIVE Fortune Village 4. Parada Valenzuela City"},{"Raw Address":"CALLE ONSE BUKID Parada Valenzuela City"},{"Raw Address":"230 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"286 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"95 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"219 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"JORGE EMBUSCADO Parada Valenzuela City"},{"Raw Address":"#153 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"3 5TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"442 P. GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"17 F.SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"171 RAMON ST. Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"279 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"0320 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"332 T MANANG ST Parada Valenzuela City"},{"Raw Address":"514 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"412 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"160 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"224 2OTH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"225 BELARDO ST. FV 4 Village Parada Valenzuela City"},{"Raw Address":"25 GUENIO Parada Valenzuela City"},{"Raw Address":"407 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"405 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"146 ALICIA ST.FV 4 Parada Valenzuela City"},{"Raw Address":"136 LAGDAMEO Parada Valenzuela City"},{"Raw Address":"199 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"134 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 14 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"103 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"307 JIMENES ST. Parada Valenzuela City"},{"Raw Address":"315 JEMENES COMPOUND Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 6 TANDANG MANANG HOWA Parada Valenzuela City"},{"Raw Address":"3 CORAL ST. Parada Valenzuela City"},{"Raw Address":"100 E. DE GULA COMP. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"#6 Fortune Village 5 5TH STREET Parada Valenzuela City"},{"Raw Address":"198 RAMON ST. FV4 Parada Valenzuela City"},{"Raw Address":"168 SALAZAR DOON COMPD. Parada Valenzuela City"},{"Raw Address":"301 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"BLK 6 LOT 9 PEARL CORNER JADE HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"172 23 ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"257 RIZALINA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"320 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"190 6TH ST. Fortune Village 5 MOLAVE EXT. Parada Valenzuela City"},{"Raw Address":"111 Fortune Village 6 Village YAKAL ST. Parada Valenzuela City"},{"Raw Address":"349 GINTONG SILANGAN BLK. 5 LOT 15 Parada Valenzuela City"},{"Raw Address":"458 KAINGIN Parada Valenzuela City"},{"Raw Address":"2 YAKAL ST. CORNER ACACIA Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"471-A KA BERONG ST. Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 1 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"205 FELISA ST. Parada Valenzuela City"},{"Raw Address":"406 BANDINO Parada Valenzuela City"},{"Raw Address":"L8 MERCURY F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"267 CORNER 24TH & 19TH Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"207 FILIZA BUKID Parada Valenzuela City"},{"Raw Address":"L10 B 2 PARADA EXT. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"413H SANTOS TWNH P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"L6 BF SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"#70 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"98 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"0281 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"#91 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"L-10 B-4 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"363 APT E. TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"222C ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"201 CALLE ONCE PARADA Valenzuela City"},{"Raw Address":"161 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"9 DR.LAUREL ST. Parada Valenzuela City"},{"Raw Address":"456-C KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"333 APTC. KAMAGONG ST FV6 Parada Valenzuela City"},{"Raw Address":"358 FRANCISCO Parada Valenzuela City"},{"Raw Address":"116 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"190 6TH ST Parada Valenzuela City"},{"Raw Address":"BL 3 LT 5 GINTONG SILANGAN 349 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"118 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"28 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"201 A. FELIZA Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"234 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"HIYAS HOME PARADA RD. Parada Valenzuela City"},{"Raw Address":"233 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"226 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"BLOCK 6 LOT 11 F FRANCISCO GINTONG Parada Valenzuela City"},{"Raw Address":"177 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"271 CONSUELO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"470 PARADA ST. Parada Valenzuela City"},{"Raw Address":"329 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"457 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"112 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"MACABALO APARTMENT PILAR ST. Parada Valenzuela City"},{"Raw Address":"118 E CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"442 P GOMEZ ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"21ST F5 MARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"4541 MOLAVE ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"15 F AANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"046 Fortune Village 5 PARADA RD. Parada Valenzuela City"},{"Raw Address":"LOT 5 BLK 10A NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"95P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"4560 SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"204 VENUS ST. E AND E COMPD. Parada Valenzuela City"},{"Raw Address":"406 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"185 A FELIZA ST Parada Valenzuela City"},{"Raw Address":"0222 ANTHONY ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"467-A KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"410 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"BLK 2 LOT 1 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"472 KA BERONG ST. Parada Valenzuela City"},{"Raw Address":"0394L SAN ADNRES ST. Parada Valenzuela City"},{"Raw Address":"360 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"SAPHIRE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"132 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"123 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"256 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"352 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"121 E LAGDAME ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"232 S DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"171 MOLAVE STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"130 5THV ST. FV 5 Parada Valenzuela City"},{"Raw Address":"468 KAINGI ST. Parada Valenzuela City"},{"Raw Address":"LOT 1 BLK. 11 FORTUNE DRIVE Fortune Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"LOT 10 NIPTUNE ST. Parada Valenzuela City"},{"Raw Address":"25 ST. FORTUNE Village Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"DIZON COMP. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"298 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"28 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"246 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"4541 MOLAVE ST. FORTUNE Village 5&6 Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST. F4 Parada Valenzuela City"},{"Raw Address":"246 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"168 TATA ERO ST Parada Valenzuela City"},{"Raw Address":"41 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"363 D. TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"91-B CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"343 F. FRANCISCOST Parada Valenzuela City"},{"Raw Address":"217 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"BLK.1 LOT 7 GOMEZ ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"171 A.SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 5TH ST. Parada Valenzuela City"},{"Raw Address":"224 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"150 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"254 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"19 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"272 DOOR 3 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"0339 ST. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"B1 L2 24TH ST. BEN MARIE COMP. Parada Valenzuela City"},{"Raw Address":"444 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"121 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"02 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"269 24TH STREET Parada Valenzuela City"},{"Raw Address":"37 PARADA RD. Parada Valenzuela City"},{"Raw Address":"4365 TATA ANDRES ST.PARADA Valenzuela City"},{"Raw Address":"327 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"403 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"184 RAMON FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"273 PILAR ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"407 Parada Valenzuela City"},{"Raw Address":"188 CAPT. CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"3201 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"039 RAMON ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"193 M. DE GULA ST Parada Valenzuela City"},{"Raw Address":"234 19TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"1548 F PEARL ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"258 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST DOON COMPD Parada Valenzuela City"},{"Raw Address":"257 RIZALINA STREET Parada Valenzuela City"},{"Raw Address":"101 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"098 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"412 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"258 25TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"091 FORTUNE DR. PARADA Valenzuela City"},{"Raw Address":"166 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"108 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"278 PILAR ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"342 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"151 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"193 RAMON ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"140 E.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"PEARL CORNER SAPPHIRE ST. B.Parada Valenzuela City"},{"Raw Address":"401 SAN ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"121 CONSUELO STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"013 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 7 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"# 10 E. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"155 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"257 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"312 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"140 NARRA ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST. FV4 Parada Valenzuela City"},{"Raw Address":"168 TATA ERO Parada Valenzuela City"},{"Raw Address":"2970 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"312 INT.JIMENEZ COMPD. ST. Parada Valenzuela City"},{"Raw Address":"250 25TH ST. FORTUNE DRIVE Village 5 Parada Valenzuela City"},{"Raw Address":"13 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"266 24TH ST. FORTUNE 5 Parada Valenzuela City"},{"Raw Address":"207 A FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"169 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 STREET 21 Parada Valenzuela City"},{"Raw Address":"257 M DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"187 Parada Valenzuela City"},{"Raw Address":"414 A. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"171 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"466 KABERONG KAINGIN Parada Valenzuela City"},{"Raw Address":"BLK 2 GINTONG SILANGAN SAN FRANCISCO Parada Valenzuela City"},{"Raw Address":"99 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"185 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"392-B P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"PARADA ST. SALAZAR Parada Valenzuela City"},{"Raw Address":"290 M. ILOCTO ST. Parada Valenzuela City"},{"Raw Address":"130 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"#230 18TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"407 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"443 GOMEZ ST. PARADA Valenzuela City"},{"Raw Address":"230 1-F EMBUSCADO APT. S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"161 YAKAL ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"161 FELISA SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"028 CAPT. CRUZ. PARADA Valenzuela City"},{"Raw Address":"232 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"186 FELIZA Parada Valenzuela City"},{"Raw Address":"22 T.EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"121 CAPITAN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"#185 FILIZA Parada Valenzuela City"},{"Raw Address":"362 B. TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"BLK. 10 LOT 5 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"BLK Parada Valenzuela City"},{"Raw Address":"108 RAMON ST. Parada Valenzuela City"},{"Raw Address":"4542 ILOCTO ST. Parada Valenzuela City"},{"Raw Address":"455 KAINGIN Parada Valenzuela City"},{"Raw Address":"123 LAGDAMEO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"22 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"88 A. CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"325 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"UNIT3A B9L30 NARRA ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"165 ACACIA ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"174 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"140 E. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 14 349 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"1252 CONSUELO ST. Parada Valenzuela City"},{"Raw Address":"319 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"279 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"131 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"50 PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"165 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"101 KAMAGONG ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"278 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"333 TANDANG MANANG. PARADA Valenzuela City"},{"Raw Address":"LOT 29 A BLK. 9 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"156 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"111-B KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"201 6THST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"70 PARADA RD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"199 21 STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"186 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"12 B. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"39C PARADA RD Parada Valenzuela City"},{"Raw Address":"23RD ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"122 B CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"91A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"42 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"70 PARADA Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"15 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"150 ALICIA FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"233 19 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"433 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"124 -B CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"9 M. LAUREL STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"88 I. SANTIAGO Parada Valenzuela City"},{"Raw Address":"31 U4&5 KAMAGONG Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"L8 B2 TINDALO ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"240 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"460 GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"B2 L8 349 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"139 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#136 NARRA ST. Parada Valenzuela City"},{"Raw Address":"206 F.SANTIAGO ST.PARADA Valenzuela City"},{"Raw Address":"409 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"199 BENMARI CPD. Parada Valenzuela City"},{"Raw Address":"340 20TH ST. FV5 Parada Valenzuela City"},{"Raw Address":"133 KAMAGONG ST. FORTUNE VillageE Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMP Parada Valenzuela City"},{"Raw Address":"450 SERVICE ROAD WEST Parada Valenzuela City"},{"Raw Address":"457 F. KAINGIN ST Parada Valenzuela City"},{"Raw Address":"DAET CMPD.PARADA Valenzuela City"},{"Raw Address":"417 TATA ERO STREET Parada Valenzuela City"},{"Raw Address":"128 YAKAL ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"177 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"95 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"166 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"9 PARADA RD. Parada Valenzuela City"},{"Raw Address":"325 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"150 AVELIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"111 BLK. B KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"Q02 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"296 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"244 7TH ST.FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"338 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"40 PARADA RD Parada Valenzuela City"},{"Raw Address":"287 SANTOLAN RD. PARADA Valenzuela City"},{"Raw Address":"24TH STREET BEN MARIE COMPD. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"094 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"79 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"417 TATA ERRO ST. Parada Valenzuela City"},{"Raw Address":"409 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"416 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"45-A F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"187 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"466 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"333 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"60 Fortune Village 6 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"409 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"466 KAINGIN ST . PARADA Valenzuela City"},{"Raw Address":"357 J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"024 T.EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"LOT 31 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"333-A KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"332 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"199 21ST. BENMARE COMP. Parada Valenzuela City"},{"Raw Address":"139 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"65 PARADA ROAD EXTENSION Parada Valenzuela City"},{"Raw Address":"39 D SANTIAGO CPMD. FV4 Parada Valenzuela City"},{"Raw Address":"273 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"170 SLAZAR ST. Parada Valenzuela City"},{"Raw Address":"141 DALAWAN ST.PARADA Valenzuela City"},{"Raw Address":"279 B S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"B 2 L19 SAPPHIRE ST.HIYAS HOME Parada Valenzuela City"},{"Raw Address":"409 P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"138-E LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"347 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"1114 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"14 E. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"123 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"220 21ST ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"DOOR 4 ALFONSO APARTMENT M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"4-D S.DE GUZMAN ST. EMBUSCADO APT. Parada Valenzuela City"},{"Raw Address":"328 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"59 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"360-J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"138 NARRA ST. Parada Valenzuela City"},{"Raw Address":"358 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"INT. CAPT.CRUZ. ST. PARADA Valenzuela City"},{"Raw Address":"202 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"347 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"442 GOMEZ STREET Parada Valenzuela City"},{"Raw Address":"246 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"200 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"444 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"198 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"248 PARADA RD. Parada Valenzuela City"},{"Raw Address":"204-B F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"271 S. DEGUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"225 A BELARDO ST. FV4 Parada Valenzuela City"},{"Raw Address":"267 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"94 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"222 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"410P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"353 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"33 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"34 PARADA RD Parada Valenzuela City"},{"Raw Address":"365 B TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"351-C CAPT. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"DOOR B. MACABALO FORTUNE IV Village Parada Valenzuela City"},{"Raw Address":"090 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"78-B PARADA EXTN. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"E. QUENIO ST. Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMP 21 ST FORTUNE Parada Valenzuela City"},{"Raw Address":"203 18TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"170 UNIT 1 SALAZAR Parada Valenzuela City"},{"Raw Address":"91 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"067 E PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"199 21 STREET Parada Valenzuela City"},{"Raw Address":"CABRAL ST. Parada Valenzuela City"},{"Raw Address":"207 FELISA ST Parada Valenzuela City"},{"Raw Address":"448 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"310 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"437 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"26 MARS ST. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"FELISA ST Parada Valenzuela City"},{"Raw Address":"117 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"167 6TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"435 B. ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"225 ABELARDO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"26 MARS ST. F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"67 FORTUNE VIILAGE 6 PARADA RD. Parada Valenzuela City"},{"Raw Address":"19921 ST. Parada Valenzuela City"},{"Raw Address":"410 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"454 SERVICE RD Parada Valenzuela City"},{"Raw Address":"B5 L6 F FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"15 F. Parada Valenzuela City"},{"Raw Address":"MENEZ COMPD. PARADA Valenzuela City"},{"Raw Address":"236 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"LOT10 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"332 TANDANG MANANG ST.PARADA Valenzuela City"},{"Raw Address":"B4L7 MHOAI TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"66 PARADA RD. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"B3L24 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"202 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"162 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"229 ABELARDO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"133 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"29 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"170 RAMON ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"B1 L7 LUPANG SINILANGAN Parada Valenzuela City"},{"Raw Address":"239 PARADA Valenzuela City"},{"Raw Address":"155 ALICIA ST FV4 Parada Valenzuela City"},{"Raw Address":"055 Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"141 FORTUNE Village 5&6 Parada Valenzuela City"},{"Raw Address":"339TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"204 VENUS ST. F.SANTIAGO COMPD. Parada Valenzuela City"},{"Raw Address":"16 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"3 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"24 T. EUGENIO ST Parada Valenzuela City"},{"Raw Address":"358 J. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"BLK.14 L3 M. DELOS REYES ST. Parada Valenzuela City"},{"Raw Address":"392-B P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN EXT. Parada Valenzuela City"},{"Raw Address":"247 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"193 DE GULA ST. Parada Valenzuela City"},{"Raw Address":"233 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"25TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"170 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"349 F. FANCISCO ST. Parada Valenzuela City"},{"Raw Address":"424 BURGOS STREET Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"232 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"FORTUNE5 5 Parada Valenzuela City"},{"Raw Address":"204 VENUS STREET Parada Valenzuela City"},{"Raw Address":"326 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"BLK. 8 LOT 3 F.FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"465B KAINGIN ST Parada Valenzuela City"},{"Raw Address":"CRUZ ST. Parada Valenzuela City"},{"Raw Address":"91 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"257 M. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"185 A. FELIZA ST. Parada Valenzuela City"},{"Raw Address":". Parada Valenzuela City"},{"Raw Address":"WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"245 B DOON SALAZAR ST. COMPD. Parada Valenzuela City"},{"Raw Address":"230-S DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"L 16 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"206 TATA ROMAN Parada Valenzuela City"},{"Raw Address":"0250 CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"199 21ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"273 S. DEGUZMAN Parada Valenzuela City"},{"Raw Address":"157 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 10 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"154 ALICICA ST. Parada Valenzuela City"},{"Raw Address":"92 FORTUNE DRIVE FORTUNE Village. 5 Parada Valenzuela City"},{"Raw Address":"296 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"LOT 10 NEPTUNE F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"COR. 6TH ST. Parada Valenzuela City"},{"Raw Address":"100 CAPT. CRUS ST. Parada Valenzuela City"},{"Raw Address":"215 DAET COMPOUND Parada Valenzuela City"},{"Raw Address":"406 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"164 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"416 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"365-A TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"347 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"351 D. CAPT. F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"243 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"233 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"326 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"220 21ST STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"TOMASA Parada Valenzuela City"},{"Raw Address":"276 J S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"0334 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"BLOCK 7 LOT 9 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"91-E CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"BLK 1 LOT 13 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"316 MENES CMPD. PARADA Valenzuela City"},{"Raw Address":"110 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"FELIZA ABUKID Parada Valenzuela City"},{"Raw Address":"315 JIMENES COMP. PARADA Valenzuela City"},{"Raw Address":"0177 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"BLK 6 LOT 8 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 AGLIHAN COMPD. Parada Valenzuela City"},{"Raw Address":"PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"170 MOLAVE STR Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"172 RAMON ST. Parada Valenzuela City"},{"Raw Address":"202-A FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"9-E PARADA ROAD Parada Valenzuela City"},{"Raw Address":"206 D 22ND ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"05 118 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"267 INANG PETRA ST Parada Valenzuela City"},{"Raw Address":"324 TANGDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"BLK.8 LOT31 Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"327 T. MANANG Parada Valenzuela City"},{"Raw Address":"297 B. TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"132 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"26 MARS STREET Parada Valenzuela City"},{"Raw Address":"215 DAET COMP Parada Valenzuela City"},{"Raw Address":"L14 B 5 GINTONG SILANGAN ST. Parada Valenzuela City"},{"Raw Address":"172 Parada Valenzuela City"},{"Raw Address":"207 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"115 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"85 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"283 MARTHA ST Parada Valenzuela City"},{"Raw Address":"195 19TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"199 CALLE ONSE ST. PARADA Valenzuela City"},{"Raw Address":"LOT 17 BLK 2 SAPPHIRE ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"28 PARADA Valenzuela City"},{"Raw Address":"LOT 4 BLK 21 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"F. FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"33 EARTH ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"406 BANDINO ST Parada Valenzuela City"},{"Raw Address":"349 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"249 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"168-B SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"052 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"363-D TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"LOT 6-B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"236 7TH ST. PARADA Valenzuela City"},{"Raw Address":"5 Parada Valenzuela City"},{"Raw Address":"5 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"18 BEN MARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"320 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"40 PEARL ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"200 FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"214 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"255 TOMAS ST. Parada Valenzuela City"},{"Raw Address":"424 BURGOS STREET Parada Valenzuela City"},{"Raw Address":"119 PEARL ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"336 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"279 PILAR ST Parada Valenzuela City"},{"Raw Address":"440 SERVICE RD Parada Valenzuela City"},{"Raw Address":"0349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"242 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"271 MARTHA ST. Parada Valenzuela City"},{"Raw Address":"24TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"11 PARADA ROAD ST. Parada Valenzuela City"},{"Raw Address":"L6 B2 TINDALO ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"01 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"FELIZA Parada Valenzuela City"},{"Raw Address":"146 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"09 BO. PARADA RD. Parada Valenzuela City"},{"Raw Address":"405 B P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"181 FELIZA ST Parada Valenzuela City"},{"Raw Address":"342 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"333 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"123 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"192 M DEGULA Parada Valenzuela City"},{"Raw Address":"173 SALAZAR ST. BO. PARADA Valenzuela City"},{"Raw Address":"416 TATA ERO Parada Valenzuela City"},{"Raw Address":"124 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"422 GOMEZ ST. FORUNE Village 7 Parada Valenzuela City"},{"Raw Address":"90 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"380 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"410 A- P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"506 TINDALO ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"86 SALVADOR Parada Valenzuela City"},{"Raw Address":"31 EARTH ST. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"DOOR 12 118 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"199 AGLIHAM COMPD. Parada Valenzuela City"},{"Raw Address":"272 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"377 TATA ANDRESS ST. Parada Valenzuela City"},{"Raw Address":"384 SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"233 ABELARDO FAVillageA Parada Valenzuela City"},{"Raw Address":"5JUPITER ST. Parada Valenzuela City"},{"Raw Address":"333-F KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"204 F SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"355 J. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"111 YAKAL STREET Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"L8 MERCURY F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"352 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"201 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"235 ABELARDO STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"0260 1 TATA ROMAN S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"84 A CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"131-C CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"252 ABELARDO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ COMPD. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"455 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"PARADA ROAD 28 Parada Valenzuela City"},{"Raw Address":"14 B PARADA RD. Parada Valenzuela City"},{"Raw Address":"26 F. SNTIAGO ST. Parada Valenzuela City"},{"Raw Address":"16 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"147 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"258 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"314 MENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"184 RAMON ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"25 STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"242 DE GUZMAN Parada Valenzuela City"},{"Raw Address":"410 T. MANANG Parada Valenzuela City"},{"Raw Address":"313 MENEZ CMPD. Parada Valenzuela City"},{"Raw Address":"330 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"277 PILAR ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN SANTOS TOWAN HOUSE Parada Valenzuela City"},{"Raw Address":"202 FELIZA Parada Valenzuela City"},{"Raw Address":"278 PILAR STREET Parada Valenzuela City"},{"Raw Address":"14 DIAMOND ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"131-CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"325 Parada Valenzuela City"},{"Raw Address":"055 PARADA RD. COR. IPIL ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"311 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG LOT 3 BLOCK 14 Parada Valenzuela City"},{"Raw Address":"286 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"203 6TH STREET FORTUNE Village 5-6 Parada Valenzuela City"},{"Raw Address":"DELA CRUZ COMP. CALLE ONSE DULO Parada Valenzuela City"},{"Raw Address":"026 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"411 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"325 T.MANANAG ST Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"51 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"BLK 6 LOT 9 GINTONG SILANGAN A . FRANCISCO Parada Valenzuela City"},{"Raw Address":"046 PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"414 ZAMORA ST. Fortune Village 7 PARADA Valenzuela City"},{"Raw Address":"002 YAKAL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"11-B S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"146 NARRA ST. Parada Valenzuela City"},{"Raw Address":"123 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"407-B P. DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"200 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"061 PARADA RD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"D: Parada Valenzuela City"},{"Raw Address":"330 TIA. MANANG ST. Parada Valenzuela City"},{"Raw Address":"93 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"407 BANDINO ST. Parada Valenzuela City"},{"Raw Address":"#267 INANG PETRA ST. Parada Valenzuela City"},{"Raw Address":"007 PARADA RD Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMP. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"133 ST.PARADA Valenzuela City"},{"Raw Address":"5TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"150 NARRA STREET Parada Valenzuela City"},{"Raw Address":"1288 KAMAGONG STREET Parada Valenzuela City"},{"Raw Address":"146 DALAWAN Parada Valenzuela City"},{"Raw Address":"267 INANG PETRA ST. Parada Valenzuela City"},{"Raw Address":"384 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"200 FORTUNE V FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"119 Fortune Village 5 6 ST. Parada Valenzuela City"},{"Raw Address":"161 B SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"117 KAMAGONG ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"26 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"L2 DIAMOND ST HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"192-3 6TH ST. Parada Valenzuela City"},{"Raw Address":"177 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 22 JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"347 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"0320 D S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"262 25TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"416 TATAERO ST. Parada Valenzuela City"},{"Raw Address":"407 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"25TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"9 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 6 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"403 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"457 KAINGIN ST. Valenzuela City Parada Valenzuela City"},{"Raw Address":"204 VENUS ST CMPD SALAZAR Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 19 HIYAS HOMES SAPHIRE ST. Parada Valenzuela City"},{"Raw Address":"379 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"407 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"376 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"419 ZAMORA ST. FV7 Parada Valenzuela City"},{"Raw Address":"F.FRNCISCO ST. Parada Valenzuela City"},{"Raw Address":"406 BANDINO ST. P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"30 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"360 J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"351 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"124B CUPT CRUZ ST Parada Valenzuela City"},{"Raw Address":"FELIZA BUKID ST Parada Valenzuela City"},{"Raw Address":"37 PARADA RD Parada Valenzuela City"},{"Raw Address":"200 CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"168 INT. SALAZAR ST. BO.PARADA Valenzuela City"},{"Raw Address":"94- B FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"409 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"169 DOON COMPOUND Parada Valenzuela City"},{"Raw Address":"199 6TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"007 F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"419 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"222 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"200 FORTUNE Village 5 Valenzuela City Parada Valenzuela City"},{"Raw Address":"0394 (G.) SAN ANDRES STREET Parada Valenzuela City"},{"Raw Address":"8 VENANIO RD. P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"234 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"116 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"31 F. SANT IAGOS T. Parada Valenzuela City"},{"Raw Address":"200C CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"310 MENEZ CMPD. PARADA Valenzuela City"},{"Raw Address":"351 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"#255 TOMASA ST. Parada Valenzuela City"},{"Raw Address":"0306 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"168N SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"LT 6B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"228-A S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"BLK4 LOT7 TANDANG MANANG TMHOA Parada Valenzuela City"},{"Raw Address":"287 BO. PARADA SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"457-F KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"400 SAN ANDRES Parada Valenzuela City"},{"Raw Address":"366 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"320 A SANTIAGO DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"442 P GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"BLK.1 LOT12 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"170 DOON COMP. SALAZAR Parada Valenzuela City"},{"Raw Address":"77 PARADA ROAD EXTENSION Parada Valenzuela City"},{"Raw Address":"307 FELISA STREET Parada Valenzuela City"},{"Raw Address":"KALYE ONSE BUKID Parada Valenzuela City"},{"Raw Address":"268 25TH Fortune Village 5. Parada Valenzuela City"},{"Raw Address":"257 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"KA BERONG ST. PARADA Valenzuela City"},{"Raw Address":"UNIT 1 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"SALASAR ST. Parada Valenzuela City"},{"Raw Address":"2860 140 E FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"357 FRANCISCO Parada Valenzuela City"},{"Raw Address":"276 SANTOLAN PARADA Valenzuela City"},{"Raw Address":"FILEZA BUKID Parada Valenzuela City"},{"Raw Address":"150 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"B3L3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"266B 24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"264 B 4TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"207 FILISA BUKID Parada Valenzuela City"},{"Raw Address":"095 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"131 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"122 B KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"39-K RAMON ST. Parada Valenzuela City"},{"Raw Address":"246 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"LOT 6 B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"245 19TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"141 FORTUNE DRIVE PARADA RD. Parada Valenzuela City"},{"Raw Address":"33 F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"132 LAGDAMEO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"200 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"284 P. DEGUZMAN Parada Valenzuela City"},{"Raw Address":"456 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"149 A 6TH ST. KAMAGONG ROAD Parada Valenzuela City"},{"Raw Address":"168 DOON COMPOUND SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"207 STREET FILISA BUKID Parada Valenzuela City"},{"Raw Address":"01 CALLE ONSE DULO Parada Valenzuela City"},{"Raw Address":"201 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"233 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"022 EUGENIO Parada Valenzuela City"},{"Raw Address":"365 TATA ANDRES ST.PARADA Valenzuela City"},{"Raw Address":"92 FORTUNE DR. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"366 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"55 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"155 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"L12 BURGOS ST Parada Valenzuela City"},{"Raw Address":"110 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"237 19TH ST. Parada Valenzuela City"},{"Raw Address":"B4 L11 GINTONG SILANGAN COMP. F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"297 D TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"B4 L11 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"60 PARADA RD. Fortune Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"50 PARADA ST. PARADA Valenzuela City"},{"Raw Address":"1288 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"247 S.DEGUZMAN Parada Valenzuela City"},{"Raw Address":"290 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"2532 140 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"429 BURGOS ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"274 Parada Valenzuela City"},{"Raw Address":"250 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"207 22ND STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"243 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"B2 L1 S. DE GUZMAN ST. VillageA Parada Valenzuela City"},{"Raw Address":"CALLE ONCE ST. PARADA Valenzuela City"},{"Raw Address":"150 ALICIA ST Parada Valenzuela City"},{"Raw Address":"121 Parada Valenzuela City"},{"Raw Address":"169 DON COMPOUND SALAZAR ST Parada Valenzuela City"},{"Raw Address":"158 NARRA ST. Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ Parada Valenzuela City"},{"Raw Address":"168 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"254 25TH. Parada Valenzuela City"},{"Raw Address":"424 BURGOS Parada Valenzuela City"},{"Raw Address":"125 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"33 Parada Valenzuela City"},{"Raw Address":"466C KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"158 ALICIA ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"274 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"1288 KAMAGONG STREET CORNER 6TH STREET Parada Valenzuela City"},{"Raw Address":"138 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"440 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"415 Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"320 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"93 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"100 E CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"237 19TH Parada Valenzuela City"},{"Raw Address":"214 IPIL ST. Parada Valenzuela City"},{"Raw Address":"252 DEGUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"107 E.LAGDAMEO ST. FVF. 4 PARADA Valenzuela City"},{"Raw Address":"258 INT. S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"210 21TH STREET COR. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"CORNER 23 RD. ST. FOERTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39 PARADA RD. STREET Parada Valenzuela City"},{"Raw Address":"412-B P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"184 Parada Valenzuela City"},{"Raw Address":"140 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"15 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"SISCAR APARTMENT ADOR ST Parada Valenzuela City"},{"Raw Address":"369 T.ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"028 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"116 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"67 B PARADA ROAD EXIT FORTUNE6 Parada Valenzuela City"},{"Raw Address":"407-B P.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"122 CALLE II PARADA Valenzuela City"},{"Raw Address":"249 Parada Valenzuela City"},{"Raw Address":"161 YAKAL ST. COR. MOLAVE Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"215 21ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"168 SALAZAR Parada Valenzuela City"},{"Raw Address":"FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"116 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"170SALAZAR ST Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"415 TATA ERO ST Parada Valenzuela City"},{"Raw Address":"175-B RAMON STREET Parada Valenzuela City"},{"Raw Address":"28 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"215 PARADA Valenzuela City"},{"Raw Address":"39-B RAMON ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"101 M. DE GULA STREET Parada Valenzuela City"},{"Raw Address":"128 PARADA ROAD FVG Parada Valenzuela City"},{"Raw Address":"201 22ND ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"BENMARIE 21ST ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"231 A BELARDO ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"466-C KA BERONG ST.KAINGIN Parada Valenzuela City"},{"Raw Address":"34 PARADA ST. Parada Valenzuela City"},{"Raw Address":"406 Parada Valenzuela City"},{"Raw Address":"395 SAN ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"#92 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"234 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"339 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"192 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"139 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"021 EUGENIO BARIO Parada Valenzuela City"},{"Raw Address":"175 FELISA ST. Parada Valenzuela City"},{"Raw Address":"F. Village 5 Parada Valenzuela City"},{"Raw Address":"422 BURGOZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"132 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"201 22ND ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"267 PETRA Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST Parada Valenzuela City"},{"Raw Address":"410 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"250 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"LT 6 B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"469-B KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"487 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"# 95 A. F. SNTIAGO Parada Valenzuela City"},{"Raw Address":"99 SATURN ST F SANTIAGO Parada Valenzuela City"},{"Raw Address":"227 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"236 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"441 Parada Valenzuela City"},{"Raw Address":"41 B. TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"0506 UNIT 2 TINDALO ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"117 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"465 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"95 M DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"308 JIMENES COMP. Parada Valenzuela City"},{"Raw Address":"293 ILOCTO ST. PARADA Valenzuela City"},{"Raw Address":"#26 MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"206 D 22ND ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"500 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"14 DIAMOND STREET Parada Valenzuela City"},{"Raw Address":"83 CAPT. CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"207 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"86 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"4541 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"204 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"25 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"264 19TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"333 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"299 BO. PARADA Valenzuela City"},{"Raw Address":"387 S.DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"53 SALAZAR RD. BOPARADA Valenzuela City"},{"Raw Address":"137 FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"BENMARIE COMPD. 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"230 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"LOT 2 DIAMOND ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"012 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"136 KAMAGONG ST Parada Valenzuela City"},{"Raw Address":"090 CAPT. CRUZ ADOR ST. Parada Valenzuela City"},{"Raw Address":"273 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"204 ANTHONY STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ ST Parada Valenzuela City"},{"Raw Address":"B1 L3 SAPPHIRE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"186 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"180 23RD ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"207 FELIZA ST Parada Valenzuela City"},{"Raw Address":"224 20TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"207 22ND ST. Parada Valenzuela City"},{"Raw Address":"161 A SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"146 Fortune Village 6 NARRA ST. Parada Valenzuela City"},{"Raw Address":"378 A. TATA ANDRES Parada Valenzuela City"},{"Raw Address":"169 D 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"249 ABELLARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"2531 M.DELOS REYES ST. PARADA Valenzuela City"},{"Raw Address":"456 KAINGIN Parada Valenzuela City"},{"Raw Address":"MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"64 PARADA RD. FORTUNE Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"B-7 L-7 BURGOS ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"310 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"458 P. ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"308 A. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"009 CABRAL ST. Parada Valenzuela City"},{"Raw Address":"WEST CVR Parada Valenzuela City"},{"Raw Address":"9E PARADA RD. PARADA Valenzuela City"},{"Raw Address":"# 347 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST.GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 7 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"07 HIYAS HOMES CORAL ST. Parada Valenzuela City"},{"Raw Address":"199 21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"389 IMPONG JUANA ST. Parada Valenzuela City"},{"Raw Address":"325 T MANANG ST Parada Valenzuela City"},{"Raw Address":"188 DE GULA ST. Parada Valenzuela City"},{"Raw Address":"0002 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"415 B TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"223 A BELARDO ST. Parada Valenzuela City"},{"Raw Address":"456 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"#15 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"51 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"198 RAMON FORUNTE Village 4 Parada Valenzuela City"},{"Raw Address":"85 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"39 A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"98 KAMAGONG Parada Valenzuela City"},{"Raw Address":"LOT 2 BLK. 2 SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"178 RAMON Parada Valenzuela City"},{"Raw Address":"448 ROMARAO SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"423 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"331 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"235 S DU GUZMAN ST Parada Valenzuela City"},{"Raw Address":"254 25ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"113 KAMAGONG FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"B1L5 TMHOA TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"98 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"PEARL ST. HIYAS HOMES SUBD. BO. Parada Valenzuela City"},{"Raw Address":"357 J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST. DOON CPND. Parada Valenzuela City"},{"Raw Address":"BLOCK 1 LOT 12 BURGOS ST. FV7 Parada Valenzuela City"},{"Raw Address":"199 21 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"17 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"225 ABELARDO STREET Parada Valenzuela City"},{"Raw Address":"272 IMPONG JUANA ST. S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"101 E. LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"25 PARADA RD. Parada Valenzuela City"},{"Raw Address":"169 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"25 ST. FV5 Parada Valenzuela City"},{"Raw Address":"268 25TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"406 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"ure Name and Signature Parada Valenzuela City"},{"Raw Address":"BLOCK 7 LOT 17 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"357 J. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"297 TADANG MANANG Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"131 CAPT. CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"366 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"01 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"472 KABERONG ST. Parada Valenzuela City"},{"Raw Address":"117 KAMAGONG STREET Parada Valenzuela City"},{"Raw Address":"87 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"183 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"055 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"260 TATA ROMAN STREET Parada Valenzuela City"},{"Raw Address":"185 D FELIZA ST. Parada Valenzuela City"},{"Raw Address":"9 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"4-3 GINTONG SILANGAN F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMPOUND 21ST STREET Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ CMPD. PARADA Valenzuela City"},{"Raw Address":"26 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"112 Parada Valenzuela City"},{"Raw Address":"019 PARADA Valenzuela City"},{"Raw Address":"33 EARTH F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"260 RIZALIN ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"mplete. Parada Valenzuela City"},{"Raw Address":"80 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"156 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"407 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"442 ST. PARADA Valenzuela City"},{"Raw Address":"377 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"412B P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"2345 DE GUZMAN Parada Valenzuela City"},{"Raw Address":"232 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"272 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"469 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"98L KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"83 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"349 CAINGIN Parada Valenzuela City"},{"Raw Address":"244 7 ST. FV 5 Parada Valenzuela City"},{"Raw Address":"130 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"153 PARADA Valenzuela City"},{"Raw Address":"86 SALVADOR ST. BRGY. PARADA Valenzuela City"},{"Raw Address":"244 FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"311 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"39B RAMON ST. Parada Valenzuela City"},{"Raw Address":"199 BM COMP. 21 ST FV5 Parada Valenzuela City"},{"Raw Address":"ILOCTO ST. PARADA RD. Valenzuela City Parada Valenzuela City"},{"Raw Address":"B19 EARTH ST Parada Valenzuela City"},{"Raw Address":"261 25ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"429 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"220 SALVADOR ST. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"166 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"229 ABELARDO ST.FV 4 Parada Valenzuela City"},{"Raw Address":"BLK. 6 LOT 7 Parada Valenzuela City"},{"Raw Address":"99 VENUS Parada Valenzuela City"},{"Raw Address":"94 B. FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"BLK. 3 LOT 12 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"2OO C. CALLE ONSE Parada Valenzuela City"},{"Raw Address":"56 P. DE GUZMAN TATA ERRO ST Parada Valenzuela City"},{"Raw Address":"443 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"LOT 31 EARTH ST. SANTIAGO Parada Valenzuela City"},{"Raw Address":"201 A. FELIZA ST Parada Valenzuela City"},{"Raw Address":"B3L16 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"255 TOMASA ST. Parada Valenzuela City"},{"Raw Address":"192 A M . DEGULA ST. Parada Valenzuela City"},{"Raw Address":"B2L23 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"Village 5&6 Parada Valenzuela City"},{"Raw Address":"230 - 1 D. S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"SAPPHIRE ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"368 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"091 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"77 CCAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"192 RAMON ST FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"Q4289 KAMAGONG ST Parada Valenzuela City"},{"Raw Address":"LOT 1 BLK 1 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"131 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"466 C. KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"2 TINDALO ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"039 D. SANTIAGO COMPOUND Parada Valenzuela City"},{"Raw Address":"73 GOMEZ ST Parada Valenzuela City"},{"Raw Address":"B4 L 18 PEARL ST. HIYAS Parada Valenzuela City"},{"Raw Address":"BLK. 7 37 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"1ST ST. BEN MARIE COMP. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"50 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"94B FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"440 RUMARAO ST. Parada Valenzuela City"},{"Raw Address":"12 VENUS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"0394 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"257 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"319 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"BLK 5 LOT 20 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"440 RUMARAO CMPD. Parada Valenzuela City"},{"Raw Address":"DOOR2 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"B2L3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"184 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"415 TIA MANANG ST. PARADA Valenzuela City"},{"Raw Address":"349 F FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"18 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"233 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"290 M. ILOCTO STREET Parada Valenzuela City"},{"Raw Address":"B6 L9 PEARL CORNER JADE HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"302 B CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"W77 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"12 VENUS ST. E&E COMPD. Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"BLK4 LOT3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"314 D JIMENEZ COMPOUND ST. Parada Valenzuela City"},{"Raw Address":"252 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"497 Parada Valenzuela City"},{"Raw Address":"181 23RD STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"113 KAMAGONG STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 10 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"297 PARADA Valenzuela City"},{"Raw Address":"403-B TANDANG MANANG ST.PARADA Valenzuela City"},{"Raw Address":"40 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"UNIT 2 #14 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"68 B PARADA RD Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"193-A M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"349 F. FARNCISCO ST. Parada Valenzuela City"},{"Raw Address":"199 6STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"138 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"028 EUGENIO Parada Valenzuela City"},{"Raw Address":"DOOR B PILAR ST. FORTUNE IV Parada Valenzuela City"},{"Raw Address":"411 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"264 Parada Valenzuela City"},{"Raw Address":"456 KAINGIN ST. BO. PARADA Valenzuela City"},{"Raw Address":"99 VENUS ST. Parada Valenzuela City"},{"Raw Address":"175 MOLAVE ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"409 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"80 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"206 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"272- A S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"122 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"32B 258 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"315 MENES CMPD. PARADA Valenzuela City"},{"Raw Address":"19 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"37 D. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"28 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"415 ZAMORA STREET FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"216 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"349 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"391 SANTALON RD. Parada Valenzuela City"},{"Raw Address":"BET 6 AND 7 ST. FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"275 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"416 TATA ERRO ST. Parada Valenzuela City"},{"Raw Address":"12 - I CONSUELO ST. Parada Valenzuela City"},{"Raw Address":"460 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"320 2nd Floor E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"440 ROMARAO COMPD. WESTSERVICE ROAD Parada Valenzuela City"},{"Raw Address":"96 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"JVC PARADA Valenzuela City"},{"Raw Address":"BEN MARIE CMPD. 21ST ST. Parada Valenzuela City"},{"Raw Address":"188 MOLAVE COR 6TH ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"194 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"269 INANG PETRA Parada Valenzuela City"},{"Raw Address":"130 5TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"#77 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"097 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"363 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"CORNER HIYAS STREET Parada Valenzuela City"},{"Raw Address":"16 VENUS ST. E&E COMPD. Parada Valenzuela City"},{"Raw Address":"VAL. M.M. Parada Valenzuela City"},{"Raw Address":"283 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"7 PARADA RD. Parada Valenzuela City"},{"Raw Address":"17 D. F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"6 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"283 S . MARTHA ST. Parada Valenzuela City"},{"Raw Address":"276 PILAR ST. Parada Valenzuela City"},{"Raw Address":"138 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 11 SAPPHIRE ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"468 CAINGIN ST. Parada Valenzuela City"},{"Raw Address":"309 MENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"45 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"083 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"888 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"222 20TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B5 L 2 F FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"B2 L17 F. FRANCISCO ST. SILANGAN Parada Valenzuela City"},{"Raw Address":"117A CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"064 FORTUNE RD. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"#170 SALAZAR ST. DOON COMPOUND Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPD. FV5 Parada Valenzuela City"},{"Raw Address":"443-3 SERVICE RD Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 8 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"169 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"257 FORTUNE DR. PARADA Valenzuela City"},{"Raw Address":"289 SANTOLAN RD Parada Valenzuela City"},{"Raw Address":"97A CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"COR. OLIVA ST. & RAMON ST. FV4 Parada Valenzuela City"},{"Raw Address":"341 20TH ST.FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"216 ANTHONY ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"200 C. CALLE ONSE Parada Valenzuela City"},{"Raw Address":"26 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"130 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"9 PLUTO F .SANTIAGO Parada Valenzuela City"},{"Raw Address":"32 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"244 7TH ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"DE GULA APT. Parada Valenzuela City"},{"Raw Address":"344 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"116 CALLE ONSE BUKID Parada Valenzuela City"},{"Raw Address":"174 FELIZA ST Parada Valenzuela City"},{"Raw Address":"358 J.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"525 T. EUGENIO ST Parada Valenzuela City"},{"Raw Address":"361 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"357 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"170 DOON COMP. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"355 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"2735 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"232 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"0909 ADOR STREET Parada Valenzuela City"},{"Raw Address":"022 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"233 FRANCISCO ST.PARADA Valenzuela City"},{"Raw Address":"203 B. VENUS STREET F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"438 WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"198 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"250 UNIT 9 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"267 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"276 E S. DEGUZMAN Parada Valenzuela City"},{"Raw Address":"064 PARADA ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"0250 DR2 CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"26 MARS ST. F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"181 RAMON ST. Parada Valenzuela City"},{"Raw Address":"75 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST FV4 Parada Valenzuela City"},{"Raw Address":"442 18TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"LT 6-B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ Parada Valenzuela City"},{"Raw Address":"248 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"015 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"165 UNIT 3 ACACIA FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"149 NARRA ST. Parada Valenzuela City"},{"Raw Address":"419 ZAMORA ST. FORTUNE Village 7 BO. Parada Valenzuela City"},{"Raw Address":"095 FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"25TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"113 Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 8 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"88 F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"99 VENUS ST F SANTIAGO Parada Valenzuela City"},{"Raw Address":"416 TATAERO Parada Valenzuela City"},{"Raw Address":"161 SALAZAR Parada Valenzuela City"},{"Raw Address":"306 CAPT.DAET COMP. Parada Valenzuela City"},{"Raw Address":"95 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"131 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"194 RAMON STREET Parada Valenzuela City"},{"Raw Address":"270 A.S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"ALICIA ST.Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"336 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"BLK 16 LOT 12 M DELOS REYES ST. Parada Valenzuela City"},{"Raw Address":"142 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"77 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"B1 L 3 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"1827 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"68 B PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"L1 B2 A. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"B1 L1 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"111E LAGDAMEO STREET Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"SANTOAGO ST. Parada Valenzuela City"},{"Raw Address":"166 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"207 ANTHONY Parada Valenzuela City"},{"Raw Address":"107 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"451 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"245 7 TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"196 MOLAVE ST FORTUNE6 Parada Valenzuela City"},{"Raw Address":"193 FORTUNE DR. ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"299 B TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"441 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"278 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"321-1 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"431 B. GOMEZ ST Parada Valenzuela City"},{"Raw Address":"LOT 10 NEPTUNE F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 8 F.FRANCISCO ST. GINTOMG Parada Valenzuela City"},{"Raw Address":"124 LAGDAMEO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"446 GOMEZ ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"277 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"362A TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"182 K MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"341 21ST ST. BENMARIE COMP. Parada Valenzuela City"},{"Raw Address":"#230 18TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"055 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"414 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"0098 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"45 PARADA RD. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"281 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"388 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"145 UNIT B NARRA FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"257 M. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"172 MOLAVE ST. CORNER IPIL FV6 Parada Valenzuela City"},{"Raw Address":"1-DEMBUSCADO APT. 230 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"290 SANTOLAN RD. KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"224 21ST ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLACK 6 LOT 11 F FRANCISCO GINTONG Parada Valenzuela City"},{"Raw Address":"435 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"287 SANTOLAN Parada Valenzuela City"},{"Raw Address":"# 61 MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"199 BENMARIE GARDEN 21 ST. Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. E&E SUBD. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"39 RAMON ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"E.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"169 F. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"348 CAPT. F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"0385 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"287 SANTOLAN ST. PARADA Valenzuela City"},{"Raw Address":"328 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"173 23RD ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"007 Parada Valenzuela City"},{"Raw Address":"14 B PEARL ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"MOLAVE ST. COR. IPIL Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"011 PARADA ST. Parada Valenzuela City"},{"Raw Address":"166 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"186-D 6TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"310 MENEZ STREET Parada Valenzuela City"},{"Raw Address":"28 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"212 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"354 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"LOT 6B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"453 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"194 19TH STREET Parada Valenzuela City"},{"Raw Address":"232 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"BLK 4 LOT1 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"333 T. MANANG ST. PARADA Valenzuela City"},{"Raw Address":"207 ANTHONY ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"B5 L17 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"116 Parada Valenzuela City"},{"Raw Address":"24 ST F SANTIAGO Parada Valenzuela City"},{"Raw Address":"123 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"115 JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"236 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"377 18ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39-B RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"141 Parada Valenzuela City"},{"Raw Address":"441 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"274 PILAR ST FORTUNE FOUR Parada Valenzuela City"},{"Raw Address":"190 24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"064 PARADA ROAD FORTUNE Village.. Parada Valenzuela City"},{"Raw Address":"362-B TATA ANDRES Parada Valenzuela City"},{"Raw Address":"243 SOUTH DE GUZMAN Parada Valenzuela City"},{"Raw Address":"104 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"LOT 12 BLOCK 5 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"317 F Parada Valenzuela City"},{"Raw Address":"5TH ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"320 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"247 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"257 A. M. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"29 PARADA RD Parada Valenzuela City"},{"Raw Address":"157-B PARADA Valenzuela City"},{"Raw Address":"61 MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"192 RAMOS ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"135 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"147 ALICIA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"349 A FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"0035 KAINGIN Parada Valenzuela City"},{"Raw Address":"04 MARS ST. F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"073 PARADA ROAD EXTENSION Parada Valenzuela City"},{"Raw Address":"182 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"173 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"270 CONSUELO ST. Parada Valenzuela City"},{"Raw Address":"290 ILOCTO COMPOUND P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"249 ABELARDO Parada Valenzuela City"},{"Raw Address":"45 PARADA RD. FORTUNE Village 5 Valenzuela City Parada Valenzuela City"},{"Raw Address":"15 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"95 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"215 DAET COMPD. Parada Valenzuela City"},{"Raw Address":"234 S.DE GUZMAN ST. PARADA RD. Parada Valenzuela City"},{"Raw Address":"HIYAS HOMES SUBD. SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"258-S.DE GUZMANST. PARADA Valenzuela City"},{"Raw Address":"22A EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"#131 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"355 J.FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID STREET Parada Valenzuela City"},{"Raw Address":"109 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"347 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"19 BLK. 4 FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"BLK. 6 LOT 4 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"244 7TH ST. FORTUNE VIILL. 5 Parada Valenzuela City"},{"Raw Address":"ALICIA ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. Parada Valenzuela City"},{"Raw Address":"098 7TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"272 PILAR Parada Valenzuela City"},{"Raw Address":"349 CAPT. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"#28 NARRA ST. Parada Valenzuela City"},{"Raw Address":"172 23RD ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"256 RIZALINA ST. FORTUNE FOUR Parada Valenzuela City"},{"Raw Address":"100 LAGMADEO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"21ST. FORTUNE DRIVE COFR. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"470 KAINGIN RD. Parada Valenzuela City"},{"Raw Address":"111 YAKAL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"136 E. LAGDAMEO STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"259 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"465 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"132 C KAMAGONG FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"317 A.TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"96 PARADA Valenzuela City"},{"Raw Address":"193 6TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"252 ABELARDO Parada Valenzuela City"},{"Raw Address":"285 25TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"80 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"334 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"015 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"203-18TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"Q5151 CASTRO COMPD. Parada Valenzuela City"},{"Raw Address":"411 TATAERO ST. Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ. PARADA Valenzuela City"},{"Raw Address":"199 ANTHONY ST. PARADA Valenzuela City"},{"Raw Address":"177 FELISA ST. Parada Valenzuela City"},{"Raw Address":"78 PARADA ROAD EXTN. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"B PARADA ROAD Parada Valenzuela City"},{"Raw Address":"310 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"184 FELIZA Parada Valenzuela City"},{"Raw Address":"68 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"135 A CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"KALYE ONSE Parada Valenzuela City"},{"Raw Address":"PARADA ST. Parada Valenzuela City"},{"Raw Address":"250-B S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"Q 551 CASTRO COMPD. Parada Valenzuela City"},{"Raw Address":"130 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"2-B F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"181 RAMON ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"2695 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"088 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"ADOR STREET Parada Valenzuela City"},{"Raw Address":"67 PARADA RD. Parada Valenzuela City"},{"Raw Address":"297-D TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"21 FORTUNE STREET Parada Valenzuela City"},{"Raw Address":"440 RUMARAO COMPD. SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"39 RAMON ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"94 A. FELIZA ST. Parada Valenzuela City"},{"Raw Address":"181 A. MOLAVE ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"424 A. BURGOS ST Parada Valenzuela City"},{"Raw Address":"440 SERVICE RD. ROMARAO COMP. Parada Valenzuela City"},{"Raw Address":"93 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"310 JIMENES COMP. Parada Valenzuela City"},{"Raw Address":"1010 A. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"388 IMPONG JUANA S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"44 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"279 PILAR ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"11 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"230-1-D S. D GUZMAN ST EMBUSCADO APT. Parada Valenzuela City"},{"Raw Address":"14 DIAMOND ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"207 22ND ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"320 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"218 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"175 23 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"113 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"286 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"85 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"ADOR ST SISCAR APT. Parada Valenzuela City"},{"Raw Address":"19 BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"8 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"LOT 12 BLK 1 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"126 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"#3 A. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"152 ALICIA STREET Parada Valenzuela City"},{"Raw Address":"36 PARADA RD. Parada Valenzuela City"},{"Raw Address":"326 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"358 J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"247 J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"278 TATA ENTONG ST. S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"199 FORTUNE Village 5 21ST STREET Parada Valenzuela City"},{"Raw Address":"282 SANTALON RD. PARADA Valenzuela City"},{"Raw Address":"257 ADOR ST Parada Valenzuela City"},{"Raw Address":"098 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"330 T.AMANANG ST. PARADA Valenzuela City"},{"Raw Address":"BLK. 4 LOT 5 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"BENMARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"1223 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"7 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"200 A. CALLE ONSE Parada Valenzuela City"},{"Raw Address":"140 E. FRANCISCO Parada Valenzuela City"},{"Raw Address":"091-B CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"325 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"411 P. DE GUZMAN ST. TATAERO Parada Valenzuela City"},{"Raw Address":"140 NARRA ST FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"F. FRANCISCO BAGONG SILANG Parada Valenzuela City"},{"Raw Address":"32- F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. FV4 Parada Valenzuela City"},{"Raw Address":"TATA ANDRES ST. RIVERA CMPD. Parada Valenzuela City"},{"Raw Address":"165 ACACIA Parada Valenzuela City"},{"Raw Address":"FORTUNE DRIVE 501 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"2 JUPITER ST. Parada Valenzuela City"},{"Raw Address":"470 KAINGIN ST. SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"297 T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"35 5TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 9 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"02 TINDALO ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"39 A PARADA RD. Parada Valenzuela City"},{"Raw Address":"114 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 207 22ND ST. Parada Valenzuela City"},{"Raw Address":"97 KAPT. CRUZ PARADA Valenzuela City"},{"Raw Address":"12B PARADA ROAD Parada Valenzuela City"},{"Raw Address":"257 20ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"UNIT 1 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"204 6 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"CALLE ONSE DULO Parada Valenzuela City"},{"Raw Address":"257 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"378 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"003 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"242 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"306 - A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"14 PARADA RD. Parada Valenzuela City"},{"Raw Address":"287 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"272 A S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"435-C ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"204 ANTHONY Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"358 J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"116 CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"15 DIAMOND STREET Parada Valenzuela City"},{"Raw Address":"412 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"452 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"0024 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"24 JENUS Parada Valenzuela City"},{"Raw Address":"BLOCK 4 LOT 17 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"172 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"206 22ND ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"504 FORTUNE DR. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"277 PILLAR ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"425-T.MANANG ST. BO.PARADA Valenzuela City"},{"Raw Address":"Fortune Village 5 21ST. STREET Parada Valenzuela City"},{"Raw Address":"122 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"168 DOON COMP. Parada Valenzuela City"},{"Raw Address":"18 ROAD Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE 21ST. Parada Valenzuela City"},{"Raw Address":"11 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"FORTUNE IV Parada Valenzuela City"},{"Raw Address":"0378 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"243F S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"#73 B. PARADA RD. EXT. FV7 Parada Valenzuela City"},{"Raw Address":"185 RAMON ST. Parada Valenzuela City"},{"Raw Address":"469 C. KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"441 PARADA Valenzuela City"},{"Raw Address":"470 KAINGEN ST. Parada Valenzuela City"},{"Raw Address":"120 FORTUNE Village PARADA Valenzuela City"},{"Raw Address":"35 PARADA RD. Parada Valenzuela City"},{"Raw Address":"175 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"273 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"#45 A. F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"247 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"365 TATA ANDES ST. Parada Valenzuela City"},{"Raw Address":"198 RAMON ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"297 - D TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"192 RAMON ST. Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"#203 18TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"182-D MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"385 Parada Valenzuela City"},{"Raw Address":"M.DEGULA Parada Valenzuela City"},{"Raw Address":"155 ALICIA Parada Valenzuela City"},{"Raw Address":"360 DE GUZMAN ST. J- FRANCISCO Parada Valenzuela City"},{"Raw Address":"LOT 1 PHASE 2 F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"202 F.SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"9 PLUTO ST. Parada Valenzuela City"},{"Raw Address":"31 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"0013 7TH UNIT C FV 5 Parada Valenzuela City"},{"Raw Address":"101 DE GULA PARADA Valenzuela City"},{"Raw Address":"185-D FELIZA ST. Parada Valenzuela City"},{"Raw Address":"291 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"15-F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"204 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"022 EUGENIO STREET Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"283 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"231 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"412 P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"257 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"160 MOLAVE ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"243 19TH ST. Parada Valenzuela City"},{"Raw Address":"349 CAPTAIN FRANCISCO Parada Valenzuela City"},{"Raw Address":"135 CONSUELO ST.FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"357 Parada Valenzuela City"},{"Raw Address":"242 19TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#144 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"09 PARADA RD. Parada Valenzuela City"},{"Raw Address":"377 APT. 4 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"189 24TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"223 ABELARDO FORTUNE FOUR Village Parada Valenzuela City"},{"Raw Address":"29 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"100 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"468 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"462 P. GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"252 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"B1 L12 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"011 PARADA Valenzuela City"},{"Raw Address":"442 P. GOMEZ ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"351 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"58 Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"230-S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"116 CAPT CRUZ ST Parada Valenzuela City"},{"Raw Address":"115 JADE ST HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"160 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"0334 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"207 Parada Valenzuela City"},{"Raw Address":"274 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"199 6TH ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"197 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"313 MENEZ COMP. Parada Valenzuela City"},{"Raw Address":"009 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"LOT 19 BLK 3 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"340 20TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"9 F SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"332 TANDANG MANANG PARADA Valenzuela City"},{"Raw Address":"197 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"116 CAPT. CRUZ CALLE ONSE Parada Valenzuela City"},{"Raw Address":"#93 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"44B PARADA ROAD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"277 PILAR STREET Parada Valenzuela City"},{"Raw Address":"258 S. D EGUZMAN STREET Parada Valenzuela City"},{"Raw Address":"15 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"325 T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"219 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"343 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"93 B SALAZAR ST Parada Valenzuela City"},{"Raw Address":"397 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"212 ANTHONY ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"225 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"31 MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"257 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"405 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"111 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"406 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"256 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"40 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"207 FELIZA ST. BUKID Parada Valenzuela City"},{"Raw Address":"05 FORTUNE Village 6TH ST. Parada Valenzuela City"},{"Raw Address":"111 A KAMAGONG FORTUNE Village Parada Valenzuela City"},{"Raw Address":"193 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"186 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"062 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"190 6ST MOLAVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"#39 RAMON ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"415 ZAMORA ST. FORTUNE Village 7 PARADA Valenzuela City"},{"Raw Address":"252 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"416 TATA ERRO Parada Valenzuela City"},{"Raw Address":"25 TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"187 CAPT. CRUZ PARADA Valenzuela City"},{"Raw Address":"#39C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"315 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"174 MOLAVE Parada Valenzuela City"},{"Raw Address":"448 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"255 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"325 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"362 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"1819 PEARLS ST. Parada Valenzuela City"},{"Raw Address":"422 BURGOS ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"451 ZAMORA ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"170 MOLAVE ST Parada Valenzuela City"},{"Raw Address":"446 F. GOMEZ Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 12 BURGOS STREET Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE ST. Parada Valenzuela City"},{"Raw Address":"56 P. DE GUZMAN TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"142 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"315 JIMENEZ CMPD. Parada Valenzuela City"},{"Raw Address":"365 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"150 NARRA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"28 CAPT. CRUS ST. Parada Valenzuela City"},{"Raw Address":"1 MO DIZON COMP. TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"117 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"310 JIMENEZ Parada Valenzuela City"},{"Raw Address":"031 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"407 P.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"168 A CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"4560 SAPPHIRE ST. HIYAS Parada Valenzuela City"},{"Raw Address":"440 RUMARAO COMP. Parada Valenzuela City"},{"Raw Address":"154 NARRA ST Parada Valenzuela City"},{"Raw Address":"244 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"297-D TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"96 PARADA ST. PARADA Valenzuela City"},{"Raw Address":"172 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"310 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"118 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"470-A KAINGIN Parada Valenzuela City"},{"Raw Address":"135 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"FORTUNE Village 4 RAMON ST. PARADA Valenzuela City"},{"Raw Address":"FATIMA COMP. PARADA RD. Parada Valenzuela City"},{"Raw Address":"407 P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"173 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"247 DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"24TH STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"443 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"BLOCK 5 LOT 20 GINTONG SILANGAN F. Parada Valenzuela City"},{"Raw Address":"215 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"207 CALLE ONSE DULO Parada Valenzuela City"},{"Raw Address":"27 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"409 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"41 B TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"130 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"2 TINDALO ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"207 FELEZA ST. Parada Valenzuela City"},{"Raw Address":"24TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"546 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"246 C S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"LOT 5 BLK 10 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"012 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"141 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"243 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"340 Fortune Village 5 21ST STREET Parada Valenzuela City"},{"Raw Address":"MERCURY STREET F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"357 J. FRANCISO ST. Parada Valenzuela City"},{"Raw Address":"351 P. FRNACISCO S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"199 BENMARIE 21ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"425 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"121 C CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"175 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"#9E PARADA ROAD Parada Valenzuela City"},{"Raw Address":"110 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"245 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"158 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"178 KAMAGONG Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"B3 L 3 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"BLK. 5 LOT 14 GINTONG SILANGAN F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"289 D SANTOLAN ROAD Parada Valenzuela City"},{"Raw Address":"406 BANDINO ST P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"42 PARADA RD. Parada Valenzuela City"},{"Raw Address":"32 B 258 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"327 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"112 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"42 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"195 19TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"199 21ST ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B1 L13 349 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"168- SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"071 FORTUNE Village 6 PARADA Valenzuela City"},{"Raw Address":"207 FILEZA BUKID Parada Valenzuela City"},{"Raw Address":"204 B ANTHONY STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"A CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"291 PARADA RD. Parada Valenzuela City"},{"Raw Address":"DR. 1 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"37 A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"268 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"324 T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"155 ALICIA FV 4 Parada Valenzuela City"},{"Raw Address":"43 PARADA RD. Parada Valenzuela City"},{"Raw Address":"236 7TH STREET Parada Valenzuela City"},{"Raw Address":"471 KABERONG STREET Parada Valenzuela City"},{"Raw Address":"0104 AS8 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"#94 A. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"002 YAKAL ST COR ACACIA Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"351 PINAGPALA F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"405 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"11 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"176 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"154 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"L22 EARTH F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"271 CONSUELO ST. FORTRUNE 4 Parada Valenzuela City"},{"Raw Address":"336 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"032 PARADA Valenzuela City"},{"Raw Address":"190 6TH ST. COR. MOLAVE PARADA Valenzuela City"},{"Raw Address":"181 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"234 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"349 CAPT.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"270 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"B5 L11 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"329 T.MANANG Parada Valenzuela City"},{"Raw Address":"5TH ST. Parada Valenzuela City"},{"Raw Address":"095 FORTUNE DRIVE ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"359 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"114 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"T.EUGENIO RD. PARADA Valenzuela City"},{"Raw Address":"410 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"2645 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"10E FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"177 23RD STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"272 PILAR ST. Parada Valenzuela City"},{"Raw Address":"99 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"412 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"25 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"104 LAGDAMEO ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"18 PARAD ROAD Parada Valenzuela City"},{"Raw Address":"405 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"097 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"L19 B3 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"L-5 BLK-06 NARRA ST. Parada Valenzuela City"},{"Raw Address":"466-C KAINGIN KABERONG Parada Valenzuela City"},{"Raw Address":"F. SANTIAGO 31 EARTH ST. Parada Valenzuela City"},{"Raw Address":"195 CALLE ONSE BO.PARADA Valenzuela City"},{"Raw Address":"19 CARACTA VillageE KAINGIN Parada Valenzuela City"},{"Raw Address":"77 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"182 D MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"141 NARRA STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"203 Parada Valenzuela City"},{"Raw Address":"347 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"266 F 24TH STREET Parada Valenzuela City"},{"Raw Address":"45A EARTH ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"365 F TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"206-4 22ND ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"441 RUMARAO CPD. SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"341 21ST FOTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"225 ABELARDO Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"72 FORTUNE Village 6 PARADA RD. Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 4 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"171 SALAZAL Parada Valenzuela City"},{"Raw Address":"084 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"039 D. SANTIAGO RAMON ST. FV4 Parada Valenzuela City"},{"Raw Address":"120 CORNER ST. 25TH ST. Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"224H 7TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"199 - 21 ST. FV5 Parada Valenzuela City"},{"Raw Address":"258 25TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"133 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"212 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"242 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"096 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"BL 3 LT 24 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"0351 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"358 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"127 YAKAL ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE GARDEN 21ST FORTUNE Parada Valenzuela City"},{"Raw Address":"371 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"391F P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"37 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"DULO Parada Valenzuela City"},{"Raw Address":"438-SERVILE ROAD Parada Valenzuela City"},{"Raw Address":"UNIT 5 ALFONSO APARTMENT M. DE GULA Parada Valenzuela City"},{"Raw Address":"219 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"456 SERVICE ROAD. Parada Valenzuela City"},{"Raw Address":"009 R.CABRAL ST. Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"162 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 22 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"20 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"28 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"313 MENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"JADE CORNER SAPPHIRE Parada Valenzuela City"},{"Raw Address":"413 H P.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"# 9 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"277 PILAR ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"411-B P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"341 21ST BENMARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"257 S. DE GUZMA ST.N Parada Valenzuela City"},{"Raw Address":"452 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"230 YAKAL COR. NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"ILOCTO C5 Parada Valenzuela City"},{"Raw Address":"25TH STREET FORTUNE V Parada Valenzuela City"},{"Raw Address":"8 IPIL ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"197 19TH ST. COR. 21ST. Fortune Village 5 BO. Parada Valenzuela City"},{"Raw Address":"214 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"222 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"202 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"98 KAMAGONG ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"194 6TH STREET Parada Valenzuela City"},{"Raw Address":"# 94 A. FELEZA ST. Parada Valenzuela City"},{"Raw Address":"338 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"109 25TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"# 26 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"220 C 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"207 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"151 ALICIA Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"230 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"274 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"#18 GP WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"4180 NARRA ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"199 6TH ST. FV5 Parada Valenzuela City"},{"Raw Address":"132 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"161 SALAZAR ST. BO. PARADA Valenzuela City"},{"Raw Address":"237 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"412 TATAERO 6 Parada Valenzuela City"},{"Raw Address":"257 M DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"BLOCK 5 LOT10 JADE ST HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"199 21ST. BENMARIE COMP. FORTUNE Parada Valenzuela City"},{"Raw Address":"267 S DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"430 GOME ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"123 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"L-31 B-8 PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"359 J. FRNACISCO ST. Parada Valenzuela City"},{"Raw Address":"Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"50 PARADA RD. Parada Valenzuela City"},{"Raw Address":"187 FELIZA Parada Valenzuela City"},{"Raw Address":"90 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"DR 1 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"122 CONSUELO ST. FORTUNE 04 Parada Valenzuela City"},{"Raw Address":"290 CAINGIN ST. Parada Valenzuela City"},{"Raw Address":"442 P. GOMEZ Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"44 PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"377 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"273 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"114 YAKAL ST. Parada Valenzuela City"},{"Raw Address":"B2L14 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"318 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"173 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"153 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"26. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"95 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 7 FORTUNE Village Parada Valenzuela City"},{"Raw Address":"393 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"79 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"136 KAMAGONG STREET Parada Valenzuela City"},{"Raw Address":"91-B S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"10 E.FRANCISCO Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"325 TANDANG ST. Parada Valenzuela City"},{"Raw Address":"185 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"NARRA ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"330 T. MANANG STREET Parada Valenzuela City"},{"Raw Address":"240 T. MANANG ST Parada Valenzuela City"},{"Raw Address":"099 PARADA Valenzuela City"},{"Raw Address":"507 23ST FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"24 A CAPT CRUZ ST Parada Valenzuela City"},{"Raw Address":"251 25TH ST. Parada Valenzuela City"},{"Raw Address":"169 ACACIA STREET Parada Valenzuela City"},{"Raw Address":"F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"36 B. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"204 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"144 DALAWAN ST.PARADA Valenzuela City"},{"Raw Address":"113 LAGDAMEO ST. FV. 4 PARADA Valenzuela City"},{"Raw Address":"199 21 ST. Parada Valenzuela City"},{"Raw Address":"365 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"#27 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"189-24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#39 PARADA RD. Parada Valenzuela City"},{"Raw Address":"50 PARADA ROAD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"139 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"109 E. LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"LOT 15 A207 FELISA BUKID Parada Valenzuela City"},{"Raw Address":"0274 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"207 LOT15 AREA-A FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"168 MOLAVE Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"37 C PARADA RD. PARADA Valenzuela City"},{"Raw Address":"203B VENUS ST. Parada Valenzuela City"},{"Raw Address":"#41 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"150 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"107 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"184 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"30 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"421 ZAMORA ST Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"190-C 6TH ST. COR KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"272 PILAR ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"234 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"279 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"124 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"244 7TH ST. FORTUNE 05 Village Parada Valenzuela City"},{"Raw Address":"316 JIMINEZ CMPD. Parada Valenzuela City"},{"Raw Address":"207 FELIZA ST. PARADA BUKID Parada Valenzuela City"},{"Raw Address":"0192 E 6TH ST. FORTUNE Village PH 6 Parada Valenzuela City"},{"Raw Address":"229 18TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST. FV4 Parada Valenzuela City"},{"Raw Address":"100 A CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"121 LAGDAMEO ST.Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"404 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"160 NARRA ST. COR. 6TH ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"334 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"377 18ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"71 Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"# 26 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"325 TADANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"230 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"B2 L20 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"4541 MOLAVE ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"23 EUGENIO Parada Valenzuela City"},{"Raw Address":"MM. Parada Valenzuela City"},{"Raw Address":"068 PARADA RD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"486 KAINGEN ST. Parada Valenzuela City"},{"Raw Address":"16 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"454 SERVICE RD. HIYAS SUBD. PARADA Valenzuela City"},{"Raw Address":"155 ALICIA ST. FV4 Parada Valenzuela City"},{"Raw Address":"351 Parada Valenzuela City"},{"Raw Address":"148 DALAWAN Parada Valenzuela City"},{"Raw Address":"0279 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"100 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"34 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"464 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"502 FORTUNE DRIVE COR. 23RD ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"381 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"160 MOLAVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"197 ANTHONY Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"ACASIA ST. KAINGIN RD. PARADA Valenzuela City"},{"Raw Address":"375 TATA ANDRES ST.PARADA Valenzuela City"},{"Raw Address":"290 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"207 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"34 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"DOOR2 M. DE GULA ST Parada Valenzuela City"},{"Raw Address":"20 A F SANTIAGO Parada Valenzuela City"},{"Raw Address":"203 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"242 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"130 KAMAGONG Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"396 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"B5 L8 JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"278 PILAR ST Parada Valenzuela City"},{"Raw Address":"7 TATA-ERO ST. Parada Valenzuela City"},{"Raw Address":"341 BO.PARADA Valenzuela City"},{"Raw Address":"242 19TH ST. Parada Valenzuela City"},{"Raw Address":"824 BURGOS ST Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"BLK 03 LOT 12 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"103 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"233 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"442 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"117 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"343 CAPT. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"BLK5 LOT10 JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"107 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"313 JIMENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"273 PILAR ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"242 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"0258 FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"139 NARRA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"190 24TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"3 200 CALLE ONCE PARADA Valenzuela City"},{"Raw Address":"243 7 STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"87 BO Parada Valenzuela City"},{"Raw Address":"351 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"81 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"326 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"266 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"467 Parada Valenzuela City"},{"Raw Address":"173 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"31 F. SANTIAGO EARTH ST. Parada Valenzuela City"},{"Raw Address":"182 D MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"250B CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"409A P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"171 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"450 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"283 S DE GUZMAN SR. Parada Valenzuela City"},{"Raw Address":"308 MENES Parada Valenzuela City"},{"Raw Address":"146 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"B1L17 PARADA RD EXT. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"19 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"207 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"65 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"205 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"BLK. 5 LOT 17 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"B 4 L 10 F. FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"18 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"85 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"162 MOLABE ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"MOLAVE ST. COR. YAKAL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST Parada Valenzuela City"},{"Raw Address":"165 YAKAL STREET FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"225 Fortune Village 4 ABILARDO ST. Parada Valenzuela City"},{"Raw Address":"F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"283 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"2 PASO DE BLAS Parada Valenzuela City"},{"Raw Address":"418 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"249 7TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"200 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"144 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"146 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"L10 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"403 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"85 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"315 MENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"26 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 1 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"440 GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"471 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"154 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"132 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"339 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPOUND FORTUNE Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 4 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"400 SAN ANDRES STREET Parada Valenzuela City"},{"Raw Address":"297 D T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"LOT 6 BF SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"385 MERCURY ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"052 PARADA ROAD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"098 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"269 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"075 GOMEZ ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 6ST. Parada Valenzuela City"},{"Raw Address":"137 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"269 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"39B RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"18223 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"165 FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"301 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"456 -H KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"COR. 23 STREET FV 5 Parada Valenzuela City"},{"Raw Address":"LAGDAMO ST. Parada Valenzuela City"},{"Raw Address":"374 Parada Valenzuela City"},{"Raw Address":"108 RAMON STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"B1 L7 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"204 FELISA ST. Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"79 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"45 A F SANTIAGO Parada Valenzuela City"},{"Raw Address":"204 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"68 B PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"BLK 10 LOT 12 7TH STREET Parada Valenzuela City"},{"Raw Address":"248 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"178 RAMON ST. FOERTUNE 4 Village Parada Valenzuela City"},{"Raw Address":"320 D S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"27 DIAMOND ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"325 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"LOT 6 BLK 2 TINADALOST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"241 S. DE GUSMAN ST. Parada Valenzuela City"},{"Raw Address":"340 20TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"260 TATA ROMAN S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"141 FORTUNE DRIVE FORTUNE V Parada Valenzuela City"},{"Raw Address":"123 TATA ANDREZ ST. Parada Valenzuela City"},{"Raw Address":"446 GOMEZ ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"030 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"252 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO ST. MANUKAN Parada Valenzuela City"},{"Raw Address":"444 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"39 D. SANTIAGO COMPOUND Parada Valenzuela City"},{"Raw Address":"163 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"57 PARADA ROAD Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"293 A.ILOCTO ST. PARADA Valenzuela City"},{"Raw Address":"#002 YAKAL ST. Parada Valenzuela City"},{"Raw Address":"171 RAMON ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"220 D 21ST ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"225 TOMASA ST. PARADA Valenzuela City"},{"Raw Address":"202 FELIZA ST Parada Valenzuela City"},{"Raw Address":"297-C TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"0118 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"2675 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"315 MENES COMP. PARADA Valenzuela City"},{"Raw Address":"442 ROSILLAS ST. Parada Valenzuela City"},{"Raw Address":"276 SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"179 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"7 ALFONSO APARTMENT Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"LOT 1 BLCK 7 PARADA RD. Parada Valenzuela City"},{"Raw Address":"B1 L12 BUGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"199 Fortune Village 5 21ST Parada Valenzuela City"},{"Raw Address":"438 SERVICE ROAD. Parada Valenzuela City"},{"Raw Address":"1956 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"168 Parada Valenzuela City"},{"Raw Address":"210 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"096 FORTUNE Village Parada Valenzuela City"},{"Raw Address":"68 PARADA RD. Parada Valenzuela City"},{"Raw Address":"CA[T.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"#2 TINDALO ST. Parada Valenzuela City"},{"Raw Address":"321-1 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"8 SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"175 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"117 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"075 GOMEZ ST. FORTUNE Village 07 Parada Valenzuela City"},{"Raw Address":"247 DE GUZM Parada Valenzuela City"},{"Raw Address":"UNIT 3 SALAZAR Parada Valenzuela City"},{"Raw Address":"122 CALLE ONCE ST. Parada Valenzuela City"},{"Raw Address":"234 19 Fortune Village 5 ST Parada Valenzuela City"},{"Raw Address":"091 FORTUNE DRIVE ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"207 CALLE ONSE FELISA BUKID Parada Valenzuela City"},{"Raw Address":"1 F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"279 Parada Valenzuela City"},{"Raw Address":"59 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"162E SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"103 DE GULA ST. Parada Valenzuela City"},{"Raw Address":"164 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"006 PARADA Valenzuela City"},{"Raw Address":"BLK 1 LOT 3 SAPPHIRE ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"151DALAWAN ST Parada Valenzuela City"},{"Raw Address":"137 KAINGIN Parada Valenzuela City"},{"Raw Address":"301 7TH ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"# 95 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"525 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"123 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"F. FRANCISO ST. Parada Valenzuela City"},{"Raw Address":"9 F SANTIAGO Parada Valenzuela City"},{"Raw Address":"56 PARADA ROAD CORNER IPIL ST. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 4 TANDANG MANANG HOA Parada Valenzuela City"},{"Raw Address":"S-8104 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"290 ILOCTO COMPOUND Parada Valenzuela City"},{"Raw Address":"447 GOMEZ Parada Valenzuela City"},{"Raw Address":"143 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"199 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"70 PARADA RD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"BLK.1 LOT 3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"411 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"117 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"23 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"002 Parada Valenzuela City"},{"Raw Address":"139 DALAWAN Parada Valenzuela City"},{"Raw Address":"39 K RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"039 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"BLK 7 LOT 11 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"170 B SALAZAR ST Parada Valenzuela City"},{"Raw Address":"1314A TATA ANDRES Parada Valenzuela City"},{"Raw Address":"349 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"248 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"237-S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"087 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"26 MARS F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"247 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"FATIMA COMPOUND Parada Valenzuela City"},{"Raw Address":"L1 B2 S. DE GUZMAN ST. VillageA Parada Valenzuela City"},{"Raw Address":"415 TATA ERO ST.3 Parada Valenzuela City"},{"Raw Address":"BL 1 LT 12 GINTONG SILANGAN 349 FRANCISCO Parada Valenzuela City"},{"Raw Address":"39 D PARADA ROAD Parada Valenzuela City"},{"Raw Address":"297 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"14 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"351 CAPT. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"286 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"161 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"192 M.DE GULA ST. PARADA Valenzuela City"},{"Raw Address":"402 SAN ANDRES STREET Parada Valenzuela City"},{"Raw Address":"256 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"185 RAMON ST. FV4 Parada Valenzuela City"},{"Raw Address":"91 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"108-B RAMON ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"56 Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"199 21ST ST. Parada Valenzuela City"},{"Raw Address":"457 INT. KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"09 BO PARADA RD Parada Valenzuela City"},{"Raw Address":"281-A S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"164 Parada Valenzuela City"},{"Raw Address":"93 C CAP. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"299 PARADA JIMENEZ ST. Parada Valenzuela City"},{"Raw Address":"268 25TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39 RAMON ST. Parada Valenzuela City"},{"Raw Address":"131 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"31 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"141 Fortune Village 5&6 Village Parada Valenzuela City"},{"Raw Address":"FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"202 MOLAVE ST Parada Valenzuela City"},{"Raw Address":"LOT 8 MERCURY ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"0260 I TATA ROMAN S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"114 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"188 MOLAVE COR. 6TH ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"201 SELIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"9 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"269 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMP. Parada Valenzuela City"},{"Raw Address":"290 M. ILOCTO COMPOUND Parada Valenzuela City"},{"Raw Address":"INT. ZAMORA ST. Fortune Village 7 PARADA Valenzuela City"},{"Raw Address":"Village 5 Parada Valenzuela City"},{"Raw Address":"267 PETRA ST S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"136 E. LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"125 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"246 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"4560 SAPPHIRE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"307 PEARL ST. HIYAS SUBD. PARADA Valenzuela City"},{"Raw Address":"08 CALLE ONCE ST. Parada Valenzuela City"},{"Raw Address":"357 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"204 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"B1 L7 PARADA ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"122 B. CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"96 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"402 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"001 PARADA RD. Parada Valenzuela City"},{"Raw Address":"341 20TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"SUBDIVISION Parada Valenzuela City"},{"Raw Address":"LOT 11 BLK 5 JADE ST. Parada Valenzuela City"},{"Raw Address":"118 DOOR 4 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"361 J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"LOT 10 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"0094B C CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"096 FORTUNE Village 5 ST. PARADA Valenzuela City"},{"Raw Address":"456 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"198 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"320 T.MANANG PARADA Valenzuela City"},{"Raw Address":"B4L12 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"125 CONSUELO STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"203 ALICIA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"95 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"137 FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"455 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"82 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"123A KAMAGONG ST. FORTUNE Village 5&6 Parada Valenzuela City"},{"Raw Address":"353 J.FRANCISCO Parada Valenzuela City"},{"Raw Address":"389 S.DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"94-C FELIZA ST. Parada Valenzuela City"},{"Raw Address":"175 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"0250 DR2 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"DE GUZMAN CMPD ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"39 RAMON Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"170SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"257 RIZALINA ST. Parada Valenzuela City"},{"Raw Address":"184 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#99 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"198 Parada Valenzuela City"},{"Raw Address":"310 D JIMENEZ COMPOUND ST. Parada Valenzuela City"},{"Raw Address":"153 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"411 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"8 C F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"39 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST. DOON COMPD. Parada Valenzuela City"},{"Raw Address":"FORTUNE7 Parada Valenzuela City"},{"Raw Address":"23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"135 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"177 ST. CAPT. CRUZ PARADA Valenzuela City"},{"Raw Address":"195 FORTUNE Village 5&6 Parada Valenzuela City"},{"Raw Address":"824 BURGOS ST. F.V 7 Parada Valenzuela City"},{"Raw Address":"028 PARADA Valenzuela City"},{"Raw Address":"442 GOMEZ ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"161 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"237 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"467 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"12 5TH ST. FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"99 VINUS ST. Parada Valenzuela City"},{"Raw Address":"341 21ST BENMARIE AGLEHAM COMPOUND Parada Valenzuela City"},{"Raw Address":"110 LAGDAMEO FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"404 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"85 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"387 IMPONG JUANA ST. Parada Valenzuela City"},{"Raw Address":"404 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"299 BO. Parada Valenzuela City"},{"Raw Address":"BLK 5 LOT 3 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"192E 6ST. FORTUNR Village 5 Parada Valenzuela City"},{"Raw Address":"100 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"467 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"154 ALICIA STREET Parada Valenzuela City"},{"Raw Address":"213 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"175 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"199 6TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"262 Parada Valenzuela City"},{"Raw Address":"289-D S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"171 MOLAVE ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"0345 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. F.SANTIAGO COMPD. Parada Valenzuela City"},{"Raw Address":"187 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"266 24TH STREET Parada Valenzuela City"},{"Raw Address":"3 B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"244 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"B5 L7 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"308 JIMENEZ ST. Parada Valenzuela City"},{"Raw Address":"119 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"391 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"91 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 1 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"443 B SERVICE RD. Parada Valenzuela City"},{"Raw Address":"26 SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"269 24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39-D SANTIAGO COMPD. FV4 Parada Valenzuela City"},{"Raw Address":"97 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"417 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. PARADA Valenzuela City"},{"Raw Address":"194 6 STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"187-A FELISA ST. PARADA Valenzuela City"},{"Raw Address":"31F SANTIANGO VENUS ST Parada Valenzuela City"},{"Raw Address":"173 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"0014 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"237 Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 7 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"178 MOLAVE ST Parada Valenzuela City"},{"Raw Address":"145 C NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"196 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"S. DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"86 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"260 TATA ROMAN Parada Valenzuela City"},{"Raw Address":"260 RIZALINA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"027 PARADA RD. Parada Valenzuela City"},{"Raw Address":"411 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"260 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"132 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"139 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"INT. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"88 CPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"111 UNIT B KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"194 COR. 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"167 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"389 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"93-A CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"119B PEARL ST. Parada Valenzuela City"},{"Raw Address":"223 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"192 RAMON ST.FV 4 Parada Valenzuela City"},{"Raw Address":"93-A CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"393 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"407 TANDANG Parada Valenzuela City"},{"Raw Address":"411 C P.DE GUZMAN ST. TATA ERO Parada Valenzuela City"},{"Raw Address":"140-B E FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"440 P. GOMEZ ST. FORTUEN 7 Parada Valenzuela City"},{"Raw Address":"E EUGENIO ST Parada Valenzuela City"},{"Raw Address":"148 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"287 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"386 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"101A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"ST Parada Valenzuela City"},{"Raw Address":"367 FELISA Parada Valenzuela City"},{"Raw Address":"14 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"FORT Village Parada Valenzuela City"},{"Raw Address":"169D 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"460 GOMEZ STREET Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"86 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"13 Parada Valenzuela City"},{"Raw Address":"407 P.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"297B TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"440 RUMARAO COMPOUND SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"B1 Parada Valenzuela City"},{"Raw Address":"259 M DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"399 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"238 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"356 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"245 ABELARDO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"174 FELISA Parada Valenzuela City"},{"Raw Address":"351 PINAGPALA F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"9 PLOTO ST. F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"315 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"030 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"12 B PARADA ROAD Parada Valenzuela City"},{"Raw Address":"444 SERVICE RR. Parada Valenzuela City"},{"Raw Address":"123-2 CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"88 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"90 ADOR STREET Parada Valenzuela City"},{"Raw Address":"327 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"357 J. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"186 UNIT 3 FELIZA ST Parada Valenzuela City"},{"Raw Address":"369 TATA ANDRESS STREET Parada Valenzuela City"},{"Raw Address":"200 FORTUNE DR. ST. Parada Valenzuela City"},{"Raw Address":"154 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"179 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"233 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"406 T. MANANG Parada Valenzuela City"},{"Raw Address":"184 FELISA ST. Parada Valenzuela City"},{"Raw Address":"271 Parada Valenzuela City"},{"Raw Address":"185 FELISA Parada Valenzuela City"},{"Raw Address":"384 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"268 FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"243 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"241 19TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"BLK 6 LOT 4 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"18 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"111 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"369 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"ADOR ST. Parada Valenzuela City"},{"Raw Address":"172 MOLAVE ST Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"310 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"AURORA COMP. S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"14 B. PARADA RD. Parada Valenzuela City"},{"Raw Address":"199 BENMARIE GARDEN 21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 8 TMHOA Parada Valenzuela City"},{"Raw Address":"15 DIAMOND ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"69 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"199 21ST AGLEHAM COMPD. Parada Valenzuela City"},{"Raw Address":"3498 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"476 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST. FV 4 Parada Valenzuela City"},{"Raw Address":"161 ALICIA ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"094 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"309 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"180 23RD ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"141 NARRA ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"23 T EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"442 GOMEZ ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"9001 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"240 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"4792 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"227 A BELARDO ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"275 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"38 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"204 BF SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"468 KINGIN ST. Parada Valenzuela City"},{"Raw Address":"347-F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"341 20TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"CALLE ONSE ST. PARADA Valenzuela City"},{"Raw Address":"220 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"311 MENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"124 E. LAGDAMEO STREET Parada Valenzuela City"},{"Raw Address":"225 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"469 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"199 21ST FV5 Parada Valenzuela City"},{"Raw Address":"243 PACING Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 5 TMHOA Parada Valenzuela City"},{"Raw Address":"0250 UNIT 11 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"333 T.MANANG ST. BO.PARADA Valenzuela City"},{"Raw Address":"ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"352 J.FRANCISCO Parada Valenzuela City"},{"Raw Address":"#283 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"95 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"188 MOLAVE ST. CORNER 6TH ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"275 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"138 E. LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"143 DALAWAN STREET Parada Valenzuela City"},{"Raw Address":"DE GULA APT. CALLE ONSE Parada Valenzuela City"},{"Raw Address":"144 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"377 18 STREET Village Parada Valenzuela City"},{"Raw Address":"325 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"199 21 ST. BENMARIE COMP. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"020 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"BLK 3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"264 19TH ST.FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"20 F. SANTIAGO EARTH ST. Parada Valenzuela City"},{"Raw Address":"195 KALYE ONSE Parada Valenzuela City"},{"Raw Address":"26 NARRA ST. FV 5&6 Parada Valenzuela City"},{"Raw Address":"402 7TH ST. Parada Valenzuela City"},{"Raw Address":"247 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"269 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"75 GOMEZ STREET FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"279 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"203 VENUS ST. E-E COMP. Parada Valenzuela City"},{"Raw Address":"504 FORTNE DRIVE Parada Valenzuela City"},{"Raw Address":"168 DOON COMP. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"286 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"317 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"349F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"004 BO. Parada Valenzuela City"},{"Raw Address":"27 A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"384 S. DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"394 SAN ANDRES Parada Valenzuela City"},{"Raw Address":"194 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"#97 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"260 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"101 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"247 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"456 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"346 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"1106 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"FORT Village 4 Parada Valenzuela City"},{"Raw Address":"135 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"88 SAPPHIRE ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"115 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"132 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"162-D SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"203 VENUS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"246 PARADA RD. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"CALLE 11 BUKID ST. Parada Valenzuela City"},{"Raw Address":"130 NARRA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"244 7TH ST. FV5 Parada Valenzuela City"},{"Raw Address":"365 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"243 7TH ST. Fortune Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"412 PARADA Valenzuela City"},{"Raw Address":"214 IPIL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"098 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"63 PARADA ROAD EXTENSION Parada Valenzuela City"},{"Raw Address":"247-C S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"141DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"190D 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"258 GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"306 CAPT. DAET CPD. PARADA Valenzuela City"},{"Raw Address":"234 DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"291 Parada Valenzuela City"},{"Raw Address":"178 RAMON STREET Parada Valenzuela City"},{"Raw Address":"113 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"8 FIFTH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"100 A CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"B1 L10 E. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"050 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"272 S DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"141 UNIT 4 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"GINTONG SILANGAN F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"260 TATA ROMAN ST. Parada Valenzuela City"},{"Raw Address":"203 6TH STREET FORTUNE VillageE 5-6 Parada Valenzuela City"},{"Raw Address":"083 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"202 ANTHONY ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"411 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"PEARL ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"225 DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"70 PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"274 S.DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"274 BO.PARADA Valenzuela City"},{"Raw Address":"10 PARADA RD. Parada Valenzuela City"},{"Raw Address":"407 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"B1L8 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"10 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"390 Parada Valenzuela City"},{"Raw Address":"403 FORTUNE Village PARADA Valenzuela City"},{"Raw Address":"165 SALAZAR ST. BO. PARADA Valenzuela City"},{"Raw Address":"412 A P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"111-A E.LAGDAMEO ST. PARADA Valenzuela City"},{"Raw Address":"TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"94 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"324 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"73-B PARADA RD. EXT FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"187 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"415 TATA ERO Parada Valenzuela City"},{"Raw Address":"116 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"359 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"0250 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"59 C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"199 AGLEHAM COMPD. 21ST ST. Parada Valenzuela City"},{"Raw Address":"227 ABELARDO FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"4 Parada Valenzuela City"},{"Raw Address":"257 M. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"410 A-P. DE GUZMAN ST. VAL. M.M. Parada Valenzuela City"},{"Raw Address":"103 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"33 E. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"0346 FELISA ST. Parada Valenzuela City"},{"Raw Address":"24 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"19 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"275 PILAR ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"172 MOLAVE ST Fortune Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"018 EUGENIO Parada Valenzuela City"},{"Raw Address":"319 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"863 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"316 MENES COMPOUND Parada Valenzuela City"},{"Raw Address":"31 UNIT 4&5 KAMAGONG ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"271 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"8F CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"23RD ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"255 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"80 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"196 MALAVE ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"355 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"124 B CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"24TH BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"425 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"24 B F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"271 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"438 SERVICE RD.PARADA Valenzuela City"},{"Raw Address":"36 C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"40- P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"RASILIA 438 PARADA Valenzuela City"},{"Raw Address":"39-C RD. Parada Valenzuela City"},{"Raw Address":"155 ALICIA STREET Parada Valenzuela City"},{"Raw Address":"315 JIMENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"211 21TH ST. FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"95 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"393 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"212 21ST. ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"E & E COMP. Parada Valenzuela City"},{"Raw Address":"390 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"223 ABELARDO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"455 ILOCTO ST. Parada Valenzuela City"},{"Raw Address":"056 PARADA RD. FV6 Parada Valenzuela City"},{"Raw Address":"352 G. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"183 23RD. ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"170 SALAZAR ST. DOON COMP. Parada Valenzuela City"},{"Raw Address":"202 6TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"176 23RD ST. Parada Valenzuela City"},{"Raw Address":"190 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"89 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"199 21 ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"301 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"254 25TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"245 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"90 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"36 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"B5 L11 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"104 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"441 SERVICE ROAD RUMARAO COMP. Parada Valenzuela City"},{"Raw Address":"86 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"94 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"NO 172 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"252-A BLOCK 2 LOT 2 S. DE GUZMANS ST. Parada Valenzuela City"},{"Raw Address":"14-B PEARL ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"196 22ND ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"150 ALICIA ST. PARADA Valenzuela City"},{"Raw Address":"188 RAMON ST Parada Valenzuela City"},{"Raw Address":"215 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"248 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"17 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"199 B CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"17 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 23 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"440 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"117 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"007 F.SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"168 DOON COMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"320 Parada Valenzuela City"},{"Raw Address":"8 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"460 P GOMEZ ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"148 NARRA ST. Parada Valenzuela City"},{"Raw Address":"E. SANTIAGO Parada Valenzuela City"},{"Raw Address":"30 B. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPD. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"140 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"90 CAPT.CRUZ Parada Valenzuela City"},{"Raw Address":"#170 SALAZAR T. DOON CMPD Parada Valenzuela City"},{"Raw Address":"009 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"185C FELIZA ST. Parada Valenzuela City"},{"Raw Address":"T.EUGENIO Parada Valenzuela City"},{"Raw Address":"121 CONSUELA ST.FV4 Village Parada Valenzuela City"},{"Raw Address":"244 7TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B-4 L-28 PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"240 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"185 B FELIZA ST Parada Valenzuela City"},{"Raw Address":"139 FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"121 CONSUELO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"349 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"365B TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"39 RAMON ST. FORTUNE VillageE Parada Valenzuela City"},{"Raw Address":"20 SALAZAR Parada Valenzuela City"},{"Raw Address":"T. EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"185 FELIZA ST Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ CMPD. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"21 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"25 EUGENIO STREET Parada Valenzuela City"},{"Raw Address":"314 BO.PARADA Valenzuela City"},{"Raw Address":"FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"105 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"464-A KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"279 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"218 FORTUNE Village Parada Valenzuela City"},{"Raw Address":"142 DALAWAN Parada Valenzuela City"},{"Raw Address":"310 MENES ST. Parada Valenzuela City"},{"Raw Address":"RUMARAO COMP. Parada Valenzuela City"},{"Raw Address":"127 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"118 C CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"#80 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"153 PINAGPALA PHASE 2 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"399 SAN ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"96 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"280 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"170 DOON COMPOUND SALAZAR ST Parada Valenzuela City"},{"Raw Address":"075 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"276 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"256 RIZALINA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"251 25TH ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"182 23RD ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"440 RUMARAO COMP. SERVICE RD Parada Valenzuela City"},{"Raw Address":"091 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRES B.O Parada Valenzuela City"},{"Raw Address":"291 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"130 NARRA ST. Parada Valenzuela City"},{"Raw Address":"23RD ST. FORTUNE Village 5 B PARADA Valenzuela City"},{"Raw Address":"19TH ST. Parada Valenzuela City"},{"Raw Address":"271 A. MARIA ST. Parada Valenzuela City"},{"Raw Address":"307 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"225 AVELARDO ST. Parada Valenzuela City"},{"Raw Address":"230 EMBUSCADO COMP. Parada Valenzuela City"},{"Raw Address":"54 KAMAGONG STREET Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"330 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"413 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"L16 B5 349 F.FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"116 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"75 PARADA ROAD FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"NO. 199 21 ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"181 RAMON ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"6 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"60 PARADA RD. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"#113 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"31 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"157 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"14 DIAMOND ST HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"325 PARADA Valenzuela City"},{"Raw Address":"158 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"207 22ND ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 18 PEARL HIYAS Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"415 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"237 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"26TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"067 PARADA ST. Parada Valenzuela City"},{"Raw Address":"126 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"110 KAMAGONG Parada Valenzuela City"},{"Raw Address":"207 22ND ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"18 GP ST. WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"315 JIMENEZ Parada Valenzuela City"},{"Raw Address":"341 PARADA 2OTH ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"LOT 8 BLK.3 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"116 E.LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"888 MOLAVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"414 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"186 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"412 ZAMORA STREET Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"402 7TH ST. FV. 5 PARADA RD. Parada Valenzuela City"},{"Raw Address":"397 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"423 ZAMORA ST FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"224 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"111-A E.LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"88 D CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"BF SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"182 23RD ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"248 J.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"463 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"351 PHASE 2 PINAGPALA F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"140 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"320S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"207 PILISA BUKID Parada Valenzuela City"},{"Raw Address":"LE 116 CAPT. CRUZ ST. CALLE ONSE Parada Valenzuela City"},{"Raw Address":"B1L10 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"123 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"6 NARRA ST. Parada Valenzuela City"},{"Raw Address":"12-B KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"143 CAPT. CRYZ ST. Parada Valenzuela City"},{"Raw Address":"207 ST. FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"103 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"227 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"165 UNIT 4 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"115 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"324 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"260 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"Village 6 Parada Valenzuela City"},{"Raw Address":"217 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 11 SAPPHIRE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"199 BENMARIE ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"103 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"87 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"234 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"87 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"112 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"GINTONG SILANG F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"24TH ST. FORTUNE5 Parada Valenzuela City"},{"Raw Address":"273 PILAR Parada Valenzuela City"},{"Raw Address":"171 RAMON ST. FORTUNE Village IV Parada Valenzuela City"},{"Raw Address":"31 F. SANTIAGOP ST. Parada Valenzuela City"},{"Raw Address":"#88 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"235 S Parada Valenzuela City"},{"Raw Address":"466-C KABERONG KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"439 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"01 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"244 7TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"242 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"Valenzuela City. Parada Valenzuela City"},{"Raw Address":"282 PILAR ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"364 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"018 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"9 5TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"8 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"407 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"02 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"280 PILAR ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"332 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"199 6TH ST. FORTUNE Village 6 PARADA Valenzuela City"},{"Raw Address":"188 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 17 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"333 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"450 NORTH DIVERSION PARADA Valenzuela City"},{"Raw Address":"258 S.DEGUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"341 20TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"22 ST. FORTUNE Village 5 PARADA RD. Parada Valenzuela City"},{"Raw Address":"204 VENUS ST. Parada Valenzuela City"},{"Raw Address":"98 PARADA ROAD Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"184 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"111 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"#39 A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"347 FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"36A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"130 KAMAGONG ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"0099 B. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"320-E S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"0345 KALYE 11 Parada Valenzuela City"},{"Raw Address":"59 BANDINO CORP. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"456 KAKAWATE ST. Parada Valenzuela City"},{"Raw Address":"290 KAINGIN Parada Valenzuela City"},{"Raw Address":"204 C.F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"442 P. GOMEZ ST Parada Valenzuela City"},{"Raw Address":"345 CAPT. FRANCISCO Parada Valenzuela City"},{"Raw Address":"320 TANDANG MANAG ST. Parada Valenzuela City"},{"Raw Address":"#468 M KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"173 SALAZAR ST. PUROK 1 Parada Valenzuela City"},{"Raw Address":"1F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"407 M DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"504 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"136 E LAGDAMEO ST. Fortune Village 4 VIL Parada Valenzuela City"},{"Raw Address":"308 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"45 A FSANTIAGO Parada Valenzuela City"},{"Raw Address":"001 Parada Valenzuela City"},{"Raw Address":"194 FORTUNE Village 5 CORNER 6 TH ST. Parada Valenzuela City"},{"Raw Address":"068A PARADA RAOD Parada Valenzuela City"},{"Raw Address":"0317 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"86 SALVADOR STREET Parada Valenzuela City"},{"Raw Address":"8 FIFTH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"501 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 43 LOT 23 FORTUNES 5 Parada Valenzuela City"},{"Raw Address":"291 PARADA Valenzuela City"},{"Raw Address":"270 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"94 PARADA RD. Parada Valenzuela City"},{"Raw Address":"199 Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"315 MENEZ COMP. Parada Valenzuela City"},{"Raw Address":"199 21 STREET BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"BLK. 6 LOT 5 GINTONG SILANGAN F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"122 B KAMAGONG Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"# 31 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"187 24TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B 1 L10 E. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"410 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"13 5TH. ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"307 A PEARL ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"15 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"S. DE GUZMAN ST. 215 DAET COMPOUND Parada Valenzuela City"},{"Raw Address":"442 P.GOMEZ ST. FORTUNE Village 7 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"L1 PHASE 2 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"255 TOMASA ST. Valenzuela City Parada Valenzuela City"},{"Raw Address":"LOT 9 BLK 1 SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"10 5TH FORTUNE Parada Valenzuela City"},{"Raw Address":"18 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"199 6TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"266 24TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"224 ABELARDO ST.FV 4 Parada Valenzuela City"},{"Raw Address":"PILAR ST. FORTUNE Village4 MALINTA Valenzuela City Parada Valenzuela City"},{"Raw Address":"204 ANTHONY STREET Parada Valenzuela City"},{"Raw Address":"FELIZA ST Parada Valenzuela City"},{"Raw Address":"228 18TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"409 P. DEGUZMAN ST Parada Valenzuela City"},{"Raw Address":"290 PARADA Valenzuela City"},{"Raw Address":"130 CAPT.CRUZ PARADA Valenzuela City"},{"Raw Address":"315 MENES COMPOUND Parada Valenzuela City"},{"Raw Address":"294 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"132 KAMAGONG ST. FORTUNE Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"57 PARADA RD. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"165 SALZAR ST Parada Valenzuela City"},{"Raw Address":"78 PARADA RD. EXT. FORTUNE Village 7 Valenzuela City Parada Valenzuela City"},{"Raw Address":"355 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"B3 L2 GINTONG SILANGAN 349 FRANCISCO Parada Valenzuela City"},{"Raw Address":"FORTUNE Village 4. PARADA Valenzuela City"},{"Raw Address":"054 PARADA ROAD CORNER FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"275 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"457 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"188 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"22 EUGENIO ST Parada Valenzuela City"},{"Raw Address":"199 BENMARIE AGLEHAM COMPOUND Parada Valenzuela City"},{"Raw Address":"272 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"274 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"132 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"091 DOOR 3 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"COR. KAMAGONG Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"322 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"290 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"BLK 5 LOT 7 349 F. FRANCISCO GINTONG Parada Valenzuela City"},{"Raw Address":"34A F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"170 SALAZAR Parada Valenzuela City"},{"Raw Address":"LOT 20 A F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"259 25 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"246 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"488 ZAMORA STREET Parada Valenzuela City"},{"Raw Address":"78B PARADA Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"035 SALVADOR ST. PARADA Valenzuela City"},{"Raw Address":"039 D.SANTIAGO COMP. RAMON ST. F.V.PH4 Parada Valenzuela City"},{"Raw Address":"88 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"FORTUNE5 Parada Valenzuela City"},{"Raw Address":"258 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"278 SANTOLAN RD Parada Valenzuela City"},{"Raw Address":"KAINGIN RD. PARADA Valenzuela City"},{"Raw Address":"230 S. DE GUMAN ST. Parada Valenzuela City"},{"Raw Address":"412 TATA ERO ST Parada Valenzuela City"},{"Raw Address":"410 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"COR. CORAL ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"59 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"90 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"147 DALAWA ST. Parada Valenzuela City"},{"Raw Address":"117 E. LAGDAMEO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"183 23RD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"406 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"378 A TATA ANDRES Parada Valenzuela City"},{"Raw Address":"386 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"329 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"320 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"90 D. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"426 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"257 25TH ST. Parada Valenzuela City"},{"Raw Address":"153 SALAZAR Parada Valenzuela City"},{"Raw Address":"199F 6TH FORTUNE Village Parada Valenzuela City"},{"Raw Address":"145 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST. DOON COMP. Parada Valenzuela City"},{"Raw Address":"456-H KAINGIN Parada Valenzuela City"},{"Raw Address":"FELISA STREET Parada Valenzuela City"},{"Raw Address":"100 CAPT CRUZ DE GULA COMP Parada Valenzuela City"},{"Raw Address":"93C CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"141 DALAWAN STREET Parada Valenzuela City"},{"Raw Address":"271 CONSUELO ST. Parada Valenzuela City"},{"Raw Address":"379 TATA ANDRES ST. BO. Parada Valenzuela City"},{"Raw Address":"255 TOMASA Parada Valenzuela City"},{"Raw Address":"125 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"297 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"272-A S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"199 6TH ST. Parada Valenzuela City"},{"Raw Address":"111-C KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"44 B PARADA ROAD Parada Valenzuela City"},{"Raw Address":"CORNER 120 25TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"91 CAPT. CRUZ PARADA Valenzuela City"},{"Raw Address":"08 MARS ST. Parada Valenzuela City"},{"Raw Address":"299 D JIMENEZ COMPOUND ST. Parada Valenzuela City"},{"Raw Address":"401 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"407B P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"365-G TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"80 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"5 PARADA RD Parada Valenzuela City"},{"Raw Address":"39-C PARADA RD. Parada Valenzuela City"},{"Raw Address":"138 E. LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"0036 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"63 PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"121 CONSUELO FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"141FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST.PARADA Valenzuela City"},{"Raw Address":"145 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"260 TATA ROMAN ST. PARADA Valenzuela City"},{"Raw Address":"390 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"330 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"351 E. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"88 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"39 RAMON Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"352 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. FV7 Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"A PEARL ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"302 ABELLARDO Parada Valenzuela City"},{"Raw Address":"272 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"13 UNIT 4 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"92 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"LACAY APT.KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"378 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"207 FILIPA BUKID Parada Valenzuela City"},{"Raw Address":"22 AT EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"94 A. FELISA STREEET Parada Valenzuela City"},{"Raw Address":"FORTUNEVillage6 Parada Valenzuela City"},{"Raw Address":"125 CONSUELO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"#33 EARTH ST. E. SANTIAGO Parada Valenzuela City"},{"Raw Address":"94 CAPTAIN ST. Parada Valenzuela City"},{"Raw Address":"1740 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"442 GOMES ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"320 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"349 KAINGEN Parada Valenzuela City"},{"Raw Address":"2745 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"177 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"7 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"834 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"131 K. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"153 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"246-C S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"411 A.P. DE GUZMAN TATA ERO STREET Parada Valenzuela City"},{"Raw Address":"267 PETRA ST Parada Valenzuela City"},{"Raw Address":"21 BENMARIE COMP. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"170 UNIT 3 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"66 PARADA ROAD FORTUNE Parada Valenzuela City"},{"Raw Address":"242 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"B3 L6 TINDALO ST FV5 Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 AGLEHAM 2IST ST. Parada Valenzuela City"},{"Raw Address":"465 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"104 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"257 25TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"26 F SANTIAGO MARS ST. Parada Valenzuela City"},{"Raw Address":"88 H CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"252 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"6TH STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"279 PILAR ST.FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"390 TATA ANDRES ST . Parada Valenzuela City"},{"Raw Address":"177 CAPTIAN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"61 PARADA ROAD CORNER FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"255 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"230 1/E DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"240 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"416 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"039 PARADA Valenzuela City"},{"Raw Address":"TATA ERRO Parada Valenzuela City"},{"Raw Address":"319 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"30 PARADA RD. Parada Valenzuela City"},{"Raw Address":"FELISA ST.PARADA Valenzuela City"},{"Raw Address":"79 CAPT.CRUZST. PARADA Valenzuela City"},{"Raw Address":"39 B UNIT 5 RAMON ST. Parada Valenzuela City"},{"Raw Address":"437 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"252 ABELARDO STREET Parada Valenzuela City"},{"Raw Address":"#201 FORTUNE Village 5 6TH ST. Parada Valenzuela City"},{"Raw Address":"97 B CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"2 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"067 C PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"239 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"032 PARADA ST. Parada Valenzuela City"},{"Raw Address":"115 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. PESAHAV Village Parada Valenzuela City"},{"Raw Address":"457 KAINGIN ST.PARADA Valenzuela City"},{"Raw Address":"181 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"232 ABELARDO STREET FORTUNE Village NO.4 Parada Valenzuela City"},{"Raw Address":"152 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"12 VENUS ST Parada Valenzuela City"},{"Raw Address":"228 18TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"128 Parada Valenzuela City"},{"Raw Address":"220 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"513 ABCO COMPD. TINDALO ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"L-469 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"455 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"167 6TH ST. Village 5 Parada Valenzuela City"},{"Raw Address":"LOT 9 BLK. 30 UNIT 1 NARRA ST. Parada Valenzuela City"},{"Raw Address":"96 FORTUNE Village 5 ST. PARADA Valenzuela City"},{"Raw Address":"472 PETRA Parada Valenzuela City"},{"Raw Address":"168 ALICIA Parada Valenzuela City"},{"Raw Address":"320 B S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"140 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"470 KAINGIN Parada Valenzuela City"},{"Raw Address":"116 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"100 LAGDAMEO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"I207 Parada Valenzuela City"},{"Raw Address":"411 A P. DE GUZMAN TATA ERO Parada Valenzuela City"},{"Raw Address":"320 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"Q-4 289 KAMAGONG ST.PARADA Valenzuela City"},{"Raw Address":"100 CAPT. CRUZ ST. DE GULA CPD. Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG ST.FV 6 PARADA Valenzuela City"},{"Raw Address":"067 Fortune Village 6 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"26 MARS ST F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"094 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"94-D FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"B13 Parada Valenzuela City"},{"Raw Address":"26 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"331 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"127 LAGDAMEO STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"307 PEARL ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"157 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"038 PARADA RD. Parada Valenzuela City"},{"Raw Address":"315 MENES COMP. PARADA VALENZUELA Parada Valenzuela City"},{"Raw Address":"123 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"392 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"L10 &12 UNITE 7ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"365-J TATA ANDRES Parada Valenzuela City"},{"Raw Address":"199 21ST ST. BENMARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"308 A. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"170 DOON COMP SALAZAR ST Parada Valenzuela City"},{"Raw Address":"416 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"1262 KAMAGONG ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"24 T EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"411 C TATA ERRO STREET Parada Valenzuela City"},{"Raw Address":"173 23RD ST. Parada Valenzuela City"},{"Raw Address":"104 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"Valenzuela City Parada Valenzuela City"},{"Raw Address":"334 A. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"342 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"151 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"274 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"197 ANTHONY Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"UNIT 3-A BLOCK 9 LOT 30 NARRA ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"JADE COR. SAPHIRE ST. HIYAS HOME Parada Valenzuela City"},{"Raw Address":"314 MENES CMPD. Parada Valenzuela City"},{"Raw Address":"160 FELIZA ST Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 13 FRANCISCO G. SILANGAN Parada Valenzuela City"},{"Raw Address":"288 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"20 EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"468-I KAINGIN ST Parada Valenzuela City"},{"Raw Address":"434 ZAMORA ST. FORTUNE Village 7 BO. Parada Valenzuela City"},{"Raw Address":"51 FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMP. 21 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"230 11-F S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"80 Parada Valenzuela City"},{"Raw Address":"45 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"316 MENES COMP Parada Valenzuela City"},{"Raw Address":"197 ANTHONY ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 20 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"V.P.S. COMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"437 ZAMORA STREET Parada Valenzuela City"},{"Raw Address":"BLK2 LOT19 HIYAS SUBD Parada Valenzuela City"},{"Raw Address":"166 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"121 CONSEULO ST. Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST.FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"339 BO. PARADA Valenzuela City"},{"Raw Address":"068 A PARADA ROAD Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"LOT 2 BLK 4 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"152 ACACIA ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"415 ZAMORA ST. Fortune Village 7 PARADA Valenzuela City"},{"Raw Address":"207 CALLE ONSE BUKID DULO Parada Valenzuela City"},{"Raw Address":"351 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"119 B PEARL ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"351 F.FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"161 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"333-C KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"8 SAPPHIRE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"#14 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"172 SALAZAR Parada Valenzuela City"},{"Raw Address":"206 22ND STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"116 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"176 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"122C KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"438 SERVICE RD Parada Valenzuela City"},{"Raw Address":"317 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"0004 BLOCK 4 LOT 3 JADE ST. Parada Valenzuela City"},{"Raw Address":"160 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"115 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"248 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"282 SANTOLAN RD. PARADA Valenzuela City"},{"Raw Address":"8 M LAUREL DRIVE Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"118 CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"410 P DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"232 G. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"358 S. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"173 SALAZAR Parada Valenzuela City"},{"Raw Address":"73 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"5 JUPITER ST. Parada Valenzuela City"},{"Raw Address":"LOT5 BLK 5 JADE ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"204 22ND ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"237 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"92 FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"IMPONG JUANA ST. Parada Valenzuela City"},{"Raw Address":"330 T. MANANG Parada Valenzuela City"},{"Raw Address":"0331 D TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"412 ZAMORA ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"280 PILAR ST. Parada Valenzuela City"},{"Raw Address":"297 B. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"127 E.LAGDAMEO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"287 SANTOLON RD Parada Valenzuela City"},{"Raw Address":"122 B CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"262 25TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"245 RAMON ST. Parada Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN ST. EXTENSION Parada Valenzuela City"},{"Raw Address":"468 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"257 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"B5 L2 F FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"109 KAMAGONG STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"234 FORTUNE 19 ST. Parada Valenzuela City"},{"Raw Address":"467 A. KAINGIN Parada Valenzuela City"},{"Raw Address":"250 B CALLE ONSE Parada Valenzuela City"},{"Raw Address":"BLK. 4 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"414 TANDANG MANANG ST.PARADA Valenzuela City"},{"Raw Address":"207 FELISA STREET Parada Valenzuela City"},{"Raw Address":"109 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"363 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"3204 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"185-A MOLAVE STREET Parada Valenzuela City"},{"Raw Address":"249 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"232 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"259 ADOR Parada Valenzuela City"},{"Raw Address":"315 JIMENEZ COMPD. ST. Parada Valenzuela City"},{"Raw Address":"70 PARADA ROAD FORTUNE Village Parada Valenzuela City"},{"Raw Address":"BLK. 3 LOT 2 TMHOA Parada Valenzuela City"},{"Raw Address":"357 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"5 5TH ST. Parada Valenzuela City"},{"Raw Address":"12D PARADA ROAD Parada Valenzuela City"},{"Raw Address":"155 C. ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"114 E. LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"150 ALICI ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"67B PARADA RD FORTUNE Village Parada Valenzuela City"},{"Raw Address":"374 TATA ANDREZ STREET Parada Valenzuela City"},{"Raw Address":"254 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"279 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"142 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"116 CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"415 TAERO ST. Parada Valenzuela City"},{"Raw Address":"229 18TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"L2 B6 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"199 BAN MARIE ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"308 JIMENEZ COMPOUND ST. PARADA Valenzuela City"},{"Raw Address":"202 ANTHONY ST Parada Valenzuela City"},{"Raw Address":"262 25TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"227 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"442 GOMES STREET Parada Valenzuela City"},{"Raw Address":"257 S.DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"K 39 RAMON STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"501 NARRA ST. FORYUNE 6 Parada Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"KAINGIN RD. Parada Valenzuela City"},{"Raw Address":"390 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"BLK. 3 LOT 13 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"100-E DE GULA COMPOUND Parada Valenzuela City"},{"Raw Address":"444 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE GARDEN 21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"202 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"244 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"402 7TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"084 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"91 Parada Valenzuela City"},{"Raw Address":"384 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"216 ANTHONY ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"392 ILOCTO COMP. KAINGIN RD. Parada Valenzuela City"},{"Raw Address":"228 18TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"36 PARADA RD Parada Valenzuela City"},{"Raw Address":"062 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"KABERONG ST. Parada Valenzuela City"},{"Raw Address":"176 23RD FORTUNE Village Parada Valenzuela City"},{"Raw Address":"04 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"266 24TH Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"90 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"442 GOMEZ Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"371 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"454 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"157 SALAZAR Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 7 PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"242 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"190 B. MOLAVE ST. FORTUNE VillageE 6 Parada Valenzuela City"},{"Raw Address":"402 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. BLK 6 LOT 5 GINTONG Parada Valenzuela City"},{"Raw Address":"97B CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"442 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"100 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"ALFONSO APARTMENT Parada Valenzuela City"},{"Raw Address":"248 PARADA RD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"401 SAN ANDRES Parada Valenzuela City"},{"Raw Address":"258 INT. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"186 FELIZA ST Parada Valenzuela City"},{"Raw Address":"409 BIASON COMPD. P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"88 D CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"442 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"152 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"ALFONSO APARTMENT"},{"Raw Address":"148 ZAMORA ST. PARADA Valenzuela City"},{"Raw Address":"BL10 L5 D NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"0343-C FELISA ST. Parada Valenzuela City"},{"Raw Address":"260 RIZALINA ST FORTUNE IV Parada Valenzuela City"},{"Raw Address":"360 J. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"254 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"1 D S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"CALLE ONCE PARADA Valenzuela City"},{"Raw Address":"90 CAPT. CRUZ ST. BO. Parada Valenzuela City"},{"Raw Address":"228 18TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"37 PARADA Valenzuela City"},{"Raw Address":"P DE GUMAN Parada Valenzuela City"},{"Raw Address":"110 CAPATAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"23RD ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"152 ACACIA STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"YAKAL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"027 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"199 BENMARIE COMPD. 21 ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"269 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"161 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"278 7TH FORTUNE VillageE 5 Parada Valenzuela City"},{"Raw Address":"199 21 ST. FV 5 Parada Valenzuela City"},{"Raw Address":"289 SANTOLAN ROAD Parada Valenzuela City"},{"Raw Address":"202 ANTHONY Parada Valenzuela City"},{"Raw Address":"123 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"232 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"164 SALAZAR Parada Valenzuela City"},{"Raw Address":"240 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"0320 B S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"071 PARADA RD. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"199 BEN MARIE COMPOUND 21ST Parada Valenzuela City"},{"Raw Address":"117 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"167 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"234 7TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"42 MARS ST. Parada Valenzuela City"},{"Raw Address":"248 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"BLK 1 LOT 7 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"113 LAGDAMEO Parada Valenzuela City"},{"Raw Address":"137-A NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"116 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"201 CALLE ONSE ST. PARADA Valenzuela City"},{"Raw Address":"121 LAGDAMEO ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"360 Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 1 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"YAKAL ST. COR. ACACIA Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"255 TOMASA ST. PARADA Valenzuela City"},{"Raw Address":"22 EUGENIO STREET Parada Valenzuela City"},{"Raw Address":"166 ACACIA ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"WEST SERVICE ROAD CORNER HIYAS Parada Valenzuela City"},{"Raw Address":"179 MOLAVE STREET Parada Valenzuela City"},{"Raw Address":"443 B. WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"62 PARADA RD. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"F. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"24 T. EUGENIO Parada Valenzuela City"},{"Raw Address":"376 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"313 JEMENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"244 7TH ST. Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMP. 21ST. Parada Valenzuela City"},{"Raw Address":"046 FORTUNE RD. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"22 EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"274 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"513 JIMENES COMP. Parada Valenzuela City"},{"Raw Address":"156 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"283 MARTHA Parada Valenzuela City"},{"Raw Address":"203 B. VENUS STREET Parada Valenzuela City"},{"Raw Address":"# 94 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"88 CAPTAIN CRUZ STREET SAN MIGUEL COMP Parada Valenzuela City"},{"Raw Address":"351 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"440 B. GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"237 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"327 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"149B 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"119 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"#39 D. SANTIAGO COMPD. F4 Parada Valenzuela City"},{"Raw Address":"117 E LAGDAMEO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"31 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"Q4 289 KAMAGONG ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"427 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"135 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"445 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"310 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"359 J.FRANCISCO Parada Valenzuela City"},{"Raw Address":"377 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"33 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"287 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"30 C TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"12 VENUS ST. COMP. Parada Valenzuela City"},{"Raw Address":"43 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"242 19 TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"289 SANTOLAN RD. PARADA Valenzuela City"},{"Raw Address":"362 TATA ANDRESS ST. Parada Valenzuela City"},{"Raw Address":"108 CORNER YAKAL KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"2585 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"144 NARRA ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"244 7TH STRET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"141 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"355 J.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"63 PARADA RD. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"416 TATA-ERO ST. Parada Valenzuela City"},{"Raw Address":"98 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"#40 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"UNIT 1 F. SANTIAGO MERCURY ST. Parada Valenzuela City"},{"Raw Address":"412 TATAERO ST Parada Valenzuela City"},{"Raw Address":"431 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"L5 B10 A NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"138 LAGDAMEO STREET Parada Valenzuela City"},{"Raw Address":"274 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"369 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"199 BEN MARI COMPOUND 22 STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"128 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"27 PARADA RD. Parada Valenzuela City"},{"Raw Address":"165 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"258 INTERIOR M. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"126 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"0011 ADOR ST. Parada Valenzuela City"},{"Raw Address":"106 KAMAGONG ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"162-C SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"111 E LAGDAMEO STREET Parada Valenzuela City"},{"Raw Address":"315 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"322 PEA COMP. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"203 6TH ST. FORTUNE Village 5&6 Parada Valenzuela City"},{"Raw Address":"228 - B S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"72 FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"247 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"123 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"018 BARRIO Parada Valenzuela City"},{"Raw Address":"BLOCK 3 LOT 16 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"170 C. SALAZAR ST. DOON COMP. Parada Valenzuela City"},{"Raw Address":"297 T.MANANG ST. PARADA Valenzuela City. Parada Valenzuela City"},{"Raw Address":"182 23RD ST. FORTUNE VIILAGE 5 Parada Valenzuela City"},{"Raw Address":"Q487 IPIL STREET Parada Valenzuela City"},{"Raw Address":"187 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"10 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"170 DOON COMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"0359 J.F. FRANCISCO ST. Valenzuela City Parada Valenzuela City"},{"Raw Address":"254 25TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"276 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"326 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"B-7 L-25 Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"20 F SANTIAGO Parada Valenzuela City"},{"Raw Address":"118 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"F.FRANCISCO S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"365 TATA ANDRE ST. Parada Valenzuela City"},{"Raw Address":"PARADA Valenzuela City"},{"Raw Address":"B4L5 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"285 25TH ST. FORTUNE Village PH5 Parada Valenzuela City"},{"Raw Address":"469 PARADA KAINGIN Parada Valenzuela City"},{"Raw Address":"287 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"405 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"317 A T.MANANG ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"267 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"101 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"B 5 L 9 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"198 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"1336 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"CALLE ONCE MARCELO COMPD. Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 10 E FRANCISCO ST. GINTONG Parada Valenzuela City"},{"Raw Address":"122B CALLE ONSE Parada Valenzuela City"},{"Raw Address":"235 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"140 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"238 19TH ST. FORTUNE Village PARADA Valenzuela City"},{"Raw Address":"245 ABELARDO ST. FORTUNE IV Parada Valenzuela City"},{"Raw Address":"277 PILAR ST. PARADA Valenzuela City"},{"Raw Address":"161 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"269 -G S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"239 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"116 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"276 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"187 24TH ST Parada Valenzuela City"},{"Raw Address":"428 SEVICE RD. Parada Valenzuela City"},{"Raw Address":"PARADA ROAD Parada Valenzuela City"},{"Raw Address":"39 B RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"A 94 FELISA ST. Parada Valenzuela City"},{"Raw Address":"117 E LAGDAMEO ST.FV 4 Parada Valenzuela City"},{"Raw Address":"371 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"257 M. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"203 B VENUS ST Parada Valenzuela City"},{"Raw Address":"260 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"119 21 ST. BENMARIE COMP. FORTUNE V Parada Valenzuela City"},{"Raw Address":"24 VENUZ E2E COMP. F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"25TH ST. FORTUNE Village 5. Parada Valenzuela City"},{"Raw Address":"#109 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"31 F SANTIAGO Parada Valenzuela City"},{"Raw Address":"456-G KAKAWATE ST. KAINGIN Parada Valenzuela City"},{"Raw Address":"98 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"458 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"307 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"315 JIMENEZ CMPD Parada Valenzuela City"},{"Raw Address":"241 7TH Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"234 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"274 C S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"243 S. DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"26 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"FELIZA ST.PARADA Valenzuela City"},{"Raw Address":"LOT 10 E&E COMPOUND Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMPD. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"33A. FATIMA COMP. Parada Valenzuela City"},{"Raw Address":"248 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"J FRANCISCO Parada Valenzuela City"},{"Raw Address":"415 T MANANG ST. Parada Valenzuela City"},{"Raw Address":"274 S Parada Valenzuela City"},{"Raw Address":"37-D PARADA RD. Parada Valenzuela City"},{"Raw Address":"391 P.DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"125 CONSUELO ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"APB MOLAVE ST. 6TH Parada Valenzuela City"},{"Raw Address":"83 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"15 DIAMOND ST HIYAS HOMES SUBD Parada Valenzuela City"},{"Raw Address":"B1L4 FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"257 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"97 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"#1 24 ST. FORTUINE 5 Parada Valenzuela City"},{"Raw Address":"165 SALASZAR ST. Parada Valenzuela City"},{"Raw Address":"320 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"90 ADOR ST. Parada Valenzuela City"},{"Raw Address":"188 24 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"0042 DOON COMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"LOT 19 BLK 3 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"430 GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"438 BO. PARADA ST. Parada Valenzuela City"},{"Raw Address":"ALICIA ST.FV 4 Parada Valenzuela City"},{"Raw Address":"118 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"206 UNIT 1 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 10 LOT 3 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"B1L2 TMOA Parada Valenzuela City"},{"Raw Address":"438 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"233 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"212 ANTHONY ST Parada Valenzuela City"},{"Raw Address":"135 E. LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"#45 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"192 RAMON Parada Valenzuela City"},{"Raw Address":"10 10 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"339 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"204 6TH ST. Parada Valenzuela City"},{"Raw Address":"CALLE ONCE CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"357 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"392-B S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"406 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"154 ALICIA ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"201 A. FELIZA ST. Parada Valenzuela City"},{"Raw Address":"140 CAPT. CRUZ COR E. Parada Valenzuela City"},{"Raw Address":"154 C SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"122 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"106 LAG DAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"232 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"172 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"377 18 ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"150 NARRA ST. PARADA Valenzuela City. Parada Valenzuela City"},{"Raw Address":"274 PILAR ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"4684 HIYAS HOME SUBD. PEARL ST. Parada Valenzuela City"},{"Raw Address":"BLK 9 LOT 20 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"B 2 L 13 349 FRACISCO ST. Parada Valenzuela City"},{"Raw Address":"4560 SAPPHIRE ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"168 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"450 CARREON CPD. WEST SERVICE RD Parada Valenzuela City"},{"Raw Address":"246 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"312 INT. MENES CMPD. PARADA Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"199 Parada Valenzuela City"},{"Raw Address":"320 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"138 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"179 23RD STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"204 BF SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"260 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO Parada Valenzuela City"},{"Raw Address":"B2 L14 F. FRANCISCO GUINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"44 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"32 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"170 UNIT 3 DOON COMP. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"362 B TATA ANDRES Parada Valenzuela City"},{"Raw Address":"179 RAMON ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"253 ABVELARDO ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"444 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"149 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST.FV 4 Parada Valenzuela City"},{"Raw Address":"12 VENUS ST. E & E COMP. Parada Valenzuela City"},{"Raw Address":"B4 L9 349 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"273 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"145 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"287 SANTOLAN ROAD Parada Valenzuela City"},{"Raw Address":"29207 FILIZA BUKID Parada Valenzuela City"},{"Raw Address":"BLK5 LOT18 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"4480 25TH ST. Parada Valenzuela City"},{"Raw Address":"254 FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"#244 7TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"279 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"154 NARRA ST. Parada Valenzuela City"},{"Raw Address":"#122 B. CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"281 PILAR ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"235 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"L9 T. MANANG Parada Valenzuela City"},{"Raw Address":"5880 CORAL ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"257 RIZALINA ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"89 Parada Valenzuela City"},{"Raw Address":"279-3 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"BLK 13 LOT 27 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"281 PILAR ST. Parada Valenzuela City"},{"Raw Address":"249 ABELARDO STREET Parada Valenzuela City"},{"Raw Address":"BLOCK 1 LOT 7 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"88 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"269 INANG PETRA ST. PARADA Valenzuela City"},{"Raw Address":"384 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"235 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"270 24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"29 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"239 TANDANG MANANG PARADA Valenzuela City"},{"Raw Address":"365 TATA ANDRESS Parada Valenzuela City"},{"Raw Address":"372 TATA ANDREZ Parada Valenzuela City"},{"Raw Address":"124 LAGDAMEO ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"402 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"L-31 B-8 PARADA ROAD FORTUNE VILLAGE Parada Valenzuela City"},{"Raw Address":"407 P DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"118 C. CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"012 PARADA RD. Parada Valenzuela City"},{"Raw Address":"228 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"21ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"BLK 1 LOT 3 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"462 GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"416 ZAMORA ST. FV7 Parada Valenzuela City"},{"Raw Address":"165 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"285 S.DEGUZMAN PARADA Valenzuela City"},{"Raw Address":"FILIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"456 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"412 TATA IRRO ST. Parada Valenzuela City"},{"Raw Address":"260 RIZALINA ST. Parada Valenzuela City"},{"Raw Address":"#207 FELIZA BUKID VENUS ST. Parada Valenzuela City"},{"Raw Address":"47 B. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"333 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"56 PARADA RD. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"0325 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"186 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"145B NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"#1 24 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"351 CAPT. FRANCISCO EXT. Parada Valenzuela City"},{"Raw Address":"22 IMPONG JUANA ST. S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"#1752 3RD STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"412 TATA ERRO ST Parada Valenzuela City"},{"Raw Address":"347 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"226 18TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"412 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"424 BUROGOS Parada Valenzuela City"},{"Raw Address":"358 J. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"431 GOMEZ ST. FORTUNE Village 7 BO. Parada Valenzuela City"},{"Raw Address":"091 FORTUNE DR. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 5 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"424 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"170 RAMON ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"102 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"99 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"94 FELIZA ST Parada Valenzuela City"},{"Raw Address":"440B GOMEZ ST. FORTUNE Village7 MALINTA Parada Valenzuela City"},{"Raw Address":"174 FELIZA Parada Valenzuela City"},{"Raw Address":"152 ALICIA Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"86 SALVADOR ST. PARADA Valenzuela City"},{"Raw Address":"L7 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"B1 L9 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"FELIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"255 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"31F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"234 19TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"307 PARADA PEARL Parada Valenzuela City"},{"Raw Address":"L10 NEPTUNE ST. Parada Valenzuela City"},{"Raw Address":"275 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"4560 SAPPHIRE ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"25TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"CONSUELO ST Parada Valenzuela City"},{"Raw Address":"255 TOMASA PARADA Valenzuela City"},{"Raw Address":"302 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"259 25TH ST. Parada Valenzuela City"},{"Raw Address":"411 TATA ERO STREET Parada Valenzuela City"},{"Raw Address":"145-C NARRA STREET Parada Valenzuela City"},{"Raw Address":"256 25TH STREET Parada Valenzuela City"},{"Raw Address":"66 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"40 PEARL STREET HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"123 KAMAGONG ST Parada Valenzuela City"},{"Raw Address":"140 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"341 20TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"89 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"70 PARADA RD. Parada Valenzuela City"},{"Raw Address":"39 D. SANTIAGO CMPD. FV4 Parada Valenzuela City"},{"Raw Address":"407 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"23 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"L8 B6 GINTONG SILANGANAN F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"412 ZAMORA ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"99 VENUZ ST. F.SNTIAGO Parada Valenzuela City"},{"Raw Address":"270 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"389 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"118 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"283 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"316 MENEZ ST. PARADA Valenzuela City"},{"Raw Address":"125 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"456 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"351-C F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"87 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"243 Fortune Village 5 7TH ST. Parada Valenzuela City"},{"Raw Address":"232 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"403 FORTUNE Village 5 ST. PARADA Valenzuela City"},{"Raw Address":"BLK4 LOT1 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"045 PARADA ROAD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"203 B VENUS ST. BO Parada Valenzuela City"},{"Raw Address":"170 DOON COMPOUND SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"468-O KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"BLK 10 LOT41 NARRA ST Parada Valenzuela City"},{"Raw Address":"27A NEW BLOCK 10 NARRA ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"CASTILLO COMPD. FELIZA ST. Parada Valenzuela City"},{"Raw Address":"154 ALICIA FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"313 MENES COMPD. BO. PARADA Valenzuela City"},{"Raw Address":"7 5TH FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"168 ALICIA Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"315 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"384 S.DEGUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"0274 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMPD. 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"194 6ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"228 S DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"135 LAGDAMEO ST. Fortune Village 4 VillageE Parada Valenzuela City"},{"Raw Address":"451 ZAMORA Parada Valenzuela City"},{"Raw Address":"168 DOON CMP SALAZAR ST Parada Valenzuela City"},{"Raw Address":"246 C S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"258 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"92 FORTUNE DRIVE FORTUNE VillageE Parada Valenzuela City"},{"Raw Address":"325 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"94 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"456-D KAKAWATE ST. Parada Valenzuela City"},{"Raw Address":"039 RAMON ST. FV4 Parada Valenzuela City"},{"Raw Address":"218 ST. Parada Valenzuela City"},{"Raw Address":"470 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"125 Parada Valenzuela City"},{"Raw Address":"224 21ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"BLK 5 LOT 10 JADE ST. SUBD. Parada Valenzuela City"},{"Raw Address":"115 KAMAGONG ST. PARADA Valenzuela City"},{"Raw Address":"LOT 6B F-SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"474 KA BERONG Parada Valenzuela City"},{"Raw Address":"40 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"BLK 5 LOT 2 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"31 F-SANTIAGO Parada Valenzuela City"},{"Raw Address":"258 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"GOMES ST. Parada Valenzuela City"},{"Raw Address":"CITY MM. Parada Valenzuela City"},{"Raw Address":"63 PARADA ROAD ST Parada Valenzuela City"},{"Raw Address":"5 JUPITER ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"C. PARADA RD. Parada Valenzuela City"},{"Raw Address":"96 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"236 19TH ST. Parada Valenzuela City"},{"Raw Address":"243 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"256 DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"146 Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ COMPD. PARADA Valenzuela City"},{"Raw Address":"19B ZAMORA ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"F. SANTIAGO ST. LOT 8 Parada Valenzuela City"},{"Raw Address":"242 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"250 ABELARDO ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"1548-A PEARL ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"200 A 22ND ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"255 TOMASA ST Parada Valenzuela City"},{"Raw Address":"200 CALLE ONCE PARADA Valenzuela City"},{"Raw Address":"114 LAGDAMEO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"184 23RD ST. Parada Valenzuela City"},{"Raw Address":"362 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"031 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO MANUKAN Parada Valenzuela City"},{"Raw Address":"18A F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"169 7TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"168 ALICIA ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"246 PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"064 PARADA ROAD FORTUNE Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"204 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"T. MORONG ST. Parada Valenzuela City"},{"Raw Address":"104 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"023 EUGENIO ST Parada Valenzuela City"},{"Raw Address":"202 ANTHONY Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"267 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"26 F. SANTIAGOMARS ST. Parada Valenzuela City"},{"Raw Address":"171-A SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"098 Fortune Village 5 FORTUNE DR. Parada Valenzuela City"},{"Raw Address":"435 ZAMORA STREET Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"92 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"179 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"207 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"215 ANTHONY STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"272 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"230 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"201 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"276 B S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"354 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"28 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"199 21ST VF5 Parada Valenzuela City"},{"Raw Address":"134 5TH ST. Fortune Village 5&6 Parada Valenzuela City"},{"Raw Address":"240 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"1028 B. KAMAGONG ST. FV6&5 Parada Valenzuela City"},{"Raw Address":"0468 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"121 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"101 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"193 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"135 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"199 21ST ST. BENMARIE COMP. Parada Valenzuela City"},{"Raw Address":"256 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"423 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"131 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"LOT 1 PHASE 2 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"1430 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"229 18TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"256 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"200 CAPT. CRUZ CALLE ONSE Parada Valenzuela City"},{"Raw Address":"Q4289 KAMAGONG ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"338 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"343 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"427 BURGOS ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"132 KAMAGONG ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPD. 21ST FV5 Parada Valenzuela City"},{"Raw Address":"53 3RD FORTUNE V Parada Valenzuela City"},{"Raw Address":"212 ANTHONY ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"B1 L12 BURGOS Parada Valenzuela City"},{"Raw Address":"161 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"325 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"1213 LAGDAMEO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"3B P.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"91 A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"239 ABELARDO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"055 PARADA FORTUNE5 Parada Valenzuela City"},{"Raw Address":"179 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"15 F SANTIAGO Parada Valenzuela City"},{"Raw Address":"27 A. PARADA RD. Parada Valenzuela City"},{"Raw Address":"28 CAPT. CRUZ PARADA Valenzuela City"},{"Raw Address":"004 PARADA Valenzuela City"},{"Raw Address":"117 LAGDAMEO FV 4 Parada Valenzuela City"},{"Raw Address":"462 P GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"468 KAINGIN Parada Valenzuela City"},{"Raw Address":"147 ALICIA STREET Parada Valenzuela City"},{"Raw Address":"134 E LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"220-C 21 ST. Fortune Village 5 SUBD. Parada Valenzuela City"},{"Raw Address":"1 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"192 M. DE GULA Parada Valenzuela City"},{"Raw Address":"6 PARADA RD. Parada Valenzuela City"},{"Raw Address":"274 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"18 A F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"3 CORAL ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"391 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"376 Parada Valenzuela City"},{"Raw Address":"153 6TH ST. FORTUNE FIVE Parada Valenzuela City"},{"Raw Address":"437-M GOMEZ ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"16B SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"243 7TH ST. Parada Valenzuela City"},{"Raw Address":"269 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"187 FELIZA ST Parada Valenzuela City"},{"Raw Address":"202 22ND ST. Parada Valenzuela City"},{"Raw Address":"# 31 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"467 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"39 PARADA RD Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"4560 Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"36D PARADA RD. Parada Valenzuela City"},{"Raw Address":"190 6TH ST FORTUNE Village 5 &6 Parada Valenzuela City"},{"Raw Address":"266 24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"201 22ND ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"219 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"307 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"419 ZAMORA ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"70 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"199 NARRA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"390 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"154 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"232 DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"FV7 Parada Valenzuela City"},{"Raw Address":"264 B 19TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"190 DE GULA STREET Parada Valenzuela City"},{"Raw Address":"128 PARADA ROAD Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"34 F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"246 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"201 CALLE ONCE ST. Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 20 349 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"377 18TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"247 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"#26 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"114 LAGDAMEO STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"# 66 PARADA RD. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"KAINGIN ST. SANTOLAN RD. PARADA Valenzuela City"},{"Raw Address":"196 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"0005 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"351 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"100 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"122 A. KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"454 7TH ST. Parada Valenzuela City"},{"Raw Address":"117 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"190 6ST MOLAVE Fortune Village 5-6 Parada Valenzuela City"},{"Raw Address":"279 PILAR Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"351 F. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"196 MOLALE ST. Parada Valenzuela City"},{"Raw Address":"170 DOON COMPD. SALAZAR Parada Valenzuela City"},{"Raw Address":"160 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"4387 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"349 F FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"192 M. DE GULA STREET Parada Valenzuela City"},{"Raw Address":"199 21 ST. BENMARIE COMP. Parada Valenzuela City"},{"Raw Address":"275 PILAR ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"119 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"339 Fortune Village 5 21ST STREET Parada Valenzuela City"},{"Raw Address":"340 2OTH STREET Parada Valenzuela City"},{"Raw Address":"114 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"260 TATAROMAN ST Parada Valenzuela City"},{"Raw Address":"TATA ERO ST. PARADA Valenzuela City"},{"Raw Address":"S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"98 CAPT. ST. Parada Valenzuela City"},{"Raw Address":"168 DOON COMP Parada Valenzuela City"},{"Raw Address":"273 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMPD Parada Valenzuela City"},{"Raw Address":"272 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"72 JADE ST. Parada Valenzuela City"},{"Raw Address":"332M T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"245 ABELARDO ST FV4 Parada Valenzuela City"},{"Raw Address":"122 CAPT.CRUZ PARADA Valenzuela City"},{"Raw Address":"216 D DE GUZMAN Parada Valenzuela City"},{"Raw Address":"192 C 6TH ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"BLK 12 LOT 5 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"313 MENES CMPD. PARADA Valenzuela City"},{"Raw Address":"207 F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"212 21ST STREET FORTUNE V Parada Valenzuela City"},{"Raw Address":"137 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"120 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"LOT 20 A F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"95 P. DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"176 MOLAVE ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"BLK. 6 LOT 9 JADE ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"91 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"139 NARRA STREET Parada Valenzuela City"},{"Raw Address":"441 P. GOMEZ Parada Valenzuela City"},{"Raw Address":"500 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"FORTUNE IV RAMON ST. Parada Valenzuela City"},{"Raw Address":"198 DE GULA ST. Parada Valenzuela City"},{"Raw Address":"117 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"88 Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"175 MOLAVE Fortune Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"LE 116 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"201 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"254 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"311 Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"185 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"414 NO.4 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"003 PARADA Valenzuela City"},{"Raw Address":"94-B FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"202 MOLAVE Parada Valenzuela City"},{"Raw Address":"227 18TH STREET Parada Valenzuela City"},{"Raw Address":"488 ZAMORA ST Parada Valenzuela City"},{"Raw Address":"068 PARADA FORTUNE Village6 Valenzuela City Parada Valenzuela City"},{"Raw Address":"181 RAMON STREET Parada Valenzuela City"},{"Raw Address":"119 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"377 18 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"199 21ST ST.FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"197 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"31 F Parada Valenzuela City"},{"Raw Address":"172-B MOLAVE ST FORTUNE6 Parada Valenzuela City"},{"Raw Address":"#45 A F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"273 S.DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"256 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"91 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"349 BLK 9 F. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"152 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39 RAMON ST. FV 4 Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG HOUSING PROJECT Parada Valenzuela City"},{"Raw Address":"FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"377 18TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"176 CAPTAIN CRUZ ST. Valenzuela City Parada Valenzuela City"},{"Raw Address":"28 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"321 B. S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"290 ILOCTO COMP. Parada Valenzuela City"},{"Raw Address":"27A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"306 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"L10 NEPTUNE ST Parada Valenzuela City"},{"Raw Address":"39 PARADA RD. Parada Valenzuela City"},{"Raw Address":"228 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"349 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"140 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"165 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"270 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"354 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"199 BENMARIE CMPD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"19921 ST FORTUNE` Parada Valenzuela City"},{"Raw Address":"116 CALLE ONCE STREET Parada Valenzuela City"},{"Raw Address":"095 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"2150 DAET COMPD. Parada Valenzuela City"},{"Raw Address":"386 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"LOT 5 BLK. 10 A NARRA STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"104 E. LAGDAMEO STREET Parada Valenzuela City"},{"Raw Address":"231 18ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"5F SANTIAGO STREET. Parada Valenzuela City"},{"Raw Address":"F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"2507 - FILIZA BUKID Parada Valenzuela City"},{"Raw Address":"22 EUGENIO Parada Valenzuela City"},{"Raw Address":"279 PILAR ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID VENUS ST. Parada Valenzuela City"},{"Raw Address":"181 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"348 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"371 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"282 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"BLK 9 LOT 30 UNIT 1 NARRA ST. Parada Valenzuela City"},{"Raw Address":"465 KAINGIN RD. Parada Valenzuela City"},{"Raw Address":"241 7TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"234 19TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"362 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"512 ABCO COMP FORTUNE VillageE 6 Parada Valenzuela City"},{"Raw Address":"282 PILAR ST. Parada Valenzuela City"},{"Raw Address":"407 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"244 7TH STREET FORTUNE VILALGE 5 Parada Valenzuela City"},{"Raw Address":"207 A FELIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"166 6TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"015 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"359 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"172 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"162 E.SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"329 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"BLK 4 LOT 4 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"GOMEZ STREET Parada Valenzuela City"},{"Raw Address":"467 CAINGIN ST. Parada Valenzuela City"},{"Raw Address":"#199 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"134 5TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"064 PARADA ROAD FORTUNE Village Parada Valenzuela City"},{"Raw Address":"63 PARADA RD EXT. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"FELIZA BUKID CALLE ONSE Parada Valenzuela City"},{"Raw Address":"14 C PEARL ST. HIYAS HOME Parada Valenzuela City"},{"Raw Address":"199 6TH STREET Parada Valenzuela City"},{"Raw Address":"94B FORTUNE DRIVE. FORTUNE Village 5 6TH ST. Parada Valenzuela City"},{"Raw Address":"5TH ST. FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"111 C KAMAGONG ST. FORTUNE VI Parada Valenzuela City"},{"Raw Address":"199 21 ST Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"116 CALLE ONCE ST. Parada Valenzuela City"},{"Raw Address":"266 24TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"399 SAN ANDRES Parada Valenzuela City"},{"Raw Address":"93 C/ CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"440 SERVICE ROAD ROMARAO COMPOUND Parada Valenzuela City"},{"Raw Address":"106 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"349 CAPT.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"266 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"L17-B2 SAPPHIRE ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"318 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"31 F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"10 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"464 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"#5 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"028 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"109 E. LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"118 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"271 CONSUELO FV 4 Parada Valenzuela City"},{"Raw Address":"126 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"BEN MARIE COMP. Parada Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"379 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"258 25TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"199 BENMARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"118 DOOR 12 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 3 DAHOA PARAFORT Parada Valenzuela City"},{"Raw Address":"369 TATAANDRES ST Parada Valenzuela City"},{"Raw Address":"402 SAN ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"36 B PARADA ROAD Parada Valenzuela City"},{"Raw Address":"#319 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"137 FORTUNE DR. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#97 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"411 C. TATA ERRO Parada Valenzuela City"},{"Raw Address":"12 Parada Valenzuela City"},{"Raw Address":"404 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"365 PARADA TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"LOT 15A 207 FELISA BUKID Parada Valenzuela City"},{"Raw Address":"19 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"404 P.DE GUZMAN PARADA RD. Parada Valenzuela City"},{"Raw Address":"362 TATA ANDRES ST.BO.Parada Valenzuela City"},{"Raw Address":"ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"B5 LOT 2 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"177 GONZALES COMP. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"200 FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"413 P/ DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"45 A. EARTH ST. SANTIAGO Parada Valenzuela City"},{"Raw Address":"NEPTUNE ST. Parada Valenzuela City"},{"Raw Address":"FATIMA ANEX CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"228 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"472 KA BERONG ST. PARADA Valenzuela City"},{"Raw Address":"330 Parada Valenzuela City"},{"Raw Address":"168 KAMAGONG ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"315 JIMENES COMP Parada Valenzuela City"},{"Raw Address":"199 21ST ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"392-C P.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"A334 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"203 ANTHONY ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"Q4 289 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"31 F BO. Parada Valenzuela City"},{"Raw Address":"064 PARADA RD. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"84 A CAPT. CRUZ DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"177 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMPD. Parada Valenzuela City"},{"Raw Address":"TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"274 TATA ENRONG STREET S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"20 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"0250 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"SAN MIGUEL COMP. ST. Parada Valenzuela City"},{"Raw Address":"99 VENUS ST Parada Valenzuela City"},{"Raw Address":"0343-C FELIZA ST. Parada Valenzuela City"},{"Raw Address":"181 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"349 F-FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"435 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"330 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"314 SANTIAGO Parada Valenzuela City"},{"Raw Address":"261 25TH STREET Parada Valenzuela City"},{"Raw Address":"259 ADOR ST Parada Valenzuela City"},{"Raw Address":"185 CASTILLO COMPOUND FELIZA ST. Parada Valenzuela City"},{"Raw Address":"PARADA RD. PARADA Valenzuela City"},{"Raw Address":"372 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"314 PARADA Valenzuela City"},{"Raw Address":"294 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"B1L9 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"22 EUGENIO F.A APT. Parada Valenzuela City"},{"Raw Address":"506 TINDALO ST. Parada Valenzuela City"},{"Raw Address":"19 B ZAMORA ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"278 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"177 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"153 ACACIA ST. FV 6 Parada Valenzuela City"},{"Raw Address":"068A PARADA RD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"242 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"244 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"116-D. CALLE ONSE CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"# 207 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"390S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"90 CAPT. ST. Parada Valenzuela City"},{"Raw Address":"175 A MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"200 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO STREET BLK4 LOT5 Parada Valenzuela City"},{"Raw Address":"31 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"267 PETRA ST. Parada Valenzuela City"},{"Raw Address":"211 21ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"036 C PARADA RD. Parada Valenzuela City"},{"Raw Address":"150 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"394 F. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"219 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"377 18 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"94 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"15 PARADA ST Parada Valenzuela City"},{"Raw Address":"294 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"0013 TEMPO P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"437 FV7 Parada Valenzuela City"},{"Raw Address":"5TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"114 LAGDAMEO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"144 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. BLK 2 LOT 19 GINTONG Parada Valenzuela City"},{"Raw Address":"39 PARADA Valenzuela City"},{"Raw Address":"177 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"68 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"B3 Parada Valenzuela City"},{"Raw Address":"282 S. DEGUZMAN Parada Valenzuela City"},{"Raw Address":"320B S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"KM 19 BO. PARADA ST. Parada Valenzuela City"},{"Raw Address":"6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"1727 B TATA ERO Parada Valenzuela City"},{"Raw Address":"245 B SALAZAR ST. DOON COMPD. Parada Valenzuela City"},{"Raw Address":"349 FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"439 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"204 F.SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"187 B FELIZA STREET Parada Valenzuela City"},{"Raw Address":"144 E. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"172 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"345 CAPT FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"144 DALAWAN STREET Parada Valenzuela City"},{"Raw Address":"7 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"257 S DEGUZMAN STREET Parada Valenzuela City"},{"Raw Address":"PARADA RD. Parada Valenzuela City"},{"Raw Address":"185-D FELIZA STREET Parada Valenzuela City"},{"Raw Address":"7 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"243 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"4781 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"94B FORTUNE DRIVE ST. Parada Valenzuela City"},{"Raw Address":"200 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"199 FORTUNE Village 5 STREET Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"94 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"204 VENUS STREET E.N.E COMPOUND Parada Valenzuela City"},{"Raw Address":"86 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"444 RUMARAO CPD. Parada Valenzuela City"},{"Raw Address":"413 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"449 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"CORNER SAPPHIRE ST. HIYAS SUBD. PEARL ST. Parada Valenzuela City"},{"Raw Address":"431 GOMEZ ST. Fortune Village 7 PARADA Valenzuela City"},{"Raw Address":"442 P.GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"290 SANTOLAN ST. Parada Valenzuela City"},{"Raw Address":"222 SALVADOR Parada Valenzuela City"},{"Raw Address":"7 5TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"307 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"216 21ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"FELISA ST. Parada Valenzuela City"},{"Raw Address":"57 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"367 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"SISCARA APT ADOR ST Parada Valenzuela City"},{"Raw Address":"BLK6 LOT7 GINTONG SILANGAN F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"B5 L1 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"168 21 STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"187 A FELIZA ST Parada Valenzuela City"},{"Raw Address":"067 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"336 T.MANANG BO. PARADA Valenzuela City"},{"Raw Address":"227 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"182 Parada Valenzuela City"},{"Raw Address":"108 RAMON ST. FV 4 Parada Valenzuela City"},{"Raw Address":"HIYAS HOME SUBD. SAPHIRE Parada Valenzuela City"},{"Raw Address":"095 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 6 LOT 9 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"BLK. 8 LOT 10 CARACTA VillageE Parada Valenzuela City"},{"Raw Address":"403 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"320 S Parada Valenzuela City"},{"Raw Address":"147 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"269 INT S DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"244 7TH STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"468 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"255 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"46 P. DE GUZMAN BANDINO STREET Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. SANTIAGO Parada Valenzuela City"},{"Raw Address":"40 PARADA ST. Parada Valenzuela City"},{"Raw Address":"0147-E DOON ST. Parada Valenzuela City"},{"Raw Address":"468 - O KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"260 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"31 MARS ST. E&E COMPD. Parada Valenzuela City"},{"Raw Address":"LOT 5 BLK 7 199 BENMARIE COMP. 21 ST. Parada Valenzuela City"},{"Raw Address":"180 FELISA ST. Parada Valenzuela City"},{"Raw Address":"301 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"206 22ND ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"212 ANTHONY Parada Valenzuela City"},{"Raw Address":"Q4289 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"424 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"#118 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMP. 21ST. FV5 Parada Valenzuela City"},{"Raw Address":"KAINGIN ST.PARADA Valenzuela City"},{"Raw Address":"315 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"139 FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"468 Q KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"204 BF. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"349 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"170 SALAZAR ST. DOON COMPOUND Parada Valenzuela City"},{"Raw Address":"1882 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"WEST SERVICE ROAD CARREON COMPD. Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST Parada Valenzuela City"},{"Raw Address":"161 ALICIA Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"240 7 STREET Parada Valenzuela City"},{"Raw Address":"202A 22 STREET Parada Valenzuela City"},{"Raw Address":"5TH ST. FV 5 PARADA RD. Parada Valenzuela City"},{"Raw Address":"141 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"252-A LOT 2 BLOCK 2 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"2157 BORNALES CPD.KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"90 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"#94 Parada Valenzuela City"},{"Raw Address":"036 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"327 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"283 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"313 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"318 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"167 6TH ST. Parada Valenzuela City"},{"Raw Address":"P DE GUZMAN COR TATA ERO Parada Valenzuela City"},{"Raw Address":"161 FELIZA Parada Valenzuela City"},{"Raw Address":"443 ROSELLA ST. Parada Valenzuela City"},{"Raw Address":"130 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"446 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"0290 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"B1 L6 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"024 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"1 PARADA ST Parada Valenzuela City"},{"Raw Address":"161 ALICIA ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"242 S. DE GUZMAN COR. MARY ANN THIS WAY ST. Parada Valenzuela City"},{"Raw Address":"470 KAINGIN ST.PARADA Valenzuela City"},{"Raw Address":"270 S. DE GUZMAN BARRIO Parada Valenzuela City"},{"Raw Address":"199 6TH ST.MANALANG CMPD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"270 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"67 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"032 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"283-D DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"33 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. ST. FORTUNE Village Valenzuela City Parada Valenzuela City"},{"Raw Address":"256 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"242 Parada Valenzuela City"},{"Raw Address":"101 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"ROAD Parada Valenzuela City"},{"Raw Address":"012 PARADA Valenzuela City"},{"Raw Address":"BL3LT9 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"244 7TH ST.FORTUNE Village Parada Valenzuela City"},{"Raw Address":"185B FELIZA ST. Parada Valenzuela City"},{"Raw Address":"235 19TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"336 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"468-E KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"151 ST. FORTUNE IV Parada Valenzuela City"},{"Raw Address":"177 23RD STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"111 UNIT KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"115 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"260 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"B2 L5 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"200 FORTUNE Village Parada Valenzuela City"},{"Raw Address":"146 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"123 CAPT.CRUZ PARADA Valenzuela City"},{"Raw Address":"199 BEN MARIE 21ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"240 ABELARDO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"266 24 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"210 21ST COR. FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"188 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"151 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"243 S. D GUZMAN ST Parada Valenzuela City"},{"Raw Address":"315 MENEZ COMP. PARADA Valenzuela City"},{"Raw Address":"30 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"A22 T. EUGENIO STREET Parada Valenzuela City"},{"Raw Address":"309 JEMENES COMP. Parada Valenzuela City"},{"Raw Address":"45A F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"80 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"3A 144 E. FRANCISCO Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPOUND Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"199 21ST ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"181 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"DOOR 1 151 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"032 PARADA RD. Parada Valenzuela City"},{"Raw Address":"431-B GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"252 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"183 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"331 D TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"340 20TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"039 D. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"091FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"199 21ST BEN MARIE COMP. FV6 Parada Valenzuela City"},{"Raw Address":"133 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"122 B CALLE ONSE Parada Valenzuela City"},{"Raw Address":"101 M. DE Parada Valenzuela City"},{"Raw Address":"28 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"273 Parada Valenzuela City"},{"Raw Address":"VALENZUELA CITY Parada Valenzuela City"},{"Raw Address":"470KAINGIN ST Parada Valenzuela City"},{"Raw Address":"4480 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"99 VENUST ST. Parada Valenzuela City"},{"Raw Address":"188 MOLAVE ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"334 T. MANANG ST Parada Valenzuela City"},{"Raw Address":"098D FORTUNE Village 7TH ST. Parada Valenzuela City"},{"Raw Address":"336 UNIT 2 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"310 JIMENEZ ST. Parada Valenzuela City"},{"Raw Address":"4680 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"031 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"167 RAMON ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"72 JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"123 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"251 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"114E LAGDAMEO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"0012 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 3 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"4078 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"131 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"28 Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ ST Parada Valenzuela City"},{"Raw Address":"07 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"222 KAMAGONG ST Parada Valenzuela City"},{"Raw Address":"291 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"256 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLOCK5 LOT2 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"200-C CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"217 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"235 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"320 C DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"199 BEN MARIE COMP. 21ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"15 DIAMOND ST. Parada Valenzuela City"},{"Raw Address":"B5 L2 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"391 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"077 PARADA ROAD EXTENSION Parada Valenzuela City"},{"Raw Address":"202 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"42 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"345 CAPT. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"297-C T. MANANG ST. PARADA Valenzuela City"},{"Raw Address":"824 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"009 Parada Valenzuela City"},{"Raw Address":"308 MENES CMPD. Parada Valenzuela City"},{"Raw Address":"118 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"267 INANG PETRA ST. S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"1253 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"405 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"PETRA ST. PARADA Valenzuela City"},{"Raw Address":"412 P DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"92 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"139 Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"276 E.S DEGUZMAN Parada Valenzuela City"},{"Raw Address":"173 SALAZAR ST. PARADA Valenzuela City.A Parada Valenzuela City"},{"Raw Address":"83 D CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"BEN MARIE GARDENS Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"167 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"#79 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"362 TATAANDRES ST. Parada Valenzuela City"},{"Raw Address":"100 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"199 21 ST FORTUNE V Parada Valenzuela City"},{"Raw Address":"LOT 14 BLK 5 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"444 WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"Fortune Village 6 6TH ST. Parada Valenzuela City"},{"Raw Address":"84 PARADA ROAD EXT. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"Fortune Village 6 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"122 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"200 F. SANTIAGO MERCURY ST. Parada Valenzuela City"},{"Raw Address":"98 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"31 F. SANTIAGO ST. E&E COMPD. Parada Valenzuela City"},{"Raw Address":"269 DE GUZMAN Parada Valenzuela City"},{"Raw Address":"012 Parada Valenzuela City"},{"Raw Address":"BLOCK 4 LOT 17 F.FRANCISCO GINTONG Parada Valenzuela City"},{"Raw Address":"090 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"8 E AND E COMPD. F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST. Fortune Village 4. Parada Valenzuela City"},{"Raw Address":"067 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"UNIT 2 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"281 PILAR STREET Parada Valenzuela City"},{"Raw Address":"209 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"269 INT. S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"071 Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"200 6TH ST. Parada Valenzuela City"},{"Raw Address":"187 DE GULA COMP CAPT CRUZ ST Parada Valenzuela City"},{"Raw Address":"122 CALLEONSE Parada Valenzuela City"},{"Raw Address":"207 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"228 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"190 6TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"328 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"466-C KA BERONG Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. FORTUNE VillageE 4 Parada Valenzuela City"},{"Raw Address":"B2 LOT10 F FRANCISCO ST. G SILANGAN Parada Valenzuela City"},{"Raw Address":"132 LAGDAMEO ST. FOTRUNE 4 Parada Valenzuela City"},{"Raw Address":"BLK. 4 LOT 13 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"Q487 IPIL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"279 PILAR ST. Parada Valenzuela City"},{"Raw Address":"334 #1 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"35C 5TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"202 FELISA ST. Parada Valenzuela City"},{"Raw Address":"144 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"04 KAINGIN Parada Valenzuela City"},{"Raw Address":"28 CAPT CRUZ ST.Parada Valenzuela City"},{"Raw Address":"02 157 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"LOT 1 PHASE 2 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"184 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"414 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"1548 Parada Valenzuela City"},{"Raw Address":"361 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"500 FORTUNE DRIVE FORTUNE V Parada Valenzuela City"},{"Raw Address":"50 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"83 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"GULA ST. Parada Valenzuela City"},{"Raw Address":"267 Parada Valenzuela City"},{"Raw Address":"B1 L1 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"193 AM DE GULA ST. Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO STREET Parada Valenzuela City"},{"Raw Address":"183 FELIZA Parada Valenzuela City"},{"Raw Address":"243 7TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"25 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"315 MENES CMPD. Parada Valenzuela City"},{"Raw Address":"286 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"270 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"69 Parada Valenzuela City"},{"Raw Address":"247 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"290 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"154 FORTUNE Village4 PARADA Valenzuela City"},{"Raw Address":"384 BO. PARADA Valenzuela City"},{"Raw Address":"237 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B7L1 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"109 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"442 GOMEZ Parada Valenzuela City"},{"Raw Address":"291KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"0009 BLK 3 LOT 9 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"100 DOOR 3 CAPT CRUZ ST.Parada Valenzuela City"},{"Raw Address":"88-D CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"31 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"308 MENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"157-A SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"158 21ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"LOT 2 BLK 2 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"099 CAPT.CRUZ Parada Valenzuela City"},{"Raw Address":"270 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"415 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"274 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"188 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"122 CALLEONSE STREET Parada Valenzuela City"},{"Raw Address":"113 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"139 DALAWAN STREET Parada Valenzuela City"},{"Raw Address":"146 FORTUNE DRV. Parada Valenzuela City"},{"Raw Address":"230 1F EMBUSCADO COMP. S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"LOT 10 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"347 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"18 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"244 7TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"228 B S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"23 EUGENIO ST Parada Valenzuela City"},{"Raw Address":"220 C 21 STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"168 SALAZASR Parada Valenzuela City"},{"Raw Address":"B2 L4 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"343 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"258 INTERIOR S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"020 EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"412 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"255 SALVADOR Parada Valenzuela City"},{"Raw Address":"39 B RAMON ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"338 T. MANANG Parada Valenzuela City"},{"Raw Address":"451 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"97B CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"207 PELESA BOKED Parada Valenzuela City"},{"Raw Address":"4180 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"104 LAGDAMEO FV4 Parada Valenzuela City"},{"Raw Address":"239 ABELARDO Parada Valenzuela City"},{"Raw Address":"405 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"269 INANG PETRA STREET Parada Valenzuela City"},{"Raw Address":"260B RIZALINA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"152 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"100 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"152 NARRA ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"4389 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"260 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"FORTUNE DRIVE COR. 22 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"421 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"254 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"470 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"FELIZA STREET Parada Valenzuela City"},{"Raw Address":"TATAERO ST. Parada Valenzuela City"},{"Raw Address":"172 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"172 INTERIOR SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"1827 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"230 18TH ST Parada Valenzuela City"},{"Raw Address":"421 ZAMORA ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"262 OLIVA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"3B F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"125 LAGDAMEO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"202 ANTHONY ST.Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"9 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"255 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"130 B 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"473 KA BERONG ST Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMP. PARADA Valenzuela City"},{"Raw Address":"M DE GULA ST Parada Valenzuela City"},{"Raw Address":"GINTONG SILANGAN F FRANCISCO Parada Valenzuela City"},{"Raw Address":"296 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"98 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"26 F.SANTIAGO MARS STREET Parada Valenzuela City"},{"Raw Address":"CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"271 MARTA ST Parada Valenzuela City"},{"Raw Address":"256 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"177 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"446 GOMEZ ST. FORTUNE Village P. 7 Parada Valenzuela City"},{"Raw Address":"50 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"#95 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST.` Parada Valenzuela City"},{"Raw Address":"137-A NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"30 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"202 A FELIZA Parada Valenzuela City"},{"Raw Address":"168 DOON COMPOUND SALAZAR Parada Valenzuela City"},{"Raw Address":"119 KAMAGONG ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"63 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"067 Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"235 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"170 UNIT SALAZAR ST Parada Valenzuela City"},{"Raw Address":"276 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"22 PARADA ST. Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 2 F. FRANCISCO ST. GINTONG Parada Valenzuela City"},{"Raw Address":"2626 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE 21ST ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"185 - A FELIZA ST. Parada Valenzuela City"},{"Raw Address":"94 C CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"360 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"B3 L19 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"160 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"445 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"418-A ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"267 CORNER 19TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"186 FILISA ST Parada Valenzuela City"},{"Raw Address":"036 C. PARADA RD. Parada Valenzuela City"},{"Raw Address":"J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"12 B- KAMAGONG ST. F. Village 6 Parada Valenzuela City"},{"Raw Address":"006 F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"230 18ST Parada Valenzuela City"},{"Raw Address":"CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"331 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"256 TOMASA STREET Parada Valenzuela City"},{"Raw Address":"31 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"NO.14 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"SINILANGAN Parada Valenzuela City"},{"Raw Address":"351 F. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"32 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"334 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"357 J-FRANCISCO Parada Valenzuela City"},{"Raw Address":"KABERONG ST. PARADA Valenzuela City"},{"Raw Address":"1 F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"438 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"320 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"349 F Parada Valenzuela City"},{"Raw Address":"21 BENMARIE ST. Parada Valenzuela City"},{"Raw Address":"BLK. 5 LOT 20 349 FRANCISCO ST. GINTONG Parada Valenzuela City"},{"Raw Address":"130 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"224 21ST ST Parada Valenzuela City"},{"Raw Address":"283 A S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"374 TATA ANDRES ST.PARADA Valenzuela City"},{"Raw Address":"123 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"188 MOLAVE COR 6TH ST. Parada Valenzuela City"},{"Raw Address":"10 FIFTH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"165-G5 ACASIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"212 ANTHONY ST.FV 4 Parada Valenzuela City"},{"Raw Address":"140 NARRA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"139 NARRA ST.FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"245 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"151 ACACIA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"460 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"207 FELISA BUKID CALLE ONSE Parada Valenzuela City"},{"Raw Address":"237 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"154 SALAZAR Parada Valenzuela City"},{"Raw Address":"ST. 4 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"168 FELISA ST Parada Valenzuela City"},{"Raw Address":"403 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"25TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"88 CAPT. CRUZ SAN MIGUEL COMP. Parada Valenzuela City"},{"Raw Address":"T. Parada Valenzuela City"},{"Raw Address":"121 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"420 ZAMORA ST. PARADA Valenzuela City"},{"Raw Address":"91B CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"26 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"90 F. CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"222 KAMAGONG FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"138 E FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"151 ALICIA STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"204 VENUS ST. E&E COMP Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 12 BURGOS Parada Valenzuela City"},{"Raw Address":"203 ANTHONY ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"19 B.F SANTIAGO E&E COMP. Parada Valenzuela City"},{"Raw Address":"258 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"393 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"468-K KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"121 CONSUELO STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"144 ALICIA ST. PARADA Valenzuela City"},{"Raw Address":"138 NARRA ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"203 VENUS STREET F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"341 20TH ST Parada Valenzuela City"},{"Raw Address":"#80 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"192 RAMOS ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"258 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"LOT 10 NEPTUNE Parada Valenzuela City"},{"Raw Address":"9 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"02 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"BLOCK 5 LOT 15 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"305 DAET COMPD. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"152 ALICIA STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"315 JEMINEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"BLK10 LOT7 F. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"276 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"0099 B. CAPT. CRUS ST. Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKDI ST. Parada Valenzuela City"},{"Raw Address":"68 FORTUNE Village 6 PARADA Valenzuela City"},{"Raw Address":"# 343 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"BLK 10/12 LOT 12 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"457B KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"188DE GULA CMPD. PARADA Valenzuela City"},{"Raw Address":"094 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"438 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 8 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"B1L6 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"64 PARADA RD. FORTUNE Village 5 4 6 Valenzuela City Parada Valenzuela City"},{"Raw Address":"417 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"187 M DE GULA COMPOUD CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"456 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"203 FELIZA ST Parada Valenzuela City"},{"Raw Address":"233 19TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"055 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"170 UNIT 3 DOON CMPD. SALAZAR Parada Valenzuela City"},{"Raw Address":"351 FRANCISCO Parada Valenzuela City"},{"Raw Address":"198 RAMON ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"89 F. SANTIAGO MARS STREET Parada Valenzuela City"},{"Raw Address":"469 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"B4 L21 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"254 25TH Parada Valenzuela City"},{"Raw Address":"206C 22ND STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"385 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"133 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"140 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"431 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"LOT 41 BLK 10 NARA ST. Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. FV 7 Parada Valenzuela City"},{"Raw Address":"281 PILAR FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"55 KAMAGONG ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"357 J FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"BLOCK 5 LOT 11 F. FRANCISCO ST GINTONG Parada Valenzuela City"},{"Raw Address":"233 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"37 B PARADA RD. PARADA Valenzuela City"},{"Raw Address":"305 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"077 PARADA RD. EXT. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"253 ABELARDO ST Parada Valenzuela City"},{"Raw Address":"165 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"299 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN SANTOS TOWNHOUSE Parada Valenzuela City"},{"Raw Address":"106 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"09 R CABRAL Parada Valenzuela City"},{"Raw Address":"135 E FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"10 CALLE ONSE BUKID Parada Valenzuela City"},{"Raw Address":"297 D. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"129 NARRA ST FV 6 Parada Valenzuela City"},{"Raw Address":"167 RAMON ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"# 70 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"232 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"121 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"3651 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"170 Fortune Village 5 MOLAVE ST Parada Valenzuela City"},{"Raw Address":"118 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"242 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"009 PARADA Valenzuela City"},{"Raw Address":"151 ALICIA Parada Valenzuela City"},{"Raw Address":"117 LAGDAMEO ST Parada Valenzuela City"},{"Raw Address":"471 KA BERONG Parada Valenzuela City"},{"Raw Address":"55 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"127 E.LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"194 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"176 23RD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"203 6TH STREET Parada Valenzuela City"},{"Raw Address":"377 APT.5 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"208 ANTHONY ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"50 RD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"233 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"354 J.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"269 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ COMPPOUND Parada Valenzuela City"},{"Raw Address":"175 A. MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"9 E & E COMP. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"4560 SAPHIRE ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"29 PARADA ST. Parada Valenzuela City"},{"Raw Address":"275-A S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"176 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"207 FELIA ST. Parada Valenzuela City"},{"Raw Address":"#177 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"160 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"193 M DE GULA ST. Parada Valenzuela City"},{"Raw Address":"130 D 5TH STREET Parada Valenzuela City"},{"Raw Address":"190 MOLAVE STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#18 PARADA RD. Parada Valenzuela City"},{"Raw Address":"332 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 3 199 BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"395 E.SAN ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"257 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"330 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"256 RIZALINA Fortune Village 4 ST. Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"359 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"203 18TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"349 E. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"11 PARADA RD. Parada Valenzuela City"},{"Raw Address":"226 18TH ST. Parada Valenzuela City"},{"Raw Address":"039 RAMON ST.FV 4 Parada Valenzuela City"},{"Raw Address":"469 KAINGIN Parada Valenzuela City"},{"Raw Address":"14E FRANCISCO ST NLEX CORNER Parada Valenzuela City"},{"Raw Address":"225 ABELARDO Parada Valenzuela City"},{"Raw Address":"252 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"4 MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"160 NARRA ST Parada Valenzuela City"},{"Raw Address":"101 M. DEGULA ST. ALFONSO APARTMENT"},{"Raw Address":"249 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"159 6TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"195 CAPT.CRUZ ST. CALLE ONSE Parada Valenzuela City"},{"Raw Address":"193 B.M DE GULA ST. Parada Valenzuela City"},{"Raw Address":"442 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"087 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"94 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"237 19TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLOCK 4 LOT 14 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"425 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMPD. PARADA Valenzuela City"},{"Raw Address":"94 SALAZAR Parada Valenzuela City"},{"Raw Address":"31-F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"177 24TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"354 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"LOT 20 EARTH ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"LOT 5 BLK 10A NARRA ST. Parada Valenzuela City"},{"Raw Address":"491 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"377 18TH ST.Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"456 E KAINGIN Parada Valenzuela City"},{"Raw Address":"184 RAMON ST. FORTUNE Village 4 BO. Parada Valenzuela City"},{"Raw Address":"190 6TH ST. CORNER KAMAGONG FORTUNE Village Parada Valenzuela City"},{"Raw Address":"168 DOON CMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"4698 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"239 7TH ST. FORTUNE Village 5. PARADA Valenzuela City"},{"Raw Address":"448 WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST. PARADA VALENZUELA Parada Valenzuela City"},{"Raw Address":"#349 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"440 Parada Valenzuela City"},{"Raw Address":"044 PARADA RD. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"387 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"440 WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"31 F. SANTIAGOS T. Parada Valenzuela City"},{"Raw Address":"402 SAN ANDRES PARADA Valenzuela City"},{"Raw Address":"420 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"37-A PARADA RD.PARADA Valenzuela City"},{"Raw Address":"150 ST. Parada Valenzuela City"},{"Raw Address":"170 RAMON ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"165 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"273 PILAR ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"111E LAGDAMEO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"#39 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"70 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"04 SALAZAR ST.PARADA Valenzuela City"},{"Raw Address":"320 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"GP.STREET WES SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"460 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"316 MENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"HIYAS HOMES SUBD. CORNER DIAMOND Parada Valenzuela City"},{"Raw Address":"384 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"117 LAGDAMEO FORTUNE Village Parada Valenzuela City"},{"Raw Address":"412 TATA ERRO STREET Parada Valenzuela City"},{"Raw Address":"471 KABERONG ST Parada Valenzuela City"},{"Raw Address":"167 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"190 M. DEGULA STREET Parada Valenzuela City"},{"Raw Address":"132 CAPTAIN CROSS Parada Valenzuela City"},{"Raw Address":"9-F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"166 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"151 DALAWAN Parada Valenzuela City"},{"Raw Address":"038 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"FELIZA BUKIT ST. Parada Valenzuela City"},{"Raw Address":"438 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"444 ZAMORA ST Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"131 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"168 ALICIA ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"372 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"259 ADOR STREET Parada Valenzuela City"},{"Raw Address":"ADOR Parada Valenzuela City"},{"Raw Address":"111-E LAGDAMEO ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"140 E FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"168 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"73 GOMEZ ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST.Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"JEMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"039 RAMON SANTIAGO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"193 A.M DE GULA Parada Valenzuela City"},{"Raw Address":"349 FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"L10 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"648 CAINGIN ST. Parada Valenzuela City"},{"Raw Address":"101 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"286 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"449 PARADA Valenzuela City"},{"Raw Address":"B3 L5 GINTONG SILANGAN 3497 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"145 NARRA STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"130 WEST SERVICE RD Parada Valenzuela City"},{"Raw Address":"186-D FELIZA ST. Parada Valenzuela City"},{"Raw Address":"21ST FORTUNE5 Parada Valenzuela City"},{"Raw Address":"#13TH 5TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"305 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"1-G EMBUSCADO APT. 230 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"291 SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"098 FORTUNE DRIVE COR. OF 7TH ST. FV5 Parada Valenzuela City"},{"Raw Address":"143 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"87 PARADA RD Parada Valenzuela City"},{"Raw Address":"391 Parada Valenzuela City"},{"Raw Address":"B4L11 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"93-C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"469KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"4181 NARRA ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ CVOMPD.ST. PARADA Valenzuela City"},{"Raw Address":"258 E GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"230-B S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"056 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"341 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"94 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"114 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"234 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"393 FELISA ST. Parada Valenzuela City"},{"Raw Address":"22 EUGENIO COMPD. Parada Valenzuela City"},{"Raw Address":"234 7TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"0406 MARTHA ST Parada Valenzuela City"},{"Raw Address":"314 MENES COMP. Parada Valenzuela City"},{"Raw Address":"B2 L11 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"12 PARADA RD. Parada Valenzuela City"},{"Raw Address":"412 B P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"271 CONSUELO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"144 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"91 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"LOT 1 PHASE 2 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"15 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"297 TANDAND MANANG Parada Valenzuela City"},{"Raw Address":"DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"42 PARADA ST. PARADA Valenzuela City"},{"Raw Address":"134 E. LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"67 PARADA RD.VAL.CITY Parada Valenzuela City"},{"Raw Address":"442 P. GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"135 C CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"413 P DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"471 C KABERONG ST. Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"244 7TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"185 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"87 PARADA Valenzuela City"},{"Raw Address":"108 RAMON ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"FELISA ST. PARADA Valenzuela City"},{"Raw Address":"BLK 5 LOT 9 349 F. FRANCISCO GINTONG Parada Valenzuela City"},{"Raw Address":"24 E EUGENIO ST Parada Valenzuela City"},{"Raw Address":"314 JIMENES COMPOUND Parada Valenzuela City"},{"Raw Address":"385 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"130 D. 5TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"FRANSISCO ST. Parada Valenzuela City"},{"Raw Address":"148 NARRA ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"293 ILOCTO COMP. Parada Valenzuela City"},{"Raw Address":"174 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"349 F FRANCSISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"146 NARRA STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"357 J.FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"268 25TH ST. Parada Valenzuela City"},{"Raw Address":"26F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"CALLE ONSE DE GULA APARTMENT Parada Valenzuela City"},{"Raw Address":"455 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"238 19TH FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"349 E FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"190- B. MOLAVE ST FORTUNE6 Parada Valenzuela City"},{"Raw Address":"237 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"CALYE II ST. Parada Valenzuela City"},{"Raw Address":"182 UNIT G. MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"385 MERCURY ST. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"384 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"ALICIA ST. FORTUNE Village4 PARADA Valenzuela City"},{"Raw Address":"230 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"190 6TH ST. Parada Valenzuela City"},{"Raw Address":"298 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"272 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"395-DOOK1 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"28 EUGENIO Parada Valenzuela City"},{"Raw Address":"740 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"141 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"NO. 51 FORTUNE FIVE THIRD ST. Parada Valenzuela City"},{"Raw Address":"228-A S. DE GUSMAN ST. Parada Valenzuela City"},{"Raw Address":"170 SALAZAR ST. DOON CMP Parada Valenzuela City"},{"Raw Address":"A ILOCTO ST. Parada Valenzuela City"},{"Raw Address":"72 PARADA RD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"#223 21 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"506 TINDALO ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"175 23RD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLOCK 02 LOT 14 F. FRANCISCO GINTONG Parada Valenzuela City"},{"Raw Address":"3 CORAL ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"LOT 41 BLOCK 10 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"158 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"172 MOLAVE Parada Valenzuela City"},{"Raw Address":"BLK13 LOT 27 FORTUNE DRIVE FORTUNE VIILL. 5 Parada Valenzuela City"},{"Raw Address":"2225 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"220D 21STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMP. Parada Valenzuela City"},{"Raw Address":"465 KAINGIN Parada Valenzuela City"},{"Raw Address":"62 PARADA RD. Parada Valenzuela City"},{"Raw Address":"279 PILAR ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"137 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"315 JEMENES COMPD Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"227 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"17 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"132 LAGDAMEO ST.Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"216 ANTHONY Parada Valenzuela City"},{"Raw Address":"YAKAL Parada Valenzuela City"},{"Raw Address":"357 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"055 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ CMPD. Parada Valenzuela City"},{"Raw Address":"187- A FELISA ST. Parada Valenzuela City"},{"Raw Address":"39 C PARADA RD. Parada Valenzuela City"},{"Raw Address":"317 T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"412 Parada Valenzuela City"},{"Raw Address":"244 7ST. ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"109 E. LAGDAMEO ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"443 ROSELLA PARADA Valenzuela City"},{"Raw Address":"028 CAPT CRUZ ST Parada Valenzuela City"},{"Raw Address":"313 JIMENEZ CMPD. Parada Valenzuela City"},{"Raw Address":"244 ABELARDO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"250 B CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"102 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"258 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"828 PILAR ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"460P. GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"199 21ST STREET BEN MARIE COMPD. FORTUNE Parada Valenzuela City"},{"Raw Address":"5TH ST. FORTUNE Village 5 RD. Parada Valenzuela City"},{"Raw Address":"361 J-FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"188 MOLAVE ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"156 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"039 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"471 KABERONG ST. Parada Valenzuela City"},{"Raw Address":"279 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"168 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"206 22ND ST Parada Valenzuela City"},{"Raw Address":"301 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"435 C. ZAMORA ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"412 C.P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"457 F. KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"360 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"442 GOMEZ Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"16 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"40 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"44 B PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"214 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"94 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"438 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"272 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"039 RAMON Parada Valenzuela City"},{"Raw Address":"379 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"#85 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"239 ABELARDO ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"FATIMA CMPD. PARADA Valenzuela City"},{"Raw Address":"437 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"440 RUMARAO COMP. SERVICE RD. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 6 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"54 KAMAGONG Parada Valenzuela City"},{"Raw Address":"136 KAMAGONG STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"331-A TANDANG MANANG PARADA Valenzuela City"},{"Raw Address":"88 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"310 MENEZ COMP Parada Valenzuela City"},{"Raw Address":"181 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"339 21ST Parada Valenzuela City"},{"Raw Address":"01-31 MERCURY F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"140 E Parada Valenzuela City"},{"Raw Address":"88 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"456 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"70 PARADA ROAD FORTUNE SIX Parada Valenzuela City"},{"Raw Address":"26 NARRA ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"LOT 14 BLK. 4 349 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"167 RAMON ST. PARADA Valenzuela City"},{"Raw Address":"087 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"5 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"36 G. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"150 ALICIA S. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"91-A CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"170 RAMON STREET Parada Valenzuela City"},{"Raw Address":"145 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"188 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"FELIZA ST. Parada Valenzuela City"},{"Raw Address":"290 BO. PARADA ST. SANTOLAN ROAD Parada Valenzuela City"},{"Raw Address":"138 CAPT. CRUZ ST. BO. Parada Valenzuela City"},{"Raw Address":"31 F SANTIAGO ST. E & E COMP. Parada Valenzuela City"},{"Raw Address":"BLK 1 GINTONG SILANGAN COMP. Parada Valenzuela City"},{"Raw Address":"468- KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"258 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"99 SATURN ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"240 7TH ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"144 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"195 6TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"93 PARADA RD. Parada Valenzuela City"},{"Raw Address":"067 PARADA RD. Parada Valenzuela City"},{"Raw Address":"26 F. SANTIAGO MARS Parada Valenzuela City"},{"Raw Address":"79 A. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"302 Parada Valenzuela City"},{"Raw Address":"32 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"260 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"26 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"285 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"296-B T.MANANAG ST Parada Valenzuela City"},{"Raw Address":"296-B T. MANANG Parada Valenzuela City"},{"Raw Address":"009 PARADA RD Parada Valenzuela City"},{"Raw Address":"237 DE GUZMAN Parada Valenzuela City"},{"Raw Address":"37E PARADA ROAD Parada Valenzuela City"},{"Raw Address":"067 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"349 CAPTAIN FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"153 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"438 PARADA Valenzuela City"},{"Raw Address":"# 488 ZAMORA STREET Parada Valenzuela City"},{"Raw Address":"001 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"888 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"230 EMBUSCADO APT. S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"466B KAINGIN Parada Valenzuela City"},{"Raw Address":"320E S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"168 C CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"111 E LAGDAMEO Parada Valenzuela City"},{"Raw Address":"UNIT B 276 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"202 - AFELIZA ST. Parada Valenzuela City"},{"Raw Address":"287 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"165-4 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"360 J.FRANCISCO PARADA Valenzuela City"},{"Raw Address":"0006 LOT 3 BLK 4 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"349 ST. FRANCIS Parada Valenzuela City"},{"Raw Address":"411C P. DE GUZMAN ST. TATAERO Parada Valenzuela City"},{"Raw Address":"351 E. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"LOT 29 A. BLK 9 KAMANGONG ST. FV.6 Parada Valenzuela City"},{"Raw Address":"179 MOLAVE ST Parada Valenzuela City"},{"Raw Address":"057 Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"09 Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 10 GINTONG SILANGAN F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"228 A S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"128 A PARADA RD. Parada Valenzuela City"},{"Raw Address":"243 S DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"31 P. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"095 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39 RAMON ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"136 E.LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"274 PILAR STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"358 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"14 DIAMOND ST HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"107 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"#45 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"147 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"0118 DOOR 12 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"118 ST. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"BLK5 L17 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"470 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"175 MOLAVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. SKYLINE SUBD. Parada Valenzuela City"},{"Raw Address":"360 J FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"149 DALAWAN ST. PARADA ST. Valenzuela City Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID ST Parada Valenzuela City"},{"Raw Address":"169 ACACIA ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"BO. Parada Valenzuela City"},{"Raw Address":"297 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"154 ALICIA ST. FORTUNE Village 4 PARADA Valenzuela City"},{"Raw Address":"316 JIMENEZ CMPD. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"349 FRANCISCO Parada Valenzuela City"},{"Raw Address":"22T. EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"B1 L5 F. FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"095 FORTUNE DRIVE ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"412 M INT. ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"468 Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 8 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"302 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"223 ABELARDO STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"248 PARADA RD Parada Valenzuela City"},{"Raw Address":"412 TATA ERRO ST. Parada Valenzuela City"},{"Raw Address":"470 KAINIGIN ST Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRESS ST. Parada Valenzuela City"},{"Raw Address":"182-23RD ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"21ST ST. AGLEHAM COMP. Parada Valenzuela City"},{"Raw Address":"#244 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"116-B CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"31 EARTH ST F SANTIAGO Parada Valenzuela City"},{"Raw Address":"L12 BURGOS ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"KALYE 11 BUKID Parada Valenzuela City"},{"Raw Address":"277 PILAR Parada Valenzuela City"},{"Raw Address":"279-D TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"222 20TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"259 25TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"160 ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"171 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"291 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"143 NARRA FORTUNE VIL 6 Parada Valenzuela City"},{"Raw Address":"#257 M. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"B3L5 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"306 PARADA Valenzuela City"},{"Raw Address":"412 TATA ERO STREET Parada Valenzuela City"},{"Raw Address":"211 21ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"199 BENMARIE CMPD. AGLIHAM Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"440 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"456 B KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"195 6ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"119 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"325 TANDANG MANANG PARADA Valenzuela City"},{"Raw Address":"196 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"286 P. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"45 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"B4 L17 F FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"17 PARADA Valenzuela City"},{"Raw Address":"BLK. 7 LOT 11 GINTONG SILANGAN F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"365 TATA ANDREZ Parada Valenzuela City"},{"Raw Address":"006 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"281 PILAR ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"107 MOLAVE ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"309 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"125 KAMAGONG ST. PARADA Valenzuela City"},{"Raw Address":"7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"106 E. LAGDAMEO Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. Fortune Village 7 PARADA Valenzuela City"},{"Raw Address":"243 PASING ST. Parada Valenzuela City"},{"Raw Address":"402 7TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"457 INT SMC DUPLEX -D KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"170B SALAZAR Parada Valenzuela City"},{"Raw Address":"135 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST Parada Valenzuela City"},{"Raw Address":"228 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"0118 A. U2 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"360 FRANCISCO Parada Valenzuela City"},{"Raw Address":"91 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"525 T. EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"360 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"SAN ANDRES Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 23 A.FRANCISCO Parada Valenzuela City"},{"Raw Address":"349 F. FERNANDO ST. Parada Valenzuela City"},{"Raw Address":"378A TATA ANDRES Parada Valenzuela City"},{"Raw Address":"415 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"223 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"258 RIZALINA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"125 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"247 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"149 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"095 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"312 MENES COMPD. Parada Valenzuela City"},{"Raw Address":"114 YAKAL STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"84 A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"270 IMPONG JUANA Parada Valenzuela City"},{"Raw Address":"93-C CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"91 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"308 APT 1 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"34 SALVADOR Parada Valenzuela City"},{"Raw Address":"306 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"33 EARTH ST. Parada Valenzuela City"},{"Raw Address":"320 DIMAUNAHAN CMPD.PARADA Valenzuela City"},{"Raw Address":"264 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"26 Parada Valenzuela City"},{"Raw Address":"147 ALICIA ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"279 B S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"157-B SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"234 ABELARDO STREET Parada Valenzuela City"},{"Raw Address":"SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"174 MOLAVE ST.FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"1 FIFTH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"341 PARADA Valenzuela City"},{"Raw Address":"39D PARADA ROAD Parada Valenzuela City"},{"Raw Address":"BLK 4 LT 12 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"466 C. KABERONG ST. Parada Valenzuela City"},{"Raw Address":"146 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"9 Parada Valenzuela City"},{"Raw Address":"274 PILAR ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"022 EUGENIO ST Parada Valenzuela City"},{"Raw Address":"297 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"TATA ERO Parada Valenzuela City"},{"Raw Address":"332 T.MANANG ST. BO. PARADA Valenzuela City"},{"Raw Address":"104 KAMAGONG ST. FV 6 Parada Valenzuela City"},{"Raw Address":"114 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"395-B P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"214 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"169 DOON COMPOUND SALAZAR ST Parada Valenzuela City"},{"Raw Address":"109 RAMON ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"157 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"269 INANG PETRA ST. Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"201 A FELIZA ST Parada Valenzuela City"},{"Raw Address":"386 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"171 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"162 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"320 B BS DE GUZMAN Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMPD. ST. Parada Valenzuela City"},{"Raw Address":"255 ROMASA ST. Parada Valenzuela City"},{"Raw Address":"178 Parada Valenzuela City"},{"Raw Address":"UNIT A L17 B9 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"93A CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"415B TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"111-A LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"31 F. SAN TIAGO Parada Valenzuela City"},{"Raw Address":"349 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"B2 L6 BENMARIE 21ST Parada Valenzuela City"},{"Raw Address":"313 MENES COMP. Parada Valenzuela City"},{"Raw Address":"001 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"467 KAINGIN Parada Valenzuela City"},{"Raw Address":"140 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"198 RAMON FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"14 DIAMOND STREET HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"096 CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"234 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"181 MOLAVE FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"25TH ST DULO. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"#183 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"46 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"94 A FELIZA ST. Parada Valenzuela City"},{"Raw Address":"117 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"320 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"413 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"313 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"101 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"406 P DE GUZMAN BANDINO ST Parada Valenzuela City"},{"Raw Address":"227 18TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"412 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"93 B PARADA STREET Parada Valenzuela City"},{"Raw Address":"7TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"204 ANTHONY ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"99 VENUS STREET F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"453 B WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"268 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"122 CALYE ONSE Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"286 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"002 FORTUNE Village PARADA Valenzuela City"},{"Raw Address":"417 TATA ERRO STREET Parada Valenzuela City"},{"Raw Address":"240 S DEGUZMAN ST Parada Valenzuela City"},{"Raw Address":"455 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"97 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"168 FELISA ST. Parada Valenzuela City"},{"Raw Address":"18 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"312 MENES COMP. Parada Valenzuela City"},{"Raw Address":"214 IPIL ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"199 21 ST FORTUNE VillageE 5 Parada Valenzuela City"},{"Raw Address":"256 RIZALINA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"LOT 19 BLK 13 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"357 J.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"232 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"435 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"142 FORTUNE DRIVE FORTUNE5 Parada Valenzuela City"},{"Raw Address":"269 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"B4 L28 PARADA RD. Parada Valenzuela City"},{"Raw Address":"248 PARADA ROAD. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"CONSUELO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"329 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"199 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"145 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"468 N KAINGIN ST Parada Valenzuela City"},{"Raw Address":"134 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"234 7TH STREET Parada Valenzuela City"},{"Raw Address":"260 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"FORTUNE Village 7.PARADA Valenzuela City"},{"Raw Address":"235 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"365 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"206 22ND ST. Parada Valenzuela City"},{"Raw Address":"31F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"202 22ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"361 J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"177 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"290 ILOCT CMPD. PARADA Valenzuela City"},{"Raw Address":"S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"0257 ES DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ CMPD Parada Valenzuela City"},{"Raw Address":"310 MENES T. Parada Valenzuela City"},{"Raw Address":"132 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"184 FELIZA ST Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 14 TMHAI TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"Village 7 Parada Valenzuela City"},{"Raw Address":"250 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"94 Parada Valenzuela City"},{"Raw Address":"roup Parada Valenzuela City"},{"Raw Address":"138 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"336 TIA MANANG ST. PARADA Valenzuela City"},{"Raw Address":"B2 L6 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"159 NARRA Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"60 PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"B2L3 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"197 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"126 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"8 DR. M LAUREL DRIVE Parada Valenzuela City"},{"Raw Address":"265 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"101 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"237 19TH FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"MARS ST. #26 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"123 KAMAGONG ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"224 ABELARDO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"0117 A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"242 S . DE GUZMAN Parada Valenzuela City"},{"Raw Address":"462 P.GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"252A VillageA PARADA S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"406 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"omplete for the precinct. Parada Valenzuela City"},{"Raw Address":"161 Fortune Village 6 YAKAL ST.PARADA Valenzuela City"},{"Raw Address":"297-C T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"87C SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"333 A KAMAGONG Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST. FORTUNE IV Parada Valenzuela City"},{"Raw Address":"442 P.GOMEZ ST. Fortune Village 7 PARADA Valenzuela City"},{"Raw Address":"360 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"407 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"168 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"72 JADE ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"110 FELISA ST. Parada Valenzuela City"},{"Raw Address":"1112 CAPATAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"358 J FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"8 5TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"123 CAPT. CRUS ST. Parada Valenzuela City"},{"Raw Address":"466 C KA BERONG ST. KAINGIN Parada Valenzuela City"},{"Raw Address":"422 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"161 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"Parada Valenzuela City"},{"Raw Address":"273 PILAR ST. Parada Valenzuela City"},{"Raw Address":"341 21 ST. BENMARIE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"413 TATA ERO Parada Valenzuela City"},{"Raw Address":"466 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"119 A KAMAGONG FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"384 S. DEGUZMAN ST Parada Valenzuela City"},{"Raw Address":"028 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"235 19TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"146 FORTUNE DRIVE 5 Parada Valenzuela City"},{"Raw Address":"280 PILAR ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"22 ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"297 C-T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"87 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"260 PARADA ST. PARADA Valenzuela City"},{"Raw Address":"18-A F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"440 BO. Parada Valenzuela City"},{"Raw Address":"#68 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"196 MOLAVE STREET Parada Valenzuela City"},{"Raw Address":"555 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"338 TIA MANANG ST. PARADA Valenzuela City"},{"Raw Address":"225 20 STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"370 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"190-B MOLAVE ST FORTUNE VIL6 Parada Valenzuela City"},{"Raw Address":"289-C P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"283 S.DE GHUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"412 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"266 Parada Valenzuela City"},{"Raw Address":"J.M.T.C. LAGDAMEO ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"406 BANDINO ST. Parada Valenzuela City"},{"Raw Address":"259 RIZALINA ST. Fortune Village 4 RD. Parada Valenzuela City"},{"Raw Address":"17-C F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"197 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"317 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"317 A.T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"339 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"9 31F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"395 SAN ANDRES Parada Valenzuela City"},{"Raw Address":"410 DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"BLK. 4 LOT 19 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"449 P. GOMES ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"392 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"17 SALAZAR ST. DOON COMPD. Parada Valenzuela City"},{"Raw Address":"061 PARADA RD. Parada Valenzuela City"},{"Raw Address":"277 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"260 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"01 NEPTUNE ST. Parada Valenzuela City"},{"Raw Address":"25TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"234 S DEGUZMAN Parada Valenzuela City"},{"Raw Address":"186 6 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"04 5TH ST. Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"167 RAMON ST. Parada Valenzuela City"},{"Raw Address":"279 PILAR ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"207 FELIZA Parada Valenzuela City"},{"Raw Address":"437 GOMEZ ST. FORTUNE Village PH.7 Parada Valenzuela City"},{"Raw Address":"234 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"CORNER CORAL Parada Valenzuela City"},{"Raw Address":"99 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"96 FELISA ST. Parada Valenzuela City"},{"Raw Address":"62 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"161 Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMP. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"161 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID VENUS STREET Parada Valenzuela City"},{"Raw Address":"314 JIMENEZ COMP Parada Valenzuela City"},{"Raw Address":"339 TANDANG MANANG PARADA Valenzuela City"},{"Raw Address":"86 SALVADOR ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"438 RUMARAO COMPOUND Parada Valenzuela City"},{"Raw Address":"MOLAVE ST. Fortune Village 6 182 D. Parada Valenzuela City"},{"Raw Address":"05 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"240 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"513 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"150 ALICIA Parada Valenzuela City"},{"Raw Address":"351 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"132 KAMAGONG Parada Valenzuela City"},{"Raw Address":"L5-207 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"13 5TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"146 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"LOT 19 BLK. 13 KAMAGONG STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"FV 4 Parada Valenzuela City"},{"Raw Address":"347 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"85 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"FORTUNE5 Village Parada Valenzuela City"},{"Raw Address":"447 GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 17 GINTONG SILANGANG Parada Valenzuela City"},{"Raw Address":"#257 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"230 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"10 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"100 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"SILANGAN Parada Valenzuela City"},{"Raw Address":"BLK5 LOT10 JADE ST. HIYAS HOME Parada Valenzuela City"},{"Raw Address":"141 E. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"451 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"F SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"281 PILAR ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"185 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"454 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"294 TADANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"513 JIMENES CMPD. Parada Valenzuela City"},{"Raw Address":"77 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"448 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"2510 25 STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"297 D. T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"244 1ST. FV 5 Parada Valenzuela City"},{"Raw Address":"248 S. DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"135 YAKAL COR. NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"290 ILOCTO ST. Parada Valenzuela City"},{"Raw Address":"329 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"067 PARADA RD. FORT. 6 Parada Valenzuela City"},{"Raw Address":"172 SALAZAR ST.  Parada Valenzuela City"},{"Raw Address":"320 E. MIURA APT. S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"#336 TIA MANANG Parada Valenzuela City"},{"Raw Address":"233 19TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"132 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"38 PARADA STREET Parada Valenzuela City"},{"Raw Address":"227 ABELARDO ST. FV4 Parada Valenzuela City"},{"Raw Address":"FORTUNE Village NO. 4 Parada Valenzuela City"},{"Raw Address":"407-A P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"0101 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"320 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"135 E. LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"009 PARADA STREET Parada Valenzuela City"},{"Raw Address":"153 ALICIA ST. FV4 Parada Valenzuela City"},{"Raw Address":"B6 Parada Valenzuela City"},{"Raw Address":"100 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"CITY MM Parada Valenzuela City"},{"Raw Address":"371-A TATA ANDRES Parada Valenzuela City"},{"Raw Address":"300 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"179 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"230S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"207 FELIZA CALLE ONSE Parada Valenzuela City"},{"Raw Address":"211 CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"230 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"#16B DOON COMP. Parada Valenzuela City"},{"Raw Address":"209 ANTHONY ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"232 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"88 SAN MIGUEL COMP. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"26 MARS STREET F SANTIAGO Parada Valenzuela City"},{"Raw Address":"318 T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"254 A S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"184 FELISA Parada Valenzuela City"},{"Raw Address":"258 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"258-1 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG BLK 3 LOT 19 HOE Parada Valenzuela City"},{"Raw Address":"101 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"234 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"31 F. SANTIAGO EARTH ST Parada Valenzuela City"},{"Raw Address":"258 RIZALINA ST. FORTUNE Village4 ST. Parada Valenzuela City"},{"Raw Address":"F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"339 Fortune Village 5 20ST Parada Valenzuela City"},{"Raw Address":"169 DOON COMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"281 PILAR ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"165 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"378 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"43 CAINGIN Parada Valenzuela City"},{"Raw Address":"25 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"2151 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"C-378 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"197 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"471C KABERONG ST Parada Valenzuela City"},{"Raw Address":"6TH ST. MOLAVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"2745 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"LOT 5 LOT 8 JADE ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"449 GOMEZ STREET Parada Valenzuela City"},{"Raw Address":"200 FORTUNE DR. ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"39K RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"297 Parada Valenzuela City"},{"Raw Address":"291 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"474 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"12 5TH STREET FORTUNE FIVE Village Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"140 E. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"80 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"DOOR 1 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"294 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"101 M DEGULA ST. Parada Valenzuela City"},{"Raw Address":"4541 MOLAVE ST. FORTUNE5/6 Village Parada Valenzuela City"},{"Raw Address":"7TH ST. Fortune Village 5 FORTUNE Village Parada Valenzuela City"},{"Raw Address":"115 CPT CRUZ Parada Valenzuela City"},{"Raw Address":"392 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"89 D. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"035 PARADA Valenzuela City"},{"Raw Address":"EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"204 22ND ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"145 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"199 BENMARIE COMP. 21ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"177 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"094 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"228-B S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"99 SATURN STREET F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"834 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"14 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"247 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"240 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"256 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"1EE MARS F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"414 PARADA Valenzuela City"},{"Raw Address":"245 ABELARDO Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"CALLE ONSE DULO BUKID Parada Valenzuela City"},{"Raw Address":"57 PARADA RD. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"79 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"409 P. DE GUZMAN ST. BIAZON COMPOUND Parada Valenzuela City"},{"Raw Address":"863B KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"130 KAMAGONG ST. PARADA Valenzuela City"},{"Raw Address":"21ST BENMARIE COMP. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"161 FELIZA ST. SALAZAR RD. Parada Valenzuela City"},{"Raw Address":"70 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"CALLE 11 BUKID Parada Valenzuela City"},{"Raw Address":"116 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"0260 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"154 ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"39-A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"35 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"1 F SANTIAGO Parada Valenzuela City"},{"Raw Address":"199 BENMARIE GARDEN FORTUNE Village Parada Valenzuela City"},{"Raw Address":"2932 ILOCTO ST. Parada Valenzuela City"},{"Raw Address":"207 CALLE ONSE FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"358 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"BLK. 4 LOT 12 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"160 ALICIA ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"21 STREET BEN MARIE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"228 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"SINILNGAN Parada Valenzuela City"},{"Raw Address":"258 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"267 CORNER 19TH & 24TH ST Parada Valenzuela City"},{"Raw Address":"336 TANDANG MANAG ST Parada Valenzuela City"},{"Raw Address":"201 CALLE ONCE ST. PARADA Valenzuela City"},{"Raw Address":"86 PARADA Valenzuela City"},{"Raw Address":"123 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"295 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"67 PARADA Valenzuela City"},{"Raw Address":"177 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"374 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"407 BANDIDO ST. Parada Valenzuela City"},{"Raw Address":"247 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"419 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"358-D J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"LOT9 BLK1 SAPHIRE ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"L9 GINTONG SILANG Parada Valenzuela City"},{"Raw Address":"255 E TOMASA STREET Parada Valenzuela City"},{"Raw Address":"134 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"345 F. FRANCISCO ST BO. Parada Valenzuela City"},{"Raw Address":"137 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"199 6TH ST.MANALANG CMPD Parada Valenzuela City"},{"Raw Address":"267 CORNER 24TH & 19TH STREET Parada Valenzuela City"},{"Raw Address":"15 SANTIAGO Parada Valenzuela City"},{"Raw Address":"36 C. PARADA RD. Parada Valenzuela City"},{"Raw Address":"LOT 5 BLK. 10 A NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"168 ACACIA Parada Valenzuela City"},{"Raw Address":"233 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"15 DIAMOND HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"513 ABCO COMP. TINDALO ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"26 F. SANTAIGO Parada Valenzuela City"},{"Raw Address":"302 - B TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"123-C CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"416 TATA ERO STREET Parada Valenzuela City"},{"Raw Address":"14 PARADA Valenzuela City"},{"Raw Address":"120 25TH ST. FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"2 TINDALO ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"5 KAMAGONG Parada Valenzuela City"},{"Raw Address":"B2 L17 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"149 DALAWAN ST. BO.PARADA Valenzuela City"},{"Raw Address":"273 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"0067 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"11 5TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"473 ABERONG ST Parada Valenzuela City"},{"Raw Address":"182 FELIZA Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. FORTUNE7 Parada Valenzuela City"},{"Raw Address":"39 AJERO COMP. RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"03 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"425 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"215 DAET COMP. Parada Valenzuela City"},{"Raw Address":"92 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"87 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"322 PEA COMP. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"182 FELISA Parada Valenzuela City"},{"Raw Address":"169 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"LOT 1 PHASE 2 SANTIAGO Parada Valenzuela City"},{"Raw Address":"152 23RD ST.Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"609 7TH ST Parada Valenzuela City"},{"Raw Address":"36 G. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"434 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"457 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"208 22ND STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"339 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"58 A. Fortune Village 6 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"138 ELAGDAMEO ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"322 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"366 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"151 ACACIA Parada Valenzuela City"},{"Raw Address":"11-A F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"067 Fortune Village 6 PARADA RD. Parada Valenzuela City"},{"Raw Address":"136 D NARA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"#1 JADE ST.CORNER SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"253 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"178 RAMON ST. Parada Valenzuela City"},{"Raw Address":"44 PARADA FORTUNE V5 Parada Valenzuela City"},{"Raw Address":"525 EUGENIO Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. PARADA Valenzuela City"},{"Raw Address":"151 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"009 R.CABRAL Parada Valenzuela City"},{"Raw Address":"322 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"91 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"258 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"10 E CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"312 MENES COMP. PARADA Valenzuela City"},{"Raw Address":"267 CORNER 19TH AND 24TH ST FORTUNE Parada Valenzuela City"},{"Raw Address":"4684 PEARL ST. HIYAS HOMES. Parada Valenzuela City"},{"Raw Address":"128 YAKAL ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"404 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"410-A PARADA Valenzuela City"},{"Raw Address":"21ST BELMARIE CMPD. AGLEHAM Parada Valenzuela City"},{"Raw Address":"291 KAINGIN Parada Valenzuela City"},{"Raw Address":"90 ADOR ST Parada Valenzuela City"},{"Raw Address":"269B S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"252 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"LOT 41 BLK 10 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"207 FILIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"435 ZAMORA FORTUNE Village Parada Valenzuela City"},{"Raw Address":"KAINGIN Parada Valenzuela City"},{"Raw Address":"FELIZAS ST. BUKID 207 Parada Valenzuela City"},{"Raw Address":"190 6TH ST. MOLAVE FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"223 ABELARDO ST. FORTUNE Village IV Parada Valenzuela City"},{"Raw Address":"35 A PARADA RD. Parada Valenzuela City"},{"Raw Address":"L2 B11 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"BLK 7 LOT 4 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"328 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"004 PARADA ST. Parada Valenzuela City"},{"Raw Address":"0250 UNIT 6 CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"184 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"178 23RD ST. Parada Valenzuela City"},{"Raw Address":"431 FORTUNE Village 7 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"394 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"317 T.MANANANG ST. PARADA Valenzuela City"},{"Raw Address":"330 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"22 EUQUINIO ST Parada Valenzuela City"},{"Raw Address":"367 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"242 19TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"170 DOON COMP. Parada Valenzuela City"},{"Raw Address":"068 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"440 P. GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"LOT 1 PHASE 2 PARADA F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"3661 KAMAGONG ST. COR. YAKAL ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"246 S Parada Valenzuela City"},{"Raw Address":"476 SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"117 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"187 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"215 21ST ST. FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"414 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"169D 7ST FORTUNE5 Parada Valenzuela City"},{"Raw Address":"A 334 T. MANANG Parada Valenzuela City"},{"Raw Address":"023 T.EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"021 EUGENIO Parada Valenzuela City"},{"Raw Address":"LOT 6 B.F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"243 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK. 5 LOT 8 JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"# 95 P DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"400 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"289 - D SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"409P. DE GUZMAN ST. VAL. M.M. Parada Valenzuela City"},{"Raw Address":"351 CAPTAIN FRANCISCO Parada Valenzuela City"},{"Raw Address":"469 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"243 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"359 J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"448 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"403 P.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"207 FELEZA BUKID Parada Valenzuela City"},{"Raw Address":"349 Parada Valenzuela City"},{"Raw Address":"150 ALICIA STREET Parada Valenzuela City"},{"Raw Address":"257 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"B-5 L-8 JADE ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"14 DIAMOND ST. HIYAS HOMES SUBDIVISION Parada Valenzuela City"},{"Raw Address":"249 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST FORTUNE VELLAGE4 Parada Valenzuela City"},{"Raw Address":"235 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"38 D TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"117 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"40 PEARL Parada Valenzuela City"},{"Raw Address":"021 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"073 FORTUNE Village 7 PARADA RD. EXT. Parada Valenzuela City"},{"Raw Address":"122 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"215 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"431 P. BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"276 AP DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 8 349 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"468 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"24-B EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"314 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"JADE ST. Parada Valenzuela City"},{"Raw Address":"351 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"200A 22ND ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"265 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"25TH ST. Fortune Village 5. PARADA Valenzuela City"},{"Raw Address":"352 Parada Valenzuela City"},{"Raw Address":"266 24TH STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"SMC- DUPLEX D Parada Valenzuela City"},{"Raw Address":"BLOCK 5 LOT 9 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"22 LOT F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"199 6TH ST. FORTUNE Village 5-6 Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 17 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"274 PILAR ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"194 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"93 D CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"B1L4 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"223 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"247 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"190 MOLAVE STREET Parada Valenzuela City"},{"Raw Address":"109 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"165-G ACACIA STREET Parada Valenzuela City"},{"Raw Address":"P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"202 Parada Valenzuela City"},{"Raw Address":"299 T. MANANG ST. PARADA Valenzuela City"},{"Raw Address":"123 E.LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"431 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"118 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"241 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"320B S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"324 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"UNIT2 LOT17 BLK9 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"4815 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"360 J . FRANCISCO Parada Valenzuela City"},{"Raw Address":"L7A BLK8 PARADA RD. FV6 Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. B4L10 GS Parada Valenzuela City"},{"Raw Address":"225 ABELARDO STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"67 PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"105 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"116 B. CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"33 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"CALYE 11 ST. Parada Valenzuela City"},{"Raw Address":"325 TANDANG MANANG ST. BO.Parada Valenzuela City"},{"Raw Address":"098 Fortune Village 5 DRIVE Parada Valenzuela City"},{"Raw Address":"362 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"E LAGDAMEO FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"244 7 Fortune Village 5 STREET Parada Valenzuela City"},{"Raw Address":"438 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"26 MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"465 KAINGIN ST.PARADA Valenzuela City"},{"Raw Address":"B4 L3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"347 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"59 BANDINO ST Parada Valenzuela City"},{"Raw Address":"101 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"320 T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"457 INT. SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"94 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"148 Fortune Village 6 NARRA ST. Valenzuela City Parada Valenzuela City"},{"Raw Address":"122A KAMAGONG ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"441 SERVICE ROAD RUMARAO COMPD. Parada Valenzuela City"},{"Raw Address":"253 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"09 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"312 INT. MENES CMPD.PARADA Valenzuela City"},{"Raw Address":"13 PARADA RD. Valenzuela City Parada Valenzuela City"},{"Raw Address":"4560 SAPPHIRE STREET Parada Valenzuela City"},{"Raw Address":"B3L2 TMHOA Parada Valenzuela City"},{"Raw Address":"14 B NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST FORTUNE Parada Valenzuela City"},{"Raw Address":"022 EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"199 6TH ST. FORTUNE Village6 PARADA Valenzuela City"},{"Raw Address":"322 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMP. AGLEHAM STREET Parada Valenzuela City"},{"Raw Address":"16-F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMPOUND 21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"247 7TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"133 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"225 Parada Valenzuela City"},{"Raw Address":"242 ABELARDO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"167 RAMON STREET Parada Valenzuela City"},{"Raw Address":"405 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"450 SERVICE RD Parada Valenzuela City"},{"Raw Address":"441 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"28 BARRIO Parada Valenzuela City"},{"Raw Address":"39 RAMON STREET Parada Valenzuela City"},{"Raw Address":"207 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"063 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"36 D. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"B7 L26 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"354 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"36C PARADA ST. Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"0232 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"45 A. F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"193 M.DE GULA ST.PARADA Valenzuela City"},{"Raw Address":"235 T. MANANG Parada Valenzuela City"},{"Raw Address":"203 B VENUS ST. Parada Valenzuela City"},{"Raw Address":"328 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"440 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"250 ABELARDO ST. Fortune Village 4 MALINTA Parada Valenzuela City"},{"Raw Address":"283 MARTHA ST. Parada Valenzuela City"},{"Raw Address":"126 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"11 D EMBUSCADO COMP. Parada Valenzuela City"},{"Raw Address":"423 L3-B3 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"130 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"247-C S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"443 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"223 ABELARDO ST. FV4 Parada Valenzuela City"},{"Raw Address":"107 E. LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"369 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"456-H KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"210 SALVADOR Parada Valenzuela City"},{"Raw Address":"117 KAMAGONG ST Parada Valenzuela City"},{"Raw Address":"12 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"137 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"391 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"218 ANTHONY FV 4 Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST Parada Valenzuela City"},{"Raw Address":"379 TATA ANDREZ ST. Parada Valenzuela City"},{"Raw Address":"61 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"035 PARADA RD. Parada Valenzuela City"},{"Raw Address":"JIMENEZ ST. Parada Valenzuela City"},{"Raw Address":"320 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"BUKID Parada Valenzuela City"},{"Raw Address":"358 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"274 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"41 NARRA ST Parada Valenzuela City"},{"Raw Address":"310 MENEZ SMPD Parada Valenzuela City"},{"Raw Address":"264 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"349 F. FRANCIS OST. Parada Valenzuela City"},{"Raw Address":"157 ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"199 21ST STREET BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"340 20 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"SALAZAR ST Parada Valenzuela City"},{"Raw Address":"ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"027 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"19 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"5 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"095 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"232 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"BLK. 3 LOT 20 349 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"244 ABELARDO Parada Valenzuela City"},{"Raw Address":"BLK 6 LOT 8 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"438 Parada Valenzuela City"},{"Raw Address":"431 F. FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"114 KAMAGON ST. PARADA Valenzuela City"},{"Raw Address":"217 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"178 RAMON ST.FV 4 Parada Valenzuela City"},{"Raw Address":"31F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"103 KAMAGONG ST. FORT Village 6 Parada Valenzuela City"},{"Raw Address":"422 BURGOS STREET FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 12 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"216 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"8 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"214 DE GUZMAN Parada Valenzuela City"},{"Raw Address":"95 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMP. 21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"206F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"B4 L13 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"235 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"308 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST. FV4 Parada Valenzuela City"},{"Raw Address":"128 PARADA RD. FV6 Parada Valenzuela City"},{"Raw Address":"389 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"312 MENES CMPD. Parada Valenzuela City"},{"Raw Address":"294 KAINGIN Parada Valenzuela City"},{"Raw Address":"170 SALAZAR ST. COMPOUND Parada Valenzuela City"},{"Raw Address":"BLK. 3 LOT 17 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"327 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"200-B CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"320 UNIT 2 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"6ST. COR. KAMAGONG ST. PARADA Valenzuela City"},{"Raw Address":"BLK. 7 LOT 26 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"199 22ND ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"204 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"153 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"71 B. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"138 A NARRA ST. Parada Valenzuela City"},{"Raw Address":"259 ADOR ST. Parada Valenzuela City"},{"Raw Address":"B5 GOMEZ ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"134 CAPT.CRUZ PARADA Valenzuela City"},{"Raw Address":"131 KAMAGONG Parada Valenzuela City"},{"Raw Address":"#362 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"140 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"400-A ILOCTO ST. SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"153 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"324 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"181 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"107 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"150 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"#281 PILAR ST. FV 4 Parada Valenzuela City"},{"Raw Address":"167 RAMON ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"339 T. MANANG ST Parada Valenzuela City"},{"Raw Address":"244 ESTRELLA APT. 7TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"KM.14 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"91 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"442 P. GOMEZ ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"098 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"028 PARADA RD. Parada Valenzuela City"},{"Raw Address":"1 DR.MARIANO LAUREL DRIVE Parada Valenzuela City"},{"Raw Address":"161 ALICIA ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"1F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"088 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"329 T. MANANG Parada Valenzuela City"},{"Raw Address":"151 ACACIA ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"185 FELISA ST. Parada Valenzuela City"},{"Raw Address":"169 DOON COMP. Parada Valenzuela City"},{"Raw Address":"ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"127 E. LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"183 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"095 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"207 FELISA Parada Valenzuela City"},{"Raw Address":"61 PARADA RD. Parada Valenzuela City"},{"Raw Address":"150 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"144 ALICIA FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"FATIMA COMPD. BARRIO Parada Valenzuela City"},{"Raw Address":"028 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"10TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"Fortune Village 7 GOMEZ ST. PARADA Valenzuela City"},{"Raw Address":"328 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 8 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"37 Parada Valenzuela City"},{"Raw Address":"360 J.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"177 MOLAVE ST. 6TH ST. FORTUN 5 Parada Valenzuela City"},{"Raw Address":"TATAERRO ST. Parada Valenzuela City"},{"Raw Address":"92 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"417 TATA ANDRESS ST Parada Valenzuela City"},{"Raw Address":"111 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"154 ALICIA STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"424 BURGOS ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"72 PARADA RD. Parada Valenzuela City"},{"Raw Address":"470 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"164 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"157 ALICIA ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"39-B RAMON ST. Parada Valenzuela City"},{"Raw Address":"031 PARADA Valenzuela City"},{"Raw Address":"289-D S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"448 SERVICE RD. HIYAS SUBD. PARADA Valenzuela City"},{"Raw Address":"57 PARADA RD. Fortune Village 6 VillageParada Valenzuela City"},{"Raw Address":"438 SILENCE RD. Parada Valenzuela City"},{"Raw Address":"117 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"BO.PARADA Valenzuela City"},{"Raw Address":"409 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"182 23RD STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"FATIMA COMP Parada Valenzuela City"},{"Raw Address":"404 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"438 PARADA FORTUNE Village7 Valenzuela City Parada Valenzuela City"},{"Raw Address":"04 P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"276 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"F. SANTIAGO VENUS ST. Parada Valenzuela City"},{"Raw Address":"170 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"237 19TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"ROMAN ST. FORTUNE Village 4. Parada Valenzuela City"},{"Raw Address":"LOT 2 DIAMOND STREET HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"198 COR. & 21ST. 19TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"99 VENUS ST.F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"BLK. 5 LOT 1 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"LOT 3 BLK 7 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"333 KAMAGONG ST FV 5 & 6 Parada Valenzuela City"},{"Raw Address":"#287 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"UNIT 1 NARRA ST. Parada Valenzuela City"},{"Raw Address":"317 MENEZ CMPD Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 10 LUPANG SINILANGAN Parada Valenzuela City"},{"Raw Address":"LOT 10 FORTUNE F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"1548 E PEARL ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"127 YAKAL ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"198 RAMON STREE FV4 Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"039 D. SANTIAGO COMP. FV4 Parada Valenzuela City"},{"Raw Address":"412 TATAERO ST. Parada Valenzuela City"},{"Raw Address":"242 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"377 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"202 FILISA ST. Parada Valenzuela City"},{"Raw Address":"416 ZAMORA ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"374 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"365 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"348 Parada Valenzuela City"},{"Raw Address":"92 FORTUNE DR. Parada Valenzuela City"},{"Raw Address":"468 KAINGIN ST.PARADA Valenzuela City"},{"Raw Address":"308 JIMENEZ Parada Valenzuela City"},{"Raw Address":"96 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"204B F.SANTIAGO STR. Parada Valenzuela City"},{"Raw Address":"31 B.O Parada Valenzuela City"},{"Raw Address":"116 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"134 5TH ST. Parada Valenzuela City"},{"Raw Address":"6TH STREET FORTUNE Village 5 NARRA ST. Parada Valenzuela City"},{"Raw Address":"95 P. DE GUZMAN TS. Parada Valenzuela City"},{"Raw Address":"121 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"P. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"96 Parada Valenzuela City"},{"Raw Address":"2039 SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"134 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"1164 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"39 C. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"#232 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"416 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST. FORTUNE VillageE 4 Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 9 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"2311 8TH ST.FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMPOUND Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"132 KANMAGONG ST. FV5 Parada Valenzuela City"},{"Raw Address":"FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"185 FELIZA Parada Valenzuela City"},{"Raw Address":"215 DAET COMPD.PARADA Valenzuela City"},{"Raw Address":"256 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"202 FELISA Parada Valenzuela City"},{"Raw Address":"CALE ONSE Parada Valenzuela City"},{"Raw Address":"425 ZAMORA ST. PARADA Valenzuela City"},{"Raw Address":"69 PARADA RD. Parada Valenzuela City"},{"Raw Address":"349 F FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"154 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"175-A MOLAVE ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"JADE ST. JADE HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"#5 IPIL ST. Parada Valenzuela City"},{"Raw Address":"032 PARADA ST. PARADA Valenzuela City"},{"Raw Address":"448 GOMEZ ST Parada Valenzuela City"},{"Raw Address":"116 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"181- RAMON ST. Parada Valenzuela City"},{"Raw Address":"353 J. FRANCIS ST. Parada Valenzuela City"},{"Raw Address":"206 22ND ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39 Parada Valenzuela City"},{"Raw Address":"DE GUZMAN Parada Valenzuela City"},{"Raw Address":"255 TOMASA STREET Parada Valenzuela City"},{"Raw Address":"310 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"181 FELISA ST. Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"257-B M DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"18-A F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"Q4-176 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"116 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"158 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"86 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"316 MENES COMP. Parada Valenzuela City"},{"Raw Address":"108 COR. YAKAL AND KAMAGONG ST FORTUNE Parada Valenzuela City"},{"Raw Address":"469 B KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"223 ABELARDO FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"234 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"(Member) Parada Valenzuela City"},{"Raw Address":"206 F.SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"039 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"303 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"41 NARRA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"190-B MOLAVE ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"237 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"211 21ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"407 P.DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"TATA ERO P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"69 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"399 SAN ANDRES ST Parada Valenzuela City"},{"Raw Address":"194 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"B2 LOT 14 F. FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"BLK. 3 LOT 1 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"271 CONSUELO ST Parada Valenzuela City"},{"Raw Address":"244 ESTRELLIA APARTMENT Parada Valenzuela City"},{"Raw Address":"336 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"244 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"19 EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"162 E SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"244 19TH STREET FORTUNE V Village Parada Valenzuela City"},{"Raw Address":"F SANTIAGO Parada Valenzuela City"},{"Raw Address":"TATA ANDRES Parada Valenzuela City"},{"Raw Address":"141 NARRA ST. Parada Valenzuela City"},{"Raw Address":"F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"316 JEMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"104 KAMAGONG ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"108 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"455 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"315 JIMENEZ COMP Parada Valenzuela City"},{"Raw Address":"419 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"93 A. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"313 PARADA Valenzuela City"},{"Raw Address":"001 INTER ISLAND FEEDS PARADA Valenzuela City"},{"Raw Address":"154 NARRA ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 5TM HOA TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"88 KAMAGONG ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID CALLE ONSE Parada Valenzuela City"},{"Raw Address":"203 B VENUS ST. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"113 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"L4 B10 25TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"402 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"160 ACACIA CORNER MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"0004 JADE ST HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"101 DE GULA CMPD. CAPT CRUZ. ST. Parada Valenzuela City"},{"Raw Address":"CALLE ONSE ST. DULO Parada Valenzuela City"},{"Raw Address":"222 ANTHONY STREET FORTUNE Village IV Parada Valenzuela City"},{"Raw Address":"#384 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"168 E. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"001 BO Parada Valenzuela City"},{"Raw Address":"B2 L 1O GINTONG SILANGAN FRANCISCO Parada Valenzuela City"},{"Raw Address":"137 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"204 VENUS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"422 BURGOS ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"75 GOMEZ ST FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"366 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"032 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"270 CONSUELO ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"32 PARADA RD. Parada Valenzuela City"},{"Raw Address":"339 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"442 FORTUNE Village 7. Parada Valenzuela City"},{"Raw Address":"355 J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"13 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"22 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"087 PARADA Valenzuela City"},{"Raw Address":"25 ST. FORTUNE VLL. 5 PARADA Valenzuela City"},{"Raw Address":"243 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"BLK. 2 LOT 9 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"297 D. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"332 T. MANANG ST Parada Valenzuela City"},{"Raw Address":"33 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"391 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"277 PILAR ST. Parada Valenzuela City"},{"Raw Address":"9 DR.LAUREL ST. FORTUNE Village4 Valenzuela City Parada Valenzuela City"},{"Raw Address":"Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"ILOCTO CMPD. PARADA Valenzuela City"},{"Raw Address":"72 JADE ST. HIYAS SUBD. PARADA Valenzuela City"},{"Raw Address":"130 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"147 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"283 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"B2 L2 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"021 EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"367 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"421 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"40 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"264 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"42 PARADA RD Parada Valenzuela City"},{"Raw Address":"201 - A FELIZA ST. Parada Valenzuela City"},{"Raw Address":"449 P. GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"117 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"187 FELIZA ST. UNIT 12 Parada Valenzuela City"},{"Raw Address":"101 DE GULA CMPD. PARADA Valenzuela City"},{"Raw Address":"169 ACACIA FORTUNE Village Parada Valenzuela City"},{"Raw Address":"CAPT. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"LOT 2 BLOCK 10 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"269 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"L4 B10 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"125 CONSUELO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"94 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"112 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"349F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"26 F Parada Valenzuela City"},{"Raw Address":"89 D CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"232 Parada Valenzuela City"},{"Raw Address":"349 A. FRANCISCO Parada Valenzuela City"},{"Raw Address":"L-11 BLK-2 SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"104 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"2427 7TH ST. Parada Valenzuela City"},{"Raw Address":"377 I8ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLK3 LOT2 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"2646 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"129 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"235 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"130 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"141 DALAWAN Parada Valenzuela City"},{"Raw Address":"229 ABELARDO ST. PARADA Valenzuela City"},{"Raw Address":"247 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"11-C 230 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"409 P.DE GUZMAN ST PARADA Valenzuela City"},{"Raw Address":"343 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"199 BEN MARIE AGLIHAM COMPOUND 21ST Parada Valenzuela City"},{"Raw Address":"410 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"39 RAMON ST . PARADA Valenzuela City"},{"Raw Address":"199 6ST Parada Valenzuela City"},{"Raw Address":"871 FELIZA ST Parada Valenzuela City"},{"Raw Address":"187 MOLAVE ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"424 A.BURGOS ST. Parada Valenzuela City"},{"Raw Address":"OLIVA COR. RAMON ST. Parada Valenzuela City"},{"Raw Address":"108 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"203 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"185 Parada Valenzuela City"},{"Raw Address":"141 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"94 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"36C PARADA RD Parada Valenzuela City"},{"Raw Address":"#8 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"0411 AP DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"138 LAGDAMEO RD. Parada Valenzuela City"},{"Raw Address":"406 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. F. SANTIAGO COMPD. Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"116 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"198 CALLE ONSE PARADA Valenzuela City"},{"Raw Address":"88 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"95 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"232 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"562 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"8 VENANCIO INT. RD. P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"406 P.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"272 PILLAR STREET Parada Valenzuela City"},{"Raw Address":"118 1ST ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"336 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"140 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"239 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"LOT 10 BLK 2 PARADA ROAD EXT. FORTUNE Parada Valenzuela City"},{"Raw Address":"94B FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"100 F. CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"236 S DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"CONSUELO ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"171 SALAZAR Parada Valenzuela City"},{"Raw Address":"99 UNI STAR F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"246-C S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"250 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"36 Parada Valenzuela City"},{"Raw Address":"333 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"395 E. SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"83 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"F. SANTIAGO ST. BO. Parada Valenzuela City"},{"Raw Address":"142 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"42 PARADA RD/ Parada Valenzuela City"},{"Raw Address":"04 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"153 SALAZAR ST.. PARADA Valenzuela City"},{"Raw Address":"224 CONSUELO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"57 PARADA RD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"139 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"BLK. 4 LOT 6 GINTONG SILANGAN F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"364 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"456-K KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"14 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"314 JIMENEZ CMPD. Parada Valenzuela City"},{"Raw Address":"130 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"12 D. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"22ND ST. 207 FORTUEN 5 Village Parada Valenzuela City"},{"Raw Address":"12 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"39 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"86 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"4488 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"273 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"404 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"29 Parada Valenzuela City"},{"Raw Address":"168 ALICIA ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"121 CONSUELO Parada Valenzuela City"},{"Raw Address":"Village Parada Valenzuela City"},{"Raw Address":"1 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"441 P. GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"400 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"168 DOON COMPOUND Parada Valenzuela City"},{"Raw Address":"299 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"087 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"BLK 5 LOT 7 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"L9 B1 HIYAS Parada Valenzuela City"},{"Raw Address":"LOT 41 BLK. 10 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"393 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"122 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"458 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"209 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"B22 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"207 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"11 RD. PARADA ST. Parada Valenzuela City"},{"Raw Address":"86 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"202 FELISA ST. PARADA Valenzuela City.A Parada Valenzuela City"},{"Raw Address":"186 D. FELIZA ST. Parada Valenzuela City"},{"Raw Address":"187-A FELIZA ST. Parada Valenzuela City"},{"Raw Address":"DOOR 1 M. DE GULA Parada Valenzuela City"},{"Raw Address":"339 20TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"456-D KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"308 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"256 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"224 20TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"320 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"243 7ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"299 JIMENES Parada Valenzuela City"},{"Raw Address":"26 MARS F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"326 T. MANANG STREET Parada Valenzuela City"},{"Raw Address":"220-A 21ST STREET Parada Valenzuela City"},{"Raw Address":"308 T MANANG Parada Valenzuela City"},{"Raw Address":"11C 230 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"417 TATA ERO Parada Valenzuela City"},{"Raw Address":"145 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"154 C. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"360 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"27 Parada Valenzuela City"},{"Raw Address":"028 EUGENIO ST Parada Valenzuela City"},{"Raw Address":"109 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"457 E KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"B5L8 JADE ST HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"405 P. DE GUZMAN ST/ Parada Valenzuela City"},{"Raw Address":"088 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"178 KAMAGONG ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"162 SALAZAR Parada Valenzuela City"},{"Raw Address":"031 PARADA RD. Parada Valenzuela City"},{"Raw Address":"290 A.SANTOLAN RD. PARADA Valenzuela City"},{"Raw Address":"87 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"449 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"124-B CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"14 DIAMOND ST. Parada Valenzuela City"},{"Raw Address":"102 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"BLK 6 LOT 7 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"31 EARTH ST. P.SANTIAGO Parada Valenzuela City"},{"Raw Address":"297 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"# 39 RAMON ST. Parada Valenzuela City"},{"Raw Address":"340 20TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"DOOR F SANTOS TOWNHOUSE P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"185 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"199 BENMARIE COMP. AGLIHAM Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"261 A 25TH STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"412 TATA ERO Parada Valenzuela City"},{"Raw Address":"61 MARS ST. Parada Valenzuela City"},{"Raw Address":"130 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"248 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"A. TATAERO P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"182 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"168 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"455 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"185- C FELIZA ST. Parada Valenzuela City"},{"Raw Address":"P.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"94 PARADA Valenzuela City"},{"Raw Address":"002 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"3200 DIMAUNAHAN CMPD PARADA Valenzuela City"},{"Raw Address":"269 SDEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"225 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"147 DALAWAN STREET Parada Valenzuela City"},{"Raw Address":"390 IMPONG JUANA Parada Valenzuela City"},{"Raw Address":"199 21ST. FORTUNE Village V Parada Valenzuela City"},{"Raw Address":"365 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"140 CAPT. CRUZ COR E FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. F.SANTIAGO COMPOUND Parada Valenzuela City"},{"Raw Address":"234 ABELARDO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"278 PILAR ST FORTUNE VLL.4 Parada Valenzuela City"},{"Raw Address":"345 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"240 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"322 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"143 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"36 T. ANDRES ST. VAL. MM Parada Valenzuela City"},{"Raw Address":"#002 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"18 Parada Valenzuela City"},{"Raw Address":"190 6TH ST. FORTUNE Village 5&6 Parada Valenzuela City"},{"Raw Address":"252 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"365 Parada Valenzuela City"},{"Raw Address":"117-B CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"8 YAKAL ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"113 KAMAGONG FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"468 N. KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"406 BANDINO ST. P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"194 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"135 YAKAL CORNER NARRA STREET Parada Valenzuela City"},{"Raw Address":"374 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"420 ZAMORA STREET FV7 Parada Valenzuela City"},{"Raw Address":"101 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"165-G5 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"182 23RD ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"067 FURTUNE 6 Parada Valenzuela City"},{"Raw Address":"407 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"215 S. DE GUZMAN DAET COMPOUND Parada Valenzuela City"},{"Raw Address":"170 MOLAVE STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"44B SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"KAMAGONG ST. PARADA Valenzuela City"},{"Raw Address":"1727B-TATAERO Parada Valenzuela City"},{"Raw Address":"244 7TH ST. PARADA Valenzuela City"},{"Raw Address":"187 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"30 PARADA RD Parada Valenzuela City"},{"Raw Address":"ALICIA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"224 ABELARDO ST. FV 4 Parada Valenzuela City"},{"Raw Address":"#223 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"342 TIA MANANG ST. PARADA Valenzuela City"},{"Raw Address":"2345 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"415 TATA ERO STREET Parada Valenzuela City"},{"Raw Address":"VENUS STREET 207 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"B2L23 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"B1L9 T. MANANG Parada Valenzuela City"},{"Raw Address":"039 PARADA RD. Parada Valenzuela City"},{"Raw Address":"67B. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"314 MENES COMPOUND Parada Valenzuela City"},{"Raw Address":"BLK. 4 LOT 3 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"196 MOLAVE ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"246 Parada Valenzuela City"},{"Raw Address":"440 SERVICE ROAD RUMARAO CMPD. Parada Valenzuela City"},{"Raw Address":"25TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"216 ANTHONY STREET Parada Valenzuela City"},{"Raw Address":"349 S. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"187-B FELIZA ST. Parada Valenzuela City"},{"Raw Address":"264 25 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"ROOM G 260 TATA ROMAN STREET Parada Valenzuela City"},{"Raw Address":"250 25 ST. FORTUNE DRIVE Village. 5&6 Parada Valenzuela City"},{"Raw Address":"45 AF SANTIAGO Parada Valenzuela City"},{"Raw Address":"B3 L22 TANDANG MANANG HOA Parada Valenzuela City"},{"Raw Address":"119 B PEARL ST. HIYAS SUBDIVISION Parada Valenzuela City"},{"Raw Address":"TELIZA BUKID Parada Valenzuela City"},{"Raw Address":"113 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"75 PARADA RD. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"7 F.SANTIAGO PARADA Valenzuela City"},{"Raw Address":"395 E. SAN ANDRES Parada Valenzuela City"},{"Raw Address":"T.EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"BLK 4 LOT 15 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"L6 Parada Valenzuela City"},{"Raw Address":"BLK 11 LOT 24 MOLAVE ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"243 PASING Parada Valenzuela City"},{"Raw Address":"# 80 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"105 KAMAGONG ST. FORTUNE VillageE 6 Parada Valenzuela City"},{"Raw Address":"192 M DE GULA ST Parada Valenzuela City"},{"Raw Address":"127 YAKAL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"91 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"412 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"185B MOLAVE ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"20 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"423 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"28 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"105 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"240 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"206 F SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"286 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"311 PARADA Valenzuela City"},{"Raw Address":"372 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"23 T. EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"347 FRANCISCO Parada Valenzuela City"},{"Raw Address":"165 SALAZAR Parada Valenzuela City"},{"Raw Address":"341 20TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"13 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"230 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"196 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"204 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"245 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"174 FELISA ST. Parada Valenzuela City"},{"Raw Address":"308 JIMENIZ COMPOUND Parada Valenzuela City"},{"Raw Address":"123 CAPT. Parada Valenzuela City"},{"Raw Address":"222 ANTHONY Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"31 F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"338 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"3-B F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"314 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"26 F SANTIAGO PARADA V.C Parada Valenzuela City"},{"Raw Address":"456 B. KAINGIN ST Parada Valenzuela City"},{"Raw Address":"204 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"385 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"427 A BURGOS Parada Valenzuela City"},{"Raw Address":"17 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"Q5-151 SAPPHIRE ST. HIYAS SUBD. WEST Parada Valenzuela City"},{"Raw Address":"190 6TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"392 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"237 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"158 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"40 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"39 RAMOS ST. Parada Valenzuela City"},{"Raw Address":"316 BO JIMENEZ Parada Valenzuela City"},{"Raw Address":"256 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"384 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"272 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"124 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"21 ST AGLEHAM COMP. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"073 PARADA RD EXT. FORTUNE VillageE Parada Valenzuela City"},{"Raw Address":"90 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"138 E. LAGDAMEO STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"204 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"LOT 6 B. F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"F FRANCISCO Parada Valenzuela City"},{"Raw Address":"45 A F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"234 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"5-5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"237-19 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"183 MOLAVE Parada Valenzuela City"},{"Raw Address":"241 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"411 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"347 BO. PARADA Valenzuela City"},{"Raw Address":"470 A KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"CAPT.CRUZ ST PARADA Valenzuela City"},{"Raw Address":"BLK4 LOT 18 PEARL ST. HIYAS Parada Valenzuela City"},{"Raw Address":"199 BENMARY 21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"57 PARADA ROAD FV6 Parada Valenzuela City"},{"Raw Address":"198 COR 19TH & 21TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"297 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"139 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"426 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"276 UNIT A Parada Valenzuela City"},{"Raw Address":"24TH ST. 266 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"36 A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"96 FELIZA Parada Valenzuela City"},{"Raw Address":"52 PARADA ROAD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"273 S- DE GUZMAN Parada Valenzuela City"},{"Raw Address":"BLK5 LOT11 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"093 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"187 24TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"316 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"119 B PEARL ST HIYAS SUBD Parada Valenzuela City"},{"Raw Address":"192 M. DEGULA Parada Valenzuela City"},{"Raw Address":"DOON COMPD. 168 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"377 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"435 ZAMORA SR. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"055 KAMAGONG Parada Valenzuela City"},{"Raw Address":"185 23RD ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"266 24 ST. FORTUNE V-5 Parada Valenzuela City"},{"Raw Address":"113 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"316 MENEZ COMP. Parada Valenzuela City"},{"Raw Address":"COR. 23 RD ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"1 PARADA RD. Parada Valenzuela City"},{"Raw Address":"012 PARADA RD Parada Valenzuela City"},{"Raw Address":"419 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"316 MENES COMPD. Parada Valenzuela City"},{"Raw Address":"412 C. P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"281 PILAR ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"271 MARTHA Parada Valenzuela City"},{"Raw Address":"241 7 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"194 FORTUNE Village 5 6TH ST. Parada Valenzuela City"},{"Raw Address":"332 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"15 F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"13 5TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B4 L9 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"5TH ST Parada Valenzuela City"},{"Raw Address":"UNIT 5 ALFONSO APARTMENT M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 11 SAPPHIRE ST. HIYAS Parada Valenzuela City"},{"Raw Address":"360 J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"LOT 10 P. SANTIAGO Parada Valenzuela City"},{"Raw Address":"165 ACACIA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"175 MOLAVE Parada Valenzuela City"},{"Raw Address":"225 A. BELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"78 B PARADA ROAD EXTENSION Parada Valenzuela City"},{"Raw Address":"120 LAGDAMEO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"322 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"136 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"28 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"170 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"187 PARADA STREET Parada Valenzuela City"},{"Raw Address":"448 SERVICE ROAD DULO Parada Valenzuela City"},{"Raw Address":"FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"2 ACACIA COR. YAKAL ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"102 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"L49 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"0457 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"204 VENUS Parada Valenzuela City"},{"Raw Address":"356 J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"258 M DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"224 ABELARDO Parada Valenzuela City"},{"Raw Address":"503 TINDALO ST. ABCO COMPD. Parada Valenzuela City"},{"Raw Address":"230 EMBUSADO S. DE GUZMAN ST.Parada Valenzuela City"},{"Raw Address":"230 1-F EMBUSCADO S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"184 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"0320 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"90 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"199 2 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"349 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"290 M. ILOCTO Parada Valenzuela City"},{"Raw Address":"170 DOON COMPOUND SSALAZAR ST. Parada Valenzuela City"},{"Raw Address":"318 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"202 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"106 LAGDAMEO ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"29A KAMAGONG Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"27A PARADA RD Parada Valenzuela City"},{"Raw Address":"F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"258 M. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"202 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"336 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"31 EARTH F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"SISCAR APT. Parada Valenzuela City"},{"Raw Address":"260 A. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"25 EUGENIO ST Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. PARADA Valenzuela City"},{"Raw Address":"214 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"#1 E&E MARS ST F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"99 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"133 KAMAGONG ST. FORTUNE VillageE 6 Parada Valenzuela City"},{"Raw Address":"31 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"188 PARADA Valenzuela City"},{"Raw Address":"1618 PARAFORT M. DELOS REYES Parada Valenzuela City"},{"Raw Address":"469 KAINGIN ST.PARADA Valenzuela City"},{"Raw Address":"147 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"153 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"94 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"071 Parada Valenzuela City"},{"Raw Address":"364 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"228 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"266 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"448 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"2 TINDALO STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"199 BENMARIE GARDEN 21ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"315 JIMENES COMP. Parada Valenzuela City"},{"Raw Address":"214 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"39 C PARADA RD VALENZUELA CITY Parada Valenzuela City"},{"Raw Address":"446 RUMARAO COPMD. PARADA Valenzuela City"},{"Raw Address":"157 A. LITICIA ST. FV 4 Parada Valenzuela City"},{"Raw Address":"175 RAMON STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"LOT 19 BLK 8 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"76 PARADA RD. EXT. FORTUNE Village 7 Valenzuela City Parada Valenzuela City"},{"Raw Address":"415 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"440 ROMARAW COMPOUND Parada Valenzuela City"},{"Raw Address":"204 B F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"271 MARTA STREET Parada Valenzuela City"},{"Raw Address":"039 Parada Valenzuela City"},{"Raw Address":"14 DIAMOND ST. HIYAS SUBDIVISION Parada Valenzuela City"},{"Raw Address":"08 5TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"160 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"215 21ST. FORTUNE VillageS 5 Parada Valenzuela City"},{"Raw Address":"63 PARADA Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"254 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"203 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"313 MENEZ ST. PARADA Valenzuela City"},{"Raw Address":"24E EUGENIO ST Parada Valenzuela City"},{"Raw Address":"126 LAGDAMEO FORTUNE IV Village Parada Valenzuela City"},{"Raw Address":"PARADA RD. ST. Parada Valenzuela City"},{"Raw Address":"390 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"241 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"241 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"173 23RD ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"133 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"320 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"278 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"202 ANTHONY ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"26 F. MARS ST. Parada Valenzuela City"},{"Raw Address":"405 P.DEGUZMAN PARADA Valenzuela City"},{"Raw Address":"BLK. 1 LOT 7 Fortune Village 5 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"118 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"450 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"24 EUGENIO COMP. Parada Valenzuela City"},{"Raw Address":"45 ST. F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"437 ZAMORA Parada Valenzuela City"},{"Raw Address":"210 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"#26 MARS ST. Parada Valenzuela City"},{"Raw Address":"312 D JIMENEZ COMPOUND ST. Parada Valenzuela City"},{"Raw Address":"2411 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"028 Parada Valenzuela City"},{"Raw Address":"31 EARTH ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"036-C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"283 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"257 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"290 ILOCTO COMPD. Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"24 VENUS ST. Parada Valenzuela City"},{"Raw Address":"203 18TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"199 BENMARIE AGLEHAM COMP. 21ST ST. FV5 Parada Valenzuela City"},{"Raw Address":"388 IMPONG JUANA ST. Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"BLOCK 4 LOT 19 F. FRANCISCO ST. GINTONG Parada Valenzuela City"},{"Raw Address":"207 FELISA BUKID ST. Parada Valenzuela City"},{"Raw Address":"222 SALVADOR ST Parada Valenzuela City"},{"Raw Address":"064 PARADA RD Fortune Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"083 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"FORTUNE Village Parada Valenzuela City"},{"Raw Address":"269 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"234 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"36 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"APT.14 RIVERA CMPD. TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"0320 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"161 SALAZAR ST.PARADA Valenzuela City"},{"Raw Address":"F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"93 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"215 DAET COMPOND Parada Valenzuela City"},{"Raw Address":"15 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"#146 ALICIA ST. F4 Parada Valenzuela City"},{"Raw Address":"22 A. EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. BENMARIE COMPD. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"471 KABERONG ST. PARADA Valenzuela City"},{"Raw Address":"167 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"21 FORTUNE Village 5 STREET Parada Valenzuela City"},{"Raw Address":"267 PETER ST. Parada Valenzuela City"},{"Raw Address":"184 MOLAVE ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"136 E.LAGDAMEO ST.PARADA Valenzuela City.A Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 13 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"0147 DOON COMP. SALAZAR Parada Valenzuela City"},{"Raw Address":"199 21ST. FORTUNE Village PARADA Valenzuela City"},{"Raw Address":"68 PARADA RD. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"513 TINDALO Parada Valenzuela City"},{"Raw Address":"413 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"B3 L11 TMHOA TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"123 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"21 ST. BEN MARIE COMP. Parada Valenzuela City"},{"Raw Address":"25 PARADA RD Parada Valenzuela City"},{"Raw Address":"198 CORNER 19TH &21ST STS. Parada Valenzuela City"},{"Raw Address":"#39 K. RAMON ST. Parada Valenzuela City"},{"Raw Address":"202 FELIZA ST.PARADA Valenzuela City"},{"Raw Address":"#22 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"44 PARADA RD. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"188 DE GULA COPD Parada Valenzuela City"},{"Raw Address":"39 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"39 PARADA ST. Parada Valenzuela City"},{"Raw Address":"9 5TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"995 SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"266 B 24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"260 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"039 D SANTIAGO COMP. Parada Valenzuela City"},{"Raw Address":"243 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"91 ADOR ST. Parada Valenzuela City"},{"Raw Address":"PUROK 6 207 FELIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"126 B CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"207 FELISA BUKID Parada Valenzuela City"},{"Raw Address":"472 KABERONG ST. PARADA Valenzuela City"},{"Raw Address":"99 VENUS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"668 P. GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"451 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"055 BURGOS ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"BLOCK 13 C LOT 8 7TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"274 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"140 NARRA ST. Parada Valenzuela City"},{"Raw Address":"418 ZAMORA ST FV7 Parada Valenzuela City"},{"Raw Address":"3 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"M.M. Parada Valenzuela City"},{"Raw Address":"416 KAMAGONG ST. PARADA Valenzuela City"},{"Raw Address":"100 CAPT.CRUZ ST.DE GULA CMPD. Parada Valenzuela City"},{"Raw Address":"BLK3 LOT 2 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"0320 UNIT 8 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"6 6TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"96 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"237 19TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"2 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"C. CALLE ONSE BUKID Parada Valenzuela City"},{"Raw Address":"406 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"369 A TATA ANDRESS ST Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 7 PARADA RD. FORTUNE VillageS Parada Valenzuela City"},{"Raw Address":"121 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"73 SAINT MARYS DULO Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"357 J/ FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"384 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"116 CALLEONCE Parada Valenzuela City"},{"Raw Address":"405 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"B4 L5 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"469 PARADA ST KAINGIN Parada Valenzuela City"},{"Raw Address":"87 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"245 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"273 PILAR STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"108 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"257 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"471 KA BERONG ST. Parada Valenzuela City"},{"Raw Address":"153 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"28 NARRA ST. Parada Valenzuela City"},{"Raw Address":"186 6TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"BLK1 LOT 7 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"118 DOOR 3 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"RUMARAO COMP. SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"130 Parada Valenzuela City"},{"Raw Address":"BLOCK 2 LOT 2 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"72 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"133 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"B2L7 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"229 18TH STREET Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"2451 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"E FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"460 GOMEZ ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"171 SALAZAR. ST. Parada Valenzuela City"},{"Raw Address":"235 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"442 GOMEZ FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"249 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"26 F SANTIAGO MARS STREET Parada Valenzuela City"},{"Raw Address":"332 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"328 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"82 RAMON ST. SANTIAGO COMP. Parada Valenzuela City"},{"Raw Address":"145 NARRA ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"26 F. SANTIAGO MARS ST. Parada Valenzuela City"},{"Raw Address":"316 JIMENES COMPOUND Parada Valenzuela City"},{"Raw Address":"348 CAPT. F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"CALLE ONSE Parada Valenzuela City"},{"Raw Address":"091 DAET COMPOUND Parada Valenzuela City"},{"Raw Address":"330 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"166 6ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"139 NARRA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"BLK 5 LOT 17 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"336 ST. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"24 VENUS E&E COMPD.1 SANTIAGO Parada Valenzuela City"},{"Raw Address":"317 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"7 GSR SATIAGO ST. Parada Valenzuela City"},{"Raw Address":"190 DE GULA ST. Parada Valenzuela City"},{"Raw Address":"350 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"0089 B CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"L41 B10 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"888 NARRA ST. Parada Valenzuela City"},{"Raw Address":"444 RUMARAO CMPD. PARADA Valenzuela City"},{"Raw Address":"141 DALAWIN ST. PARADA Valenzuela City"},{"Raw Address":"11 5TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"382 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"447 FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"31 Parada Valenzuela City"},{"Raw Address":"B3 L6 TINDALO ST. FV5 Parada Valenzuela City"},{"Raw Address":"90 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"BLK 4 LOT 13 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"56 FORTUNE VillageE Parada Valenzuela City"},{"Raw Address":"251 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"26 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"442 P. GOMEZ Parada Valenzuela City"},{"Raw Address":"254 A S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"297D TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"174 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"146 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"23RD ST. Parada Valenzuela City"},{"Raw Address":"440 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"#17 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ ADOR ST Parada Valenzuela City"}]'),M0=({children:t})=>K.jsxs("div",{className:"layout",children:[K.jsx(iW,{}),K.jsx("div",{className:"content",children:t})]}),Gxe=t=>Bxe.some(e=>e["Raw Address"].toLowerCase().includes(t.toLowerCase())),jxe=()=>{const[t,e]=nt.useState([]),[a,r]=nt.useState(""),[s,l]=nt.useState(1),[h,n]=nt.useState([]),[w,T]=nt.useState(""),[P,z]=nt.useState(1),[k,U]=nt.useState({registered:0,pending:0,rejected:0,total:0}),[Z,H]=nt.useState(null),[q,J]=nt.useState([]),[re,ce]=nt.useState(""),[ye,he]=nt.useState(null),_e=5;nt.useEffect(()=>{me(),Re(),be()},[]);const me=async()=>{try{const Ce=(await Xi(Zn(zr,"approved_users"))).docs.map(Se=>({uid:Se.id,...Se.data()}));e(Ce)}catch(He){console.error("Error fetching registered users:",He)}},Re=async()=>{try{const Ce=(await Xi(Zn(zr,"pending_users"))).docs.map(Se=>({uid:Se.id,...Se.data()}));n(Ce)}catch(He){console.error("Error fetching pending users:",He)}},be=async()=>{try{const He=await Xi(Zn(zr,"admins")),Ce=new Map;He.docs.forEach(ut=>{var We;const Rt=ut.data();Ce.set(Rt.uid,{name:Rt.name,role:((We=Rt.roles)==null?void 0:We[0])||"Admin"})});const $e=(await Xi(Zn(zr,"user_reports"))).docs.map(ut=>{var Ae,qt;const Rt=ut.data(),We=Ce.get(Rt.reportedBy);return{id:ut.id,...Rt,reportedByName:We?`${We.name} (${We.role})`:"Unknown Admin",timestamp:(Ae=Rt.createdAt)!=null&&Ae.toDate?Rt.createdAt.toDate():new Date(((qt=Rt.createdAt)==null?void 0:qt.seconds)*1e3),violationType:Rt.violationType||"Not Specified",details:Rt.details||"No details provided"}}),ht=[...new Set($e.map(ut=>ut.userId))],ft=await Promise.all(ht.map(async ut=>{const We=(await Op(Is(zr,"approved_users",ut))).data(),Ae=$e.filter(qt=>qt.userId===ut);return{uid:ut,...We,reports:Ae.map(qt=>({...qt,reportedBy:qt.reportedByName,timestamp:qt.timestamp,violationType:qt.violationType,details:qt.details})),isBanned:(We==null?void 0:We.isBanned)||!1}}));J(ft)}catch(He){console.error("Error fetching flagged users:",He)}},De=async(He,Ce)=>{try{const Se=Is(zr,"pending_users",He),ht=(await Op(Se)).data();if(Ce==="approve"){const ft=Gxe(ht.address);if(!ft&&!window.confirm("This address is not in the validated list. Are you sure you want to approve this user?"))return;await hv(Zn(zr,"approved_users"),{...ht,status:"approved",approvedAt:new Date,addressValidated:ft}),await U3(Se)}else Ce==="reject"&&await hd(Se,{status:"rejected",rejectedAt:new Date});me(),Re()}catch(Se){console.error("Error processing user action:",Se)}},ie=async(He,Ce)=>{try{const Se=Is(zr,"approved_users",He);await hd(Se,{isBanned:Ce,bannedAt:Ce?new Date:null}),await hv(Zn(zr,"user_notifications"),{userId:He,type:Ce?"account_banned":"account_unbanned",title:Ce?"Account Banned":"Account Reinstated",message:Ce?"Your account has been banned due to violations.":"Your account has been reinstated.",createdAt:new Date,isRead:!1}),be(),me()}catch(Se){console.error("Error updating user ban status:",Se)}},ge=He=>{he({userName:`${He.first_name} ${He.middle_name} ${He.surname}`,reports:He.reports.map(Ce=>{var $e,ht;const Se=Ce.timestamp instanceof Date?Ce.timestamp:($e=Ce.timestamp)!=null&&$e.toDate?Ce.timestamp.toDate():new Date(((ht=Ce.timestamp)==null?void 0:ht.seconds)*1e3);return{...Ce,timestamp:Se}})})},Me=()=>{he(null)},ze=nt.useMemo(()=>t.filter(He=>`${He.first_name} ${He.middle_name} ${He.surname} ${He.email}`.toLowerCase().includes(a.toLowerCase())),[t,a]),Le=Math.ceil(ze.length/_e),Ie=nt.useMemo(()=>{const He=(s-1)*_e;return ze.slice(He,He+_e)},[ze,s]),Ze=nt.useMemo(()=>h.filter(He=>`${He.first_name} ${He.middle_name} ${He.surname} ${He.email}`.toLowerCase().includes(w.toLowerCase())),[h,w]);nt.useEffect(()=>{(()=>{U({registered:t.length,pending:h.length,rejected:h.filter(Ce=>Ce.status==="rejected").length,total:t.length+h.length})})()},[t,h]);const ke=({status:He,addressValidated:Ce})=>He==="approved"?K.jsxs("div",{className:"status-container",children:[K.jsx(rk,{className:"status-icon approved",title:"Approved"}),Ce===!1&&K.jsx("span",{className:"warning-text",title:"Address not in validated list",children:""})]}):He==="pending"?K.jsx(lde,{className:"status-icon pending",title:"Pending"}):null,tt=He=>{H(He)},Ue=()=>{H(null)};return K.jsxs(M0,{children:[K.jsx(Yg,{title:"User Management"}),Z&&K.jsx("div",{className:"image-modal",onClick:Ue,children:K.jsx("img",{src:Z,alt:"Profile",className:"modal-image",onClick:He=>He.stopPropagation()})}),ye&&K.jsx("div",{className:"modal-overlay",onClick:Me,children:K.jsxs("div",{className:"modal-content reports-modal",onClick:He=>He.stopPropagation(),children:[K.jsxs("h3",{children:["Reports for ",ye.userName]}),K.jsx("div",{className:"reports-list",children:ye.reports.map((He,Ce)=>K.jsxs("div",{className:"report-item",children:[K.jsx("p",{className:"report-date",children:Ui(He.timestamp).isValid()?Ui(He.timestamp).format("MMM D, YYYY HH:mm"):"Date not available"}),K.jsxs("p",{className:"report-violation",children:[K.jsx("strong",{children:"Violation Type:"})," ",He.violationType]}),K.jsxs("p",{className:"report-details",children:[K.jsx("strong",{children:"Details:"})," ",He.details]}),K.jsxs("p",{className:"report-status",children:[K.jsx("strong",{children:"Status:"})," ",He.status]}),K.jsxs("p",{className:"report-reporter",children:[K.jsx("strong",{children:"Reported by:"})," ",He.reportedBy]})]},Ce))}),K.jsx("button",{className:"close-btn",onClick:Me,children:"Close"})]})}),K.jsxs("div",{className:"user-management",children:[K.jsxs("div",{className:"stats-container",children:[K.jsxs("div",{className:"stat-card",children:[K.jsx("h3",{children:"Registered Users"}),K.jsx("p",{children:k.registered})]}),K.jsxs("div",{className:"stat-card",children:[K.jsx("h3",{children:"Pending Users"}),K.jsx("p",{children:k.pending})]}),K.jsxs("div",{className:"stat-card",children:[K.jsx("h3",{children:"Rejected Users"}),K.jsx("p",{children:k.rejected})]}),K.jsxs("div",{className:"stat-card total",children:[K.jsx("h3",{children:"Total Users"}),K.jsx("p",{children:k.total})]})]}),K.jsxs("div",{className:"section",children:[K.jsx("h2",{children:"Pending Users"}),K.jsx("input",{type:"text",placeholder:" Search pending users...",value:w,onChange:He=>T(He.target.value),className:"search-box"}),Ze.length===0?K.jsx("p",{children:"No pending users found."}):K.jsx("div",{className:"user-list",children:K.jsxs("table",{children:[K.jsx("thead",{children:K.jsxs("tr",{children:[K.jsx("th",{children:"Status"}),K.jsx("th",{className:"profile-column",children:"Profile Photo"}),K.jsx("th",{children:"Name"}),K.jsx("th",{children:"Email"}),K.jsx("th",{children:"Address"}),K.jsx("th",{children:"Actions"})]})}),K.jsx("tbody",{children:Ze.map(He=>K.jsxs("tr",{children:[K.jsx("td",{children:K.jsx(ke,{status:He.status,addressValidated:He.addressValidated})}),K.jsx("td",{className:"profile-column",children:He.profile_photo_url?K.jsx("img",{src:He.profile_photo_url,alt:"Profile",className:"profile-thumbnail",onClick:()=>tt(He.profile_photo_url)}):K.jsx("div",{className:"no-photo",children:"No Photo"})}),K.jsx("td",{children:`${He.first_name} ${He.middle_name} ${He.surname}`}),K.jsx("td",{children:He.email}),K.jsx("td",{children:He.address}),K.jsxs("td",{className:"action-buttons",children:[K.jsxs("button",{onClick:()=>De(He.uid,"approve"),className:"approve-btn",children:[K.jsx(rk,{})," Approve"]}),K.jsxs("button",{onClick:()=>De(He.uid,"reject"),className:"reject-btn",children:[K.jsx(rW,{})," Reject"]})]})]},He.uid))})]})})]}),K.jsxs("div",{className:"section",children:[K.jsx("h2",{children:"Flagged Users"}),K.jsx("input",{type:"text",placeholder:" Search flagged users...",value:re,onChange:He=>ce(He.target.value),className:"search-box"}),q.length===0?K.jsx("p",{children:"No flagged users found."}):K.jsx("div",{className:"user-list",children:K.jsxs("table",{children:[K.jsx("thead",{children:K.jsxs("tr",{children:[K.jsx("th",{children:"Status"}),K.jsx("th",{className:"profile-column",children:"Profile Photo"}),K.jsx("th",{children:"Name"}),K.jsx("th",{children:"Email"}),K.jsx("th",{children:"Reports"}),K.jsx("th",{children:"Actions"})]})}),K.jsx("tbody",{children:q.filter(He=>`${He.first_name} ${He.middle_name} ${He.surname} ${He.email}`.toLowerCase().includes(re.toLowerCase())).map(He=>K.jsxs("tr",{children:[K.jsx("td",{children:He.isBanned?K.jsx("span",{className:"banned-badge",children:"Banned"}):K.jsx("span",{className:"flagged-badge",children:"Flagged"})}),K.jsx("td",{className:"profile-column",children:He.profile_photo_url?K.jsx("img",{src:He.profile_photo_url,alt:"Profile",className:"profile-thumbnail",onClick:()=>tt(He.profile_photo_url)}):K.jsx("div",{className:"no-photo",children:"No Photo"})}),K.jsx("td",{children:`${He.first_name} ${He.middle_name} ${He.surname}`}),K.jsx("td",{children:He.email}),K.jsx("td",{children:K.jsxs("button",{className:"view-reports-btn",onClick:()=>ge(He),children:["View Reports (",He.reports.length,")"]})}),K.jsx("td",{children:K.jsx("button",{className:He.isBanned?"unban-btn":"ban-btn",onClick:()=>ie(He.uid,!He.isBanned),children:He.isBanned?"Unban User":"Ban User"})})]},He.uid))})]})})]}),K.jsxs("div",{className:"section",children:[K.jsx("h2",{children:"Registered Users"}),K.jsx("input",{type:"text",placeholder:" Search registered users...",value:a,onChange:He=>r(He.target.value),className:"search-box"}),ze.length===0?K.jsx("p",{children:"No registered users found."}):K.jsxs("div",{className:"user-list",children:[K.jsxs("table",{children:[K.jsx("thead",{children:K.jsxs("tr",{children:[K.jsx("th",{children:"Status"}),K.jsx("th",{className:"profile-column",children:"Profile Photo"}),K.jsx("th",{children:"Name"}),K.jsx("th",{children:"Email"}),K.jsx("th",{children:"Address"})]})}),K.jsx("tbody",{children:Ie.map(He=>K.jsxs("tr",{children:[K.jsx("td",{children:K.jsx(ke,{status:He.status,addressValidated:He.addressValidated})}),K.jsx("td",{className:"profile-column",children:He.profile_photo_url?K.jsx("img",{src:He.profile_photo_url,alt:"Profile",className:"profile-thumbnail",onClick:()=>tt(He.profile_photo_url)}):K.jsx("div",{className:"no-photo",children:"No Photo"})}),K.jsx("td",{children:`${He.first_name} ${He.middle_name} ${He.surname}`}),K.jsx("td",{children:He.email}),K.jsx("td",{children:He.address})]},He.uid))})]}),K.jsxs("div",{className:"pagination",children:[K.jsx("button",{disabled:s===1,onClick:()=>l(s-1),children:"Previous"}),Array.from({length:Le},(He,Ce)=>K.jsx("button",{className:s===Ce+1?"active":"",onClick:()=>l(Ce+1),children:Ce+1},Ce)),K.jsx("button",{disabled:s===Le,onClick:()=>l(s+1),children:"Next"})]})]})]})]})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IJ="firebasestorage.googleapis.com",LJ="storageBucket",Zxe=2*60*1e3,qxe=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl extends Um{constructor(e,a,r=0){super(s5(e),`Firebase Storage: ${a} (${s5(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,bl.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return s5(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Cl;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Cl||(Cl={}));function s5(t){return"storage/"+t}function j4(){const t="An unknown error occurred, please check the error payload for server response.";return new bl(Cl.UNKNOWN,t)}function Hxe(t){return new bl(Cl.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function $xe(t){return new bl(Cl.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Kxe(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new bl(Cl.UNAUTHENTICATED,t)}function Wxe(){return new bl(Cl.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Yxe(t){return new bl(Cl.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Xxe(){return new bl(Cl.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Jxe(){return new bl(Cl.CANCELED,"User canceled the upload/download.")}function Qxe(t){return new bl(Cl.INVALID_URL,"Invalid URL '"+t+"'.")}function e2e(t){return new bl(Cl.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function t2e(){return new bl(Cl.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+LJ+"' property when initializing the app?")}function a2e(){return new bl(Cl.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function r2e(){return new bl(Cl.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function n2e(t){return new bl(Cl.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function QM(t){return new bl(Cl.INVALID_ARGUMENT,t)}function FJ(){return new bl(Cl.APP_DELETED,"The Firebase app was deleted.")}function i2e(t){return new bl(Cl.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function uR(t,e){return new bl(Cl.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function zw(t){throw new bl(Cl.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e,a){this.bucket=e,this.path_=a}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,a){let r;try{r=uf.makeFromUrl(e,a)}catch{return new uf(e,"")}if(r.path==="")return r;throw e2e(e)}static makeFromUrl(e,a){let r=null;const s="([A-Za-z0-9.\\-_]+)";function l(ye){ye.path.charAt(ye.path.length-1)==="/"&&(ye.path_=ye.path_.slice(0,-1))}const h="(/(.*))?$",n=new RegExp("^gs://"+s+h,"i"),w={bucket:1,path:3};function T(ye){ye.path_=decodeURIComponent(ye.path)}const P="v[A-Za-z0-9_]+",z=a.replace(/[.]/g,"\\."),k="(/([^?#]*).*)?$",U=new RegExp(`^https?://${z}/${P}/b/${s}/o${k}`,"i"),Z={bucket:1,path:3},H=a===IJ?"(?:storage.googleapis.com|storage.cloud.google.com)":a,q="([^?#]*)",J=new RegExp(`^https?://${H}/${s}/${q}`,"i"),ce=[{regex:n,indices:w,postModify:l},{regex:U,indices:Z,postModify:T},{regex:J,indices:{bucket:1,path:2},postModify:T}];for(let ye=0;ye<ce.length;ye++){const he=ce[ye],_e=he.regex.exec(e);if(_e){const me=_e[he.indices.bucket];let Re=_e[he.indices.path];Re||(Re=""),r=new uf(me,Re),he.postModify(r);break}}if(r==null)throw Qxe(e);return r}}class s2e{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2e(t,e,a){let r=1,s=null,l=null,h=!1,n=0;function w(){return n===2}let T=!1;function P(...q){T||(T=!0,e.apply(null,q))}function z(q){s=setTimeout(()=>{s=null,t(U,w())},q)}function k(){l&&clearTimeout(l)}function U(q,...J){if(T){k();return}if(q){k(),P.call(null,q,...J);return}if(w()||h){k(),P.call(null,q,...J);return}r<64&&(r*=2);let ce;n===1?(n=2,ce=0):ce=(r+Math.random())*1e3,z(ce)}let Z=!1;function H(q){Z||(Z=!0,k(),!T&&(s!==null?(q||(n=2),clearTimeout(s),z(0)):q||(n=1)))}return z(0),l=setTimeout(()=>{h=!0,H(!0)},a),H}function l2e(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u2e(t){return t!==void 0}function c2e(t){return typeof t=="object"&&!Array.isArray(t)}function Z4(t){return typeof t=="string"||t instanceof String}function lZ(t){return q4()&&t instanceof Blob}function q4(){return typeof Blob<"u"&&!Ere()}function uZ(t,e,a,r){if(r<e)throw QM(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>a)throw QM(`Invalid value for '${t}'. Expected ${a} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H4(t,e,a){let r=e;return a==null&&(r=`https://${e}`),`${a}://${r}/v0${t}`}function UJ(t){const e=encodeURIComponent;let a="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);a=a+s+"&"}return a=a.slice(0,-1),a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var u0;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(u0||(u0={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2e(t,e){const a=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,l=e.indexOf(t)!==-1;return a||s||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2e{constructor(e,a,r,s,l,h,n,w,T,P,z,k=!0){this.url_=e,this.method_=a,this.headers_=r,this.body_=s,this.successCodes_=l,this.additionalRetryCodes_=h,this.callback_=n,this.errorCallback_=w,this.timeout_=T,this.progressCallback_=P,this.connectionFactory_=z,this.retry=k,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((U,Z)=>{this.resolve_=U,this.reject_=Z,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new NC(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const h=n=>{const w=n.loaded,T=n.lengthComputable?n.total:-1;this.progressCallback_!==null&&this.progressCallback_(w,T)};this.progressCallback_!==null&&l.addUploadProgressListener(h),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(h),this.pendingConnection_=null;const n=l.getErrorCode()===u0.NO_ERROR,w=l.getStatus();if(!n||d2e(w,this.additionalRetryCodes_)&&this.retry){const P=l.getErrorCode()===u0.ABORT;r(!1,new NC(!1,null,P));return}const T=this.successCodes_.indexOf(w)!==-1;r(!0,new NC(T,l))})},a=(r,s)=>{const l=this.resolve_,h=this.reject_,n=s.connection;if(s.wasSuccessCode)try{const w=this.callback_(n,n.getResponse());u2e(w)?l(w):l()}catch(w){h(w)}else if(n!==null){const w=j4();w.serverResponse=n.getErrorText(),this.errorCallback_?h(this.errorCallback_(n,w)):h(w)}else if(s.canceled){const w=this.appDelete_?FJ():Jxe();h(w)}else{const w=Xxe();h(w)}};this.canceled_?a(!1,new NC(!1,null,!0)):this.backoffId_=o2e(e,a,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&l2e(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class NC{constructor(e,a,r){this.wasSuccessCode=e,this.connection=a,this.canceled=!!r}}function f2e(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function p2e(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function m2e(t,e){e&&(t["X-Firebase-GMPID"]=e)}function y2e(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function g2e(t,e,a,r,s,l,h=!0){const n=UJ(t.urlParams),w=t.url+n,T=Object.assign({},t.headers);return m2e(T,e),f2e(T,a),p2e(T,l),y2e(T,r),new h2e(w,t.method,T,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A2e(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function _2e(...t){const e=A2e();if(e!==void 0){const a=new e;for(let r=0;r<t.length;r++)a.append(t[r]);return a.getBlob()}else{if(q4())return new Blob(t);throw new bl(Cl.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function v2e(t,e,a){return t.webkitSlice?t.webkitSlice(e,a):t.mozSlice?t.mozSlice(e,a):t.slice?t.slice(e,a):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2e(t){if(typeof atob>"u")throw n2e("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class o5{constructor(e,a){this.data=e,this.contentType=a||null}}function R2e(t,e){switch(t){case bm.RAW:return new o5(kJ(e));case bm.BASE64:case bm.BASE64URL:return new o5(BJ(t,e));case bm.DATA_URL:return new o5(S2e(e),C2e(e))}throw j4()}function kJ(t){const e=[];for(let a=0;a<t.length;a++){let r=t.charCodeAt(a);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(a<t.length-1&&(t.charCodeAt(a+1)&64512)===56320))e.push(239,191,189);else{const l=r,h=t.charCodeAt(++a);r=65536|(l&1023)<<10|h&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function T2e(t){let e;try{e=decodeURIComponent(t)}catch{throw uR(bm.DATA_URL,"Malformed data URL.")}return kJ(e)}function BJ(t,e){switch(t){case bm.BASE64:{const s=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(s||l)throw uR(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case bm.BASE64URL:{const s=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(s||l)throw uR(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let a;try{a=w2e(e)}catch(s){throw s.message.includes("polyfill")?s:uR(t,"Invalid character found")}const r=new Uint8Array(a.length);for(let s=0;s<a.length;s++)r[s]=a.charCodeAt(s);return r}class GJ{constructor(e){this.base64=!1,this.contentType=null;const a=e.match(/^data:([^,]+)?,/);if(a===null)throw uR(bm.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=a[1]||null;r!=null&&(this.base64=b2e(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function S2e(t){const e=new GJ(t);return e.base64?BJ(bm.BASE64,e.rest):T2e(e.rest)}function C2e(t){return new GJ(t).contentType}function b2e(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,a){let r=0,s="";lZ(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(a?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(a?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,a){if(lZ(this.data_)){const r=this.data_,s=v2e(r,e,a);return s===null?null:new xg(s)}else{const r=new Uint8Array(this.data_.buffer,e,a-e);return new xg(r,!0)}}static getBlob(...e){if(q4()){const a=e.map(r=>r instanceof xg?r.data_:r);return new xg(_2e.apply(null,a))}else{const a=e.map(h=>Z4(h)?R2e(bm.RAW,h).data:h.data_);let r=0;a.forEach(h=>{r+=h.byteLength});const s=new Uint8Array(r);let l=0;return a.forEach(h=>{for(let n=0;n<h.length;n++)s[l++]=h[n]}),new xg(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jJ(t){let e;try{e=JSON.parse(t)}catch{return null}return c2e(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2e(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function P2e(t,e){const a=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?a:t+"/"+a}function ZJ(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2e(t,e){return e}class Xd{constructor(e,a,r,s){this.server=e,this.local=a||e,this.writable=!!r,this.xform=s||E2e}}let VC=null;function N2e(t){return!Z4(t)||t.length<2?t:ZJ(t)}function qJ(){if(VC)return VC;const t=[];t.push(new Xd("bucket")),t.push(new Xd("generation")),t.push(new Xd("metageneration")),t.push(new Xd("name","fullPath",!0));function e(l,h){return N2e(h)}const a=new Xd("name");a.xform=e,t.push(a);function r(l,h){return h!==void 0?Number(h):h}const s=new Xd("size");return s.xform=r,t.push(s),t.push(new Xd("timeCreated")),t.push(new Xd("updated")),t.push(new Xd("md5Hash",null,!0)),t.push(new Xd("cacheControl",null,!0)),t.push(new Xd("contentDisposition",null,!0)),t.push(new Xd("contentEncoding",null,!0)),t.push(new Xd("contentLanguage",null,!0)),t.push(new Xd("contentType",null,!0)),t.push(new Xd("metadata","customMetadata",!0)),VC=t,VC}function V2e(t,e){function a(){const r=t.bucket,s=t.fullPath,l=new uf(r,s);return e._makeStorageReference(l)}Object.defineProperty(t,"ref",{get:a})}function z2e(t,e,a){const r={};r.type="file";const s=a.length;for(let l=0;l<s;l++){const h=a[l];r[h.local]=h.xform(r,e[h.server])}return V2e(r,t),r}function HJ(t,e,a){const r=jJ(e);return r===null?null:z2e(t,r,a)}function O2e(t,e,a,r){const s=jJ(e);if(s===null||!Z4(s.downloadTokens))return null;const l=s.downloadTokens;if(l.length===0)return null;const h=encodeURIComponent;return l.split(",").map(T=>{const P=t.bucket,z=t.fullPath,k="/b/"+h(P)+"/o/"+h(z),U=H4(k,a,r),Z=UJ({alt:"media",token:T});return U+Z})[0]}function D2e(t,e){const a={},r=e.length;for(let s=0;s<r;s++){const l=e[s];l.writable&&(a[l.server]=t[l.local])}return JSON.stringify(a)}class $J{constructor(e,a,r,s){this.url=e,this.method=a,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KJ(t){if(!t)throw j4()}function M2e(t,e){function a(r,s){const l=HJ(t,s,e);return KJ(l!==null),l}return a}function I2e(t,e){function a(r,s){const l=HJ(t,s,e);return KJ(l!==null),O2e(l,s,t.host,t._protocol)}return a}function WJ(t){function e(a,r){let s;return a.getStatus()===401?a.getErrorText().includes("Firebase App Check token is invalid")?s=Wxe():s=Kxe():a.getStatus()===402?s=$xe(t.bucket):a.getStatus()===403?s=Yxe(t.path):s=r,s.status=a.getStatus(),s.serverResponse=r.serverResponse,s}return e}function L2e(t){const e=WJ(t);function a(r,s){let l=e(r,s);return r.getStatus()===404&&(l=Hxe(t.path)),l.serverResponse=s.serverResponse,l}return a}function F2e(t,e,a){const r=e.fullServerUrl(),s=H4(r,t.host,t._protocol),l="GET",h=t.maxOperationRetryTime,n=new $J(s,l,I2e(t,a),h);return n.errorHandler=L2e(e),n}function U2e(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function k2e(t,e,a){const r=Object.assign({},a);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=U2e(null,e)),r}function B2e(t,e,a,r,s){const l=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"};function n(){let ce="";for(let ye=0;ye<2;ye++)ce=ce+Math.random().toString().slice(2);return ce}const w=n();h["Content-Type"]="multipart/related; boundary="+w;const T=k2e(e,r,s),P=D2e(T,a),z="--"+w+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+P+`\r
--`+w+`\r
Content-Type: `+T.contentType+`\r
\r
`,k=`\r
--`+w+"--",U=xg.getBlob(z,r,k);if(U===null)throw a2e();const Z={name:T.fullPath},H=H4(l,t.host,t._protocol),q="POST",J=t.maxUploadRetryTime,re=new $J(H,q,M2e(t,a),J);return re.urlParams=Z,re.headers=h,re.body=U.uploadData(),re.errorHandler=WJ(e),re}class G2e{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=u0.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=u0.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=u0.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,a,r,s){if(this.sent_)throw zw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(a,e,!0),s!==void 0)for(const l in s)s.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,s[l].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw zw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw zw("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw zw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw zw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class j2e extends G2e{initXhr(){this.xhr_.responseType="text"}}function YJ(){return new j2e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e,a){this._service=e,a instanceof uf?this._location=a:this._location=uf.makeFromUrl(a,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,a){return new T0(e,a)}get root(){const e=new uf(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ZJ(this._location.path)}get storage(){return this._service}get parent(){const e=x2e(this._location.path);if(e===null)return null;const a=new uf(this._location.bucket,e);return new T0(this._service,a)}_throwIfRoot(e){if(this._location.path==="")throw i2e(e)}}function Z2e(t,e,a){t._throwIfRoot("uploadBytes");const r=B2e(t.storage,t._location,qJ(),new xg(e,!0),a);return t.storage.makeRequestWithTokens(r,YJ).then(s=>({metadata:s,ref:t}))}function q2e(t){t._throwIfRoot("getDownloadURL");const e=F2e(t.storage,t._location,qJ());return t.storage.makeRequestWithTokens(e,YJ).then(a=>{if(a===null)throw r2e();return a})}function H2e(t,e){const a=P2e(t._location.path,e),r=new uf(t._location.bucket,a);return new T0(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2e(t){return/^[A-Za-z]+:\/\//.test(t)}function K2e(t,e){return new T0(t,e)}function XJ(t,e){if(t instanceof $4){const a=t;if(a._bucket==null)throw t2e();const r=new T0(a,a._bucket);return e!=null?XJ(r,e):r}else return e!==void 0?H2e(t,e):t}function W2e(t,e){if(e&&$2e(e)){if(t instanceof $4)return K2e(t,e);throw QM("To use ref(service, url), the first argument must be a Storage instance.")}else return XJ(t,e)}function cZ(t,e){const a=e==null?void 0:e[LJ];return a==null?null:uf.makeFromBucketSpec(a,t)}function Y2e(t,e,a,r={}){t.host=`${e}:${a}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:$q(s,t.app.options.projectId))}class $4{constructor(e,a,r,s,l){this.app=e,this._authProvider=a,this._appCheckProvider=r,this._url=s,this._firebaseVersion=l,this._bucket=null,this._host=IJ,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Zxe,this._maxUploadRetryTime=qxe,this._requests=new Set,s!=null?this._bucket=uf.makeFromBucketSpec(s,this._host):this._bucket=cZ(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=uf.makeFromBucketSpec(this._url,e):this._bucket=cZ(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){uZ("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){uZ("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const a=await e.getToken();if(a!==null)return a.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new T0(this,e)}_makeRequest(e,a,r,s,l=!0){if(this._deleted)return new s2e(FJ());{const h=g2e(e,this._appId,r,s,a,this._firebaseVersion,l);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,a){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,a,r,s).getPromise()}}const dZ="@firebase/storage",hZ="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JJ="storage";function QJ(t,e,a){return t=dl(t),Z2e(t,e,a)}function eQ(t){return t=dl(t),q2e(t)}function tQ(t,e){return t=dl(t),W2e(t,e)}function aQ(t=xI(),e){t=dl(t);const r=Zx(t,JJ).getImmediate({identifier:e}),s=Zq("storage");return s&&X2e(r,...s),r}function X2e(t,e,a,r={}){Y2e(t,e,a,r)}function J2e(t,{instanceIdentifier:e}){const a=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new $4(a,r,s,e,b0)}function Q2e(){f0(new Fg(JJ,J2e,"PUBLIC").setMultipleInstances(!0)),Pm(dZ,hZ,""),Pm(dZ,hZ,"esm2017")}Q2e();var x_={},l5,fZ;function ePe(){return fZ||(fZ=1,l5=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),l5}var u5={},yg={},pZ;function I0(){if(pZ)return yg;pZ=1;let t;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return yg.getSymbolSize=function(r){if(!r)throw new Error('"version" cannot be null or undefined');if(r<1||r>40)throw new Error('"version" should be in range from 1 to 40');return r*4+17},yg.getSymbolTotalCodewords=function(r){return e[r]},yg.getBCHDigit=function(a){let r=0;for(;a!==0;)r++,a>>>=1;return r},yg.setToSJISFunction=function(r){if(typeof r!="function")throw new Error('"toSJISFunc" is not a valid function.');t=r},yg.isKanjiModeEnabled=function(){return typeof t<"u"},yg.toSJIS=function(r){return t(r)},yg}var c5={},mZ;function K4(){return mZ||(mZ=1,function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+a)}}t.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},t.from=function(r,s){if(t.isValid(r))return r;try{return e(r)}catch{return s}}}(c5)),c5}var d5,yZ;function tPe(){if(yZ)return d5;yZ=1;function t(){this.buffer=[],this.length=0}return t.prototype={get:function(e){const a=Math.floor(e/8);return(this.buffer[a]>>>7-e%8&1)===1},put:function(e,a){for(let r=0;r<a;r++)this.putBit((e>>>a-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const a=Math.floor(this.length/8);this.buffer.length<=a&&this.buffer.push(0),e&&(this.buffer[a]|=128>>>this.length%8),this.length++}},d5=t,d5}var h5,gZ;function aPe(){if(gZ)return h5;gZ=1;function t(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return t.prototype.set=function(e,a,r,s){const l=e*this.size+a;this.data[l]=r,s&&(this.reservedBit[l]=!0)},t.prototype.get=function(e,a){return this.data[e*this.size+a]},t.prototype.xor=function(e,a,r){this.data[e*this.size+a]^=r},t.prototype.isReserved=function(e,a){return this.reservedBit[e*this.size+a]},h5=t,h5}var f5={},AZ;function rPe(){return AZ||(AZ=1,function(t){const e=I0().getSymbolSize;t.getRowColCoords=function(r){if(r===1)return[];const s=Math.floor(r/7)+2,l=e(r),h=l===145?26:Math.ceil((l-13)/(2*s-2))*2,n=[l-7];for(let w=1;w<s-1;w++)n[w]=n[w-1]-h;return n.push(6),n.reverse()},t.getPositions=function(r){const s=[],l=t.getRowColCoords(r),h=l.length;for(let n=0;n<h;n++)for(let w=0;w<h;w++)n===0&&w===0||n===0&&w===h-1||n===h-1&&w===0||s.push([l[n],l[w]]);return s}}(f5)),f5}var p5={},_Z;function nPe(){if(_Z)return p5;_Z=1;const t=I0().getSymbolSize,e=7;return p5.getPositions=function(r){const s=t(r);return[[0,0],[s-e,0],[0,s-e]]},p5}var m5={},vZ;function iPe(){return vZ||(vZ=1,function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},t.from=function(s){return t.isValid(s)?parseInt(s,10):void 0},t.getPenaltyN1=function(s){const l=s.size;let h=0,n=0,w=0,T=null,P=null;for(let z=0;z<l;z++){n=w=0,T=P=null;for(let k=0;k<l;k++){let U=s.get(z,k);U===T?n++:(n>=5&&(h+=e.N1+(n-5)),T=U,n=1),U=s.get(k,z),U===P?w++:(w>=5&&(h+=e.N1+(w-5)),P=U,w=1)}n>=5&&(h+=e.N1+(n-5)),w>=5&&(h+=e.N1+(w-5))}return h},t.getPenaltyN2=function(s){const l=s.size;let h=0;for(let n=0;n<l-1;n++)for(let w=0;w<l-1;w++){const T=s.get(n,w)+s.get(n,w+1)+s.get(n+1,w)+s.get(n+1,w+1);(T===4||T===0)&&h++}return h*e.N2},t.getPenaltyN3=function(s){const l=s.size;let h=0,n=0,w=0;for(let T=0;T<l;T++){n=w=0;for(let P=0;P<l;P++)n=n<<1&2047|s.get(T,P),P>=10&&(n===1488||n===93)&&h++,w=w<<1&2047|s.get(P,T),P>=10&&(w===1488||w===93)&&h++}return h*e.N3},t.getPenaltyN4=function(s){let l=0;const h=s.data.length;for(let w=0;w<h;w++)l+=s.data[w];return Math.abs(Math.ceil(l*100/h/5)-10)*e.N4};function a(r,s,l){switch(r){case t.Patterns.PATTERN000:return(s+l)%2===0;case t.Patterns.PATTERN001:return s%2===0;case t.Patterns.PATTERN010:return l%3===0;case t.Patterns.PATTERN011:return(s+l)%3===0;case t.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(l/3))%2===0;case t.Patterns.PATTERN101:return s*l%2+s*l%3===0;case t.Patterns.PATTERN110:return(s*l%2+s*l%3)%2===0;case t.Patterns.PATTERN111:return(s*l%3+(s+l)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}t.applyMask=function(s,l){const h=l.size;for(let n=0;n<h;n++)for(let w=0;w<h;w++)l.isReserved(w,n)||l.xor(w,n,a(s,w,n))},t.getBestMask=function(s,l){const h=Object.keys(t.Patterns).length;let n=0,w=1/0;for(let T=0;T<h;T++){l(T),t.applyMask(T,s);const P=t.getPenaltyN1(s)+t.getPenaltyN2(s)+t.getPenaltyN3(s)+t.getPenaltyN4(s);t.applyMask(T,s),P<w&&(w=P,n=T)}return n}}(m5)),m5}var zC={},wZ;function rQ(){if(wZ)return zC;wZ=1;const t=K4(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],a=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return zC.getBlocksCount=function(s,l){switch(l){case t.L:return e[(s-1)*4+0];case t.M:return e[(s-1)*4+1];case t.Q:return e[(s-1)*4+2];case t.H:return e[(s-1)*4+3];default:return}},zC.getTotalCodewordsCount=function(s,l){switch(l){case t.L:return a[(s-1)*4+0];case t.M:return a[(s-1)*4+1];case t.Q:return a[(s-1)*4+2];case t.H:return a[(s-1)*4+3];default:return}},zC}var y5={},Ow={},RZ;function sPe(){if(RZ)return Ow;RZ=1;const t=new Uint8Array(512),e=new Uint8Array(256);return function(){let r=1;for(let s=0;s<255;s++)t[s]=r,e[r]=s,r<<=1,r&256&&(r^=285);for(let s=255;s<512;s++)t[s]=t[s-255]}(),Ow.log=function(r){if(r<1)throw new Error("log("+r+")");return e[r]},Ow.exp=function(r){return t[r]},Ow.mul=function(r,s){return r===0||s===0?0:t[e[r]+e[s]]},Ow}var TZ;function oPe(){return TZ||(TZ=1,function(t){const e=sPe();t.mul=function(r,s){const l=new Uint8Array(r.length+s.length-1);for(let h=0;h<r.length;h++)for(let n=0;n<s.length;n++)l[h+n]^=e.mul(r[h],s[n]);return l},t.mod=function(r,s){let l=new Uint8Array(r);for(;l.length-s.length>=0;){const h=l[0];for(let w=0;w<s.length;w++)l[w]^=e.mul(s[w],h);let n=0;for(;n<l.length&&l[n]===0;)n++;l=l.slice(n)}return l},t.generateECPolynomial=function(r){let s=new Uint8Array([1]);for(let l=0;l<r;l++)s=t.mul(s,new Uint8Array([1,e.exp(l)]));return s}}(y5)),y5}var g5,SZ;function lPe(){if(SZ)return g5;SZ=1;const t=oPe();function e(a){this.genPoly=void 0,this.degree=a,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(r){this.degree=r,this.genPoly=t.generateECPolynomial(this.degree)},e.prototype.encode=function(r){if(!this.genPoly)throw new Error("Encoder not initialized");const s=new Uint8Array(r.length+this.degree);s.set(r);const l=t.mod(s,this.genPoly),h=this.degree-l.length;if(h>0){const n=new Uint8Array(this.degree);return n.set(l,h),n}return l},g5=e,g5}var A5={},_5={},v5={},CZ;function nQ(){return CZ||(CZ=1,v5.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),v5}var Am={},bZ;function iQ(){if(bZ)return Am;bZ=1;const t="[0-9]+",e="[A-Z $%*+\\-./:]+";let a="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";a=a.replace(/u/g,"\\u");const r="(?:(?![A-Z0-9 $%*+\\-./:]|"+a+`)(?:.|[\r
]))+`;Am.KANJI=new RegExp(a,"g"),Am.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Am.BYTE=new RegExp(r,"g"),Am.NUMERIC=new RegExp(t,"g"),Am.ALPHANUMERIC=new RegExp(e,"g");const s=new RegExp("^"+a+"$"),l=new RegExp("^"+t+"$"),h=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Am.testKanji=function(w){return s.test(w)},Am.testNumeric=function(w){return l.test(w)},Am.testAlphanumeric=function(w){return h.test(w)},Am}var xZ;function L0(){return xZ||(xZ=1,function(t){const e=nQ(),a=iQ();t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(l,h){if(!l.ccBits)throw new Error("Invalid mode: "+l);if(!e.isValid(h))throw new Error("Invalid version: "+h);return h>=1&&h<10?l.ccBits[0]:h<27?l.ccBits[1]:l.ccBits[2]},t.getBestModeForData=function(l){return a.testNumeric(l)?t.NUMERIC:a.testAlphanumeric(l)?t.ALPHANUMERIC:a.testKanji(l)?t.KANJI:t.BYTE},t.toString=function(l){if(l&&l.id)return l.id;throw new Error("Invalid mode")},t.isValid=function(l){return l&&l.bit&&l.ccBits};function r(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+s)}}t.from=function(l,h){if(t.isValid(l))return l;try{return r(l)}catch{return h}}}(_5)),_5}var PZ;function uPe(){return PZ||(PZ=1,function(t){const e=I0(),a=rQ(),r=K4(),s=L0(),l=nQ(),h=7973,n=e.getBCHDigit(h);function w(k,U,Z){for(let H=1;H<=40;H++)if(U<=t.getCapacity(H,Z,k))return H}function T(k,U){return s.getCharCountIndicator(k,U)+4}function P(k,U){let Z=0;return k.forEach(function(H){const q=T(H.mode,U);Z+=q+H.getBitsLength()}),Z}function z(k,U){for(let Z=1;Z<=40;Z++)if(P(k,Z)<=t.getCapacity(Z,U,s.MIXED))return Z}t.from=function(U,Z){return l.isValid(U)?parseInt(U,10):Z},t.getCapacity=function(U,Z,H){if(!l.isValid(U))throw new Error("Invalid QR Code version");typeof H>"u"&&(H=s.BYTE);const q=e.getSymbolTotalCodewords(U),J=a.getTotalCodewordsCount(U,Z),re=(q-J)*8;if(H===s.MIXED)return re;const ce=re-T(H,U);switch(H){case s.NUMERIC:return Math.floor(ce/10*3);case s.ALPHANUMERIC:return Math.floor(ce/11*2);case s.KANJI:return Math.floor(ce/13);case s.BYTE:default:return Math.floor(ce/8)}},t.getBestVersionForData=function(U,Z){let H;const q=r.from(Z,r.M);if(Array.isArray(U)){if(U.length>1)return z(U,q);if(U.length===0)return 1;H=U[0]}else H=U;return w(H.mode,H.getLength(),q)},t.getEncodedBits=function(U){if(!l.isValid(U)||U<7)throw new Error("Invalid QR Code version");let Z=U<<12;for(;e.getBCHDigit(Z)-n>=0;)Z^=h<<e.getBCHDigit(Z)-n;return U<<12|Z}}(A5)),A5}var w5={},EZ;function cPe(){if(EZ)return w5;EZ=1;const t=I0(),e=1335,a=21522,r=t.getBCHDigit(e);return w5.getEncodedBits=function(l,h){const n=l.bit<<3|h;let w=n<<10;for(;t.getBCHDigit(w)-r>=0;)w^=e<<t.getBCHDigit(w)-r;return(n<<10|w)^a},w5}var R5={},T5,NZ;function dPe(){if(NZ)return T5;NZ=1;const t=L0();function e(a){this.mode=t.NUMERIC,this.data=a.toString()}return e.getBitsLength=function(r){return 10*Math.floor(r/3)+(r%3?r%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(r){let s,l,h;for(s=0;s+3<=this.data.length;s+=3)l=this.data.substr(s,3),h=parseInt(l,10),r.put(h,10);const n=this.data.length-s;n>0&&(l=this.data.substr(s),h=parseInt(l,10),r.put(h,n*3+1))},T5=e,T5}var S5,VZ;function hPe(){if(VZ)return S5;VZ=1;const t=L0(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function a(r){this.mode=t.ALPHANUMERIC,this.data=r}return a.getBitsLength=function(s){return 11*Math.floor(s/2)+6*(s%2)},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(s){let l;for(l=0;l+2<=this.data.length;l+=2){let h=e.indexOf(this.data[l])*45;h+=e.indexOf(this.data[l+1]),s.put(h,11)}this.data.length%2&&s.put(e.indexOf(this.data[l]),6)},S5=a,S5}var C5,zZ;function fPe(){if(zZ)return C5;zZ=1;const t=L0();function e(a){this.mode=t.BYTE,typeof a=="string"?this.data=new TextEncoder().encode(a):this.data=new Uint8Array(a)}return e.getBitsLength=function(r){return r*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(a){for(let r=0,s=this.data.length;r<s;r++)a.put(this.data[r],8)},C5=e,C5}var b5,OZ;function pPe(){if(OZ)return b5;OZ=1;const t=L0(),e=I0();function a(r){this.mode=t.KANJI,this.data=r}return a.getBitsLength=function(s){return s*13},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(r){let s;for(s=0;s<this.data.length;s++){let l=e.toSJIS(this.data[s]);if(l>=33088&&l<=40956)l-=33088;else if(l>=57408&&l<=60351)l-=49472;else throw new Error("Invalid SJIS character: "+this.data[s]+`
Make sure your charset is UTF-8`);l=(l>>>8&255)*192+(l&255),r.put(l,13)}},b5=a,b5}var x5={exports:{}},DZ;function mPe(){return DZ||(DZ=1,function(t){var e={single_source_shortest_paths:function(a,r,s){var l={},h={};h[r]=0;var n=e.PriorityQueue.make();n.push(r,0);for(var w,T,P,z,k,U,Z,H,q;!n.empty();){w=n.pop(),T=w.value,z=w.cost,k=a[T]||{};for(P in k)k.hasOwnProperty(P)&&(U=k[P],Z=z+U,H=h[P],q=typeof h[P]>"u",(q||H>Z)&&(h[P]=Z,n.push(P,Z),l[P]=T))}if(typeof s<"u"&&typeof h[s]>"u"){var J=["Could not find a path from ",r," to ",s,"."].join("");throw new Error(J)}return l},extract_shortest_path_from_predecessor_list:function(a,r){for(var s=[],l=r;l;)s.push(l),a[l],l=a[l];return s.reverse(),s},find_path:function(a,r,s){var l=e.single_source_shortest_paths(a,r,s);return e.extract_shortest_path_from_predecessor_list(l,s)},PriorityQueue:{make:function(a){var r=e.PriorityQueue,s={},l;a=a||{};for(l in r)r.hasOwnProperty(l)&&(s[l]=r[l]);return s.queue=[],s.sorter=a.sorter||r.default_sorter,s},default_sorter:function(a,r){return a.cost-r.cost},push:function(a,r){var s={value:a,cost:r};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e}(x5)),x5.exports}var MZ;function yPe(){return MZ||(MZ=1,function(t){const e=L0(),a=dPe(),r=hPe(),s=fPe(),l=pPe(),h=iQ(),n=I0(),w=mPe();function T(J){return unescape(encodeURIComponent(J)).length}function P(J,re,ce){const ye=[];let he;for(;(he=J.exec(ce))!==null;)ye.push({data:he[0],index:he.index,mode:re,length:he[0].length});return ye}function z(J){const re=P(h.NUMERIC,e.NUMERIC,J),ce=P(h.ALPHANUMERIC,e.ALPHANUMERIC,J);let ye,he;return n.isKanjiModeEnabled()?(ye=P(h.BYTE,e.BYTE,J),he=P(h.KANJI,e.KANJI,J)):(ye=P(h.BYTE_KANJI,e.BYTE,J),he=[]),re.concat(ce,ye,he).sort(function(me,Re){return me.index-Re.index}).map(function(me){return{data:me.data,mode:me.mode,length:me.length}})}function k(J,re){switch(re){case e.NUMERIC:return a.getBitsLength(J);case e.ALPHANUMERIC:return r.getBitsLength(J);case e.KANJI:return l.getBitsLength(J);case e.BYTE:return s.getBitsLength(J)}}function U(J){return J.reduce(function(re,ce){const ye=re.length-1>=0?re[re.length-1]:null;return ye&&ye.mode===ce.mode?(re[re.length-1].data+=ce.data,re):(re.push(ce),re)},[])}function Z(J){const re=[];for(let ce=0;ce<J.length;ce++){const ye=J[ce];switch(ye.mode){case e.NUMERIC:re.push([ye,{data:ye.data,mode:e.ALPHANUMERIC,length:ye.length},{data:ye.data,mode:e.BYTE,length:ye.length}]);break;case e.ALPHANUMERIC:re.push([ye,{data:ye.data,mode:e.BYTE,length:ye.length}]);break;case e.KANJI:re.push([ye,{data:ye.data,mode:e.BYTE,length:T(ye.data)}]);break;case e.BYTE:re.push([{data:ye.data,mode:e.BYTE,length:T(ye.data)}])}}return re}function H(J,re){const ce={},ye={start:{}};let he=["start"];for(let _e=0;_e<J.length;_e++){const me=J[_e],Re=[];for(let be=0;be<me.length;be++){const De=me[be],ie=""+_e+be;Re.push(ie),ce[ie]={node:De,lastCount:0},ye[ie]={};for(let ge=0;ge<he.length;ge++){const Me=he[ge];ce[Me]&&ce[Me].node.mode===De.mode?(ye[Me][ie]=k(ce[Me].lastCount+De.length,De.mode)-k(ce[Me].lastCount,De.mode),ce[Me].lastCount+=De.length):(ce[Me]&&(ce[Me].lastCount=De.length),ye[Me][ie]=k(De.length,De.mode)+4+e.getCharCountIndicator(De.mode,re))}}he=Re}for(let _e=0;_e<he.length;_e++)ye[he[_e]].end=0;return{map:ye,table:ce}}function q(J,re){let ce;const ye=e.getBestModeForData(J);if(ce=e.from(re,ye),ce!==e.BYTE&&ce.bit<ye.bit)throw new Error('"'+J+'" cannot be encoded with mode '+e.toString(ce)+`.
 Suggested mode is: `+e.toString(ye));switch(ce===e.KANJI&&!n.isKanjiModeEnabled()&&(ce=e.BYTE),ce){case e.NUMERIC:return new a(J);case e.ALPHANUMERIC:return new r(J);case e.KANJI:return new l(J);case e.BYTE:return new s(J)}}t.fromArray=function(re){return re.reduce(function(ce,ye){return typeof ye=="string"?ce.push(q(ye,null)):ye.data&&ce.push(q(ye.data,ye.mode)),ce},[])},t.fromString=function(re,ce){const ye=z(re,n.isKanjiModeEnabled()),he=Z(ye),_e=H(he,ce),me=w.find_path(_e.map,"start","end"),Re=[];for(let be=1;be<me.length-1;be++)Re.push(_e.table[me[be]].node);return t.fromArray(U(Re))},t.rawSplit=function(re){return t.fromArray(z(re,n.isKanjiModeEnabled()))}}(R5)),R5}var IZ;function gPe(){if(IZ)return u5;IZ=1;const t=I0(),e=K4(),a=tPe(),r=aPe(),s=rPe(),l=nPe(),h=iPe(),n=rQ(),w=lPe(),T=uPe(),P=cPe(),z=L0(),k=yPe();function U(_e,me){const Re=_e.size,be=l.getPositions(me);for(let De=0;De<be.length;De++){const ie=be[De][0],ge=be[De][1];for(let Me=-1;Me<=7;Me++)if(!(ie+Me<=-1||Re<=ie+Me))for(let ze=-1;ze<=7;ze++)ge+ze<=-1||Re<=ge+ze||(Me>=0&&Me<=6&&(ze===0||ze===6)||ze>=0&&ze<=6&&(Me===0||Me===6)||Me>=2&&Me<=4&&ze>=2&&ze<=4?_e.set(ie+Me,ge+ze,!0,!0):_e.set(ie+Me,ge+ze,!1,!0))}}function Z(_e){const me=_e.size;for(let Re=8;Re<me-8;Re++){const be=Re%2===0;_e.set(Re,6,be,!0),_e.set(6,Re,be,!0)}}function H(_e,me){const Re=s.getPositions(me);for(let be=0;be<Re.length;be++){const De=Re[be][0],ie=Re[be][1];for(let ge=-2;ge<=2;ge++)for(let Me=-2;Me<=2;Me++)ge===-2||ge===2||Me===-2||Me===2||ge===0&&Me===0?_e.set(De+ge,ie+Me,!0,!0):_e.set(De+ge,ie+Me,!1,!0)}}function q(_e,me){const Re=_e.size,be=T.getEncodedBits(me);let De,ie,ge;for(let Me=0;Me<18;Me++)De=Math.floor(Me/3),ie=Me%3+Re-8-3,ge=(be>>Me&1)===1,_e.set(De,ie,ge,!0),_e.set(ie,De,ge,!0)}function J(_e,me,Re){const be=_e.size,De=P.getEncodedBits(me,Re);let ie,ge;for(ie=0;ie<15;ie++)ge=(De>>ie&1)===1,ie<6?_e.set(ie,8,ge,!0):ie<8?_e.set(ie+1,8,ge,!0):_e.set(be-15+ie,8,ge,!0),ie<8?_e.set(8,be-ie-1,ge,!0):ie<9?_e.set(8,15-ie-1+1,ge,!0):_e.set(8,15-ie-1,ge,!0);_e.set(be-8,8,1,!0)}function re(_e,me){const Re=_e.size;let be=-1,De=Re-1,ie=7,ge=0;for(let Me=Re-1;Me>0;Me-=2)for(Me===6&&Me--;;){for(let ze=0;ze<2;ze++)if(!_e.isReserved(De,Me-ze)){let Le=!1;ge<me.length&&(Le=(me[ge]>>>ie&1)===1),_e.set(De,Me-ze,Le),ie--,ie===-1&&(ge++,ie=7)}if(De+=be,De<0||Re<=De){De-=be,be=-be;break}}}function ce(_e,me,Re){const be=new a;Re.forEach(function(ze){be.put(ze.mode.bit,4),be.put(ze.getLength(),z.getCharCountIndicator(ze.mode,_e)),ze.write(be)});const De=t.getSymbolTotalCodewords(_e),ie=n.getTotalCodewordsCount(_e,me),ge=(De-ie)*8;for(be.getLengthInBits()+4<=ge&&be.put(0,4);be.getLengthInBits()%8!==0;)be.putBit(0);const Me=(ge-be.getLengthInBits())/8;for(let ze=0;ze<Me;ze++)be.put(ze%2?17:236,8);return ye(be,_e,me)}function ye(_e,me,Re){const be=t.getSymbolTotalCodewords(me),De=n.getTotalCodewordsCount(me,Re),ie=be-De,ge=n.getBlocksCount(me,Re),Me=be%ge,ze=ge-Me,Le=Math.floor(be/ge),Ie=Math.floor(ie/ge),Ze=Ie+1,ke=Le-Ie,tt=new w(ke);let Ue=0;const He=new Array(ge),Ce=new Array(ge);let Se=0;const $e=new Uint8Array(_e.buffer);for(let We=0;We<ge;We++){const Ae=We<ze?Ie:Ze;He[We]=$e.slice(Ue,Ue+Ae),Ce[We]=tt.encode(He[We]),Ue+=Ae,Se=Math.max(Se,Ae)}const ht=new Uint8Array(be);let ft=0,ut,Rt;for(ut=0;ut<Se;ut++)for(Rt=0;Rt<ge;Rt++)ut<He[Rt].length&&(ht[ft++]=He[Rt][ut]);for(ut=0;ut<ke;ut++)for(Rt=0;Rt<ge;Rt++)ht[ft++]=Ce[Rt][ut];return ht}function he(_e,me,Re,be){let De;if(Array.isArray(_e))De=k.fromArray(_e);else if(typeof _e=="string"){let Le=me;if(!Le){const Ie=k.rawSplit(_e);Le=T.getBestVersionForData(Ie,Re)}De=k.fromString(_e,Le||40)}else throw new Error("Invalid data");const ie=T.getBestVersionForData(De,Re);if(!ie)throw new Error("The amount of data is too big to be stored in a QR Code");if(!me)me=ie;else if(me<ie)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+ie+`.
`);const ge=ce(me,Re,De),Me=t.getSymbolSize(me),ze=new r(Me);return U(ze,me),Z(ze),H(ze,me),J(ze,Re,0),me>=7&&q(ze,me),re(ze,ge),isNaN(be)&&(be=h.getBestMask(ze,J.bind(null,ze,Re))),h.applyMask(be,ze),J(ze,Re,be),{modules:ze,version:me,errorCorrectionLevel:Re,maskPattern:be,segments:De}}return u5.create=function(me,Re){if(typeof me>"u"||me==="")throw new Error("No input text");let be=e.M,De,ie;return typeof Re<"u"&&(be=e.from(Re.errorCorrectionLevel,e.M),De=T.from(Re.version),ie=h.from(Re.maskPattern),Re.toSJISFunc&&t.setToSJISFunction(Re.toSJISFunc)),he(me,De,be,ie)},u5}var P5={},E5={},LZ;function sQ(){return LZ||(LZ=1,function(t){function e(a){if(typeof a=="number"&&(a=a.toString()),typeof a!="string")throw new Error("Color should be defined as hex string");let r=a.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+a);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(l){return[l,l]}))),r.length===6&&r.push("F","F");const s=parseInt(r.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+r.slice(0,6).join("")}}t.getOptions=function(r){r||(r={}),r.color||(r.color={});const s=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,l=r.width&&r.width>=21?r.width:void 0,h=r.scale||4;return{width:l,scale:l?4:h,margin:s,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},t.getScale=function(r,s){return s.width&&s.width>=r+s.margin*2?s.width/(r+s.margin*2):s.scale},t.getImageWidth=function(r,s){const l=t.getScale(r,s);return Math.floor((r+s.margin*2)*l)},t.qrToImageData=function(r,s,l){const h=s.modules.size,n=s.modules.data,w=t.getScale(h,l),T=Math.floor((h+l.margin*2)*w),P=l.margin*w,z=[l.color.light,l.color.dark];for(let k=0;k<T;k++)for(let U=0;U<T;U++){let Z=(k*T+U)*4,H=l.color.light;if(k>=P&&U>=P&&k<T-P&&U<T-P){const q=Math.floor((k-P)/w),J=Math.floor((U-P)/w);H=z[n[q*h+J]?1:0]}r[Z++]=H.r,r[Z++]=H.g,r[Z++]=H.b,r[Z]=H.a}}}(E5)),E5}var FZ;function APe(){return FZ||(FZ=1,function(t){const e=sQ();function a(s,l,h){s.clearRect(0,0,l.width,l.height),l.style||(l.style={}),l.height=h,l.width=h,l.style.height=h+"px",l.style.width=h+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(l,h,n){let w=n,T=h;typeof w>"u"&&(!h||!h.getContext)&&(w=h,h=void 0),h||(T=r()),w=e.getOptions(w);const P=e.getImageWidth(l.modules.size,w),z=T.getContext("2d"),k=z.createImageData(P,P);return e.qrToImageData(k.data,l,w),a(z,T,P),z.putImageData(k,0,0),T},t.renderToDataURL=function(l,h,n){let w=n;typeof w>"u"&&(!h||!h.getContext)&&(w=h,h=void 0),w||(w={});const T=t.render(l,h,w),P=w.type||"image/png",z=w.rendererOpts||{};return T.toDataURL(P,z.quality)}}(P5)),P5}var N5={},UZ;function _Pe(){if(UZ)return N5;UZ=1;const t=sQ();function e(s,l){const h=s.a/255,n=l+'="'+s.hex+'"';return h<1?n+" "+l+'-opacity="'+h.toFixed(2).slice(1)+'"':n}function a(s,l,h){let n=s+l;return typeof h<"u"&&(n+=" "+h),n}function r(s,l,h){let n="",w=0,T=!1,P=0;for(let z=0;z<s.length;z++){const k=Math.floor(z%l),U=Math.floor(z/l);!k&&!T&&(T=!0),s[z]?(P++,z>0&&k>0&&s[z-1]||(n+=T?a("M",k+h,.5+U+h):a("m",w,0),w=0,T=!1),k+1<l&&s[z+1]||(n+=a("h",P),P=0)):w++}return n}return N5.render=function(l,h,n){const w=t.getOptions(h),T=l.modules.size,P=l.modules.data,z=T+w.margin*2,k=w.color.light.a?"<path "+e(w.color.light,"fill")+' d="M0 0h'+z+"v"+z+'H0z"/>':"",U="<path "+e(w.color.dark,"stroke")+' d="'+r(P,T,w.margin)+'"/>',Z='viewBox="0 0 '+z+" "+z+'"',q='<svg xmlns="http://www.w3.org/2000/svg" '+(w.width?'width="'+w.width+'" height="'+w.width+'" ':"")+Z+' shape-rendering="crispEdges">'+k+U+`</svg>
`;return typeof n=="function"&&n(null,q),q},N5}var kZ;function vPe(){if(kZ)return x_;kZ=1;const t=ePe(),e=gPe(),a=APe(),r=_Pe();function s(l,h,n,w,T){const P=[].slice.call(arguments,1),z=P.length,k=typeof P[z-1]=="function";if(!k&&!t())throw new Error("Callback required as last argument");if(k){if(z<2)throw new Error("Too few arguments provided");z===2?(T=n,n=h,h=w=void 0):z===3&&(h.getContext&&typeof T>"u"?(T=w,w=void 0):(T=w,w=n,n=h,h=void 0))}else{if(z<1)throw new Error("Too few arguments provided");return z===1?(n=h,h=w=void 0):z===2&&!h.getContext&&(w=n,n=h,h=void 0),new Promise(function(U,Z){try{const H=e.create(n,w);U(l(H,h,w))}catch(H){Z(H)}})}try{const U=e.create(n,w);T(null,l(U,h,w))}catch(U){T(U)}}return x_.create=e.create,x_.toCanvas=s.bind(null,a.render),x_.toDataURL=s.bind(null,a.renderToDataURL),x_.toString=s.bind(null,function(l,h,n){return r.render(l,n)}),x_}var wPe=vPe();const RPe=Ji(wPe),TPe="modulepreload",SPe=function(t){return"/ecpcaps/"+t},BZ={},eI=function(e,a,r){let s=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),n=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));s=Promise.allSettled(a.map(w=>{if(w=SPe(w),w in BZ)return;BZ[w]=!0;const T=w.endsWith(".css"),P=T?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${w}"]${P}`))return;const z=document.createElement("link");if(z.rel=T?"stylesheet":TPe,T||(z.as="script"),z.crossOrigin="",z.href=w,n&&z.setAttribute("nonce",n),document.head.appendChild(z),T)return new Promise((k,U)=>{z.addEventListener("load",k),z.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${w}`)))})}))}function l(h){const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=h,window.dispatchEvent(n),!n.defaultPrevented)throw h}return s.then(h=>{for(const n of h||[])n.status==="rejected"&&l(n.reason);return e().catch(l)})};function Ls(t){"@babel/helpers - typeof";return Ls=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ls(t)}var pd=Uint8Array,cf=Uint16Array,W4=Int32Array,pP=new pd([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),mP=new pd([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),tI=new pd([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),oQ=function(t,e){for(var a=new cf(31),r=0;r<31;++r)a[r]=e+=1<<t[r-1];for(var s=new W4(a[30]),r=1;r<30;++r)for(var l=a[r];l<a[r+1];++l)s[l]=l-a[r]<<5|r;return{b:a,r:s}},lQ=oQ(pP,2),uQ=lQ.b,aI=lQ.r;uQ[28]=258,aI[258]=28;var cQ=oQ(mP,0),CPe=cQ.b,GZ=cQ.r,rI=new cf(32768);for(var Vo=0;Vo<32768;++Vo){var gg=(Vo&43690)>>1|(Vo&21845)<<1;gg=(gg&52428)>>2|(gg&13107)<<2,gg=(gg&61680)>>4|(gg&3855)<<4,rI[Vo]=((gg&65280)>>8|(gg&255)<<8)>>1}var Dm=function(t,e,a){for(var r=t.length,s=0,l=new cf(e);s<r;++s)t[s]&&++l[t[s]-1];var h=new cf(e);for(s=1;s<e;++s)h[s]=h[s-1]+l[s-1]<<1;var n;if(a){n=new cf(1<<e);var w=15-e;for(s=0;s<r;++s)if(t[s])for(var T=s<<4|t[s],P=e-t[s],z=h[t[s]-1]++<<P,k=z|(1<<P)-1;z<=k;++z)n[rI[z]>>w]=T}else for(n=new cf(r),s=0;s<r;++s)t[s]&&(n[s]=rI[h[t[s]-1]++]>>15-t[s]);return n},jg=new pd(288);for(var Vo=0;Vo<144;++Vo)jg[Vo]=8;for(var Vo=144;Vo<256;++Vo)jg[Vo]=9;for(var Vo=256;Vo<280;++Vo)jg[Vo]=7;for(var Vo=280;Vo<288;++Vo)jg[Vo]=8;var dT=new pd(32);for(var Vo=0;Vo<32;++Vo)dT[Vo]=5;var bPe=Dm(jg,9,0),xPe=Dm(jg,9,1),PPe=Dm(dT,5,0),EPe=Dm(dT,5,1),V5=function(t){for(var e=t[0],a=1;a<t.length;++a)t[a]>e&&(e=t[a]);return e},Cp=function(t,e,a){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&a},z5=function(t,e){var a=e/8|0;return(t[a]|t[a+1]<<8|t[a+2]<<16)>>(e&7)},Y4=function(t){return(t+7)/8|0},dQ=function(t,e,a){return(a==null||a>t.length)&&(a=t.length),new pd(t.subarray(e,a))},NPe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ep=function(t,e,a){var r=new Error(e||NPe[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,Ep),!a)throw r;return r},VPe=function(t,e,a,r){var s=t.length,l=0;if(!s||e.f&&!e.l)return a||new pd(0);var h=!a,n=h||e.i!=2,w=e.i;h&&(a=new pd(s*3));var T=function(qt){var Gt=a.length;if(qt>Gt){var Aa=new pd(Math.max(Gt*2,qt));Aa.set(a),a=Aa}},P=e.f||0,z=e.p||0,k=e.b||0,U=e.l,Z=e.d,H=e.m,q=e.n,J=s*8;do{if(!U){P=Cp(t,z,1);var re=Cp(t,z+1,3);if(z+=3,re)if(re==1)U=xPe,Z=EPe,H=9,q=5;else if(re==2){var _e=Cp(t,z,31)+257,me=Cp(t,z+10,15)+4,Re=_e+Cp(t,z+5,31)+1;z+=14;for(var be=new pd(Re),De=new pd(19),ie=0;ie<me;++ie)De[tI[ie]]=Cp(t,z+ie*3,7);z+=me*3;for(var ge=V5(De),Me=(1<<ge)-1,ze=Dm(De,ge,1),ie=0;ie<Re;){var Le=ze[Cp(t,z,Me)];z+=Le&15;var ce=Le>>4;if(ce<16)be[ie++]=ce;else{var Ie=0,Ze=0;for(ce==16?(Ze=3+Cp(t,z,3),z+=2,Ie=be[ie-1]):ce==17?(Ze=3+Cp(t,z,7),z+=3):ce==18&&(Ze=11+Cp(t,z,127),z+=7);Ze--;)be[ie++]=Ie}}var ke=be.subarray(0,_e),tt=be.subarray(_e);H=V5(ke),q=V5(tt),U=Dm(ke,H,1),Z=Dm(tt,q,1)}else Ep(1);else{var ce=Y4(z)+4,ye=t[ce-4]|t[ce-3]<<8,he=ce+ye;if(he>s){w&&Ep(0);break}n&&T(k+ye),a.set(t.subarray(ce,he),k),e.b=k+=ye,e.p=z=he*8,e.f=P;continue}if(z>J){w&&Ep(0);break}}n&&T(k+131072);for(var Ue=(1<<H)-1,He=(1<<q)-1,Ce=z;;Ce=z){var Ie=U[z5(t,z)&Ue],Se=Ie>>4;if(z+=Ie&15,z>J){w&&Ep(0);break}if(Ie||Ep(2),Se<256)a[k++]=Se;else if(Se==256){Ce=z,U=null;break}else{var $e=Se-254;if(Se>264){var ie=Se-257,ht=pP[ie];$e=Cp(t,z,(1<<ht)-1)+uQ[ie],z+=ht}var ft=Z[z5(t,z)&He],ut=ft>>4;ft||Ep(3),z+=ft&15;var tt=CPe[ut];if(ut>3){var ht=mP[ut];tt+=z5(t,z)&(1<<ht)-1,z+=ht}if(z>J){w&&Ep(0);break}n&&T(k+131072);var Rt=k+$e;if(k<tt){var We=l-tt,Ae=Math.min(tt,Rt);for(We+k<0&&Ep(3);k<Ae;++k)a[k]=r[We+k]}for(;k<Rt;++k)a[k]=a[k-tt]}}e.l=U,e.p=Ce,e.b=k,e.f=P,U&&(P=1,e.m=H,e.d=Z,e.n=q)}while(!P);return k!=a.length&&h?dQ(a,0,k):a.subarray(0,k)},ly=function(t,e,a){a<<=e&7;var r=e/8|0;t[r]|=a,t[r+1]|=a>>8},Dw=function(t,e,a){a<<=e&7;var r=e/8|0;t[r]|=a,t[r+1]|=a>>8,t[r+2]|=a>>16},O5=function(t,e){for(var a=[],r=0;r<t.length;++r)t[r]&&a.push({s:r,f:t[r]});var s=a.length,l=a.slice();if(!s)return{t:fQ,l:0};if(s==1){var h=new pd(a[0].s+1);return h[a[0].s]=1,{t:h,l:1}}a.sort(function(he,_e){return he.f-_e.f}),a.push({s:-1,f:25001});var n=a[0],w=a[1],T=0,P=1,z=2;for(a[0]={s:-1,f:n.f+w.f,l:n,r:w};P!=s-1;)n=a[a[T].f<a[z].f?T++:z++],w=a[T!=P&&a[T].f<a[z].f?T++:z++],a[P++]={s:-1,f:n.f+w.f,l:n,r:w};for(var k=l[0].s,r=1;r<s;++r)l[r].s>k&&(k=l[r].s);var U=new cf(k+1),Z=nI(a[P-1],U,0);if(Z>e){var r=0,H=0,q=Z-e,J=1<<q;for(l.sort(function(_e,me){return U[me.s]-U[_e.s]||_e.f-me.f});r<s;++r){var re=l[r].s;if(U[re]>e)H+=J-(1<<Z-U[re]),U[re]=e;else break}for(H>>=q;H>0;){var ce=l[r].s;U[ce]<e?H-=1<<e-U[ce]++-1:++r}for(;r>=0&&H;--r){var ye=l[r].s;U[ye]==e&&(--U[ye],++H)}Z=e}return{t:new pd(U),l:Z}},nI=function(t,e,a){return t.s==-1?Math.max(nI(t.l,e,a+1),nI(t.r,e,a+1)):e[t.s]=a},jZ=function(t){for(var e=t.length;e&&!t[--e];);for(var a=new cf(++e),r=0,s=t[0],l=1,h=function(w){a[r++]=w},n=1;n<=e;++n)if(t[n]==s&&n!=e)++l;else{if(!s&&l>2){for(;l>138;l-=138)h(32754);l>2&&(h(l>10?l-11<<5|28690:l-3<<5|12305),l=0)}else if(l>3){for(h(s),--l;l>6;l-=6)h(8304);l>2&&(h(l-3<<5|8208),l=0)}for(;l--;)h(s);l=1,s=t[n]}return{c:a.subarray(0,r),n:e}},Mw=function(t,e){for(var a=0,r=0;r<e.length;++r)a+=t[r]*e[r];return a},hQ=function(t,e,a){var r=a.length,s=Y4(e+2);t[s]=r&255,t[s+1]=r>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var l=0;l<r;++l)t[s+l+4]=a[l];return(s+4+r)*8},ZZ=function(t,e,a,r,s,l,h,n,w,T,P){ly(e,P++,a),++s[256];for(var z=O5(s,15),k=z.t,U=z.l,Z=O5(l,15),H=Z.t,q=Z.l,J=jZ(k),re=J.c,ce=J.n,ye=jZ(H),he=ye.c,_e=ye.n,me=new cf(19),Re=0;Re<re.length;++Re)++me[re[Re]&31];for(var Re=0;Re<he.length;++Re)++me[he[Re]&31];for(var be=O5(me,7),De=be.t,ie=be.l,ge=19;ge>4&&!De[tI[ge-1]];--ge);var Me=T+5<<3,ze=Mw(s,jg)+Mw(l,dT)+h,Le=Mw(s,k)+Mw(l,H)+h+14+3*ge+Mw(me,De)+2*me[16]+3*me[17]+7*me[18];if(w>=0&&Me<=ze&&Me<=Le)return hQ(e,P,t.subarray(w,w+T));var Ie,Ze,ke,tt;if(ly(e,P,1+(Le<ze)),P+=2,Le<ze){Ie=Dm(k,U,0),Ze=k,ke=Dm(H,q,0),tt=H;var Ue=Dm(De,ie,0);ly(e,P,ce-257),ly(e,P+5,_e-1),ly(e,P+10,ge-4),P+=14;for(var Re=0;Re<ge;++Re)ly(e,P+3*Re,De[tI[Re]]);P+=3*ge;for(var He=[re,he],Ce=0;Ce<2;++Ce)for(var Se=He[Ce],Re=0;Re<Se.length;++Re){var $e=Se[Re]&31;ly(e,P,Ue[$e]),P+=De[$e],$e>15&&(ly(e,P,Se[Re]>>5&127),P+=Se[Re]>>12)}}else Ie=bPe,Ze=jg,ke=PPe,tt=dT;for(var Re=0;Re<n;++Re){var ht=r[Re];if(ht>255){var $e=ht>>18&31;Dw(e,P,Ie[$e+257]),P+=Ze[$e+257],$e>7&&(ly(e,P,ht>>23&31),P+=pP[$e]);var ft=ht&31;Dw(e,P,ke[ft]),P+=tt[ft],ft>3&&(Dw(e,P,ht>>5&8191),P+=mP[ft])}else Dw(e,P,Ie[ht]),P+=Ze[ht]}return Dw(e,P,Ie[256]),P+Ze[256]},zPe=new W4([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),fQ=new pd(0),OPe=function(t,e,a,r,s,l){var h=l.z||t.length,n=new pd(r+h+5*(1+Math.ceil(h/7e3))+s),w=n.subarray(r,n.length-s),T=l.l,P=(l.r||0)&7;if(e){P&&(w[0]=l.r>>3);for(var z=zPe[e-1],k=z>>13,U=z&8191,Z=(1<<a)-1,H=l.p||new cf(32768),q=l.h||new cf(Z+1),J=Math.ceil(a/3),re=2*J,ce=function(It){return(t[It]^t[It+1]<<J^t[It+2]<<re)&Z},ye=new W4(25e3),he=new cf(288),_e=new cf(32),me=0,Re=0,be=l.i||0,De=0,ie=l.w||0,ge=0;be+2<h;++be){var Me=ce(be),ze=be&32767,Le=q[Me];if(H[ze]=Le,q[Me]=ze,ie<=be){var Ie=h-be;if((me>7e3||De>24576)&&(Ie>423||!T)){P=ZZ(t,w,0,ye,he,_e,Re,De,ge,be-ge,P),De=me=Re=0,ge=be;for(var Ze=0;Ze<286;++Ze)he[Ze]=0;for(var Ze=0;Ze<30;++Ze)_e[Ze]=0}var ke=2,tt=0,Ue=U,He=ze-Le&32767;if(Ie>2&&Me==ce(be-He))for(var Ce=Math.min(k,Ie)-1,Se=Math.min(32767,be),$e=Math.min(258,Ie);He<=Se&&--Ue&&ze!=Le;){if(t[be+ke]==t[be+ke-He]){for(var ht=0;ht<$e&&t[be+ht]==t[be+ht-He];++ht);if(ht>ke){if(ke=ht,tt=He,ht>Ce)break;for(var ft=Math.min(He,ht-2),ut=0,Ze=0;Ze<ft;++Ze){var Rt=be-He+Ze&32767,We=H[Rt],Ae=Rt-We&32767;Ae>ut&&(ut=Ae,Le=Rt)}}}ze=Le,Le=H[ze],He+=ze-Le&32767}if(tt){ye[De++]=268435456|aI[ke]<<18|GZ[tt];var qt=aI[ke]&31,Gt=GZ[tt]&31;Re+=pP[qt]+mP[Gt],++he[257+qt],++_e[Gt],ie=be+ke,++me}else ye[De++]=t[be],++he[t[be]]}}for(be=Math.max(be,ie);be<h;++be)ye[De++]=t[be],++he[t[be]];P=ZZ(t,w,T,ye,he,_e,Re,De,ge,be-ge,P),T||(l.r=P&7|w[P/8|0]<<3,P-=7,l.h=q,l.p=H,l.i=be,l.w=ie)}else{for(var be=l.w||0;be<h+T;be+=65535){var Aa=be+65535;Aa>=h&&(w[P/8|0]=T,Aa=h),P=hQ(w,P+1,t.subarray(be,Aa))}l.i=h}return dQ(n,0,r+Y4(P)+s)},pQ=function(){var t=1,e=0;return{p:function(a){for(var r=t,s=e,l=a.length|0,h=0;h!=l;){for(var n=Math.min(h+2655,l);h<n;++h)s+=r+=a[h];r=(r&65535)+15*(r>>16),s=(s&65535)+15*(s>>16)}t=r,e=s},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},DPe=function(t,e,a,r,s){if(!s&&(s={l:1},e.dictionary)){var l=e.dictionary.subarray(-32768),h=new pd(l.length+t.length);h.set(l),h.set(t,l.length),t=h,s.w=l.length}return OPe(t,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,a,r,s)},mQ=function(t,e,a){for(;a;++e)t[e]=a,a>>>=8},MPe=function(t,e){var a=e.level,r=a==0?0:a<6?1:a==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var s=pQ();s.p(e.dictionary),mQ(t,2,s.d())}},IPe=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Ep(6,"invalid zlib data"),(t[1]>>5&1)==1&&Ep(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function iI(t,e){e||(e={});var a=pQ();a.p(t);var r=DPe(t,e,e.dictionary?6:2,4);return MPe(r,e),mQ(r,r.length-4,a.d()),r}function LPe(t,e){return VPe(t.subarray(IPe(t),-4),{i:2},e,e)}var FPe=typeof TextDecoder<"u"&&new TextDecoder,UPe=0;try{FPe.decode(fQ,{stream:!0}),UPe=1}catch{}var Wn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function D5(){Wn.console&&typeof Wn.console.log=="function"&&Wn.console.log.apply(Wn.console,arguments)}var io={log:D5,warn:function(t){Wn.console&&(typeof Wn.console.warn=="function"?Wn.console.warn.apply(Wn.console,arguments):D5.call(null,arguments))},error:function(t){Wn.console&&(typeof Wn.console.error=="function"?Wn.console.error.apply(Wn.console,arguments):D5(t))}};function M5(t,e,a){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){$A(r.response,e,a)},r.onerror=function(){io.error("could not download file")},r.send()}function qZ(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function OC(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var cR,sI,$A=Wn.saveAs||((typeof window>"u"?"undefined":Ls(window))!=="object"||window!==Wn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,a){var r=Wn.URL||Wn.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?qZ(s.href)?M5(t,e,a):OC(s,s.target="_blank"):OC(s)):(s.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(s.href)},4e4),setTimeout(function(){OC(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,a){if(e=e||t.name||"download",typeof t=="string")if(qZ(t))M5(t,e,a);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){OC(r)})}else navigator.msSaveOrOpenBlob(function(s,l){return l===void 0?l={autoBom:!1}:Ls(l)!=="object"&&(io.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(t,a),e)}:function(t,e,a,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return M5(t,e,a);var s=t.type==="application/octet-stream",l=/constructor/i.test(Wn.HTMLElement)||Wn.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent);if((h||s&&l)&&(typeof FileReader>"u"?"undefined":Ls(FileReader))==="object"){var n=new FileReader;n.onloadend=function(){var P=n.result;P=h?P:P.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=P:location=P,r=null},n.readAsDataURL(t)}else{var w=Wn.URL||Wn.webkitURL,T=w.createObjectURL(t);r?r.location=T:location.href=T,r=null,setTimeout(function(){w.revokeObjectURL(T)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function yQ(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var a=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(n){return[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(n){return[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(n){return[parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16)]}}],r=0;r<a.length;r++){var s=a[r].re,l=a[r].process,h=s.exec(t);h&&(e=l(h),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var n=this.r.toString(16),w=this.g.toString(16),T=this.b.toString(16);return n.length==1&&(n="0"+n),w.length==1&&(w="0"+w),T.length==1&&(T="0"+T),"#"+n+w+T}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function I5(t,e){var a=t[0],r=t[1],s=t[2],l=t[3];a=rd(a,r,s,l,e[0],7,-680876936),l=rd(l,a,r,s,e[1],12,-389564586),s=rd(s,l,a,r,e[2],17,606105819),r=rd(r,s,l,a,e[3],22,-1044525330),a=rd(a,r,s,l,e[4],7,-176418897),l=rd(l,a,r,s,e[5],12,1200080426),s=rd(s,l,a,r,e[6],17,-1473231341),r=rd(r,s,l,a,e[7],22,-45705983),a=rd(a,r,s,l,e[8],7,1770035416),l=rd(l,a,r,s,e[9],12,-1958414417),s=rd(s,l,a,r,e[10],17,-42063),r=rd(r,s,l,a,e[11],22,-1990404162),a=rd(a,r,s,l,e[12],7,1804603682),l=rd(l,a,r,s,e[13],12,-40341101),s=rd(s,l,a,r,e[14],17,-1502002290),a=nd(a,r=rd(r,s,l,a,e[15],22,1236535329),s,l,e[1],5,-165796510),l=nd(l,a,r,s,e[6],9,-1069501632),s=nd(s,l,a,r,e[11],14,643717713),r=nd(r,s,l,a,e[0],20,-373897302),a=nd(a,r,s,l,e[5],5,-701558691),l=nd(l,a,r,s,e[10],9,38016083),s=nd(s,l,a,r,e[15],14,-660478335),r=nd(r,s,l,a,e[4],20,-405537848),a=nd(a,r,s,l,e[9],5,568446438),l=nd(l,a,r,s,e[14],9,-1019803690),s=nd(s,l,a,r,e[3],14,-187363961),r=nd(r,s,l,a,e[8],20,1163531501),a=nd(a,r,s,l,e[13],5,-1444681467),l=nd(l,a,r,s,e[2],9,-51403784),s=nd(s,l,a,r,e[7],14,1735328473),a=id(a,r=nd(r,s,l,a,e[12],20,-1926607734),s,l,e[5],4,-378558),l=id(l,a,r,s,e[8],11,-2022574463),s=id(s,l,a,r,e[11],16,1839030562),r=id(r,s,l,a,e[14],23,-35309556),a=id(a,r,s,l,e[1],4,-1530992060),l=id(l,a,r,s,e[4],11,1272893353),s=id(s,l,a,r,e[7],16,-155497632),r=id(r,s,l,a,e[10],23,-1094730640),a=id(a,r,s,l,e[13],4,681279174),l=id(l,a,r,s,e[0],11,-358537222),s=id(s,l,a,r,e[3],16,-722521979),r=id(r,s,l,a,e[6],23,76029189),a=id(a,r,s,l,e[9],4,-640364487),l=id(l,a,r,s,e[12],11,-421815835),s=id(s,l,a,r,e[15],16,530742520),a=sd(a,r=id(r,s,l,a,e[2],23,-995338651),s,l,e[0],6,-198630844),l=sd(l,a,r,s,e[7],10,1126891415),s=sd(s,l,a,r,e[14],15,-1416354905),r=sd(r,s,l,a,e[5],21,-57434055),a=sd(a,r,s,l,e[12],6,1700485571),l=sd(l,a,r,s,e[3],10,-1894986606),s=sd(s,l,a,r,e[10],15,-1051523),r=sd(r,s,l,a,e[1],21,-2054922799),a=sd(a,r,s,l,e[8],6,1873313359),l=sd(l,a,r,s,e[15],10,-30611744),s=sd(s,l,a,r,e[6],15,-1560198380),r=sd(r,s,l,a,e[13],21,1309151649),a=sd(a,r,s,l,e[4],6,-145523070),l=sd(l,a,r,s,e[11],10,-1120210379),s=sd(s,l,a,r,e[2],15,718787259),r=sd(r,s,l,a,e[9],21,-343485551),t[0]=zg(a,t[0]),t[1]=zg(r,t[1]),t[2]=zg(s,t[2]),t[3]=zg(l,t[3])}function yP(t,e,a,r,s,l){return e=zg(zg(e,t),zg(r,l)),zg(e<<s|e>>>32-s,a)}function rd(t,e,a,r,s,l,h){return yP(e&a|~e&r,t,e,s,l,h)}function nd(t,e,a,r,s,l,h){return yP(e&r|a&~r,t,e,s,l,h)}function id(t,e,a,r,s,l,h){return yP(e^a^r,t,e,s,l,h)}function sd(t,e,a,r,s,l,h){return yP(a^(e|~r),t,e,s,l,h)}function gQ(t){var e,a=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)I5(r,kPe(t.substring(e-64,e)));t=t.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(I5(r,s),e=0;e<16;e++)s[e]=0;return s[14]=8*a,I5(r,s),r}function kPe(t){var e,a=[];for(e=0;e<64;e+=4)a[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return a}cR=Wn.atob.bind(Wn),sI=Wn.btoa.bind(Wn);var HZ="0123456789abcdef".split("");function BPe(t){for(var e="",a=0;a<4;a++)e+=HZ[t>>8*a+4&15]+HZ[t>>8*a&15];return e}function GPe(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function oI(t){return gQ(t).map(GPe).join("")}var jPe=function(t){for(var e=0;e<t.length;e++)t[e]=BPe(t[e]);return t.join("")}(gQ("hello"))!="5d41402abc4b2a76b9719d911017c592";function zg(t,e){if(jPe){var a=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(a>>16)<<16|65535&a}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function lI(t,e){var a,r,s,l;if(t!==a){for(var h=(s=t,l=1+(256/t.length>>0),new Array(l+1).join(s)),n=[],w=0;w<256;w++)n[w]=w;var T=0;for(w=0;w<256;w++){var P=n[w];T=(T+P+h.charCodeAt(w))%256,n[w]=n[T],n[T]=P}a=t,r=n}else n=r;var z=e.length,k=0,U=0,Z="";for(w=0;w<z;w++)U=(U+(P=n[k=(k+1)%256]))%256,n[k]=n[U],n[U]=P,h=n[(n[k]+n[U])%256],Z+=String.fromCharCode(e.charCodeAt(w)^h);return Z}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var $Z={print:4,modify:8,copy:16,"annot-forms":32};function O_(t,e,a,r){this.v=1,this.r=2;var s=192;t.forEach(function(n){if($Z.perm!==void 0)throw new Error("Invalid permission: "+n);s+=$Z[n]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var l=(e+this.padding).substr(0,32),h=(a+this.padding).substr(0,32);this.O=this.processOwnerPassword(l,h),this.P=-(1+(255^s)),this.encryptionKey=oI(l+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=lI(this.encryptionKey,this.padding)}function D_(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",a=t.length,r=0;r<a;r++){var s=t.charCodeAt(r);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?e+="#"+("0"+s.toString(16)).slice(-2):e+=t[r]}return e}function KZ(t){if(Ls(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(a,r,s){if(s=s||!1,typeof a!="string"||typeof r!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(a)||(e[a]={});var l=Math.random().toString(35);return e[a][l]=[r,!!s],l},this.unsubscribe=function(a){for(var r in e)if(e[r][a])return delete e[r][a],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(a){if(e.hasOwnProperty(a)){var r=Array.prototype.slice.call(arguments,1),s=[];for(var l in e[a]){var h=e[a][l];try{h[0].apply(t,r)}catch(n){Wn.console&&io.error("jsPDF PubSub Error",n.message,n)}h[1]&&s.push(l)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Lx(t){if(!(this instanceof Lx))return new Lx(t);var e="opacity,stroke-opacity".split(",");for(var a in t)t.hasOwnProperty(a)&&e.indexOf(a)>=0&&(this[a]=t[a]);this.id="",this.objectNumber=-1}function AQ(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function WA(t,e,a,r,s){if(!(this instanceof WA))return new WA(t,e,a,r,s);this.type=t==="axial"?2:3,this.coords=e,this.colors=a,AQ.call(this,r,s)}function j_(t,e,a,r,s){if(!(this instanceof j_))return new j_(t,e,a,r,s);this.boundingBox=t,this.xStep=e,this.yStep=a,this.stream="",this.cloneIndex=0,AQ.call(this,r,s)}function jn(t){var e,a=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],s=arguments[2],l=arguments[3],h=[],n=1,w=16,T="S",P=null;Ls(t=t||{})==="object"&&(a=t.orientation,r=t.unit||r,s=t.format||s,l=t.compress||t.compressPdf||l,(P=t.encryption||null)!==null&&(P.userPassword=P.userPassword||"",P.ownerPassword=P.ownerPassword||"",P.userPermissions=P.userPermissions||[]),n=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(w=t.floatPrecision),T=t.defaultPathOperation||"S"),h=t.filters||(l===!0?["FlateEncode"]:h),r=r||"mm",a=(""+(a||"P")).toLowerCase();var z=t.putOnlyUsedFonts||!1,k={},U={internal:{},__private__:{}};U.__private__.PubSub=KZ;var Z="1.3",H=U.__private__.getPdfVersion=function(){return Z};U.__private__.setPdfVersion=function(oe){Z=oe};var q={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};U.__private__.getPageFormats=function(){return q};var J=U.__private__.getPageFormat=function(oe){return q[oe]};s=s||"a4";var re={COMPAT:"compat",ADVANCED:"advanced"},ce=re.COMPAT;function ye(){this.saveGraphicsState(),vt(new Oe(ca,0,0,-ca,0,Yl()*ca).toString()+" cm"),this.setFontSize(this.getFontSize()/ca),T="n",ce=re.ADVANCED}function he(){this.restoreGraphicsState(),T="S",ce=re.COMPAT}var _e=U.__private__.combineFontStyleAndFontWeight=function(oe,Ke){if(oe=="bold"&&Ke=="normal"||oe=="bold"&&Ke==400||oe=="normal"&&Ke=="italic"||oe=="bold"&&Ke=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ke&&(oe=Ke==400||Ke==="normal"?oe==="italic"?"italic":"normal":Ke!=700&&Ke!=="bold"||oe!=="normal"?(Ke==700?"bold":Ke)+""+oe:"bold"),oe};U.advancedAPI=function(oe){var Ke=ce===re.COMPAT;return Ke&&ye.call(this),typeof oe!="function"||(oe(this),Ke&&he.call(this)),this},U.compatAPI=function(oe){var Ke=ce===re.ADVANCED;return Ke&&he.call(this),typeof oe!="function"||(oe(this),Ke&&ye.call(this)),this},U.isAdvancedAPI=function(){return ce===re.ADVANCED};var me,Re=function(oe){if(ce!==re.ADVANCED)throw new Error(oe+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},be=U.roundToPrecision=U.__private__.roundToPrecision=function(oe,Ke){var Dt=e||Ke;if(isNaN(oe)||isNaN(Dt))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return oe.toFixed(Dt).replace(/0+$/,"")};me=U.hpf=U.__private__.hpf=typeof w=="number"?function(oe){if(isNaN(oe))throw new Error("Invalid argument passed to jsPDF.hpf");return be(oe,w)}:w==="smart"?function(oe){if(isNaN(oe))throw new Error("Invalid argument passed to jsPDF.hpf");return be(oe,oe>-1&&oe<1?16:5)}:function(oe){if(isNaN(oe))throw new Error("Invalid argument passed to jsPDF.hpf");return be(oe,16)};var De=U.f2=U.__private__.f2=function(oe){if(isNaN(oe))throw new Error("Invalid argument passed to jsPDF.f2");return be(oe,2)},ie=U.__private__.f3=function(oe){if(isNaN(oe))throw new Error("Invalid argument passed to jsPDF.f3");return be(oe,3)},ge=U.scale=U.__private__.scale=function(oe){if(isNaN(oe))throw new Error("Invalid argument passed to jsPDF.scale");return ce===re.COMPAT?oe*ca:ce===re.ADVANCED?oe:void 0},Me=function(oe){return ce===re.COMPAT?Yl()-oe:ce===re.ADVANCED?oe:void 0},ze=function(oe){return ge(Me(oe))};U.__private__.setPrecision=U.setPrecision=function(oe){typeof parseInt(oe,10)=="number"&&(e=parseInt(oe,10))};var Le,Ie="00000000000000000000000000000000",Ze=U.__private__.getFileId=function(){return Ie},ke=U.__private__.setFileId=function(oe){return Ie=oe!==void 0&&/^[a-fA-F0-9]{32}$/.test(oe)?oe.toUpperCase():Ie.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),P!==null&&(lo=new O_(P.userPermissions,P.userPassword,P.ownerPassword,Ie)),Ie};U.setFileId=function(oe){return ke(oe),this},U.getFileId=function(){return Ze()};var tt=U.__private__.convertDateToPDFDate=function(oe){var Ke=oe.getTimezoneOffset(),Dt=Ke<0?"+":"-",Yt=Math.floor(Math.abs(Ke/60)),ha=Math.abs(Ke%60),Da=[Dt,$e(Yt),"'",$e(ha),"'"].join("");return["D:",oe.getFullYear(),$e(oe.getMonth()+1),$e(oe.getDate()),$e(oe.getHours()),$e(oe.getMinutes()),$e(oe.getSeconds()),Da].join("")},Ue=U.__private__.convertPDFDateToDate=function(oe){var Ke=parseInt(oe.substr(2,4),10),Dt=parseInt(oe.substr(6,2),10)-1,Yt=parseInt(oe.substr(8,2),10),ha=parseInt(oe.substr(10,2),10),Da=parseInt(oe.substr(12,2),10),rr=parseInt(oe.substr(14,2),10);return new Date(Ke,Dt,Yt,ha,Da,rr,0)},He=U.__private__.setCreationDate=function(oe){var Ke;if(oe===void 0&&(oe=new Date),oe instanceof Date)Ke=tt(oe);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(oe))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ke=oe}return Le=Ke},Ce=U.__private__.getCreationDate=function(oe){var Ke=Le;return oe==="jsDate"&&(Ke=Ue(Le)),Ke};U.setCreationDate=function(oe){return He(oe),this},U.getCreationDate=function(oe){return Ce(oe)};var Se,$e=U.__private__.padd2=function(oe){return("0"+parseInt(oe)).slice(-2)},ht=U.__private__.padd2Hex=function(oe){return("00"+(oe=oe.toString())).substr(oe.length)},ft=0,ut=[],Rt=[],We=0,Ae=[],qt=[],Gt=!1,Aa=Rt,It=function(){ft=0,We=0,Rt=[],ut=[],Ae=[],Kt=Bt(),Ht=Bt()};U.__private__.setCustomOutputDestination=function(oe){Gt=!0,Aa=oe};var ta=function(oe){Gt||(Aa=oe)};U.__private__.resetCustomOutputDestination=function(){Gt=!1,Aa=Rt};var vt=U.__private__.out=function(oe){return oe=oe.toString(),We+=oe.length+1,Aa.push(oe),Aa},or=U.__private__.write=function(oe){return vt(arguments.length===1?oe.toString():Array.prototype.join.call(arguments," "))},Na=U.__private__.getArrayBuffer=function(oe){for(var Ke=oe.length,Dt=new ArrayBuffer(Ke),Yt=new Uint8Array(Dt);Ke--;)Yt[Ke]=oe.charCodeAt(Ke);return Dt},za=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];U.__private__.getStandardFonts=function(){return za};var er=t.fontSize||16;U.__private__.setFontSize=U.setFontSize=function(oe){return er=ce===re.ADVANCED?oe/ca:oe,this};var dr,cr=U.__private__.getFontSize=U.getFontSize=function(){return ce===re.COMPAT?er:er*ca},Pr=t.R2L||!1;U.__private__.setR2L=U.setR2L=function(oe){return Pr=oe,this},U.__private__.getR2L=U.getR2L=function(){return Pr};var ka,jr=U.__private__.setZoomMode=function(oe){var Ke=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(oe))dr=oe;else if(isNaN(oe)){if(Ke.indexOf(oe)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+oe+'" is not recognized.');dr=oe}else dr=parseInt(oe,10)};U.__private__.getZoomMode=function(){return dr};var pn,Dn=U.__private__.setPageMode=function(oe){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(oe)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+oe+'" is not recognized.');ka=oe};U.__private__.getPageMode=function(){return ka};var Rn=U.__private__.setLayoutMode=function(oe){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(oe)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+oe+'" is not recognized.');pn=oe};U.__private__.getLayoutMode=function(){return pn},U.__private__.setDisplayMode=U.setDisplayMode=function(oe,Ke,Dt){return jr(oe),Rn(Ke),Dn(Dt),this};var wa={title:"",subject:"",author:"",keywords:"",creator:""};U.__private__.getDocumentProperty=function(oe){if(Object.keys(wa).indexOf(oe)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return wa[oe]},U.__private__.getDocumentProperties=function(){return wa},U.__private__.setDocumentProperties=U.setProperties=U.setDocumentProperties=function(oe){for(var Ke in wa)wa.hasOwnProperty(Ke)&&oe[Ke]&&(wa[Ke]=oe[Ke]);return this},U.__private__.setDocumentProperty=function(oe,Ke){if(Object.keys(wa).indexOf(oe)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return wa[oe]=Ke};var Wa,ca,Qa,gr,qn,Mn={},mn={},en=[],Er={},As={},Bi={},Qi={},Oo=null,Ni=0,fn=[],ui=new KZ(U),Vc=t.hotfixes||[],Us={},Jt={},xe=[],Oe=function oe(Ke,Dt,Yt,ha,Da,rr){if(!(this instanceof oe))return new oe(Ke,Dt,Yt,ha,Da,rr);isNaN(Ke)&&(Ke=1),isNaN(Dt)&&(Dt=0),isNaN(Yt)&&(Yt=0),isNaN(ha)&&(ha=1),isNaN(Da)&&(Da=0),isNaN(rr)&&(rr=0),this._matrix=[Ke,Dt,Yt,ha,Da,rr]};Object.defineProperty(Oe.prototype,"sx",{get:function(){return this._matrix[0]},set:function(oe){this._matrix[0]=oe}}),Object.defineProperty(Oe.prototype,"shy",{get:function(){return this._matrix[1]},set:function(oe){this._matrix[1]=oe}}),Object.defineProperty(Oe.prototype,"shx",{get:function(){return this._matrix[2]},set:function(oe){this._matrix[2]=oe}}),Object.defineProperty(Oe.prototype,"sy",{get:function(){return this._matrix[3]},set:function(oe){this._matrix[3]=oe}}),Object.defineProperty(Oe.prototype,"tx",{get:function(){return this._matrix[4]},set:function(oe){this._matrix[4]=oe}}),Object.defineProperty(Oe.prototype,"ty",{get:function(){return this._matrix[5]},set:function(oe){this._matrix[5]=oe}}),Object.defineProperty(Oe.prototype,"a",{get:function(){return this._matrix[0]},set:function(oe){this._matrix[0]=oe}}),Object.defineProperty(Oe.prototype,"b",{get:function(){return this._matrix[1]},set:function(oe){this._matrix[1]=oe}}),Object.defineProperty(Oe.prototype,"c",{get:function(){return this._matrix[2]},set:function(oe){this._matrix[2]=oe}}),Object.defineProperty(Oe.prototype,"d",{get:function(){return this._matrix[3]},set:function(oe){this._matrix[3]=oe}}),Object.defineProperty(Oe.prototype,"e",{get:function(){return this._matrix[4]},set:function(oe){this._matrix[4]=oe}}),Object.defineProperty(Oe.prototype,"f",{get:function(){return this._matrix[5]},set:function(oe){this._matrix[5]=oe}}),Object.defineProperty(Oe.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Oe.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Oe.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Oe.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Oe.prototype.join=function(oe){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(me).join(oe)},Oe.prototype.multiply=function(oe){var Ke=oe.sx*this.sx+oe.shy*this.shx,Dt=oe.sx*this.shy+oe.shy*this.sy,Yt=oe.shx*this.sx+oe.sy*this.shx,ha=oe.shx*this.shy+oe.sy*this.sy,Da=oe.tx*this.sx+oe.ty*this.shx+this.tx,rr=oe.tx*this.shy+oe.ty*this.sy+this.ty;return new Oe(Ke,Dt,Yt,ha,Da,rr)},Oe.prototype.decompose=function(){var oe=this.sx,Ke=this.shy,Dt=this.shx,Yt=this.sy,ha=this.tx,Da=this.ty,rr=Math.sqrt(oe*oe+Ke*Ke),wr=(oe/=rr)*Dt+(Ke/=rr)*Yt;Dt-=oe*wr,Yt-=Ke*wr;var $r=Math.sqrt(Dt*Dt+Yt*Yt);return wr/=$r,oe*(Yt/=$r)<Ke*(Dt/=$r)&&(oe=-oe,Ke=-Ke,wr=-wr,rr=-rr),{scale:new Oe(rr,0,0,$r,0,0),translate:new Oe(1,0,0,1,ha,Da),rotate:new Oe(oe,Ke,-Ke,oe,0,0),skew:new Oe(1,0,wr,1,0,0)}},Oe.prototype.toString=function(oe){return this.join(" ")},Oe.prototype.inversed=function(){var oe=this.sx,Ke=this.shy,Dt=this.shx,Yt=this.sy,ha=this.tx,Da=this.ty,rr=1/(oe*Yt-Ke*Dt),wr=Yt*rr,$r=-Ke*rr,Sn=-Dt*rr,Nn=oe*rr;return new Oe(wr,$r,Sn,Nn,-wr*ha-Sn*Da,-$r*ha-Nn*Da)},Oe.prototype.applyToPoint=function(oe){var Ke=oe.x*this.sx+oe.y*this.shx+this.tx,Dt=oe.x*this.shy+oe.y*this.sy+this.ty;return new gu(Ke,Dt)},Oe.prototype.applyToRectangle=function(oe){var Ke=this.applyToPoint(oe),Dt=this.applyToPoint(new gu(oe.x+oe.w,oe.y+oe.h));return new Au(Ke.x,Ke.y,Dt.x-Ke.x,Dt.y-Ke.y)},Oe.prototype.clone=function(){var oe=this.sx,Ke=this.shy,Dt=this.shx,Yt=this.sy,ha=this.tx,Da=this.ty;return new Oe(oe,Ke,Dt,Yt,ha,Da)},U.Matrix=Oe;var rt=U.matrixMult=function(oe,Ke){return Ke.multiply(oe)},_t=new Oe(1,0,0,1,0,0);U.unitMatrix=U.identityMatrix=_t;var yt=function(oe,Ke){if(!As[oe]){var Dt=(Ke instanceof WA?"Sh":"P")+(Object.keys(Er).length+1).toString(10);Ke.id=Dt,As[oe]=Dt,Er[Dt]=Ke,ui.publish("addPattern",Ke)}};U.ShadingPattern=WA,U.TilingPattern=j_,U.addShadingPattern=function(oe,Ke){return Re("addShadingPattern()"),yt(oe,Ke),this},U.beginTilingPattern=function(oe){Re("beginTilingPattern()"),Wl(oe.boundingBox[0],oe.boundingBox[1],oe.boundingBox[2]-oe.boundingBox[0],oe.boundingBox[3]-oe.boundingBox[1],oe.matrix)},U.endTilingPattern=function(oe,Ke){Re("endTilingPattern()"),Ke.stream=qt[Se].join(`
`),yt(oe,Ke),ui.publish("endTilingPattern",Ke),xe.pop().restore()};var bt=U.__private__.newObject=function(){var oe=Bt();return Et(oe,!0),oe},Bt=U.__private__.newObjectDeferred=function(){return ft++,ut[ft]=function(){return We},ft},Et=function(oe,Ke){return Ke=typeof Ke=="boolean"&&Ke,ut[oe]=We,Ke&&vt(oe+" 0 obj"),oe},$t=U.__private__.newAdditionalObject=function(){var oe={objId:Bt(),content:""};return Ae.push(oe),oe},Kt=Bt(),Ht=Bt(),Ta=U.__private__.decodeColorString=function(oe){var Ke=oe.split(" ");if(Ke.length!==2||Ke[1]!=="g"&&Ke[1]!=="G")Ke.length===5&&(Ke[4]==="k"||Ke[4]==="K")&&(Ke=[(1-Ke[0])*(1-Ke[3]),(1-Ke[1])*(1-Ke[3]),(1-Ke[2])*(1-Ke[3]),"r"]);else{var Dt=parseFloat(Ke[0]);Ke=[Dt,Dt,Dt,"r"]}for(var Yt="#",ha=0;ha<3;ha++)Yt+=("0"+Math.floor(255*parseFloat(Ke[ha])).toString(16)).slice(-2);return Yt},Ma=U.__private__.encodeColorString=function(oe){var Ke;typeof oe=="string"&&(oe={ch1:oe});var Dt=oe.ch1,Yt=oe.ch2,ha=oe.ch3,Da=oe.ch4,rr=oe.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Dt=="string"&&Dt.charAt(0)!=="#"){var wr=new yQ(Dt);if(wr.ok)Dt=wr.toHex();else if(!/^\d*\.?\d*$/.test(Dt))throw new Error('Invalid color "'+Dt+'" passed to jsPDF.encodeColorString.')}if(typeof Dt=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Dt)&&(Dt="#"+Dt[1]+Dt[1]+Dt[2]+Dt[2]+Dt[3]+Dt[3]),typeof Dt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Dt)){var $r=parseInt(Dt.substr(1),16);Dt=$r>>16&255,Yt=$r>>8&255,ha=255&$r}if(Yt===void 0||Da===void 0&&Dt===Yt&&Yt===ha)if(typeof Dt=="string")Ke=Dt+" "+rr[0];else switch(oe.precision){case 2:Ke=De(Dt/255)+" "+rr[0];break;case 3:default:Ke=ie(Dt/255)+" "+rr[0]}else if(Da===void 0||Ls(Da)==="object"){if(Da&&!isNaN(Da.a)&&Da.a===0)return Ke=["1.","1.","1.",rr[1]].join(" ");if(typeof Dt=="string")Ke=[Dt,Yt,ha,rr[1]].join(" ");else switch(oe.precision){case 2:Ke=[De(Dt/255),De(Yt/255),De(ha/255),rr[1]].join(" ");break;default:case 3:Ke=[ie(Dt/255),ie(Yt/255),ie(ha/255),rr[1]].join(" ")}}else if(typeof Dt=="string")Ke=[Dt,Yt,ha,Da,rr[2]].join(" ");else switch(oe.precision){case 2:Ke=[De(Dt),De(Yt),De(ha),De(Da),rr[2]].join(" ");break;case 3:default:Ke=[ie(Dt),ie(Yt),ie(ha),ie(Da),rr[2]].join(" ")}return Ke},Ba=U.__private__.getFilters=function(){return h},_r=U.__private__.putStream=function(oe){var Ke=(oe=oe||{}).data||"",Dt=oe.filters||Ba(),Yt=oe.alreadyAppliedFilters||[],ha=oe.addLength1||!1,Da=Ke.length,rr=oe.objectId,wr=function(es){return es};if(P!==null&&rr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");P!==null&&(wr=lo.encryptor(rr,0));var $r={};Dt===!0&&(Dt=["FlateEncode"]);var Sn=oe.additionalKeyValues||[],Nn=($r=jn.API.processDataByFilters!==void 0?jn.API.processDataByFilters(Ke,Dt):{data:Ke,reverseChain:[]}).reverseChain+(Array.isArray(Yt)?Yt.join(" "):Yt.toString());if($r.data.length!==0&&(Sn.push({key:"Length",value:$r.data.length}),ha===!0&&Sn.push({key:"Length1",value:Da})),Nn.length!=0)if(Nn.split("/").length-1==1)Sn.push({key:"Filter",value:Nn});else{Sn.push({key:"Filter",value:"["+Nn+"]"});for(var mi=0;mi<Sn.length;mi+=1)if(Sn[mi].key==="DecodeParms"){for(var Ss=[],Cs=0;Cs<$r.reverseChain.split("/").length-1;Cs+=1)Ss.push("null");Ss.push(Sn[mi].value),Sn[mi].value="["+Ss.join(" ")+"]"}}vt("<<");for(var Js=0;Js<Sn.length;Js++)vt("/"+Sn[Js].key+" "+Sn[Js].value);vt(">>"),$r.data.length!==0&&(vt("stream"),vt(wr($r.data)),vt("endstream"))},Nr=U.__private__.putPage=function(oe){var Ke=oe.number,Dt=oe.data,Yt=oe.objId,ha=oe.contentsObjId;Et(Yt,!0),vt("<</Type /Page"),vt("/Parent "+oe.rootDictionaryObjId+" 0 R"),vt("/Resources "+oe.resourceDictionaryObjId+" 0 R"),vt("/MediaBox ["+parseFloat(me(oe.mediaBox.bottomLeftX))+" "+parseFloat(me(oe.mediaBox.bottomLeftY))+" "+me(oe.mediaBox.topRightX)+" "+me(oe.mediaBox.topRightY)+"]"),oe.cropBox!==null&&vt("/CropBox ["+me(oe.cropBox.bottomLeftX)+" "+me(oe.cropBox.bottomLeftY)+" "+me(oe.cropBox.topRightX)+" "+me(oe.cropBox.topRightY)+"]"),oe.bleedBox!==null&&vt("/BleedBox ["+me(oe.bleedBox.bottomLeftX)+" "+me(oe.bleedBox.bottomLeftY)+" "+me(oe.bleedBox.topRightX)+" "+me(oe.bleedBox.topRightY)+"]"),oe.trimBox!==null&&vt("/TrimBox ["+me(oe.trimBox.bottomLeftX)+" "+me(oe.trimBox.bottomLeftY)+" "+me(oe.trimBox.topRightX)+" "+me(oe.trimBox.topRightY)+"]"),oe.artBox!==null&&vt("/ArtBox ["+me(oe.artBox.bottomLeftX)+" "+me(oe.artBox.bottomLeftY)+" "+me(oe.artBox.topRightX)+" "+me(oe.artBox.topRightY)+"]"),typeof oe.userUnit=="number"&&oe.userUnit!==1&&vt("/UserUnit "+oe.userUnit),ui.publish("putPage",{objId:Yt,pageContext:fn[Ke],pageNumber:Ke,page:Dt}),vt("/Contents "+ha+" 0 R"),vt(">>"),vt("endobj");var Da=Dt.join(`
`);return ce===re.ADVANCED&&(Da+=`
Q`),Et(ha,!0),_r({data:Da,filters:Ba(),objectId:ha}),vt("endobj"),Yt},Vr=U.__private__.putPages=function(){var oe,Ke,Dt=[];for(oe=1;oe<=Ni;oe++)fn[oe].objId=Bt(),fn[oe].contentsObjId=Bt();for(oe=1;oe<=Ni;oe++)Dt.push(Nr({number:oe,data:qt[oe],objId:fn[oe].objId,contentsObjId:fn[oe].contentsObjId,mediaBox:fn[oe].mediaBox,cropBox:fn[oe].cropBox,bleedBox:fn[oe].bleedBox,trimBox:fn[oe].trimBox,artBox:fn[oe].artBox,userUnit:fn[oe].userUnit,rootDictionaryObjId:Kt,resourceDictionaryObjId:Ht}));Et(Kt,!0),vt("<</Type /Pages");var Yt="/Kids [";for(Ke=0;Ke<Ni;Ke++)Yt+=Dt[Ke]+" 0 R ";vt(Yt+"]"),vt("/Count "+Ni),vt(">>"),vt("endobj"),ui.publish("postPutPages")},Gr=function(oe){ui.publish("putFont",{font:oe,out:vt,newObject:bt,putStream:_r}),oe.isAlreadyPutted!==!0&&(oe.objectNumber=bt(),vt("<<"),vt("/Type /Font"),vt("/BaseFont /"+D_(oe.postScriptName)),vt("/Subtype /Type1"),typeof oe.encoding=="string"&&vt("/Encoding /"+oe.encoding),vt("/FirstChar 32"),vt("/LastChar 255"),vt(">>"),vt("endobj"))},zn=function(){for(var oe in Mn)Mn.hasOwnProperty(oe)&&(z===!1||z===!0&&k.hasOwnProperty(oe))&&Gr(Mn[oe])},Jn=function(oe){oe.objectNumber=bt();var Ke=[];Ke.push({key:"Type",value:"/XObject"}),Ke.push({key:"Subtype",value:"/Form"}),Ke.push({key:"BBox",value:"["+[me(oe.x),me(oe.y),me(oe.x+oe.width),me(oe.y+oe.height)].join(" ")+"]"}),Ke.push({key:"Matrix",value:"["+oe.matrix.toString()+"]"});var Dt=oe.pages[1].join(`
`);_r({data:Dt,additionalKeyValues:Ke,objectId:oe.objectNumber}),vt("endobj")},qr=function(){for(var oe in Us)Us.hasOwnProperty(oe)&&Jn(Us[oe])},yn=function(oe,Ke){var Dt,Yt=[],ha=1/(Ke-1);for(Dt=0;Dt<1;Dt+=ha)Yt.push(Dt);if(Yt.push(1),oe[0].offset!=0){var Da={offset:0,color:oe[0].color};oe.unshift(Da)}if(oe[oe.length-1].offset!=1){var rr={offset:1,color:oe[oe.length-1].color};oe.push(rr)}for(var wr="",$r=0,Sn=0;Sn<Yt.length;Sn++){for(Dt=Yt[Sn];Dt>oe[$r+1].offset;)$r++;var Nn=oe[$r].offset,mi=(Dt-Nn)/(oe[$r+1].offset-Nn),Ss=oe[$r].color,Cs=oe[$r+1].color;wr+=ht(Math.round((1-mi)*Ss[0]+mi*Cs[0]).toString(16))+ht(Math.round((1-mi)*Ss[1]+mi*Cs[1]).toString(16))+ht(Math.round((1-mi)*Ss[2]+mi*Cs[2]).toString(16))}return wr.trim()},Hr=function(oe,Ke){Ke||(Ke=21);var Dt=bt(),Yt=yn(oe.colors,Ke),ha=[];ha.push({key:"FunctionType",value:"0"}),ha.push({key:"Domain",value:"[0.0 1.0]"}),ha.push({key:"Size",value:"["+Ke+"]"}),ha.push({key:"BitsPerSample",value:"8"}),ha.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ha.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),_r({data:Yt,additionalKeyValues:ha,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Dt}),vt("endobj"),oe.objectNumber=bt(),vt("<< /ShadingType "+oe.type),vt("/ColorSpace /DeviceRGB");var Da="/Coords ["+me(parseFloat(oe.coords[0]))+" "+me(parseFloat(oe.coords[1]))+" ";oe.type===2?Da+=me(parseFloat(oe.coords[2]))+" "+me(parseFloat(oe.coords[3])):Da+=me(parseFloat(oe.coords[2]))+" "+me(parseFloat(oe.coords[3]))+" "+me(parseFloat(oe.coords[4]))+" "+me(parseFloat(oe.coords[5])),vt(Da+="]"),oe.matrix&&vt("/Matrix ["+oe.matrix.toString()+"]"),vt("/Function "+Dt+" 0 R"),vt("/Extend [true true]"),vt(">>"),vt("endobj")},In=function(oe,Ke){var Dt=Bt(),Yt=bt();Ke.push({resourcesOid:Dt,objectOid:Yt}),oe.objectNumber=Yt;var ha=[];ha.push({key:"Type",value:"/Pattern"}),ha.push({key:"PatternType",value:"1"}),ha.push({key:"PaintType",value:"1"}),ha.push({key:"TilingType",value:"1"}),ha.push({key:"BBox",value:"["+oe.boundingBox.map(me).join(" ")+"]"}),ha.push({key:"XStep",value:me(oe.xStep)}),ha.push({key:"YStep",value:me(oe.yStep)}),ha.push({key:"Resources",value:Dt+" 0 R"}),oe.matrix&&ha.push({key:"Matrix",value:"["+oe.matrix.toString()+"]"}),_r({data:oe.stream,additionalKeyValues:ha,objectId:oe.objectNumber}),vt("endobj")},Vi=function(oe){var Ke;for(Ke in Er)Er.hasOwnProperty(Ke)&&(Er[Ke]instanceof WA?Hr(Er[Ke]):Er[Ke]instanceof j_&&In(Er[Ke],oe))},Gi=function(oe){for(var Ke in oe.objectNumber=bt(),vt("<<"),oe)switch(Ke){case"opacity":vt("/ca "+De(oe[Ke]));break;case"stroke-opacity":vt("/CA "+De(oe[Ke]))}vt(">>"),vt("endobj")},_s=function(){var oe;for(oe in Bi)Bi.hasOwnProperty(oe)&&Gi(Bi[oe])},vs=function(){for(var oe in vt("/XObject <<"),Us)Us.hasOwnProperty(oe)&&Us[oe].objectNumber>=0&&vt("/"+oe+" "+Us[oe].objectNumber+" 0 R");ui.publish("putXobjectDict"),vt(">>")},Do=function(){lo.oid=bt(),vt("<<"),vt("/Filter /Standard"),vt("/V "+lo.v),vt("/R "+lo.r),vt("/U <"+lo.toHexString(lo.U)+">"),vt("/O <"+lo.toHexString(lo.O)+">"),vt("/P "+lo.P),vt(">>"),vt("endobj")},ws=function(){for(var oe in vt("/Font <<"),Mn)Mn.hasOwnProperty(oe)&&(z===!1||z===!0&&k.hasOwnProperty(oe))&&vt("/"+oe+" "+Mn[oe].objectNumber+" 0 R");vt(">>")},ks=function(){if(Object.keys(Er).length>0){for(var oe in vt("/Shading <<"),Er)Er.hasOwnProperty(oe)&&Er[oe]instanceof WA&&Er[oe].objectNumber>=0&&vt("/"+oe+" "+Er[oe].objectNumber+" 0 R");ui.publish("putShadingPatternDict"),vt(">>")}},sc=function(oe){if(Object.keys(Er).length>0){for(var Ke in vt("/Pattern <<"),Er)Er.hasOwnProperty(Ke)&&Er[Ke]instanceof U.TilingPattern&&Er[Ke].objectNumber>=0&&Er[Ke].objectNumber<oe&&vt("/"+Ke+" "+Er[Ke].objectNumber+" 0 R");ui.publish("putTilingPatternDict"),vt(">>")}},Wo=function(){if(Object.keys(Bi).length>0){var oe;for(oe in vt("/ExtGState <<"),Bi)Bi.hasOwnProperty(oe)&&Bi[oe].objectNumber>=0&&vt("/"+oe+" "+Bi[oe].objectNumber+" 0 R");ui.publish("putGStateDict"),vt(">>")}},zi=function(oe){Et(oe.resourcesOid,!0),vt("<<"),vt("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ws(),ks(),sc(oe.objectOid),Wo(),vs(),vt(">>"),vt("endobj")},ql=function(){var oe=[];zn(),_s(),qr(),Vi(oe),ui.publish("putResources"),oe.forEach(zi),zi({resourcesOid:Ht,objectOid:Number.MAX_SAFE_INTEGER}),ui.publish("postPutResources")},Mo=function(){ui.publish("putAdditionalObjects");for(var oe=0;oe<Ae.length;oe++){var Ke=Ae[oe];Et(Ke.objId,!0),vt(Ke.content),vt("endobj")}ui.publish("postPutAdditionalObjects")},wd=function(oe){mn[oe.fontName]=mn[oe.fontName]||{},mn[oe.fontName][oe.fontStyle]=oe.id},zc=function(oe,Ke,Dt,Yt,ha){var Da={id:"F"+(Object.keys(Mn).length+1).toString(10),postScriptName:oe,fontName:Ke,fontStyle:Dt,encoding:Yt,isStandardFont:ha||!1,metadata:{}};return ui.publish("addFont",{font:Da,instance:this}),Mn[Da.id]=Da,wd(Da),Da.id},ih=function(oe){for(var Ke=0,Dt=za.length;Ke<Dt;Ke++){var Yt=zc.call(this,oe[Ke][0],oe[Ke][1],oe[Ke][2],za[Ke][3],!0);z===!1&&(k[Yt]=!0);var ha=oe[Ke][0].split("-");wd({id:Yt,fontName:ha[0],fontStyle:ha[1]||""})}ui.publish("addFonts",{fonts:Mn,dictionary:mn})},pu=function(oe){return oe.foo=function(){try{return oe.apply(this,arguments)}catch(Yt){var Ke=Yt.stack||"";~Ke.indexOf(" at ")&&(Ke=Ke.split(" at ")[1]);var Dt="Error in function "+Ke.split(`
`)[0].split("<")[0]+": "+Yt.message;if(!Wn.console)throw new Error(Dt);Wn.console.error(Dt,Yt),Wn.alert&&alert(Dt)}},oe.foo.bar=oe,oe.foo},Oc=function(oe,Ke){var Dt,Yt,ha,Da,rr,wr,$r,Sn,Nn;if(ha=(Ke=Ke||{}).sourceEncoding||"Unicode",rr=Ke.outputEncoding,(Ke.autoencode||rr)&&Mn[Wa].metadata&&Mn[Wa].metadata[ha]&&Mn[Wa].metadata[ha].encoding&&(Da=Mn[Wa].metadata[ha].encoding,!rr&&Mn[Wa].encoding&&(rr=Mn[Wa].encoding),!rr&&Da.codePages&&(rr=Da.codePages[0]),typeof rr=="string"&&(rr=Da[rr]),rr)){for($r=!1,wr=[],Dt=0,Yt=oe.length;Dt<Yt;Dt++)(Sn=rr[oe.charCodeAt(Dt)])?wr.push(String.fromCharCode(Sn)):wr.push(oe[Dt]),wr[Dt].charCodeAt(0)>>8&&($r=!0);oe=wr.join("")}for(Dt=oe.length;$r===void 0&&Dt!==0;)oe.charCodeAt(Dt-1)>>8&&($r=!0),Dt--;if(!$r)return oe;for(wr=Ke.noBOM?[]:[254,255],Dt=0,Yt=oe.length;Dt<Yt;Dt++){if((Nn=(Sn=oe.charCodeAt(Dt))>>8)>>8)throw new Error("Character at position "+Dt+" of string '"+oe+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");wr.push(Nn),wr.push(Sn-(Nn<<8))}return String.fromCharCode.apply(void 0,wr)},hl=U.__private__.pdfEscape=U.pdfEscape=function(oe,Ke){return Oc(oe,Ke).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Xs=U.__private__.beginPage=function(oe){qt[++Ni]=[],fn[Ni]={objId:0,contentsObjId:0,userUnit:Number(n),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(oe[0]),topRightY:Number(oe[1])}},mu(Ni),ta(qt[Se])},Io=function(oe,Ke){var Dt,Yt,ha;switch(a=Ke||a,typeof oe=="string"&&(Dt=J(oe.toLowerCase()),Array.isArray(Dt)&&(Yt=Dt[0],ha=Dt[1])),Array.isArray(oe)&&(Yt=oe[0]*ca,ha=oe[1]*ca),isNaN(Yt)&&(Yt=s[0],ha=s[1]),(Yt>14400||ha>14400)&&(io.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Yt=Math.min(14400,Yt),ha=Math.min(14400,ha)),s=[Yt,ha],a.substr(0,1)){case"l":ha>Yt&&(s=[ha,Yt]);break;case"p":Yt>ha&&(s=[ha,Yt])}Xs(s),Sd(bi),vt(xl),Dh!==0&&vt(Dh+" J"),ko!==0&&vt(ko+" j"),ui.publish("addPage",{pageNumber:Ni})},Hl=function(oe){oe>0&&oe<=Ni&&(qt.splice(oe,1),fn.splice(oe,1),Ni--,Se>Ni&&(Se=Ni),this.setPage(Se))},mu=function(oe){oe>0&&oe<=Ni&&(Se=oe)},oo=U.__private__.getNumberOfPages=U.getNumberOfPages=function(){return qt.length-1},Lo=function(oe,Ke,Dt){var Yt,ha=void 0;return Dt=Dt||{},oe=oe!==void 0?oe:Mn[Wa].fontName,Ke=Ke!==void 0?Ke:Mn[Wa].fontStyle,Yt=oe.toLowerCase(),mn[Yt]!==void 0&&mn[Yt][Ke]!==void 0?ha=mn[Yt][Ke]:mn[oe]!==void 0&&mn[oe][Ke]!==void 0?ha=mn[oe][Ke]:Dt.disableWarning===!1&&io.warn("Unable to look up font label for font '"+oe+"', '"+Ke+"'. Refer to getFontList() for available fonts."),ha||Dt.noFallback||(ha=mn.times[Ke])==null&&(ha=mn.times.normal),ha},Rd=U.__private__.putInfo=function(){var oe=bt(),Ke=function(Yt){return Yt};for(var Dt in P!==null&&(Ke=lo.encryptor(oe,0)),vt("<<"),vt("/Producer ("+hl(Ke("jsPDF "+jn.version))+")"),wa)wa.hasOwnProperty(Dt)&&wa[Dt]&&vt("/"+Dt.substr(0,1).toUpperCase()+Dt.substr(1)+" ("+hl(Ke(wa[Dt]))+")");vt("/CreationDate ("+hl(Ke(Le))+")"),vt(">>"),vt("endobj")},ku=U.__private__.putCatalog=function(oe){var Ke=(oe=oe||{}).rootDictionaryObjId||Kt;switch(bt(),vt("<<"),vt("/Type /Catalog"),vt("/Pages "+Ke+" 0 R"),dr||(dr="fullwidth"),dr){case"fullwidth":vt("/OpenAction [3 0 R /FitH null]");break;case"fullheight":vt("/OpenAction [3 0 R /FitV null]");break;case"fullpage":vt("/OpenAction [3 0 R /Fit]");break;case"original":vt("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Dt=""+dr;Dt.substr(Dt.length-1)==="%"&&(dr=parseInt(dr)/100),typeof dr=="number"&&vt("/OpenAction [3 0 R /XYZ null null "+De(dr)+"]")}switch(pn||(pn="continuous"),pn){case"continuous":vt("/PageLayout /OneColumn");break;case"single":vt("/PageLayout /SinglePage");break;case"two":case"twoleft":vt("/PageLayout /TwoColumnLeft");break;case"tworight":vt("/PageLayout /TwoColumnRight")}ka&&vt("/PageMode /"+ka),ui.publish("putCatalog"),vt(">>"),vt("endobj")},mf=U.__private__.putTrailer=function(){vt("trailer"),vt("<<"),vt("/Size "+(ft+1)),vt("/Root "+ft+" 0 R"),vt("/Info "+(ft-1)+" 0 R"),P!==null&&vt("/Encrypt "+lo.oid+" 0 R"),vt("/ID [ <"+Ie+"> <"+Ie+"> ]"),vt(">>")},$l=U.__private__.putHeader=function(){vt("%PDF-"+Z),vt("%")},Fo=U.__private__.putXRef=function(){var oe="0000000000";vt("xref"),vt("0 "+(ft+1)),vt("0000000000 65535 f ");for(var Ke=1;Ke<=ft;Ke++)typeof ut[Ke]=="function"?vt((oe+ut[Ke]()).slice(-10)+" 00000 n "):ut[Ke]!==void 0?vt((oe+ut[Ke]).slice(-10)+" 00000 n "):vt("0000000000 00000 n ")},Bu=U.__private__.buildDocument=function(){It(),ta(Rt),ui.publish("buildDocument"),$l(),Vr(),Mo(),ql(),P!==null&&Do(),Rd(),ku();var oe=We;return Fo(),mf(),vt("startxref"),vt(""+oe),vt("%%EOF"),ta(qt[Se]),Rt.join(`
`)},sh=U.__private__.getBlob=function(oe){return new Blob([Na(oe)],{type:"application/pdf"})},Yo=U.output=U.__private__.output=pu(function(oe,Ke){switch(typeof(Ke=Ke||{})=="string"?Ke={filename:Ke}:Ke.filename=Ke.filename||"generated.pdf",oe){case void 0:return Bu();case"save":U.save(Ke.filename);break;case"arraybuffer":return Na(Bu());case"blob":return sh(Bu());case"bloburi":case"bloburl":if(Wn.URL!==void 0&&typeof Wn.URL.createObjectURL=="function")return Wn.URL&&Wn.URL.createObjectURL(sh(Bu()))||void 0;io.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Dt="",Yt=Bu();try{Dt=sI(Yt)}catch{Dt=sI(unescape(encodeURIComponent(Yt)))}return"data:application/pdf;filename="+Ke.filename+";base64,"+Dt;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Wn)==="[object Window]"){var ha="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Da=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ke.pdfObjectUrl&&(ha=Ke.pdfObjectUrl,Da="");var rr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ha+'"'+Da+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ke)+");<\/script></body></html>",wr=Wn.open();return wr!==null&&wr.document.write(rr),wr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Wn)==="[object Window]"){var $r='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ke.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ke.filename+'" width="500px" height="400px" /></body></html>',Sn=Wn.open();if(Sn!==null){Sn.document.write($r);var Nn=this;Sn.document.documentElement.querySelector("#pdfViewer").onload=function(){Sn.document.title=Ke.filename,Sn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Nn.output("bloburl"))}}return Sn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Wn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var mi='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ke)+'"></iframe></body></html>',Ss=Wn.open();if(Ss!==null&&(Ss.document.write(mi),Ss.document.title=Ke.filename),Ss||typeof safari>"u")return Ss;break;case"datauri":case"dataurl":return Wn.document.location.href=this.output("datauristring",Ke);default:return null}}),bn=function(oe){return Array.isArray(Vc)===!0&&Vc.indexOf(oe)>-1};switch(r){case"pt":ca=1;break;case"mm":ca=72/25.4;break;case"cm":ca=72/2.54;break;case"in":ca=72;break;case"px":ca=bn("px_scaling")==1?.75:96/72;break;case"pc":case"em":ca=12;break;case"ex":ca=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);ca=r}var lo=null;He(),ke();var fr=function(oe){return P!==null?lo.encryptor(oe,0):function(Ke){return Ke}},Dc=U.__private__.getPageInfo=U.getPageInfo=function(oe){if(isNaN(oe)||oe%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:fn[oe].objId,pageNumber:oe,pageContext:fn[oe]}},gn=U.__private__.getPageInfoByObjId=function(oe){if(isNaN(oe)||oe%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ke in fn)if(fn[Ke].objId===oe)break;return Dc(Ke)},oh=U.__private__.getCurrentPageInfo=U.getCurrentPageInfo=function(){return{objId:fn[Se].objId,pageNumber:Se,pageContext:fn[Se]}};U.addPage=function(){return Io.apply(this,arguments),this},U.setPage=function(){return mu.apply(this,arguments),ta.call(this,qt[Se]),this},U.insertPage=function(oe){return this.addPage(),this.movePage(Se,oe),this},U.movePage=function(oe,Ke){var Dt,Yt;if(oe>Ke){Dt=qt[oe],Yt=fn[oe];for(var ha=oe;ha>Ke;ha--)qt[ha]=qt[ha-1],fn[ha]=fn[ha-1];qt[Ke]=Dt,fn[Ke]=Yt,this.setPage(Ke)}else if(oe<Ke){Dt=qt[oe],Yt=fn[oe];for(var Da=oe;Da<Ke;Da++)qt[Da]=qt[Da+1],fn[Da]=fn[Da+1];qt[Ke]=Dt,fn[Ke]=Yt,this.setPage(Ke)}return this},U.deletePage=function(){return Hl.apply(this,arguments),this},U.__private__.text=U.text=function(oe,Ke,Dt,Yt,ha){var Da,rr,wr,$r,Sn,Nn,mi,Ss,Cs,Js=(Yt=Yt||{}).scope||this;if(typeof oe=="number"&&typeof Ke=="number"&&(typeof Dt=="string"||Array.isArray(Dt))){var es=Dt;Dt=Ke,Ke=oe,oe=es}if(arguments[3]instanceof Oe?(Re("The transform parameter of text() with a Matrix value"),Cs=ha):(wr=arguments[4],$r=arguments[5],Ls(mi=arguments[3])==="object"&&mi!==null||(typeof wr=="string"&&($r=wr,wr=null),typeof mi=="string"&&($r=mi,mi=null),typeof mi=="number"&&(wr=mi,mi=null),Yt={flags:mi,angle:wr,align:$r})),isNaN(Ke)||isNaN(Dt)||oe==null)throw new Error("Invalid arguments passed to jsPDF.text");if(oe.length===0)return Js;var br="",ir=!1,fl=typeof Yt.lineHeightFactor=="number"?Yt.lineHeightFactor:Li,Rr=Js.internal.scaleFactor;function _u(Xn){return Xn=Xn.split("	").join(Array(Yt.TabLen||9).join(" ")),hl(Xn,mi)}function Xl(Xn){for(var ai,qi=Xn.concat(),is=[],eu=qi.length;eu--;)typeof(ai=qi.shift())=="string"?is.push(ai):Array.isArray(Xn)&&(ai.length===1||ai[1]===void 0&&ai[2]===void 0)?is.push(ai[0]):is.push([ai[0],ai[1],ai[2]]);return is}function vr(Xn,ai){var qi;if(typeof Xn=="string")qi=ai(Xn)[0];else if(Array.isArray(Xn)){for(var is,eu,kc=Xn.concat(),Qo=[],tu=kc.length;tu--;)typeof(is=kc.shift())=="string"?Qo.push(ai(is)[0]):Array.isArray(is)&&typeof is[0]=="string"&&(eu=ai(is[0],is[1],is[2]),Qo.push([eu[0],eu[1],eu[2]]));qi=Qo}return qi}var uh=!1,Jl=!0;if(typeof oe=="string")uh=!0;else if(Array.isArray(oe)){var dc=oe.concat();rr=[];for(var xd,bs=dc.length;bs--;)(typeof(xd=dc.shift())!="string"||Array.isArray(xd)&&typeof xd[0]!="string")&&(Jl=!1);uh=Jl}if(uh===!1)throw new Error('Type of text must be string or Array. "'+oe+'" is not recognized.');typeof oe=="string"&&(oe=oe.match(/[\r?\n]/)?oe.split(/\r\n|\r|\n/g):[oe]);var Ai=er/Js.internal.scaleFactor,hc=Ai*(fl-1);switch(Yt.baseline){case"bottom":Dt-=hc;break;case"top":Dt+=Ai-hc;break;case"hanging":Dt+=Ai-2*hc;break;case"middle":Dt+=Ai/2-hc}if((Nn=Yt.maxWidth||0)>0&&(typeof oe=="string"?oe=Js.splitTextToSize(oe,Nn):Object.prototype.toString.call(oe)==="[object Array]"&&(oe=oe.reduce(function(Xn,ai){return Xn.concat(Js.splitTextToSize(ai,Nn))},[]))),Da={text:oe,x:Ke,y:Dt,options:Yt,mutex:{pdfEscape:hl,activeFontKey:Wa,fonts:Mn,activeFontSize:er}},ui.publish("preProcessText",Da),oe=Da.text,wr=(Yt=Da.options).angle,!(Cs instanceof Oe)&&wr&&typeof wr=="number"){wr*=Math.PI/180,Yt.rotationDirection===0&&(wr=-wr),ce===re.ADVANCED&&(wr=-wr);var Va=Math.cos(wr),Pd=Math.sin(wr);Cs=new Oe(Va,Pd,-Pd,Va,0,0)}else wr&&wr instanceof Oe&&(Cs=wr);ce!==re.ADVANCED||Cs||(Cs=_t),(Sn=Yt.charSpace||Kl)!==void 0&&(br+=me(ge(Sn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ss=Yt.horizontalScale)!==void 0&&(br+=me(100*Ss)+` Tz
`),Yt.lang;var qs=-1,co=Yt.renderingMode!==void 0?Yt.renderingMode:Yt.stroke,Af=Js.internal.getCurrentPageInfo().pageContext;switch(co){case 0:case!1:case"fill":qs=0;break;case 1:case!0:case"stroke":qs=1;break;case 2:case"fillThenStroke":qs=2;break;case 3:case"invisible":qs=3;break;case 4:case"fillAndAddForClipping":qs=4;break;case 5:case"strokeAndAddPathForClipping":qs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":qs=6;break;case 7:case"addToPathForClipping":qs=7}var Mh=Af.usedRenderingMode!==void 0?Af.usedRenderingMode:-1;qs!==-1?br+=qs+` Tr
`:Mh!==-1&&(br+=`0 Tr
`),qs!==-1&&(Af.usedRenderingMode=qs),$r=Yt.align||"left";var ho,Os=er*fl,Pl=Js.internal.pageSize.getWidth(),Mc=Mn[Wa];Sn=Yt.charSpace||Kl,Nn=Yt.maxWidth||0,mi=Object.assign({autoencode:!0,noBOM:!0},Yt.flags);var Ql=[],ch=function(Xn){return Js.getStringUnitWidth(Xn,{font:Mc,charSpace:Sn,fontSize:er,doKerning:!1})*er/Rr};if(Object.prototype.toString.call(oe)==="[object Array]"){var El;rr=Xl(oe),$r!=="left"&&(ho=rr.map(ch));var Ro,Ed=0;if($r==="right"){Ke-=ho[0],oe=[],bs=rr.length;for(var Ic=0;Ic<bs;Ic++)Ic===0?(Ro=Xo(Ke),El=us(Dt)):(Ro=ge(Ed-ho[Ic]),El=-Os),oe.push([rr[Ic],Ro,El]),Ed=ho[Ic]}else if($r==="center"){Ke-=ho[0]/2,oe=[],bs=rr.length;for(var Nl=0;Nl<bs;Nl++)Nl===0?(Ro=Xo(Ke),El=us(Dt)):(Ro=ge((Ed-ho[Nl])/2),El=-Os),oe.push([rr[Nl],Ro,El]),Ed=ho[Nl]}else if($r==="left"){oe=[],bs=rr.length;for(var fc=0;fc<bs;fc++)oe.push(rr[fc])}else if($r==="justify"&&Mc.encoding==="Identity-H"){oe=[],bs=rr.length,Nn=Nn!==0?Nn:Pl;for(var vu=0,Zi=0;Zi<bs;Zi++)if(El=Zi===0?us(Dt):-Os,Ro=Zi===0?Xo(Ke):vu,Zi<bs-1){var _f=ge((Nn-ho[Zi])/(rr[Zi].split(" ").length-1)),Qs=rr[Zi].split(" ");oe.push([Qs[0]+" ",Ro,El]),vu=0;for(var fo=1;fo<Qs.length;fo++){var Nd=(ch(Qs[fo-1]+" "+Qs[fo])-ch(Qs[fo]))*Rr+_f;fo==Qs.length-1?oe.push([Qs[fo],Nd,0]):oe.push([Qs[fo]+" ",Nd,0]),vu-=Nd}}else oe.push([rr[Zi],Ro,El]);oe.push(["",vu,0])}else{if($r!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(oe=[],bs=rr.length,Nn=Nn!==0?Nn:Pl,Zi=0;Zi<bs;Zi++)El=Zi===0?us(Dt):-Os,Ro=Zi===0?Xo(Ke):0,Zi<bs-1?Ql.push(me(ge((Nn-ho[Zi])/(rr[Zi].split(" ").length-1)))):Ql.push(0),oe.push([rr[Zi],Ro,El])}}var Vd=typeof Yt.R2L=="boolean"?Yt.R2L:Pr;Vd===!0&&(oe=vr(oe,function(Xn,ai,qi){return[Xn.split("").reverse().join(""),ai,qi]})),Da={text:oe,x:Ke,y:Dt,options:Yt,mutex:{pdfEscape:hl,activeFontKey:Wa,fonts:Mn,activeFontSize:er}},ui.publish("postProcessText",Da),oe=Da.text,ir=Da.mutex.isHex||!1;var eo=Mn[Wa].encoding;eo!=="WinAnsiEncoding"&&eo!=="StandardEncoding"||(oe=vr(oe,function(Xn,ai,qi){return[_u(Xn),ai,qi]})),rr=Xl(oe),oe=[];for(var Lc,pc,wu,Fc=0,Ru=1,Uc=Array.isArray(rr[0])?Ru:Fc,mc="",ju=function(Xn,ai,qi){var is="";return qi instanceof Oe?(qi=typeof Yt.angle=="number"?rt(qi,new Oe(1,0,0,1,Xn,ai)):rt(new Oe(1,0,0,1,Xn,ai),qi),ce===re.ADVANCED&&(qi=rt(new Oe(1,0,0,-1,0,0),qi)),is=qi.join(" ")+` Tm
`):is=me(Xn)+" "+me(ai)+` Td
`,is},Bo=0;Bo<rr.length;Bo++){switch(mc="",Uc){case Ru:wu=(ir?"<":"(")+rr[Bo][0]+(ir?">":")"),Lc=parseFloat(rr[Bo][1]),pc=parseFloat(rr[Bo][2]);break;case Fc:wu=(ir?"<":"(")+rr[Bo]+(ir?">":")"),Lc=Xo(Ke),pc=us(Dt)}Ql!==void 0&&Ql[Bo]!==void 0&&(mc=Ql[Bo]+` Tw
`),Bo===0?oe.push(mc+ju(Lc,pc,Cs)+wu):Uc===Fc?oe.push(mc+wu):Uc===Ru&&oe.push(mc+ju(Lc,pc,Cs)+wu)}oe=Uc===Fc?oe.join(` Tj
T* `):oe.join(` Tj
`),oe+=` Tj
`;var cs=`BT
/`;return cs+=Wa+" "+er+` Tf
`,cs+=me(er*fl)+` TL
`,cs+=ji+`
`,cs+=br,cs+=oe,vt(cs+="ET"),k[Wa]=!0,Js};var Tn=U.__private__.clip=U.clip=function(oe){return vt(oe==="evenodd"?"W*":"W"),this};U.clipEvenOdd=function(){return Tn("evenodd")},U.__private__.discardPath=U.discardPath=function(){return vt("n"),this};var Bs=U.__private__.isValidStyle=function(oe){var Ke=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(oe)!==-1&&(Ke=!0),Ke};U.__private__.setDefaultPathOperation=U.setDefaultPathOperation=function(oe){return Bs(oe)&&(T=oe),this};var oc=U.__private__.getStyle=U.getStyle=function(oe){var Ke=T;switch(oe){case"D":case"S":Ke="S";break;case"F":Ke="f";break;case"FD":case"DF":Ke="B";break;case"f":case"f*":case"B":case"B*":Ke=oe}return Ke},lc=U.close=function(){return vt("h"),this};U.stroke=function(){return vt("S"),this},U.fill=function(oe){return Xa("f",oe),this},U.fillEvenOdd=function(oe){return Xa("f*",oe),this},U.fillStroke=function(oe){return Xa("B",oe),this},U.fillStrokeEvenOdd=function(oe){return Xa("B*",oe),this};var Xa=function(oe,Ke){Ls(Ke)==="object"?Gs(Ke,oe):vt(oe)},an=function(oe){oe===null||ce===re.ADVANCED&&oe===void 0||(oe=oc(oe),vt(oe))};function An(oe,Ke,Dt,Yt,ha){var Da=new j_(Ke||this.boundingBox,Dt||this.xStep,Yt||this.yStep,this.gState,ha||this.matrix);Da.stream=this.stream;var rr=oe+"$$"+this.cloneIndex+++"$$";return yt(rr,Da),Da}var Gs=function(oe,Ke){var Dt=As[oe.key],Yt=Er[Dt];if(Yt instanceof WA)vt("q"),vt(Td(Ke)),Yt.gState&&U.setGState(Yt.gState),vt(oe.matrix.toString()+" cm"),vt("/"+Dt+" sh"),vt("Q");else if(Yt instanceof j_){var ha=new Oe(1,0,0,-1,0,Yl());oe.matrix&&(ha=ha.multiply(oe.matrix||_t),Dt=An.call(Yt,oe.key,oe.boundingBox,oe.xStep,oe.yStep,ha).id),vt("q"),vt("/Pattern cs"),vt("/"+Dt+" scn"),Yt.gState&&U.setGState(Yt.gState),vt(Ke),vt("Q")}},Td=function(oe){switch(oe){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},un=U.moveTo=function(oe,Ke){return vt(me(ge(oe))+" "+me(ze(Ke))+" m"),this},Uo=U.lineTo=function(oe,Ke){return vt(me(ge(oe))+" "+me(ze(Ke))+" l"),this},yu=U.curveTo=function(oe,Ke,Dt,Yt,ha,Da){return vt([me(ge(oe)),me(ze(Ke)),me(ge(Dt)),me(ze(Yt)),me(ge(ha)),me(ze(Da)),"c"].join(" ")),this};U.__private__.line=U.line=function(oe,Ke,Dt,Yt,ha){if(isNaN(oe)||isNaN(Ke)||isNaN(Dt)||isNaN(Yt)||!Bs(ha))throw new Error("Invalid arguments passed to jsPDF.line");return ce===re.COMPAT?this.lines([[Dt-oe,Yt-Ke]],oe,Ke,[1,1],ha||"S"):this.lines([[Dt-oe,Yt-Ke]],oe,Ke,[1,1]).stroke()},U.__private__.lines=U.lines=function(oe,Ke,Dt,Yt,ha,Da){var rr,wr,$r,Sn,Nn,mi,Ss,Cs,Js,es,br,ir;if(typeof oe=="number"&&(ir=Dt,Dt=Ke,Ke=oe,oe=ir),Yt=Yt||[1,1],Da=Da||!1,isNaN(Ke)||isNaN(Dt)||!Array.isArray(oe)||!Array.isArray(Yt)||!Bs(ha)||typeof Da!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(un(Ke,Dt),rr=Yt[0],wr=Yt[1],Sn=oe.length,es=Ke,br=Dt,$r=0;$r<Sn;$r++)(Nn=oe[$r]).length===2?(es=Nn[0]*rr+es,br=Nn[1]*wr+br,Uo(es,br)):(mi=Nn[0]*rr+es,Ss=Nn[1]*wr+br,Cs=Nn[2]*rr+es,Js=Nn[3]*wr+br,es=Nn[4]*rr+es,br=Nn[5]*wr+br,yu(mi,Ss,Cs,Js,es,br));return Da&&lc(),an(ha),this},U.path=function(oe){for(var Ke=0;Ke<oe.length;Ke++){var Dt=oe[Ke],Yt=Dt.c;switch(Dt.op){case"m":un(Yt[0],Yt[1]);break;case"l":Uo(Yt[0],Yt[1]);break;case"c":yu.apply(this,Yt);break;case"h":lc()}}return this},U.__private__.rect=U.rect=function(oe,Ke,Dt,Yt,ha){if(isNaN(oe)||isNaN(Ke)||isNaN(Dt)||isNaN(Yt)||!Bs(ha))throw new Error("Invalid arguments passed to jsPDF.rect");return ce===re.COMPAT&&(Yt=-Yt),vt([me(ge(oe)),me(ze(Ke)),me(ge(Dt)),me(ge(Yt)),"re"].join(" ")),an(ha),this},U.__private__.triangle=U.triangle=function(oe,Ke,Dt,Yt,ha,Da,rr){if(isNaN(oe)||isNaN(Ke)||isNaN(Dt)||isNaN(Yt)||isNaN(ha)||isNaN(Da)||!Bs(rr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Dt-oe,Yt-Ke],[ha-Dt,Da-Yt],[oe-ha,Ke-Da]],oe,Ke,[1,1],rr,!0),this},U.__private__.roundedRect=U.roundedRect=function(oe,Ke,Dt,Yt,ha,Da,rr){if(isNaN(oe)||isNaN(Ke)||isNaN(Dt)||isNaN(Yt)||isNaN(ha)||isNaN(Da)||!Bs(rr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var wr=4/3*(Math.SQRT2-1);return ha=Math.min(ha,.5*Dt),Da=Math.min(Da,.5*Yt),this.lines([[Dt-2*ha,0],[ha*wr,0,ha,Da-Da*wr,ha,Da],[0,Yt-2*Da],[0,Da*wr,-ha*wr,Da,-ha,Da],[2*ha-Dt,0],[-ha*wr,0,-ha,-Da*wr,-ha,-Da],[0,2*Da-Yt],[0,-Da*wr,ha*wr,-Da,ha,-Da]],oe+ha,Ke,[1,1],rr,!0),this},U.__private__.ellipse=U.ellipse=function(oe,Ke,Dt,Yt,ha){if(isNaN(oe)||isNaN(Ke)||isNaN(Dt)||isNaN(Yt)||!Bs(ha))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Da=4/3*(Math.SQRT2-1)*Dt,rr=4/3*(Math.SQRT2-1)*Yt;return un(oe+Dt,Ke),yu(oe+Dt,Ke-rr,oe+Da,Ke-Yt,oe,Ke-Yt),yu(oe-Da,Ke-Yt,oe-Dt,Ke-rr,oe-Dt,Ke),yu(oe-Dt,Ke+rr,oe-Da,Ke+Yt,oe,Ke+Yt),yu(oe+Da,Ke+Yt,oe+Dt,Ke+rr,oe+Dt,Ke),an(ha),this},U.__private__.circle=U.circle=function(oe,Ke,Dt,Yt){if(isNaN(oe)||isNaN(Ke)||isNaN(Dt)||!Bs(Yt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(oe,Ke,Dt,Dt,Yt)},U.setFont=function(oe,Ke,Dt){return Dt&&(Ke=_e(Ke,Dt)),Wa=Lo(oe,Ke,{disableWarning:!1}),this};var Rs=U.__private__.getFont=U.getFont=function(){return Mn[Lo.apply(U,arguments)]};U.__private__.getFontList=U.getFontList=function(){var oe,Ke,Dt={};for(oe in mn)if(mn.hasOwnProperty(oe))for(Ke in Dt[oe]=[],mn[oe])mn[oe].hasOwnProperty(Ke)&&Dt[oe].push(Ke);return Dt},U.addFont=function(oe,Ke,Dt,Yt,ha){var Da=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Da.indexOf(arguments[3])!==-1?ha=arguments[3]:arguments[3]&&Da.indexOf(arguments[3])==-1&&(Dt=_e(Dt,Yt)),ha=ha||"Identity-H",zc.call(this,oe,Ke,Dt,ha)};var Li,bi=t.lineWidth||.200025,uo=U.__private__.getLineWidth=U.getLineWidth=function(){return bi},Sd=U.__private__.setLineWidth=U.setLineWidth=function(oe){return bi=oe,vt(me(ge(oe))+" w"),this};U.__private__.setLineDash=jn.API.setLineDash=jn.API.setLineDashPattern=function(oe,Ke){if(oe=oe||[],Ke=Ke||0,isNaN(Ke)||!Array.isArray(oe))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return oe=oe.map(function(Dt){return me(ge(Dt))}).join(" "),Ke=me(ge(Ke)),vt("["+oe+"] "+Ke+" d"),this};var lh=U.__private__.getLineHeight=U.getLineHeight=function(){return er*Li};U.__private__.getLineHeight=U.getLineHeight=function(){return er*Li};var uc=U.__private__.setLineHeightFactor=U.setLineHeightFactor=function(oe){return typeof(oe=oe||1.15)=="number"&&(Li=oe),this},cc=U.__private__.getLineHeightFactor=U.getLineHeightFactor=function(){return Li};uc(t.lineHeight);var Xo=U.__private__.getHorizontalCoordinate=function(oe){return ge(oe)},us=U.__private__.getVerticalCoordinate=function(oe){return ce===re.ADVANCED?oe:fn[Se].mediaBox.topRightY-fn[Se].mediaBox.bottomLeftY-ge(oe)},Gu=U.__private__.getHorizontalCoordinateString=U.getHorizontalCoordinateString=function(oe){return me(Xo(oe))},Ts=U.__private__.getVerticalCoordinateString=U.getVerticalCoordinateString=function(oe){return me(us(oe))},xl=t.strokeColor||"0 G";U.__private__.getStrokeColor=U.getDrawColor=function(){return Ta(xl)},U.__private__.setStrokeColor=U.setDrawColor=function(oe,Ke,Dt,Yt){return xl=Ma({ch1:oe,ch2:Ke,ch3:Dt,ch4:Yt,pdfColorType:"draw",precision:2}),vt(xl),this};var Jo=t.fillColor||"0 g";U.__private__.getFillColor=U.getFillColor=function(){return Ta(Jo)},U.__private__.setFillColor=U.setFillColor=function(oe,Ke,Dt,Yt){return Jo=Ma({ch1:oe,ch2:Ke,ch3:Dt,ch4:Yt,pdfColorType:"fill",precision:2}),vt(Jo),this};var ji=t.textColor||"0 g",js=U.__private__.getTextColor=U.getTextColor=function(){return Ta(ji)};U.__private__.setTextColor=U.setTextColor=function(oe,Ke,Dt,Yt){return ji=Ma({ch1:oe,ch2:Ke,ch3:Dt,ch4:Yt,pdfColorType:"text",precision:3}),this};var Kl=t.charSpace,ns=U.__private__.getCharSpace=U.getCharSpace=function(){return parseFloat(Kl||0)};U.__private__.setCharSpace=U.setCharSpace=function(oe){if(isNaN(oe))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Kl=oe,this};var Dh=0;U.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},U.__private__.setLineCap=U.setLineCap=function(oe){var Ke=U.CapJoinStyles[oe];if(Ke===void 0)throw new Error("Line cap style of '"+oe+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Dh=Ke,vt(Ke+" J"),this};var ko=0;U.__private__.setLineJoin=U.setLineJoin=function(oe){var Ke=U.CapJoinStyles[oe];if(Ke===void 0)throw new Error("Line join style of '"+oe+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ko=Ke,vt(Ke+" j"),this},U.__private__.setLineMiterLimit=U.__private__.setMiterLimit=U.setLineMiterLimit=U.setMiterLimit=function(oe){if(oe=oe||0,isNaN(oe))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return vt(me(ge(oe))+" M"),this},U.GState=Lx,U.setGState=function(oe){(oe=typeof oe=="string"?Bi[Qi[oe]]:Cd(null,oe)).equals(Oo)||(vt("/"+oe.id+" gs"),Oo=oe)};var Cd=function(oe,Ke){if(!oe||!Qi[oe]){var Dt=!1;for(var Yt in Bi)if(Bi.hasOwnProperty(Yt)&&Bi[Yt].equals(Ke)){Dt=!0;break}if(Dt)Ke=Bi[Yt];else{var ha="GS"+(Object.keys(Bi).length+1).toString(10);Bi[ha]=Ke,Ke.id=ha}return oe&&(Qi[oe]=Ke.id),ui.publish("addGState",Ke),Ke}};U.addGState=function(oe,Ke){return Cd(oe,Ke),this},U.saveGraphicsState=function(){return vt("q"),en.push({key:Wa,size:er,color:ji}),this},U.restoreGraphicsState=function(){vt("Q");var oe=en.pop();return Wa=oe.key,er=oe.size,ji=oe.color,Oo=null,this},U.setCurrentTransformationMatrix=function(oe){return vt(oe.toString()+" cm"),this},U.comment=function(oe){return vt("#"+oe),this};var gu=function(oe,Ke){var Dt=oe||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Dt},set:function(Da){isNaN(Da)||(Dt=parseFloat(Da))}});var Yt=Ke||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Yt},set:function(Da){isNaN(Da)||(Yt=parseFloat(Da))}});var ha="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ha},set:function(Da){ha=Da.toString()}}),this},Au=function(oe,Ke,Dt,Yt){gu.call(this,oe,Ke),this.type="rect";var ha=Dt||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ha},set:function(rr){isNaN(rr)||(ha=parseFloat(rr))}});var Da=Yt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Da},set:function(rr){isNaN(rr)||(Da=parseFloat(rr))}}),this},Yf=function(){this.page=Ni,this.currentPage=Se,this.pages=qt.slice(0),this.pagesContext=fn.slice(0),this.x=Qa,this.y=gr,this.matrix=qn,this.width=Zs(Se),this.height=Yl(Se),this.outputDestination=Aa,this.id="",this.objectNumber=-1};Yf.prototype.restore=function(){Ni=this.page,Se=this.currentPage,fn=this.pagesContext,qt=this.pages,Qa=this.x,gr=this.y,qn=this.matrix,yf(Se,this.width),gf(Se,this.height),Aa=this.outputDestination};var Wl=function(oe,Ke,Dt,Yt,ha){xe.push(new Yf),Ni=Se=0,qt=[],Qa=oe,gr=Ke,qn=ha,Xs([Dt,Yt])},jm=function(oe){if(Jt[oe])xe.pop().restore();else{var Ke=new Yf,Dt="Xo"+(Object.keys(Us).length+1).toString(10);Ke.id=Dt,Jt[oe]=Dt,Us[Dt]=Ke,ui.publish("addFormObject",Ke),xe.pop().restore()}};for(var bd in U.beginFormObject=function(oe,Ke,Dt,Yt,ha){return Wl(oe,Ke,Dt,Yt,ha),this},U.endFormObject=function(oe){return jm(oe),this},U.doFormObject=function(oe,Ke){var Dt=Us[Jt[oe]];return vt("q"),vt(Ke.toString()+" cm"),vt("/"+Dt.id+" Do"),vt("Q"),this},U.getFormObject=function(oe){var Ke=Us[Jt[oe]];return{x:Ke.x,y:Ke.y,width:Ke.width,height:Ke.height,matrix:Ke.matrix}},U.save=function(oe,Ke){return oe=oe||"generated.pdf",(Ke=Ke||{}).returnPromise=Ke.returnPromise||!1,Ke.returnPromise===!1?($A(sh(Bu()),oe),typeof $A.unload=="function"&&Wn.setTimeout&&setTimeout($A.unload,911),this):new Promise(function(Dt,Yt){try{var ha=$A(sh(Bu()),oe);typeof $A.unload=="function"&&Wn.setTimeout&&setTimeout($A.unload,911),Dt(ha)}catch(Da){Yt(Da.message)}})},jn.API)jn.API.hasOwnProperty(bd)&&(bd==="events"&&jn.API.events.length?function(oe,Ke){var Dt,Yt,ha;for(ha=Ke.length-1;ha!==-1;ha--)Dt=Ke[ha][0],Yt=Ke[ha][1],oe.subscribe.apply(oe,[Dt].concat(typeof Yt=="function"?[Yt]:Yt))}(ui,jn.API.events):U[bd]=jn.API[bd]);var Zs=U.getPageWidth=function(oe){return(fn[oe=oe||Se].mediaBox.topRightX-fn[oe].mediaBox.bottomLeftX)/ca},yf=U.setPageWidth=function(oe,Ke){fn[oe].mediaBox.topRightX=Ke*ca+fn[oe].mediaBox.bottomLeftX},Yl=U.getPageHeight=function(oe){return(fn[oe=oe||Se].mediaBox.topRightY-fn[oe].mediaBox.bottomLeftY)/ca},gf=U.setPageHeight=function(oe,Ke){fn[oe].mediaBox.topRightY=Ke*ca+fn[oe].mediaBox.bottomLeftY};return U.internal={pdfEscape:hl,getStyle:oc,getFont:Rs,getFontSize:cr,getCharSpace:ns,getTextColor:js,getLineHeight:lh,getLineHeightFactor:cc,getLineWidth:uo,write:or,getHorizontalCoordinate:Xo,getVerticalCoordinate:us,getCoordinateString:Gu,getVerticalCoordinateString:Ts,collections:{},newObject:bt,newAdditionalObject:$t,newObjectDeferred:Bt,newObjectDeferredBegin:Et,getFilters:Ba,putStream:_r,events:ui,scaleFactor:ca,pageSize:{getWidth:function(){return Zs(Se)},setWidth:function(oe){yf(Se,oe)},getHeight:function(){return Yl(Se)},setHeight:function(oe){gf(Se,oe)}},encryptionOptions:P,encryption:lo,getEncryptor:fr,output:Yo,getNumberOfPages:oo,pages:qt,out:vt,f2:De,f3:ie,getPageInfo:Dc,getPageInfoByObjId:gn,getCurrentPageInfo:oh,getPDFVersion:H,Point:gu,Rectangle:Au,Matrix:Oe,hasHotfix:bn},Object.defineProperty(U.internal.pageSize,"width",{get:function(){return Zs(Se)},set:function(oe){yf(Se,oe)},enumerable:!0,configurable:!0}),Object.defineProperty(U.internal.pageSize,"height",{get:function(){return Yl(Se)},set:function(oe){gf(Se,oe)},enumerable:!0,configurable:!0}),ih.call(U,za),Wa="F1",Io(s,a),ui.publish("initialized"),U}O_.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},O_.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},O_.prototype.hexToBytes=function(t){for(var e=[],a=0;a<t.length;a+=2)e.push(String.fromCharCode(parseInt(t.substr(a,2),16)));return e.join("")},O_.prototype.processOwnerPassword=function(t,e){return lI(oI(e).substr(0,5),t)},O_.prototype.encryptor=function(t,e){var a=oI(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return lI(a,r)}},Lx.prototype.equals=function(t){var e,a="id,objectNumber,equals";if(!t||Ls(t)!==Ls(this))return!1;var r=0;for(e in this)if(!(a.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&a.indexOf(e)<0&&r--;return r===0},jn.API={events:[]},jn.version="3.0.1";var Rl=jn.API,X4=1,F0=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},P_=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},li=function(t){return t.toFixed(2)},Ag=function(t){return t.toFixed(5)};Rl.__acroform__={};var Oh=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},WZ=function(t){return t*X4},vm=function(t){var e=new vQ,a=Qr.internal.getHeight(t)||0,r=Qr.internal.getWidth(t)||0;return e.BBox=[0,0,Number(li(r)),Number(li(a))],e},ZPe=Rl.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},qPe=Rl.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},HPe=Rl.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<e)==0?0:1},Bl=Rl.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return HPe(t,e-1)},Gl=Rl.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return ZPe(t,e-1)},jl=Rl.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return qPe(t,e-1)},$Pe=Rl.__acroform__.calculateCoordinates=function(t,e){var a=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,s=t[0],l=t[1],h=t[2],n=t[3],w={};return w.lowerLeft_X=a(s)||0,w.lowerLeft_Y=r(l+n)||0,w.upperRight_X=a(s+h)||0,w.upperRight_Y=r(l)||0,[Number(li(w.lowerLeft_X)),Number(li(w.lowerLeft_Y)),Number(li(w.upperRight_X)),Number(li(w.upperRight_Y))]},KPe=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],a=t._V||t.DV,r=uI(t,a),s=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+s+" "+li(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var l=vm(t);return l.scope=t.scope,l.stream=e.join(`
`),l}},uI=function(t,e){var a=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=t.multiline?s.map(function(ie){return ie.split(`
`)}):s.map(function(ie){return[ie]});var l=a,h=Qr.internal.getHeight(t)||0;h=h<0?-h:h;var n=Qr.internal.getWidth(t)||0;n=n<0?-n:n;var w=function(ie,ge,Me){if(ie+1<s.length){var ze=ge+" "+s[ie+1][0];return DC(ze,t,Me).width<=n-4}return!1};l++;e:for(;l>0;){e="",l--;var T,P,z=DC("3",t,l).height,k=t.multiline?h-l:(h-z)/2,U=k+=2,Z=0,H=0,q=0;if(l<=0){e=`(...) Tj
`,e+="% Width of Text: "+DC(e,t,l=12).width+", FieldWidth:"+n+`
`;break}for(var J="",re=0,ce=0;ce<s.length;ce++)if(s.hasOwnProperty(ce)){var ye=!1;if(s[ce].length!==1&&q!==s[ce].length-1){if((z+2)*(re+2)+2>h)continue e;J+=s[ce][q],ye=!0,H=ce,ce--}else{J=(J+=s[ce][q]+" ").substr(J.length-1)==" "?J.substr(0,J.length-1):J;var he=parseInt(ce),_e=w(he,J,l),me=ce>=s.length-1;if(_e&&!me){J+=" ",q=0;continue}if(_e||me){if(me)H=he;else if(t.multiline&&(z+2)*(re+2)+2>h)continue e}else{if(!t.multiline||(z+2)*(re+2)+2>h)continue e;H=he}}for(var Re="",be=Z;be<=H;be++){var De=s[be];if(t.multiline){if(be===H){Re+=De[q]+" ",q=(q+1)%De.length;continue}if(be===Z){Re+=De[De.length-1]+" ";continue}}Re+=De[0]+" "}switch(Re=Re.substr(Re.length-1)==" "?Re.substr(0,Re.length-1):Re,P=DC(Re,t,l).width,t.textAlign){case"right":T=n-P-2;break;case"center":T=(n-P)/2;break;case"left":default:T=2}e+=li(T)+" "+li(U)+` Td
`,e+="("+F0(Re)+`) Tj
`,e+=-li(T)+` 0 Td
`,U=-(l+2),P=0,Z=ye?H:H+1,re++,J=""}break}return r.text=e,r.fontSize=l,r},DC=function(t,e,a){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(a),charSpace:0})*parseFloat(a);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(a),charSpace:0})*parseFloat(a)*1.5,width:s}},WPe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},YPe=function(t,e){var a={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===a.type&&r.object===a.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(a)},XPe=function(t,e){for(var a in t)if(t.hasOwnProperty(a)){var r=a,s=t[a];e.internal.newObjectDeferredBegin(s.objId,!0),Ls(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete t[r]}},JPe=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Gp.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(WPe)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");X4=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new wQ,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(a){a.internal.events.unsubscribe(a.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete a.internal.acroformPlugin.acroFormDictionaryRoot._eventID,a.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(a){a.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=a.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in r)if(r.hasOwnProperty(s)){var l=r[s];l.objId=void 0,l.hasAnnotation&&YPe(l,a)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(a){if(a.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");a.internal.write("/AcroForm "+a.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(a){(function(r,s){var l=!r;for(var h in r||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(h)){var n=r[h],w=[],T=n.Rect;if(n.Rect&&(n.Rect=$Pe(n.Rect,s)),s.internal.newObjectDeferredBegin(n.objId,!0),n.DA=Qr.createDefaultAppearanceStream(n),Ls(n)==="object"&&typeof n.getKeyValueListForStream=="function"&&(w=n.getKeyValueListForStream()),n.Rect=T,n.hasAppearanceStream&&!n.appearanceStreamContent){var P=KPe(n);w.push({key:"AP",value:"<</N "+P+">>"}),s.internal.acroformPlugin.xForms.push(P)}if(n.appearanceStreamContent){var z="";for(var k in n.appearanceStreamContent)if(n.appearanceStreamContent.hasOwnProperty(k)){var U=n.appearanceStreamContent[k];if(z+="/"+k+" ",z+="<<",Object.keys(U).length>=1||Array.isArray(U)){for(var h in U)if(U.hasOwnProperty(h)){var Z=U[h];typeof Z=="function"&&(Z=Z.call(s,n)),z+="/"+h+" "+Z+" ",s.internal.acroformPlugin.xForms.indexOf(Z)>=0||s.internal.acroformPlugin.xForms.push(Z)}}else typeof(Z=U)=="function"&&(Z=Z.call(s,n)),z+="/"+h+" "+Z,s.internal.acroformPlugin.xForms.indexOf(Z)>=0||s.internal.acroformPlugin.xForms.push(Z);z+=">>"}w.push({key:"AP",value:`<<
`+z+">>"})}s.internal.putStream({additionalKeyValues:w,objectId:n.objId}),s.internal.out("endobj")}l&&XPe(s.internal.acroformPlugin.xForms,s)})(a,t)}),t.internal.acroformPlugin.isInitialized=!0}},_Q=Rl.__acroform__.arrayToPdfArray=function(t,e,a){var r=function(h){return h};if(Array.isArray(t)){for(var s="[",l=0;l<t.length;l++)switch(l!==0&&(s+=" "),Ls(t[l])){case"boolean":case"number":case"object":s+=t[l].toString();break;case"string":t[l].substr(0,1)!=="/"?(e!==void 0&&a&&(r=a.internal.getEncryptor(e)),s+="("+F0(r(t[l].toString()))+")"):s+=t[l].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},L5=function(t,e,a){var r=function(s){return s};return e!==void 0&&a&&(r=a.internal.getEncryptor(e)),(t=t||"").toString(),t="("+F0(r(t))+")"},xm=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};xm.prototype.toString=function(){return this.objId+" 0 R"},xm.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},xm.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(l){return l!="content"&&l!="appearanceStreamContent"&&l!="scope"&&l!="objId"&&l.substring(0,1)!="_"});for(var a in e)if(Object.getOwnPropertyDescriptor(this,e[a]).configurable===!1){var r=e[a],s=this[r];s&&(Array.isArray(s)?t.push({key:r,value:_Q(s,this.objId,this.scope)}):s instanceof xm?(s.scope=this.scope,t.push({key:r,value:s.objId+" 0 R"})):typeof s!="function"&&t.push({key:r,value:s}))}return t};var vQ=function(){xm.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(a){t=a.trim()},get:function(){return t||null}})};Oh(vQ,xm);var wQ=function(){xm.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var a=function(r){return r};return this.scope&&(a=this.scope.internal.getEncryptor(this.objId)),"("+F0(a(t))+")"}},set:function(a){t=a}})};Oh(wQ,xm);var Gp=function t(){xm.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(J){if(isNaN(J))throw new Error('Invalid value "'+J+'" for attribute F supplied.');e=J}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Bl(e,3)},set:function(J){J?this.F=Gl(e,3):this.F=jl(e,3)}});var a=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return a},set:function(J){if(isNaN(J))throw new Error('Invalid value "'+J+'" for attribute Ff supplied.');a=J}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(J){r=J!==void 0?J:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(J){r[0]=J}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(J){r[1]=J}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(J){r[2]=J}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(J){r[3]=J}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(J){switch(J){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=J;break;default:throw new Error('Invalid value "'+J+'" for attribute FT supplied.')}}});var l=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!l||l.length<1){if(this instanceof Fx)return;l="FieldObject"+t.FieldNum++}var J=function(re){return re};return this.scope&&(J=this.scope.internal.getEncryptor(this.objId)),"("+F0(J(l))+")"},set:function(J){l=J.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return l},set:function(J){l=J}});var h="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return h},set:function(J){h=J}});var n="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return n},set:function(J){n=J}});var w=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return w},set:function(J){w=J}});var T=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return T===void 0?50/X4:T},set:function(J){T=J}});var P="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return P},set:function(J){P=J}});var z="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!z||this instanceof Fx||this instanceof c0))return L5(z,this.objId,this.scope)},set:function(J){J=J.toString(),z=J}});var k=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(k)return this instanceof tc?k:L5(k,this.objId,this.scope)},set:function(J){J=J.toString(),k=this instanceof tc?J:J.substr(0,1)==="("?P_(J.substr(1,J.length-2)):P_(J)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof tc?P_(k.substr(1,k.length-1)):k},set:function(J){J=J.toString(),k=this instanceof tc?"/"+J:J}});var U=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(U)return U},set:function(J){this.V=J}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(U)return this instanceof tc?U:L5(U,this.objId,this.scope)},set:function(J){J=J.toString(),U=this instanceof tc?J:J.substr(0,1)==="("?P_(J.substr(1,J.length-2)):P_(J)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof tc?P_(U.substr(1,U.length-1)):U},set:function(J){J=J.toString(),U=this instanceof tc?"/"+J:J}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var Z,H=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return H},set:function(J){J=!!J,H=J}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(Z)return Z},set:function(J){Z=J}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,1)},set:function(J){J?this.Ff=Gl(this.Ff,1):this.Ff=jl(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,2)},set:function(J){J?this.Ff=Gl(this.Ff,2):this.Ff=jl(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,3)},set:function(J){J?this.Ff=Gl(this.Ff,3):this.Ff=jl(this.Ff,3)}});var q=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(q!==null)return q},set:function(J){if([0,1,2].indexOf(J)===-1)throw new Error('Invalid value "'+J+'" for attribute Q supplied.');q=J}}),Object.defineProperty(this,"textAlign",{get:function(){var J;switch(q){case 0:default:J="left";break;case 1:J="center";break;case 2:J="right"}return J},configurable:!0,enumerable:!0,set:function(J){switch(J){case"right":case 2:q=2;break;case"center":case 1:q=1;break;case"left":case 0:default:q=0}}})};Oh(Gp,xm);var ev=function(){Gp.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(a){t=a}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return _Q(e,this.objId,this.scope)},set:function(a){var r,s;s=[],typeof(r=a)=="string"&&(s=function(l,h,n){n||(n=1);for(var w,T=[];w=h.exec(l);)T.push(w[n]);return T}(r,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(a){e=a,this.sort&&e.sort()},this.addOption=function(a){a=(a=a||"").toString(),e.push(a),this.sort&&e.sort()},this.removeOption=function(a,r){for(r=r||!1,a=(a=a||"").toString();e.indexOf(a)!==-1&&(e.splice(e.indexOf(a),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,18)},set:function(a){a?this.Ff=Gl(this.Ff,18):this.Ff=jl(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,19)},set:function(a){this.combo===!0&&(a?this.Ff=Gl(this.Ff,19):this.Ff=jl(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,20)},set:function(a){a?(this.Ff=Gl(this.Ff,20),e.sort()):this.Ff=jl(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,22)},set:function(a){a?this.Ff=Gl(this.Ff,22):this.Ff=jl(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,23)},set:function(a){a?this.Ff=Gl(this.Ff,23):this.Ff=jl(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,27)},set:function(a){a?this.Ff=Gl(this.Ff,27):this.Ff=jl(this.Ff,27)}}),this.hasAppearanceStream=!1};Oh(ev,Gp);var tv=function(){ev.call(this),this.fontName="helvetica",this.combo=!1};Oh(tv,ev);var av=function(){tv.call(this),this.combo=!0};Oh(av,tv);var eb=function(){av.call(this),this.edit=!0};Oh(eb,av);var tc=function(){Gp.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,15)},set:function(a){a?this.Ff=Gl(this.Ff,15):this.Ff=jl(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,16)},set:function(a){a?this.Ff=Gl(this.Ff,16):this.Ff=jl(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,17)},set:function(a){a?this.Ff=Gl(this.Ff,17):this.Ff=jl(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,26)},set:function(a){a?this.Ff=Gl(this.Ff,26):this.Ff=jl(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};if(this.scope&&(a=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,s=[];for(r in s.push("<<"),e)s.push("/"+r+" ("+F0(a(e[r]))+")");return s.push(">>"),s.join(`
`)}},set:function(a){Ls(a)==="object"&&(e=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(a){typeof a=="string"&&(e.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(a){t="/"+a}})};Oh(tc,Gp);var tb=function(){tc.call(this),this.pushButton=!0};Oh(tb,tc);var rv=function(){tc.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Oh(rv,tc);var Fx=function(){var t,e;Gp.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var a,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(n){return n};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var l,h=[];for(l in h.push("<<"),r)h.push("/"+l+" ("+F0(s(r[l]))+")");return h.push(">>"),h.join(`
`)},set:function(s){Ls(s)==="object"&&(r=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(s){typeof s=="string"&&(r.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return a},set:function(s){a=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return a.substr(1,a.length-1)},set:function(s){a="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Qr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Oh(Fx,Gp),rv.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var a=this.Kids[e];a.appearanceStreamContent=t.createAppearanceStream(a.optionName),a.caption=t.getCA()}},rv.prototype.createOption=function(t){var e=new Fx;return e.Parent=this,e.optionName=t,this.Kids.push(e),QPe.call(this.scope,e),e};var ab=function(){tc.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Qr.CheckBox.createAppearanceStream()};Oh(ab,tc);var c0=function(){Gp.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,13)},set:function(e){e?this.Ff=Gl(this.Ff,13):this.Ff=jl(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,21)},set:function(e){e?this.Ff=Gl(this.Ff,21):this.Ff=jl(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,23)},set:function(e){e?this.Ff=Gl(this.Ff,23):this.Ff=jl(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,24)},set:function(e){e?this.Ff=Gl(this.Ff,24):this.Ff=jl(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,25)},set:function(e){e?this.Ff=Gl(this.Ff,25):this.Ff=jl(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,26)},set:function(e){e?this.Ff=Gl(this.Ff,26):this.Ff=jl(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Oh(c0,Gp);var rb=function(){c0.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Bl(this.Ff,14)},set:function(t){t?this.Ff=Gl(this.Ff,14):this.Ff=jl(this.Ff,14)}}),this.password=!0};Oh(rb,c0);var Qr={CheckBox:{createAppearanceStream:function(){return{N:{On:Qr.CheckBox.YesNormal},D:{On:Qr.CheckBox.YesPushDown,Off:Qr.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=vm(t);e.scope=t.scope;var a=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),l=uI(t,t.caption);return a.push("0.749023 g"),a.push("0 0 "+li(Qr.internal.getWidth(t))+" "+li(Qr.internal.getHeight(t))+" re"),a.push("f"),a.push("BMC"),a.push("q"),a.push("0 0 1 rg"),a.push("/"+r+" "+li(l.fontSize)+" Tf "+s),a.push("BT"),a.push(l.text),a.push("ET"),a.push("Q"),a.push("EMC"),e.stream=a.join(`
`),e},YesNormal:function(t){var e=vm(t);e.scope=t.scope;var a=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),s=[],l=Qr.internal.getHeight(t),h=Qr.internal.getWidth(t),n=uI(t,t.caption);return s.push("1 g"),s.push("0 0 "+li(h)+" "+li(l)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+li(h-1)+" "+li(l-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+a+" "+li(n.fontSize)+" Tf "+r),s.push(n.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=vm(t);e.scope=t.scope;var a=[];return a.push("0.749023 g"),a.push("0 0 "+li(Qr.internal.getWidth(t))+" "+li(Qr.internal.getHeight(t))+" re"),a.push("f"),e.stream=a.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Qr.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Qr.RadioButton.Circle.YesNormal,e.D[t]=Qr.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=vm(t);e.scope=t.scope;var a=[],r=Qr.internal.getWidth(t)<=Qr.internal.getHeight(t)?Qr.internal.getWidth(t)/4:Qr.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=Qr.internal.Bezier_C,l=Number((r*s).toFixed(5));return a.push("q"),a.push("1 0 0 1 "+Ag(Qr.internal.getWidth(t)/2)+" "+Ag(Qr.internal.getHeight(t)/2)+" cm"),a.push(r+" 0 m"),a.push(r+" "+l+" "+l+" "+r+" 0 "+r+" c"),a.push("-"+l+" "+r+" -"+r+" "+l+" -"+r+" 0 c"),a.push("-"+r+" -"+l+" -"+l+" -"+r+" 0 -"+r+" c"),a.push(l+" -"+r+" "+r+" -"+l+" "+r+" 0 c"),a.push("f"),a.push("Q"),e.stream=a.join(`
`),e},YesPushDown:function(t){var e=vm(t);e.scope=t.scope;var a=[],r=Qr.internal.getWidth(t)<=Qr.internal.getHeight(t)?Qr.internal.getWidth(t)/4:Qr.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),l=Number((s*Qr.internal.Bezier_C).toFixed(5)),h=Number((r*Qr.internal.Bezier_C).toFixed(5));return a.push("0.749023 g"),a.push("q"),a.push("1 0 0 1 "+Ag(Qr.internal.getWidth(t)/2)+" "+Ag(Qr.internal.getHeight(t)/2)+" cm"),a.push(s+" 0 m"),a.push(s+" "+l+" "+l+" "+s+" 0 "+s+" c"),a.push("-"+l+" "+s+" -"+s+" "+l+" -"+s+" 0 c"),a.push("-"+s+" -"+l+" -"+l+" -"+s+" 0 -"+s+" c"),a.push(l+" -"+s+" "+s+" -"+l+" "+s+" 0 c"),a.push("f"),a.push("Q"),a.push("0 g"),a.push("q"),a.push("1 0 0 1 "+Ag(Qr.internal.getWidth(t)/2)+" "+Ag(Qr.internal.getHeight(t)/2)+" cm"),a.push(r+" 0 m"),a.push(r+" "+h+" "+h+" "+r+" 0 "+r+" c"),a.push("-"+h+" "+r+" -"+r+" "+h+" -"+r+" 0 c"),a.push("-"+r+" -"+h+" -"+h+" -"+r+" 0 -"+r+" c"),a.push(h+" -"+r+" "+r+" -"+h+" "+r+" 0 c"),a.push("f"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(t){var e=vm(t);e.scope=t.scope;var a=[],r=Qr.internal.getWidth(t)<=Qr.internal.getHeight(t)?Qr.internal.getWidth(t)/4:Qr.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),l=Number((s*Qr.internal.Bezier_C).toFixed(5));return a.push("0.749023 g"),a.push("q"),a.push("1 0 0 1 "+Ag(Qr.internal.getWidth(t)/2)+" "+Ag(Qr.internal.getHeight(t)/2)+" cm"),a.push(s+" 0 m"),a.push(s+" "+l+" "+l+" "+s+" 0 "+s+" c"),a.push("-"+l+" "+s+" -"+s+" "+l+" -"+s+" 0 c"),a.push("-"+s+" -"+l+" -"+l+" -"+s+" 0 -"+s+" c"),a.push(l+" -"+s+" "+s+" -"+l+" "+s+" 0 c"),a.push("f"),a.push("Q"),e.stream=a.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Qr.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Qr.RadioButton.Cross.YesNormal,e.D[t]=Qr.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=vm(t);e.scope=t.scope;var a=[],r=Qr.internal.calculateCross(t);return a.push("q"),a.push("1 1 "+li(Qr.internal.getWidth(t)-2)+" "+li(Qr.internal.getHeight(t)-2)+" re"),a.push("W"),a.push("n"),a.push(li(r.x1.x)+" "+li(r.x1.y)+" m"),a.push(li(r.x2.x)+" "+li(r.x2.y)+" l"),a.push(li(r.x4.x)+" "+li(r.x4.y)+" m"),a.push(li(r.x3.x)+" "+li(r.x3.y)+" l"),a.push("s"),a.push("Q"),e.stream=a.join(`
`),e},YesPushDown:function(t){var e=vm(t);e.scope=t.scope;var a=Qr.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+li(Qr.internal.getWidth(t))+" "+li(Qr.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+li(Qr.internal.getWidth(t)-2)+" "+li(Qr.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(li(a.x1.x)+" "+li(a.x1.y)+" m"),r.push(li(a.x2.x)+" "+li(a.x2.y)+" l"),r.push(li(a.x4.x)+" "+li(a.x4.y)+" m"),r.push(li(a.x3.x)+" "+li(a.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=vm(t);e.scope=t.scope;var a=[];return a.push("0.749023 g"),a.push("0 0 "+li(Qr.internal.getWidth(t))+" "+li(Qr.internal.getHeight(t))+" re"),a.push("f"),e.stream=a.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+a}};Qr.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Qr.internal.getWidth(t),a=Qr.internal.getHeight(t),r=Math.min(e,a);return{x1:{x:(e-r)/2,y:(a-r)/2+r},x2:{x:(e-r)/2+r,y:(a-r)/2},x3:{x:(e-r)/2,y:(a-r)/2},x4:{x:(e-r)/2+r,y:(a-r)/2+r}}}},Qr.internal.getWidth=function(t){var e=0;return Ls(t)==="object"&&(e=WZ(t.Rect[2])),e},Qr.internal.getHeight=function(t){var e=0;return Ls(t)==="object"&&(e=WZ(t.Rect[3])),e};var QPe=Rl.addField=function(t){if(JPe(this,t),!(t instanceof Gp))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Rl.AcroFormChoiceField=ev,Rl.AcroFormListBox=tv,Rl.AcroFormComboBox=av,Rl.AcroFormEditBox=eb,Rl.AcroFormButton=tc,Rl.AcroFormPushButton=tb,Rl.AcroFormRadioButton=rv,Rl.AcroFormCheckBox=ab,Rl.AcroFormTextField=c0,Rl.AcroFormPasswordField=rb,Rl.AcroFormAppearance=Qr,Rl.AcroForm={ChoiceField:ev,ListBox:tv,ComboBox:av,EditBox:eb,Button:tc,PushButton:tb,RadioButton:rv,CheckBox:ab,TextField:c0,PasswordField:rb,Appearance:Qr},jn.AcroForm={ChoiceField:ev,ListBox:tv,ComboBox:av,EditBox:eb,Button:tc,PushButton:tb,RadioButton:rv,CheckBox:ab,TextField:c0,PasswordField:rb,Appearance:Qr};jn.AcroForm;function RQ(t){return t.reduce(function(e,a,r){return e[a]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",a={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(ie,ge){var Me,ze,Le,Ie,Ze,ke=e;if((ge=ge||e)==="RGBA"||ie.data!==void 0&&ie.data instanceof Uint8ClampedArray&&"height"in ie&&"width"in ie)return"RGBA";if(_e(ie))for(Ze in a)for(Le=a[Ze],Me=0;Me<Le.length;Me+=1){for(Ie=!0,ze=0;ze<Le[Me].length;ze+=1)if(Le[Me][ze]!==void 0&&Le[Me][ze]!==ie[ze]){Ie=!1;break}if(Ie===!0){ke=Ze;break}}else for(Ze in a)for(Le=a[Ze],Me=0;Me<Le.length;Me+=1){for(Ie=!0,ze=0;ze<Le[Me].length;ze+=1)if(Le[Me][ze]!==void 0&&Le[Me][ze]!==ie.charCodeAt(ze)){Ie=!1;break}if(Ie===!0){ke=Ze;break}}return ke===e&&ge!==e&&(ke=ge),ke},s=function ie(ge){for(var Me=this.internal.write,ze=this.internal.putStream,Le=(0,this.internal.getFilters)();Le.indexOf("FlateEncode")!==-1;)Le.splice(Le.indexOf("FlateEncode"),1);ge.objectId=this.internal.newObject();var Ie=[];if(Ie.push({key:"Type",value:"/XObject"}),Ie.push({key:"Subtype",value:"/Image"}),Ie.push({key:"Width",value:ge.width}),Ie.push({key:"Height",value:ge.height}),ge.colorSpace===q.INDEXED?Ie.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(ge.palette.length/3-1)+" "+("sMask"in ge&&ge.sMask!==void 0?ge.objectId+2:ge.objectId+1)+" 0 R]"}):(Ie.push({key:"ColorSpace",value:"/"+ge.colorSpace}),ge.colorSpace===q.DEVICE_CMYK&&Ie.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Ie.push({key:"BitsPerComponent",value:ge.bitsPerComponent}),"decodeParameters"in ge&&ge.decodeParameters!==void 0&&Ie.push({key:"DecodeParms",value:"<<"+ge.decodeParameters+">>"}),"transparency"in ge&&Array.isArray(ge.transparency)){for(var Ze="",ke=0,tt=ge.transparency.length;ke<tt;ke++)Ze+=ge.transparency[ke]+" "+ge.transparency[ke]+" ";Ie.push({key:"Mask",value:"["+Ze+"]"})}ge.sMask!==void 0&&Ie.push({key:"SMask",value:ge.objectId+1+" 0 R"});var Ue=ge.filter!==void 0?["/"+ge.filter]:void 0;if(ze({data:ge.data,additionalKeyValues:Ie,alreadyAppliedFilters:Ue,objectId:ge.objectId}),Me("endobj"),"sMask"in ge&&ge.sMask!==void 0){var He="/Predictor "+ge.predictor+" /Colors 1 /BitsPerComponent "+ge.bitsPerComponent+" /Columns "+ge.width,Ce={width:ge.width,height:ge.height,colorSpace:"DeviceGray",bitsPerComponent:ge.bitsPerComponent,decodeParameters:He,data:ge.sMask};"filter"in ge&&(Ce.filter=ge.filter),ie.call(this,Ce)}if(ge.colorSpace===q.INDEXED){var Se=this.internal.newObject();ze({data:Re(new Uint8Array(ge.palette)),objectId:Se}),Me("endobj")}},l=function(){var ie=this.internal.collections.addImage_images;for(var ge in ie)s.call(this,ie[ge])},h=function(){var ie,ge=this.internal.collections.addImage_images,Me=this.internal.write;for(var ze in ge)Me("/I"+(ie=ge[ze]).index,ie.objectId,"0","R")},n=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",h))},w=function(){var ie=this.internal.collections.addImage_images;return n.call(this),ie},T=function(){return Object.keys(this.internal.collections.addImage_images).length},P=function(ie){return typeof t["process"+ie.toUpperCase()]=="function"},z=function(ie){return Ls(ie)==="object"&&ie.nodeType===1},k=function(ie,ge){if(ie.nodeName==="IMG"&&ie.hasAttribute("src")){var Me=""+ie.getAttribute("src");if(Me.indexOf("data:image/")===0)return cR(unescape(Me).split("base64,").pop());var ze=t.loadFile(Me,!0);if(ze!==void 0)return ze}if(ie.nodeName==="CANVAS"){if(ie.width===0||ie.height===0)throw new Error("Given canvas must have data. Canvas width: "+ie.width+", height: "+ie.height);var Le;switch(ge){case"PNG":Le="image/png";break;case"WEBP":Le="image/webp";break;case"JPEG":case"JPG":default:Le="image/jpeg"}return cR(ie.toDataURL(Le,1).split("base64,").pop())}},U=function(ie){var ge=this.internal.collections.addImage_images;if(ge){for(var Me in ge)if(ie===ge[Me].alias)return ge[Me]}},Z=function(ie,ge,Me){return ie||ge||(ie=-96,ge=-96),ie<0&&(ie=-1*Me.width*72/ie/this.internal.scaleFactor),ge<0&&(ge=-1*Me.height*72/ge/this.internal.scaleFactor),ie===0&&(ie=ge*Me.width/Me.height),ge===0&&(ge=ie*Me.height/Me.width),[ie,ge]},H=function(ie,ge,Me,ze,Le,Ie){var Ze=Z.call(this,Me,ze,Le),ke=this.internal.getCoordinateString,tt=this.internal.getVerticalCoordinateString,Ue=w.call(this);if(Me=Ze[0],ze=Ze[1],Ue[Le.index]=Le,Ie){Ie*=Math.PI/180;var He=Math.cos(Ie),Ce=Math.sin(Ie),Se=function(ht){return ht.toFixed(4)},$e=[Se(He),Se(Ce),Se(-1*Ce),Se(He),0,0,"cm"]}this.internal.write("q"),Ie?(this.internal.write([1,"0","0",1,ke(ie),tt(ge+ze),"cm"].join(" ")),this.internal.write($e.join(" ")),this.internal.write([ke(Me),"0","0",ke(ze),"0","0","cm"].join(" "))):this.internal.write([ke(Me),"0","0",ke(ze),ke(ie),tt(ge+ze),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Le.index+" Do"),this.internal.write("Q")},q=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var J=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},re=t.__addimage__.sHashCode=function(ie){var ge,Me,ze=0;if(typeof ie=="string")for(Me=ie.length,ge=0;ge<Me;ge++)ze=(ze<<5)-ze+ie.charCodeAt(ge),ze|=0;else if(_e(ie))for(Me=ie.byteLength/2,ge=0;ge<Me;ge++)ze=(ze<<5)-ze+ie[ge],ze|=0;return ze},ce=t.__addimage__.validateStringAsBase64=function(ie){(ie=ie||"").toString().trim();var ge=!0;return ie.length===0&&(ge=!1),ie.length%4!=0&&(ge=!1),/^[A-Za-z0-9+/]+$/.test(ie.substr(0,ie.length-2))===!1&&(ge=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(ie.substr(-2))===!1&&(ge=!1),ge},ye=t.__addimage__.extractImageFromDataUrl=function(ie){if(ie==null||!(ie=ie.trim()).startsWith("data:"))return null;var ge=ie.indexOf(",");return ge<0?null:ie.substring(0,ge).trim().endsWith("base64")?ie.substring(ge+1):null},he=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(ie){return he()&&ie instanceof ArrayBuffer};var _e=t.__addimage__.isArrayBufferView=function(ie){return he()&&typeof Uint32Array<"u"&&(ie instanceof Int8Array||ie instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&ie instanceof Uint8ClampedArray||ie instanceof Int16Array||ie instanceof Uint16Array||ie instanceof Int32Array||ie instanceof Uint32Array||ie instanceof Float32Array||ie instanceof Float64Array)},me=t.__addimage__.binaryStringToUint8Array=function(ie){for(var ge=ie.length,Me=new Uint8Array(ge),ze=0;ze<ge;ze++)Me[ze]=ie.charCodeAt(ze);return Me},Re=t.__addimage__.arrayBufferToBinaryString=function(ie){for(var ge="",Me=_e(ie)?ie:new Uint8Array(ie),ze=0;ze<Me.length;ze+=8192)ge+=String.fromCharCode.apply(null,Me.subarray(ze,ze+8192));return ge};t.addImage=function(){var ie,ge,Me,ze,Le,Ie,Ze,ke,tt;if(typeof arguments[1]=="number"?(ge=e,Me=arguments[1],ze=arguments[2],Le=arguments[3],Ie=arguments[4],Ze=arguments[5],ke=arguments[6],tt=arguments[7]):(ge=arguments[1],Me=arguments[2],ze=arguments[3],Le=arguments[4],Ie=arguments[5],Ze=arguments[6],ke=arguments[7],tt=arguments[8]),Ls(ie=arguments[0])==="object"&&!z(ie)&&"imageData"in ie){var Ue=ie;ie=Ue.imageData,ge=Ue.format||ge||e,Me=Ue.x||Me||0,ze=Ue.y||ze||0,Le=Ue.w||Ue.width||Le,Ie=Ue.h||Ue.height||Ie,Ze=Ue.alias||Ze,ke=Ue.compression||ke,tt=Ue.rotation||Ue.angle||tt}var He=this.internal.getFilters();if(ke===void 0&&He.indexOf("FlateEncode")!==-1&&(ke="SLOW"),isNaN(Me)||isNaN(ze))throw new Error("Invalid coordinates passed to jsPDF.addImage");n.call(this);var Ce=be.call(this,ie,ge,Ze,ke);return H.call(this,Me,ze,Le,Ie,Ce,tt),this};var be=function(ie,ge,Me,ze){var Le,Ie,Ze;if(typeof ie=="string"&&r(ie)===e){ie=unescape(ie);var ke=De(ie,!1);(ke!==""||(ke=t.loadFile(ie,!0))!==void 0)&&(ie=ke)}if(z(ie)&&(ie=k(ie,ge)),ge=r(ie,ge),!P(ge))throw new Error("addImage does not support files of type '"+ge+"', please ensure that a plugin for '"+ge+"' support is added.");if(((Ze=Me)==null||Ze.length===0)&&(Me=function(tt){return typeof tt=="string"||_e(tt)?re(tt):_e(tt.data)?re(tt.data):null}(ie)),(Le=U.call(this,Me))||(he()&&(ie instanceof Uint8Array||ge==="RGBA"||(Ie=ie,ie=me(ie))),Le=this["process"+ge.toUpperCase()](ie,T.call(this),Me,function(tt){return tt&&typeof tt=="string"&&(tt=tt.toUpperCase()),tt in t.image_compression?tt:J.NONE}(ze),Ie)),!Le)throw new Error("An unknown error occurred whilst processing the image.");return Le},De=t.__addimage__.convertBase64ToBinaryString=function(ie,ge){ge=typeof ge!="boolean"||ge;var Me,ze="";if(typeof ie=="string"){var Le;Me=(Le=ye(ie))!==null&&Le!==void 0?Le:ie;try{ze=cR(Me)}catch(Ie){if(ge)throw ce(Me)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Ie.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ze};t.getImageProperties=function(ie){var ge,Me,ze="";if(z(ie)&&(ie=k(ie)),typeof ie=="string"&&r(ie)===e&&((ze=De(ie,!1))===""&&(ze=t.loadFile(ie)||""),ie=ze),Me=r(ie),!P(Me))throw new Error("addImage does not support files of type '"+Me+"', please ensure that a plugin for '"+Me+"' support is added.");if(!he()||ie instanceof Uint8Array||(ie=me(ie)),!(ge=this["process"+Me.toUpperCase()](ie)))throw new Error("An unknown error occurred whilst processing the image");return ge.fileType=Me,ge}})(jn.API),function(t){var e=function(a){if(a!==void 0&&a!="")return!0};jn.API.events.push(["addPage",function(a){this.internal.getPageInfo(a.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(a){for(var r,s,l,h=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,w=this.internal.getPageInfoByObjId(a.objId),T=a.pageContext.annotations,P=!1,z=0;z<T.length&&!P;z++)switch((r=T[z]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(P=!0);break;case"reference":case"text":case"freetext":P=!0}if(P!=0){this.internal.write("/Annots [");for(var k=0;k<T.length;k++){r=T[k];var U=this.internal.pdfEscape,Z=this.internal.getEncryptor(a.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var H=this.internal.newAdditionalObject(),q=this.internal.newAdditionalObject(),J=this.internal.getEncryptor(H.objId),re=r.title||"Note";l="<</Type /Annot /Subtype /Text "+(s="/Rect ["+h(r.bounds.x)+" "+n(r.bounds.y+r.bounds.h)+" "+h(r.bounds.x+r.bounds.w)+" "+n(r.bounds.y)+"] ")+"/Contents ("+U(J(r.contents))+")",l+=" /Popup "+q.objId+" 0 R",l+=" /P "+w.objId+" 0 R",l+=" /T ("+U(J(re))+") >>",H.content=l;var ce=H.objId+" 0 R";l="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+h(r.bounds.x+30)+" "+n(r.bounds.y+r.bounds.h)+" "+h(r.bounds.x+r.bounds.w+30)+" "+n(r.bounds.y)+"] ")+" /Parent "+ce,r.open&&(l+=" /Open true"),l+=" >>",q.content=l,this.internal.write(H.objId,"0 R",q.objId,"0 R");break;case"freetext":s="/Rect ["+h(r.bounds.x)+" "+n(r.bounds.y)+" "+h(r.bounds.x+r.bounds.w)+" "+n(r.bounds.y+r.bounds.h)+"] ";var ye=r.color||"#000000";l="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+U(Z(r.contents))+")",l+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+ye+")",l+=" /Border [0 0 0]",l+=" >>",this.internal.write(l);break;case"link":if(r.options.name){var he=this.annotations._nameMap[r.options.name];r.options.pageNumber=he.page,r.options.top=he.y}else r.options.top||(r.options.top=0);if(s="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",l="",r.options.url)l="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+U(Z(r.options.url))+") >>";else if(r.options.pageNumber)switch(l="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":l+=" /Fit]";break;case"FitH":l+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,l+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var _e=n(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),l+=" /XYZ "+r.options.left+" "+_e+" "+r.options.zoom+"]"}l!=""&&(l+=" >>",this.internal.write(l))}}this.internal.write("]")}}]),t.createAnnotation=function(a){var r=this.internal.getCurrentPageInfo();switch(a.type){case"link":this.link(a.bounds.x,a.bounds.y,a.bounds.w,a.bounds.h,a);break;case"text":case"freetext":r.pageContext.annotations.push(a)}},t.link=function(a,r,s,l,h){var n=this.internal.getCurrentPageInfo(),w=this.internal.getCoordinateString,T=this.internal.getVerticalCoordinateString;n.pageContext.annotations.push({finalBounds:{x:w(a),y:T(r),w:w(a+s),h:T(r+l)},options:h,type:"link"})},t.textWithLink=function(a,r,s,l){var h,n,w=this.getTextWidth(a),T=this.internal.getLineHeight()/this.internal.scaleFactor;if(l.maxWidth!==void 0){n=l.maxWidth;var P=this.splitTextToSize(a,n).length;h=Math.ceil(T*P)}else n=w,h=T;return this.text(a,r,s,l),s+=.2*T,l.align==="center"&&(r-=w/2),l.align==="right"&&(r-=w),this.link(r,s-T,n,h,l),w},t.getTextWidth=function(a){var r=this.internal.getFontSize();return this.getStringUnitWidth(a)*r/this.internal.scaleFactor}}(jn.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},a={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];t.__arabicParser__={};var l=t.__arabicParser__.isInArabicSubstitutionA=function(H){return e[H.charCodeAt(0)]!==void 0},h=t.__arabicParser__.isArabicLetter=function(H){return typeof H=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(H)},n=t.__arabicParser__.isArabicEndLetter=function(H){return h(H)&&l(H)&&e[H.charCodeAt(0)].length<=2},w=t.__arabicParser__.isArabicAlfLetter=function(H){return h(H)&&s.indexOf(H.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(H){return h(H)&&l(H)&&e[H.charCodeAt(0)].length>=1};var T=t.__arabicParser__.arabicLetterHasFinalForm=function(H){return h(H)&&l(H)&&e[H.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(H){return h(H)&&l(H)&&e[H.charCodeAt(0)].length>=3};var P=t.__arabicParser__.arabicLetterHasMedialForm=function(H){return h(H)&&l(H)&&e[H.charCodeAt(0)].length==4},z=t.__arabicParser__.resolveLigatures=function(H){var q=0,J=a,re="",ce=0;for(q=0;q<H.length;q+=1)J[H.charCodeAt(q)]!==void 0?(ce++,typeof(J=J[H.charCodeAt(q)])=="number"&&(re+=String.fromCharCode(J),J=a,ce=0),q===H.length-1&&(J=a,re+=H.charAt(q-(ce-1)),q-=ce-1,ce=0)):(J=a,re+=H.charAt(q-ce),q-=ce,ce=0);return re};t.__arabicParser__.isArabicDiacritic=function(H){return H!==void 0&&r[H.charCodeAt(0)]!==void 0};var k=t.__arabicParser__.getCorrectForm=function(H,q,J){return h(H)?l(H)===!1?-1:!T(H)||!h(q)&&!h(J)||!h(J)&&n(q)||n(H)&&!h(q)||n(H)&&w(q)||n(H)&&n(q)?0:P(H)&&h(q)&&!n(q)&&h(J)&&T(J)?3:n(H)||!h(J)?1:2:-1},U=function(H){var q=0,J=0,re=0,ce="",ye="",he="",_e=(H=H||"").split("\\s+"),me=[];for(q=0;q<_e.length;q+=1){for(me.push(""),J=0;J<_e[q].length;J+=1)ce=_e[q][J],ye=_e[q][J-1],he=_e[q][J+1],h(ce)?(re=k(ce,ye,he),me[q]+=re!==-1?String.fromCharCode(e[ce.charCodeAt(0)][re]):ce):me[q]+=ce;me[q]=z(me[q])}return me.join(" ")},Z=t.__arabicParser__.processArabic=t.processArabic=function(){var H,q=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,J=[];if(Array.isArray(q)){var re=0;for(J=[],re=0;re<q.length;re+=1)Array.isArray(q[re])?J.push([U(q[re][0]),q[re][1],q[re][2]]):J.push([U(q[re])]);H=J}else H=U(q);return typeof arguments[0]=="string"?H:(arguments[0].text=H,arguments[0])};t.events.push(["preProcessText",Z])}(jn.API),jn.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var a=void 0;Object.defineProperty(this,"pdf",{get:function(){return a},set:function(n){a=n}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(n){r=isNaN(n)||Number.isInteger(n)===!1||n<0?150:n,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(n){s=isNaN(n)||Number.isInteger(n)===!1||n<0?300:n,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var l=[];Object.defineProperty(this,"childNodes",{get:function(){return l},set:function(n){l=n}});var h={};Object.defineProperty(this,"style",{get:function(){return h},set:function(n){h=n}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(a,r){var s;if((a=a||"2d")!=="2d")return null;for(s in r)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=r[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(jn.API),function(t){var e={left:0,top:0,bottom:0,right:0},a=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new l,this.internal.__cell__.pages=1},l=function(){var w=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return w},set:function(H){w=H}});var T=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return T},set:function(H){T=H}});var P=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return P},set:function(H){P=H}});var z=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return z},set:function(H){z=H}});var k=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return k},set:function(H){k=H}});var U=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return U},set:function(H){U=H}});var Z=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return Z},set:function(H){Z=H}}),this};l.prototype.clone=function(){return new l(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},l.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(w){return r.call(this),this.internal.__cell__.headerFunction=typeof w=="function"?w:void 0,this},t.getTextDimensions=function(w,T){r.call(this);var P=(T=T||{}).fontSize||this.getFontSize(),z=T.font||this.getFont(),k=T.scaleFactor||this.internal.scaleFactor,U=0,Z=0,H=0,q=this;if(!Array.isArray(w)&&typeof w!="string"){if(typeof w!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");w=String(w)}var J=T.maxWidth;J>0?typeof w=="string"?w=this.splitTextToSize(w,J):Object.prototype.toString.call(w)==="[object Array]"&&(w=w.reduce(function(ce,ye){return ce.concat(q.splitTextToSize(ye,J))},[])):w=Array.isArray(w)?w:[w];for(var re=0;re<w.length;re++)U<(H=this.getStringUnitWidth(w[re],{font:z})*P)&&(U=H);return U!==0&&(Z=w.length),{w:U/=k,h:Math.max((Z*P*this.getLineHeightFactor()-P*(this.getLineHeightFactor()-1))/k,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var w=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new l(w.left,w.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var h=t.cell=function(){var w;w=arguments[0]instanceof l?arguments[0]:new l(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var T=this.internal.__cell__.lastCell,P=this.internal.__cell__.padding,z=this.internal.__cell__.margins||e,k=this.internal.__cell__.tableHeaderRow,U=this.internal.__cell__.printHeaders;return T.lineNumber!==void 0&&(T.lineNumber===w.lineNumber?(w.x=(T.x||0)+(T.width||0),w.y=T.y||0):T.y+T.height+w.height+z.bottom>this.getPageHeight()?(this.cellAddPage(),w.y=z.top,U&&k&&(this.printHeaderRow(w.lineNumber,!0),w.y+=k[0].height)):w.y=T.y+T.height||w.y),w.text[0]!==void 0&&(this.rect(w.x,w.y,w.width,w.height,a===!0?"FD":void 0),w.align==="right"?this.text(w.text,w.x+w.width-P,w.y+P,{align:"right",baseline:"top"}):w.align==="center"?this.text(w.text,w.x+w.width/2,w.y+P,{align:"center",baseline:"top",maxWidth:w.width-P-P}):this.text(w.text,w.x+P,w.y+P,{align:"left",baseline:"top",maxWidth:w.width-P-P})),this.internal.__cell__.lastCell=w,this};t.table=function(w,T,P,z,k){if(r.call(this),!P)throw new Error("No data for PDF table.");var U,Z,H,q,J=[],re=[],ce=[],ye={},he={},_e=[],me=[],Re=(k=k||{}).autoSize||!1,be=k.printHeaders!==!1,De=k.css&&k.css["font-size"]!==void 0?16*k.css["font-size"]:k.fontSize||12,ie=k.margins||Object.assign({width:this.getPageWidth()},e),ge=typeof k.padding=="number"?k.padding:3,Me=k.headerBackgroundColor||"#c8c8c8",ze=k.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=be,this.internal.__cell__.margins=ie,this.internal.__cell__.table_font_size=De,this.internal.__cell__.padding=ge,this.internal.__cell__.headerBackgroundColor=Me,this.internal.__cell__.headerTextColor=ze,this.setFontSize(De),z==null)re=J=Object.keys(P[0]),ce=J.map(function(){return"left"});else if(Array.isArray(z)&&Ls(z[0])==="object")for(J=z.map(function(Ue){return Ue.name}),re=z.map(function(Ue){return Ue.prompt||Ue.name||""}),ce=z.map(function(Ue){return Ue.align||"left"}),U=0;U<z.length;U+=1)he[z[U].name]=z[U].width*(19.049976/25.4);else Array.isArray(z)&&typeof z[0]=="string"&&(re=J=z,ce=J.map(function(){return"left"}));if(Re||Array.isArray(z)&&typeof z[0]=="string")for(U=0;U<J.length;U+=1){for(ye[q=J[U]]=P.map(function(Ue){return Ue[q]}),this.setFont(void 0,"bold"),_e.push(this.getTextDimensions(re[U],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),Z=ye[q],this.setFont(void 0,"normal"),H=0;H<Z.length;H+=1)_e.push(this.getTextDimensions(Z[H],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);he[q]=Math.max.apply(null,_e)+ge+ge,_e=[]}if(be){var Le={};for(U=0;U<J.length;U+=1)Le[J[U]]={},Le[J[U]].text=re[U],Le[J[U]].align=ce[U];var Ie=n.call(this,Le,he);me=J.map(function(Ue){return new l(w,T,he[Ue],Ie,Le[Ue].text,void 0,Le[Ue].align)}),this.setTableHeaderRow(me),this.printHeaderRow(1,!1)}var Ze=z.reduce(function(Ue,He){return Ue[He.name]=He.align,Ue},{});for(U=0;U<P.length;U+=1){"rowStart"in k&&k.rowStart instanceof Function&&k.rowStart({row:U,data:P[U]},this);var ke=n.call(this,P[U],he);for(H=0;H<J.length;H+=1){var tt=P[U][J[H]];"cellStart"in k&&k.cellStart instanceof Function&&k.cellStart({row:U,col:H,data:tt},this),h.call(this,new l(w,T,he[J[H]],ke,tt,U+2,Ze[J[H]]))}}return this.internal.__cell__.table_x=w,this.internal.__cell__.table_y=T,this};var n=function(w,T){var P=this.internal.__cell__.padding,z=this.internal.__cell__.table_font_size,k=this.internal.scaleFactor;return Object.keys(w).map(function(U){var Z=w[U];return this.splitTextToSize(Z.hasOwnProperty("text")?Z.text:Z,T[U]-P-P)},this).map(function(U){return this.getLineHeightFactor()*U.length*z/k+P+P},this).reduce(function(U,Z){return Math.max(U,Z)},0)};t.setTableHeaderRow=function(w){r.call(this),this.internal.__cell__.tableHeaderRow=w},t.printHeaderRow=function(w,T){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var P;if(a=!0,typeof this.internal.__cell__.headerFunction=="function"){var z=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new l(z[0],z[1],z[2],z[3],void 0,-1)}this.setFont(void 0,"bold");for(var k=[],U=0;U<this.internal.__cell__.tableHeaderRow.length;U+=1){P=this.internal.__cell__.tableHeaderRow[U].clone(),T&&(P.y=this.internal.__cell__.margins.top||0,k.push(P)),P.lineNumber=w;var Z=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),h.call(this,P),this.setTextColor(Z)}k.length>0&&this.setTableHeaderRow(k),this.setFont(void 0,"normal"),a=!1}}(jn.API);var TQ={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},SQ=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],cI=RQ(SQ),CQ=[100,200,300,400,500,600,700,800,900],eEe=RQ(CQ);function dI(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),a=function(l){return TQ[l=l||"normal"]?l:"normal"}(t.style),r=function(l){if(!l)return 400;if(typeof l=="number")return l>=100&&l<=900&&l%100==0?l:400;if(/^\d00$/.test(l))return parseInt(l);switch(l){case"bold":return 700;case"normal":default:return 400}}(t.weight),s=function(l){return typeof cI[l=l||"normal"]=="number"?l:"normal"}(t.stretch);return{family:e,style:a,weight:r,stretch:s,src:t.src||[],ref:t.ref||{name:e,style:[s,a,r].join(" ")}}}function YZ(t,e,a,r){var s;for(s=a;s>=0&&s<e.length;s+=r)if(t[e[s]])return t[e[s]];for(s=a;s>=0&&s<e.length;s-=r)if(t[e[s]])return t[e[s]]}var tEe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},XZ={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function JZ(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function aEe(t,e,a){for(var r=(a=a||{}).defaultFontFamily||"times",s=Object.assign({},tEe,a.genericFontFamilies||{}),l=null,h=null,n=0;n<e.length;++n)if(s[(l=dI(e[n])).family]&&(l.family=s[l.family]),t.hasOwnProperty(l.family)){h=t[l.family];break}if(!(h=h||t[r]))throw new Error("Could not find a font-family for the rule '"+JZ(l)+"' and default family '"+r+"'.");if(h=function(w,T){if(T[w])return T[w];var P=cI[w],z=P<=cI.normal?-1:1,k=YZ(T,SQ,P,z);if(!k)throw new Error("Could not find a matching font-stretch value for "+w);return k}(l.stretch,h),h=function(w,T){if(T[w])return T[w];for(var P=TQ[w],z=0;z<P.length;++z)if(T[P[z]])return T[P[z]];throw new Error("Could not find a matching font-style for "+w)}(l.style,h),!(h=function(w,T){if(T[w])return T[w];if(w===400&&T[500])return T[500];if(w===500&&T[400])return T[400];var P=eEe[w],z=YZ(T,CQ,P,w<400?-1:1);if(!z)throw new Error("Could not find a matching font-weight for value "+w);return z}(l.weight,h)))throw new Error("Failed to resolve a font for the rule '"+JZ(l)+"'.");return h}function QZ(t){return t.trimLeft()}function rEe(t,e){for(var a=0;a<t.length;){if(t.charAt(a)===e)return[t.substring(0,a),t.substring(a+1)];a+=1}return null}function nEe(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var MC,eq,tq,F5=["times"];(function(t){var e,a,r,s,l,h,n,w,T,P=function(Ce){return Ce=Ce||{},this.isStrokeTransparent=Ce.isStrokeTransparent||!1,this.strokeOpacity=Ce.strokeOpacity||1,this.strokeStyle=Ce.strokeStyle||"#000000",this.fillStyle=Ce.fillStyle||"#000000",this.isFillTransparent=Ce.isFillTransparent||!1,this.fillOpacity=Ce.fillOpacity||1,this.font=Ce.font||"10px sans-serif",this.textBaseline=Ce.textBaseline||"alphabetic",this.textAlign=Ce.textAlign||"left",this.lineWidth=Ce.lineWidth||1,this.lineJoin=Ce.lineJoin||"miter",this.lineCap=Ce.lineCap||"butt",this.path=Ce.path||[],this.transform=Ce.transform!==void 0?Ce.transform.clone():new w,this.globalCompositeOperation=Ce.globalCompositeOperation||"normal",this.globalAlpha=Ce.globalAlpha||1,this.clip_path=Ce.clip_path||[],this.currentPoint=Ce.currentPoint||new h,this.miterLimit=Ce.miterLimit||10,this.lastPoint=Ce.lastPoint||new h,this.lineDashOffset=Ce.lineDashOffset||0,this.lineDash=Ce.lineDash||[],this.margin=Ce.margin||[0,0,0,0],this.prevPageLastElemOffset=Ce.prevPageLastElemOffset||0,this.ignoreClearRect=typeof Ce.ignoreClearRect!="boolean"||Ce.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new z(this),e=this.internal.f2,a=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,l=this.internal.getVerticalCoordinate,h=this.internal.Point,n=this.internal.Rectangle,w=this.internal.Matrix,T=new P}]);var z=function(Ce){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Se=Ce;Object.defineProperty(this,"pdf",{get:function(){return Se}});var $e=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return $e},set:function(ta){$e=!!ta}});var ht=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ht},set:function(ta){ht=!!ta}});var ft=0;Object.defineProperty(this,"posX",{get:function(){return ft},set:function(ta){isNaN(ta)||(ft=ta)}});var ut=0;Object.defineProperty(this,"posY",{get:function(){return ut},set:function(ta){isNaN(ta)||(ut=ta)}}),Object.defineProperty(this,"margin",{get:function(){return T.margin},set:function(ta){var vt;typeof ta=="number"?vt=[ta,ta,ta,ta]:((vt=new Array(4))[0]=ta[0],vt[1]=ta.length>=2?ta[1]:vt[0],vt[2]=ta.length>=3?ta[2]:vt[0],vt[3]=ta.length>=4?ta[3]:vt[1]),T.margin=vt}});var Rt=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Rt},set:function(ta){Rt=ta}});var We=0;Object.defineProperty(this,"lastBreak",{get:function(){return We},set:function(ta){We=ta}});var Ae=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ae},set:function(ta){Ae=ta}}),Object.defineProperty(this,"ctx",{get:function(){return T},set:function(ta){ta instanceof P&&(T=ta)}}),Object.defineProperty(this,"path",{get:function(){return T.path},set:function(ta){T.path=ta}});var qt=[];Object.defineProperty(this,"ctxStack",{get:function(){return qt},set:function(ta){qt=ta}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ta){var vt;vt=k(ta),this.ctx.fillStyle=vt.style,this.ctx.isFillTransparent=vt.a===0,this.ctx.fillOpacity=vt.a,this.pdf.setFillColor(vt.r,vt.g,vt.b,{a:vt.a}),this.pdf.setTextColor(vt.r,vt.g,vt.b,{a:vt.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ta){var vt=k(ta);this.ctx.strokeStyle=vt.style,this.ctx.isStrokeTransparent=vt.a===0,this.ctx.strokeOpacity=vt.a,vt.a===0?this.pdf.setDrawColor(255,255,255):(vt.a,this.pdf.setDrawColor(vt.r,vt.g,vt.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ta){["butt","round","square"].indexOf(ta)!==-1&&(this.ctx.lineCap=ta,this.pdf.setLineCap(ta))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ta){isNaN(ta)||(this.ctx.lineWidth=ta,this.pdf.setLineWidth(ta))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ta){["bevel","round","miter"].indexOf(ta)!==-1&&(this.ctx.lineJoin=ta,this.pdf.setLineJoin(ta))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ta){isNaN(ta)||(this.ctx.miterLimit=ta,this.pdf.setMiterLimit(ta))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ta){this.ctx.textBaseline=ta}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ta){["right","end","center","left","start"].indexOf(ta)!==-1&&(this.ctx.textAlign=ta)}});var Gt=null;function Aa(ta,vt){if(Gt===null){var or=function(Na){var za=[];return Object.keys(Na).forEach(function(er){Na[er].forEach(function(dr){var cr=null;switch(dr){case"bold":cr={family:er,weight:"bold"};break;case"italic":cr={family:er,style:"italic"};break;case"bolditalic":cr={family:er,weight:"bold",style:"italic"};break;case"":case"normal":cr={family:er}}cr!==null&&(cr.ref={name:er,style:dr},za.push(cr))})}),za}(ta.getFontList());Gt=function(Na){for(var za={},er=0;er<Na.length;++er){var dr=dI(Na[er]),cr=dr.family,Pr=dr.stretch,ka=dr.style,jr=dr.weight;za[cr]=za[cr]||{},za[cr][Pr]=za[cr][Pr]||{},za[cr][Pr][ka]=za[cr][Pr][ka]||{},za[cr][Pr][ka][jr]=dr}return za}(or.concat(vt))}return Gt}var It=null;Object.defineProperty(this,"fontFaces",{get:function(){return It},set:function(ta){Gt=null,It=ta}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ta){var vt;if(this.ctx.font=ta,(vt=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ta))!==null){var or=vt[1];vt[2];var Na=vt[3],za=vt[4];vt[5];var er=vt[6],dr=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(za)[2];za=Math.floor(dr==="px"?parseFloat(za)*this.pdf.internal.scaleFactor:dr==="em"?parseFloat(za)*this.pdf.getFontSize():parseFloat(za)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(za);var cr=function(wa){var Wa,ca,Qa=[],gr=wa.trim();if(gr==="")return F5;if(gr in XZ)return[XZ[gr]];for(;gr!=="";){switch(ca=null,Wa=(gr=QZ(gr)).charAt(0)){case'"':case"'":ca=rEe(gr.substring(1),Wa);break;default:ca=nEe(gr)}if(ca===null||(Qa.push(ca[0]),(gr=QZ(ca[1]))!==""&&gr.charAt(0)!==","))return F5;gr=gr.replace(/^,/,"")}return Qa}(er);if(this.fontFaces){var Pr=aEe(Aa(this.pdf,this.fontFaces),cr.map(function(wa){return{family:wa,stretch:"normal",weight:Na,style:or}}));this.pdf.setFont(Pr.ref.name,Pr.ref.style)}else{var ka="";(Na==="bold"||parseInt(Na,10)>=700||or==="bold")&&(ka="bold"),or==="italic"&&(ka+="italic"),ka.length===0&&(ka="normal");for(var jr="",pn={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Dn=0;Dn<cr.length;Dn++){if(this.pdf.internal.getFont(cr[Dn],ka,{noFallback:!0,disableWarning:!0})!==void 0){jr=cr[Dn];break}if(ka==="bolditalic"&&this.pdf.internal.getFont(cr[Dn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)jr=cr[Dn],ka="bold";else if(this.pdf.internal.getFont(cr[Dn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){jr=cr[Dn],ka="normal";break}}if(jr===""){for(var Rn=0;Rn<cr.length;Rn++)if(pn[cr[Rn]]){jr=pn[cr[Rn]];break}}jr=jr===""?"Times":jr,this.pdf.setFont(jr,ka)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ta){this.ctx.globalCompositeOperation=ta}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ta){this.ctx.globalAlpha=ta}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ta){this.ctx.lineDashOffset=ta,He.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ta){this.ctx.lineDash=ta,He.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ta){this.ctx.ignoreClearRect=!!ta}})};z.prototype.setLineDash=function(Ce){this.lineDash=Ce},z.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},z.prototype.fill=function(){ye.call(this,"fill",!1)},z.prototype.stroke=function(){ye.call(this,"stroke",!1)},z.prototype.beginPath=function(){this.path=[{type:"begin"}]},z.prototype.moveTo=function(Ce,Se){if(isNaN(Ce)||isNaN(Se))throw io.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var $e=this.ctx.transform.applyToPoint(new h(Ce,Se));this.path.push({type:"mt",x:$e.x,y:$e.y}),this.ctx.lastPoint=new h(Ce,Se)},z.prototype.closePath=function(){var Ce=new h(0,0),Se=0;for(Se=this.path.length-1;Se!==-1;Se--)if(this.path[Se].type==="begin"&&Ls(this.path[Se+1])==="object"&&typeof this.path[Se+1].x=="number"){Ce=new h(this.path[Se+1].x,this.path[Se+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new h(Ce.x,Ce.y)},z.prototype.lineTo=function(Ce,Se){if(isNaN(Ce)||isNaN(Se))throw io.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var $e=this.ctx.transform.applyToPoint(new h(Ce,Se));this.path.push({type:"lt",x:$e.x,y:$e.y}),this.ctx.lastPoint=new h($e.x,$e.y)},z.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),ye.call(this,null,!0)},z.prototype.quadraticCurveTo=function(Ce,Se,$e,ht){if(isNaN($e)||isNaN(ht)||isNaN(Ce)||isNaN(Se))throw io.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ft=this.ctx.transform.applyToPoint(new h($e,ht)),ut=this.ctx.transform.applyToPoint(new h(Ce,Se));this.path.push({type:"qct",x1:ut.x,y1:ut.y,x:ft.x,y:ft.y}),this.ctx.lastPoint=new h(ft.x,ft.y)},z.prototype.bezierCurveTo=function(Ce,Se,$e,ht,ft,ut){if(isNaN(ft)||isNaN(ut)||isNaN(Ce)||isNaN(Se)||isNaN($e)||isNaN(ht))throw io.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Rt=this.ctx.transform.applyToPoint(new h(ft,ut)),We=this.ctx.transform.applyToPoint(new h(Ce,Se)),Ae=this.ctx.transform.applyToPoint(new h($e,ht));this.path.push({type:"bct",x1:We.x,y1:We.y,x2:Ae.x,y2:Ae.y,x:Rt.x,y:Rt.y}),this.ctx.lastPoint=new h(Rt.x,Rt.y)},z.prototype.arc=function(Ce,Se,$e,ht,ft,ut){if(isNaN(Ce)||isNaN(Se)||isNaN($e)||isNaN(ht)||isNaN(ft))throw io.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ut=!!ut,!this.ctx.transform.isIdentity){var Rt=this.ctx.transform.applyToPoint(new h(Ce,Se));Ce=Rt.x,Se=Rt.y;var We=this.ctx.transform.applyToPoint(new h(0,$e)),Ae=this.ctx.transform.applyToPoint(new h(0,0));$e=Math.sqrt(Math.pow(We.x-Ae.x,2)+Math.pow(We.y-Ae.y,2))}Math.abs(ft-ht)>=2*Math.PI&&(ht=0,ft=2*Math.PI),this.path.push({type:"arc",x:Ce,y:Se,radius:$e,startAngle:ht,endAngle:ft,counterclockwise:ut})},z.prototype.arcTo=function(Ce,Se,$e,ht,ft){throw new Error("arcTo not implemented.")},z.prototype.rect=function(Ce,Se,$e,ht){if(isNaN(Ce)||isNaN(Se)||isNaN($e)||isNaN(ht))throw io.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(Ce,Se),this.lineTo(Ce+$e,Se),this.lineTo(Ce+$e,Se+ht),this.lineTo(Ce,Se+ht),this.lineTo(Ce,Se),this.lineTo(Ce+$e,Se),this.lineTo(Ce,Se)},z.prototype.fillRect=function(Ce,Se,$e,ht){if(isNaN(Ce)||isNaN(Se)||isNaN($e)||isNaN(ht))throw io.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!U.call(this)){var ft={};this.lineCap!=="butt"&&(ft.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ft.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(Ce,Se,$e,ht),this.fill(),ft.hasOwnProperty("lineCap")&&(this.lineCap=ft.lineCap),ft.hasOwnProperty("lineJoin")&&(this.lineJoin=ft.lineJoin)}},z.prototype.strokeRect=function(Ce,Se,$e,ht){if(isNaN(Ce)||isNaN(Se)||isNaN($e)||isNaN(ht))throw io.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");Z.call(this)||(this.beginPath(),this.rect(Ce,Se,$e,ht),this.stroke())},z.prototype.clearRect=function(Ce,Se,$e,ht){if(isNaN(Ce)||isNaN(Se)||isNaN($e)||isNaN(ht))throw io.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(Ce,Se,$e,ht))},z.prototype.save=function(Ce){Ce=typeof Ce!="boolean"||Ce;for(var Se=this.pdf.internal.getCurrentPageInfo().pageNumber,$e=0;$e<this.pdf.internal.getNumberOfPages();$e++)this.pdf.setPage($e+1),this.pdf.internal.out("q");if(this.pdf.setPage(Se),Ce){this.ctx.fontSize=this.pdf.internal.getFontSize();var ht=new P(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ht}},z.prototype.restore=function(Ce){Ce=typeof Ce!="boolean"||Ce;for(var Se=this.pdf.internal.getCurrentPageInfo().pageNumber,$e=0;$e<this.pdf.internal.getNumberOfPages();$e++)this.pdf.setPage($e+1),this.pdf.internal.out("Q");this.pdf.setPage(Se),Ce&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},z.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var k=function(Ce){var Se,$e,ht,ft;if(Ce.isCanvasGradient===!0&&(Ce=Ce.getColor()),!Ce)return{r:0,g:0,b:0,a:0,style:Ce};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(Ce))Se=0,$e=0,ht=0,ft=0;else{var ut=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(Ce);if(ut!==null)Se=parseInt(ut[1]),$e=parseInt(ut[2]),ht=parseInt(ut[3]),ft=1;else if((ut=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(Ce))!==null)Se=parseInt(ut[1]),$e=parseInt(ut[2]),ht=parseInt(ut[3]),ft=parseFloat(ut[4]);else{if(ft=1,typeof Ce=="string"&&Ce.charAt(0)!=="#"){var Rt=new yQ(Ce);Ce=Rt.ok?Rt.toHex():"#000000"}Ce.length===4?(Se=Ce.substring(1,2),Se+=Se,$e=Ce.substring(2,3),$e+=$e,ht=Ce.substring(3,4),ht+=ht):(Se=Ce.substring(1,3),$e=Ce.substring(3,5),ht=Ce.substring(5,7)),Se=parseInt(Se,16),$e=parseInt($e,16),ht=parseInt(ht,16)}}return{r:Se,g:$e,b:ht,a:ft,style:Ce}},U=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},Z=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};z.prototype.fillText=function(Ce,Se,$e,ht){if(isNaN(Se)||isNaN($e)||typeof Ce!="string")throw io.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ht=isNaN(ht)?void 0:ht,!U.call(this)){var ft=ke(this.ctx.transform.rotation),ut=this.ctx.transform.scaleX;ge.call(this,{text:Ce,x:Se,y:$e,scale:ut,angle:ft,align:this.textAlign,maxWidth:ht})}},z.prototype.strokeText=function(Ce,Se,$e,ht){if(isNaN(Se)||isNaN($e)||typeof Ce!="string")throw io.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!Z.call(this)){ht=isNaN(ht)?void 0:ht;var ft=ke(this.ctx.transform.rotation),ut=this.ctx.transform.scaleX;ge.call(this,{text:Ce,x:Se,y:$e,scale:ut,renderingMode:"stroke",angle:ft,align:this.textAlign,maxWidth:ht})}},z.prototype.measureText=function(Ce){if(typeof Ce!="string")throw io.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Se=this.pdf,$e=this.pdf.internal.scaleFactor,ht=Se.internal.getFontSize(),ft=Se.getStringUnitWidth(Ce)*ht/Se.internal.scaleFactor,ut=function(Rt){var We=(Rt=Rt||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return We}}),this};return new ut({width:ft*=Math.round(96*$e/72*1e4)/1e4})},z.prototype.scale=function(Ce,Se){if(isNaN(Ce)||isNaN(Se))throw io.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var $e=new w(Ce,0,0,Se,0,0);this.ctx.transform=this.ctx.transform.multiply($e)},z.prototype.rotate=function(Ce){if(isNaN(Ce))throw io.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Se=new w(Math.cos(Ce),Math.sin(Ce),-Math.sin(Ce),Math.cos(Ce),0,0);this.ctx.transform=this.ctx.transform.multiply(Se)},z.prototype.translate=function(Ce,Se){if(isNaN(Ce)||isNaN(Se))throw io.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var $e=new w(1,0,0,1,Ce,Se);this.ctx.transform=this.ctx.transform.multiply($e)},z.prototype.transform=function(Ce,Se,$e,ht,ft,ut){if(isNaN(Ce)||isNaN(Se)||isNaN($e)||isNaN(ht)||isNaN(ft)||isNaN(ut))throw io.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Rt=new w(Ce,Se,$e,ht,ft,ut);this.ctx.transform=this.ctx.transform.multiply(Rt)},z.prototype.setTransform=function(Ce,Se,$e,ht,ft,ut){Ce=isNaN(Ce)?1:Ce,Se=isNaN(Se)?0:Se,$e=isNaN($e)?0:$e,ht=isNaN(ht)?1:ht,ft=isNaN(ft)?0:ft,ut=isNaN(ut)?0:ut,this.ctx.transform=new w(Ce,Se,$e,ht,ft,ut)};var H=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};z.prototype.drawImage=function(Ce,Se,$e,ht,ft,ut,Rt,We,Ae){var qt=this.pdf.getImageProperties(Ce),Gt=1,Aa=1,It=1,ta=1;ht!==void 0&&We!==void 0&&(It=We/ht,ta=Ae/ft,Gt=qt.width/ht*We/ht,Aa=qt.height/ft*Ae/ft),ut===void 0&&(ut=Se,Rt=$e,Se=0,$e=0),ht!==void 0&&We===void 0&&(We=ht,Ae=ft),ht===void 0&&We===void 0&&(We=qt.width,Ae=qt.height);for(var vt,or=this.ctx.transform.decompose(),Na=ke(or.rotate.shx),za=new w,er=(za=(za=(za=za.multiply(or.translate)).multiply(or.skew)).multiply(or.scale)).applyToRectangle(new n(ut-Se*It,Rt-$e*ta,ht*Gt,ft*Aa)),dr=q.call(this,er),cr=[],Pr=0;Pr<dr.length;Pr+=1)cr.indexOf(dr[Pr])===-1&&cr.push(dr[Pr]);if(ce(cr),this.autoPaging)for(var ka=cr[0],jr=cr[cr.length-1],pn=ka;pn<jr+1;pn++){this.pdf.setPage(pn);var Dn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Rn=pn===1?this.posY+this.margin[0]:this.margin[0],wa=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Wa=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ca=pn===1?0:wa+(pn-2)*Wa;if(this.ctx.clip_path.length!==0){var Qa=this.path;vt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=re(vt,this.posX+this.margin[3],-ca+Rn+this.ctx.prevPageLastElemOffset),he.call(this,"fill",!0),this.path=Qa}var gr=JSON.parse(JSON.stringify(er));gr=re([gr],this.posX+this.margin[3],-ca+Rn+this.ctx.prevPageLastElemOffset)[0];var qn=(pn>ka||pn<jr)&&H.call(this);qn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Dn,Wa,null).clip().discardPath()),this.pdf.addImage(Ce,"JPEG",gr.x,gr.y,gr.w,gr.h,null,null,Na),qn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(Ce,"JPEG",er.x,er.y,er.w,er.h,null,null,Na)};var q=function(Ce,Se,$e){var ht=[];Se=Se||this.pdf.internal.pageSize.width,$e=$e||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ft=this.posY+this.ctx.prevPageLastElemOffset;switch(Ce.type){default:case"mt":case"lt":ht.push(Math.floor((Ce.y+ft)/$e)+1);break;case"arc":ht.push(Math.floor((Ce.y+ft-Ce.radius)/$e)+1),ht.push(Math.floor((Ce.y+ft+Ce.radius)/$e)+1);break;case"qct":var ut=tt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Ce.x1,Ce.y1,Ce.x,Ce.y);ht.push(Math.floor((ut.y+ft)/$e)+1),ht.push(Math.floor((ut.y+ut.h+ft)/$e)+1);break;case"bct":var Rt=Ue(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Ce.x1,Ce.y1,Ce.x2,Ce.y2,Ce.x,Ce.y);ht.push(Math.floor((Rt.y+ft)/$e)+1),ht.push(Math.floor((Rt.y+Rt.h+ft)/$e)+1);break;case"rect":ht.push(Math.floor((Ce.y+ft)/$e)+1),ht.push(Math.floor((Ce.y+Ce.h+ft)/$e)+1)}for(var We=0;We<ht.length;We+=1)for(;this.pdf.internal.getNumberOfPages()<ht[We];)J.call(this);return ht},J=function(){var Ce=this.fillStyle,Se=this.strokeStyle,$e=this.font,ht=this.lineCap,ft=this.lineWidth,ut=this.lineJoin;this.pdf.addPage(),this.fillStyle=Ce,this.strokeStyle=Se,this.font=$e,this.lineCap=ht,this.lineWidth=ft,this.lineJoin=ut},re=function(Ce,Se,$e){for(var ht=0;ht<Ce.length;ht++)switch(Ce[ht].type){case"bct":Ce[ht].x2+=Se,Ce[ht].y2+=$e;case"qct":Ce[ht].x1+=Se,Ce[ht].y1+=$e;case"mt":case"lt":case"arc":default:Ce[ht].x+=Se,Ce[ht].y+=$e}return Ce},ce=function(Ce){return Ce.sort(function(Se,$e){return Se-$e})},ye=function(Ce,Se){for(var $e,ht,ft=this.fillStyle,ut=this.strokeStyle,Rt=this.lineCap,We=this.lineWidth,Ae=Math.abs(We*this.ctx.transform.scaleX),qt=this.lineJoin,Gt=JSON.parse(JSON.stringify(this.path)),Aa=JSON.parse(JSON.stringify(this.path)),It=[],ta=0;ta<Aa.length;ta++)if(Aa[ta].x!==void 0)for(var vt=q.call(this,Aa[ta]),or=0;or<vt.length;or+=1)It.indexOf(vt[or])===-1&&It.push(vt[or]);for(var Na=0;Na<It.length;Na++)for(;this.pdf.internal.getNumberOfPages()<It[Na];)J.call(this);if(ce(It),this.autoPaging)for(var za=It[0],er=It[It.length-1],dr=za;dr<er+1;dr++){this.pdf.setPage(dr),this.fillStyle=ft,this.strokeStyle=ut,this.lineCap=Rt,this.lineWidth=Ae,this.lineJoin=qt;var cr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Pr=dr===1?this.posY+this.margin[0]:this.margin[0],ka=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],jr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],pn=dr===1?0:ka+(dr-2)*jr;if(this.ctx.clip_path.length!==0){var Dn=this.path;$e=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=re($e,this.posX+this.margin[3],-pn+Pr+this.ctx.prevPageLastElemOffset),he.call(this,Ce,!0),this.path=Dn}if(ht=JSON.parse(JSON.stringify(Gt)),this.path=re(ht,this.posX+this.margin[3],-pn+Pr+this.ctx.prevPageLastElemOffset),Se===!1||dr===0){var Rn=(dr>za||dr<er)&&H.call(this);Rn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],cr,jr,null).clip().discardPath()),he.call(this,Ce,Se),Rn&&this.pdf.restoreGraphicsState()}this.lineWidth=We}else this.lineWidth=Ae,he.call(this,Ce,Se),this.lineWidth=We;this.path=Gt},he=function(Ce,Se){if((Ce!=="stroke"||Se||!Z.call(this))&&(Ce==="stroke"||Se||!U.call(this))){for(var $e,ht,ft=[],ut=this.path,Rt=0;Rt<ut.length;Rt++){var We=ut[Rt];switch(We.type){case"begin":ft.push({begin:!0});break;case"close":ft.push({close:!0});break;case"mt":ft.push({start:We,deltas:[],abs:[]});break;case"lt":var Ae=ft.length;if(ut[Rt-1]&&!isNaN(ut[Rt-1].x)&&($e=[We.x-ut[Rt-1].x,We.y-ut[Rt-1].y],Ae>0)){for(;Ae>=0;Ae--)if(ft[Ae-1].close!==!0&&ft[Ae-1].begin!==!0){ft[Ae-1].deltas.push($e),ft[Ae-1].abs.push(We);break}}break;case"bct":$e=[We.x1-ut[Rt-1].x,We.y1-ut[Rt-1].y,We.x2-ut[Rt-1].x,We.y2-ut[Rt-1].y,We.x-ut[Rt-1].x,We.y-ut[Rt-1].y],ft[ft.length-1].deltas.push($e);break;case"qct":var qt=ut[Rt-1].x+2/3*(We.x1-ut[Rt-1].x),Gt=ut[Rt-1].y+2/3*(We.y1-ut[Rt-1].y),Aa=We.x+2/3*(We.x1-We.x),It=We.y+2/3*(We.y1-We.y),ta=We.x,vt=We.y;$e=[qt-ut[Rt-1].x,Gt-ut[Rt-1].y,Aa-ut[Rt-1].x,It-ut[Rt-1].y,ta-ut[Rt-1].x,vt-ut[Rt-1].y],ft[ft.length-1].deltas.push($e);break;case"arc":ft.push({deltas:[],abs:[],arc:!0}),Array.isArray(ft[ft.length-1].abs)&&ft[ft.length-1].abs.push(We)}}ht=Se?null:Ce==="stroke"?"stroke":"fill";for(var or=!1,Na=0;Na<ft.length;Na++)if(ft[Na].arc)for(var za=ft[Na].abs,er=0;er<za.length;er++){var dr=za[er];dr.type==="arc"?Re.call(this,dr.x,dr.y,dr.radius,dr.startAngle,dr.endAngle,dr.counterclockwise,void 0,Se,!or):Me.call(this,dr.x,dr.y),or=!0}else if(ft[Na].close===!0)this.pdf.internal.out("h"),or=!1;else if(ft[Na].begin!==!0){var cr=ft[Na].start.x,Pr=ft[Na].start.y;ze.call(this,ft[Na].deltas,cr,Pr),or=!0}ht&&be.call(this,ht),Se&&De.call(this)}},_e=function(Ce){var Se=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,$e=Se*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return Ce-$e;case"top":return Ce+Se-$e;case"hanging":return Ce+Se-2*$e;case"middle":return Ce+Se/2-$e;case"ideographic":return Ce;case"alphabetic":default:return Ce}},me=function(Ce){return Ce+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};z.prototype.createLinearGradient=function(){var Ce=function(){};return Ce.colorStops=[],Ce.addColorStop=function(Se,$e){this.colorStops.push([Se,$e])},Ce.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},Ce.isCanvasGradient=!0,Ce},z.prototype.createPattern=function(){return this.createLinearGradient()},z.prototype.createRadialGradient=function(){return this.createLinearGradient()};var Re=function(Ce,Se,$e,ht,ft,ut,Rt,We,Ae){for(var qt=Ie.call(this,$e,ht,ft,ut),Gt=0;Gt<qt.length;Gt++){var Aa=qt[Gt];Gt===0&&(Ae?ie.call(this,Aa.x1+Ce,Aa.y1+Se):Me.call(this,Aa.x1+Ce,Aa.y1+Se)),Le.call(this,Ce,Se,Aa.x2,Aa.y2,Aa.x3,Aa.y3,Aa.x4,Aa.y4)}We?De.call(this):be.call(this,Rt)},be=function(Ce){switch(Ce){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},De=function(){this.pdf.clip(),this.pdf.discardPath()},ie=function(Ce,Se){this.pdf.internal.out(a(Ce)+" "+r(Se)+" m")},ge=function(Ce){var Se;switch(Ce.align){case"right":case"end":Se="right";break;case"center":Se="center";break;case"left":case"start":default:Se="left"}var $e=this.pdf.getTextDimensions(Ce.text),ht=_e.call(this,Ce.y),ft=me.call(this,ht)-$e.h,ut=this.ctx.transform.applyToPoint(new h(Ce.x,ht)),Rt=this.ctx.transform.decompose(),We=new w;We=(We=(We=We.multiply(Rt.translate)).multiply(Rt.skew)).multiply(Rt.scale);for(var Ae,qt,Gt,Aa=this.ctx.transform.applyToRectangle(new n(Ce.x,ht,$e.w,$e.h)),It=We.applyToRectangle(new n(Ce.x,ft,$e.w,$e.h)),ta=q.call(this,It),vt=[],or=0;or<ta.length;or+=1)vt.indexOf(ta[or])===-1&&vt.push(ta[or]);if(ce(vt),this.autoPaging)for(var Na=vt[0],za=vt[vt.length-1],er=Na;er<za+1;er++){this.pdf.setPage(er);var dr=er===1?this.posY+this.margin[0]:this.margin[0],cr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Pr=this.pdf.internal.pageSize.height-this.margin[2],ka=Pr-this.margin[0],jr=this.pdf.internal.pageSize.width-this.margin[1],pn=jr-this.margin[3],Dn=er===1?0:cr+(er-2)*ka;if(this.ctx.clip_path.length!==0){var Rn=this.path;Ae=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=re(Ae,this.posX+this.margin[3],-1*Dn+dr),he.call(this,"fill",!0),this.path=Rn}var wa=re([JSON.parse(JSON.stringify(It))],this.posX+this.margin[3],-Dn+dr+this.ctx.prevPageLastElemOffset)[0];Ce.scale>=.01&&(qt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(qt*Ce.scale),Gt=this.lineWidth,this.lineWidth=Gt*Ce.scale);var Wa=this.autoPaging!=="text";if(Wa||wa.y+wa.h<=Pr){if(Wa||wa.y>=dr&&wa.x<=jr){var ca=Wa?Ce.text:this.pdf.splitTextToSize(Ce.text,Ce.maxWidth||jr-wa.x)[0],Qa=re([JSON.parse(JSON.stringify(Aa))],this.posX+this.margin[3],-Dn+dr+this.ctx.prevPageLastElemOffset)[0],gr=Wa&&(er>Na||er<za)&&H.call(this);gr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],pn,ka,null).clip().discardPath()),this.pdf.text(ca,Qa.x,Qa.y,{angle:Ce.angle,align:Se,renderingMode:Ce.renderingMode}),gr&&this.pdf.restoreGraphicsState()}}else wa.y<Pr&&(this.ctx.prevPageLastElemOffset+=Pr-wa.y);Ce.scale>=.01&&(this.pdf.setFontSize(qt),this.lineWidth=Gt)}else Ce.scale>=.01&&(qt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(qt*Ce.scale),Gt=this.lineWidth,this.lineWidth=Gt*Ce.scale),this.pdf.text(Ce.text,ut.x+this.posX,ut.y+this.posY,{angle:Ce.angle,align:Se,renderingMode:Ce.renderingMode,maxWidth:Ce.maxWidth}),Ce.scale>=.01&&(this.pdf.setFontSize(qt),this.lineWidth=Gt)},Me=function(Ce,Se,$e,ht){$e=$e||0,ht=ht||0,this.pdf.internal.out(a(Ce+$e)+" "+r(Se+ht)+" l")},ze=function(Ce,Se,$e){return this.pdf.lines(Ce,Se,$e,null,null)},Le=function(Ce,Se,$e,ht,ft,ut,Rt,We){this.pdf.internal.out([e(s($e+Ce)),e(l(ht+Se)),e(s(ft+Ce)),e(l(ut+Se)),e(s(Rt+Ce)),e(l(We+Se)),"c"].join(" "))},Ie=function(Ce,Se,$e,ht){for(var ft=2*Math.PI,ut=Math.PI/2;Se>$e;)Se-=ft;var Rt=Math.abs($e-Se);Rt<ft&&ht&&(Rt=ft-Rt);for(var We=[],Ae=ht?-1:1,qt=Se;Rt>1e-5;){var Gt=qt+Ae*Math.min(Rt,ut);We.push(Ze.call(this,Ce,qt,Gt)),Rt-=Math.abs(Gt-qt),qt=Gt}return We},Ze=function(Ce,Se,$e){var ht=($e-Se)/2,ft=Ce*Math.cos(ht),ut=Ce*Math.sin(ht),Rt=ft,We=-ut,Ae=Rt*Rt+We*We,qt=Ae+Rt*ft+We*ut,Gt=4/3*(Math.sqrt(2*Ae*qt)-qt)/(Rt*ut-We*ft),Aa=Rt-Gt*We,It=We+Gt*Rt,ta=Aa,vt=-It,or=ht+Se,Na=Math.cos(or),za=Math.sin(or);return{x1:Ce*Math.cos(Se),y1:Ce*Math.sin(Se),x2:Aa*Na-It*za,y2:Aa*za+It*Na,x3:ta*Na-vt*za,y3:ta*za+vt*Na,x4:Ce*Math.cos($e),y4:Ce*Math.sin($e)}},ke=function(Ce){return 180*Ce/Math.PI},tt=function(Ce,Se,$e,ht,ft,ut){var Rt=Ce+.5*($e-Ce),We=Se+.5*(ht-Se),Ae=ft+.5*($e-ft),qt=ut+.5*(ht-ut),Gt=Math.min(Ce,ft,Rt,Ae),Aa=Math.max(Ce,ft,Rt,Ae),It=Math.min(Se,ut,We,qt),ta=Math.max(Se,ut,We,qt);return new n(Gt,It,Aa-Gt,ta-It)},Ue=function(Ce,Se,$e,ht,ft,ut,Rt,We){var Ae,qt,Gt,Aa,It,ta,vt,or,Na,za,er,dr,cr,Pr,ka=$e-Ce,jr=ht-Se,pn=ft-$e,Dn=ut-ht,Rn=Rt-ft,wa=We-ut;for(qt=0;qt<41;qt++)Na=(vt=(Gt=Ce+(Ae=qt/40)*ka)+Ae*((It=$e+Ae*pn)-Gt))+Ae*(It+Ae*(ft+Ae*Rn-It)-vt),za=(or=(Aa=Se+Ae*jr)+Ae*((ta=ht+Ae*Dn)-Aa))+Ae*(ta+Ae*(ut+Ae*wa-ta)-or),qt==0?(er=Na,dr=za,cr=Na,Pr=za):(er=Math.min(er,Na),dr=Math.min(dr,za),cr=Math.max(cr,Na),Pr=Math.max(Pr,za));return new n(Math.round(er),Math.round(dr),Math.round(cr-er),Math.round(Pr-dr))},He=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var Ce,Se,$e=(Ce=this.ctx.lineDash,Se=this.ctx.lineDashOffset,JSON.stringify({lineDash:Ce,lineDashOffset:Se}));this.prevLineDash!==$e&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=$e)}}})(jn.API),function(t){var e=function(l){var h,n,w,T,P,z,k,U,Z,H;for(n=[],w=0,T=(l+=h="\0\0\0\0".slice(l.length%4||4)).length;T>w;w+=4)(P=(l.charCodeAt(w)<<24)+(l.charCodeAt(w+1)<<16)+(l.charCodeAt(w+2)<<8)+l.charCodeAt(w+3))!==0?(z=(P=((P=((P=((P=(P-(H=P%85))/85)-(Z=P%85))/85)-(U=P%85))/85)-(k=P%85))/85)%85,n.push(z+33,k+33,U+33,Z+33,H+33)):n.push(122);return function(q,J){for(var re=J;re>0;re--)q.pop()}(n,h.length),String.fromCharCode.apply(String,n)+"~>"},a=function(l){var h,n,w,T,P,z=String,k="length",U=255,Z="charCodeAt",H="slice",q="replace";for(l[H](-2),l=l[H](0,-2)[q](/\s/g,"")[q]("z","!!!!!"),w=[],T=0,P=(l+=h="uuuuu"[H](l[k]%5||5))[k];P>T;T+=5)n=52200625*(l[Z](T)-33)+614125*(l[Z](T+1)-33)+7225*(l[Z](T+2)-33)+85*(l[Z](T+3)-33)+(l[Z](T+4)-33),w.push(U&n>>24,U&n>>16,U&n>>8,U&n);return function(J,re){for(var ce=re;ce>0;ce--)J.pop()}(w,h[k]),z.fromCharCode.apply(z,w)},r=function(l){var h=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),h.test(l)===!1)return"";for(var n="",w=0;w<l.length;w+=2)n+=String.fromCharCode("0x"+(l[w]+l[w+1]));return n},s=function(l){for(var h=new Uint8Array(l.length),n=l.length;n--;)h[n]=l.charCodeAt(n);return l=(h=iI(h)).reduce(function(w,T){return w+String.fromCharCode(T)},"")};t.processDataByFilters=function(l,h){var n=0,w=l||"",T=[];for(typeof(h=h||[])=="string"&&(h=[h]),n=0;n<h.length;n+=1)switch(h[n]){case"ASCII85Decode":case"/ASCII85Decode":w=a(w),T.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":w=e(w),T.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":w=r(w),T.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":w=w.split("").map(function(P){return("0"+P.charCodeAt().toString(16)).slice(-2)}).join("")+">",T.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":w=s(w),T.push("/FlateDecode");break;default:throw new Error('The filter: "'+h[n]+'" is not implemented')}return{data:w,reverseChain:T.reverse().join(" ")}}}(jn.API),function(t){t.loadFile=function(e,a,r){return function(s,l,h){l=l!==!1,h=typeof h=="function"?h:function(){};var n=void 0;try{n=function(w,T,P){var z=new XMLHttpRequest,k=0,U=function(Z){var H=Z.length,q=[],J=String.fromCharCode;for(k=0;k<H;k+=1)q.push(J(255&Z.charCodeAt(k)));return q.join("")};if(z.open("GET",w,!T),z.overrideMimeType("text/plain; charset=x-user-defined"),T===!1&&(z.onload=function(){z.status===200?P(U(this.responseText)):P(void 0)}),z.send(null),T&&z.status===200)return U(z.responseText)}(s,l,h)}catch{}return n}(e,a,r)},t.loadImageFile=t.loadFile}(jn.API),function(t){function e(){return(Wn.html2canvas?Promise.resolve(Wn.html2canvas):eI(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(h){return Promise.reject(new Error("Could not load html2canvas: "+h))}).then(function(h){return h.default?h.default:h})}function a(){return(Wn.DOMPurify?Promise.resolve(Wn.DOMPurify):eI(()=>import("./purify.es-Ci5xwkH_.js"),[])).catch(function(h){return Promise.reject(new Error("Could not load dompurify: "+h))}).then(function(h){return h.default?h.default:h})}var r=function(h){var n=Ls(h);return n==="undefined"?"undefined":n==="string"||h instanceof String?"string":n==="number"||h instanceof Number?"number":n==="function"||h instanceof Function?"function":h&&h.constructor===Array?"array":h&&h.nodeType===1?"element":n==="object"?"object":"unknown"},s=function(h,n){var w=document.createElement(h);for(var T in n.className&&(w.className=n.className),n.innerHTML&&n.dompurify&&(w.innerHTML=n.dompurify.sanitize(n.innerHTML)),n.style)w.style[T]=n.style[T];return w},l=function h(n){var w=Object.assign(h.convert(Promise.resolve()),JSON.parse(JSON.stringify(h.template))),T=h.convert(Promise.resolve(),w);return T=(T=T.setProgress(1,h,1,[h])).set(n)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(h,n){return h.__proto__=n||l.prototype,h},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(h,n){return this.then(function(){switch(n=n||function(w){switch(r(w)){case"string":return"string";case"element":return w.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(h)){case"string":return this.then(a).then(function(w){return this.set({src:s("div",{innerHTML:h,dompurify:w})})});case"element":return this.set({src:h});case"canvas":return this.set({canvas:h});case"img":return this.set({img:h});default:return this.error("Unknown source type.")}})},l.prototype.to=function(h){switch(h){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var h={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},n=function w(T,P){for(var z=T.nodeType===3?document.createTextNode(T.nodeValue):T.cloneNode(!1),k=T.firstChild;k;k=k.nextSibling)P!==!0&&k.nodeType===1&&k.nodeName==="SCRIPT"||z.appendChild(w(k,P));return T.nodeType===1&&(T.nodeName==="CANVAS"?(z.width=T.width,z.height=T.height,z.getContext("2d").drawImage(T,0,0)):T.nodeName!=="TEXTAREA"&&T.nodeName!=="SELECT"||(z.value=T.value),z.addEventListener("load",function(){z.scrollTop=T.scrollTop,z.scrollLeft=T.scrollLeft},!0)),z}(this.prop.src,this.opt.html2canvas.javascriptEnabled);n.tagName==="BODY"&&(h.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:h}),this.prop.container.appendChild(n),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var h=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(h).then(e).then(function(n){var w=Object.assign({},this.opt.html2canvas);return delete w.onrendered,n(this.prop.container,w)}).then(function(n){(this.opt.html2canvas.onrendered||function(){})(n),this.prop.canvas=n,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var h=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(h).then(e).then(function(n){var w=this.opt.jsPDF,T=this.opt.fontFaces,P=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,z=Object.assign({async:!0,allowTaint:!0,scale:P,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete z.onrendered,w.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,w.context2d.posX=this.opt.x,w.context2d.posY=this.opt.y,w.context2d.margin=this.opt.margin,w.context2d.fontFaces=T,T)for(var k=0;k<T.length;++k){var U=T[k],Z=U.src.find(function(H){return H.format==="truetype"});Z&&w.addFont(Z.url,U.ref.name,U.ref.style)}return z.windowHeight=z.windowHeight||0,z.windowHeight=z.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):z.windowHeight,w.context2d.save(!0),n(this.prop.container,z)}).then(function(n){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(n),this.prop.canvas=n,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var h=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=h})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(h,n,w){return(w=w||"pdf").toLowerCase()==="img"||w.toLowerCase()==="image"?this.outputImg(h,n):this.outputPdf(h,n)},l.prototype.outputPdf=function(h,n){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(h,n)})},l.prototype.outputImg=function(h){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(h){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+h+'" is not supported.'}})},l.prototype.save=function(h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(h?{filename:h}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(h){if(r(h)!=="object")return this;var n=Object.keys(h||{}).map(function(w){if(w in l.template.prop)return function(){this.prop[w]=h[w]};switch(w){case"margin":return this.setMargin.bind(this,h.margin);case"jsPDF":return function(){return this.opt.jsPDF=h.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,h.pageSize);default:return function(){this.opt[w]=h[w]}}},this);return this.then(function(){return this.thenList(n)})},l.prototype.get=function(h,n){return this.then(function(){var w=h in l.template.prop?this.prop[h]:this.opt[h];return n?n(w):w})},l.prototype.setMargin=function(h){return this.then(function(){switch(r(h)){case"number":h=[h,h,h,h];case"array":if(h.length===2&&(h=[h[0],h[1],h[0],h[1]]),h.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=h}).then(this.setPageSize)},l.prototype.setPageSize=function(h){function n(w,T){return Math.floor(w*T/72*96)}return this.then(function(){(h=h||jn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(h.inner={width:h.width-this.opt.margin[1]-this.opt.margin[3],height:h.height-this.opt.margin[0]-this.opt.margin[2]},h.inner.px={width:n(h.inner.width,h.k),height:n(h.inner.height,h.k)},h.inner.ratio=h.inner.height/h.inner.width),this.prop.pageSize=h})},l.prototype.setProgress=function(h,n,w,T){return h!=null&&(this.progress.val=h),n!=null&&(this.progress.state=n),w!=null&&(this.progress.n=w),T!=null&&(this.progress.stack=T),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(h,n,w,T){return this.setProgress(h?this.progress.val+h:null,n||null,w?this.progress.n+w:null,T?this.progress.stack.concat(T):null)},l.prototype.then=function(h,n){var w=this;return this.thenCore(h,n,function(T,P){return w.updateProgress(null,null,1,[T]),Promise.prototype.then.call(this,function(z){return w.updateProgress(null,T),z}).then(T,P).then(function(z){return w.updateProgress(1),z})})},l.prototype.thenCore=function(h,n,w){w=w||Promise.prototype.then,h&&(h=h.bind(this)),n&&(n=n.bind(this));var T=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:l.convert(Object.assign({},this),Promise.prototype),P=w.call(T,h,n);return l.convert(P,this.__proto__)},l.prototype.thenExternal=function(h,n){return Promise.prototype.then.call(this,h,n)},l.prototype.thenList=function(h){var n=this;return h.forEach(function(w){n=n.thenCore(w)}),n},l.prototype.catch=function(h){h&&(h=h.bind(this));var n=Promise.prototype.catch.call(this,h);return l.convert(n,this)},l.prototype.catchExternal=function(h){return Promise.prototype.catch.call(this,h)},l.prototype.error=function(h){return this.then(function(){throw new Error(h)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,jn.getPageSize=function(h,n,w){if(Ls(h)==="object"){var T=h;h=T.orientation,n=T.unit||n,w=T.format||w}n=n||"mm",w=w||"a4",h=(""+(h||"P")).toLowerCase();var P,z=(""+w).toLowerCase(),k={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(n){case"pt":P=1;break;case"mm":P=72/25.4;break;case"cm":P=72/2.54;break;case"in":P=72;break;case"px":P=.75;break;case"pc":case"em":P=12;break;case"ex":P=6;break;default:throw"Invalid unit: "+n}var U,Z=0,H=0;if(k.hasOwnProperty(z))Z=k[z][1]/P,H=k[z][0]/P;else try{Z=w[1],H=w[0]}catch{throw new Error("Invalid format: "+w)}if(h==="p"||h==="portrait")h="p",H>Z&&(U=H,H=Z,Z=U);else{if(h!=="l"&&h!=="landscape")throw"Invalid orientation: "+h;h="l",Z>H&&(U=H,H=Z,Z=U)}return{width:H,height:Z,unit:n,k:P,orientation:h}},t.html=function(h,n){(n=n||{}).callback=n.callback||function(){},n.html2canvas=n.html2canvas||{},n.html2canvas.canvas=n.html2canvas.canvas||this.canvas,n.jsPDF=n.jsPDF||this,n.fontFaces=n.fontFaces?n.fontFaces.map(dI):null;var w=new l(n);return n.worker?w:w.from(h).doCallback()}}(jn.API),jn.API.addJS=function(t){return tq=t,this.internal.events.subscribe("postPutResources",function(){MC=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(MC+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),eq=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+tq+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){MC!==void 0&&eq!==void 0&&this.internal.out("/Names <</JavaScript "+MC+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var a=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=a.outline.render().split(/\r\n/),l=0;l<s.length;l++){var h=s[l],n=r.exec(h);if(n!=null){var w=n[1];a.internal.newObjectDeferredBegin(w,!1)}a.internal.write(h)}if(this.outline.createNamedDestinations){var T=this.internal.pages.length,P=[];for(l=0;l<T;l++){var z=a.internal.newObject();P.push(z);var k=a.internal.getPageInfo(l+1);a.internal.write("<< /D["+k.objId+" 0 R /XYZ null null null]>> endobj")}var U=a.internal.newObject();for(a.internal.write("<< /Names [ "),l=0;l<P.length;l++)a.internal.write("(page_"+(l+1)+")"+P[l]+" 0 R");a.internal.write(" ] >>","endobj"),e=a.internal.newObject(),a.internal.write("<< /Dests "+U+" 0 R"),a.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var a=this;a.outline={createNamedDestinations:!1,root:{children:[]}},a.outline.add=function(r,s,l){var h={title:s,options:l,children:[]};return r==null&&(r=this.root),r.children.push(h),h},a.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=a,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},a.outline.genIds_r=function(r){r.id=a.internal.newObjectDeferred();for(var s=0;s<r.children.length;s++)this.genIds_r(r.children[s])},a.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},a.outline.renderItems=function(r){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,l=0;l<r.children.length;l++){var h=r.children[l];this.objStart(h),this.line("/Title "+this.makeString(h.title)),this.line("/Parent "+this.makeRef(r)),l>0&&this.line("/Prev "+this.makeRef(r.children[l-1])),l<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[l+1])),h.children.length>0&&(this.line("/First "+this.makeRef(h.children[0])),this.line("/Last "+this.makeRef(h.children[h.children.length-1])));var n=this.count=this.count_r({count:0},h);if(n>0&&this.line("/Count "+n),h.options&&h.options.pageNumber){var w=a.internal.getPageInfo(h.options.pageNumber);this.line("/Dest ["+w.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var T=0;T<r.children.length;T++)this.renderItems(r.children[T])},a.outline.line=function(r){this.ctx.val+=r+`\r
`},a.outline.makeRef=function(r){return r.id+" 0 R"},a.outline.makeString=function(r){return"("+a.internal.pdfEscape(r)+")"},a.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},a.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},a.outline.count_r=function(r,s){for(var l=0;l<s.children.length;l++)r.count++,this.count_r(r,s.children[l]);return r.count}}])}(jn.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(a,r,s,l,h,n){var w,T=this.decode.DCT_DECODE,P=null;if(typeof a=="string"||this.__addimage__.isArrayBuffer(a)||this.__addimage__.isArrayBufferView(a)){switch(a=h||a,a=this.__addimage__.isArrayBuffer(a)?new Uint8Array(a):a,(w=function(z){for(var k,U=256*z.charCodeAt(4)+z.charCodeAt(5),Z=z.length,H={width:0,height:0,numcomponents:1},q=4;q<Z;q+=2){if(q+=U,e.indexOf(z.charCodeAt(q+1))!==-1){k=256*z.charCodeAt(q+5)+z.charCodeAt(q+6),H={width:256*z.charCodeAt(q+7)+z.charCodeAt(q+8),height:k,numcomponents:z.charCodeAt(q+9)};break}U=256*z.charCodeAt(q+2)+z.charCodeAt(q+3)}return H}(a=this.__addimage__.isArrayBufferView(a)?this.__addimage__.arrayBufferToBinaryString(a):a)).numcomponents){case 1:n=this.color_spaces.DEVICE_GRAY;break;case 4:n=this.color_spaces.DEVICE_CMYK;break;case 3:n=this.color_spaces.DEVICE_RGB}P={data:a,width:w.width,height:w.height,colorSpace:n,bitsPerComponent:8,filter:T,index:r,alias:s}}return P}}(jn.API);var E_,IC,aq,rq,nq,iEe=function(){var t,e,a;function r(l){var h,n,w,T,P,z,k,U,Z,H,q,J,re,ce;for(this.data=l,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},z=null;;){switch(h=this.readUInt32(),Z=(function(){var ye,he;for(he=[],ye=0;ye<4;++ye)he.push(String.fromCharCode(this.data[this.pos++]));return he}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(h);break;case"fcTL":z&&this.animation.frames.push(z),this.pos+=4,z={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},P=this.readUInt16(),T=this.readUInt16()||100,z.delay=1e3*P/T,z.disposeOp=this.data[this.pos++],z.blendOp=this.data[this.pos++],z.data=[];break;case"IDAT":case"fdAT":for(Z==="fdAT"&&(this.pos+=4,h-=4),l=(z!=null?z.data:void 0)||this.imgData,J=0;0<=h?J<h:J>h;0<=h?++J:--J)l.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(w=this.palette.length/3,this.transparency.indexed=this.read(h),this.transparency.indexed.length>w)throw new Error("More transparent colors than palette size");if((H=w-this.transparency.indexed.length)>0)for(re=0;0<=H?re<H:re>H;0<=H?++re:--re)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(h)[0];break;case 2:this.transparency.rgb=this.read(h)}break;case"tEXt":k=(q=this.read(h)).indexOf(0),U=String.fromCharCode.apply(String,q.slice(0,k)),this.text[U]=String.fromCharCode.apply(String,q.slice(k+1));break;case"IEND":return z&&this.animation.frames.push(z),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(ce=this.colorType)===4||ce===6,n=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*n,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=h}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(l){var h,n;for(n=[],h=0;0<=l?h<l:h>l;0<=l?++h:--h)n.push(this.data[this.pos++]);return n},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(l){var h=this.pixelBitlength/8,n=new Uint8Array(this.width*this.height*h),w=0,T=this;if(l==null&&(l=this.imgData),l.length===0)return new Uint8Array(0);function P(z,k,U,Z){var H,q,J,re,ce,ye,he,_e,me,Re,be,De,ie,ge,Me,ze,Le,Ie,Ze,ke,tt,Ue=Math.ceil((T.width-z)/U),He=Math.ceil((T.height-k)/Z),Ce=T.width==Ue&&T.height==He;for(ge=h*Ue,De=Ce?n:new Uint8Array(ge*He),ye=l.length,ie=0,q=0;ie<He&&w<ye;){switch(l[w++]){case 0:for(re=Le=0;Le<ge;re=Le+=1)De[q++]=l[w++];break;case 1:for(re=Ie=0;Ie<ge;re=Ie+=1)H=l[w++],ce=re<h?0:De[q-h],De[q++]=(H+ce)%256;break;case 2:for(re=Ze=0;Ze<ge;re=Ze+=1)H=l[w++],J=(re-re%h)/h,Me=ie&&De[(ie-1)*ge+J*h+re%h],De[q++]=(Me+H)%256;break;case 3:for(re=ke=0;ke<ge;re=ke+=1)H=l[w++],J=(re-re%h)/h,ce=re<h?0:De[q-h],Me=ie&&De[(ie-1)*ge+J*h+re%h],De[q++]=(H+Math.floor((ce+Me)/2))%256;break;case 4:for(re=tt=0;tt<ge;re=tt+=1)H=l[w++],J=(re-re%h)/h,ce=re<h?0:De[q-h],ie===0?Me=ze=0:(Me=De[(ie-1)*ge+J*h+re%h],ze=J&&De[(ie-1)*ge+(J-1)*h+re%h]),he=ce+Me-ze,_e=Math.abs(he-ce),Re=Math.abs(he-Me),be=Math.abs(he-ze),me=_e<=Re&&_e<=be?ce:Re<=be?Me:ze,De[q++]=(H+me)%256;break;default:throw new Error("Invalid filter algorithm: "+l[w-1])}if(!Ce){var Se=((k+ie*Z)*T.width+z)*h,$e=ie*ge;for(re=0;re<Ue;re+=1){for(var ht=0;ht<h;ht+=1)n[Se++]=De[$e++];Se+=(U-1)*h}}ie++}}return l=LPe(l),T.interlaceMethod==1?(P(0,0,8,8),P(4,0,8,8),P(0,4,4,8),P(2,0,4,4),P(0,2,2,4),P(1,0,2,2),P(0,1,1,2)):P(0,0,1,1),n},r.prototype.decodePalette=function(){var l,h,n,w,T,P,z,k,U;for(n=this.palette,P=this.transparency.indexed||[],T=new Uint8Array((P.length||0)+n.length),w=0,l=0,h=z=0,k=n.length;z<k;h=z+=3)T[w++]=n[h],T[w++]=n[h+1],T[w++]=n[h+2],T[w++]=(U=P[l++])!=null?U:255;return T},r.prototype.copyToImageData=function(l,h){var n,w,T,P,z,k,U,Z,H,q,J;if(w=this.colors,H=null,n=this.hasAlphaChannel,this.palette.length&&(H=(J=this._decodedPalette)!=null?J:this._decodedPalette=this.decodePalette(),w=4,n=!0),Z=(T=l.data||l).length,z=H||h,P=k=0,w===1)for(;P<Z;)U=H?4*h[P/4]:k,q=z[U++],T[P++]=q,T[P++]=q,T[P++]=q,T[P++]=n?z[U++]:255,k=U;else for(;P<Z;)U=H?4*h[P/4]:k,T[P++]=z[U++],T[P++]=z[U++],T[P++]=z[U++],T[P++]=n?z[U++]:255,k=U},r.prototype.decode=function(){var l;return l=new Uint8Array(this.width*this.height*4),this.copyToImageData(l,this.decodePixels()),l};var s=function(){if(Object.prototype.toString.call(Wn)==="[object Window]"){try{e=Wn.document.createElement("canvas"),a=e.getContext("2d")}catch{return!1}return!0}return!1};return s(),t=function(l){var h;if(s()===!0)return a.width=l.width,a.height=l.height,a.clearRect(0,0,l.width,l.height),a.putImageData(l,0,0),(h=new Image).src=e.toDataURL(),h;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(l){var h,n,w,T,P,z,k,U;if(this.animation){for(U=[],n=P=0,z=(k=this.animation.frames).length;P<z;n=++P)h=k[n],w=l.createImageData(h.width,h.height),T=this.decodePixels(new Uint8Array(h.data)),this.copyToImageData(w,T),h.imageData=w,U.push(h.image=t(w));return U}},r.prototype.renderFrame=function(l,h){var n,w,T;return n=(w=this.animation.frames)[h],T=w[h-1],h===0&&l.clearRect(0,0,this.width,this.height),(T!=null?T.disposeOp:void 0)===1?l.clearRect(T.xOffset,T.yOffset,T.width,T.height):(T!=null?T.disposeOp:void 0)===2&&l.putImageData(T.imageData,T.xOffset,T.yOffset),n.blendOp===0&&l.clearRect(n.xOffset,n.yOffset,n.width,n.height),l.drawImage(n.image,n.xOffset,n.yOffset)},r.prototype.animate=function(l){var h,n,w,T,P,z,k=this;return n=0,z=this.animation,T=z.numFrames,w=z.frames,P=z.numPlays,(h=function(){var U,Z;if(U=n++%T,Z=w[U],k.renderFrame(l,U),T>1&&n/T<P)return k.animation._timeout=setTimeout(h,Z.delay)})()},r.prototype.stopAnimation=function(){var l;return clearTimeout((l=this.animation)!=null?l._timeout:void 0)},r.prototype.render=function(l){var h,n;return l._png&&l._png.stopAnimation(),l._png=this,l.width=this.width,l.height=this.height,h=l.getContext("2d"),this.animation?(this.decodeFrames(h),this.animate(h)):(n=h.createImageData(this.width,this.height),this.copyToImageData(n,this.decodePixels()),h.putImageData(n,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function sEe(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var a=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,s=t[e++],l=s>>7,h=1<<(7&s)+1;t[e++],t[e++];var n=null,w=null;l&&(n=e,w=h,e+=3*h);var T=!0,P=[],z=0,k=null,U=0,Z=null;for(this.width=a,this.height=r;T&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,Z=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((ie=t[e++])>=0))throw Error("Invalid block size");if(ie===0)break;e+=ie}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var H=t[e++];z=t[e++]|t[e++]<<8,k=t[e++],(1&H)==0&&(k=null),U=H>>2&7,e++;break;case 254:for(;;){if(!((ie=t[e++])>=0))throw Error("Invalid block size");if(ie===0)break;e+=ie}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var q=t[e++]|t[e++]<<8,J=t[e++]|t[e++]<<8,re=t[e++]|t[e++]<<8,ce=t[e++]|t[e++]<<8,ye=t[e++],he=ye>>6&1,_e=1<<(7&ye)+1,me=n,Re=w,be=!1;ye>>7&&(be=!0,me=e,Re=_e,e+=3*_e);var De=e;for(e++;;){var ie;if(!((ie=t[e++])>=0))throw Error("Invalid block size");if(ie===0)break;e+=ie}P.push({x:q,y:J,width:re,height:ce,has_local_palette:be,palette_offset:me,palette_size:Re,data_offset:De,data_length:e-De,transparent_index:k,interlaced:!!he,delay:z,disposal:U});break;case 59:T=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return P.length},this.loopCount=function(){return Z},this.frameInfo=function(ge){if(ge<0||ge>=P.length)throw new Error("Frame index out of range.");return P[ge]},this.decodeAndBlitFrameBGRA=function(ge,Me){var ze=this.frameInfo(ge),Le=ze.width*ze.height,Ie=new Uint8Array(Le);iq(t,ze.data_offset,Ie,Le);var Ze=ze.palette_offset,ke=ze.transparent_index;ke===null&&(ke=256);var tt=ze.width,Ue=a-tt,He=tt,Ce=4*(ze.y*a+ze.x),Se=4*((ze.y+ze.height)*a+ze.x),$e=Ce,ht=4*Ue;ze.interlaced===!0&&(ht+=4*a*7);for(var ft=8,ut=0,Rt=Ie.length;ut<Rt;++ut){var We=Ie[ut];if(He===0&&(He=tt,($e+=ht)>=Se&&(ht=4*Ue+4*a*(ft-1),$e=Ce+(tt+Ue)*(ft<<1),ft>>=1)),We===ke)$e+=4;else{var Ae=t[Ze+3*We],qt=t[Ze+3*We+1],Gt=t[Ze+3*We+2];Me[$e++]=Gt,Me[$e++]=qt,Me[$e++]=Ae,Me[$e++]=255}--He}},this.decodeAndBlitFrameRGBA=function(ge,Me){var ze=this.frameInfo(ge),Le=ze.width*ze.height,Ie=new Uint8Array(Le);iq(t,ze.data_offset,Ie,Le);var Ze=ze.palette_offset,ke=ze.transparent_index;ke===null&&(ke=256);var tt=ze.width,Ue=a-tt,He=tt,Ce=4*(ze.y*a+ze.x),Se=4*((ze.y+ze.height)*a+ze.x),$e=Ce,ht=4*Ue;ze.interlaced===!0&&(ht+=4*a*7);for(var ft=8,ut=0,Rt=Ie.length;ut<Rt;++ut){var We=Ie[ut];if(He===0&&(He=tt,($e+=ht)>=Se&&(ht=4*Ue+4*a*(ft-1),$e=Ce+(tt+Ue)*(ft<<1),ft>>=1)),We===ke)$e+=4;else{var Ae=t[Ze+3*We],qt=t[Ze+3*We+1],Gt=t[Ze+3*We+2];Me[$e++]=Ae,Me[$e++]=qt,Me[$e++]=Gt,Me[$e++]=255}--He}}}function iq(t,e,a,r){for(var s=t[e++],l=1<<s,h=l+1,n=h+1,w=s+1,T=(1<<w)-1,P=0,z=0,k=0,U=t[e++],Z=new Int32Array(4096),H=null;;){for(;P<16&&U!==0;)z|=t[e++]<<P,P+=8,U===1?U=t[e++]:--U;if(P<w)break;var q=z&T;if(z>>=w,P-=w,q!==l){if(q===h)break;for(var J=q<n?q:H,re=0,ce=J;ce>l;)ce=Z[ce]>>8,++re;var ye=ce;if(k+re+(J!==q?1:0)>r)return void io.log("Warning, gif stream longer than expected.");a[k++]=ye;var he=k+=re;for(J!==q&&(a[k++]=ye),ce=J;re--;)ce=Z[ce],a[--he]=255&ce,ce>>=8;H!==null&&n<4096&&(Z[n++]=H<<8|ye,n>=T+1&&w<12&&(++w,T=T<<1|1)),H=q}else n=h+1,T=(1<<(w=s+1))-1,H=null}return k!==r&&io.log("Warning, gif stream shorter than expected."),a}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function U5(t){var e,a,r,s,l,h=Math.floor,n=new Array(64),w=new Array(64),T=new Array(64),P=new Array(64),z=new Array(65535),k=new Array(65535),U=new Array(64),Z=new Array(64),H=[],q=0,J=7,re=new Array(64),ce=new Array(64),ye=new Array(64),he=new Array(256),_e=new Array(2048),me=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Re=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],be=[0,1,2,3,4,5,6,7,8,9,10,11],De=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],ie=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],ge=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Me=[0,1,2,3,4,5,6,7,8,9,10,11],ze=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Le=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Ie(Ce,Se){for(var $e=0,ht=0,ft=new Array,ut=1;ut<=16;ut++){for(var Rt=1;Rt<=Ce[ut];Rt++)ft[Se[ht]]=[],ft[Se[ht]][0]=$e,ft[Se[ht]][1]=ut,ht++,$e++;$e*=2}return ft}function Ze(Ce){for(var Se=Ce[0],$e=Ce[1]-1;$e>=0;)Se&1<<$e&&(q|=1<<J),$e--,--J<0&&(q==255?(ke(255),ke(0)):ke(q),J=7,q=0)}function ke(Ce){H.push(Ce)}function tt(Ce){ke(Ce>>8&255),ke(255&Ce)}function Ue(Ce,Se,$e,ht,ft){for(var ut,Rt=ft[0],We=ft[240],Ae=function(za,er){var dr,cr,Pr,ka,jr,pn,Dn,Rn,wa,Wa,ca=0;for(wa=0;wa<8;++wa){dr=za[ca],cr=za[ca+1],Pr=za[ca+2],ka=za[ca+3],jr=za[ca+4],pn=za[ca+5],Dn=za[ca+6];var Qa=dr+(Rn=za[ca+7]),gr=dr-Rn,qn=cr+Dn,Mn=cr-Dn,mn=Pr+pn,en=Pr-pn,Er=ka+jr,As=ka-jr,Bi=Qa+Er,Qi=Qa-Er,Oo=qn+mn,Ni=qn-mn;za[ca]=Bi+Oo,za[ca+4]=Bi-Oo;var fn=.707106781*(Ni+Qi);za[ca+2]=Qi+fn,za[ca+6]=Qi-fn;var ui=.382683433*((Bi=As+en)-(Ni=Mn+gr)),Vc=.5411961*Bi+ui,Us=1.306562965*Ni+ui,Jt=.707106781*(Oo=en+Mn),xe=gr+Jt,Oe=gr-Jt;za[ca+5]=Oe+Vc,za[ca+3]=Oe-Vc,za[ca+1]=xe+Us,za[ca+7]=xe-Us,ca+=8}for(ca=0,wa=0;wa<8;++wa){dr=za[ca],cr=za[ca+8],Pr=za[ca+16],ka=za[ca+24],jr=za[ca+32],pn=za[ca+40],Dn=za[ca+48];var rt=dr+(Rn=za[ca+56]),_t=dr-Rn,yt=cr+Dn,bt=cr-Dn,Bt=Pr+pn,Et=Pr-pn,$t=ka+jr,Kt=ka-jr,Ht=rt+$t,Ta=rt-$t,Ma=yt+Bt,Ba=yt-Bt;za[ca]=Ht+Ma,za[ca+32]=Ht-Ma;var _r=.707106781*(Ba+Ta);za[ca+16]=Ta+_r,za[ca+48]=Ta-_r;var Nr=.382683433*((Ht=Kt+Et)-(Ba=bt+_t)),Vr=.5411961*Ht+Nr,Gr=1.306562965*Ba+Nr,zn=.707106781*(Ma=Et+bt),Jn=_t+zn,qr=_t-zn;za[ca+40]=qr+Vr,za[ca+24]=qr-Vr,za[ca+8]=Jn+Gr,za[ca+56]=Jn-Gr,ca++}for(wa=0;wa<64;++wa)Wa=za[wa]*er[wa],U[wa]=Wa>0?Wa+.5|0:Wa-.5|0;return U}(Ce,Se),qt=0;qt<64;++qt)Z[me[qt]]=Ae[qt];var Gt=Z[0]-$e;$e=Z[0],Gt==0?Ze(ht[0]):(Ze(ht[k[ut=32767+Gt]]),Ze(z[ut]));for(var Aa=63;Aa>0&&Z[Aa]==0;)Aa--;if(Aa==0)return Ze(Rt),$e;for(var It,ta=1;ta<=Aa;){for(var vt=ta;Z[ta]==0&&ta<=Aa;)++ta;var or=ta-vt;if(or>=16){It=or>>4;for(var Na=1;Na<=It;++Na)Ze(We);or&=15}ut=32767+Z[ta],Ze(ft[(or<<4)+k[ut]]),Ze(z[ut]),ta++}return Aa!=63&&Ze(Rt),$e}function He(Ce){Ce=Math.min(Math.max(Ce,1),100),l!=Ce&&(function(Se){for(var $e=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ht=0;ht<64;ht++){var ft=h(($e[ht]*Se+50)/100);ft=Math.min(Math.max(ft,1),255),n[me[ht]]=ft}for(var ut=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Rt=0;Rt<64;Rt++){var We=h((ut[Rt]*Se+50)/100);We=Math.min(Math.max(We,1),255),w[me[Rt]]=We}for(var Ae=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],qt=0,Gt=0;Gt<8;Gt++)for(var Aa=0;Aa<8;Aa++)T[qt]=1/(n[me[qt]]*Ae[Gt]*Ae[Aa]*8),P[qt]=1/(w[me[qt]]*Ae[Gt]*Ae[Aa]*8),qt++}(Ce<50?Math.floor(5e3/Ce):Math.floor(200-2*Ce)),l=Ce)}this.encode=function(Ce,Se){Se&&He(Se),H=new Array,q=0,J=7,tt(65496),tt(65504),tt(16),ke(74),ke(70),ke(73),ke(70),ke(0),ke(1),ke(1),ke(0),tt(1),tt(1),ke(0),ke(0),function(){tt(65499),tt(132),ke(0);for(var cr=0;cr<64;cr++)ke(n[cr]);ke(1);for(var Pr=0;Pr<64;Pr++)ke(w[Pr])}(),function(cr,Pr){tt(65472),tt(17),ke(8),tt(Pr),tt(cr),ke(3),ke(1),ke(17),ke(0),ke(2),ke(17),ke(1),ke(3),ke(17),ke(1)}(Ce.width,Ce.height),function(){tt(65476),tt(418),ke(0);for(var cr=0;cr<16;cr++)ke(Re[cr+1]);for(var Pr=0;Pr<=11;Pr++)ke(be[Pr]);ke(16);for(var ka=0;ka<16;ka++)ke(De[ka+1]);for(var jr=0;jr<=161;jr++)ke(ie[jr]);ke(1);for(var pn=0;pn<16;pn++)ke(ge[pn+1]);for(var Dn=0;Dn<=11;Dn++)ke(Me[Dn]);ke(17);for(var Rn=0;Rn<16;Rn++)ke(ze[Rn+1]);for(var wa=0;wa<=161;wa++)ke(Le[wa])}(),tt(65498),tt(12),ke(3),ke(1),ke(0),ke(2),ke(17),ke(3),ke(17),ke(0),ke(63),ke(0);var $e=0,ht=0,ft=0;q=0,J=7,this.encode.displayName="_encode_";for(var ut,Rt,We,Ae,qt,Gt,Aa,It,ta,vt=Ce.data,or=Ce.width,Na=Ce.height,za=4*or,er=0;er<Na;){for(ut=0;ut<za;){for(qt=za*er+ut,Aa=-1,It=0,ta=0;ta<64;ta++)Gt=qt+(It=ta>>3)*za+(Aa=4*(7&ta)),er+It>=Na&&(Gt-=za*(er+1+It-Na)),ut+Aa>=za&&(Gt-=ut+Aa-za+4),Rt=vt[Gt++],We=vt[Gt++],Ae=vt[Gt++],re[ta]=(_e[Rt]+_e[We+256>>0]+_e[Ae+512>>0]>>16)-128,ce[ta]=(_e[Rt+768>>0]+_e[We+1024>>0]+_e[Ae+1280>>0]>>16)-128,ye[ta]=(_e[Rt+1280>>0]+_e[We+1536>>0]+_e[Ae+1792>>0]>>16)-128;$e=Ue(re,T,$e,e,r),ht=Ue(ce,P,ht,a,s),ft=Ue(ye,P,ft,a,s),ut+=32}er+=8}if(J>=0){var dr=[];dr[1]=J+1,dr[0]=(1<<J+1)-1,Ze(dr)}return tt(65497),new Uint8Array(H)},t=t||50,function(){for(var Ce=String.fromCharCode,Se=0;Se<256;Se++)he[Se]=Ce(Se)}(),e=Ie(Re,be),a=Ie(ge,Me),r=Ie(De,ie),s=Ie(ze,Le),function(){for(var Ce=1,Se=2,$e=1;$e<=15;$e++){for(var ht=Ce;ht<Se;ht++)k[32767+ht]=$e,z[32767+ht]=[],z[32767+ht][1]=$e,z[32767+ht][0]=ht;for(var ft=-(Se-1);ft<=-Ce;ft++)k[32767+ft]=$e,z[32767+ft]=[],z[32767+ft][1]=$e,z[32767+ft][0]=Se-1+ft;Ce<<=1,Se<<=1}}(),function(){for(var Ce=0;Ce<256;Ce++)_e[Ce]=19595*Ce,_e[Ce+256>>0]=38470*Ce,_e[Ce+512>>0]=7471*Ce+32768,_e[Ce+768>>0]=-11059*Ce,_e[Ce+1024>>0]=-21709*Ce,_e[Ce+1280>>0]=32768*Ce+8421375,_e[Ce+1536>>0]=-27439*Ce,_e[Ce+1792>>0]=-5329*Ce}(),He(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function bp(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function sq(t){function e(Re){if(!Re)throw Error("assert :P")}function a(Re,be,De){for(var ie=0;4>ie;ie++)if(Re[be+ie]!=De.charCodeAt(ie))return!0;return!1}function r(Re,be,De,ie,ge){for(var Me=0;Me<ge;Me++)Re[be+Me]=De[ie+Me]}function s(Re,be,De,ie){for(var ge=0;ge<ie;ge++)Re[be+ge]=De}function l(Re){return new Int32Array(Re)}function h(Re,be){for(var De=[],ie=0;ie<Re;ie++)De.push(new be);return De}function n(Re,be){var De=[];return function ie(ge,Me,ze){for(var Le=ze[Me],Ie=0;Ie<Le&&(ge.push(ze.length>Me+1?[]:new be),!(ze.length<Me+1));Ie++)ie(ge[Ie],Me+1,ze)}(De,0,Re),De}var w=function(){var Re=this;function be(G,Q){for(var fe=1<<Q-1>>>0;G&fe;)fe>>>=1;return fe?(G&fe-1)+fe:G}function De(G,Q,fe,Ne,Ge){e(!(Ne%fe));do G[Q+(Ne-=fe)]=Ge;while(0<Ne)}function ie(G,Q,fe,Ne,Ge){if(e(2328>=Ge),512>=Ge)var Qe=l(512);else if((Qe=l(Ge))==null)return 0;return function(at,lt,pt,Ct,Qt,Pt){var _a,na,Ra=lt,fa=1<<pt,wt=l(16),aa=l(16);for(e(Qt!=0),e(Ct!=null),e(at!=null),e(0<pt),na=0;na<Qt;++na){if(15<Ct[na])return 0;++wt[Ct[na]]}if(wt[0]==Qt)return 0;for(aa[1]=0,_a=1;15>_a;++_a){if(wt[_a]>1<<_a)return 0;aa[_a+1]=aa[_a]+wt[_a]}for(na=0;na<Qt;++na)_a=Ct[na],0<Ct[na]&&(Pt[aa[_a]++]=na);if(aa[15]==1)return(Ct=new ge).g=0,Ct.value=Pt[0],De(at,Ra,1,fa,Ct),fa;var Ga,Ka=-1,qa=fa-1,Sr=0,pr=1,rn=1,ur=1<<pt;for(na=0,_a=1,Qt=2;_a<=pt;++_a,Qt<<=1){if(pr+=rn<<=1,0>(rn-=wt[_a]))return 0;for(;0<wt[_a];--wt[_a])(Ct=new ge).g=_a,Ct.value=Pt[na++],De(at,Ra+Sr,Qt,ur,Ct),Sr=be(Sr,_a)}for(_a=pt+1,Qt=2;15>=_a;++_a,Qt<<=1){if(pr+=rn<<=1,0>(rn-=wt[_a]))return 0;for(;0<wt[_a];--wt[_a]){if(Ct=new ge,(Sr&qa)!=Ka){for(Ra+=ur,Ga=1<<(Ka=_a)-pt;15>Ka&&!(0>=(Ga-=wt[Ka]));)++Ka,Ga<<=1;fa+=ur=1<<(Ga=Ka-pt),at[lt+(Ka=Sr&qa)].g=Ga+pt,at[lt+Ka].value=Ra-lt-Ka}Ct.g=_a-pt,Ct.value=Pt[na++],De(at,Ra+(Sr>>pt),Qt,ur,Ct),Sr=be(Sr,_a)}}return pr!=2*aa[15]-1?0:fa}(G,Q,fe,Ne,Ge,Qe)}function ge(){this.value=this.g=0}function Me(){this.value=this.g=0}function ze(){this.G=h(5,ge),this.H=l(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=h(bs,Me)}function Le(G,Q,fe,Ne){e(G!=null),e(Q!=null),e(2147483648>Ne),G.Ca=254,G.I=0,G.b=-8,G.Ka=0,G.oa=Q,G.pa=fe,G.Jd=Q,G.Yc=fe+Ne,G.Zc=4<=Ne?fe+Ne-4+1:fe,ut(G)}function Ie(G,Q){for(var fe=0;0<Q--;)fe|=We(G,128)<<Q;return fe}function Ze(G,Q){var fe=Ie(G,Q);return Rt(G)?-fe:fe}function ke(G,Q,fe,Ne){var Ge,Qe=0;for(e(G!=null),e(Q!=null),e(4294967288>Ne),G.Sb=Ne,G.Ra=0,G.u=0,G.h=0,4<Ne&&(Ne=4),Ge=0;Ge<Ne;++Ge)Qe+=Q[fe+Ge]<<8*Ge;G.Ra=Qe,G.bb=Ne,G.oa=Q,G.pa=fe}function tt(G){for(;8<=G.u&&G.bb<G.Sb;)G.Ra>>>=8,G.Ra+=G.oa[G.pa+G.bb]<<Va-8>>>0,++G.bb,G.u-=8;$e(G)&&(G.h=1,G.u=0)}function Ue(G,Q){if(e(0<=Q),!G.h&&Q<=hc){var fe=Se(G)&Ai[Q];return G.u+=Q,tt(G),fe}return G.h=1,G.u=0}function He(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Ce(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Se(G){return G.Ra>>>(G.u&Va-1)>>>0}function $e(G){return e(G.bb<=G.Sb),G.h||G.bb==G.Sb&&G.u>Va}function ht(G,Q){G.u=Q,G.h=$e(G)}function ft(G){G.u>=Pd&&(e(G.u>=Pd),tt(G))}function ut(G){e(G!=null&&G.oa!=null),G.pa<G.Zc?(G.I=(G.oa[G.pa++]|G.I<<8)>>>0,G.b+=8):(e(G!=null&&G.oa!=null),G.pa<G.Yc?(G.b+=8,G.I=G.oa[G.pa++]|G.I<<8):G.Ka?G.b=0:(G.I<<=8,G.b+=8,G.Ka=1))}function Rt(G){return Ie(G,1)}function We(G,Q){var fe=G.Ca;0>G.b&&ut(G);var Ne=G.b,Ge=fe*Q>>>8,Qe=(G.I>>>Ne>Ge)+0;for(Qe?(fe-=Ge,G.I-=Ge+1<<Ne>>>0):fe=Ge+1,Ne=fe,Ge=0;256<=Ne;)Ge+=8,Ne>>=8;return Ne=7^Ge+qs[Ne],G.b-=Ne,G.Ca=(fe<<Ne)-1,Qe}function Ae(G,Q,fe){G[Q+0]=fe>>24&255,G[Q+1]=fe>>16&255,G[Q+2]=fe>>8&255,G[Q+3]=fe>>0&255}function qt(G,Q){return G[Q+0]<<0|G[Q+1]<<8}function Gt(G,Q){return qt(G,Q)|G[Q+2]<<16}function Aa(G,Q){return qt(G,Q)|qt(G,Q+2)<<16}function It(G,Q){var fe=1<<Q;return e(G!=null),e(0<Q),G.X=l(fe),G.X==null?0:(G.Mb=32-Q,G.Xa=Q,1)}function ta(G,Q){e(G!=null),e(Q!=null),e(G.Xa==Q.Xa),r(Q.X,0,G.X,0,1<<Q.Xa)}function vt(){this.X=[],this.Xa=this.Mb=0}function or(G,Q,fe,Ne){e(fe!=null),e(Ne!=null);var Ge=fe[0],Qe=Ne[0];return Ge==0&&(Ge=(G*Qe+Q/2)/Q),Qe==0&&(Qe=(Q*Ge+G/2)/G),0>=Ge||0>=Qe?0:(fe[0]=Ge,Ne[0]=Qe,1)}function Na(G,Q){return G+(1<<Q)-1>>>Q}function za(G,Q){return((4278255360&G)+(4278255360&Q)>>>0&4278255360)+((16711935&G)+(16711935&Q)>>>0&16711935)>>>0}function er(G,Q){Re[Q]=function(fe,Ne,Ge,Qe,at,lt,pt){var Ct;for(Ct=0;Ct<at;++Ct){var Qt=Re[G](lt[pt+Ct-1],Ge,Qe+Ct);lt[pt+Ct]=za(fe[Ne+Ct],Qt)}}}function dr(){this.ud=this.hd=this.jd=0}function cr(G,Q){return((4278124286&(G^Q))>>>1)+(G&Q)>>>0}function Pr(G){return 0<=G&&256>G?G:0>G?0:255<G?255:void 0}function ka(G,Q){return Pr(G+(G-Q+.5>>1))}function jr(G,Q,fe){return Math.abs(Q-fe)-Math.abs(G-fe)}function pn(G,Q,fe,Ne,Ge,Qe,at){for(Ne=Qe[at-1],fe=0;fe<Ge;++fe)Qe[at+fe]=Ne=za(G[Q+fe],Ne)}function Dn(G,Q,fe,Ne,Ge){var Qe;for(Qe=0;Qe<fe;++Qe){var at=G[Q+Qe],lt=at>>8&255,pt=16711935&(pt=(pt=16711935&at)+((lt<<16)+lt));Ne[Ge+Qe]=(4278255360&at)+pt>>>0}}function Rn(G,Q){Q.jd=G>>0&255,Q.hd=G>>8&255,Q.ud=G>>16&255}function wa(G,Q,fe,Ne,Ge,Qe){var at;for(at=0;at<Ne;++at){var lt=Q[fe+at],pt=lt>>>8,Ct=lt,Qt=255&(Qt=(Qt=lt>>>16)+((G.jd<<24>>24)*(pt<<24>>24)>>>5));Ct=255&(Ct=(Ct=Ct+((G.hd<<24>>24)*(pt<<24>>24)>>>5))+((G.ud<<24>>24)*(Qt<<24>>24)>>>5)),Ge[Qe+at]=(4278255360&lt)+(Qt<<16)+Ct}}function Wa(G,Q,fe,Ne,Ge){Re[Q]=function(Qe,at,lt,pt,Ct,Qt,Pt,_a,na){for(pt=Pt;pt<_a;++pt)for(Pt=0;Pt<na;++Pt)Ct[Qt++]=Ge(lt[Ne(Qe[at++])])},Re[G]=function(Qe,at,lt,pt,Ct,Qt,Pt){var _a=8>>Qe.b,na=Qe.Ea,Ra=Qe.K[0],fa=Qe.w;if(8>_a)for(Qe=(1<<Qe.b)-1,fa=(1<<_a)-1;at<lt;++at){var wt,aa=0;for(wt=0;wt<na;++wt)wt&Qe||(aa=Ne(pt[Ct++])),Qt[Pt++]=Ge(Ra[aa&fa]),aa>>=_a}else Re["VP8LMapColor"+fe](pt,Ct,Ra,fa,Qt,Pt,at,lt,na)}}function ca(G,Q,fe,Ne,Ge){for(fe=Q+fe;Q<fe;){var Qe=G[Q++];Ne[Ge++]=Qe>>16&255,Ne[Ge++]=Qe>>8&255,Ne[Ge++]=Qe>>0&255}}function Qa(G,Q,fe,Ne,Ge){for(fe=Q+fe;Q<fe;){var Qe=G[Q++];Ne[Ge++]=Qe>>16&255,Ne[Ge++]=Qe>>8&255,Ne[Ge++]=Qe>>0&255,Ne[Ge++]=Qe>>24&255}}function gr(G,Q,fe,Ne,Ge){for(fe=Q+fe;Q<fe;){var Qe=(at=G[Q++])>>16&240|at>>12&15,at=at>>0&240|at>>28&15;Ne[Ge++]=Qe,Ne[Ge++]=at}}function qn(G,Q,fe,Ne,Ge){for(fe=Q+fe;Q<fe;){var Qe=(at=G[Q++])>>16&248|at>>13&7,at=at>>5&224|at>>3&31;Ne[Ge++]=Qe,Ne[Ge++]=at}}function Mn(G,Q,fe,Ne,Ge){for(fe=Q+fe;Q<fe;){var Qe=G[Q++];Ne[Ge++]=Qe>>0&255,Ne[Ge++]=Qe>>8&255,Ne[Ge++]=Qe>>16&255}}function mn(G,Q,fe,Ne,Ge,Qe){if(Qe==0)for(fe=Q+fe;Q<fe;)Ae(Ne,((Qe=G[Q++])[0]>>24|Qe[1]>>8&65280|Qe[2]<<8&16711680|Qe[3]<<24)>>>0),Ge+=32;else r(Ne,Ge,G,Q,fe)}function en(G,Q){Re[Q][0]=Re[G+"0"],Re[Q][1]=Re[G+"1"],Re[Q][2]=Re[G+"2"],Re[Q][3]=Re[G+"3"],Re[Q][4]=Re[G+"4"],Re[Q][5]=Re[G+"5"],Re[Q][6]=Re[G+"6"],Re[Q][7]=Re[G+"7"],Re[Q][8]=Re[G+"8"],Re[Q][9]=Re[G+"9"],Re[Q][10]=Re[G+"10"],Re[Q][11]=Re[G+"11"],Re[Q][12]=Re[G+"12"],Re[Q][13]=Re[G+"13"],Re[Q][14]=Re[G+"0"],Re[Q][15]=Re[G+"0"]}function Er(G){return G==Tu||G==Zu||G==gc||G==qp}function As(){this.eb=[],this.size=this.A=this.fb=0}function Bi(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Qi(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new As,this.f.kb=new Bi,this.sd=null}function Oo(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ni(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function fn(G){return alert("todo:WebPSamplerProcessPlane"),G.T}function ui(G,Q){var fe=G.T,Ne=Q.ba.f.RGBA,Ge=Ne.eb,Qe=Ne.fb+G.ka*Ne.A,at=al[Q.ba.S],lt=G.y,pt=G.O,Ct=G.f,Qt=G.N,Pt=G.ea,_a=G.W,na=Q.cc,Ra=Q.dc,fa=Q.Mc,wt=Q.Nc,aa=G.ka,Ga=G.ka+G.T,Ka=G.U,qa=Ka+1>>1;for(aa==0?at(lt,pt,null,null,Ct,Qt,Pt,_a,Ct,Qt,Pt,_a,Ge,Qe,null,null,Ka):(at(Q.ec,Q.fc,lt,pt,na,Ra,fa,wt,Ct,Qt,Pt,_a,Ge,Qe-Ne.A,Ge,Qe,Ka),++fe);aa+2<Ga;aa+=2)na=Ct,Ra=Qt,fa=Pt,wt=_a,Qt+=G.Rc,_a+=G.Rc,Qe+=2*Ne.A,at(lt,(pt+=2*G.fa)-G.fa,lt,pt,na,Ra,fa,wt,Ct,Qt,Pt,_a,Ge,Qe-Ne.A,Ge,Qe,Ka);return pt+=G.fa,G.j+Ga<G.o?(r(Q.ec,Q.fc,lt,pt,Ka),r(Q.cc,Q.dc,Ct,Qt,qa),r(Q.Mc,Q.Nc,Pt,_a,qa),fe--):1&Ga||at(lt,pt,null,null,Ct,Qt,Pt,_a,Ct,Qt,Pt,_a,Ge,Qe+Ne.A,null,null,Ka),fe}function Vc(G,Q,fe){var Ne=G.F,Ge=[G.J];if(Ne!=null){var Qe=G.U,at=Q.ba.S,lt=at==el||at==gc;Q=Q.ba.f.RGBA;var pt=[0],Ct=G.ka;pt[0]=G.T,G.Kb&&(Ct==0?--pt[0]:(--Ct,Ge[0]-=G.width),G.j+G.ka+G.T==G.o&&(pt[0]=G.o-G.j-Ct));var Qt=Q.eb;Ct=Q.fb+Ct*Q.A,G=ai(Ne,Ge[0],G.width,Qe,pt,Qt,Ct+(lt?0:3),Q.A),e(fe==pt),G&&Er(at)&&cs(Qt,Ct,lt,Qe,pt,Q.A)}return 0}function Us(G){var Q=G.ma,fe=Q.ba.S,Ne=11>fe,Ge=fe==zd||fe==Ih||fe==el||fe==pl||fe==12||Er(fe);if(Q.memory=null,Q.Ib=null,Q.Jb=null,Q.Nd=null,!Jl(Q.Oa,G,Ge?11:12))return 0;if(Ge&&Er(fe)&&rr(),G.da)alert("todo:use_scaling");else{if(Ne){if(Q.Ib=fn,G.Kb){if(fe=G.U+1>>1,Q.memory=l(G.U+2*fe),Q.memory==null)return 0;Q.ec=Q.memory,Q.fc=0,Q.cc=Q.ec,Q.dc=Q.fc+G.U,Q.Mc=Q.cc,Q.Nc=Q.dc+fe,Q.Ib=ui,rr()}}else alert("todo:EmitYUV");Ge&&(Q.Jb=Vc,Ne&&ha())}if(Ne&&!Hu){for(G=0;256>G;++G)qc[G]=89858*(G-128)+bu>>Id,Hc[G]=-22014*(G-128)+bu,Fd[G]=-45773*(G-128),Jf[G]=113618*(G-128)+bu>>Id;for(G=Ld;G<Zc;++G)Q=76283*(G-16)+bu>>Id,Ds[G-Ld]=fl(Q,255),Kp[G-Ld]=fl(Q+8>>4,15);Hu=1}return 1}function Jt(G){var Q=G.ma,fe=G.U,Ne=G.T;return e(!(1&G.ka)),0>=fe||0>=Ne?0:(fe=Q.Ib(G,Q),Q.Jb!=null&&Q.Jb(G,Q,fe),Q.Dc+=fe,1)}function xe(G){G.ma.memory=null}function Oe(G,Q,fe,Ne){return Ue(G,8)!=47?0:(Q[0]=Ue(G,14)+1,fe[0]=Ue(G,14)+1,Ne[0]=Ue(G,1),Ue(G,3)!=0?0:!G.h)}function rt(G,Q){if(4>G)return G+1;var fe=G-2>>1;return(2+(1&G)<<fe)+Ue(Q,fe)+1}function _t(G,Q){return 120<Q?Q-120:1<=(fe=((fe=au[Q-1])>>4)*G+(8-(15&fe)))?fe:1;var fe}function yt(G,Q,fe){var Ne=Se(fe),Ge=G[Q+=255&Ne].g-8;return 0<Ge&&(ht(fe,fe.u+8),Ne=Se(fe),Q+=G[Q].value,Q+=Ne&(1<<Ge)-1),ht(fe,fe.u+G[Q].g),G[Q].value}function bt(G,Q,fe){return fe.g+=G.g,fe.value+=G.value<<Q>>>0,e(8>=fe.g),G.g}function Bt(G,Q,fe){var Ne=G.xc;return e((Q=Ne==0?0:G.vc[G.md*(fe>>Ne)+(Q>>Ne)])<G.Wb),G.Ya[Q]}function Et(G,Q,fe,Ne){var Ge=G.ab,Qe=G.c*Q,at=G.C;Q=at+Q;var lt=fe,pt=Ne;for(Ne=G.Ta,fe=G.Ua;0<Ge--;){var Ct=G.gc[Ge],Qt=at,Pt=Q,_a=lt,na=pt,Ra=(pt=Ne,lt=fe,Ct.Ea);switch(e(Qt<Pt),e(Pt<=Ct.nc),Ct.hc){case 2:Mh(_a,na,(Pt-Qt)*Ra,pt,lt);break;case 0:var fa=Qt,wt=Pt,aa=pt,Ga=lt,Ka=(ur=Ct).Ea;fa==0&&(co(_a,na,null,null,1,aa,Ga),pn(_a,na+1,0,0,Ka-1,aa,Ga+1),na+=Ka,Ga+=Ka,++fa);for(var qa=1<<ur.b,Sr=qa-1,pr=Na(Ka,ur.b),rn=ur.K,ur=ur.w+(fa>>ur.b)*pr;fa<wt;){var vi=rn,xi=ur,Hn=1;for(Af(_a,na,aa,Ga-Ka,1,aa,Ga);Hn<Ka;){var ri=(Hn&~Sr)+qa;ri>Ka&&(ri=Ka),(0,Ql[vi[xi++]>>8&15])(_a,na+ +Hn,aa,Ga+Hn-Ka,ri-Hn,aa,Ga+Hn),Hn=ri}na+=Ka,Ga+=Ka,++fa&Sr||(ur+=pr)}Pt!=Ct.nc&&r(pt,lt-Ra,pt,lt+(Pt-Qt-1)*Ra,Ra);break;case 1:for(Ra=_a,wt=na,Ka=(_a=Ct.Ea)-(Ga=_a&~(aa=(na=1<<Ct.b)-1)),fa=Na(_a,Ct.b),qa=Ct.K,Ct=Ct.w+(Qt>>Ct.b)*fa;Qt<Pt;){for(Sr=qa,pr=Ct,rn=new dr,ur=wt+Ga,vi=wt+_a;wt<ur;)Rn(Sr[pr++],rn),ch(rn,Ra,wt,na,pt,lt),wt+=na,lt+=na;wt<vi&&(Rn(Sr[pr++],rn),ch(rn,Ra,wt,Ka,pt,lt),wt+=Ka,lt+=Ka),++Qt&aa||(Ct+=fa)}break;case 3:if(_a==pt&&na==lt&&0<Ct.b){for(wt=pt,_a=Ra=lt+(Pt-Qt)*Ra-(Ga=(Pt-Qt)*Na(Ct.Ea,Ct.b)),na=pt,aa=lt,fa=[],Ga=(Ka=Ga)-1;0<=Ga;--Ga)fa[Ga]=na[aa+Ga];for(Ga=Ka-1;0<=Ga;--Ga)wt[_a+Ga]=fa[Ga];ho(Ct,Qt,Pt,pt,Ra,pt,lt)}else ho(Ct,Qt,Pt,_a,na,pt,lt)}lt=Ne,pt=fe}pt!=fe&&r(Ne,fe,lt,pt,Qe)}function $t(G,Q){var fe=G.V,Ne=G.Ba+G.c*G.C,Ge=Q-G.C;if(e(Q<=G.l.o),e(16>=Ge),0<Ge){var Qe=G.l,at=G.Ta,lt=G.Ua,pt=Qe.width;if(Et(G,Ge,fe,Ne),Ge=lt=[lt],e((fe=G.C)<(Ne=Q)),e(Qe.v<Qe.va),Ne>Qe.o&&(Ne=Qe.o),fe<Qe.j){var Ct=Qe.j-fe;fe=Qe.j,Ge[0]+=Ct*pt}if(fe>=Ne?fe=0:(Ge[0]+=4*Qe.v,Qe.ka=fe-Qe.j,Qe.U=Qe.va-Qe.v,Qe.T=Ne-fe,fe=1),fe){if(lt=lt[0],11>(fe=G.ca).S){var Qt=fe.f.RGBA,Pt=(Ne=fe.S,Ge=Qe.U,Qe=Qe.T,Ct=Qt.eb,Qt.A),_a=Qe;for(Qt=Qt.fb+G.Ma*Qt.A;0<_a--;){var na=at,Ra=lt,fa=Ge,wt=Ct,aa=Qt;switch(Ne){case yc:El(na,Ra,fa,wt,aa);break;case zd:Ro(na,Ra,fa,wt,aa);break;case Tu:Ro(na,Ra,fa,wt,aa),cs(wt,aa,0,fa,1,0);break;case di:Nl(na,Ra,fa,wt,aa);break;case Ih:mn(na,Ra,fa,wt,aa,1);break;case Zu:mn(na,Ra,fa,wt,aa,1),cs(wt,aa,0,fa,1,0);break;case el:mn(na,Ra,fa,wt,aa,0);break;case gc:mn(na,Ra,fa,wt,aa,0),cs(wt,aa,1,fa,1,0);break;case pl:Ed(na,Ra,fa,wt,aa);break;case qp:Ed(na,Ra,fa,wt,aa),Xn(wt,aa,fa,1,0);break;case Gc:Ic(na,Ra,fa,wt,aa);break;default:e(0)}lt+=pt,Qt+=Pt}G.Ma+=Qe}else alert("todo:EmitRescaledRowsYUVA");e(G.Ma<=fe.height)}}G.C=Q,e(G.C<=G.i)}function Kt(G){var Q;if(0<G.ua)return 0;for(Q=0;Q<G.Wb;++Q){var fe=G.Ya[Q].G,Ne=G.Ya[Q].H;if(0<fe[1][Ne[1]+0].g||0<fe[2][Ne[2]+0].g||0<fe[3][Ne[3]+0].g)return 0}return 1}function Ht(G,Q,fe,Ne,Ge,Qe){if(G.Z!=0){var at=G.qd,lt=G.rd;for(e(ml[G.Z]!=null);Q<fe;++Q)ml[G.Z](at,lt,Ne,Ge,Ne,Ge,Qe),at=Ne,lt=Ge,Ge+=Qe;G.qd=at,G.rd=lt}}function Ta(G,Q){var fe=G.l.ma,Ne=fe.Z==0||fe.Z==1?G.l.j:G.C;if(Ne=G.C<Ne?Ne:G.C,e(Q<=G.l.o),Q>Ne){var Ge=G.l.width,Qe=fe.ca,at=fe.tb+Ge*Ne,lt=G.V,pt=G.Ba+G.c*Ne,Ct=G.gc;e(G.ab==1),e(Ct[0].hc==3),Pl(Ct[0],Ne,Q,lt,pt,Qe,at),Ht(fe,Ne,Q,Qe,at,Ge)}G.C=G.Ma=Q}function Ma(G,Q,fe,Ne,Ge,Qe,at){var lt=G.$/Ne,pt=G.$%Ne,Ct=G.m,Qt=G.s,Pt=fe+G.$,_a=Pt;Ge=fe+Ne*Ge;var na=fe+Ne*Qe,Ra=280+Qt.ua,fa=G.Pb?lt:16777216,wt=0<Qt.ua?Qt.Wa:null,aa=Qt.wc,Ga=Pt<na?Bt(Qt,pt,lt):null;e(G.C<Qe),e(na<=Ge);var Ka=!1;e:for(;;){for(;Ka||Pt<na;){var qa=0;if(lt>=fa){var Sr=Pt-fe;e((fa=G).Pb),fa.wd=fa.m,fa.xd=Sr,0<fa.s.ua&&ta(fa.s.Wa,fa.s.vb),fa=lt+Xf}if(pt&aa||(Ga=Bt(Qt,pt,lt)),e(Ga!=null),Ga.Qb&&(Q[Pt]=Ga.qb,Ka=!0),!Ka)if(ft(Ct),Ga.jc){qa=Ct,Sr=Q;var pr=Pt,rn=Ga.pd[Se(qa)&bs-1];e(Ga.jc),256>rn.g?(ht(qa,qa.u+rn.g),Sr[pr]=rn.value,qa=0):(ht(qa,qa.u+rn.g-256),e(256<=rn.value),qa=rn.value),qa==0&&(Ka=!0)}else qa=yt(Ga.G[0],Ga.H[0],Ct);if(Ct.h)break;if(Ka||256>qa){if(!Ka)if(Ga.nd)Q[Pt]=(Ga.qb|qa<<8)>>>0;else{if(ft(Ct),Ka=yt(Ga.G[1],Ga.H[1],Ct),ft(Ct),Sr=yt(Ga.G[2],Ga.H[2],Ct),pr=yt(Ga.G[3],Ga.H[3],Ct),Ct.h)break;Q[Pt]=(pr<<24|Ka<<16|qa<<8|Sr)>>>0}if(Ka=!1,++Pt,++pt>=Ne&&(pt=0,++lt,at!=null&&lt<=Qe&&!(lt%16)&&at(G,lt),wt!=null))for(;_a<Pt;)qa=Q[_a++],wt.X[(506832829*qa&4294967295)>>>wt.Mb]=qa}else if(280>qa){if(qa=rt(qa-256,Ct),Sr=yt(Ga.G[4],Ga.H[4],Ct),ft(Ct),Sr=_t(Ne,Sr=rt(Sr,Ct)),Ct.h)break;if(Pt-fe<Sr||Ge-Pt<qa)break e;for(pr=0;pr<qa;++pr)Q[Pt+pr]=Q[Pt+pr-Sr];for(Pt+=qa,pt+=qa;pt>=Ne;)pt-=Ne,++lt,at!=null&&lt<=Qe&&!(lt%16)&&at(G,lt);if(e(Pt<=Ge),pt&aa&&(Ga=Bt(Qt,pt,lt)),wt!=null)for(;_a<Pt;)qa=Q[_a++],wt.X[(506832829*qa&4294967295)>>>wt.Mb]=qa}else{if(!(qa<Ra))break e;for(Ka=qa-280,e(wt!=null);_a<Pt;)qa=Q[_a++],wt.X[(506832829*qa&4294967295)>>>wt.Mb]=qa;qa=Pt,e(!(Ka>>>(Sr=wt).Xa)),Q[qa]=Sr.X[Ka],Ka=!0}Ka||e(Ct.h==$e(Ct))}if(G.Pb&&Ct.h&&Pt<Ge)e(G.m.h),G.a=5,G.m=G.wd,G.$=G.xd,0<G.s.ua&&ta(G.s.vb,G.s.Wa);else{if(Ct.h)break e;at!=null&&at(G,lt>Qe?Qe:lt),G.a=0,G.$=Pt-fe}return 1}return G.a=3,0}function Ba(G){e(G!=null),G.vc=null,G.yc=null,G.Ya=null;var Q=G.Wa;Q!=null&&(Q.X=null),G.vb=null,e(G!=null)}function _r(){var G=new jm;return G==null?null:(G.a=0,G.xb=Bh,en("Predictor","VP8LPredictors"),en("Predictor","VP8LPredictors_C"),en("PredictorAdd","VP8LPredictorsAdd"),en("PredictorAdd","VP8LPredictorsAdd_C"),Mh=Dn,ch=wa,El=ca,Ro=Qa,Ed=gr,Ic=qn,Nl=Mn,Re.VP8LMapColor32b=Os,Re.VP8LMapColor8b=Mc,G)}function Nr(G,Q,fe,Ne,Ge){var Qe=1,at=[G],lt=[Q],pt=Ne.m,Ct=Ne.s,Qt=null,Pt=0;e:for(;;){if(fe)for(;Qe&&Ue(pt,1);){var _a=at,na=lt,Ra=Ne,fa=1,wt=Ra.m,aa=Ra.gc[Ra.ab],Ga=Ue(wt,2);if(Ra.Oc&1<<Ga)Qe=0;else{switch(Ra.Oc|=1<<Ga,aa.hc=Ga,aa.Ea=_a[0],aa.nc=na[0],aa.K=[null],++Ra.ab,e(4>=Ra.ab),Ga){case 0:case 1:aa.b=Ue(wt,3)+2,fa=Nr(Na(aa.Ea,aa.b),Na(aa.nc,aa.b),0,Ra,aa.K),aa.K=aa.K[0];break;case 3:var Ka,qa=Ue(wt,8)+1,Sr=16<qa?0:4<qa?1:2<qa?2:3;if(_a[0]=Na(aa.Ea,Sr),aa.b=Sr,Ka=fa=Nr(qa,1,0,Ra,aa.K)){var pr,rn=qa,ur=aa,vi=1<<(8>>ur.b),xi=l(vi);if(xi==null)Ka=0;else{var Hn=ur.K[0],ri=ur.w;for(xi[0]=ur.K[0][0],pr=1;pr<1*rn;++pr)xi[pr]=za(Hn[ri+pr],xi[pr-1]);for(;pr<4*vi;++pr)xi[pr]=0;ur.K[0]=null,ur.K[0]=xi,Ka=1}}fa=Ka;break;case 2:break;default:e(0)}Qe=fa}}if(at=at[0],lt=lt[0],Qe&&Ue(pt,1)&&!(Qe=1<=(Pt=Ue(pt,4))&&11>=Pt)){Ne.a=3;break e}var $i;if($i=Qe)t:{var kn,_n,ds,Fi=Ne,Bn=at,po=lt,wi=Pt,ss=fe,vn=Fi.m,Ii=Fi.s,Hs=[null],To=1,nl=0,Ol=Su[wi];a:for(;;){if(ss&&Ue(vn,1)){var xs=Ue(vn,3)+2,Dl=Na(Bn,xs),xu=Na(po,xs),ba=Dl*xu;if(!Nr(Dl,xu,0,Fi,Hs))break a;for(Hs=Hs[0],Ii.xc=xs,kn=0;kn<ba;++kn){var Ua=Hs[kn]>>8&65535;Hs[kn]=Ua,Ua>=To&&(To=Ua+1)}}if(vn.h)break a;for(_n=0;5>_n;++_n){var Ki=tl[_n];!_n&&0<wi&&(Ki+=1<<wi),nl<Ki&&(nl=Ki)}var Oi=h(To*Ol,ge),jt=To,Yp=h(jt,ze);if(Yp==null)var hh=null;else e(65536>=jt),hh=Yp;var fh=l(nl);if(hh==null||fh==null||Oi==null){Fi.a=1;break a}var ph=Oi;for(kn=ds=0;kn<To;++kn){var Pu=hh[kn],mh=Pu.G,$u=Pu.H,Hm=0,Qf=1,$m=0;for(_n=0;5>_n;++_n){Ki=tl[_n],mh[_n]=ph,$u[_n]=ds,!_n&&0<wi&&(Ki+=1<<wi);n:{var yh,Ml=Ki,Zh=Fi,$c=fh,Kc=ph,ep=ds,Wc=0,il=Zh.m,Km=Ue(il,1);if(s($c,0,0,Ml),Km){var ao=Ue(il,1)+1,Uy=Ue(il,1),gh=Ue(il,Uy==0?1:8);$c[gh]=1,ao==2&&($c[gh=Ue(il,8)]=1);var ni=1}else{var xn=l(19),tp=Ue(il,4)+4;if(19<tp){Zh.a=3;var Eu=0;break n}for(yh=0;yh<tp;++yh)xn[_i[yh]]=Ue(il,3);var Ud=void 0,Nu=void 0,Yc=Zh,Sf=xn,qh=Ml,Il=$c,Cf=0,So=Yc.m,kd=8,ap=h(128,ge);r:for(;ie(ap,0,7,Sf,19);){if(Ue(So,1)){var rp=2+2*Ue(So,3);if((Ud=2+Ue(So,rp))>qh)break r}else Ud=qh;for(Nu=0;Nu<qh&&Ud--;){ft(So);var Ah=ap[0+(127&Se(So))];ht(So,So.u+Ah.g);var Xc=Ah.value;if(16>Xc)Il[Nu++]=Xc,Xc!=0&&(kd=Xc);else{var Jc=Xc==16,np=Xc-16,Bd=Fh[np],Vu=Ue(So,Lh[np])+Bd;if(Nu+Vu>qh)break r;for(var vc=Jc?kd:0;0<Vu--;)Il[Nu++]=vc}}Cf=1;break r}Cf||(Yc.a=3),ni=Cf}(ni=ni&&!il.h)&&(Wc=ie(Kc,ep,8,$c,Ml)),ni&&Wc!=0?Eu=Wc:(Zh.a=3,Eu=0)}if(Eu==0)break a;if(Qf&&Hi[_n]==1&&(Qf=ph[ds].g==0),Hm+=ph[ds].g,ds+=Eu,3>=_n){var ru,wc=fh[0];for(ru=1;ru<Ki;++ru)fh[ru]>wc&&(wc=fh[ru]);$m+=wc}}if(Pu.nd=Qf,Pu.Qb=0,Qf&&(Pu.qb=(mh[3][$u[3]+0].value<<24|mh[1][$u[1]+0].value<<16|mh[2][$u[2]+0].value)>>>0,Hm==0&&256>mh[0][$u[0]+0].value&&(Pu.Qb=1,Pu.qb+=mh[0][$u[0]+0].value<<8)),Pu.jc=!Pu.Qb&&6>$m,Pu.jc){var Ps,nu=Pu;for(Ps=0;Ps<bs;++Ps){var Ku=Ps,$s=nu.pd[Ku],zu=nu.G[0][nu.H[0]+Ku];256<=zu.value?($s.g=zu.g+256,$s.value=zu.value):($s.g=0,$s.value=0,Ku>>=bt(zu,8,$s),Ku>>=bt(nu.G[1][nu.H[1]+Ku],16,$s),Ku>>=bt(nu.G[2][nu.H[2]+Ku],0,$s),bt(nu.G[3][nu.H[3]+Ku],24,$s))}}}Ii.vc=Hs,Ii.Wb=To,Ii.Ya=hh,Ii.yc=Oi,$i=1;break t}$i=0}if(!(Qe=$i)){Ne.a=3;break e}if(0<Pt){if(Ct.ua=1<<Pt,!It(Ct.Wa,Pt)){Ne.a=1,Qe=0;break e}}else Ct.ua=0;var _h=Ne,ip=at,Hh=lt,vh=_h.s,Gd=vh.xc;if(_h.c=ip,_h.i=Hh,vh.md=Na(ip,Gd),vh.wc=Gd==0?-1:(1<<Gd)-1,fe){Ne.xb=Fy;break e}if((Qt=l(at*lt))==null){Ne.a=1,Qe=0;break e}Qe=(Qe=Ma(Ne,Qt,0,at,lt,lt,null))&&!pt.h;break e}return Qe?(Ge!=null?Ge[0]=Qt:(e(Qt==null),e(fe)),Ne.$=0,fe||Ba(Ct)):Ba(Ct),Qe}function Vr(G,Q){var fe=G.c*G.i,Ne=fe+Q+16*Q;return e(G.c<=Q),G.V=l(Ne),G.V==null?(G.Ta=null,G.Ua=0,G.a=1,0):(G.Ta=G.V,G.Ua=G.Ba+fe+Q,1)}function Gr(G,Q){var fe=G.C,Ne=Q-fe,Ge=G.V,Qe=G.Ba+G.c*fe;for(e(Q<=G.l.o);0<Ne;){var at=16<Ne?16:Ne,lt=G.l.ma,pt=G.l.width,Ct=pt*at,Qt=lt.ca,Pt=lt.tb+pt*fe,_a=G.Ta,na=G.Ua;Et(G,at,Ge,Qe),qi(_a,na,Qt,Pt,Ct),Ht(lt,fe,fe+at,Qt,Pt,pt),Ne-=at,Ge+=at*G.c,fe+=at}e(fe==Q),G.C=G.Ma=Q}function zn(){this.ub=this.yd=this.td=this.Rb=0}function Jn(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function qr(){this.Fb=this.Bb=this.Cb=0,this.Zb=l(4),this.Lb=l(4)}function yn(){this.Yb=function(){var G=[];return function Q(fe,Ne,Ge){for(var Qe=Ge[Ne],at=0;at<Qe&&(fe.push(Ge.length>Ne+1?[]:0),!(Ge.length<Ne+1));at++)Q(fe[at],Ne+1,Ge)}(G,0,[3,11]),G}()}function Hr(){this.jb=l(3),this.Wc=n([4,8],yn),this.Xc=n([4,17],yn)}function In(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new l(4),this.od=new l(4)}function Vi(){this.ld=this.La=this.dd=this.tc=0}function Gi(){this.Na=this.la=0}function _s(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function vs(){this.ad=l(384),this.Za=0,this.Ob=l(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Do(){this.uc=this.M=this.Nb=0,this.wa=Array(new Vi),this.Y=0,this.ya=Array(new vs),this.aa=0,this.l=new sc}function ws(){this.y=l(16),this.f=l(8),this.ea=l(8)}function ks(){this.cb=this.a=0,this.sc="",this.m=new He,this.Od=new zn,this.Kc=new Jn,this.ed=new In,this.Qa=new qr,this.Ic=this.$c=this.Aa=0,this.D=new Do,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=h(8,He),this.ia=0,this.pb=h(4,_s),this.Pa=new Hr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ws),this.Hd=0,this.rb=Array(new Gi),this.sb=0,this.wa=Array(new Vi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new vs),this.L=this.aa=0,this.gd=n([4,2],Vi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function sc(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Wo(){var G=new ks;return G!=null&&(G.a=0,G.sc="OK",G.cb=0,G.Xb=0,Od||(Od=wd)),G}function zi(G,Q,fe){return G.a==0&&(G.a=Q,G.sc=fe,G.cb=0),0}function ql(G,Q,fe){return 3<=fe&&G[Q+0]==157&&G[Q+1]==1&&G[Q+2]==42}function Mo(G,Q){if(G==null)return 0;if(G.a=0,G.sc="OK",Q==null)return zi(G,2,"null VP8Io passed to VP8GetHeaders()");var fe=Q.data,Ne=Q.w,Ge=Q.ha;if(4>Ge)return zi(G,7,"Truncated header.");var Qe=fe[Ne+0]|fe[Ne+1]<<8|fe[Ne+2]<<16,at=G.Od;if(at.Rb=!(1&Qe),at.td=Qe>>1&7,at.yd=Qe>>4&1,at.ub=Qe>>5,3<at.td)return zi(G,3,"Incorrect keyframe parameters.");if(!at.yd)return zi(G,4,"Frame not displayable.");Ne+=3,Ge-=3;var lt=G.Kc;if(at.Rb){if(7>Ge)return zi(G,7,"cannot parse picture header");if(!ql(fe,Ne,Ge))return zi(G,3,"Bad code word");lt.c=16383&(fe[Ne+4]<<8|fe[Ne+3]),lt.Td=fe[Ne+4]>>6,lt.i=16383&(fe[Ne+6]<<8|fe[Ne+5]),lt.Ud=fe[Ne+6]>>6,Ne+=7,Ge-=7,G.za=lt.c+15>>4,G.Ub=lt.i+15>>4,Q.width=lt.c,Q.height=lt.i,Q.Da=0,Q.j=0,Q.v=0,Q.va=Q.width,Q.o=Q.height,Q.da=0,Q.ib=Q.width,Q.hb=Q.height,Q.U=Q.width,Q.T=Q.height,s((Qe=G.Pa).jb,0,255,Qe.jb.length),e((Qe=G.Qa)!=null),Qe.Cb=0,Qe.Bb=0,Qe.Fb=1,s(Qe.Zb,0,0,Qe.Zb.length),s(Qe.Lb,0,0,Qe.Lb)}if(at.ub>Ge)return zi(G,7,"bad partition length");Le(Qe=G.m,fe,Ne,at.ub),Ne+=at.ub,Ge-=at.ub,at.Rb&&(lt.Ld=Rt(Qe),lt.Kd=Rt(Qe)),lt=G.Qa;var pt,Ct=G.Pa;if(e(Qe!=null),e(lt!=null),lt.Cb=Rt(Qe),lt.Cb){if(lt.Bb=Rt(Qe),Rt(Qe)){for(lt.Fb=Rt(Qe),pt=0;4>pt;++pt)lt.Zb[pt]=Rt(Qe)?Ze(Qe,7):0;for(pt=0;4>pt;++pt)lt.Lb[pt]=Rt(Qe)?Ze(Qe,6):0}if(lt.Bb)for(pt=0;3>pt;++pt)Ct.jb[pt]=Rt(Qe)?Ie(Qe,8):255}else lt.Bb=0;if(Qe.Ka)return zi(G,3,"cannot parse segment header");if((lt=G.ed).zd=Rt(Qe),lt.Tb=Ie(Qe,6),lt.wb=Ie(Qe,3),lt.Pc=Rt(Qe),lt.Pc&&Rt(Qe)){for(Ct=0;4>Ct;++Ct)Rt(Qe)&&(lt.vd[Ct]=Ze(Qe,6));for(Ct=0;4>Ct;++Ct)Rt(Qe)&&(lt.od[Ct]=Ze(Qe,6))}if(G.L=lt.Tb==0?0:lt.zd?1:2,Qe.Ka)return zi(G,3,"cannot parse filter header");var Qt=Ge;if(Ge=pt=Ne,Ne=pt+Qt,lt=Qt,G.Xb=(1<<Ie(G.m,2))-1,Qt<3*(Ct=G.Xb))fe=7;else{for(pt+=3*Ct,lt-=3*Ct,Qt=0;Qt<Ct;++Qt){var Pt=fe[Ge+0]|fe[Ge+1]<<8|fe[Ge+2]<<16;Pt>lt&&(Pt=lt),Le(G.Jc[+Qt],fe,pt,Pt),pt+=Pt,lt-=Pt,Ge+=3}Le(G.Jc[+Ct],fe,pt,lt),fe=pt<Ne?0:5}if(fe!=0)return zi(G,fe,"cannot parse partitions");for(fe=Ie(pt=G.m,7),Ge=Rt(pt)?Ze(pt,4):0,Ne=Rt(pt)?Ze(pt,4):0,lt=Rt(pt)?Ze(pt,4):0,Ct=Rt(pt)?Ze(pt,4):0,pt=Rt(pt)?Ze(pt,4):0,Qt=G.Qa,Pt=0;4>Pt;++Pt){if(Qt.Cb){var _a=Qt.Zb[Pt];Qt.Fb||(_a+=fe)}else{if(0<Pt){G.pb[Pt]=G.pb[0];continue}_a=fe}var na=G.pb[Pt];na.Sc[0]=Ac[fl(_a+Ge,127)],na.Sc[1]=vf[fl(_a+0,127)],na.Eb[0]=2*Ac[fl(_a+Ne,127)],na.Eb[1]=101581*vf[fl(_a+lt,127)]>>16,8>na.Eb[1]&&(na.Eb[1]=8),na.Qc[0]=Ac[fl(_a+Ct,117)],na.Qc[1]=vf[fl(_a+pt,127)],na.lc=_a+pt}if(!at.Rb)return zi(G,4,"Not a key frame.");for(Rt(Qe),at=G.Pa,fe=0;4>fe;++fe){for(Ge=0;8>Ge;++Ge)for(Ne=0;3>Ne;++Ne)for(lt=0;11>lt;++lt)Ct=We(Qe,dh[fe][Ge][Ne][lt])?Ie(Qe,8):wf[fe][Ge][Ne][lt],at.Wc[fe][Ge].Yb[Ne][lt]=Ct;for(Ge=0;17>Ge;++Ge)at.Xc[fe][Ge]=at.Wc[fe][Ly[Ge]]}return G.kc=Rt(Qe),G.kc&&(G.Bd=Ie(Qe,8)),G.cb=1}function wd(G,Q,fe,Ne,Ge,Qe,at){var lt=Q[Ge].Yb[fe];for(fe=0;16>Ge;++Ge){if(!We(G,lt[fe+0]))return Ge;for(;!We(G,lt[fe+1]);)if(lt=Q[++Ge].Yb[0],fe=0,Ge==16)return 16;var pt=Q[Ge+1].Yb;if(We(G,lt[fe+2])){var Ct=G,Qt=0;if(We(Ct,(_a=lt)[(Pt=fe)+3]))if(We(Ct,_a[Pt+6])){for(lt=0,Pt=2*(Qt=We(Ct,_a[Pt+8]))+(_a=We(Ct,_a[Pt+9+Qt])),Qt=0,_a=Uh[Pt];_a[lt];++lt)Qt+=Qt+We(Ct,_a[lt]);Qt+=3+(8<<Pt)}else We(Ct,_a[Pt+7])?(Qt=7+2*We(Ct,165),Qt+=We(Ct,145)):Qt=5+We(Ct,159);else Qt=We(Ct,_a[Pt+4])?3+We(Ct,_a[Pt+5]):2;lt=pt[2]}else Qt=1,lt=pt[1];pt=at+kh[Ge],0>(Ct=G).b&&ut(Ct);var Pt,_a=Ct.b,na=(Pt=Ct.Ca>>1)-(Ct.I>>_a)>>31;--Ct.b,Ct.Ca+=na,Ct.Ca|=1,Ct.I-=(Pt+1&na)<<_a,Qe[pt]=((Qt^na)-na)*Ne[(0<Ge)+0]}return 16}function zc(G){var Q=G.rb[G.sb-1];Q.la=0,Q.Na=0,s(G.zc,0,0,G.zc.length),G.ja=0}function ih(G,Q){if(G==null)return 0;if(Q==null)return zi(G,2,"NULL VP8Io parameter in VP8Decode().");if(!G.cb&&!Mo(G,Q))return 0;if(e(G.cb),Q.ac==null||Q.ac(Q)){Q.ob&&(G.L=0);var fe=Tf[G.L];if(G.L==2?(G.yb=0,G.zb=0):(G.yb=Q.v-fe>>4,G.zb=Q.j-fe>>4,0>G.yb&&(G.yb=0),0>G.zb&&(G.zb=0)),G.Va=Q.o+15+fe>>4,G.Hb=Q.va+15+fe>>4,G.Hb>G.za&&(G.Hb=G.za),G.Va>G.Ub&&(G.Va=G.Ub),0<G.L){var Ne=G.ed;for(fe=0;4>fe;++fe){var Ge;if(G.Qa.Cb){var Qe=G.Qa.Lb[fe];G.Qa.Fb||(Qe+=Ne.Tb)}else Qe=Ne.Tb;for(Ge=0;1>=Ge;++Ge){var at=G.gd[fe][Ge],lt=Qe;if(Ne.Pc&&(lt+=Ne.vd[0],Ge&&(lt+=Ne.od[0])),0<(lt=0>lt?0:63<lt?63:lt)){var pt=lt;0<Ne.wb&&(pt=4<Ne.wb?pt>>2:pt>>1)>9-Ne.wb&&(pt=9-Ne.wb),1>pt&&(pt=1),at.dd=pt,at.tc=2*lt+pt,at.ld=40<=lt?2:15<=lt?1:0}else at.tc=0;at.La=Ge}}}fe=0}else zi(G,6,"Frame setup failed"),fe=G.a;if(fe=fe==0){if(fe){G.$c=0,0<G.Aa||(G.Ic=to);e:{fe=G.Ic,Ne=4*(pt=G.za);var Ct=32*pt,Qt=pt+1,Pt=0<G.L?pt*(0<G.Aa?2:1):0,_a=(G.Aa==2?2:1)*pt;if((at=Ne+832+(Ge=3*(16*fe+Tf[G.L])/2*Ct)+(Qe=G.Fa!=null&&0<G.Fa.length?G.Kc.c*G.Kc.i:0))!=at)fe=0;else{if(at>G.Vb){if(G.Vb=0,G.Ec=l(at),G.Fc=0,G.Ec==null){fe=zi(G,1,"no memory during frame initialization.");break e}G.Vb=at}at=G.Ec,lt=G.Fc,G.Ac=at,G.Bc=lt,lt+=Ne,G.Gd=h(Ct,ws),G.Hd=0,G.rb=h(Qt+1,Gi),G.sb=1,G.wa=Pt?h(Pt,Vi):null,G.Y=0,G.D.Nb=0,G.D.wa=G.wa,G.D.Y=G.Y,0<G.Aa&&(G.D.Y+=pt),e(!0),G.oc=at,G.pc=lt,lt+=832,G.ya=h(_a,vs),G.aa=0,G.D.ya=G.ya,G.D.aa=G.aa,G.Aa==2&&(G.D.aa+=pt),G.R=16*pt,G.B=8*pt,pt=(Ct=Tf[G.L])*G.R,Ct=Ct/2*G.B,G.sa=at,G.ta=lt+pt,G.qa=G.sa,G.ra=G.ta+16*fe*G.R+Ct,G.Ha=G.qa,G.Ia=G.ra+8*fe*G.B+Ct,G.$c=0,lt+=Ge,G.mb=Qe?at:null,G.nb=Qe?lt:null,e(lt+Qe<=G.Fc+G.Vb),zc(G),s(G.Ac,G.Bc,0,Ne),fe=1}}if(fe){if(Q.ka=0,Q.y=G.sa,Q.O=G.ta,Q.f=G.qa,Q.N=G.ra,Q.ea=G.Ha,Q.Vd=G.Ia,Q.fa=G.R,Q.Rc=G.B,Q.F=null,Q.J=0,!tu){for(fe=-255;255>=fe;++fe)is[255+fe]=0>fe?-fe:fe;for(fe=-1020;1020>=fe;++fe)eu[1020+fe]=-128>fe?-128:127<fe?127:fe;for(fe=-112;112>=fe;++fe)kc[112+fe]=-16>fe?-16:15<fe?15:fe;for(fe=-255;510>=fe;++fe)Qo[255+fe]=0>fe?0:255<fe?255:fe;tu=1}fc=Rd,vu=Hl,_f=mu,Qs=oo,fo=Lo,Zi=Io,Nd=Jo,Vd=ji,eo=ns,Lc=Dh,pc=js,wu=Kl,Fc=ko,Ru=Cd,Uc=cc,mc=Xo,ju=us,Bo=Gu,qu[0]=Bs,qu[1]=mf,qu[2]=oh,qu[3]=Tn,qu[4]=oc,qu[5]=Xa,qu[6]=lc,qu[7]=an,qu[8]=Gs,qu[9]=An,_c[0]=bn,_c[1]=Fo,_c[2]=Bu,_c[3]=sh,_c[4]=lo,_c[5]=fr,_c[6]=Dc,Cu[0]=yu,Cu[1]=$l,Cu[2]=Td,Cu[3]=un,Cu[4]=Li,Cu[5]=Rs,Cu[6]=bi,fe=1}else fe=0}fe&&(fe=function(na,Ra){for(na.M=0;na.M<na.Va;++na.M){var fa,wt=na.Jc[na.M&na.Xb],aa=na.m,Ga=na;for(fa=0;fa<Ga.za;++fa){var Ka=aa,qa=Ga,Sr=qa.Ac,pr=qa.Bc+4*fa,rn=qa.zc,ur=qa.ya[qa.aa+fa];if(qa.Qa.Bb?ur.$b=We(Ka,qa.Pa.jb[0])?2+We(Ka,qa.Pa.jb[2]):We(Ka,qa.Pa.jb[1]):ur.$b=0,qa.kc&&(ur.Ad=We(Ka,qa.Bd)),ur.Za=!We(Ka,145)+0,ur.Za){var vi=ur.Ob,xi=0;for(qa=0;4>qa;++qa){var Hn,ri=rn[0+qa];for(Hn=0;4>Hn;++Hn){ri=Zm[Sr[pr+Hn]][ri];for(var $i=Dd[We(Ka,ri[0])];0<$i;)$i=Dd[2*$i+We(Ka,ri[$i])];ri=-$i,Sr[pr+Hn]=ri}r(vi,xi,Sr,pr,4),xi+=4,rn[0+qa]=ri}}else ri=We(Ka,156)?We(Ka,128)?1:3:We(Ka,163)?2:0,ur.Ob[0]=ri,s(Sr,pr,ri,4),s(rn,0,ri,4);ur.Dd=We(Ka,142)?We(Ka,114)?We(Ka,183)?1:3:2:0}if(Ga.m.Ka)return zi(na,7,"Premature end-of-partition0 encountered.");for(;na.ja<na.za;++na.ja){if(Ga=wt,Ka=(aa=na).rb[aa.sb-1],Sr=aa.rb[aa.sb+aa.ja],fa=aa.ya[aa.aa+aa.ja],pr=aa.kc?fa.Ad:0)Ka.la=Sr.la=0,fa.Za||(Ka.Na=Sr.Na=0),fa.Hc=0,fa.Gc=0,fa.ia=0;else{var kn,_n;if(Ka=Sr,Sr=Ga,pr=aa.Pa.Xc,rn=aa.ya[aa.aa+aa.ja],ur=aa.pb[rn.$b],qa=rn.ad,vi=0,xi=aa.rb[aa.sb-1],ri=Hn=0,s(qa,vi,0,384),rn.Za)var ds=0,Fi=pr[3];else{$i=l(16);var Bn=Ka.Na+xi.Na;if(Bn=Od(Sr,pr[1],Bn,ur.Eb,0,$i,0),Ka.Na=xi.Na=(0<Bn)+0,1<Bn)fc($i,0,qa,vi);else{var po=$i[0]+3>>3;for($i=0;256>$i;$i+=16)qa[vi+$i]=po}ds=1,Fi=pr[0]}var wi=15&Ka.la,ss=15&xi.la;for($i=0;4>$i;++$i){var vn=1&ss;for(po=_n=0;4>po;++po)wi=wi>>1|(vn=(Bn=Od(Sr,Fi,Bn=vn+(1&wi),ur.Sc,ds,qa,vi))>ds)<<7,_n=_n<<2|(3<Bn?3:1<Bn?2:qa[vi+0]!=0),vi+=16;wi>>=4,ss=ss>>1|vn<<7,Hn=(Hn<<8|_n)>>>0}for(Fi=wi,ds=ss>>4,kn=0;4>kn;kn+=2){for(_n=0,wi=Ka.la>>4+kn,ss=xi.la>>4+kn,$i=0;2>$i;++$i){for(vn=1&ss,po=0;2>po;++po)Bn=vn+(1&wi),wi=wi>>1|(vn=0<(Bn=Od(Sr,pr[2],Bn,ur.Qc,0,qa,vi)))<<3,_n=_n<<2|(3<Bn?3:1<Bn?2:qa[vi+0]!=0),vi+=16;wi>>=2,ss=ss>>1|vn<<5}ri|=_n<<4*kn,Fi|=wi<<4<<kn,ds|=(240&ss)<<kn}Ka.la=Fi,xi.la=ds,rn.Hc=Hn,rn.Gc=ri,rn.ia=43690&ri?0:ur.ia,pr=!(Hn|ri)}if(0<aa.L&&(aa.wa[aa.Y+aa.ja]=aa.gd[fa.$b][fa.Za],aa.wa[aa.Y+aa.ja].La|=!pr),Ga.Ka)return zi(na,7,"Premature end-of-file encountered.")}if(zc(na),aa=Ra,Ga=1,fa=(wt=na).D,Ka=0<wt.L&&wt.M>=wt.zb&&wt.M<=wt.Va,wt.Aa==0)e:{if(fa.M=wt.M,fa.uc=Ka,vr(wt,fa),Ga=1,fa=(_n=wt.D).Nb,Ka=(ri=Tf[wt.L])*wt.R,Sr=ri/2*wt.B,$i=16*fa*wt.R,po=8*fa*wt.B,pr=wt.sa,rn=wt.ta-Ka+$i,ur=wt.qa,qa=wt.ra-Sr+po,vi=wt.Ha,xi=wt.Ia-Sr+po,ss=(wi=_n.M)==0,Hn=wi>=wt.Va-1,wt.Aa==2&&vr(wt,_n),_n.uc)for(vn=(Bn=wt).D.M,e(Bn.D.uc),_n=Bn.yb;_n<Bn.Hb;++_n){ds=_n,Fi=vn;var Ii=(Hs=(Ki=Bn).D).Nb;kn=Ki.R;var Hs=Hs.wa[Hs.Y+ds],To=Ki.sa,nl=Ki.ta+16*Ii*kn+16*ds,Ol=Hs.dd,xs=Hs.tc;if(xs!=0)if(e(3<=xs),Ki.L==1)0<ds&&mc(To,nl,kn,xs+4),Hs.La&&Bo(To,nl,kn,xs),0<Fi&&Uc(To,nl,kn,xs+4),Hs.La&&ju(To,nl,kn,xs);else{var Dl=Ki.B,xu=Ki.qa,ba=Ki.ra+8*Ii*Dl+8*ds,Ua=Ki.Ha,Ki=Ki.Ia+8*Ii*Dl+8*ds;Ii=Hs.ld,0<ds&&(Vd(To,nl,kn,xs+4,Ol,Ii),Lc(xu,ba,Ua,Ki,Dl,xs+4,Ol,Ii)),Hs.La&&(wu(To,nl,kn,xs,Ol,Ii),Ru(xu,ba,Ua,Ki,Dl,xs,Ol,Ii)),0<Fi&&(Nd(To,nl,kn,xs+4,Ol,Ii),eo(xu,ba,Ua,Ki,Dl,xs+4,Ol,Ii)),Hs.La&&(pc(To,nl,kn,xs,Ol,Ii),Fc(xu,ba,Ua,Ki,Dl,xs,Ol,Ii))}}if(wt.ia&&alert("todo:DitherRow"),aa.put!=null){if(_n=16*wi,wi=16*(wi+1),ss?(aa.y=wt.sa,aa.O=wt.ta+$i,aa.f=wt.qa,aa.N=wt.ra+po,aa.ea=wt.Ha,aa.W=wt.Ia+po):(_n-=ri,aa.y=pr,aa.O=rn,aa.f=ur,aa.N=qa,aa.ea=vi,aa.W=xi),Hn||(wi-=ri),wi>aa.o&&(wi=aa.o),aa.F=null,aa.J=null,wt.Fa!=null&&0<wt.Fa.length&&_n<wi&&(aa.J=gf(wt,aa,_n,wi-_n),aa.F=wt.mb,aa.F==null&&aa.F.length==0)){Ga=zi(wt,3,"Could not decode alpha data.");break e}_n<aa.j&&(ri=aa.j-_n,_n=aa.j,e(!(1&ri)),aa.O+=wt.R*ri,aa.N+=wt.B*(ri>>1),aa.W+=wt.B*(ri>>1),aa.F!=null&&(aa.J+=aa.width*ri)),_n<wi&&(aa.O+=aa.v,aa.N+=aa.v>>1,aa.W+=aa.v>>1,aa.F!=null&&(aa.J+=aa.v),aa.ka=_n-aa.j,aa.U=aa.va-aa.v,aa.T=wi-_n,Ga=aa.put(aa))}fa+1!=wt.Ic||Hn||(r(wt.sa,wt.ta-Ka,pr,rn+16*wt.R,Ka),r(wt.qa,wt.ra-Sr,ur,qa+8*wt.B,Sr),r(wt.Ha,wt.Ia-Sr,vi,xi+8*wt.B,Sr))}if(!Ga)return zi(na,6,"Output aborted.")}return 1}(G,Q)),Q.bc!=null&&Q.bc(Q),fe&=1}return fe?(G.cb=0,fe):0}function pu(G,Q,fe,Ne,Ge){Ge=G[Q+fe+32*Ne]+(Ge>>3),G[Q+fe+32*Ne]=-256&Ge?0>Ge?0:255:Ge}function Oc(G,Q,fe,Ne,Ge,Qe){pu(G,Q,0,fe,Ne+Ge),pu(G,Q,1,fe,Ne+Qe),pu(G,Q,2,fe,Ne-Qe),pu(G,Q,3,fe,Ne-Ge)}function hl(G){return(20091*G>>16)+G}function Xs(G,Q,fe,Ne){var Ge,Qe=0,at=l(16);for(Ge=0;4>Ge;++Ge){var lt=G[Q+0]+G[Q+8],pt=G[Q+0]-G[Q+8],Ct=(35468*G[Q+4]>>16)-hl(G[Q+12]),Qt=hl(G[Q+4])+(35468*G[Q+12]>>16);at[Qe+0]=lt+Qt,at[Qe+1]=pt+Ct,at[Qe+2]=pt-Ct,at[Qe+3]=lt-Qt,Qe+=4,Q++}for(Ge=Qe=0;4>Ge;++Ge)lt=(G=at[Qe+0]+4)+at[Qe+8],pt=G-at[Qe+8],Ct=(35468*at[Qe+4]>>16)-hl(at[Qe+12]),pu(fe,Ne,0,0,lt+(Qt=hl(at[Qe+4])+(35468*at[Qe+12]>>16))),pu(fe,Ne,1,0,pt+Ct),pu(fe,Ne,2,0,pt-Ct),pu(fe,Ne,3,0,lt-Qt),Qe++,Ne+=32}function Io(G,Q,fe,Ne){var Ge=G[Q+0]+4,Qe=35468*G[Q+4]>>16,at=hl(G[Q+4]),lt=35468*G[Q+1]>>16;Oc(fe,Ne,0,Ge+at,G=hl(G[Q+1]),lt),Oc(fe,Ne,1,Ge+Qe,G,lt),Oc(fe,Ne,2,Ge-Qe,G,lt),Oc(fe,Ne,3,Ge-at,G,lt)}function Hl(G,Q,fe,Ne,Ge){Xs(G,Q,fe,Ne),Ge&&Xs(G,Q+16,fe,Ne+4)}function mu(G,Q,fe,Ne){vu(G,Q+0,fe,Ne,1),vu(G,Q+32,fe,Ne+128,1)}function oo(G,Q,fe,Ne){var Ge;for(G=G[Q+0]+4,Ge=0;4>Ge;++Ge)for(Q=0;4>Q;++Q)pu(fe,Ne,Q,Ge,G)}function Lo(G,Q,fe,Ne){G[Q+0]&&Qs(G,Q+0,fe,Ne),G[Q+16]&&Qs(G,Q+16,fe,Ne+4),G[Q+32]&&Qs(G,Q+32,fe,Ne+128),G[Q+48]&&Qs(G,Q+48,fe,Ne+128+4)}function Rd(G,Q,fe,Ne){var Ge,Qe=l(16);for(Ge=0;4>Ge;++Ge){var at=G[Q+0+Ge]+G[Q+12+Ge],lt=G[Q+4+Ge]+G[Q+8+Ge],pt=G[Q+4+Ge]-G[Q+8+Ge],Ct=G[Q+0+Ge]-G[Q+12+Ge];Qe[0+Ge]=at+lt,Qe[8+Ge]=at-lt,Qe[4+Ge]=Ct+pt,Qe[12+Ge]=Ct-pt}for(Ge=0;4>Ge;++Ge)at=(G=Qe[0+4*Ge]+3)+Qe[3+4*Ge],lt=Qe[1+4*Ge]+Qe[2+4*Ge],pt=Qe[1+4*Ge]-Qe[2+4*Ge],Ct=G-Qe[3+4*Ge],fe[Ne+0]=at+lt>>3,fe[Ne+16]=Ct+pt>>3,fe[Ne+32]=at-lt>>3,fe[Ne+48]=Ct-pt>>3,Ne+=64}function ku(G,Q,fe){var Ne,Ge=Q-32,Qe=Vl,at=255-G[Ge-1];for(Ne=0;Ne<fe;++Ne){var lt,pt=Qe,Ct=at+G[Q-1];for(lt=0;lt<fe;++lt)G[Q+lt]=pt[Ct+G[Ge+lt]];Q+=32}}function mf(G,Q){ku(G,Q,4)}function $l(G,Q){ku(G,Q,8)}function Fo(G,Q){ku(G,Q,16)}function Bu(G,Q){var fe;for(fe=0;16>fe;++fe)r(G,Q+32*fe,G,Q-32,16)}function sh(G,Q){var fe;for(fe=16;0<fe;--fe)s(G,Q,G[Q-1],16),Q+=32}function Yo(G,Q,fe){var Ne;for(Ne=0;16>Ne;++Ne)s(Q,fe+32*Ne,G,16)}function bn(G,Q){var fe,Ne=16;for(fe=0;16>fe;++fe)Ne+=G[Q-1+32*fe]+G[Q+fe-32];Yo(Ne>>5,G,Q)}function lo(G,Q){var fe,Ne=8;for(fe=0;16>fe;++fe)Ne+=G[Q-1+32*fe];Yo(Ne>>4,G,Q)}function fr(G,Q){var fe,Ne=8;for(fe=0;16>fe;++fe)Ne+=G[Q+fe-32];Yo(Ne>>4,G,Q)}function Dc(G,Q){Yo(128,G,Q)}function gn(G,Q,fe){return G+2*Q+fe+2>>2}function oh(G,Q){var fe,Ne=Q-32;for(Ne=new Uint8Array([gn(G[Ne-1],G[Ne+0],G[Ne+1]),gn(G[Ne+0],G[Ne+1],G[Ne+2]),gn(G[Ne+1],G[Ne+2],G[Ne+3]),gn(G[Ne+2],G[Ne+3],G[Ne+4])]),fe=0;4>fe;++fe)r(G,Q+32*fe,Ne,0,Ne.length)}function Tn(G,Q){var fe=G[Q-1],Ne=G[Q-1+32],Ge=G[Q-1+64],Qe=G[Q-1+96];Ae(G,Q+0,16843009*gn(G[Q-1-32],fe,Ne)),Ae(G,Q+32,16843009*gn(fe,Ne,Ge)),Ae(G,Q+64,16843009*gn(Ne,Ge,Qe)),Ae(G,Q+96,16843009*gn(Ge,Qe,Qe))}function Bs(G,Q){var fe,Ne=4;for(fe=0;4>fe;++fe)Ne+=G[Q+fe-32]+G[Q-1+32*fe];for(Ne>>=3,fe=0;4>fe;++fe)s(G,Q+32*fe,Ne,4)}function oc(G,Q){var fe=G[Q-1+0],Ne=G[Q-1+32],Ge=G[Q-1+64],Qe=G[Q-1-32],at=G[Q+0-32],lt=G[Q+1-32],pt=G[Q+2-32],Ct=G[Q+3-32];G[Q+0+96]=gn(Ne,Ge,G[Q-1+96]),G[Q+1+96]=G[Q+0+64]=gn(fe,Ne,Ge),G[Q+2+96]=G[Q+1+64]=G[Q+0+32]=gn(Qe,fe,Ne),G[Q+3+96]=G[Q+2+64]=G[Q+1+32]=G[Q+0+0]=gn(at,Qe,fe),G[Q+3+64]=G[Q+2+32]=G[Q+1+0]=gn(lt,at,Qe),G[Q+3+32]=G[Q+2+0]=gn(pt,lt,at),G[Q+3+0]=gn(Ct,pt,lt)}function lc(G,Q){var fe=G[Q+1-32],Ne=G[Q+2-32],Ge=G[Q+3-32],Qe=G[Q+4-32],at=G[Q+5-32],lt=G[Q+6-32],pt=G[Q+7-32];G[Q+0+0]=gn(G[Q+0-32],fe,Ne),G[Q+1+0]=G[Q+0+32]=gn(fe,Ne,Ge),G[Q+2+0]=G[Q+1+32]=G[Q+0+64]=gn(Ne,Ge,Qe),G[Q+3+0]=G[Q+2+32]=G[Q+1+64]=G[Q+0+96]=gn(Ge,Qe,at),G[Q+3+32]=G[Q+2+64]=G[Q+1+96]=gn(Qe,at,lt),G[Q+3+64]=G[Q+2+96]=gn(at,lt,pt),G[Q+3+96]=gn(lt,pt,pt)}function Xa(G,Q){var fe=G[Q-1+0],Ne=G[Q-1+32],Ge=G[Q-1+64],Qe=G[Q-1-32],at=G[Q+0-32],lt=G[Q+1-32],pt=G[Q+2-32],Ct=G[Q+3-32];G[Q+0+0]=G[Q+1+64]=Qe+at+1>>1,G[Q+1+0]=G[Q+2+64]=at+lt+1>>1,G[Q+2+0]=G[Q+3+64]=lt+pt+1>>1,G[Q+3+0]=pt+Ct+1>>1,G[Q+0+96]=gn(Ge,Ne,fe),G[Q+0+64]=gn(Ne,fe,Qe),G[Q+0+32]=G[Q+1+96]=gn(fe,Qe,at),G[Q+1+32]=G[Q+2+96]=gn(Qe,at,lt),G[Q+2+32]=G[Q+3+96]=gn(at,lt,pt),G[Q+3+32]=gn(lt,pt,Ct)}function an(G,Q){var fe=G[Q+0-32],Ne=G[Q+1-32],Ge=G[Q+2-32],Qe=G[Q+3-32],at=G[Q+4-32],lt=G[Q+5-32],pt=G[Q+6-32],Ct=G[Q+7-32];G[Q+0+0]=fe+Ne+1>>1,G[Q+1+0]=G[Q+0+64]=Ne+Ge+1>>1,G[Q+2+0]=G[Q+1+64]=Ge+Qe+1>>1,G[Q+3+0]=G[Q+2+64]=Qe+at+1>>1,G[Q+0+32]=gn(fe,Ne,Ge),G[Q+1+32]=G[Q+0+96]=gn(Ne,Ge,Qe),G[Q+2+32]=G[Q+1+96]=gn(Ge,Qe,at),G[Q+3+32]=G[Q+2+96]=gn(Qe,at,lt),G[Q+3+64]=gn(at,lt,pt),G[Q+3+96]=gn(lt,pt,Ct)}function An(G,Q){var fe=G[Q-1+0],Ne=G[Q-1+32],Ge=G[Q-1+64],Qe=G[Q-1+96];G[Q+0+0]=fe+Ne+1>>1,G[Q+2+0]=G[Q+0+32]=Ne+Ge+1>>1,G[Q+2+32]=G[Q+0+64]=Ge+Qe+1>>1,G[Q+1+0]=gn(fe,Ne,Ge),G[Q+3+0]=G[Q+1+32]=gn(Ne,Ge,Qe),G[Q+3+32]=G[Q+1+64]=gn(Ge,Qe,Qe),G[Q+3+64]=G[Q+2+64]=G[Q+0+96]=G[Q+1+96]=G[Q+2+96]=G[Q+3+96]=Qe}function Gs(G,Q){var fe=G[Q-1+0],Ne=G[Q-1+32],Ge=G[Q-1+64],Qe=G[Q-1+96],at=G[Q-1-32],lt=G[Q+0-32],pt=G[Q+1-32],Ct=G[Q+2-32];G[Q+0+0]=G[Q+2+32]=fe+at+1>>1,G[Q+0+32]=G[Q+2+64]=Ne+fe+1>>1,G[Q+0+64]=G[Q+2+96]=Ge+Ne+1>>1,G[Q+0+96]=Qe+Ge+1>>1,G[Q+3+0]=gn(lt,pt,Ct),G[Q+2+0]=gn(at,lt,pt),G[Q+1+0]=G[Q+3+32]=gn(fe,at,lt),G[Q+1+32]=G[Q+3+64]=gn(Ne,fe,at),G[Q+1+64]=G[Q+3+96]=gn(Ge,Ne,fe),G[Q+1+96]=gn(Qe,Ge,Ne)}function Td(G,Q){var fe;for(fe=0;8>fe;++fe)r(G,Q+32*fe,G,Q-32,8)}function un(G,Q){var fe;for(fe=0;8>fe;++fe)s(G,Q,G[Q-1],8),Q+=32}function Uo(G,Q,fe){var Ne;for(Ne=0;8>Ne;++Ne)s(Q,fe+32*Ne,G,8)}function yu(G,Q){var fe,Ne=8;for(fe=0;8>fe;++fe)Ne+=G[Q+fe-32]+G[Q-1+32*fe];Uo(Ne>>4,G,Q)}function Rs(G,Q){var fe,Ne=4;for(fe=0;8>fe;++fe)Ne+=G[Q+fe-32];Uo(Ne>>3,G,Q)}function Li(G,Q){var fe,Ne=4;for(fe=0;8>fe;++fe)Ne+=G[Q-1+32*fe];Uo(Ne>>3,G,Q)}function bi(G,Q){Uo(128,G,Q)}function uo(G,Q,fe){var Ne=G[Q-fe],Ge=G[Q+0],Qe=3*(Ge-Ne)+tn[1020+G[Q-2*fe]-G[Q+fe]],at=Bc[112+(Qe+4>>3)];G[Q-fe]=Vl[255+Ne+Bc[112+(Qe+3>>3)]],G[Q+0]=Vl[255+Ge-at]}function Sd(G,Q,fe,Ne){var Ge=G[Q+0],Qe=G[Q+fe];return ts[255+G[Q-2*fe]-G[Q-fe]]>Ne||ts[255+Qe-Ge]>Ne}function lh(G,Q,fe,Ne){return 4*ts[255+G[Q-fe]-G[Q+0]]+ts[255+G[Q-2*fe]-G[Q+fe]]<=Ne}function uc(G,Q,fe,Ne,Ge){var Qe=G[Q-3*fe],at=G[Q-2*fe],lt=G[Q-fe],pt=G[Q+0],Ct=G[Q+fe],Qt=G[Q+2*fe],Pt=G[Q+3*fe];return 4*ts[255+lt-pt]+ts[255+at-Ct]>Ne?0:ts[255+G[Q-4*fe]-Qe]<=Ge&&ts[255+Qe-at]<=Ge&&ts[255+at-lt]<=Ge&&ts[255+Pt-Qt]<=Ge&&ts[255+Qt-Ct]<=Ge&&ts[255+Ct-pt]<=Ge}function cc(G,Q,fe,Ne){var Ge=2*Ne+1;for(Ne=0;16>Ne;++Ne)lh(G,Q+Ne,fe,Ge)&&uo(G,Q+Ne,fe)}function Xo(G,Q,fe,Ne){var Ge=2*Ne+1;for(Ne=0;16>Ne;++Ne)lh(G,Q+Ne*fe,1,Ge)&&uo(G,Q+Ne*fe,1)}function us(G,Q,fe,Ne){var Ge;for(Ge=3;0<Ge;--Ge)cc(G,Q+=4*fe,fe,Ne)}function Gu(G,Q,fe,Ne){var Ge;for(Ge=3;0<Ge;--Ge)Xo(G,Q+=4,fe,Ne)}function Ts(G,Q,fe,Ne,Ge,Qe,at,lt){for(Qe=2*Qe+1;0<Ge--;){if(uc(G,Q,fe,Qe,at))if(Sd(G,Q,fe,lt))uo(G,Q,fe);else{var pt=G,Ct=Q,Qt=fe,Pt=pt[Ct-2*Qt],_a=pt[Ct-Qt],na=pt[Ct+0],Ra=pt[Ct+Qt],fa=pt[Ct+2*Qt],wt=27*(Ga=tn[1020+3*(na-_a)+tn[1020+Pt-Ra]])+63>>7,aa=18*Ga+63>>7,Ga=9*Ga+63>>7;pt[Ct-3*Qt]=Vl[255+pt[Ct-3*Qt]+Ga],pt[Ct-2*Qt]=Vl[255+Pt+aa],pt[Ct-Qt]=Vl[255+_a+wt],pt[Ct+0]=Vl[255+na-wt],pt[Ct+Qt]=Vl[255+Ra-aa],pt[Ct+2*Qt]=Vl[255+fa-Ga]}Q+=Ne}}function xl(G,Q,fe,Ne,Ge,Qe,at,lt){for(Qe=2*Qe+1;0<Ge--;){if(uc(G,Q,fe,Qe,at))if(Sd(G,Q,fe,lt))uo(G,Q,fe);else{var pt=G,Ct=Q,Qt=fe,Pt=pt[Ct-Qt],_a=pt[Ct+0],na=pt[Ct+Qt],Ra=Bc[112+((fa=3*(_a-Pt))+4>>3)],fa=Bc[112+(fa+3>>3)],wt=Ra+1>>1;pt[Ct-2*Qt]=Vl[255+pt[Ct-2*Qt]+wt],pt[Ct-Qt]=Vl[255+Pt+fa],pt[Ct+0]=Vl[255+_a-Ra],pt[Ct+Qt]=Vl[255+na-wt]}Q+=Ne}}function Jo(G,Q,fe,Ne,Ge,Qe){Ts(G,Q,fe,1,16,Ne,Ge,Qe)}function ji(G,Q,fe,Ne,Ge,Qe){Ts(G,Q,1,fe,16,Ne,Ge,Qe)}function js(G,Q,fe,Ne,Ge,Qe){var at;for(at=3;0<at;--at)xl(G,Q+=4*fe,fe,1,16,Ne,Ge,Qe)}function Kl(G,Q,fe,Ne,Ge,Qe){var at;for(at=3;0<at;--at)xl(G,Q+=4,1,fe,16,Ne,Ge,Qe)}function ns(G,Q,fe,Ne,Ge,Qe,at,lt){Ts(G,Q,Ge,1,8,Qe,at,lt),Ts(fe,Ne,Ge,1,8,Qe,at,lt)}function Dh(G,Q,fe,Ne,Ge,Qe,at,lt){Ts(G,Q,1,Ge,8,Qe,at,lt),Ts(fe,Ne,1,Ge,8,Qe,at,lt)}function ko(G,Q,fe,Ne,Ge,Qe,at,lt){xl(G,Q+4*Ge,Ge,1,8,Qe,at,lt),xl(fe,Ne+4*Ge,Ge,1,8,Qe,at,lt)}function Cd(G,Q,fe,Ne,Ge,Qe,at,lt){xl(G,Q+4,1,Ge,8,Qe,at,lt),xl(fe,Ne+4,1,Ge,8,Qe,at,lt)}function gu(){this.ba=new Qi,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ni,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Au(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Yf(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Wl(){this.ua=0,this.Wa=new vt,this.vb=new vt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ze,this.yc=new ge}function jm(){this.xb=this.a=0,this.l=new sc,this.ca=new Qi,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Ce,this.Pb=0,this.wd=new Ce,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Wl,this.ab=0,this.gc=h(4,Yf),this.Oc=0}function bd(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new sc,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Zs(G,Q,fe,Ne,Ge,Qe,at){for(G=G==null?0:G[Q+0],Q=0;Q<at;++Q)Ge[Qe+Q]=G+fe[Ne+Q]&255,G=Ge[Qe+Q]}function yf(G,Q,fe,Ne,Ge,Qe,at){var lt;if(G==null)Zs(null,null,fe,Ne,Ge,Qe,at);else for(lt=0;lt<at;++lt)Ge[Qe+lt]=G[Q+lt]+fe[Ne+lt]&255}function Yl(G,Q,fe,Ne,Ge,Qe,at){if(G==null)Zs(null,null,fe,Ne,Ge,Qe,at);else{var lt,pt=G[Q+0],Ct=pt,Qt=pt;for(lt=0;lt<at;++lt)Ct=Qt+(pt=G[Q+lt])-Ct,Qt=fe[Ne+lt]+(-256&Ct?0>Ct?0:255:Ct)&255,Ct=pt,Ge[Qe+lt]=Qt}}function gf(G,Q,fe,Ne){var Ge=Q.width,Qe=Q.o;if(e(G!=null&&Q!=null),0>fe||0>=Ne||fe+Ne>Qe)return null;if(!G.Cc){if(G.ga==null){var at;if(G.ga=new bd,(at=G.ga==null)||(at=Q.width*Q.o,e(G.Gb.length==0),G.Gb=l(at),G.Uc=0,G.Gb==null?at=0:(G.mb=G.Gb,G.nb=G.Uc,G.rc=null,at=1),at=!at),!at){at=G.ga;var lt=G.Fa,pt=G.P,Ct=G.qc,Qt=G.mb,Pt=G.nb,_a=pt+1,na=Ct-1,Ra=at.l;if(e(lt!=null&&Qt!=null&&Q!=null),ml[0]=null,ml[1]=Zs,ml[2]=yf,ml[3]=Yl,at.ca=Qt,at.tb=Pt,at.c=Q.width,at.i=Q.height,e(0<at.c&&0<at.i),1>=Ct)Q=0;else if(at.$a=lt[pt+0]>>0&3,at.Z=lt[pt+0]>>2&3,at.Lc=lt[pt+0]>>4&3,pt=lt[pt+0]>>6&3,0>at.$a||1<at.$a||4<=at.Z||1<at.Lc||pt)Q=0;else if(Ra.put=Jt,Ra.ac=Us,Ra.bc=xe,Ra.ma=at,Ra.width=Q.width,Ra.height=Q.height,Ra.Da=Q.Da,Ra.v=Q.v,Ra.va=Q.va,Ra.j=Q.j,Ra.o=Q.o,at.$a)e:{e(at.$a==1),Q=_r();t:for(;;){if(Q==null){Q=0;break e}if(e(at!=null),at.mc=Q,Q.c=at.c,Q.i=at.i,Q.l=at.l,Q.l.ma=at,Q.l.width=at.c,Q.l.height=at.i,Q.a=0,ke(Q.m,lt,_a,na),!Nr(at.c,at.i,1,Q,null)||(Q.ab==1&&Q.gc[0].hc==3&&Kt(Q.s)?(at.ic=1,lt=Q.c*Q.i,Q.Ta=null,Q.Ua=0,Q.V=l(lt),Q.Ba=0,Q.V==null?(Q.a=1,Q=0):Q=1):(at.ic=0,Q=Vr(Q,at.c)),!Q))break t;Q=1;break e}at.mc=null,Q=0}else Q=na>=at.c*at.i;at=!Q}if(at)return null;G.ga.Lc!=1?G.Ga=0:Ne=Qe-fe}e(G.ga!=null),e(fe+Ne<=Qe);e:{if(Q=(lt=G.ga).c,Qe=lt.l.o,lt.$a==0){if(_a=G.rc,na=G.Vc,Ra=G.Fa,pt=G.P+1+fe*Q,Ct=G.mb,Qt=G.nb+fe*Q,e(pt<=G.P+G.qc),lt.Z!=0)for(e(ml[lt.Z]!=null),at=0;at<Ne;++at)ml[lt.Z](_a,na,Ra,pt,Ct,Qt,Q),_a=Ct,na=Qt,Qt+=Q,pt+=Q;else for(at=0;at<Ne;++at)r(Ct,Qt,Ra,pt,Q),_a=Ct,na=Qt,Qt+=Q,pt+=Q;G.rc=_a,G.Vc=na}else{if(e(lt.mc!=null),Q=fe+Ne,e((at=lt.mc)!=null),e(Q<=at.i),at.C>=Q)Q=1;else if(lt.ic||ha(),lt.ic){lt=at.V,_a=at.Ba,na=at.c;var fa=at.i,wt=(Ra=1,pt=at.$/na,Ct=at.$%na,Qt=at.m,Pt=at.s,at.$),aa=na*fa,Ga=na*Q,Ka=Pt.wc,qa=wt<Ga?Bt(Pt,Ct,pt):null;e(wt<=aa),e(Q<=fa),e(Kt(Pt));t:for(;;){for(;!Qt.h&&wt<Ga;){if(Ct&Ka||(qa=Bt(Pt,Ct,pt)),e(qa!=null),ft(Qt),256>(fa=yt(qa.G[0],qa.H[0],Qt)))lt[_a+wt]=fa,++wt,++Ct>=na&&(Ct=0,++pt<=Q&&!(pt%16)&&Ta(at,pt));else{if(!(280>fa)){Ra=0;break t}fa=rt(fa-256,Qt);var Sr,pr=yt(qa.G[4],qa.H[4],Qt);if(ft(Qt),!(wt>=(pr=_t(na,pr=rt(pr,Qt)))&&aa-wt>=fa)){Ra=0;break t}for(Sr=0;Sr<fa;++Sr)lt[_a+wt+Sr]=lt[_a+wt+Sr-pr];for(wt+=fa,Ct+=fa;Ct>=na;)Ct-=na,++pt<=Q&&!(pt%16)&&Ta(at,pt);wt<Ga&&Ct&Ka&&(qa=Bt(Pt,Ct,pt))}e(Qt.h==$e(Qt))}Ta(at,pt>Q?Q:pt);break t}!Ra||Qt.h&&wt<aa?(Ra=0,at.a=Qt.h?5:3):at.$=wt,Q=Ra}else Q=Ma(at,at.V,at.Ba,at.c,at.i,Q,Gr);if(!Q){Ne=0;break e}}fe+Ne>=Qe&&(G.Cc=1),Ne=1}if(!Ne)return null;if(G.Cc&&((Ne=G.ga)!=null&&(Ne.mc=null),G.ga=null,0<G.Ga))return alert("todo:WebPDequantizeLevels"),null}return G.nb+fe*Ge}function oe(G,Q,fe,Ne,Ge,Qe){for(;0<Ge--;){var at,lt=G,pt=Q+(fe?1:0),Ct=G,Qt=Q+(fe?0:3);for(at=0;at<Ne;++at){var Pt=Ct[Qt+4*at];Pt!=255&&(Pt*=32897,lt[pt+4*at+0]=lt[pt+4*at+0]*Pt>>23,lt[pt+4*at+1]=lt[pt+4*at+1]*Pt>>23,lt[pt+4*at+2]=lt[pt+4*at+2]*Pt>>23)}Q+=Qe}}function Ke(G,Q,fe,Ne,Ge){for(;0<Ne--;){var Qe;for(Qe=0;Qe<fe;++Qe){var at=G[Q+2*Qe+0],lt=15&(Ct=G[Q+2*Qe+1]),pt=4369*lt,Ct=(240&Ct|Ct>>4)*pt>>16;G[Q+2*Qe+0]=(240&at|at>>4)*pt>>16&240|(15&at|at<<4)*pt>>16>>4&15,G[Q+2*Qe+1]=240&Ct|lt}Q+=Ge}}function Dt(G,Q,fe,Ne,Ge,Qe,at,lt){var pt,Ct,Qt=255;for(Ct=0;Ct<Ge;++Ct){for(pt=0;pt<Ne;++pt){var Pt=G[Q+pt];Qe[at+4*pt]=Pt,Qt&=Pt}Q+=fe,at+=lt}return Qt!=255}function Yt(G,Q,fe,Ne,Ge){var Qe;for(Qe=0;Qe<Ge;++Qe)fe[Ne+Qe]=G[Q+Qe]>>8}function ha(){cs=oe,Xn=Ke,ai=Dt,qi=Yt}function Da(G,Q,fe){Re[G]=function(Ne,Ge,Qe,at,lt,pt,Ct,Qt,Pt,_a,na,Ra,fa,wt,aa,Ga,Ka){var qa,Sr=Ka-1>>1,pr=lt[pt+0]|Ct[Qt+0]<<16,rn=Pt[_a+0]|na[Ra+0]<<16;e(Ne!=null);var ur=3*pr+rn+131074>>2;for(Q(Ne[Ge+0],255&ur,ur>>16,fa,wt),Qe!=null&&(ur=3*rn+pr+131074>>2,Q(Qe[at+0],255&ur,ur>>16,aa,Ga)),qa=1;qa<=Sr;++qa){var vi=lt[pt+qa]|Ct[Qt+qa]<<16,xi=Pt[_a+qa]|na[Ra+qa]<<16,Hn=pr+vi+rn+xi+524296,ri=Hn+2*(vi+rn)>>3;ur=ri+pr>>1,pr=(Hn=Hn+2*(pr+xi)>>3)+vi>>1,Q(Ne[Ge+2*qa-1],255&ur,ur>>16,fa,wt+(2*qa-1)*fe),Q(Ne[Ge+2*qa-0],255&pr,pr>>16,fa,wt+(2*qa-0)*fe),Qe!=null&&(ur=Hn+rn>>1,pr=ri+xi>>1,Q(Qe[at+2*qa-1],255&ur,ur>>16,aa,Ga+(2*qa-1)*fe),Q(Qe[at+2*qa+0],255&pr,pr>>16,aa,Ga+(2*qa+0)*fe)),pr=vi,rn=xi}1&Ka||(ur=3*pr+rn+131074>>2,Q(Ne[Ge+Ka-1],255&ur,ur>>16,fa,wt+(Ka-1)*fe),Qe!=null&&(ur=3*rn+pr+131074>>2,Q(Qe[at+Ka-1],255&ur,ur>>16,aa,Ga+(Ka-1)*fe)))}}function rr(){al[yc]=Gh,al[zd]=Hp,al[di]=Md,al[Ih]=$p,al[el]=jc,al[pl]=Rf,al[Gc]=rl,al[Tu]=Hp,al[Zu]=$p,al[gc]=jc,al[qp]=Rf}function wr(G){return G&-16384?0>G?0:255:G>>zl}function $r(G,Q){return wr((19077*G>>8)+(26149*Q>>8)-14234)}function Sn(G,Q,fe){return wr((19077*G>>8)-(6419*Q>>8)-(13320*fe>>8)+8708)}function Nn(G,Q){return wr((19077*G>>8)+(33050*Q>>8)-17685)}function mi(G,Q,fe,Ne,Ge){Ne[Ge+0]=$r(G,fe),Ne[Ge+1]=Sn(G,Q,fe),Ne[Ge+2]=Nn(G,Q)}function Ss(G,Q,fe,Ne,Ge){Ne[Ge+0]=Nn(G,Q),Ne[Ge+1]=Sn(G,Q,fe),Ne[Ge+2]=$r(G,fe)}function Cs(G,Q,fe,Ne,Ge){var Qe=Sn(G,Q,fe);Q=Qe<<3&224|Nn(G,Q)>>3,Ne[Ge+0]=248&$r(G,fe)|Qe>>5,Ne[Ge+1]=Q}function Js(G,Q,fe,Ne,Ge){var Qe=240&Nn(G,Q)|15;Ne[Ge+0]=240&$r(G,fe)|Sn(G,Q,fe)>>4,Ne[Ge+1]=Qe}function es(G,Q,fe,Ne,Ge){Ne[Ge+0]=255,mi(G,Q,fe,Ne,Ge+1)}function br(G,Q,fe,Ne,Ge){Ss(G,Q,fe,Ne,Ge),Ne[Ge+3]=255}function ir(G,Q,fe,Ne,Ge){mi(G,Q,fe,Ne,Ge),Ne[Ge+3]=255}function fl(G,Q){return 0>G?0:G>Q?Q:G}function Rr(G,Q,fe){Re[G]=function(Ne,Ge,Qe,at,lt,pt,Ct,Qt,Pt){for(var _a=Qt+(-2&Pt)*fe;Qt!=_a;)Q(Ne[Ge+0],Qe[at+0],lt[pt+0],Ct,Qt),Q(Ne[Ge+1],Qe[at+0],lt[pt+0],Ct,Qt+fe),Ge+=2,++at,++pt,Qt+=2*fe;1&Pt&&Q(Ne[Ge+0],Qe[at+0],lt[pt+0],Ct,Qt)}}function _u(G,Q,fe){return fe==0?G==0?Q==0?6:5:Q==0?4:0:fe}function Xl(G,Q,fe,Ne,Ge){switch(G>>>30){case 3:vu(Q,fe,Ne,Ge,0);break;case 2:Zi(Q,fe,Ne,Ge);break;case 1:Qs(Q,fe,Ne,Ge)}}function vr(G,Q){var fe,Ne,Ge=Q.M,Qe=Q.Nb,at=G.oc,lt=G.pc+40,pt=G.oc,Ct=G.pc+584,Qt=G.oc,Pt=G.pc+600;for(fe=0;16>fe;++fe)at[lt+32*fe-1]=129;for(fe=0;8>fe;++fe)pt[Ct+32*fe-1]=129,Qt[Pt+32*fe-1]=129;for(0<Ge?at[lt-1-32]=pt[Ct-1-32]=Qt[Pt-1-32]=129:(s(at,lt-32-1,127,21),s(pt,Ct-32-1,127,9),s(Qt,Pt-32-1,127,9)),Ne=0;Ne<G.za;++Ne){var _a=Q.ya[Q.aa+Ne];if(0<Ne){for(fe=-1;16>fe;++fe)r(at,lt+32*fe-4,at,lt+32*fe+12,4);for(fe=-1;8>fe;++fe)r(pt,Ct+32*fe-4,pt,Ct+32*fe+4,4),r(Qt,Pt+32*fe-4,Qt,Pt+32*fe+4,4)}var na=G.Gd,Ra=G.Hd+Ne,fa=_a.ad,wt=_a.Hc;if(0<Ge&&(r(at,lt-32,na[Ra].y,0,16),r(pt,Ct-32,na[Ra].f,0,8),r(Qt,Pt-32,na[Ra].ea,0,8)),_a.Za){var aa=at,Ga=lt-32+16;for(0<Ge&&(Ne>=G.za-1?s(aa,Ga,na[Ra].y[15],4):r(aa,Ga,na[Ra+1].y,0,4)),fe=0;4>fe;fe++)aa[Ga+128+fe]=aa[Ga+256+fe]=aa[Ga+384+fe]=aa[Ga+0+fe];for(fe=0;16>fe;++fe,wt<<=2)aa=at,Ga=lt+qm[fe],qu[_a.Ob[fe]](aa,Ga),Xl(wt,fa,16*+fe,aa,Ga)}else if(aa=_u(Ne,Ge,_a.Ob[0]),_c[aa](at,lt),wt!=0)for(fe=0;16>fe;++fe,wt<<=2)Xl(wt,fa,16*+fe,at,lt+qm[fe]);for(fe=_a.Gc,aa=_u(Ne,Ge,_a.Dd),Cu[aa](pt,Ct),Cu[aa](Qt,Pt),wt=fa,aa=pt,Ga=Ct,255&(_a=fe>>0)&&(170&_a?_f(wt,256,aa,Ga):fo(wt,256,aa,Ga)),_a=Qt,wt=Pt,255&(fe>>=8)&&(170&fe?_f(fa,320,_a,wt):fo(fa,320,_a,wt)),Ge<G.Ub-1&&(r(na[Ra].y,0,at,lt+480,16),r(na[Ra].f,0,pt,Ct+224,8),r(na[Ra].ea,0,Qt,Pt+224,8)),fe=8*Qe*G.B,na=G.sa,Ra=G.ta+16*Ne+16*Qe*G.R,fa=G.qa,_a=G.ra+8*Ne+fe,wt=G.Ha,aa=G.Ia+8*Ne+fe,fe=0;16>fe;++fe)r(na,Ra+fe*G.R,at,lt+32*fe,16);for(fe=0;8>fe;++fe)r(fa,_a+fe*G.B,pt,Ct+32*fe,8),r(wt,aa+fe*G.B,Qt,Pt+32*fe,8)}}function uh(G,Q,fe,Ne,Ge,Qe,at,lt,pt){var Ct=[0],Qt=[0],Pt=0,_a=pt!=null?pt.kd:0,na=pt??new Au;if(G==null||12>fe)return 7;na.data=G,na.w=Q,na.ha=fe,Q=[Q],fe=[fe],na.gb=[na.gb];e:{var Ra=Q,fa=fe,wt=na.gb;if(e(G!=null),e(fa!=null),e(wt!=null),wt[0]=0,12<=fa[0]&&!a(G,Ra[0],"RIFF")){if(a(G,Ra[0]+8,"WEBP")){wt=3;break e}var aa=Aa(G,Ra[0]+4);if(12>aa||4294967286<aa){wt=3;break e}if(_a&&aa>fa[0]-8){wt=7;break e}wt[0]=aa,Ra[0]+=12,fa[0]-=12}wt=0}if(wt!=0)return wt;for(aa=0<na.gb[0],fe=fe[0];;){e:{var Ga=G;fa=Q,wt=fe;var Ka=Ct,qa=Qt,Sr=Ra=[0];if((ur=Pt=[Pt])[0]=0,8>wt[0])wt=7;else{if(!a(Ga,fa[0],"VP8X")){if(Aa(Ga,fa[0]+4)!=10){wt=3;break e}if(18>wt[0]){wt=7;break e}var pr=Aa(Ga,fa[0]+8),rn=1+Gt(Ga,fa[0]+12);if(2147483648<=rn*(Ga=1+Gt(Ga,fa[0]+15))){wt=3;break e}Sr!=null&&(Sr[0]=pr),Ka!=null&&(Ka[0]=rn),qa!=null&&(qa[0]=Ga),fa[0]+=18,wt[0]-=18,ur[0]=1}wt=0}}if(Pt=Pt[0],Ra=Ra[0],wt!=0)return wt;if(fa=!!(2&Ra),!aa&&Pt)return 3;if(Qe!=null&&(Qe[0]=!!(16&Ra)),at!=null&&(at[0]=fa),lt!=null&&(lt[0]=0),at=Ct[0],Ra=Qt[0],Pt&&fa&&pt==null){wt=0;break}if(4>fe){wt=7;break}if(aa&&Pt||!aa&&!Pt&&!a(G,Q[0],"ALPH")){fe=[fe],na.na=[na.na],na.P=[na.P],na.Sa=[na.Sa];e:{pr=G,wt=Q,aa=fe;var ur=na.gb;Ka=na.na,qa=na.P,Sr=na.Sa,rn=22,e(pr!=null),e(aa!=null),Ga=wt[0];var vi=aa[0];for(e(Ka!=null),e(Sr!=null),Ka[0]=null,qa[0]=null,Sr[0]=0;;){if(wt[0]=Ga,aa[0]=vi,8>vi){wt=7;break e}var xi=Aa(pr,Ga+4);if(4294967286<xi){wt=3;break e}var Hn=8+xi+1&-2;if(rn+=Hn,0<ur&&rn>ur){wt=3;break e}if(!a(pr,Ga,"VP8 ")||!a(pr,Ga,"VP8L")){wt=0;break e}if(vi[0]<Hn){wt=7;break e}a(pr,Ga,"ALPH")||(Ka[0]=pr,qa[0]=Ga+8,Sr[0]=xi),Ga+=Hn,vi-=Hn}}if(fe=fe[0],na.na=na.na[0],na.P=na.P[0],na.Sa=na.Sa[0],wt!=0)break}fe=[fe],na.Ja=[na.Ja],na.xa=[na.xa];e:if(ur=G,wt=Q,aa=fe,Ka=na.gb[0],qa=na.Ja,Sr=na.xa,pr=wt[0],Ga=!a(ur,pr,"VP8 "),rn=!a(ur,pr,"VP8L"),e(ur!=null),e(aa!=null),e(qa!=null),e(Sr!=null),8>aa[0])wt=7;else{if(Ga||rn){if(ur=Aa(ur,pr+4),12<=Ka&&ur>Ka-12){wt=3;break e}if(_a&&ur>aa[0]-8){wt=7;break e}qa[0]=ur,wt[0]+=8,aa[0]-=8,Sr[0]=rn}else Sr[0]=5<=aa[0]&&ur[pr+0]==47&&!(ur[pr+4]>>5),qa[0]=aa[0];wt=0}if(fe=fe[0],na.Ja=na.Ja[0],na.xa=na.xa[0],Q=Q[0],wt!=0)break;if(4294967286<na.Ja)return 3;if(lt==null||fa||(lt[0]=na.xa?2:1),at=[at],Ra=[Ra],na.xa){if(5>fe){wt=7;break}lt=at,_a=Ra,fa=Qe,G==null||5>fe?G=0:5<=fe&&G[Q+0]==47&&!(G[Q+4]>>5)?(aa=[0],ur=[0],Ka=[0],ke(qa=new Ce,G,Q,fe),Oe(qa,aa,ur,Ka)?(lt!=null&&(lt[0]=aa[0]),_a!=null&&(_a[0]=ur[0]),fa!=null&&(fa[0]=Ka[0]),G=1):G=0):G=0}else{if(10>fe){wt=7;break}lt=Ra,G==null||10>fe||!ql(G,Q+3,fe-3)?G=0:(_a=G[Q+0]|G[Q+1]<<8|G[Q+2]<<16,fa=16383&(G[Q+7]<<8|G[Q+6]),G=16383&(G[Q+9]<<8|G[Q+8]),1&_a||3<(_a>>1&7)||!(_a>>4&1)||_a>>5>=na.Ja||!fa||!G?G=0:(at&&(at[0]=fa),lt&&(lt[0]=G),G=1))}if(!G||(at=at[0],Ra=Ra[0],Pt&&(Ct[0]!=at||Qt[0]!=Ra)))return 3;pt!=null&&(pt[0]=na,pt.offset=Q-pt.w,e(4294967286>Q-pt.w),e(pt.offset==pt.ha-fe));break}return wt==0||wt==7&&Pt&&pt==null?(Qe!=null&&(Qe[0]|=na.na!=null&&0<na.na.length),Ne!=null&&(Ne[0]=at),Ge!=null&&(Ge[0]=Ra),0):wt}function Jl(G,Q,fe){var Ne=Q.width,Ge=Q.height,Qe=0,at=0,lt=Ne,pt=Ge;if(Q.Da=G!=null&&0<G.Da,Q.Da&&(lt=G.cd,pt=G.bd,Qe=G.v,at=G.j,11>fe||(Qe&=-2,at&=-2),0>Qe||0>at||0>=lt||0>=pt||Qe+lt>Ne||at+pt>Ge))return 0;if(Q.v=Qe,Q.j=at,Q.va=Qe+lt,Q.o=at+pt,Q.U=lt,Q.T=pt,Q.da=G!=null&&0<G.da,Q.da){if(!or(lt,pt,fe=[G.ib],Qe=[G.hb]))return 0;Q.ib=fe[0],Q.hb=Qe[0]}return Q.ob=G!=null&&G.ob,Q.Kb=G==null||!G.Sd,Q.da&&(Q.ob=Q.ib<3*Ne/4&&Q.hb<3*Ge/4,Q.Kb=0),1}function dc(G){if(G==null)return 2;if(11>G.S){var Q=G.f.RGBA;Q.fb+=(G.height-1)*Q.A,Q.A=-Q.A}else Q=G.f.kb,G=G.height,Q.O+=(G-1)*Q.fa,Q.fa=-Q.fa,Q.N+=(G-1>>1)*Q.Ab,Q.Ab=-Q.Ab,Q.W+=(G-1>>1)*Q.Db,Q.Db=-Q.Db,Q.F!=null&&(Q.J+=(G-1)*Q.lb,Q.lb=-Q.lb);return 0}function xd(G,Q,fe,Ne){if(Ne==null||0>=G||0>=Q)return 2;if(fe!=null){if(fe.Da){var Ge=fe.cd,Qe=fe.bd,at=-2&fe.v,lt=-2&fe.j;if(0>at||0>lt||0>=Ge||0>=Qe||at+Ge>G||lt+Qe>Q)return 2;G=Ge,Q=Qe}if(fe.da){if(!or(G,Q,Ge=[fe.ib],Qe=[fe.hb]))return 2;G=Ge[0],Q=Qe[0]}}Ne.width=G,Ne.height=Q;e:{var pt=Ne.width,Ct=Ne.height;if(G=Ne.S,0>=pt||0>=Ct||!(G>=yc&&13>G))G=2;else{if(0>=Ne.Rd&&Ne.sd==null){at=Qe=Ge=Q=0;var Qt=(lt=pt*jh[G])*Ct;if(11>G||(Qe=(Ct+1)/2*(Q=(pt+1)/2),G==12&&(at=(Ge=pt)*Ct)),(Ct=l(Qt+2*Qe+at))==null){G=1;break e}Ne.sd=Ct,11>G?((pt=Ne.f.RGBA).eb=Ct,pt.fb=0,pt.A=lt,pt.size=Qt):((pt=Ne.f.kb).y=Ct,pt.O=0,pt.fa=lt,pt.Fd=Qt,pt.f=Ct,pt.N=0+Qt,pt.Ab=Q,pt.Cd=Qe,pt.ea=Ct,pt.W=0+Qt+Qe,pt.Db=Q,pt.Ed=Qe,G==12&&(pt.F=Ct,pt.J=0+Qt+2*Qe),pt.Tc=at,pt.lb=Ge)}if(Q=1,Ge=Ne.S,Qe=Ne.width,at=Ne.height,Ge>=yc&&13>Ge)if(11>Ge)G=Ne.f.RGBA,Q&=(lt=Math.abs(G.A))*(at-1)+Qe<=G.size,Q&=lt>=Qe*jh[Ge],Q&=G.eb!=null;else{G=Ne.f.kb,lt=(Qe+1)/2,Qt=(at+1)/2,pt=Math.abs(G.fa),Ct=Math.abs(G.Ab);var Pt=Math.abs(G.Db),_a=Math.abs(G.lb),na=_a*(at-1)+Qe;Q&=pt*(at-1)+Qe<=G.Fd,Q&=Ct*(Qt-1)+lt<=G.Cd,Q=(Q&=Pt*(Qt-1)+lt<=G.Ed)&pt>=Qe&Ct>=lt&Pt>=lt,Q&=G.y!=null,Q&=G.f!=null,Q&=G.ea!=null,Ge==12&&(Q&=_a>=Qe,Q&=na<=G.Tc,Q&=G.F!=null)}else Q=0;G=Q?0:2}}return G!=0||fe!=null&&fe.fd&&(G=dc(Ne)),G}var bs=64,Ai=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],hc=24,Va=32,Pd=8,qs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];er("Predictor0","PredictorAdd0"),Re.Predictor0=function(){return 4278190080},Re.Predictor1=function(G){return G},Re.Predictor2=function(G,Q,fe){return Q[fe+0]},Re.Predictor3=function(G,Q,fe){return Q[fe+1]},Re.Predictor4=function(G,Q,fe){return Q[fe-1]},Re.Predictor5=function(G,Q,fe){return cr(cr(G,Q[fe+1]),Q[fe+0])},Re.Predictor6=function(G,Q,fe){return cr(G,Q[fe-1])},Re.Predictor7=function(G,Q,fe){return cr(G,Q[fe+0])},Re.Predictor8=function(G,Q,fe){return cr(Q[fe-1],Q[fe+0])},Re.Predictor9=function(G,Q,fe){return cr(Q[fe+0],Q[fe+1])},Re.Predictor10=function(G,Q,fe){return cr(cr(G,Q[fe-1]),cr(Q[fe+0],Q[fe+1]))},Re.Predictor11=function(G,Q,fe){var Ne=Q[fe+0];return 0>=jr(Ne>>24&255,G>>24&255,(Q=Q[fe-1])>>24&255)+jr(Ne>>16&255,G>>16&255,Q>>16&255)+jr(Ne>>8&255,G>>8&255,Q>>8&255)+jr(255&Ne,255&G,255&Q)?Ne:G},Re.Predictor12=function(G,Q,fe){var Ne=Q[fe+0];return(Pr((G>>24&255)+(Ne>>24&255)-((Q=Q[fe-1])>>24&255))<<24|Pr((G>>16&255)+(Ne>>16&255)-(Q>>16&255))<<16|Pr((G>>8&255)+(Ne>>8&255)-(Q>>8&255))<<8|Pr((255&G)+(255&Ne)-(255&Q)))>>>0},Re.Predictor13=function(G,Q,fe){var Ne=Q[fe-1];return(ka((G=cr(G,Q[fe+0]))>>24&255,Ne>>24&255)<<24|ka(G>>16&255,Ne>>16&255)<<16|ka(G>>8&255,Ne>>8&255)<<8|ka(G>>0&255,Ne>>0&255))>>>0};var co=Re.PredictorAdd0;Re.PredictorAdd1=pn,er("Predictor2","PredictorAdd2"),er("Predictor3","PredictorAdd3"),er("Predictor4","PredictorAdd4"),er("Predictor5","PredictorAdd5"),er("Predictor6","PredictorAdd6"),er("Predictor7","PredictorAdd7"),er("Predictor8","PredictorAdd8"),er("Predictor9","PredictorAdd9"),er("Predictor10","PredictorAdd10"),er("Predictor11","PredictorAdd11"),er("Predictor12","PredictorAdd12"),er("Predictor13","PredictorAdd13");var Af=Re.PredictorAdd2;Wa("ColorIndexInverseTransform","MapARGB","32b",function(G){return G>>8&255},function(G){return G}),Wa("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(G){return G},function(G){return G>>8&255});var Mh,ho=Re.ColorIndexInverseTransform,Os=Re.MapARGB,Pl=Re.VP8LColorIndexInverseTransformAlpha,Mc=Re.MapAlpha,Ql=Re.VP8LPredictorsAdd=[];Ql.length=16,(Re.VP8LPredictors=[]).length=16,(Re.VP8LPredictorsAdd_C=[]).length=16,(Re.VP8LPredictors_C=[]).length=16;var ch,El,Ro,Ed,Ic,Nl,fc,vu,Zi,_f,Qs,fo,Nd,Vd,eo,Lc,pc,wu,Fc,Ru,Uc,mc,ju,Bo,cs,Xn,ai,qi,is=l(511),eu=l(2041),kc=l(225),Qo=l(767),tu=0,tn=eu,Bc=kc,Vl=Qo,ts=is,yc=0,zd=1,di=2,Ih=3,el=4,pl=5,Gc=6,Tu=7,Zu=8,gc=9,qp=10,Lh=[2,3,7],Fh=[3,3,11],tl=[280,256,256,256,40],Hi=[0,1,1,1,0],_i=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],au=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Su=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Xf=8,Ac=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],vf=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Od=null,Uh=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],kh=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Dd=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],wf=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Zm=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],dh=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Ly=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],_c=[],qu=[],Cu=[],Fy=1,Bh=2,ml=[],al=[];Da("UpsampleRgbLinePair",mi,3),Da("UpsampleBgrLinePair",Ss,3),Da("UpsampleRgbaLinePair",ir,4),Da("UpsampleBgraLinePair",br,4),Da("UpsampleArgbLinePair",es,4),Da("UpsampleRgba4444LinePair",Js,2),Da("UpsampleRgb565LinePair",Cs,2);var Gh=Re.UpsampleRgbLinePair,Md=Re.UpsampleBgrLinePair,Hp=Re.UpsampleRgbaLinePair,$p=Re.UpsampleBgraLinePair,jc=Re.UpsampleArgbLinePair,Rf=Re.UpsampleRgba4444LinePair,rl=Re.UpsampleRgb565LinePair,Id=16,bu=1<<Id-1,Ld=-227,Zc=482,zl=6,Hu=0,qc=l(256),Jf=l(256),Fd=l(256),Hc=l(256),Ds=l(Zc-Ld),Kp=l(Zc-Ld);Rr("YuvToRgbRow",mi,3),Rr("YuvToBgrRow",Ss,3),Rr("YuvToRgbaRow",ir,4),Rr("YuvToBgraRow",br,4),Rr("YuvToArgbRow",es,4),Rr("YuvToRgba4444Row",Js,2),Rr("YuvToRgb565Row",Cs,2);var qm=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Tf=[0,2,8],Wp=[8,7,6,4,4,2,2,2,1,1,1,1],to=1;this.WebPDecodeRGBA=function(G,Q,fe,Ne,Ge){var Qe=zd,at=new gu,lt=new Qi;at.ba=lt,lt.S=Qe,lt.width=[lt.width],lt.height=[lt.height];var pt=lt.width,Ct=lt.height,Qt=new Oo;if(Qt==null||G==null)var Pt=2;else e(Qt!=null),Pt=uh(G,Q,fe,Qt.width,Qt.height,Qt.Pd,Qt.Qd,Qt.format,null);if(Pt!=0?pt=0:(pt!=null&&(pt[0]=Qt.width[0]),Ct!=null&&(Ct[0]=Qt.height[0]),pt=1),pt){lt.width=lt.width[0],lt.height=lt.height[0],Ne!=null&&(Ne[0]=lt.width),Ge!=null&&(Ge[0]=lt.height);e:{if(Ne=new sc,(Ge=new Au).data=G,Ge.w=Q,Ge.ha=fe,Ge.kd=1,Q=[0],e(Ge!=null),((G=uh(Ge.data,Ge.w,Ge.ha,null,null,null,Q,null,Ge))==0||G==7)&&Q[0]&&(G=4),(Q=G)==0){if(e(at!=null),Ne.data=Ge.data,Ne.w=Ge.w+Ge.offset,Ne.ha=Ge.ha-Ge.offset,Ne.put=Jt,Ne.ac=Us,Ne.bc=xe,Ne.ma=at,Ge.xa){if((G=_r())==null){at=1;break e}if(function(_a,na){var Ra=[0],fa=[0],wt=[0];t:for(;;){if(_a==null)return 0;if(na==null)return _a.a=2,0;if(_a.l=na,_a.a=0,ke(_a.m,na.data,na.w,na.ha),!Oe(_a.m,Ra,fa,wt)){_a.a=3;break t}if(_a.xb=Bh,na.width=Ra[0],na.height=fa[0],!Nr(Ra[0],fa[0],1,_a,null))break t;return 1}return e(_a.a!=0),0}(G,Ne)){if(Ne=(Q=xd(Ne.width,Ne.height,at.Oa,at.ba))==0){t:{Ne=G;a:for(;;){if(Ne==null){Ne=0;break t}if(e(Ne.s.yc!=null),e(Ne.s.Ya!=null),e(0<Ne.s.Wb),e((fe=Ne.l)!=null),e((Ge=fe.ma)!=null),Ne.xb!=0){if(Ne.ca=Ge.ba,Ne.tb=Ge.tb,e(Ne.ca!=null),!Jl(Ge.Oa,fe,Ih)){Ne.a=2;break a}if(!Vr(Ne,fe.width)||fe.da)break a;if((fe.da||Er(Ne.ca.S))&&ha(),11>Ne.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Ne.ca.f.kb.F!=null&&ha()),Ne.Pb&&0<Ne.s.ua&&Ne.s.vb.X==null&&!It(Ne.s.vb,Ne.s.Wa.Xa)){Ne.a=1;break a}Ne.xb=0}if(!Ma(Ne,Ne.V,Ne.Ba,Ne.c,Ne.i,fe.o,$t))break a;Ge.Dc=Ne.Ma,Ne=1;break t}e(Ne.a!=0),Ne=0}Ne=!Ne}Ne&&(Q=G.a)}else Q=G.a}else{if((G=new Wo)==null){at=1;break e}if(G.Fa=Ge.na,G.P=Ge.P,G.qc=Ge.Sa,Mo(G,Ne)){if((Q=xd(Ne.width,Ne.height,at.Oa,at.ba))==0){if(G.Aa=0,fe=at.Oa,e((Ge=G)!=null),fe!=null){if(0<(pt=0>(pt=fe.Md)?0:100<pt?255:255*pt/100)){for(Ct=Qt=0;4>Ct;++Ct)12>(Pt=Ge.pb[Ct]).lc&&(Pt.ia=pt*Wp[0>Pt.lc?0:Pt.lc]>>3),Qt|=Pt.ia;Qt&&(alert("todo:VP8InitRandom"),Ge.ia=1)}Ge.Ga=fe.Id,100<Ge.Ga?Ge.Ga=100:0>Ge.Ga&&(Ge.Ga=0)}ih(G,Ne)||(Q=G.a)}}else Q=G.a}Q==0&&at.Oa!=null&&at.Oa.fd&&(Q=dc(at.ba))}at=Q}Qe=at!=0?null:11>Qe?lt.f.RGBA.eb:lt.f.kb.y}else Qe=null;return Qe};var jh=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function T(Re,be){for(var De="",ie=0;ie<4;ie++)De+=String.fromCharCode(Re[be++]);return De}function P(Re,be){return(Re[be+0]<<0|Re[be+1]<<8|Re[be+2]<<16)>>>0}function z(Re,be){return(Re[be+0]<<0|Re[be+1]<<8|Re[be+2]<<16|Re[be+3]<<24)>>>0}new w;var k=[0],U=[0],Z=[],H=new w,q=t,J=function(Re,be){var De={},ie=0,ge=!1,Me=0,ze=0;if(De.frames=[],!function(Se,$e,ht,ft){for(var ut=0;ut<ft;ut++)if(Se[$e+ut]!=ht.charCodeAt(ut))return!0;return!1}(Re,be,"RIFF",4)){for(z(Re,be+=4),be+=8;be<Re.length;){var Le=T(Re,be),Ie=z(Re,be+=4);be+=4;var Ze=Ie+(1&Ie);switch(Le){case"VP8 ":case"VP8L":De.frames[ie]===void 0&&(De.frames[ie]={}),(Ue=De.frames[ie]).src_off=ge?ze:be-8,Ue.src_size=Me+Ie+8,ie++,ge&&(ge=!1,Me=0,ze=0);break;case"VP8X":(Ue=De.header={}).feature_flags=Re[be];var ke=be+4;Ue.canvas_width=1+P(Re,ke),ke+=3,Ue.canvas_height=1+P(Re,ke),ke+=3;break;case"ALPH":ge=!0,Me=Ze+8,ze=be-8;break;case"ANIM":(Ue=De.header).bgcolor=z(Re,be),ke=be+4,Ue.loop_count=(He=Re)[(Ce=ke)+0]<<0|He[Ce+1]<<8,ke+=2;break;case"ANMF":var tt,Ue;(Ue=De.frames[ie]={}).offset_x=2*P(Re,be),be+=3,Ue.offset_y=2*P(Re,be),be+=3,Ue.width=1+P(Re,be),be+=3,Ue.height=1+P(Re,be),be+=3,Ue.duration=P(Re,be),be+=3,tt=Re[be++],Ue.dispose=1&tt,Ue.blend=tt>>1&1}Le!="ANMF"&&(be+=Ze)}var He,Ce;return De}}(q,0);J.response=q,J.rgbaoutput=!0,J.dataurl=!1;var re=J.header?J.header:null,ce=J.frames?J.frames:null;if(re){re.loop_counter=re.loop_count,k=[re.canvas_height],U=[re.canvas_width];for(var ye=0;ye<ce.length&&ce[ye].blend!=0;ye++);}var he=ce[0],_e=H.WebPDecodeRGBA(q,he.src_off,he.src_size,U,k);he.rgba=_e,he.imgwidth=U[0],he.imgheight=k[0];for(var me=0;me<U[0]*k[0]*4;me++)Z[me]=_e[me];return this.width=U,this.height=k,this.data=Z,this}(function(t){var e=function(){return typeof iI=="function"},a=function(k,U,Z,H){var q=4,J=h;switch(H){case t.image_compression.FAST:q=1,J=l;break;case t.image_compression.MEDIUM:q=6,J=n;break;case t.image_compression.SLOW:q=9,J=w}k=r(k,U,Z,J);var re=iI(k,{level:q});return t.__addimage__.arrayBufferToBinaryString(re)},r=function(k,U,Z,H){for(var q,J,re,ce=k.length/U,ye=new Uint8Array(k.length+ce),he=P(),_e=0;_e<ce;_e+=1){if(re=_e*U,q=k.subarray(re,re+U),H)ye.set(H(q,Z,J),re+_e);else{for(var me,Re=he.length,be=[];me<Re;me+=1)be[me]=he[me](q,Z,J);var De=z(be.concat());ye.set(be[De],re+_e)}J=q}return ye},s=function(k){var U=Array.apply([],k);return U.unshift(0),U},l=function(k,U){var Z,H=[],q=k.length;H[0]=1;for(var J=0;J<q;J+=1)Z=k[J-U]||0,H[J+1]=k[J]-Z+256&255;return H},h=function(k,U,Z){var H,q=[],J=k.length;q[0]=2;for(var re=0;re<J;re+=1)H=Z&&Z[re]||0,q[re+1]=k[re]-H+256&255;return q},n=function(k,U,Z){var H,q,J=[],re=k.length;J[0]=3;for(var ce=0;ce<re;ce+=1)H=k[ce-U]||0,q=Z&&Z[ce]||0,J[ce+1]=k[ce]+256-(H+q>>>1)&255;return J},w=function(k,U,Z){var H,q,J,re,ce=[],ye=k.length;ce[0]=4;for(var he=0;he<ye;he+=1)H=k[he-U]||0,q=Z&&Z[he]||0,J=Z&&Z[he-U]||0,re=T(H,q,J),ce[he+1]=k[he]-re+256&255;return ce},T=function(k,U,Z){if(k===U&&U===Z)return k;var H=Math.abs(U-Z),q=Math.abs(k-Z),J=Math.abs(k+U-Z-Z);return H<=q&&H<=J?k:q<=J?U:Z},P=function(){return[s,l,h,n,w]},z=function(k){var U=k.map(function(Z){return Z.reduce(function(H,q){return H+Math.abs(q)},0)});return U.indexOf(Math.min.apply(null,U))};t.processPNG=function(k,U,Z,H){var q,J,re,ce,ye,he,_e,me,Re,be,De,ie,ge,Me,ze,Le=this.decode.FLATE_DECODE,Ie="";if(this.__addimage__.isArrayBuffer(k)&&(k=new Uint8Array(k)),this.__addimage__.isArrayBufferView(k)){if(k=(re=new iEe(k)).imgData,J=re.bits,q=re.colorSpace,ye=re.colors,[4,6].indexOf(re.colorType)!==-1){if(re.bits===8){Re=(me=re.pixelBitlength==32?new Uint32Array(re.decodePixels().buffer):re.pixelBitlength==16?new Uint16Array(re.decodePixels().buffer):new Uint8Array(re.decodePixels().buffer)).length,De=new Uint8Array(Re*re.colors),be=new Uint8Array(Re);var Ze,ke=re.pixelBitlength-re.bits;for(Me=0,ze=0;Me<Re;Me++){for(ge=me[Me],Ze=0;Ze<ke;)De[ze++]=ge>>>Ze&255,Ze+=re.bits;be[Me]=ge>>>Ze&255}}if(re.bits===16){Re=(me=new Uint32Array(re.decodePixels().buffer)).length,De=new Uint8Array(Re*(32/re.pixelBitlength)*re.colors),be=new Uint8Array(Re*(32/re.pixelBitlength)),ie=re.colors>1,Me=0,ze=0;for(var tt=0;Me<Re;)ge=me[Me++],De[ze++]=ge>>>0&255,ie&&(De[ze++]=ge>>>16&255,ge=me[Me++],De[ze++]=ge>>>0&255),be[tt++]=ge>>>16&255;J=8}H!==t.image_compression.NONE&&e()?(k=a(De,re.width*re.colors,re.colors,H),_e=a(be,re.width,1,H)):(k=De,_e=be,Le=void 0)}if(re.colorType===3&&(q=this.color_spaces.INDEXED,he=re.palette,re.transparency.indexed)){var Ue=re.transparency.indexed,He=0;for(Me=0,Re=Ue.length;Me<Re;++Me)He+=Ue[Me];if((He/=255)===Re-1&&Ue.indexOf(0)!==-1)ce=[Ue.indexOf(0)];else if(He!==Re){for(me=re.decodePixels(),be=new Uint8Array(me.length),Me=0,Re=me.length;Me<Re;Me++)be[Me]=Ue[me[Me]];_e=a(be,re.width,1)}}var Ce=function(Se){var $e;switch(Se){case t.image_compression.FAST:$e=11;break;case t.image_compression.MEDIUM:$e=13;break;case t.image_compression.SLOW:$e=14;break;default:$e=12}return $e}(H);return Le===this.decode.FLATE_DECODE&&(Ie="/Predictor "+Ce+" "),Ie+="/Colors "+ye+" /BitsPerComponent "+J+" /Columns "+re.width,(this.__addimage__.isArrayBuffer(k)||this.__addimage__.isArrayBufferView(k))&&(k=this.__addimage__.arrayBufferToBinaryString(k)),(_e&&this.__addimage__.isArrayBuffer(_e)||this.__addimage__.isArrayBufferView(_e))&&(_e=this.__addimage__.arrayBufferToBinaryString(_e)),{alias:Z,data:k,index:U,filter:Le,decodeParameters:Ie,transparency:ce,palette:he,sMask:_e,predictor:Ce,width:re.width,height:re.height,bitsPerComponent:J,colorSpace:q}}}})(jn.API),function(t){t.processGIF89A=function(e,a,r,s){var l=new sEe(e),h=l.width,n=l.height,w=[];l.decodeAndBlitFrameRGBA(0,w);var T={data:w,width:h,height:n},P=new U5(100).encode(T,100);return t.processJPEG.call(this,P,a,r,s)},t.processGIF87A=t.processGIF89A}(jn.API),bp.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var a=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:r,blue:a,quad:l}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},bp.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(a){io.log("bit decode error:"+a)}},bp.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),a=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,s=0;s<e;s++)for(var l=this.datav.getUint8(this.pos++,!0),h=r*this.width*4+8*s*4,n=0;n<8&&8*s+n<this.width;n++){var w=this.palette[l>>7-n&1];this.data[h+4*n]=w.blue,this.data[h+4*n+1]=w.green,this.data[h+4*n+2]=w.red,this.data[h+4*n+3]=255}a!==0&&(this.pos+=4-a)}},bp.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,a=this.height-1;a>=0;a--){for(var r=this.bottom_up?a:this.height-1-a,s=0;s<t;s++){var l=this.datav.getUint8(this.pos++,!0),h=r*this.width*4+2*s*4,n=l>>4,w=15&l,T=this.palette[n];if(this.data[h]=T.blue,this.data[h+1]=T.green,this.data[h+2]=T.red,this.data[h+3]=255,2*s+1>=this.width)break;T=this.palette[w],this.data[h+4]=T.blue,this.data[h+4+1]=T.green,this.data[h+4+2]=T.red,this.data[h+4+3]=255}e!==0&&(this.pos+=4-e)}},bp.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var a=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),l=a*this.width*4+4*r;if(s<this.palette.length){var h=this.palette[s];this.data[l]=h.red,this.data[l+1]=h.green,this.data[l+2]=h.blue,this.data[l+3]=255}else this.data[l]=255,this.data[l+1]=255,this.data[l+2]=255,this.data[l+3]=255}t!==0&&(this.pos+=4-t)}},bp.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),a=this.height-1;a>=0;a--){for(var r=this.bottom_up?a:this.height-1-a,s=0;s<this.width;s++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var h=(l&e)/e*255|0,n=(l>>5&e)/e*255|0,w=(l>>10&e)/e*255|0,T=l>>15?255:0,P=r*this.width*4+4*s;this.data[P]=w,this.data[P+1]=n,this.data[P+2]=h,this.data[P+3]=T}this.pos+=t}},bp.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),a=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,l=0;l<this.width;l++){var h=this.datav.getUint16(this.pos,!0);this.pos+=2;var n=(h&e)/e*255|0,w=(h>>5&a)/a*255|0,T=(h>>11)/e*255|0,P=s*this.width*4+4*l;this.data[P]=T,this.data[P+1]=w,this.data[P+2]=n,this.data[P+3]=255}this.pos+=t}},bp.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),h=e*this.width*4+4*a;this.data[h]=l,this.data[h+1]=s,this.data[h+2]=r,this.data[h+3]=255}this.pos+=this.width%4}},bp.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),h=this.datav.getUint8(this.pos++,!0),n=e*this.width*4+4*a;this.data[n]=l,this.data[n+1]=s,this.data[n+2]=r,this.data[n+3]=h}},bp.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,a,r,s){var l=new bp(e,!1),h=l.width,n=l.height,w={data:l.getData(),width:h,height:n},T=new U5(100).encode(w,100);return t.processJPEG.call(this,T,a,r,s)}}(jn.API),sq.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,a,r,s){var l=new sq(e),h=l.width,n=l.height,w={data:l.getData(),width:h,height:n},T=new U5(100).encode(w,100);return t.processJPEG.call(this,T,a,r,s)}}(jn.API),jn.API.processRGBA=function(t,e,a){for(var r=t.data,s=r.length,l=new Uint8Array(s/4*3),h=new Uint8Array(s/4),n=0,w=0,T=0;T<s;T+=4){var P=r[T],z=r[T+1],k=r[T+2],U=r[T+3];l[n++]=P,l[n++]=z,l[n++]=k,h[w++]=U}var Z=this.__addimage__.arrayBufferToBinaryString(l);return{alpha:this.__addimage__.arrayBufferToBinaryString(h),data:Z,index:e,alias:a,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},jn.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},E_=jn.API,IC=E_.getCharWidthsArray=function(t,e){var a,r,s=(e=e||{}).font||this.internal.getFont(),l=e.fontSize||this.internal.getFontSize(),h=e.charSpace||this.internal.getCharSpace(),n=e.widths?e.widths:s.metadata.Unicode.widths,w=n.fof?n.fof:1,T=e.kerning?e.kerning:s.metadata.Unicode.kerning,P=T.fof?T.fof:1,z=e.doKerning!==!1,k=0,U=t.length,Z=0,H=n[0]||w,q=[];for(a=0;a<U;a++)r=t.charCodeAt(a),typeof s.metadata.widthOfString=="function"?q.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(r))+h*(1e3/l)||0)/1e3):(k=z&&Ls(T[r])==="object"&&!isNaN(parseInt(T[r][Z],10))?T[r][Z]/P:0,q.push((n[r]||H)/w+k)),Z=r;return q},aq=E_.getStringUnitWidth=function(t,e){var a=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return E_.processArabic&&(t=E_.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,a,s)/a:IC.apply(this,arguments).reduce(function(l,h){return l+h},0)},rq=function(t,e,a,r){for(var s=[],l=0,h=t.length,n=0;l!==h&&n+e[l]<a;)n+=e[l],l++;s.push(t.slice(0,l));var w=l;for(n=0;l!==h;)n+e[l]>r&&(s.push(t.slice(w,l)),n=0,w=l),n+=e[l],l++;return w!==l&&s.push(t.slice(w,l)),s},nq=function(t,e,a){a||(a={});var r,s,l,h,n,w,T,P=[],z=[P],k=a.textIndent||0,U=0,Z=0,H=t.split(" "),q=IC.apply(this,[" ",a])[0];if(w=a.lineIndent===-1?H[0].length+2:a.lineIndent||0){var J=Array(w).join(" "),re=[];H.map(function(ye){(ye=ye.split(/\s*\n/)).length>1?re=re.concat(ye.map(function(he,_e){return(_e&&he.length?`
`:"")+he})):re.push(ye[0])}),H=re,w=aq.apply(this,[J,a])}for(l=0,h=H.length;l<h;l++){var ce=0;if(r=H[l],w&&r[0]==`
`&&(r=r.substr(1),ce=1),k+U+(Z=(s=IC.apply(this,[r,a])).reduce(function(ye,he){return ye+he},0))>e||ce){if(Z>e){for(n=rq.apply(this,[r,s,e-(k+U),e]),P.push(n.shift()),P=[n.pop()];n.length;)z.push([n.shift()]);Z=s.slice(r.length-(P[0]?P[0].length:0)).reduce(function(ye,he){return ye+he},0)}else P=[r];z.push(P),k=Z+w,U=q}else P.push(r),k+=U+Z,U=q}return T=w?function(ye,he){return(he?J:"")+ye.join(" ")}:function(ye){return ye.join(" ")},z.map(T)},E_.splitTextToSize=function(t,e,a){var r,s=(a=a||{}).fontSize||this.internal.getFontSize(),l=(function(P){if(P.widths&&P.kerning)return{widths:P.widths,kerning:P.kerning};var z=this.internal.getFont(P.fontName,P.fontStyle);return z.metadata.Unicode?{widths:z.metadata.Unicode.widths||{0:1},kerning:z.metadata.Unicode.kerning||{}}:{font:z.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,a);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var h=1*this.internal.scaleFactor*e/s;l.textIndent=a.textIndent?1*a.textIndent*this.internal.scaleFactor/s:0,l.lineIndent=a.lineIndent;var n,w,T=[];for(n=0,w=r.length;n<w;n++)T=T.concat(nq.apply(this,[r[n],h,l]));return T},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",a={},r={},s=0;s<e.length;s++)a[e[s]]="0123456789abcdef"[s],r["0123456789abcdef"[s]]=e[s];var l=function(z){return"0x"+parseInt(z,10).toString(16)},h=t.__fontmetrics__.compress=function(z){var k,U,Z,H,q=["{"];for(var J in z){if(k=z[J],isNaN(parseInt(J,10))?U="'"+J+"'":(J=parseInt(J,10),U=(U=l(J).slice(2)).slice(0,-1)+r[U.slice(-1)]),typeof k=="number")k<0?(Z=l(k).slice(3),H="-"):(Z=l(k).slice(2),H=""),Z=H+Z.slice(0,-1)+r[Z.slice(-1)];else{if(Ls(k)!=="object")throw new Error("Don't know what to do with value type "+Ls(k)+".");Z=h(k)}q.push(U+Z)}return q.push("}"),q.join("")},n=t.__fontmetrics__.uncompress=function(z){if(typeof z!="string")throw new Error("Invalid argument passed to uncompress.");for(var k,U,Z,H,q={},J=1,re=q,ce=[],ye="",he="",_e=z.length-1,me=1;me<_e;me+=1)(H=z[me])=="'"?k?(Z=k.join(""),k=void 0):k=[]:k?k.push(H):H=="{"?(ce.push([re,Z]),re={},Z=void 0):H=="}"?((U=ce.pop())[0][U[1]]=re,Z=void 0,re=U[0]):H=="-"?J=-1:Z===void 0?a.hasOwnProperty(H)?(ye+=a[H],Z=parseInt(ye,16)*J,J=1,ye=""):ye+=H:a.hasOwnProperty(H)?(he+=a[H],re[Z]=parseInt(he,16)*J,J=1,Z=void 0,he=""):he+=H;return q},w={codePages:["WinAnsiEncoding"],WinAnsiEncoding:n("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},T={Unicode:{Courier:w,"Courier-Bold":w,"Courier-BoldOblique":w,"Courier-Oblique":w,Helvetica:w,"Helvetica-Bold":w,"Helvetica-BoldOblique":w,"Helvetica-Oblique":w,"Times-Roman":w,"Times-Bold":w,"Times-BoldItalic":w,"Times-Italic":w}},P={Unicode:{"Courier-Oblique":n("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":n("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":n("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:n("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":n("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":n("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:n("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:n("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":n("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:n("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":n("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":n("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":n("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":n("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(z){var k=z.font,U=P.Unicode[k.postScriptName];U&&(k.metadata.Unicode={},k.metadata.Unicode.widths=U.widths,k.metadata.Unicode.kerning=U.kerning);var Z=T.Unicode[k.postScriptName];Z&&(k.metadata.Unicode.encoding=Z,k.encoding=Z.codePages[0])}])}(jn.API),function(t){var e=function(a){for(var r=a.length,s=new Uint8Array(r),l=0;l<r;l++)s[l]=a.charCodeAt(l);return s};t.API.events.push(["addFont",function(a){var r=void 0,s=a.font,l=a.instance;if(!s.isStandardFont){if(l===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(r=l.existsFileInVFS(s.postScriptName)===!1?l.loadFile(s.postScriptName):l.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(h,n){n=/^\x00\x01\x00\x00/.test(n)?e(n):e(cR(n)),h.metadata=t.API.TTFFont.open(n),h.metadata.Unicode=h.metadata.Unicode||{encoding:{},kerning:{},widths:[]},h.metadata.glyIdsUsed=[0]})(s,r)}}])}(jn),function(t){function e(){return(Wn.canvg?Promise.resolve(Wn.canvg):eI(()=>import("./index.es-DhAg9c3i.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load canvg: "+a))}).then(function(a){return a.default?a.default:a})}jn.API.addSvgAsImage=function(a,r,s,l,h,n,w,T){if(isNaN(r)||isNaN(s))throw io.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(l)||isNaN(h))throw io.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var P=document.createElement("canvas");P.width=l,P.height=h;var z=P.getContext("2d");z.fillStyle="#fff",z.fillRect(0,0,P.width,P.height);var k={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},U=this;return e().then(function(Z){return Z.fromString(z,a,k)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(Z){return Z.render(k)}).then(function(){U.addImage(P.toDataURL("image/jpeg",1),r,s,l,h,w,T)})}}(),jn.API.putTotalPages=function(t){var e,a=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),a=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),a=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var s=0;s<this.internal.pages[r].length;s++)this.internal.pages[r][s]=this.internal.pages[r][s].replace(e,a);return this},jn.API.viewerPreferences=function(t,e){var a;t=t||{},e=e||!1;var r,s,l,h={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},n=Object.keys(h),w=[],T=0,P=0,z=0;function k(Z,H){var q,J=!1;for(q=0;q<Z.length;q+=1)Z[q]===H&&(J=!0);return J}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(h)),this.internal.viewerpreferences.isSubscribed=!1),a=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var U=n.length;for(z=0;z<U;z+=1)a[n[z]].value=a[n[z]].defaultValue,a[n[z]].explicitSet=!1}if(Ls(t)==="object"){for(s in t)if(l=t[s],k(n,s)&&l!==void 0){if(a[s].type==="boolean"&&typeof l=="boolean")a[s].value=l;else if(a[s].type==="name"&&k(a[s].valueSet,l))a[s].value=l;else if(a[s].type==="integer"&&Number.isInteger(l))a[s].value=l;else if(a[s].type==="array"){for(T=0;T<l.length;T+=1)if(r=!0,l[T].length===1&&typeof l[T][0]=="number")w.push(String(l[T]-1));else if(l[T].length>1){for(P=0;P<l[T].length;P+=1)typeof l[T][P]!="number"&&(r=!1);r===!0&&w.push([l[T][0]-1,l[T][1]-1].join(" "))}a[s].value="["+w.join(" ")+"]"}else a[s].value=a[s].defaultValue;a[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var Z,H=[];for(Z in a)a[Z].explicitSet===!0&&(a[Z].type==="name"?H.push("/"+Z+" /"+a[Z].value):H.push("/"+Z+" "+a[Z].value));H.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+H.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=a,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),l=unescape(encodeURIComponent(r)),h=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),n=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),w=unescape(encodeURIComponent("</x:xmpmeta>")),T=l.length+h.length+n.length+s.length+w.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+T+" >>"),this.internal.write("stream"),this.internal.write(s+l+h+n+w),this.internal.write("endstream"),this.internal.write("endobj")},a=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",a),this.internal.events.subscribe("postPutResources",e)),this}}(jn.API),function(t){var e=t.API,a=e.pdfEscape16=function(l,h){for(var n,w=h.metadata.Unicode.widths,T=["","0","00","000","0000"],P=[""],z=0,k=l.length;z<k;++z){if(n=h.metadata.characterToGlyph(l.charCodeAt(z)),h.metadata.glyIdsUsed.push(n),h.metadata.toUnicode[n]=l.charCodeAt(z),w.indexOf(n)==-1&&(w.push(n),w.push([parseInt(h.metadata.widthOfGlyph(n),10)])),n=="0")return P.join("");n=n.toString(16),P.push(T[4-n.length],n)}return P.join("")},r=function(l){var h,n,w,T,P,z,k;for(P=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,w=[],z=0,k=(n=Object.keys(l).sort(function(U,Z){return U-Z})).length;z<k;z++)h=n[z],w.length>=100&&(P+=`
`+w.length+` beginbfchar
`+w.join(`
`)+`
endbfchar`,w=[]),l[h]!==void 0&&l[h]!==null&&typeof l[h].toString=="function"&&(T=("0000"+l[h].toString(16)).slice(-4),h=("0000"+(+h).toString(16)).slice(-4),w.push("<"+h+"><"+T+">"));return w.length&&(P+=`
`+w.length+` beginbfchar
`+w.join(`
`)+`
endbfchar
`),P+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(l){(function(h){var n=h.font,w=h.out,T=h.newObject,P=h.putStream;if(n.metadata instanceof t.API.TTFFont&&n.encoding==="Identity-H"){for(var z=n.metadata.Unicode.widths,k=n.metadata.subset.encode(n.metadata.glyIdsUsed,1),U="",Z=0;Z<k.length;Z++)U+=String.fromCharCode(k[Z]);var H=T();P({data:U,addLength1:!0,objectId:H}),w("endobj");var q=T();P({data:r(n.metadata.toUnicode),addLength1:!0,objectId:q}),w("endobj");var J=T();w("<<"),w("/Type /FontDescriptor"),w("/FontName /"+D_(n.fontName)),w("/FontFile2 "+H+" 0 R"),w("/FontBBox "+t.API.PDFObject.convert(n.metadata.bbox)),w("/Flags "+n.metadata.flags),w("/StemV "+n.metadata.stemV),w("/ItalicAngle "+n.metadata.italicAngle),w("/Ascent "+n.metadata.ascender),w("/Descent "+n.metadata.decender),w("/CapHeight "+n.metadata.capHeight),w(">>"),w("endobj");var re=T();w("<<"),w("/Type /Font"),w("/BaseFont /"+D_(n.fontName)),w("/FontDescriptor "+J+" 0 R"),w("/W "+t.API.PDFObject.convert(z)),w("/CIDToGIDMap /Identity"),w("/DW 1000"),w("/Subtype /CIDFontType2"),w("/CIDSystemInfo"),w("<<"),w("/Supplement 0"),w("/Registry (Adobe)"),w("/Ordering ("+n.encoding+")"),w(">>"),w(">>"),w("endobj"),n.objectNumber=T(),w("<<"),w("/Type /Font"),w("/Subtype /Type0"),w("/ToUnicode "+q+" 0 R"),w("/BaseFont /"+D_(n.fontName)),w("/Encoding /"+n.encoding),w("/DescendantFonts ["+re+" 0 R]"),w(">>"),w("endobj"),n.isAlreadyPutted=!0}})(l)}]),e.events.push(["putFont",function(l){(function(h){var n=h.font,w=h.out,T=h.newObject,P=h.putStream;if(n.metadata instanceof t.API.TTFFont&&n.encoding==="WinAnsiEncoding"){for(var z=n.metadata.rawData,k="",U=0;U<z.length;U++)k+=String.fromCharCode(z[U]);var Z=T();P({data:k,addLength1:!0,objectId:Z}),w("endobj");var H=T();P({data:r(n.metadata.toUnicode),addLength1:!0,objectId:H}),w("endobj");var q=T();w("<<"),w("/Descent "+n.metadata.decender),w("/CapHeight "+n.metadata.capHeight),w("/StemV "+n.metadata.stemV),w("/Type /FontDescriptor"),w("/FontFile2 "+Z+" 0 R"),w("/Flags 96"),w("/FontBBox "+t.API.PDFObject.convert(n.metadata.bbox)),w("/FontName /"+D_(n.fontName)),w("/ItalicAngle "+n.metadata.italicAngle),w("/Ascent "+n.metadata.ascender),w(">>"),w("endobj"),n.objectNumber=T();for(var J=0;J<n.metadata.hmtx.widths.length;J++)n.metadata.hmtx.widths[J]=parseInt(n.metadata.hmtx.widths[J]*(1e3/n.metadata.head.unitsPerEm));w("<</Subtype/TrueType/Type/Font/ToUnicode "+H+" 0 R/BaseFont/"+D_(n.fontName)+"/FontDescriptor "+q+" 0 R/Encoding/"+n.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(n.metadata.hmtx.widths)+">>"),w("endobj"),n.isAlreadyPutted=!0}})(l)}]);var s=function(l){var h,n=l.text||"",w=l.x,T=l.y,P=l.options||{},z=l.mutex||{},k=z.pdfEscape,U=z.activeFontKey,Z=z.fonts,H=U,q="",J=0,re="",ce=Z[H].encoding;if(Z[H].encoding!=="Identity-H")return{text:n,x:w,y:T,options:P,mutex:z};for(re=n,H=U,Array.isArray(n)&&(re=n[0]),J=0;J<re.length;J+=1)Z[H].metadata.hasOwnProperty("cmap")&&(h=Z[H].metadata.cmap.unicode.codeMap[re[J].charCodeAt(0)]),h||re[J].charCodeAt(0)<256&&Z[H].metadata.hasOwnProperty("Unicode")?q+=re[J]:q+="";var ye="";return parseInt(H.slice(1))<14||ce==="WinAnsiEncoding"?ye=k(q,H).split("").map(function(he){return he.charCodeAt(0).toString(16)}).join(""):ce==="Identity-H"&&(ye=a(q,Z[H])),z.isHex=!0,{text:ye,x:w,y:T,options:P,mutex:z}};e.events.push(["postProcessText",function(l){var h=l.text||"",n=[],w={text:h,x:l.x,y:l.y,options:l.options,mutex:l.mutex};if(Array.isArray(h)){var T=0;for(T=0;T<h.length;T+=1)Array.isArray(h[T])&&h[T].length===3?n.push([s(Object.assign({},w,{text:h[T][0]})).text,h[T][1],h[T][2]]):n.push(s(Object.assign({},w,{text:h[T]})).text);l.text=n}else l.text=s(Object.assign({},w,{text:h})).text}])}(jn),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(a){return e.call(this),this.internal.vFS[a]!==void 0},t.addFileToVFS=function(a,r){return e.call(this),this.internal.vFS[a]=r,this},t.getFileFromVFS=function(a){return e.call(this),this.internal.vFS[a]!==void 0?this.internal.vFS[a]:null}}(jn.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var s,l,h,n,w,T,P,z=e,k=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],U=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],Z={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},H={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},q=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],J=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),re=!1,ce=0;this.__bidiEngine__={};var ye=function(ie){var ge=ie.charCodeAt(),Me=ge>>8,ze=H[Me];return ze!==void 0?z[256*ze+(255&ge)]:Me===252||Me===253?"AL":J.test(Me)?"L":Me===8?"R":"N"},he=function(ie){for(var ge,Me=0;Me<ie.length;Me++){if((ge=ye(ie.charAt(Me)))==="L")return!1;if(ge==="R")return!0}return!1},_e=function(ie,ge,Me,ze){var Le,Ie,Ze,ke,tt=ge[ze];switch(tt){case"L":case"R":re=!1;break;case"N":case"AN":break;case"EN":re&&(tt="AN");break;case"AL":re=!0,tt="R";break;case"WS":tt="N";break;case"CS":ze<1||ze+1>=ge.length||(Le=Me[ze-1])!=="EN"&&Le!=="AN"||(Ie=ge[ze+1])!=="EN"&&Ie!=="AN"?tt="N":re&&(Ie="AN"),tt=Ie===Le?Ie:"N";break;case"ES":tt=(Le=ze>0?Me[ze-1]:"B")==="EN"&&ze+1<ge.length&&ge[ze+1]==="EN"?"EN":"N";break;case"ET":if(ze>0&&Me[ze-1]==="EN"){tt="EN";break}if(re){tt="N";break}for(Ze=ze+1,ke=ge.length;Ze<ke&&ge[Ze]==="ET";)Ze++;tt=Ze<ke&&ge[Ze]==="EN"?"EN":"N";break;case"NSM":if(h&&!n){for(ke=ge.length,Ze=ze+1;Ze<ke&&ge[Ze]==="NSM";)Ze++;if(Ze<ke){var Ue=ie[ze],He=Ue>=1425&&Ue<=2303||Ue===64286;if(Le=ge[Ze],He&&(Le==="R"||Le==="AL")){tt="R";break}}}tt=ze<1||(Le=ge[ze-1])==="B"?"N":Me[ze-1];break;case"B":re=!1,s=!0,tt=ce;break;case"S":l=!0,tt="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":re=!1;break;case"BN":tt="N"}return tt},me=function(ie,ge,Me){var ze=ie.split("");return Me&&Re(ze,Me,{hiLevel:ce}),ze.reverse(),ge&&ge.reverse(),ze.join("")},Re=function(ie,ge,Me){var ze,Le,Ie,Ze,ke,tt=-1,Ue=ie.length,He=0,Ce=[],Se=ce?U:k,$e=[];for(re=!1,s=!1,l=!1,Le=0;Le<Ue;Le++)$e[Le]=ye(ie[Le]);for(Ie=0;Ie<Ue;Ie++){if(ke=He,Ce[Ie]=_e(ie,$e,Ce,Ie),ze=240&(He=Se[ke][Z[Ce[Ie]]]),He&=15,ge[Ie]=Ze=Se[He][5],ze>0)if(ze===16){for(Le=tt;Le<Ie;Le++)ge[Le]=1;tt=-1}else tt=-1;if(Se[He][6])tt===-1&&(tt=Ie);else if(tt>-1){for(Le=tt;Le<Ie;Le++)ge[Le]=Ze;tt=-1}$e[Ie]==="B"&&(ge[Ie]=0),Me.hiLevel|=Ze}l&&function(ht,ft,ut){for(var Rt=0;Rt<ut;Rt++)if(ht[Rt]==="S"){ft[Rt]=ce;for(var We=Rt-1;We>=0&&ht[We]==="WS";We--)ft[We]=ce}}($e,ge,Ue)},be=function(ie,ge,Me,ze,Le){if(!(Le.hiLevel<ie)){if(ie===1&&ce===1&&!s)return ge.reverse(),void(Me&&Me.reverse());for(var Ie,Ze,ke,tt,Ue=ge.length,He=0;He<Ue;){if(ze[He]>=ie){for(ke=He+1;ke<Ue&&ze[ke]>=ie;)ke++;for(tt=He,Ze=ke-1;tt<Ze;tt++,Ze--)Ie=ge[tt],ge[tt]=ge[Ze],ge[Ze]=Ie,Me&&(Ie=Me[tt],Me[tt]=Me[Ze],Me[Ze]=Ie);He=ke}He++}}},De=function(ie,ge,Me){var ze=ie.split(""),Le={hiLevel:ce};return Me||(Me=[]),Re(ze,Me,Le),function(Ie,Ze,ke){if(ke.hiLevel!==0&&P)for(var tt,Ue=0;Ue<Ie.length;Ue++)Ze[Ue]===1&&(tt=q.indexOf(Ie[Ue]))>=0&&(Ie[Ue]=q[tt+1])}(ze,Me,Le),be(2,ze,ge,Me,Le),be(1,ze,ge,Me,Le),ze.join("")};return this.__bidiEngine__.doBidiReorder=function(ie,ge,Me){if(function(Le,Ie){if(Ie)for(var Ze=0;Ze<Le.length;Ze++)Ie[Ze]=Ze;n===void 0&&(n=he(Le)),T===void 0&&(T=he(Le))}(ie,ge),h||!w||T)if(h&&w&&n^T)ce=n?1:0,ie=me(ie,ge,Me);else if(!h&&w&&T)ce=n?1:0,ie=De(ie,ge,Me),ie=me(ie,ge);else if(!h||n||w||T){if(h&&!w&&n^T)ie=me(ie,ge),n?(ce=0,ie=De(ie,ge,Me)):(ce=1,ie=De(ie,ge,Me),ie=me(ie,ge));else if(h&&n&&!w&&T)ce=1,ie=De(ie,ge,Me),ie=me(ie,ge);else if(!h&&!w&&n^T){var ze=P;n?(ce=1,ie=De(ie,ge,Me),ce=0,P=!1,ie=De(ie,ge,Me),P=ze):(ce=0,ie=De(ie,ge,Me),ie=me(ie,ge),ce=1,P=!1,ie=De(ie,ge,Me),P=ze,ie=me(ie,ge))}}else ce=0,ie=De(ie,ge,Me);else ce=n?1:0,ie=De(ie,ge,Me);return ie},this.__bidiEngine__.setOptions=function(ie){ie&&(h=ie.isInputVisual,w=ie.isOutputVisual,n=ie.isInputRtl,T=ie.isOutputRtl,P=ie.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],a=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var s=r.text;r.x,r.y;var l=r.options||{};r.mutex,l.lang;var h=[];if(l.isInputVisual=typeof l.isInputVisual!="boolean"||l.isInputVisual,a.setOptions(l),Object.prototype.toString.call(s)==="[object Array]"){var n=0;for(h=[],n=0;n<s.length;n+=1)Object.prototype.toString.call(s[n])==="[object Array]"?h.push([a.doBidiReorder(s[n][0]),s[n][1],s[n][2]]):h.push([a.doBidiReorder(s[n])]);r.text=h}else r.text=a.doBidiReorder(s);a.setOptions({isInputVisual:!0})}])}(jn),jn.API.TTFFont=function(){function t(e){var a;if(this.rawData=e,a=this.contents=new Zg(e),this.contents.pos=4,a.readString(4)==="ttcf")throw new Error("TTCF not supported.");a.pos=0,this.parse(),this.subset=new wEe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new oEe(this.contents),this.head=new uEe(this),this.name=new pEe(this),this.cmap=new bQ(this),this.toUnicode={},this.hhea=new cEe(this),this.maxp=new mEe(this),this.hmtx=new yEe(this),this.post=new hEe(this),this.os2=new dEe(this),this.loca=new vEe(this),this.glyf=new gEe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,a,r,s,l;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var h,n,w,T;for(T=[],h=0,n=(w=this.bbox).length;h<n;h++)e=w[h],T.push(Math.round(e*this.scaleFactor));return T}).call(this),this.stemV=0,this.post.exists?(r=255&(s=this.post.italic_angle),(32768&(a=s>>16))!=0&&(a=-(1+(65535^a))),this.italicAngle=+(a+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(l=this.familyClass)===1||l===2||l===3||l===4||l===5||l===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var a;return((a=this.cmap.unicode)!=null?a.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var a;return a=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*a},t.prototype.widthOfString=function(e,a,r){var s,l,h,n;for(h=0,l=0,n=(e=""+e).length;0<=n?l<n:l>n;l=0<=n?++l:--l)s=e.charCodeAt(l),h+=this.widthOfGlyph(this.characterToGlyph(s))+r*(1e3/a)||0;return h*(a/1e3)},t.prototype.lineHeight=function(e,a){var r;return a==null&&(a=!1),r=a?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var jp,Zg=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var a,r;for(r=[],a=0;0<=e?a<e:a>e;a=0<=e?++a:--a)r[a]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var a,r,s;for(s=[],a=0,r=e.length;0<=r?a<r:a>r;a=0<=r?++a:--a)s.push(this.writeByte(e.charCodeAt(a)));return s},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,a,r,s,l,h,n,w;return e=this.readByte(),a=this.readByte(),r=this.readByte(),s=this.readByte(),l=this.readByte(),h=this.readByte(),n=this.readByte(),w=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^a)+1099511627776*(255^r)+4294967296*(255^s)+16777216*(255^l)+65536*(255^h)+256*(255^n)+(255^w)+1):72057594037927940*e+281474976710656*a+1099511627776*r+4294967296*s+16777216*l+65536*h+256*n+w},t.prototype.writeLongLong=function(e){var a,r;return a=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var a,r;for(a=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)a.push(this.readByte());return a},t.prototype.write=function(e){var a,r,s,l;for(l=[],r=0,s=e.length;r<s;r++)a=e[r],l.push(this.writeByte(a));return l},t}(),oEe=function(){var t;function e(a){var r,s,l;for(this.scalarType=a.readInt(),this.tableCount=a.readShort(),this.searchRange=a.readShort(),this.entrySelector=a.readShort(),this.rangeShift=a.readShort(),this.tables={},s=0,l=this.tableCount;0<=l?s<l:s>l;s=0<=l?++s:--s)r={tag:a.readString(4),checksum:a.readInt(),offset:a.readInt(),length:a.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(a){var r,s,l,h,n,w,T,P,z,k,U,Z,H;for(H in U=Object.keys(a).length,w=Math.log(2),z=16*Math.floor(Math.log(U)/w),h=Math.floor(z/w),P=16*U-z,(s=new Zg).writeInt(this.scalarType),s.writeShort(U),s.writeShort(z),s.writeShort(h),s.writeShort(P),l=16*U,T=s.pos+l,n=null,Z=[],a)for(k=a[H],s.writeString(H),s.writeInt(t(k)),s.writeInt(T),s.writeInt(k.length),Z=Z.concat(k),H==="head"&&(n=T),T+=k.length;T%4;)Z.push(0),T++;return s.write(Z),r=2981146554-t(s.data),s.pos=n+8,s.writeUInt32(r),s.data},t=function(a){var r,s,l,h;for(a=xQ.call(a);a.length%4;)a.push(0);for(l=new Zg(a),s=0,r=0,h=a.length;r<h;r=r+=4)s+=l.readUInt32();return 4294967295&s},e}(),lEe={}.hasOwnProperty,Gm=function(t,e){for(var a in e)lEe.call(e,a)&&(t[a]=e[a]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};jp=function(){function t(e){var a;this.file=e,a=this.file.directory.tables[this.tag],this.exists=!!a,a&&(this.offset=a.offset,this.length=a.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var uEe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Gm(e,jp),e.prototype.tag="head",e.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.revision=a.readInt(),this.checkSumAdjustment=a.readInt(),this.magicNumber=a.readInt(),this.flags=a.readShort(),this.unitsPerEm=a.readShort(),this.created=a.readLongLong(),this.modified=a.readLongLong(),this.xMin=a.readShort(),this.yMin=a.readShort(),this.xMax=a.readShort(),this.yMax=a.readShort(),this.macStyle=a.readShort(),this.lowestRecPPEM=a.readShort(),this.fontDirectionHint=a.readShort(),this.indexToLocFormat=a.readShort(),this.glyphDataFormat=a.readShort()},e.prototype.encode=function(a){var r;return(r=new Zg).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(a),r.writeShort(this.glyphDataFormat),r.data},e}(),oq=function(){function t(e,a){var r,s,l,h,n,w,T,P,z,k,U,Z,H,q,J,re,ce;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=a+e.readInt(),z=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(w=0;w<256;++w)this.codeMap[w]=e.readByte();break;case 4:for(U=e.readUInt16(),k=U/2,e.pos+=6,l=function(){var ye,he;for(he=[],w=ye=0;0<=k?ye<k:ye>k;w=0<=k?++ye:--ye)he.push(e.readUInt16());return he}(),e.pos+=2,H=function(){var ye,he;for(he=[],w=ye=0;0<=k?ye<k:ye>k;w=0<=k?++ye:--ye)he.push(e.readUInt16());return he}(),T=function(){var ye,he;for(he=[],w=ye=0;0<=k?ye<k:ye>k;w=0<=k?++ye:--ye)he.push(e.readUInt16());return he}(),P=function(){var ye,he;for(he=[],w=ye=0;0<=k?ye<k:ye>k;w=0<=k?++ye:--ye)he.push(e.readUInt16());return he}(),s=(this.length-e.pos+this.offset)/2,n=function(){var ye,he;for(he=[],w=ye=0;0<=s?ye<s:ye>s;w=0<=s?++ye:--ye)he.push(e.readUInt16());return he}(),w=J=0,ce=l.length;J<ce;w=++J)for(q=l[w],r=re=Z=H[w];Z<=q?re<=q:re>=q;r=Z<=q?++re:--re)P[w]===0?h=r+T[w]:(h=n[P[w]/2+(r-Z)-(k-w)]||0)!==0&&(h+=T[w]),this.codeMap[r]=65535&h}e.pos=z}return t.encode=function(e,a){var r,s,l,h,n,w,T,P,z,k,U,Z,H,q,J,re,ce,ye,he,_e,me,Re,be,De,ie,ge,Me,ze,Le,Ie,Ze,ke,tt,Ue,He,Ce,Se,$e,ht,ft,ut,Rt,We,Ae,qt,Gt;switch(ze=new Zg,h=Object.keys(e).sort(function(Aa,It){return Aa-It}),a){case"macroman":for(H=0,q=function(){var Aa=[];for(Z=0;Z<256;++Z)Aa.push(0);return Aa}(),re={0:0},l={},Le=0,tt=h.length;Le<tt;Le++)re[We=e[s=h[Le]]]==null&&(re[We]=++H),l[s]={old:e[s],new:re[e[s]]},q[s]=re[e[s]];return ze.writeUInt16(1),ze.writeUInt16(0),ze.writeUInt32(12),ze.writeUInt16(0),ze.writeUInt16(262),ze.writeUInt16(0),ze.write(q),{charMap:l,subtable:ze.data,maxGlyphID:H+1};case"unicode":for(ge=[],z=[],ce=0,re={},r={},J=T=null,Ie=0,Ue=h.length;Ie<Ue;Ie++)re[he=e[s=h[Ie]]]==null&&(re[he]=++ce),r[s]={old:he,new:re[he]},n=re[he]-s,J!=null&&n===T||(J&&z.push(J),ge.push(s),T=n),J=s;for(J&&z.push(J),z.push(65535),ge.push(65535),De=2*(be=ge.length),Re=2*Math.pow(Math.log(be)/Math.LN2,2),k=Math.log(Re/2)/Math.LN2,me=2*be-Re,w=[],_e=[],U=[],Z=Ze=0,He=ge.length;Ze<He;Z=++Ze){if(ie=ge[Z],P=z[Z],ie===65535){w.push(0),_e.push(0);break}if(ie-(Me=r[ie].new)>=32768)for(w.push(0),_e.push(2*(U.length+be-Z)),s=ke=ie;ie<=P?ke<=P:ke>=P;s=ie<=P?++ke:--ke)U.push(r[s].new);else w.push(Me-ie),_e.push(0)}for(ze.writeUInt16(3),ze.writeUInt16(1),ze.writeUInt32(12),ze.writeUInt16(4),ze.writeUInt16(16+8*be+2*U.length),ze.writeUInt16(0),ze.writeUInt16(De),ze.writeUInt16(Re),ze.writeUInt16(k),ze.writeUInt16(me),ut=0,Ce=z.length;ut<Ce;ut++)s=z[ut],ze.writeUInt16(s);for(ze.writeUInt16(0),Rt=0,Se=ge.length;Rt<Se;Rt++)s=ge[Rt],ze.writeUInt16(s);for(Ae=0,$e=w.length;Ae<$e;Ae++)n=w[Ae],ze.writeUInt16(n);for(qt=0,ht=_e.length;qt<ht;qt++)ye=_e[qt],ze.writeUInt16(ye);for(Gt=0,ft=U.length;Gt<ft;Gt++)H=U[Gt],ze.writeUInt16(H);return{charMap:r,subtable:ze.data,maxGlyphID:ce+1}}},t}(),bQ=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Gm(e,jp),e.prototype.tag="cmap",e.prototype.parse=function(a){var r,s,l;for(a.pos=this.offset,this.version=a.readUInt16(),l=a.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=l?s<l:s>l;s=0<=l?++s:--s)r=new oq(a,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(a,r){var s,l;return r==null&&(r="macroman"),s=oq.encode(a,r),(l=new Zg).writeUInt16(0),l.writeUInt16(1),s.table=l.data.concat(s.subtable),s},e}(),cEe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Gm(e,jp),e.prototype.tag="hhea",e.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.ascender=a.readShort(),this.decender=a.readShort(),this.lineGap=a.readShort(),this.advanceWidthMax=a.readShort(),this.minLeftSideBearing=a.readShort(),this.minRightSideBearing=a.readShort(),this.xMaxExtent=a.readShort(),this.caretSlopeRise=a.readShort(),this.caretSlopeRun=a.readShort(),this.caretOffset=a.readShort(),a.pos+=8,this.metricDataFormat=a.readShort(),this.numberOfMetrics=a.readUInt16()},e}(),dEe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Gm(e,jp),e.prototype.tag="OS/2",e.prototype.parse=function(a){if(a.pos=this.offset,this.version=a.readUInt16(),this.averageCharWidth=a.readShort(),this.weightClass=a.readUInt16(),this.widthClass=a.readUInt16(),this.type=a.readShort(),this.ySubscriptXSize=a.readShort(),this.ySubscriptYSize=a.readShort(),this.ySubscriptXOffset=a.readShort(),this.ySubscriptYOffset=a.readShort(),this.ySuperscriptXSize=a.readShort(),this.ySuperscriptYSize=a.readShort(),this.ySuperscriptXOffset=a.readShort(),this.ySuperscriptYOffset=a.readShort(),this.yStrikeoutSize=a.readShort(),this.yStrikeoutPosition=a.readShort(),this.familyClass=a.readShort(),this.panose=function(){var r,s;for(s=[],r=0;r<10;++r)s.push(a.readByte());return s}(),this.charRange=function(){var r,s;for(s=[],r=0;r<4;++r)s.push(a.readInt());return s}(),this.vendorID=a.readString(4),this.selection=a.readShort(),this.firstCharIndex=a.readShort(),this.lastCharIndex=a.readShort(),this.version>0&&(this.ascent=a.readShort(),this.descent=a.readShort(),this.lineGap=a.readShort(),this.winAscent=a.readShort(),this.winDescent=a.readShort(),this.codePageRange=function(){var r,s;for(s=[],r=0;r<2;r=++r)s.push(a.readInt());return s}(),this.version>1))return this.xHeight=a.readShort(),this.capHeight=a.readShort(),this.defaultChar=a.readShort(),this.breakChar=a.readShort(),this.maxContext=a.readShort()},e}(),hEe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Gm(e,jp),e.prototype.tag="post",e.prototype.parse=function(a){var r,s,l;switch(a.pos=this.offset,this.format=a.readInt(),this.italicAngle=a.readInt(),this.underlinePosition=a.readShort(),this.underlineThickness=a.readShort(),this.isFixedPitch=a.readInt(),this.minMemType42=a.readInt(),this.maxMemType42=a.readInt(),this.minMemType1=a.readInt(),this.maxMemType1=a.readInt(),this.format){case 65536:break;case 131072:var h;for(s=a.readUInt16(),this.glyphNameIndex=[],h=0;0<=s?h<s:h>s;h=0<=s?++h:--h)this.glyphNameIndex.push(a.readUInt16());for(this.names=[],l=[];a.pos<this.offset+this.length;)r=a.readByte(),l.push(this.names.push(a.readString(r)));return l;case 151552:return s=a.readUInt16(),this.offsets=a.read(s);case 196608:break;case 262144:return this.map=(function(){var n,w,T;for(T=[],h=n=0,w=this.file.maxp.numGlyphs;0<=w?n<w:n>w;h=0<=w?++n:--n)T.push(a.readUInt32());return T}).call(this)}},e}(),fEe=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},pEe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Gm(e,jp),e.prototype.tag="name",e.prototype.parse=function(a){var r,s,l,h,n,w,T,P,z,k,U;for(a.pos=this.offset,a.readShort(),r=a.readShort(),w=a.readShort(),s=[],h=0;0<=r?h<r:h>r;h=0<=r?++h:--h)s.push({platformID:a.readShort(),encodingID:a.readShort(),languageID:a.readShort(),nameID:a.readShort(),length:a.readShort(),offset:this.offset+w+a.readShort()});for(T={},h=z=0,k=s.length;z<k;h=++z)l=s[h],a.pos=l.offset,P=a.readString(l.length),n=new fEe(P,l),T[U=l.nameID]==null&&(T[U]=[]),T[l.nameID].push(n);this.strings=T,this.copyright=T[0],this.fontFamily=T[1],this.fontSubfamily=T[2],this.uniqueSubfamily=T[3],this.fontName=T[4],this.version=T[5];try{this.postscriptName=T[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=T[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=T[7],this.manufacturer=T[8],this.designer=T[9],this.description=T[10],this.vendorUrl=T[11],this.designerUrl=T[12],this.license=T[13],this.licenseUrl=T[14],this.preferredFamily=T[15],this.preferredSubfamily=T[17],this.compatibleFull=T[18],this.sampleText=T[19]},e}(),mEe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Gm(e,jp),e.prototype.tag="maxp",e.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.numGlyphs=a.readUInt16(),this.maxPoints=a.readUInt16(),this.maxContours=a.readUInt16(),this.maxCompositePoints=a.readUInt16(),this.maxComponentContours=a.readUInt16(),this.maxZones=a.readUInt16(),this.maxTwilightPoints=a.readUInt16(),this.maxStorage=a.readUInt16(),this.maxFunctionDefs=a.readUInt16(),this.maxInstructionDefs=a.readUInt16(),this.maxStackElements=a.readUInt16(),this.maxSizeOfInstructions=a.readUInt16(),this.maxComponentElements=a.readUInt16(),this.maxComponentDepth=a.readUInt16()},e}(),yEe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Gm(e,jp),e.prototype.tag="hmtx",e.prototype.parse=function(a){var r,s,l,h,n,w,T;for(a.pos=this.offset,this.metrics=[],r=0,w=this.file.hhea.numberOfMetrics;0<=w?r<w:r>w;r=0<=w?++r:--r)this.metrics.push({advance:a.readUInt16(),lsb:a.readInt16()});for(l=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var P,z;for(z=[],r=P=0;0<=l?P<l:P>l;r=0<=l?++P:--P)z.push(a.readInt16());return z}(),this.widths=(function(){var P,z,k,U;for(U=[],P=0,z=(k=this.metrics).length;P<z;P++)h=k[P],U.push(h.advance);return U}).call(this),s=this.widths[this.widths.length-1],T=[],r=n=0;0<=l?n<l:n>l;r=0<=l?++n:--n)T.push(this.widths.push(s));return T},e.prototype.forGlyph=function(a){return a in this.metrics?this.metrics[a]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[a-this.metrics.length]}},e}(),xQ=[].slice,gEe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Gm(e,jp),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(a){var r,s,l,h,n,w,T,P,z,k;return a in this.cache?this.cache[a]:(h=this.file.loca,r=this.file.contents,s=h.indexOf(a),(l=h.lengthOf(a))===0?this.cache[a]=null:(r.pos=this.offset+s,n=(w=new Zg(r.read(l))).readShort(),P=w.readShort(),k=w.readShort(),T=w.readShort(),z=w.readShort(),this.cache[a]=n===-1?new _Ee(w,P,k,T,z):new AEe(w,n,P,k,T,z),this.cache[a]))},e.prototype.encode=function(a,r,s){var l,h,n,w,T;for(n=[],h=[],w=0,T=r.length;w<T;w++)l=a[r[w]],h.push(n.length),l&&(n=n.concat(l.encode(s)));return h.push(n.length),{table:n,offsets:h}},e}(),AEe=function(){function t(e,a,r,s,l,h){this.raw=e,this.numberOfContours=a,this.xMin=r,this.yMin=s,this.xMax=l,this.yMax=h,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),_Ee=function(){function t(e,a,r,s,l){var h,n;for(this.raw=e,this.xMin=a,this.yMin=r,this.xMax=s,this.yMax=l,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],h=this.raw;n=h.readShort(),this.glyphOffsets.push(h.pos),this.glyphIDs.push(h.readUInt16()),32&n;)h.pos+=1&n?4:2,128&n?h.pos+=8:64&n?h.pos+=4:8&n&&(h.pos+=2)}return t.prototype.encode=function(){var e,a,r;for(a=new Zg(xQ.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)a.pos=this.glyphOffsets[e];return a.data},t}(),vEe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Gm(e,jp),e.prototype.tag="loca",e.prototype.parse=function(a){var r,s;return a.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var l,h;for(h=[],s=0,l=this.length;s<l;s+=2)h.push(2*a.readUInt16());return h}).call(this):(function(){var l,h;for(h=[],s=0,l=this.length;s<l;s+=4)h.push(a.readUInt32());return h}).call(this)},e.prototype.indexOf=function(a){return this.offsets[a]},e.prototype.lengthOf=function(a){return this.offsets[a+1]-this.offsets[a]},e.prototype.encode=function(a,r){for(var s=new Uint32Array(this.offsets.length),l=0,h=0,n=0;n<s.length;++n)if(s[n]=l,h<r.length&&r[h]==n){++h,s[n]=l;var w=this.offsets[n],T=this.offsets[n+1]-w;T>0&&(l+=T)}for(var P=new Array(4*s.length),z=0;z<s.length;++z)P[4*z+3]=255&s[z],P[4*z+2]=(65280&s[z])>>8,P[4*z+1]=(16711680&s[z])>>16,P[4*z]=(4278190080&s[z])>>24;return P},e}(),wEe=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,a,r,s,l;for(a in s=this.font.cmap.tables[0].codeMap,e={},l=this.subset)r=l[a],e[a]=s[r];return e},t.prototype.glyphsFor=function(e){var a,r,s,l,h,n,w;for(s={},h=0,n=e.length;h<n;h++)s[l=e[h]]=this.font.glyf.glyphFor(l);for(l in a=[],s)(r=s[l])!=null&&r.compound&&a.push.apply(a,r.glyphIDs);if(a.length>0)for(l in w=this.glyphsFor(a))r=w[l],s[l]=r;return s},t.prototype.encode=function(e,a){var r,s,l,h,n,w,T,P,z,k,U,Z,H,q,J;for(s in r=bQ.encode(this.generateCmap(),"unicode"),h=this.glyphsFor(e),U={0:0},J=r.charMap)U[(w=J[s]).old]=w.new;for(Z in k=r.maxGlyphID,h)Z in U||(U[Z]=k++);return P=function(re){var ce,ye;for(ce in ye={},re)ye[re[ce]]=ce;return ye}(U),z=Object.keys(P).sort(function(re,ce){return re-ce}),H=function(){var re,ce,ye;for(ye=[],re=0,ce=z.length;re<ce;re++)n=z[re],ye.push(P[n]);return ye}(),l=this.font.glyf.encode(h,H,U),T=this.font.loca.encode(l.offsets,H),q={cmap:this.font.cmap.raw(),glyf:l.table,loca:T,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(a)},this.font.os2.exists&&(q["OS/2"]=this.font.os2.raw()),this.font.directory.encode(q)},t}();jn.API.PDFObject=function(){var t;function e(){}return t=function(a,r){return(Array(r+1).join("0")+a).slice(-r)},e.convert=function(a){var r,s,l,h;if(Array.isArray(a))return"["+function(){var n,w,T;for(T=[],n=0,w=a.length;n<w;n++)r=a[n],T.push(e.convert(r));return T}().join(" ")+"]";if(typeof a=="string")return"/"+a;if(a!=null&&a.isString)return"("+a+")";if(a instanceof Date)return"(D:"+t(a.getUTCFullYear(),4)+t(a.getUTCMonth(),2)+t(a.getUTCDate(),2)+t(a.getUTCHours(),2)+t(a.getUTCMinutes(),2)+t(a.getUTCSeconds(),2)+"Z)";if({}.toString.call(a)==="[object Object]"){for(s in l=["<<"],a)h=a[s],l.push("/"+s+" "+e.convert(h));return l.push(">>"),l.join(`
`)}return""+a},e}();const REe=()=>{const[t,e]=nt.useState("available"),[a,r]=nt.useState("bike"),[s,l]=nt.useState(null),[h,n]=nt.useState([]),[w,T]=nt.useState(null),[P,z]=nt.useState(""),[k,U]=nt.useState(!1),[Z,H]=nt.useState(!1),[q,J]=nt.useState(null),[re,ce]=nt.useState(!1),[ye,he]=nt.useState(""),[_e,me]=nt.useState(""),[Re,be]=nt.useState("all"),[De,ie]=nt.useState(1),[ge]=nt.useState(10);nt.useEffect(()=>{Me()},[]);const Me=async()=>{const Ae=(await Xi(Zn(zr,"bikes"))).docs.map(qt=>({id:qt.id,...qt.data()}));n(Ae)},ze=We=>{l(We.target.files[0])},Le=()=>{const We=h.filter(Aa=>Aa.bikeCategory==="Regular Bicycle").length+1,Ae=h.filter(Aa=>Aa.bikeCategory==="Electric Bicycle").length+1;return`${_e==="Regular Bicycle"?"BK":"EBK"}-${String(_e==="Regular Bicycle"?We:Ae).padStart(3,"0")}`},Ie=We=>new Promise(Ae=>{const qt=new FileReader;qt.readAsDataURL(We),qt.onload=Gt=>{const Aa=new Image;Aa.src=Gt.target.result,Aa.onload=()=>{const It=document.createElement("canvas"),ta=It.getContext("2d");let vt=Aa.width,or=Aa.height;const Na=800;vt>or&&vt>Na?(or=or*Na/vt,vt=Na):or>Na&&(vt=vt*Na/or,or=Na),It.width=vt,It.height=or,ta.drawImage(Aa,0,0,vt,or),It.toBlob(za=>{Ae(za)},"image/jpeg",.6)}}}),Ze=async()=>{if(!s)return null;try{const We=await Ie(s),Ae=`bikes/${Date.now()}_${s.name}`,qt=aQ(),Gt=tQ(qt,Ae);return await QJ(Gt,We),await eQ(Gt)}catch(We){return console.error("Error uploading image:",We),null}},ke=async We=>{We.preventDefault();const Ae=await Ze();if(!Ae){alert("Image upload failed. Try again.");return}const Gt={bikeId:Le(),bikeName:ye,bikeCategory:_e,bikeType:a,imageUrl:Ae,bikeStatus:"Available",isAvailable:!0,createdAt:new Date};try{await hv(Zn(zr,"bikes"),Gt),alert("Bike added successfully!"),n([...h,Gt]),U(!1),He()}catch(Aa){console.error("Error adding bike:",Aa)}},tt=async We=>{We.preventDefault();const Ae=await Ze(),qt={bikeName:ye,bikeCategory:_e,bikeType:a,bikeStatus:t,imageUrl:Ae||w.imageUrl};try{await hd(Is(zr,"bikes",w.id),qt),alert("Bike updated successfully!"),T(null),H(!1),Me(),He()}catch(Gt){console.error("Error updating bike:",Gt)}},Ue=(We,Ae)=>{Ae.stopPropagation(),T(We),he(We.bikeName),me(We.bikeCategory),r(We.bikeType),e(We.bikeStatus),H(!0)},He=()=>{he(""),me(""),r(""),l(null),e("Available"),T(null)},Ce=async()=>{const We=new jn,Ae=40,qt=5,Gt=3;let Aa=10,It=10;for(let ta=0;ta<h.length;ta++){const vt=h[ta];try{const or=await RPe.toDataURL(vt.id,{type:"image/jpeg"});or?(We.text(`Bike ID: ${vt.bikeId}`,Aa,It+Ae+5),We.addImage(or,"JPEG",Aa,It,Ae,Ae),Aa+=Ae+qt,(ta+1)%Gt===0&&(Aa=10,It+=Ae+20),It+Ae+20>We.internal.pageSize.height&&(We.addPage(),Aa=10,It=10)):console.error("QR code generation failed for bike:",vt.bikeId)}catch(or){console.error("Error generating QR code: ",or)}}We.save("bike_qr_codes.pdf")},Se=We=>{z(We.target.value.toUpperCase()),ie(1)},$e=We=>{be(We.target.value),ie(1)},ht=De*ge,ft=ht-ge,ut=Math.ceil(h.length/ge),Rt=()=>({regularBikes:h.filter(We=>We.bikeCategory==="Regular Bicycle").length,electricBikes:h.filter(We=>We.bikeCategory==="Electric Bicycle").length,available:h.filter(We=>We.bikeStatus==="Available").length,inUse:h.filter(We=>We.bikeStatus==="In Use").length,toRepair:h.filter(We=>We.bikeStatus==="To Repair").length,toReplace:h.filter(We=>We.bikeStatus==="To Replace").length,retired:h.filter(We=>We.bikeStatus==="Retired").length});return K.jsxs(M0,{children:[K.jsx(Yg,{title:"Bike Management"}),K.jsxs("div",{className:"bike-management-container",children:[K.jsx("div",{className:"bike-management-header",children:K.jsx("h2",{children:"Bike Management"})}),K.jsxs("div",{className:"search-container",children:[K.jsx("input",{type:"text",placeholder:" Search by Bike ID (e.g., BK-001)...",className:"search-box",value:P,onChange:Se}),K.jsxs("button",{className:"add-bike-btn",onClick:()=>U(!0),children:[K.jsx(k3,{})," Add Bike"]}),K.jsx("button",{className:"generate-pdf-btn",onClick:Ce,children:"Generate QR (PDF)"}),K.jsxs("div",{className:"sort-container",children:[K.jsx("label",{className:"sort-label",children:"Sort By:"}),K.jsxs("select",{value:Re,onChange:$e,className:"sort-dropdown",children:[K.jsx("option",{value:"all",children:"All Bikes"}),K.jsx("option",{value:"Regular Bicycle",children:"Regular Bikes"}),K.jsx("option",{value:"Electric Bicycle",children:"Electric Bikes"}),K.jsxs("optgroup",{label:"Status",children:[K.jsx("option",{value:"Available",children:"Available"}),K.jsx("option",{value:"In Use",children:"In Use"}),K.jsx("option",{value:"To Repair",children:"To Repair"}),K.jsx("option",{value:"To Replace",children:"To Replace"}),K.jsx("option",{value:"Retired",children:"Retired"})]})]})]})]}),k&&K.jsx("div",{className:"modal-overlay",children:K.jsxs("div",{className:"modal-content",children:[K.jsx("h2",{children:"Adding New Bike"}),K.jsxs("form",{className:"bike-form",onSubmit:ke,children:[K.jsx("div",{className:"upload-box",children:K.jsxs("label",{className:"upload-label",children:[K.jsx(nk,{})," Upload Bike Image",K.jsx("input",{type:"file",accept:"image/*",onChange:ze,required:!0})]})}),K.jsx("label",{children:"Bike Name:"}),K.jsx("input",{type:"text",value:ye,onChange:We=>he(We.target.value),required:!0}),K.jsx("label",{children:"Category of Bike:"}),K.jsxs("select",{value:_e,onChange:We=>me(We.target.value),required:!0,children:[K.jsx("option",{value:"",children:"Select Category"}),K.jsx("option",{value:"Regular Bicycle",children:"Regular Bicycle"}),K.jsx("option",{value:"Electric Bicycle",children:"Electric Bicycle"})]}),K.jsx("label",{children:"Bike Type:"}),K.jsxs("select",{value:a,onChange:We=>r(We.target.value),required:!0,children:[K.jsx("option",{value:"",children:"Select Bike Type"}),K.jsx("option",{value:"Road Bike",children:"Road Bike"}),K.jsx("option",{value:"Mountain Bike",children:"Mountain Bike"}),K.jsx("option",{value:"City Bike",children:"City Bike"}),K.jsx("option",{value:"Fat Bike",children:"Fat Bike"}),K.jsx("option",{value:"BMX",children:"BMX"}),K.jsx("option",{value:"Electric Bike",children:"Electric Bike"})]}),K.jsxs("div",{className:"modal-buttons",children:[K.jsx("button",{type:"submit",className:"save-btn",children:"Save"}),K.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>U(!1),children:"Cancel"})]})]})]})}),K.jsxs("div",{className:"bike-stats-overlay",children:[K.jsxs("div",{className:"stats-row",children:[K.jsxs("div",{className:"stat-card regular",children:[K.jsx("h3",{children:"Regular Bikes"}),K.jsx("p",{children:Rt().regularBikes})]}),K.jsxs("div",{className:"stat-card electric",children:[K.jsx("h3",{children:"Electric Bikes"}),K.jsx("p",{children:Rt().electricBikes})]}),K.jsxs("div",{className:"stat-card available",children:[K.jsx("h3",{children:"Available"}),K.jsx("p",{children:Rt().available})]}),K.jsxs("div",{className:"stat-card in-use",children:[K.jsx("h3",{children:"In Use"}),K.jsx("p",{children:Rt().inUse})]})]}),K.jsxs("div",{className:"stats-row",children:[K.jsxs("div",{className:"stat-card repair",children:[K.jsx("h3",{children:"To Repair"}),K.jsx("p",{children:Rt().toRepair})]}),K.jsxs("div",{className:"stat-card replace",children:[K.jsx("h3",{children:"To Replace"}),K.jsx("p",{children:Rt().toReplace})]}),K.jsxs("div",{className:"stat-card retired",children:[K.jsx("h3",{children:"Retired"}),K.jsx("p",{children:Rt().retired})]}),K.jsxs("div",{className:"stat-card total",children:[K.jsx("h3",{children:"Total Bikes"}),K.jsx("p",{children:h.length})]})]})]}),K.jsx("div",{className:"bike-list",children:K.jsxs("table",{children:[K.jsx("thead",{children:K.jsxs("tr",{children:[K.jsx("th",{children:"Bike Name"}),K.jsx("th",{children:"Bike ID"}),K.jsx("th",{children:"Category"}),K.jsx("th",{children:"Type"}),K.jsx("th",{children:"Image"}),K.jsx("th",{children:"Status"}),K.jsx("th",{children:"Action"})]})}),K.jsx("tbody",{children:h.filter(We=>We.bikeId.toUpperCase().includes(P)&&(Re==="all"||Re==="Regular Bicycle"&&We.bikeCategory==="Regular Bicycle"||Re==="Electric Bicycle"&&We.bikeCategory==="Electric Bicycle"||We.bikeStatus===Re)).slice(ft,ht).map(We=>K.jsxs("tr",{onClick:()=>{J(We),ce(!0)},className:"clickable-row",children:[K.jsx("td",{children:We.bikeName||"No Name"}),K.jsx("td",{children:K.jsx("strong",{children:We.bikeId})}),K.jsx("td",{children:We.bikeCategory}),K.jsx("td",{children:We.bikeType}),K.jsx("td",{children:K.jsx("img",{src:We.imageUrl,alt:We.bikeName,className:"table-bike-image",onClick:Ae=>{Ae.stopPropagation(),J(We),ce(!0)}})}),K.jsx("td",{children:K.jsx("div",{className:`status-container status-${We.bikeStatus.replace(/\s+/g,"-")}`,children:We.bikeStatus})}),K.jsx("td",{children:K.jsx("button",{className:"edit-btn",onClick:Ae=>Ue(We,Ae),children:K.jsx(Qw,{})})})]},We.id))})]})}),re&&q&&K.jsx("div",{className:"modal-overlay",children:K.jsxs("div",{className:"modal-content",children:[K.jsx("h2",{children:"Bike Details"}),K.jsx("div",{className:"bike-image-container",children:K.jsx("img",{src:q.imageUrl,alt:"Bike",className:"bike-preview"})}),K.jsxs("p",{children:[K.jsx("strong",{children:"Bike Name:"})," ",q.bikeName]}),K.jsxs("p",{children:[K.jsx("strong",{children:"Bike ID:"})," ",q.bikeId]}),K.jsxs("p",{children:[K.jsx("strong",{children:"Category:"})," ",q.bikeCategory]}),K.jsxs("p",{children:[K.jsx("strong",{children:"Bike Type:"})," ",q.bikeType]}),K.jsxs("p",{children:[K.jsx("strong",{children:"Status:"})," ",q.bikeStatus]}),K.jsx("div",{className:"modal-buttons",children:K.jsx("button",{className:"cancel-btn",onClick:()=>ce(!1),children:"Close"})})]})}),Z&&w&&K.jsx("div",{className:"modal-overlay",children:K.jsxs("div",{className:"modal-content",children:[K.jsx("h2",{children:"Edit Bike"}),K.jsxs("form",{className:"bike-form",onSubmit:tt,children:[K.jsxs("div",{className:"upload-box",children:[K.jsxs("label",{className:"upload-label",children:[K.jsx(nk,{})," Upload New Image",K.jsx("input",{type:"file",accept:"image/*",onChange:ze})]}),w.imageUrl&&K.jsx("img",{src:w.imageUrl,alt:"Current Bike",className:"bike-preview"})]}),K.jsx("label",{children:"Bike Name:"}),K.jsx("input",{type:"text",value:ye,onChange:We=>he(We.target.value),required:!0}),K.jsx("label",{children:"Category of Bike:"}),K.jsxs("select",{value:_e,onChange:We=>me(We.target.value),required:!0,children:[K.jsx("option",{value:"",children:"Select Category"}),K.jsx("option",{value:"Regular Bicycle",children:"Regular Bicycle"}),K.jsx("option",{value:"Electric Bicycle",children:"Electric Bicycle"})]}),K.jsx("label",{children:"Bike Type:"}),K.jsxs("select",{value:a,onChange:We=>r(We.target.value),required:!0,children:[K.jsx("option",{value:"",children:"Select Bike Type"}),K.jsx("option",{value:"Road Bike",children:"Road Bike"}),K.jsx("option",{value:"Mountain Bike",children:"Mountain Bike"}),K.jsx("option",{value:"City Bike",children:"City Bike"}),K.jsx("option",{value:"Fat Bike",children:"Fat Bike"}),K.jsx("option",{value:"BMX",children:"BMX"}),K.jsx("option",{value:"Electric Bike",children:"Electric Bike"})]}),K.jsx("label",{children:"Status:"}),K.jsxs("select",{value:t,onChange:We=>e(We.target.value),required:!0,children:[K.jsx("option",{value:"Available",children:"Available"}),K.jsx("option",{value:"To Repair",children:"To Repair"}),K.jsx("option",{value:"To Replace",children:"To Replace"}),K.jsx("option",{value:"Retired",children:"Retired"})]}),K.jsxs("div",{className:"modal-buttons",children:[K.jsx("button",{type:"submit",className:"save-btn",children:"Update"}),K.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>{H(!1),He()},children:"Cancel"})]})]})]})})]}),K.jsxs("div",{className:"pagination-controls",children:[K.jsx("button",{className:"pagination-button",onClick:()=>ie(De-1),disabled:De===1,children:"Previous"}),K.jsxs("span",{className:"pagination-info",children:["Page ",De," of ",ut]}),K.jsx("button",{className:"pagination-button",onClick:()=>ie(De+1),disabled:De===ut,children:"Next"})]})]})};function PQ(t,e){return function(){return t.apply(e,arguments)}}const{toString:TEe}=Object.prototype,{getPrototypeOf:J4}=Object,gP=(t=>e=>{const a=TEe.call(e);return t[a]||(t[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),Zp=t=>(t=t.toLowerCase(),e=>gP(e)===t),AP=t=>e=>typeof e===t,{isArray:c1}=Array,hT=AP("undefined");function SEe(t){return t!==null&&!hT(t)&&t.constructor!==null&&!hT(t.constructor)&&ff(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const EQ=Zp("ArrayBuffer");function CEe(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&EQ(t.buffer),e}const bEe=AP("string"),ff=AP("function"),NQ=AP("number"),_P=t=>t!==null&&typeof t=="object",xEe=t=>t===!0||t===!1,nb=t=>{if(gP(t)!=="object")return!1;const e=J4(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},PEe=Zp("Date"),EEe=Zp("File"),NEe=Zp("Blob"),VEe=Zp("FileList"),zEe=t=>_P(t)&&ff(t.pipe),OEe=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||ff(t.append)&&((e=gP(t))==="formdata"||e==="object"&&ff(t.toString)&&t.toString()==="[object FormData]"))},DEe=Zp("URLSearchParams"),[MEe,IEe,LEe,FEe]=["ReadableStream","Request","Response","Headers"].map(Zp),UEe=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function $T(t,e,{allOwnKeys:a=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),c1(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const l=a?Object.getOwnPropertyNames(t):Object.keys(t),h=l.length;let n;for(r=0;r<h;r++)n=l[r],e.call(null,t[n],n,t)}}function VQ(t,e){e=e.toLowerCase();const a=Object.keys(t);let r=a.length,s;for(;r-- >0;)if(s=a[r],e===s.toLowerCase())return s;return null}const n0=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,zQ=t=>!hT(t)&&t!==n0;function hI(){const{caseless:t}=zQ(this)&&this||{},e={},a=(r,s)=>{const l=t&&VQ(e,s)||s;nb(e[l])&&nb(r)?e[l]=hI(e[l],r):nb(r)?e[l]=hI({},r):c1(r)?e[l]=r.slice():e[l]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&$T(arguments[r],a);return e}const kEe=(t,e,a,{allOwnKeys:r}={})=>($T(e,(s,l)=>{a&&ff(s)?t[l]=PQ(s,a):t[l]=s},{allOwnKeys:r}),t),BEe=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),GEe=(t,e,a,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),a&&Object.assign(t.prototype,a)},jEe=(t,e,a,r)=>{let s,l,h;const n={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),l=s.length;l-- >0;)h=s[l],(!r||r(h,t,e))&&!n[h]&&(e[h]=t[h],n[h]=!0);t=a!==!1&&J4(t)}while(t&&(!a||a(t,e))&&t!==Object.prototype);return e},ZEe=(t,e,a)=>{t=String(t),(a===void 0||a>t.length)&&(a=t.length),a-=e.length;const r=t.indexOf(e,a);return r!==-1&&r===a},qEe=t=>{if(!t)return null;if(c1(t))return t;let e=t.length;if(!NQ(e))return null;const a=new Array(e);for(;e-- >0;)a[e]=t[e];return a},HEe=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&J4(Uint8Array)),$Ee=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=r.next())&&!s.done;){const l=s.value;e.call(t,l[0],l[1])}},KEe=(t,e)=>{let a;const r=[];for(;(a=t.exec(e))!==null;)r.push(a);return r},WEe=Zp("HTMLFormElement"),YEe=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,r,s){return r.toUpperCase()+s}),lq=(({hasOwnProperty:t})=>(e,a)=>t.call(e,a))(Object.prototype),XEe=Zp("RegExp"),OQ=(t,e)=>{const a=Object.getOwnPropertyDescriptors(t),r={};$T(a,(s,l)=>{let h;(h=e(s,l,t))!==!1&&(r[l]=h||s)}),Object.defineProperties(t,r)},JEe=t=>{OQ(t,(e,a)=>{if(ff(t)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const r=t[a];if(ff(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},QEe=(t,e)=>{const a={},r=s=>{s.forEach(l=>{a[l]=!0})};return c1(t)?r(t):r(String(t).split(e)),a},eNe=()=>{},tNe=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function aNe(t){return!!(t&&ff(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const rNe=t=>{const e=new Array(10),a=(r,s)=>{if(_P(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const l=c1(r)?[]:{};return $T(r,(h,n)=>{const w=a(h,s+1);!hT(w)&&(l[n]=w)}),e[s]=void 0,l}}return r};return a(t,0)},nNe=Zp("AsyncFunction"),iNe=t=>t&&(_P(t)||ff(t))&&ff(t.then)&&ff(t.catch),DQ=((t,e)=>t?setImmediate:e?((a,r)=>(n0.addEventListener("message",({source:s,data:l})=>{s===n0&&l===a&&r.length&&r.shift()()},!1),s=>{r.push(s),n0.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",ff(n0.postMessage)),sNe=typeof queueMicrotask<"u"?queueMicrotask.bind(n0):typeof process<"u"&&process.nextTick||DQ,Fa={isArray:c1,isArrayBuffer:EQ,isBuffer:SEe,isFormData:OEe,isArrayBufferView:CEe,isString:bEe,isNumber:NQ,isBoolean:xEe,isObject:_P,isPlainObject:nb,isReadableStream:MEe,isRequest:IEe,isResponse:LEe,isHeaders:FEe,isUndefined:hT,isDate:PEe,isFile:EEe,isBlob:NEe,isRegExp:XEe,isFunction:ff,isStream:zEe,isURLSearchParams:DEe,isTypedArray:HEe,isFileList:VEe,forEach:$T,merge:hI,extend:kEe,trim:UEe,stripBOM:BEe,inherits:GEe,toFlatObject:jEe,kindOf:gP,kindOfTest:Zp,endsWith:ZEe,toArray:qEe,forEachEntry:$Ee,matchAll:KEe,isHTMLForm:WEe,hasOwnProperty:lq,hasOwnProp:lq,reduceDescriptors:OQ,freezeMethods:JEe,toObjectSet:QEe,toCamelCase:YEe,noop:eNe,toFiniteNumber:tNe,findKey:VQ,global:n0,isContextDefined:zQ,isSpecCompliantForm:aNe,toJSONObject:rNe,isAsyncFn:nNe,isThenable:iNe,setImmediate:DQ,asap:sNe};function hi(t,e,a,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),a&&(this.config=a),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}Fa.inherits(hi,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Fa.toJSONObject(this.config),code:this.code,status:this.status}}});const MQ=hi.prototype,IQ={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{IQ[t]={value:t}});Object.defineProperties(hi,IQ);Object.defineProperty(MQ,"isAxiosError",{value:!0});hi.from=(t,e,a,r,s,l)=>{const h=Object.create(MQ);return Fa.toFlatObject(t,h,function(w){return w!==Error.prototype},n=>n!=="isAxiosError"),hi.call(h,t.message,e,a,r,s),h.cause=t,h.name=t.name,l&&Object.assign(h,l),h};const oNe=null;function fI(t){return Fa.isPlainObject(t)||Fa.isArray(t)}function LQ(t){return Fa.endsWith(t,"[]")?t.slice(0,-2):t}function uq(t,e,a){return t?t.concat(e).map(function(s,l){return s=LQ(s),!a&&l?"["+s+"]":s}).join(a?".":""):e}function lNe(t){return Fa.isArray(t)&&!t.some(fI)}const uNe=Fa.toFlatObject(Fa,{},null,function(e){return/^is[A-Z]/.test(e)});function vP(t,e,a){if(!Fa.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,a=Fa.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(H,q){return!Fa.isUndefined(q[H])});const r=a.metaTokens,s=a.visitor||P,l=a.dots,h=a.indexes,w=(a.Blob||typeof Blob<"u"&&Blob)&&Fa.isSpecCompliantForm(e);if(!Fa.isFunction(s))throw new TypeError("visitor must be a function");function T(Z){if(Z===null)return"";if(Fa.isDate(Z))return Z.toISOString();if(!w&&Fa.isBlob(Z))throw new hi("Blob is not supported. Use a Buffer instead.");return Fa.isArrayBuffer(Z)||Fa.isTypedArray(Z)?w&&typeof Blob=="function"?new Blob([Z]):Buffer.from(Z):Z}function P(Z,H,q){let J=Z;if(Z&&!q&&typeof Z=="object"){if(Fa.endsWith(H,"{}"))H=r?H:H.slice(0,-2),Z=JSON.stringify(Z);else if(Fa.isArray(Z)&&lNe(Z)||(Fa.isFileList(Z)||Fa.endsWith(H,"[]"))&&(J=Fa.toArray(Z)))return H=LQ(H),J.forEach(function(ce,ye){!(Fa.isUndefined(ce)||ce===null)&&e.append(h===!0?uq([H],ye,l):h===null?H:H+"[]",T(ce))}),!1}return fI(Z)?!0:(e.append(uq(q,H,l),T(Z)),!1)}const z=[],k=Object.assign(uNe,{defaultVisitor:P,convertValue:T,isVisitable:fI});function U(Z,H){if(!Fa.isUndefined(Z)){if(z.indexOf(Z)!==-1)throw Error("Circular reference detected in "+H.join("."));z.push(Z),Fa.forEach(Z,function(J,re){(!(Fa.isUndefined(J)||J===null)&&s.call(e,J,Fa.isString(re)?re.trim():re,H,k))===!0&&U(J,H?H.concat(re):[re])}),z.pop()}}if(!Fa.isObject(t))throw new TypeError("data must be an object");return U(t),e}function cq(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Q4(t,e){this._pairs=[],t&&vP(t,this,e)}const FQ=Q4.prototype;FQ.append=function(e,a){this._pairs.push([e,a])};FQ.toString=function(e){const a=e?function(r){return e.call(this,r,cq)}:cq;return this._pairs.map(function(s){return a(s[0])+"="+a(s[1])},"").join("&")};function cNe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function UQ(t,e,a){if(!e)return t;const r=a&&a.encode||cNe;Fa.isFunction(a)&&(a={serialize:a});const s=a&&a.serialize;let l;if(s?l=s(e,a):l=Fa.isURLSearchParams(e)?e.toString():new Q4(e,a).toString(r),l){const h=t.indexOf("#");h!==-1&&(t=t.slice(0,h)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}class dq{constructor(){this.handlers=[]}use(e,a,r){return this.handlers.push({fulfilled:e,rejected:a,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Fa.forEach(this.handlers,function(r){r!==null&&e(r)})}}const kQ={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},dNe=typeof URLSearchParams<"u"?URLSearchParams:Q4,hNe=typeof FormData<"u"?FormData:null,fNe=typeof Blob<"u"?Blob:null,pNe={isBrowser:!0,classes:{URLSearchParams:dNe,FormData:hNe,Blob:fNe},protocols:["http","https","file","blob","url","data"]},eL=typeof window<"u"&&typeof document<"u",pI=typeof navigator=="object"&&navigator||void 0,mNe=eL&&(!pI||["ReactNative","NativeScript","NS"].indexOf(pI.product)<0),yNe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",gNe=eL&&window.location.href||"http://localhost",ANe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:eL,hasStandardBrowserEnv:mNe,hasStandardBrowserWebWorkerEnv:yNe,navigator:pI,origin:gNe},Symbol.toStringTag,{value:"Module"})),md={...ANe,...pNe};function _Ne(t,e){return vP(t,new md.classes.URLSearchParams,Object.assign({visitor:function(a,r,s,l){return md.isNode&&Fa.isBuffer(a)?(this.append(r,a.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},e))}function vNe(t){return Fa.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function wNe(t){const e={},a=Object.keys(t);let r;const s=a.length;let l;for(r=0;r<s;r++)l=a[r],e[l]=t[l];return e}function BQ(t){function e(a,r,s,l){let h=a[l++];if(h==="__proto__")return!0;const n=Number.isFinite(+h),w=l>=a.length;return h=!h&&Fa.isArray(s)?s.length:h,w?(Fa.hasOwnProp(s,h)?s[h]=[s[h],r]:s[h]=r,!n):((!s[h]||!Fa.isObject(s[h]))&&(s[h]=[]),e(a,r,s[h],l)&&Fa.isArray(s[h])&&(s[h]=wNe(s[h])),!n)}if(Fa.isFormData(t)&&Fa.isFunction(t.entries)){const a={};return Fa.forEachEntry(t,(r,s)=>{e(vNe(r),s,a,0)}),a}return null}function RNe(t,e,a){if(Fa.isString(t))try{return(e||JSON.parse)(t),Fa.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(a||JSON.stringify)(t)}const KT={transitional:kQ,adapter:["xhr","http","fetch"],transformRequest:[function(e,a){const r=a.getContentType()||"",s=r.indexOf("application/json")>-1,l=Fa.isObject(e);if(l&&Fa.isHTMLForm(e)&&(e=new FormData(e)),Fa.isFormData(e))return s?JSON.stringify(BQ(e)):e;if(Fa.isArrayBuffer(e)||Fa.isBuffer(e)||Fa.isStream(e)||Fa.isFile(e)||Fa.isBlob(e)||Fa.isReadableStream(e))return e;if(Fa.isArrayBufferView(e))return e.buffer;if(Fa.isURLSearchParams(e))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let n;if(l){if(r.indexOf("application/x-www-form-urlencoded")>-1)return _Ne(e,this.formSerializer).toString();if((n=Fa.isFileList(e))||r.indexOf("multipart/form-data")>-1){const w=this.env&&this.env.FormData;return vP(n?{"files[]":e}:e,w&&new w,this.formSerializer)}}return l||s?(a.setContentType("application/json",!1),RNe(e)):e}],transformResponse:[function(e){const a=this.transitional||KT.transitional,r=a&&a.forcedJSONParsing,s=this.responseType==="json";if(Fa.isResponse(e)||Fa.isReadableStream(e))return e;if(e&&Fa.isString(e)&&(r&&!this.responseType||s)){const h=!(a&&a.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(n){if(h)throw n.name==="SyntaxError"?hi.from(n,hi.ERR_BAD_RESPONSE,this,null,this.response):n}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:md.classes.FormData,Blob:md.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Fa.forEach(["delete","get","head","post","put","patch"],t=>{KT.headers[t]={}});const TNe=Fa.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),SNe=t=>{const e={};let a,r,s;return t&&t.split(`
`).forEach(function(h){s=h.indexOf(":"),a=h.substring(0,s).trim().toLowerCase(),r=h.substring(s+1).trim(),!(!a||e[a]&&TNe[a])&&(a==="set-cookie"?e[a]?e[a].push(r):e[a]=[r]:e[a]=e[a]?e[a]+", "+r:r)}),e},hq=Symbol("internals");function Iw(t){return t&&String(t).trim().toLowerCase()}function ib(t){return t===!1||t==null?t:Fa.isArray(t)?t.map(ib):String(t)}function CNe(t){const e=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=a.exec(t);)e[r[1]]=r[2];return e}const bNe=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function k5(t,e,a,r,s){if(Fa.isFunction(r))return r.call(this,e,a);if(s&&(e=a),!!Fa.isString(e)){if(Fa.isString(r))return e.indexOf(r)!==-1;if(Fa.isRegExp(r))return r.test(e)}}function xNe(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,a,r)=>a.toUpperCase()+r)}function PNe(t,e){const a=Fa.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+a,{value:function(s,l,h){return this[r].call(this,e,s,l,h)},configurable:!0})})}let Vh=class{constructor(e){e&&this.set(e)}set(e,a,r){const s=this;function l(n,w,T){const P=Iw(w);if(!P)throw new Error("header name must be a non-empty string");const z=Fa.findKey(s,P);(!z||s[z]===void 0||T===!0||T===void 0&&s[z]!==!1)&&(s[z||w]=ib(n))}const h=(n,w)=>Fa.forEach(n,(T,P)=>l(T,P,w));if(Fa.isPlainObject(e)||e instanceof this.constructor)h(e,a);else if(Fa.isString(e)&&(e=e.trim())&&!bNe(e))h(SNe(e),a);else if(Fa.isHeaders(e))for(const[n,w]of e.entries())l(w,n,r);else e!=null&&l(a,e,r);return this}get(e,a){if(e=Iw(e),e){const r=Fa.findKey(this,e);if(r){const s=this[r];if(!a)return s;if(a===!0)return CNe(s);if(Fa.isFunction(a))return a.call(this,s,r);if(Fa.isRegExp(a))return a.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,a){if(e=Iw(e),e){const r=Fa.findKey(this,e);return!!(r&&this[r]!==void 0&&(!a||k5(this,this[r],r,a)))}return!1}delete(e,a){const r=this;let s=!1;function l(h){if(h=Iw(h),h){const n=Fa.findKey(r,h);n&&(!a||k5(r,r[n],n,a))&&(delete r[n],s=!0)}}return Fa.isArray(e)?e.forEach(l):l(e),s}clear(e){const a=Object.keys(this);let r=a.length,s=!1;for(;r--;){const l=a[r];(!e||k5(this,this[l],l,e,!0))&&(delete this[l],s=!0)}return s}normalize(e){const a=this,r={};return Fa.forEach(this,(s,l)=>{const h=Fa.findKey(r,l);if(h){a[h]=ib(s),delete a[l];return}const n=e?xNe(l):String(l).trim();n!==l&&delete a[l],a[n]=ib(s),r[n]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const a=Object.create(null);return Fa.forEach(this,(r,s)=>{r!=null&&r!==!1&&(a[s]=e&&Fa.isArray(r)?r.join(", "):r)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,a])=>e+": "+a).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...a){const r=new this(e);return a.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[hq]=this[hq]={accessors:{}}).accessors,s=this.prototype;function l(h){const n=Iw(h);r[n]||(PNe(s,h),r[n]=!0)}return Fa.isArray(e)?e.forEach(l):l(e),this}};Vh.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Fa.reduceDescriptors(Vh.prototype,({value:t},e)=>{let a=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[a]=r}}});Fa.freezeMethods(Vh);function B5(t,e){const a=this||KT,r=e||a,s=Vh.from(r.headers);let l=r.data;return Fa.forEach(t,function(n){l=n.call(a,l,s.normalize(),e?e.status:void 0)}),s.normalize(),l}function GQ(t){return!!(t&&t.__CANCEL__)}function d1(t,e,a){hi.call(this,t??"canceled",hi.ERR_CANCELED,e,a),this.name="CanceledError"}Fa.inherits(d1,hi,{__CANCEL__:!0});function jQ(t,e,a){const r=a.config.validateStatus;!a.status||!r||r(a.status)?t(a):e(new hi("Request failed with status code "+a.status,[hi.ERR_BAD_REQUEST,hi.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function ENe(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function NNe(t,e){t=t||10;const a=new Array(t),r=new Array(t);let s=0,l=0,h;return e=e!==void 0?e:1e3,function(w){const T=Date.now(),P=r[l];h||(h=T),a[s]=w,r[s]=T;let z=l,k=0;for(;z!==s;)k+=a[z++],z=z%t;if(s=(s+1)%t,s===l&&(l=(l+1)%t),T-h<e)return;const U=P&&T-P;return U?Math.round(k*1e3/U):void 0}}function VNe(t,e){let a=0,r=1e3/e,s,l;const h=(T,P=Date.now())=>{a=P,s=null,l&&(clearTimeout(l),l=null),t.apply(null,T)};return[(...T)=>{const P=Date.now(),z=P-a;z>=r?h(T,P):(s=T,l||(l=setTimeout(()=>{l=null,h(s)},r-z)))},()=>s&&h(s)]}const Ux=(t,e,a=3)=>{let r=0;const s=NNe(50,250);return VNe(l=>{const h=l.loaded,n=l.lengthComputable?l.total:void 0,w=h-r,T=s(w),P=h<=n;r=h;const z={loaded:h,total:n,progress:n?h/n:void 0,bytes:w,rate:T||void 0,estimated:T&&n&&P?(n-h)/T:void 0,event:l,lengthComputable:n!=null,[e?"download":"upload"]:!0};t(z)},a)},fq=(t,e)=>{const a=t!=null;return[r=>e[0]({lengthComputable:a,total:t,loaded:r}),e[1]]},pq=t=>(...e)=>Fa.asap(()=>t(...e)),zNe=md.hasStandardBrowserEnv?((t,e)=>a=>(a=new URL(a,md.origin),t.protocol===a.protocol&&t.host===a.host&&(e||t.port===a.port)))(new URL(md.origin),md.navigator&&/(msie|trident)/i.test(md.navigator.userAgent)):()=>!0,ONe=md.hasStandardBrowserEnv?{write(t,e,a,r,s,l){const h=[t+"="+encodeURIComponent(e)];Fa.isNumber(a)&&h.push("expires="+new Date(a).toGMTString()),Fa.isString(r)&&h.push("path="+r),Fa.isString(s)&&h.push("domain="+s),l===!0&&h.push("secure"),document.cookie=h.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function DNe(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function MNe(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function ZQ(t,e,a){let r=!DNe(e);return t&&(r||a==!1)?MNe(t,e):e}const mq=t=>t instanceof Vh?{...t}:t;function S0(t,e){e=e||{};const a={};function r(T,P,z,k){return Fa.isPlainObject(T)&&Fa.isPlainObject(P)?Fa.merge.call({caseless:k},T,P):Fa.isPlainObject(P)?Fa.merge({},P):Fa.isArray(P)?P.slice():P}function s(T,P,z,k){if(Fa.isUndefined(P)){if(!Fa.isUndefined(T))return r(void 0,T,z,k)}else return r(T,P,z,k)}function l(T,P){if(!Fa.isUndefined(P))return r(void 0,P)}function h(T,P){if(Fa.isUndefined(P)){if(!Fa.isUndefined(T))return r(void 0,T)}else return r(void 0,P)}function n(T,P,z){if(z in e)return r(T,P);if(z in t)return r(void 0,T)}const w={url:l,method:l,data:l,baseURL:h,transformRequest:h,transformResponse:h,paramsSerializer:h,timeout:h,timeoutMessage:h,withCredentials:h,withXSRFToken:h,adapter:h,responseType:h,xsrfCookieName:h,xsrfHeaderName:h,onUploadProgress:h,onDownloadProgress:h,decompress:h,maxContentLength:h,maxBodyLength:h,beforeRedirect:h,transport:h,httpAgent:h,httpsAgent:h,cancelToken:h,socketPath:h,responseEncoding:h,validateStatus:n,headers:(T,P,z)=>s(mq(T),mq(P),z,!0)};return Fa.forEach(Object.keys(Object.assign({},t,e)),function(P){const z=w[P]||s,k=z(t[P],e[P],P);Fa.isUndefined(k)&&z!==n||(a[P]=k)}),a}const qQ=t=>{const e=S0({},t);let{data:a,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:l,headers:h,auth:n}=e;e.headers=h=Vh.from(h),e.url=UQ(ZQ(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),n&&h.set("Authorization","Basic "+btoa((n.username||"")+":"+(n.password?unescape(encodeURIComponent(n.password)):"")));let w;if(Fa.isFormData(a)){if(md.hasStandardBrowserEnv||md.hasStandardBrowserWebWorkerEnv)h.setContentType(void 0);else if((w=h.getContentType())!==!1){const[T,...P]=w?w.split(";").map(z=>z.trim()).filter(Boolean):[];h.setContentType([T||"multipart/form-data",...P].join("; "))}}if(md.hasStandardBrowserEnv&&(r&&Fa.isFunction(r)&&(r=r(e)),r||r!==!1&&zNe(e.url))){const T=s&&l&&ONe.read(l);T&&h.set(s,T)}return e},INe=typeof XMLHttpRequest<"u",LNe=INe&&function(t){return new Promise(function(a,r){const s=qQ(t);let l=s.data;const h=Vh.from(s.headers).normalize();let{responseType:n,onUploadProgress:w,onDownloadProgress:T}=s,P,z,k,U,Z;function H(){U&&U(),Z&&Z(),s.cancelToken&&s.cancelToken.unsubscribe(P),s.signal&&s.signal.removeEventListener("abort",P)}let q=new XMLHttpRequest;q.open(s.method.toUpperCase(),s.url,!0),q.timeout=s.timeout;function J(){if(!q)return;const ce=Vh.from("getAllResponseHeaders"in q&&q.getAllResponseHeaders()),he={data:!n||n==="text"||n==="json"?q.responseText:q.response,status:q.status,statusText:q.statusText,headers:ce,config:t,request:q};jQ(function(me){a(me),H()},function(me){r(me),H()},he),q=null}"onloadend"in q?q.onloadend=J:q.onreadystatechange=function(){!q||q.readyState!==4||q.status===0&&!(q.responseURL&&q.responseURL.indexOf("file:")===0)||setTimeout(J)},q.onabort=function(){q&&(r(new hi("Request aborted",hi.ECONNABORTED,t,q)),q=null)},q.onerror=function(){r(new hi("Network Error",hi.ERR_NETWORK,t,q)),q=null},q.ontimeout=function(){let ye=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const he=s.transitional||kQ;s.timeoutErrorMessage&&(ye=s.timeoutErrorMessage),r(new hi(ye,he.clarifyTimeoutError?hi.ETIMEDOUT:hi.ECONNABORTED,t,q)),q=null},l===void 0&&h.setContentType(null),"setRequestHeader"in q&&Fa.forEach(h.toJSON(),function(ye,he){q.setRequestHeader(he,ye)}),Fa.isUndefined(s.withCredentials)||(q.withCredentials=!!s.withCredentials),n&&n!=="json"&&(q.responseType=s.responseType),T&&([k,Z]=Ux(T,!0),q.addEventListener("progress",k)),w&&q.upload&&([z,U]=Ux(w),q.upload.addEventListener("progress",z),q.upload.addEventListener("loadend",U)),(s.cancelToken||s.signal)&&(P=ce=>{q&&(r(!ce||ce.type?new d1(null,t,q):ce),q.abort(),q=null)},s.cancelToken&&s.cancelToken.subscribe(P),s.signal&&(s.signal.aborted?P():s.signal.addEventListener("abort",P)));const re=ENe(s.url);if(re&&md.protocols.indexOf(re)===-1){r(new hi("Unsupported protocol "+re+":",hi.ERR_BAD_REQUEST,t));return}q.send(l||null)})},FNe=(t,e)=>{const{length:a}=t=t?t.filter(Boolean):[];if(e||a){let r=new AbortController,s;const l=function(T){if(!s){s=!0,n();const P=T instanceof Error?T:this.reason;r.abort(P instanceof hi?P:new d1(P instanceof Error?P.message:P))}};let h=e&&setTimeout(()=>{h=null,l(new hi(`timeout ${e} of ms exceeded`,hi.ETIMEDOUT))},e);const n=()=>{t&&(h&&clearTimeout(h),h=null,t.forEach(T=>{T.unsubscribe?T.unsubscribe(l):T.removeEventListener("abort",l)}),t=null)};t.forEach(T=>T.addEventListener("abort",l));const{signal:w}=r;return w.unsubscribe=()=>Fa.asap(n),w}},UNe=function*(t,e){let a=t.byteLength;if(a<e){yield t;return}let r=0,s;for(;r<a;)s=r+e,yield t.slice(r,s),r=s},kNe=async function*(t,e){for await(const a of BNe(t))yield*UNe(a,e)},BNe=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:a,value:r}=await e.read();if(a)break;yield r}}finally{await e.cancel()}},yq=(t,e,a,r)=>{const s=kNe(t,e);let l=0,h,n=w=>{h||(h=!0,r&&r(w))};return new ReadableStream({async pull(w){try{const{done:T,value:P}=await s.next();if(T){n(),w.close();return}let z=P.byteLength;if(a){let k=l+=z;a(k)}w.enqueue(new Uint8Array(P))}catch(T){throw n(T),T}},cancel(w){return n(w),s.return()}},{highWaterMark:2})},wP=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",HQ=wP&&typeof ReadableStream=="function",GNe=wP&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),$Q=(t,...e)=>{try{return!!t(...e)}catch{return!1}},jNe=HQ&&$Q(()=>{let t=!1;const e=new Request(md.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),gq=64*1024,mI=HQ&&$Q(()=>Fa.isReadableStream(new Response("").body)),kx={stream:mI&&(t=>t.body)};wP&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!kx[e]&&(kx[e]=Fa.isFunction(t[e])?a=>a[e]():(a,r)=>{throw new hi(`Response type '${e}' is not supported`,hi.ERR_NOT_SUPPORT,r)})})})(new Response);const ZNe=async t=>{if(t==null)return 0;if(Fa.isBlob(t))return t.size;if(Fa.isSpecCompliantForm(t))return(await new Request(md.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Fa.isArrayBufferView(t)||Fa.isArrayBuffer(t))return t.byteLength;if(Fa.isURLSearchParams(t)&&(t=t+""),Fa.isString(t))return(await GNe(t)).byteLength},qNe=async(t,e)=>{const a=Fa.toFiniteNumber(t.getContentLength());return a??ZNe(e)},HNe=wP&&(async t=>{let{url:e,method:a,data:r,signal:s,cancelToken:l,timeout:h,onDownloadProgress:n,onUploadProgress:w,responseType:T,headers:P,withCredentials:z="same-origin",fetchOptions:k}=qQ(t);T=T?(T+"").toLowerCase():"text";let U=FNe([s,l&&l.toAbortSignal()],h),Z;const H=U&&U.unsubscribe&&(()=>{U.unsubscribe()});let q;try{if(w&&jNe&&a!=="get"&&a!=="head"&&(q=await qNe(P,r))!==0){let he=new Request(e,{method:"POST",body:r,duplex:"half"}),_e;if(Fa.isFormData(r)&&(_e=he.headers.get("content-type"))&&P.setContentType(_e),he.body){const[me,Re]=fq(q,Ux(pq(w)));r=yq(he.body,gq,me,Re)}}Fa.isString(z)||(z=z?"include":"omit");const J="credentials"in Request.prototype;Z=new Request(e,{...k,signal:U,method:a.toUpperCase(),headers:P.normalize().toJSON(),body:r,duplex:"half",credentials:J?z:void 0});let re=await fetch(Z);const ce=mI&&(T==="stream"||T==="response");if(mI&&(n||ce&&H)){const he={};["status","statusText","headers"].forEach(be=>{he[be]=re[be]});const _e=Fa.toFiniteNumber(re.headers.get("content-length")),[me,Re]=n&&fq(_e,Ux(pq(n),!0))||[];re=new Response(yq(re.body,gq,me,()=>{Re&&Re(),H&&H()}),he)}T=T||"text";let ye=await kx[Fa.findKey(kx,T)||"text"](re,t);return!ce&&H&&H(),await new Promise((he,_e)=>{jQ(he,_e,{data:ye,headers:Vh.from(re.headers),status:re.status,statusText:re.statusText,config:t,request:Z})})}catch(J){throw H&&H(),J&&J.name==="TypeError"&&/fetch/i.test(J.message)?Object.assign(new hi("Network Error",hi.ERR_NETWORK,t,Z),{cause:J.cause||J}):hi.from(J,J&&J.code,t,Z)}}),yI={http:oNe,xhr:LNe,fetch:HNe};Fa.forEach(yI,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Aq=t=>`- ${t}`,$Ne=t=>Fa.isFunction(t)||t===null||t===!1,KQ={getAdapter:t=>{t=Fa.isArray(t)?t:[t];const{length:e}=t;let a,r;const s={};for(let l=0;l<e;l++){a=t[l];let h;if(r=a,!$Ne(a)&&(r=yI[(h=String(a)).toLowerCase()],r===void 0))throw new hi(`Unknown adapter '${h}'`);if(r)break;s[h||"#"+l]=r}if(!r){const l=Object.entries(s).map(([n,w])=>`adapter ${n} `+(w===!1?"is not supported by the environment":"is not available in the build"));let h=e?l.length>1?`since :
`+l.map(Aq).join(`
`):" "+Aq(l[0]):"as no adapter specified";throw new hi("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return r},adapters:yI};function G5(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new d1(null,t)}function _q(t){return G5(t),t.headers=Vh.from(t.headers),t.data=B5.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),KQ.getAdapter(t.adapter||KT.adapter)(t).then(function(r){return G5(t),r.data=B5.call(t,t.transformResponse,r),r.headers=Vh.from(r.headers),r},function(r){return GQ(r)||(G5(t),r&&r.response&&(r.response.data=B5.call(t,t.transformResponse,r.response),r.response.headers=Vh.from(r.response.headers))),Promise.reject(r)})}const WQ="1.8.4",RP={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{RP[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const vq={};RP.transitional=function(e,a,r){function s(l,h){return"[Axios v"+WQ+"] Transitional option '"+l+"'"+h+(r?". "+r:"")}return(l,h,n)=>{if(e===!1)throw new hi(s(h," has been removed"+(a?" in "+a:"")),hi.ERR_DEPRECATED);return a&&!vq[h]&&(vq[h]=!0,console.warn(s(h," has been deprecated since v"+a+" and will be removed in the near future"))),e?e(l,h,n):!0}};RP.spelling=function(e){return(a,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function KNe(t,e,a){if(typeof t!="object")throw new hi("options must be an object",hi.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const l=r[s],h=e[l];if(h){const n=t[l],w=n===void 0||h(n,l,t);if(w!==!0)throw new hi("option "+l+" must be "+w,hi.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new hi("Unknown option "+l,hi.ERR_BAD_OPTION)}}const sb={assertOptions:KNe,validators:RP},_m=sb.validators;let d0=class{constructor(e){this.defaults=e,this.interceptors={request:new dq,response:new dq}}async request(e,a){try{return await this._request(e,a)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const l=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?l&&!String(r.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+l):r.stack=l}catch{}}throw r}}_request(e,a){typeof e=="string"?(a=a||{},a.url=e):a=e||{},a=S0(this.defaults,a);const{transitional:r,paramsSerializer:s,headers:l}=a;r!==void 0&&sb.assertOptions(r,{silentJSONParsing:_m.transitional(_m.boolean),forcedJSONParsing:_m.transitional(_m.boolean),clarifyTimeoutError:_m.transitional(_m.boolean)},!1),s!=null&&(Fa.isFunction(s)?a.paramsSerializer={serialize:s}:sb.assertOptions(s,{encode:_m.function,serialize:_m.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),sb.assertOptions(a,{baseUrl:_m.spelling("baseURL"),withXsrfToken:_m.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let h=l&&Fa.merge(l.common,l[a.method]);l&&Fa.forEach(["delete","get","head","post","put","patch","common"],Z=>{delete l[Z]}),a.headers=Vh.concat(h,l);const n=[];let w=!0;this.interceptors.request.forEach(function(H){typeof H.runWhen=="function"&&H.runWhen(a)===!1||(w=w&&H.synchronous,n.unshift(H.fulfilled,H.rejected))});const T=[];this.interceptors.response.forEach(function(H){T.push(H.fulfilled,H.rejected)});let P,z=0,k;if(!w){const Z=[_q.bind(this),void 0];for(Z.unshift.apply(Z,n),Z.push.apply(Z,T),k=Z.length,P=Promise.resolve(a);z<k;)P=P.then(Z[z++],Z[z++]);return P}k=n.length;let U=a;for(z=0;z<k;){const Z=n[z++],H=n[z++];try{U=Z(U)}catch(q){H.call(this,q);break}}try{P=_q.call(this,U)}catch(Z){return Promise.reject(Z)}for(z=0,k=T.length;z<k;)P=P.then(T[z++],T[z++]);return P}getUri(e){e=S0(this.defaults,e);const a=ZQ(e.baseURL,e.url,e.allowAbsoluteUrls);return UQ(a,e.params,e.paramsSerializer)}};Fa.forEach(["delete","get","head","options"],function(e){d0.prototype[e]=function(a,r){return this.request(S0(r||{},{method:e,url:a,data:(r||{}).data}))}});Fa.forEach(["post","put","patch"],function(e){function a(r){return function(l,h,n){return this.request(S0(n||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:l,data:h}))}}d0.prototype[e]=a(),d0.prototype[e+"Form"]=a(!0)});let WNe=class YQ{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(l){a=l});const r=this;this.promise.then(s=>{if(!r._listeners)return;let l=r._listeners.length;for(;l-- >0;)r._listeners[l](s);r._listeners=null}),this.promise.then=s=>{let l;const h=new Promise(n=>{r.subscribe(n),l=n}).then(s);return h.cancel=function(){r.unsubscribe(l)},h},e(function(l,h,n){r.reason||(r.reason=new d1(l,h,n),a(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const a=this._listeners.indexOf(e);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const e=new AbortController,a=r=>{e.abort(r)};return this.subscribe(a),e.signal.unsubscribe=()=>this.unsubscribe(a),e.signal}static source(){let e;return{token:new YQ(function(s){e=s}),cancel:e}}};function YNe(t){return function(a){return t.apply(null,a)}}function XNe(t){return Fa.isObject(t)&&t.isAxiosError===!0}const gI={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(gI).forEach(([t,e])=>{gI[e]=t});function XQ(t){const e=new d0(t),a=PQ(d0.prototype.request,e);return Fa.extend(a,d0.prototype,e,{allOwnKeys:!0}),Fa.extend(a,e,null,{allOwnKeys:!0}),a.create=function(s){return XQ(S0(t,s))},a}const Zl=XQ(KT);Zl.Axios=d0;Zl.CanceledError=d1;Zl.CancelToken=WNe;Zl.isCancel=GQ;Zl.VERSION=WQ;Zl.toFormData=vP;Zl.AxiosError=hi;Zl.Cancel=Zl.CanceledError;Zl.all=function(e){return Promise.all(e)};Zl.spread=YNe;Zl.isAxiosError=XNe;Zl.mergeConfig=S0;Zl.AxiosHeaders=Vh;Zl.formToJSON=t=>BQ(Fa.isHTMLForm(t)?new FormData(t):t);Zl.getAdapter=KQ.getAdapter;Zl.HttpStatusCode=gI;Zl.default=Zl;const{Axios:DVe,AxiosError:MVe,CanceledError:IVe,isCancel:LVe,CancelToken:FVe,VERSION:UVe,all:kVe,Cancel:BVe,isAxiosError:GVe,spread:jVe,toFormData:ZVe,AxiosHeaders:qVe,HttpStatusCode:HVe,formToJSON:$Ve,getAdapter:KVe,mergeConfig:WVe}=Zl,JNe="/ecpcaps/assets/bike_icon-CFICwI6a.png";Zf.accessToken="pk.eyJ1IjoiY29jb2xlbW9uMTIiLCJhIjoiY204YTBoMnZpMHplbzJzcTR3dDFmOXc4NiJ9.NqqEHSBe8cn9Gy9knbUqew";const QNe=({onEditStation:t})=>{const[e,a]=nt.useState(null),[r,s]=nt.useState([]),[l,h]=nt.useState(null),[n,w]=nt.useState(!1),[T,P]=nt.useState([]),[z,k]=nt.useState(!0),[U,Z]=nt.useState([]),[H,q]=nt.useState(""),[J,re]=nt.useState("all"),[ce,ye]=nt.useState([]);nt.useEffect(()=>{if(!e){const me=new Zf.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[120.9882053036898,14.693467677226026],zoom:12});me.on("load",()=>{a(me)})}},[e]),nt.useEffect(()=>e?(r.forEach(Re=>Re.remove()),(async()=>{try{const Re=await Xi(Zn(zr,"stations")),be=await Xi(Zn(zr,"admins")),De={};be.docs.forEach(ge=>{const Me=ge.data();De[ge.id]={name:Me.name,profilePhoto:Me.profilePhoto}});const ie=[];if(Re.docs.forEach(ge=>{const Me=ge.data(),ze=Me.tanodAssigned||[],Le=Array.isArray(ze)?ze:[ze],Ie={id:ge.id,...Me,tanodAssigned:Le,tanodAssignedName:Le.map(Ze=>{var ke;return((ke=De[Ze])==null?void 0:ke.name)||"Unknown"}).join(", "),tanodAssignedAvatar:Le.map(Ze=>{var ke;return(ke=De[Ze])==null?void 0:ke.profilePhoto}).filter(Ze=>Ze)};if(Ie.coordinates&&Array.isArray(Ie.coordinates)&&Ie.coordinates.length===2){const Ze=document.createElement("div");Ze.className="custom-marker";const ke=document.createElement("div");ke.className="station-name",ke.textContent=Ie.stationName,Ze.appendChild(ke);const tt=document.createElement("img");tt.src=JNe,tt.className="marker-icon",Ze.appendChild(tt),Ze.addEventListener("click",()=>{h(Ie),w(!0)});const Ue=new Zf.Marker(Ze).setLngLat([Ie.coordinates[1],Ie.coordinates[0]]).addTo(e);ie.push(Ue)}}),s(ie),ie.length>0){const ge=new Zf.LngLatBounds;Re.docs.forEach(Me=>{const ze=Me.data();ze.coordinates&&Array.isArray(ze.coordinates)&&ze.coordinates.length===2&&ge.extend([ze.coordinates[1],ze.coordinates[0]])}),e.fitBounds(ge,{padding:50})}}catch(Re){console.error("Error fetching stations:",Re)}})(),()=>{r.forEach(Re=>Re.remove())}):void 0,[e]);const he=async()=>{try{const Re=(await Xi(Zn(zr,"admins"))).docs.map(be=>({id:be.id,...be.data()}));ye(Re)}catch(me){console.error("Error fetching admins:",me)}};nt.useEffect(()=>{he()},[]);const _e=({station:me,onClose:Re})=>{const[be,De]=nt.useState(!1),[ie,ge]=nt.useState(!1),[Me,ze]=nt.useState(!1),[Le,Ie]=nt.useState([]),[Ze,ke]=nt.useState([]),[tt,Ue]=nt.useState([]),[He,Ce]=nt.useState([]),[Se,$e]=nt.useState(0),[ht,ft]=nt.useState(!1),[ut,Rt]=nt.useState(!1),[We,Ae]=nt.useState(!1),[qt,Gt]=nt.useState(null),[Aa,It]=nt.useState(!1),[ta,vt]=nt.useState([]),[or,Na]=nt.useState(!1),[za,er]=nt.useState(!1),[dr,cr]=nt.useState(null),[Pr,ka]=nt.useState([]);nt.useEffect(()=>{jr(),pn(),Dn()},[me.id]);const jr=async()=>{try{const Qa=(await Xi(Zn(zr,"bikes"))).docs.map(gr=>({id:gr.id,...gr.data()})).filter(gr=>gr.stationAssigned===me.id);Ue(Qa)}catch(ca){console.error("Error fetching station bikes:",ca)}},pn=async()=>{try{const Qa=(await Xi(Zn(zr,"bikes"))).docs.map(gr=>({id:gr.id,...gr.data()})).filter(gr=>!gr.stationAssigned);Ce(Qa)}catch(ca){console.error("Error fetching unassigned bikes:",ca)}},Dn=async()=>{try{const Qa=(await Xi(Zn(zr,"admins"))).docs.map(gr=>({id:gr.id,...gr.data()})).filter(gr=>{var qn;return!((qn=me.tanodAssigned)!=null&&qn.includes(gr.id))&&!gr.stationAssignedTo});vt(Qa)}catch(ca){console.error("Error fetching unassigned admins:",ca)}},Rn=async()=>{try{De(!0);const ca=Le.map(Qa=>hd(Is(zr,"bikes",Qa),{stationAssigned:null}));await Promise.all(ca),ge(!1),Ie([]),jr()}catch(ca){console.error("Error removing bikes:",ca),alert("Failed to remove bikes")}finally{De(!1)}},wa=async()=>{try{De(!0);const ca=Ze.map(Qa=>hd(Is(zr,"bikes",Qa),{stationAssigned:me.id}));await Promise.all(ca),ze(!1),ke([]),jr()}catch(ca){console.error("Error adding bikes:",ca),alert("Failed to add bikes")}finally{De(!1)}},Wa=async ca=>{try{De(!0);const Qa=me.tanodAssigned||[];await hd(Is(zr,"stations",me.id),{tanodAssigned:[...Qa,...ca]});const gr=ca.map(qn=>hd(Is(zr,"admins",qn),{stationAssignedTo:me.id}));await Promise.all(gr),It(!1),window.location.reload()}catch(Qa){console.error("Error assigning admins:",Qa),alert("Failed to assign admins")}finally{De(!1)}};return K.jsx("div",{className:"map-modal-overlay",children:K.jsxs("div",{className:"map-modal-content large",children:[K.jsxs("div",{className:"modal-header",children:[K.jsxs("div",{className:"station-header",children:[K.jsx("h2",{children:me.stationName}),K.jsx("p",{className:"station-address",children:me.stationAddress})]}),K.jsx("button",{className:"close-button",onClick:Re,children:""})]}),K.jsxs("div",{className:"modal-body",children:[K.jsxs("div",{className:"admin-section",children:[K.jsxs("div",{className:"count-card",children:[K.jsxs("div",{className:"count-header",children:[K.jsx("h3",{children:"Station Admin"}),K.jsx("button",{className:"edit-btn",onClick:()=>It(!Aa),children:K.jsx(Qw,{})})]}),Aa&&K.jsx("div",{className:"action-dropdown",children:K.jsx("button",{onClick:()=>{Na(!0),er(!1),It(!1),Dn()},children:"Add Admin"})})]}),K.jsx("div",{className:"admin-content",children:or?K.jsxs("div",{className:"admin-list",children:[K.jsx("h4",{children:"Select Admin to Assign"}),K.jsx("div",{className:"admin-grid",children:ta.map(ca=>K.jsxs("div",{className:"admin-card",children:[K.jsx("input",{type:"checkbox",className:"admin-checkbox",checked:Pr.includes(ca.id),onChange:Qa=>{Qa.target.checked?ka([...Pr,ca.id]):ka(Pr.filter(gr=>gr!==ca.id))}}),K.jsx("img",{src:ca.profilePhoto||"/default-avatar.png",alt:ca.name,className:"admin-photo"}),K.jsx("span",{className:"admin-name",children:ca.name})]},ca.id))}),K.jsxs("div",{className:"action-buttons",children:[K.jsx("button",{className:"save-btn",onClick:()=>{Pr.length>0&&Wa(Pr)},disabled:Pr.length===0||be,children:be?"Saving...":"Save Changes"}),K.jsx("button",{className:"discard-btn",onClick:()=>{Na(!1),ka([])},children:"Discard Changes"})]})]}):K.jsx("div",{className:"admin-profile",children:Array.isArray(me.tanodAssigned)&&me.tanodAssigned.length>0?me.tanodAssigned.map(ca=>{const Qa=ce.find(gr=>gr.id===ca);return K.jsxs("div",{className:"admin-avatar",children:[K.jsx("img",{src:(Qa==null?void 0:Qa.profilePhoto)||"/default-avatar.png",alt:Qa==null?void 0:Qa.name}),K.jsx("span",{children:(Qa==null?void 0:Qa.name)||"Unknown Admin"})]},ca)}):K.jsx("div",{className:"no-admin",children:K.jsx("span",{children:"No Admin Assigned"})})})})]}),K.jsxs("div",{className:"bikes-section",children:[K.jsxs("div",{className:"bikes-header-section",children:[K.jsx("h3",{children:"Station Bikes"}),K.jsx("div",{className:"counts-section",children:K.jsxs("div",{className:"count-cards",children:[K.jsxs("div",{className:"count-card",children:[K.jsxs("div",{className:"count-header",children:[K.jsxs("span",{children:["Regular Bikes:"," ",tt.filter(ca=>ca.bikeCategory==="Regular Bicycle").length]}),K.jsx("button",{className:"edit-btn",onClick:()=>Rt(!ut),children:K.jsx(Qw,{})})]}),ut&&K.jsxs("div",{className:"action-dropdown",children:[K.jsx("button",{onClick:()=>{ze(!0),ge(!1),Gt("Regular"),Rt(!1)},children:"Add Bikes"}),K.jsx("button",{onClick:()=>{ge(!0),ze(!1),Gt("Regular"),Rt(!1)},children:"Remove Bikes"})]})]}),K.jsxs("div",{className:"count-card",children:[K.jsxs("div",{className:"count-header",children:[K.jsxs("span",{children:["E-Bikes:"," ",tt.filter(ca=>ca.bikeCategory==="Electric Bicycle").length]}),K.jsx("button",{className:"edit-btn",onClick:()=>Ae(!We),children:K.jsx(Qw,{})})]}),We&&K.jsxs("div",{className:"action-dropdown",children:[K.jsx("button",{onClick:()=>{ze(!0),ge(!1),Gt("Electric"),Ae(!1)},children:"Add E-Bikes"}),K.jsx("button",{onClick:()=>{ge(!0),ze(!1),Gt("Electric"),Ae(!1)},children:"Remove E-Bikes"})]})]})]})})]}),K.jsx("div",{className:"bikes-content",children:K.jsx("div",{className:"bikes-grid",children:(ie||Me?ie?tt.filter(ca=>qt==="Regular"?ca.bikeCategory==="Regular Bicycle":ca.bikeCategory==="Electric Bicycle"):He.filter(ca=>qt==="Regular"?ca.bikeCategory==="Regular Bicycle":ca.bikeCategory==="Electric Bicycle"):tt).slice(Se*6,(Se+1)*6).map(ca=>K.jsxs("div",{className:"bike-card",children:[(ie||Me)&&K.jsx("input",{type:"checkbox",className:"bike-checkbox",checked:ie?Le.includes(ca.id):Ze.includes(ca.id),onChange:Qa=>{const gr=ie?Ie:ke,qn=ie?Le:Ze;Qa.target.checked?gr([...qn,ca.id]):gr(qn.filter(Mn=>Mn!==ca.id))}}),K.jsx("img",{src:ca.imageUrl||"/default-bike.png",alt:ca.bikeName}),K.jsxs("div",{className:"bike-info",children:[K.jsx("span",{className:"bike-id",children:ca.bikeId}),K.jsx("span",{className:"bike-name",children:ca.bikeName})]})]},ca.id))})}),K.jsxs("div",{className:"bikes-footer",children:[K.jsxs("div",{className:"pagination",children:[K.jsx("button",{onClick:()=>$e(ca=>ca-1),disabled:Se===0,className:"page-btn",children:K.jsx(sde,{})}),K.jsxs("span",{children:["Page ",Se+1]}),K.jsx("button",{onClick:()=>$e(ca=>ca+1),disabled:(Se+1)*6>=(ie?tt.length:Me?He.length:tt.length),className:"page-btn",children:K.jsx(ode,{})})]}),(ie||Me)&&K.jsxs("div",{className:"action-buttons",children:[K.jsx("button",{className:"save-btn",onClick:ie?Rn:wa,disabled:be||(ie?Le.length===0:Ze.length===0),children:be?"Saving...":"Save Changes"}),K.jsx("button",{className:"discard-btn",onClick:()=>{ge(!1),ze(!1),Ie([]),ke([]),Gt(null)},children:"Discard Changes"})]})]})]})]})]})})};return K.jsxs("div",{className:"map-container",children:[K.jsx("div",{id:"map",className:"map-element"}),n&&K.jsx(_e,{station:l,onClose:()=>w(!1)})]})};Zf.accessToken="pk.eyJ1IjoiY29jb2xlbW9uMTIiLCJhIjoiY204YTBoMnZpMHplbzJzcTR3dDFmOXc4NiJ9.NqqEHSBe8cn9Gy9knbUqew";const eVe=({onSelectLocation:t,isSelectingLocation:e})=>{const a=nt.useRef(null),r=nt.useRef(null),s=nt.useRef(null);return nt.useEffect(()=>{if(!r.current)return r.current=new Zf.Map({container:a.current,style:"mapbox://styles/mapbox/streets-v11",center:[120.9882053036898,14.693467677226026],zoom:12}),()=>{r.current&&(r.current.remove(),r.current=null)}},[]),nt.useEffect(()=>{if(!r.current)return;const l=h=>{e&&(s.current&&s.current.remove(),s.current=new Zf.Marker({draggable:!0,color:"#FF0000",scale:.8}).setLngLat([h.lngLat.lng,h.lngLat.lat]).addTo(r.current),s.current.on("dragend",()=>{const n=s.current.getLngLat();t([n.lat,n.lng])}),t([h.lngLat.lat,h.lngLat.lng]))};return e?(r.current.getCanvas().style.cursor="crosshair",r.current.on("click",l)):(r.current.getCanvas().style.cursor="",r.current.off("click",l)),()=>{r.current&&(r.current.off("click",l),r.current.getCanvas().style.cursor=""),s.current&&(s.current.remove(),s.current=null)}},[e,t]),K.jsx("div",{ref:a,className:"add-station-map"})},tVe=()=>{const[t,e]=nt.useState([]),[a,r]=nt.useState([]),[s,l]=nt.useState(!1),[h,n]=nt.useState(!1),[w,T]=nt.useState(null),[P,z]=nt.useState(!1),[k,U]=nt.useState(null),[Z,H]=nt.useState(""),[q,J]=nt.useState(""),[re,ce]=nt.useState(""),[ye,he]=nt.useState(""),[_e,me]=nt.useState([]),[Re,be]=nt.useState([]),[De,ie]=nt.useState([]),[ge,Me]=nt.useState([]),[ze,Le]=nt.useState(!1),[Ie,Ze]=nt.useState(!1),[ke,tt]=nt.useState(!1),[Ue,He]=nt.useState(!1),[Ce,Se]=nt.useState([]),[$e,ht]=nt.useState([]),[ft,ut]=nt.useState(!1),[Rt,We]=nt.useState(!1),[Ae,qt]=nt.useState("");nt.useEffect(()=>{Gt(),Aa(),It(),ta()},[]);const Gt=async()=>{try{const Wa=(await Xi(Zn(zr,"admins"))).docs.map(ca=>({id:ca.id,...ca.data()}));ht(Wa)}catch(wa){console.error("Error fetching all admins:",wa)}},Aa=async()=>{try{const ca=(await Xi(Zn(zr,"admins"))).docs.map(Qa=>({id:Qa.id,...Qa.data()})).filter(Qa=>!Qa.stationAssignedTo);Se(ca)}catch(wa){console.error("Error fetching unassigned admins:",wa)}},It=async()=>{try{const wa=await Xi(Zn(zr,"admins")),Wa={};wa.docs.forEach(mn=>{const en=mn.data();Wa[mn.id]=en.name});const Qa=(await Xi(Zn(zr,"stations"))).docs.map(mn=>{const en=mn.data(),Er=en.tanodAssigned||[],As=Array.isArray(Er)?Er:[Er];return{id:mn.id,...en,tanodAssignedID:As,tanodAssignedName:As.map(Bi=>Wa[Bi]||"Unknown").join(", ")||"Not Assigned"}}),qn=(await Xi(Zn(zr,"bikes"))).docs.map(mn=>({id:mn.id,...mn.data()})),Mn=Qa.map(mn=>{const en=qn.filter(As=>As.stationAssigned===mn.id&&As.bikeCategory==="Regular Bicycle"&&As.bikeStatus==="Available"&&As.isAvailable===!0).length,Er=qn.filter(As=>As.stationAssigned===mn.id&&As.bikeCategory==="Electric Bicycle"&&As.bikeStatus==="Available"&&As.isAvailable===!0).length;return{...mn,totalRegularBikes:en,totalElectricBikes:Er}});e(Mn)}catch(wa){console.error("Error fetching stations:",wa)}},ta=async()=>{const Wa=(await Xi(Zn(zr,"bikes"))).docs.map(Qa=>({id:Qa.id,...Qa.data()})),ca=Wa.filter(Qa=>!Qa.stationAssigned&&Qa.bikeStatus==="Available"&&Qa.isAvailable===!0);r(Wa),ie(ca.filter(Qa=>Qa.bikeCategory==="Regular Bicycle")),Me(ca.filter(Qa=>Qa.bikeCategory==="Electric Bicycle"))},vt=async wa=>{if(window.confirm("Are you sure you want to delete this station?"))try{const Wa=Is(zr,"stations",wa),Qa=(await Op(Wa)).data(),gr=(Qa==null?void 0:Qa.tanodAssigned)||[],Mn=(Array.isArray(gr)?gr:[gr]).map(mn=>hd(Is(zr,"admins",mn),{stationAssignedTo:null}));await Promise.all(Mn),await U3(Wa)}catch(Wa){console.error("Error deleting station:",Wa)}},or=async wa=>{T(wa),H(wa.stationName||""),J(wa.stationAddress||""),he(wa.coordinates||""),ce(wa.tanodAssignedID||""),n(!0);const ca=(await Xi(Zn(zr,"bikes"))).docs.map(Qa=>({id:Qa.id,...Qa.data()}));me(ca.filter(Qa=>Qa.bikeCategory==="Regular Bicycle"&&Qa.stationAssigned===wa.id).map(Qa=>Qa.id)),be(ca.filter(Qa=>Qa.bikeCategory==="Electric Bicycle"&&Qa.stationAssigned===wa.id).map(Qa=>Qa.id)),ta()},Na=()=>{T(null),H(""),J(""),he(""),ce(""),me([]),be([]),ut(!1),l(!0)},za=async(wa,Wa)=>{try{const ca=await Zl.get(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${wa}&lon=${Wa}`);J(ca.data.display_name||"Unknown Address")}catch(ca){console.error("Error fetching address:",ca)}},er=wa=>{const Wa=wa.target.value;he(Wa);const[ca,Qa]=Wa.split(",");ca&&Qa&&za(ca.trim(),Qa.trim())},dr=wa=>{he(wa.join(",")),za(wa[0],wa[1])},cr=async wa=>{if(wa.preventDefault(),!re){alert("Please select an admin (or allow none).");return}try{const Wa=typeof ye=="string"?ye.split(",").map(gr=>parseFloat(gr.trim())):[],ca=Array.isArray(re)?re:[re];let Qa;if(w)Qa=Is(zr,"stations",w.id),await hd(Qa,{stationName:Z,stationAddress:q,coordinates:Wa,tanodAssigned:ca}),qt("Station updated successfully!"),n(!1);else{const gr={stationName:Z,stationAddress:q,coordinates:Wa,tanodAssigned:ca};Qa=await hv(Zn(zr,"stations"),gr),qt("Station added successfully!"),l(!1)}if(Qa&&Qa.id){const gr=ca.map(qn=>hd(Is(zr,"admins",qn),{stationAssignedTo:Qa.id}));await Promise.all(gr),await Pr(Qa.id),Aa(),It(),We(!0),setTimeout(()=>{We(!1)},2e3)}}catch(Wa){console.error("Error saving station:",Wa)}},Pr=async wa=>{try{for(const Wa of _e){const ca=Is(zr,"bikes",Wa);await hd(ca,{stationAssigned:wa})}for(const Wa of Re){const ca=Is(zr,"bikes",Wa);await hd(ca,{stationAssigned:wa})}console.log("Bikes assigned successfully:",wa)}catch(Wa){console.error("Error assigning bikes:",Wa)}},ka=wa=>{wa==="Regular Bicycle"?Ze(!0):Le(!0)},jr=wa=>{wa==="Regular Bicycle"?(tt(!0),He(!1)):(He(!0),tt(!1))},pn=async(wa,Wa)=>{try{const ca=Is(zr,"bikes",wa);await hd(ca,{stationAssigned:null}),Wa==="Regular Bicycle"?me(Qa=>Qa.filter(gr=>gr!==wa)):be(Qa=>Qa.filter(gr=>gr!==wa)),ta(),console.log(`Bike ${wa} unassigned successfully.`)}catch(ca){console.error("Error unassigning bike:",ca)}},Dn=({station:wa,onClose:Wa})=>K.jsx("div",{className:"modal-overlay",onClick:Wa,children:K.jsxs("div",{className:"modal-content",onClick:ca=>ca.stopPropagation(),children:[K.jsx("h2",{children:wa.stationName}),K.jsxs("p",{children:[K.jsx("strong",{children:"Address:"})," ",wa.stationAddress]}),K.jsxs("p",{children:[K.jsx("strong",{children:"Coordinates:"})," ",wa.coordinates]}),K.jsxs("p",{children:[K.jsx("strong",{children:"Tanod Assigned:"})," ",wa.tanodAssignedName||"Not Assigned"]}),K.jsxs("p",{children:[K.jsx("strong",{children:"Total Bikes:"})," ",wa.totalRegularBikes||0," ","(Regular), ",wa.totalElectricBikes||0," (Electric)"]}),K.jsx("button",{className:"cancel-btn",onClick:Wa,children:"Close"})]})}),Rn=({message:wa})=>K.jsx("div",{className:"success-overlay",children:K.jsxs("div",{className:"success-content",children:[K.jsx("div",{className:"success-icon",children:""}),K.jsx("p",{children:wa})]})});return K.jsxs(M0,{children:[K.jsx(Yg,{title:"Station Management"}),K.jsxs("div",{className:"station-management-container",children:[K.jsxs("div",{className:"station-management-header",children:[K.jsx("h2",{children:"Station Overview"}),K.jsxs("button",{className:"add-station-btn",onClick:Na,children:[K.jsx(k3,{})," Add New Station"]})]}),K.jsxs("div",{className:"station-map-section",children:[K.jsx("h2",{children:"Station Locations"}),K.jsx("div",{className:"map-container",children:K.jsx(QNe,{onEditStation:wa=>{or(wa)}})})]}),K.jsx("div",{className:"station-list",children:K.jsxs("table",{children:[K.jsx("thead",{children:K.jsxs("tr",{children:[K.jsx("th",{children:"Station Name"}),K.jsx("th",{children:"Station Address"}),K.jsx("th",{children:"Total Bikes"}),K.jsx("th",{children:"Total E-Bikes"}),K.jsx("th",{children:"Tanod Assigned"}),K.jsx("th",{children:"Action"})]})}),K.jsx("tbody",{children:t.length>0?t.map(wa=>K.jsxs("tr",{children:[K.jsx("td",{children:K.jsx("strong",{children:wa.stationName})}),K.jsx("td",{children:K.jsx("span",{onClick:()=>{U(wa),z(!0)},style:{cursor:"pointer",color:"#00796b"},children:wa.stationAddress})}),K.jsx("td",{children:wa.totalRegularBikes||0}),K.jsx("td",{children:wa.totalElectricBikes||0}),K.jsx("td",{children:K.jsx("strong",{children:wa.tanodAssignedName||"Not Assigned"})}),K.jsx("td",{children:K.jsx("button",{className:"delete-btn",onClick:()=>vt(wa.id),children:K.jsx(nW,{})})})]},wa.id)):K.jsx("tr",{children:K.jsx("td",{colSpan:"6",style:{textAlign:"center",padding:"10px"},children:"No stations available"})})})]})}),P&&k&&K.jsx(Dn,{station:k,onClose:()=>z(!1)}),s&&K.jsx("div",{className:"modal-overlay",children:K.jsxs("div",{className:"modal-content large",children:[K.jsxs("div",{className:"modal-header",children:[K.jsx("h2",{children:"Add Station"}),K.jsx("button",{className:"close-modal-btn",onClick:()=>{ut(!1),l(!1)},children:K.jsx(rW,{})})]}),K.jsxs("form",{onSubmit:cr,children:[K.jsx("label",{children:"Station Name:"}),K.jsx("input",{type:"text",value:Z,onChange:wa=>H(wa.target.value),required:!0}),K.jsx("label",{children:"Location:"}),K.jsxs("div",{className:"location-selection",children:[K.jsxs("div",{className:"coordinates-input",children:[K.jsx("input",{type:"text",value:ye,onChange:er,placeholder:"Click on map or enter lat,long",readOnly:!0}),K.jsx("button",{type:"button",className:`select-location-btn ${ft?"active":""}`,onClick:()=>ut(!ft),children:ft?"Done Selecting":"Select on Map"})]}),K.jsx("div",{className:"map-container",children:K.jsx(eVe,{onSelectLocation:dr,isSelectingLocation:ft})})]}),K.jsx("label",{children:"Address:"}),K.jsx("textarea",{value:q,readOnly:!0}),K.jsx("label",{children:"Tanod Assigned:"}),K.jsxs("select",{value:re,onChange:wa=>ce(wa.target.value),required:!0,children:[K.jsx("option",{value:"",children:"Select Tanod"}),Ce.map(wa=>K.jsxs("option",{value:wa.id,children:[wa.name," (",wa.email,")"]},wa.id))]}),K.jsx("label",{children:"Add Bikes:"}),K.jsxs("div",{className:"bike-selection",children:[K.jsx("button",{type:"button",onClick:()=>ka("Regular Bicycle"),children:""}),K.jsx("input",{type:"text",value:`${_e.length} Selected`,readOnly:!0})]}),K.jsx("label",{children:"Add E-Bikes:"}),K.jsxs("div",{className:"bike-selection",children:[K.jsx("button",{type:"button",onClick:()=>ka("Electric Bicycle"),children:""}),K.jsx("input",{type:"text",value:`${Re.length} Selected`,readOnly:!0})]}),K.jsxs("div",{className:"modal-buttons",children:[K.jsx("button",{type:"submit",className:"save-btn",children:"Save"}),K.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>l(!1),children:"Cancel"})]})]})]})}),Ie&&K.jsx("div",{className:"add-bike-modal-overlay",children:K.jsxs("div",{className:"add-bike-modal",children:[K.jsx("h2",{children:"Select Regular Bikes"}),K.jsx("div",{className:"bike-list-container",children:De.length>0?De.map(wa=>K.jsxs("div",{className:"bike-item",children:[K.jsxs("label",{children:[wa.bikeName," (",wa.bikeId,")"]}),K.jsx("input",{type:"checkbox",checked:_e.includes(wa.id),onChange:()=>{me(Wa=>Wa.includes(wa.id)?Wa.filter(ca=>ca!==wa.id):[...Wa,wa.id])}})]},wa.id)):K.jsx("p",{children:"No unassigned bikes available"})}),K.jsx("button",{className:"save-btn",onClick:()=>Ze(!1),children:"Done"})]})}),ze&&K.jsx("div",{className:"add-bike-modal-overlay",children:K.jsxs("div",{className:"add-bike-modal",children:[K.jsx("h2",{children:"Select Electric Bikes"}),K.jsx("div",{className:"bike-list-container",children:ge.length>0?ge.map(wa=>K.jsxs("div",{className:"bike-item",children:[K.jsxs("label",{children:[wa.bikeName," (",wa.bikeId,")"]}),K.jsx("input",{type:"checkbox",checked:Re.includes(wa.id),onChange:()=>{be(Wa=>Wa.includes(wa.id)?Wa.filter(ca=>ca!==wa.id):[...Wa,wa.id])}})]},wa.id)):K.jsx("p",{children:"No unassigned e-bikes available"})}),K.jsx("button",{className:"save-btn",onClick:()=>Le(!1),children:"Done"})]})}),ke&&K.jsx("div",{className:"assigned-bike-overlay",children:K.jsxs("div",{className:"assigned-bike-modal",children:[K.jsx("h2",{children:"Remove Assigned Regular Bikes"}),K.jsx("div",{className:"bike-list-container",children:_e.length>0?_e.map(wa=>{const Wa=a.find(ca=>ca.id===wa);return K.jsxs("div",{className:"bike-item",children:[K.jsxs("label",{children:[Wa==null?void 0:Wa.bikeName," (",Wa==null?void 0:Wa.bikeId,")"]}),K.jsx("button",{className:"remove-btn",onClick:()=>pn(wa,"Regular Bicycle"),children:" Remove"})]},wa)}):K.jsx("p",{children:"No assigned bikes."})}),K.jsx("button",{className:"save-btn",onClick:()=>tt(!1),children:"Done"})]})}),Ue&&K.jsx("div",{className:"assigned-bike-overlay",children:K.jsxs("div",{className:"assigned-bike-modal",children:[K.jsx("h2",{children:"Remove Assigned Electric Bikes"}),K.jsx("div",{className:"bike-list-container",children:Re.length>0?Re.map(wa=>{const Wa=a.find(ca=>ca.id===wa);return K.jsxs("div",{className:"bike-item",children:[K.jsxs("label",{children:[Wa==null?void 0:Wa.bikeName," (",Wa==null?void 0:Wa.bikeId,")"]}),K.jsx("button",{className:"remove-btn",onClick:()=>pn(wa,"Electric Bicycle"),children:" Remove"})]},wa)}):K.jsx("p",{children:"No assigned e-bikes."})}),K.jsx("button",{className:"save-btn",onClick:()=>He(!1),children:"Done"})]})}),h&&w&&K.jsx("div",{className:"modal-overlay",children:K.jsxs("div",{className:"modal-content",children:[K.jsx("h2",{children:"Edit Station"}),K.jsxs("form",{onSubmit:cr,children:[K.jsx("label",{children:"Station Name:"}),K.jsx("input",{type:"text",value:Z,onChange:wa=>H(wa.target.value),required:!0}),K.jsx("label",{children:"Coordinates:"}),K.jsx("input",{type:"text",value:ye,onChange:er,placeholder:"Enter lat,long"}),K.jsx("label",{children:"Address:"}),K.jsx("textarea",{value:q,readOnly:!0}),K.jsx("label",{children:"Tanod Assigned:"}),(()=>{const wa=w.tanodAssignedID,Wa=$e.find(Qa=>Qa.id===wa);let ca=[...Ce];return Wa&&!ca.some(Qa=>Qa.id===Wa.id)&&ca.unshift(Wa),K.jsxs("select",{value:re,onChange:Qa=>ce(Qa.target.value),required:!0,children:[K.jsx("option",{value:"",children:"Select Tanod"}),ca.map(Qa=>K.jsxs("option",{value:Qa.id,children:[Qa.name," (",Qa.email,")"]},Qa.id))]})})(),K.jsx("label",{children:"Assigned Bikes:"}),K.jsxs("div",{className:"bike-selection",children:[K.jsx("button",{type:"button",onClick:()=>jr("Regular Bicycle"),children:""}),K.jsx("input",{type:"text",value:`${_e.length} Assigned`,readOnly:!0}),K.jsx("button",{type:"button",onClick:()=>ka("Regular Bicycle"),children:""})]}),K.jsx("label",{children:"Assigned E-Bikes:"}),K.jsxs("div",{className:"bike-selection",children:[K.jsx("button",{type:"button",onClick:()=>jr("Electric Bicycle"),children:""}),K.jsx("input",{type:"text",value:`${Re.length} Assigned`,readOnly:!0}),K.jsx("button",{type:"button",onClick:()=>ka("Electric Bicycle"),children:""})]}),K.jsxs("div",{className:"modal-buttons",children:[K.jsx("button",{type:"submit",className:"save-btn",children:"Save"}),K.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>n(!1),children:"Cancel"})]})]})]})}),Rt&&K.jsx(Rn,{message:Ae})]})]})},aVe=()=>{const[t,e]=nt.useState([]),[a,r]=nt.useState(""),[s,l]=nt.useState(""),[h,n]=nt.useState(""),[w,T]=nt.useState(null),[P,z]=nt.useState(""),[k,U]=nt.useState(!1),[Z,H]=nt.useState("station_manager"),[q,J]=nt.useState(!1),[re,ce]=nt.useState(null),[ye,he]=nt.useState(null),[_e,me]=nt.useState({adminId:null,role:""}),[Re,be]=nt.useState([]),[De,ie]=nt.useState({total:0,active:0,inactive:0,onBreak:0}),[ge,Me]=nt.useState(null),ze={ACTIVE:"Active",INACTIVE:"Inactive",ON_BREAK:"On Break"},Le={Active:"#4CAF50",Inactive:"#F44336","On Break":"#FFC107"},Ie=ut=>{const Rt={total:ut.length,active:0,inactive:0,onBreak:0};return ut.forEach(We=>{switch(We.status){case ze.ACTIVE:Rt.active++;break;case ze.INACTIVE:Rt.inactive++;break;case ze.ON_BREAK:Rt.onBreak++;break;default:Rt.inactive++;break}}),Rt};nt.useEffect(()=>{const ut=async()=>{const We=await Xi(Zn(zr,"stations")),Ae={};return We.docs.forEach(qt=>{Ae[qt.id]={stationName:qt.data().stationName,stationAddress:qt.data().stationAddress}}),be(Ae),Ae},Rt=We=>{const Ae=Zn(zr,"admins");return uy(Ae,qt=>{const Gt=qt.docs.map(Aa=>({id:Aa.id,...Aa.data(),stationDetails:Aa.data().stationAssignedTo?We[Aa.data().stationAssignedTo]:null}));e(Gt),ie(Ie(Gt))})};ut().then(We=>{const Ae=Rt(We);return()=>Ae()})},[]);const Ze=async(ut,Rt)=>{try{const We=Is(zr,"admins",ut);await hd(We,{roles:[Rt],updatedAt:new Date}),alert("Role updated successfully!")}catch(We){console.error("Error updating role:",We),alert("Failed to update admin role. Please try again.")}},ke=(ut,Rt)=>{me({adminId:ut,role:Rt||"Station Manager"})},tt=async()=>{if(!_e.adminId||!_e.role){alert("Please select a role");return}try{await Ze(_e.adminId,_e.role),me({adminId:null,role:""})}catch(ut){console.error("Error saving role:",ut),alert("Failed to save role changes")}},Ue=ut=>new Promise(Rt=>{const We=new FileReader;We.readAsDataURL(ut),We.onload=Ae=>{const qt=new Image;qt.src=Ae.target.result,qt.onload=()=>{const Gt=document.createElement("canvas"),Aa=Gt.getContext("2d");let It=qt.width,ta=qt.height;const vt=800;It>ta&&It>vt?(ta=ta*vt/It,It=vt):ta>vt&&(It=It*vt/ta,ta=vt),Gt.width=It,Gt.height=ta,Aa.drawImage(qt,0,0,It,ta),Gt.toBlob(or=>{Rt(or)},"image/jpeg",.6)}}}),He=async ut=>{if(!ut)return null;try{const Rt=await Ue(ut),We=`admin_profiles/${Date.now()}_${ut.name}`,Ae=aQ(),qt=tQ(Ae,We);return await QJ(qt,Rt),await eQ(qt)}catch(Rt){return console.error("Error uploading image:",Rt),null}},Ce=async ut=>{if(ut.preventDefault(),!a||!s||!h){alert("Please fill in all fields.");return}try{const Rt=zH(),Ae=(await Fie(Rt,s,h)).user;let qt="";if(w&&(qt=await He(w),!qt)){alert("Failed to upload profile image.");return}const Gt={uid:Ae.uid,name:a,email:s,roles:[Z],profilePhoto:qt||"",status:"Active",stationAssignedTo:null,createdAt:new Date,updatedAt:new Date};await hv(Zn(zr,"admins"),Gt),alert("Admin added successfully!"),r(""),l(""),n(""),T(null),z(""),U(!1)}catch(Rt){console.error("Error creating admin:",Rt),alert(Rt.message||"There was an error creating the admin. Please try again.")}},Se=async ut=>{if(window.confirm("Are you sure you want to delete this admin?"))try{await U3(Is(zr,"admins",ut))}catch(Rt){console.error("Error deleting admin:",Rt)}},$e=ut=>{ce(ut),J(!0),he(null),H(ut.roles[0])},ht=async ut=>{if(ut.preventDefault(),!ye){alert("Please select a new profile image.");return}const Rt=await He(ye);if(!Rt){alert("Failed to upload new profile image.");return}try{const We=Is(zr,"admins",re.id);await hd(We,{profilePhoto:Rt}),alert("Profile photo updated successfully!"),J(!1),ce(null),he(null)}catch(We){console.error("Error updating admin profile photo:",We),alert("Failed to update admin profile photo. Please try again.")}},ft=()=>{J(!1),ce(null),he(null)};return K.jsxs(M0,{children:[K.jsx(Yg,{title:"Admin Management"}),K.jsxs("div",{className:"admin-management-container",children:[K.jsxs("div",{className:"stats-container",children:[K.jsxs("div",{className:"stat-card",children:[K.jsx("h3",{children:"Total Admins"}),K.jsx("p",{children:De.total})]}),K.jsxs("div",{className:"stat-card active",children:[K.jsx("h3",{children:"Active"}),K.jsx("p",{children:De.active})]}),K.jsxs("div",{className:"stat-card break",children:[K.jsx("h3",{children:"On Break"}),K.jsx("p",{children:De.onBreak})]}),K.jsxs("div",{className:"stat-card inactive",children:[K.jsx("h3",{children:"Inactive"}),K.jsx("p",{children:De.inactive})]})]}),K.jsxs("div",{className:"admin-management-header",children:[K.jsx("h2",{children:"Admin Creation"}),K.jsxs("button",{className:"btn-create-admin",onClick:()=>U(!0),children:[K.jsx(k3,{})," Create New Admin Account"]})]}),K.jsx("div",{className:"admin-gallery",children:t.length>0?t.map(ut=>{var Rt,We;return K.jsxs("div",{className:"admin-card",children:[K.jsxs("div",{className:"edit-container",children:[K.jsx("button",{className:"edit-toggle",onClick:()=>Me(ge===ut.id?null:ut.id),children:K.jsx(dde,{})}),ge===ut.id&&K.jsxs("div",{className:"edit-options",children:[K.jsxs("button",{onClick:()=>{$e(ut),Me(null)},children:[K.jsx(ide,{})," Change Photo"]}),K.jsxs("button",{onClick:()=>{var Ae;ke(ut.id,(Ae=ut.roles)==null?void 0:Ae[0]),Me(null)},children:[K.jsx(hde,{})," Change Role"]}),K.jsxs("button",{onClick:()=>{Se(ut.id),Me(null)},children:[K.jsx(nW,{})," Delete Admin"]})]})]}),K.jsxs("div",{className:"admin-photo",children:[K.jsxs("div",{className:"status-dot-container",children:[K.jsx("span",{className:`status-dot ${(Rt=ut.status)==null?void 0:Rt.toLowerCase()}`,style:{backgroundColor:Le[ut.status]||Le.Inactive}}),K.jsxs("div",{className:"status-tooltip",children:[ut.status||"Inactive","  Last updated:"," ",ut.statusUpdatedAt?Ui(ut.statusUpdatedAt.toDate()).format("MMM D, HH:mm"):"Not available"]})]}),ut.profilePhoto?K.jsx("img",{src:ut.profilePhoto,alt:"Admin"}):K.jsx("div",{className:"placeholder",children:"No Image"})]}),K.jsxs("div",{className:"admin-info",children:[K.jsx("h4",{children:ut.name}),K.jsx("p",{children:ut.email}),K.jsx("div",{className:"role-badge",children:((We=ut.roles)==null?void 0:We[0])||"No Role"}),K.jsx("div",{className:"station-info",children:ut.stationDetails?K.jsxs("span",{className:"station-name",children:[" ",ut.stationDetails.stationName]}):K.jsx("span",{className:"no-station",children:"No Station Assigned"})})]})]},ut.id)}):K.jsx("p",{children:"No admins found"})}),k&&K.jsx("div",{className:"modal-overlay",children:K.jsxs("div",{className:"modal-content",children:[K.jsx("h3",{children:"Create Admin Account"}),K.jsxs("form",{onSubmit:Ce,children:[K.jsxs("div",{className:"form-group",children:[K.jsx("label",{children:"Name:"}),K.jsx("input",{type:"text",value:a,onChange:ut=>r(ut.target.value),required:!0})]}),K.jsxs("div",{className:"form-group",children:[K.jsx("label",{children:"Role:"}),K.jsxs("select",{value:Z,onChange:ut=>H(ut.target.value),children:[K.jsx("option",{value:"Station Manager",children:"Station Manager"}),K.jsx("option",{value:"User Support",children:"User Support"})]})]}),K.jsxs("div",{className:"form-group",children:[K.jsx("label",{children:"Email:"}),K.jsx("input",{type:"email",value:s,onChange:ut=>l(ut.target.value),required:!0})]}),K.jsxs("div",{className:"form-group",children:[K.jsx("label",{children:"Password:"}),K.jsx("input",{type:"password",value:h,onChange:ut=>n(ut.target.value),required:!0})]}),K.jsxs("div",{className:"form-group",children:[K.jsx("label",{children:"Profile Picture:"}),K.jsx("input",{type:"file",accept:"image/*",onChange:ut=>T(ut.target.files[0])})]}),w&&K.jsx("div",{className:"preview-image",children:K.jsx("img",{src:URL.createObjectURL(w),alt:"Preview"})}),K.jsx("button",{type:"submit",className:"btn-create",children:"Create"}),K.jsx("button",{type:"button",className:"btn-cancel",onClick:()=>U(!1),children:"Cancel"})]})]})}),q&&re&&K.jsx("div",{className:"modal-overlay",children:K.jsxs("div",{className:"modal-content",children:[K.jsxs("h3",{children:["Edit Profile Photo for ",re.name]}),K.jsxs("form",{onSubmit:ht,children:[K.jsxs("div",{className:"form-group",children:[K.jsx("label",{children:"New Profile Picture:"}),K.jsx("input",{type:"file",accept:"image/*",onChange:ut=>he(ut.target.files[0])})]}),ye&&K.jsx("div",{className:"preview-image",children:K.jsx("img",{src:URL.createObjectURL(ye),alt:"Preview"})}),K.jsx("button",{type:"submit",className:"btn-update",children:"Update Photo"}),K.jsx("button",{type:"button",className:"btn-cancel",onClick:ft,children:"Cancel"})]})]})}),_e.adminId&&K.jsx("div",{className:"modal-overlay",children:K.jsxs("div",{className:"modal-content",children:[K.jsx("h3",{children:"Change Admin Role"}),K.jsxs("form",{onSubmit:ut=>{ut.preventDefault(),tt()},children:[K.jsxs("div",{className:"form-group",children:[K.jsx("label",{children:"Select Role:"}),K.jsxs("select",{value:_e.role,onChange:ut=>me({..._e,role:ut.target.value}),children:[K.jsx("option",{value:"Station Manager",children:"Station Manager"}),K.jsx("option",{value:"User Support",children:"User Support"})]})]}),K.jsxs("div",{className:"button-group",children:[K.jsx("button",{type:"submit",className:"btn-update",children:"Save Role"}),K.jsx("button",{type:"button",className:"btn-cancel",onClick:()=>me({adminId:null,role:""}),children:"Cancel"})]})]})]})})]})]})},j5={RegularBicycle:"Regular Bicycle",ElectricBicycle:"Electric Bicycle"},rVe=()=>{const[t,e]=nt.useState([]),[a,r]=nt.useState(!0),[s,l]=nt.useState(null),[h,n]=nt.useState(""),[w,T]=nt.useState([]),[P,z]=nt.useState([]),[k,U]=nt.useState(!1),[Z,H]=nt.useState("daily"),[q,J]=nt.useState({daily:{revenue:0,rides:0},weekly:{revenue:0,rides:0},monthly:{revenue:0,rides:0},total:{revenue:0,rides:0},all:{revenue:0,rides:0}}),[re,ce]=nt.useState({key:"revenue",direction:"desc"}),ye=ie=>{ce({key:ie,direction:re.key===ie&&re.direction==="asc"?"desc":"asc"})};nt.useEffect(()=>{he(),_e(),me()},[]),nt.useEffect(()=>{me()},[Z]);const he=async()=>{try{const ge=(await Xi(Zn(zr,"rentalRates"))).docs.map(Me=>({id:Me.id,...Me.data()}));e(ge)}catch(ie){console.error("Error fetching rental rates:",ie)}finally{r(!1)}},_e=async()=>{try{const ie=Zn(zr,"rateHistory"),ge=L_(ie,$K("timestamp","desc")),ze=(await Xi(ge)).docs.map(Le=>({id:Le.id,...Le.data()}));T(ze)}catch(ie){console.error("Error fetching rate history:",ie)}},me=async()=>{try{const ie=Zn(zr,"stations"),ge=await Xi(ie),Me=new Map;ge.forEach(Ue=>{const He=Ue.data();Me.set(Ue.id,{id:Ue.id,stationName:He.stationName,revenue:0,rides:0})});const ze=Zn(zr,"ride_history"),Le=await Xi(ze),Ie=Le.docs.length,Ze=Ui(),ke={daily:{revenue:0,rides:0},weekly:{revenue:0,rides:0},monthly:{revenue:0,rides:0},total:{revenue:0,rides:0}};Le.docs.forEach(Ue=>{const He=Ue.data(),Ce=Ui(He.rideEndedAt.toDate()),Se=Number(He.amountPaid||0);if((Z==="all"?!0:Z==="daily"?Ce.isSame(Ze,"day"):Z==="weekly"?Ce.isAfter(Ze.subtract(1,"week")):Z==="monthly"?Ce.isAfter(Ze.subtract(1,"month")):!0)&&He.startStation){const ht=Me.get(He.startStation);ht&&(ht.rides+=1,ht.revenue+=Se)}ke.total.rides+=1,ke.total.revenue+=Se,Ce.isSame(Ze,"day")&&(ke.daily.rides+=1,ke.daily.revenue+=Se),Ce.isAfter(Ze.subtract(1,"week"))&&(ke.weekly.rides+=1,ke.weekly.revenue+=Se),Ce.isAfter(Ze.subtract(1,"month"))&&(ke.monthly.rides+=1,ke.monthly.revenue+=Se)}),J({daily:ke.daily,weekly:ke.weekly,monthly:ke.monthly,total:ke.total,all:ke.total});const tt=Array.from(Me.values()).sort((Ue,He)=>He.revenue-Ue.revenue).map(Ue=>({...Ue,totalSystemRides:Ie}));z(tt)}catch(ie){console.error("Error fetching station revenue:",ie)}},Re=ie=>{var ge;l(ie),n(((ge=ie.pricePerMinute)==null?void 0:ge.toString())||"")},be=()=>{l(null),n("")},De=async()=>{if(!s)return;const ie=parseFloat(h);if(isNaN(ie)||ie<=0){alert("Please enter a valid number greater than 0 for the price.");return}try{const ge=e1.currentUser;if(!ge)throw new Error("No user is signed in");const Me=Is(zr,"users",ge.uid),ze=await Op(Me),Le=ze.exists()?ze.data().name:"Unknown User",Ie=Is(zr,"rentalRates",s.id);await hd(Ie,{pricePerMinute:ie}),await hv(Zn(zr,"rateHistory"),{bikeType:s.id,oldPrice:s.pricePerMinute,newPrice:ie,timestamp:new Date,updatedBy:Le});const Ze=t.map(ke=>ke.id===s.id?{...ke,pricePerMinute:ie}:ke);e(Ze),await _e(),be()}catch(ge){console.error("Error updating rate:",ge),alert("Failed to update the rate. See console for details.")}};return K.jsxs(M0,{children:[K.jsx(Yg,{title:"Bike Management"}),K.jsxs("div",{className:"rate-management-container",children:[K.jsx("h2",{children:"Rental Rate Management"}),a?K.jsx("p",{children:"Loading..."}):K.jsx(K.Fragment,{children:K.jsx("div",{className:"table-container",children:K.jsxs("table",{className:"rate-table",children:[K.jsx("thead",{children:K.jsxs("tr",{children:[K.jsx("th",{children:"Bike Type"}),K.jsx("th",{children:"Price Per Minute ()"}),K.jsx("th",{children:"Actions"})]})}),K.jsx("tbody",{children:t.length>0?t.map(ie=>{var Me;const ge=j5[ie.id]||ie.id;return K.jsxs("tr",{children:[K.jsx("td",{children:ge}),K.jsx("td",{children:(Me=ie.pricePerMinute)==null?void 0:Me.toFixed(2)}),K.jsx("td",{children:K.jsxs("button",{className:"edit-btn",onClick:()=>Re(ie),children:[K.jsx(Qw,{})," Edit"]})})]},ie.id)}):K.jsx("tr",{children:K.jsx("td",{colSpan:"3",style:{textAlign:"center"},children:"No rental rates available."})})})]})})}),K.jsxs("div",{className:"revenue-section",children:[K.jsx("h3",{children:"Station Revenue"}),K.jsx("div",{className:"controls",children:K.jsxs("div",{className:"time-filter",children:[K.jsx("button",{className:`filter-btn ${Z==="all"?"active":""}`,onClick:()=>H("all"),children:"All Time"}),K.jsx("button",{className:`filter-btn ${Z==="daily"?"active":""}`,onClick:()=>H("daily"),children:"Today"}),K.jsx("button",{className:`filter-btn ${Z==="weekly"?"active":""}`,onClick:()=>H("weekly"),children:"This Week"}),K.jsx("button",{className:`filter-btn ${Z==="monthly"?"active":""}`,onClick:()=>H("monthly"),children:"This Month"})]})}),K.jsx("div",{className:"table-container",children:K.jsxs("table",{className:"revenue-table",children:[K.jsx("thead",{children:K.jsxs("tr",{children:[K.jsxs("th",{onClick:()=>ye("stationName"),children:["Station Name"," ",re.key==="stationName"&&(re.direction==="asc"?"":"")]}),K.jsxs("th",{onClick:()=>ye("revenue"),children:["Total Revenue ()"," ",re.key==="revenue"&&(re.direction==="asc"?"":"")]}),K.jsxs("th",{onClick:()=>ye("rides"),children:["Total Rides"," ",re.key==="rides"&&(re.direction==="asc"?"":"")]})]})}),K.jsxs("tbody",{children:[P.sort((ie,ge)=>re.key==="stationName"?re.direction==="asc"?ie.stationName.localeCompare(ge.stationName):ge.stationName.localeCompare(ie.stationName):re.direction==="asc"?ie[re.key]-ge[re.key]:ge[re.key]-ie[re.key]).map(ie=>K.jsxs("tr",{children:[K.jsx("td",{children:ie.stationName}),K.jsx("td",{children:ie.revenue.toFixed(2)}),K.jsx("td",{children:ie.rides})]},ie.id)),K.jsxs("tr",{className:"total-row",children:[K.jsx("td",{children:K.jsx("strong",{children:"Total"})}),K.jsx("td",{children:K.jsxs("strong",{children:["",q[Z].revenue.toFixed(2)]})}),K.jsx("td",{children:K.jsx("strong",{children:q[Z].rides})})]})]})]})})]}),K.jsxs("div",{className:"history-section",children:[K.jsxs("div",{className:"history-header",children:[K.jsx("h3",{children:"Rate History"}),K.jsxs("button",{className:"history-toggle-btn",onClick:()=>U(!k),children:[K.jsx(ude,{})," ",k?"Hide History":"Show History"]})]}),k&&K.jsx("div",{className:"table-container",children:K.jsxs("table",{className:"history-table",children:[K.jsx("thead",{children:K.jsxs("tr",{children:[K.jsx("th",{children:"Date"}),K.jsx("th",{children:"Bike Type"}),K.jsx("th",{children:"Old Price ()"}),K.jsx("th",{children:"New Price ()"}),K.jsx("th",{children:"Updated By"})]})}),K.jsx("tbody",{children:w.map(ie=>{var ge;return K.jsxs("tr",{children:[K.jsx("td",{children:Ui(ie.timestamp.toDate()).format("MMM D, YYYY HH:mm")}),K.jsx("td",{children:j5[ie.bikeType]||ie.bikeType}),K.jsx("td",{children:(ge=ie.oldPrice)==null?void 0:ge.toFixed(2)}),K.jsx("td",{children:ie.newPrice.toFixed(2)}),K.jsx("td",{children:ie.updatedBy})]},ie.id)})})]})})]}),s&&K.jsx("div",{className:"modal-overlay",onClick:be,children:K.jsxs("div",{className:"modal-content",onClick:ie=>ie.stopPropagation(),children:[K.jsx("h3",{children:"Edit Rental Rate"}),K.jsxs("p",{children:["Bike Type:"," ",K.jsx("strong",{children:j5[s.id]||s.id})]}),K.jsx("label",{children:"Price Per Minute ():"}),K.jsx("input",{type:"number",step:"0.01",value:h,onChange:ie=>n(ie.target.value)}),K.jsxs("div",{className:"modal-buttons",children:[K.jsx("button",{className:"save-btn",onClick:De,children:"Save"}),K.jsx("button",{className:"cancel-btn",onClick:be,children:"Cancel"})]})]})})]})]})};var ob={exports:{}},nVe=ob.exports,wq;function iVe(){return wq||(wq=1,function(t,e){(function(a,r){t.exports=r()})(nVe,function(){var a="week",r="year";return function(s,l,h){var n=l.prototype;n.week=function(w){if(w===void 0&&(w=null),w!==null)return this.add(7*(w-this.week()),"day");var T=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var P=h(this).startOf(r).add(1,r).date(T),z=h(this).endOf(a);if(P.isBefore(z))return 1}var k=h(this).startOf(r).date(T).startOf(a).subtract(1,"millisecond"),U=this.diff(k,a,!0);return U<0?h(this).startOf("week").week():Math.ceil(U)},n.weeks=function(w){return w===void 0&&(w=null),this.week(w)}}})}(ob)),ob.exports}var sVe=iVe();const oVe=Ji(sVe);var lb={exports:{}},lVe=lb.exports,Rq;function uVe(){return Rq||(Rq=1,function(t,e){(function(a,r){t.exports=r()})(lVe,function(){return function(a,r,s){r.prototype.isBetween=function(l,h,n,w){var T=s(l),P=s(h),z=(w=w||"()")[0]==="(",k=w[1]===")";return(z?this.isAfter(T,n):!this.isBefore(T,n))&&(k?this.isBefore(P,n):!this.isAfter(P,n))||(z?this.isBefore(T,n):!this.isAfter(T,n))&&(k?this.isAfter(P,n):!this.isBefore(P,n))}}})}(lb)),lb.exports}var cVe=uVe();const dVe=Ji(cVe);Ui.extend(oVe);Ui.extend(dVe);const hVe=({text:t})=>{const e=new RegExp("(?<![A-Za-z])(?<!-)(?<!\\/)\\b(\\d+\\.?\\d*)\\b(?![A-Za-z])","g"),a=t.split(e);return K.jsx("span",{children:a.map((r,s)=>e.test(r)?K.jsx("span",{className:"highlighted-number",children:r},s):K.jsx("span",{children:r},s))})},_g=({title:t,analysis:e})=>K.jsxs("div",{className:"analysis-card",children:[K.jsx("h3",{children:t}),K.jsx("p",{children:K.jsx(hVe,{text:e})})]}),fVe=()=>{var me,Re,be,De;const[t,e]=nt.useState([]),[a,r]=nt.useState({calories:[],distance:[],duration:[],carbonSaved:[]}),[s,l]=nt.useState([]),[h,n]=nt.useState([]),[w,T]=nt.useState("monthly"),[P,z]=nt.useState([]),[k,U]=nt.useState([]),Z=[{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"monthly",label:"Monthly"}],H=["#009C8C","#4CAF50","#2196F3","#FFA726","#FF5722","#9C27B0","#673AB7","#3F51B5","#00BCD4","#795548"],q=(ie,ge,Me)=>{const ze=Ui(),Le=new Map;return ge.filter(Ze=>{const ke=Ui(Ze.rideEndedAt);switch(Me){case"daily":return ke.isSame(ze,"day");case"weekly":return ke.isAfter(ze.subtract(1,"week"));case"monthly":return ke.isAfter(ze.subtract(1,"month"));default:return!0}}).forEach(Ze=>{Ze.startStation&&Le.set(Ze.startStation,(Le.get(Ze.startStation)||0)+1)}),ie.map(Ze=>({id:Ze.id,stationName:Ze.stationName,rides:Le.get(Ze.id)||0})).sort((Ze,ke)=>ke.rides-Ze.rides)},J=(ie,ge)=>{const Me=new Map,ze=Ui();let Le,Ie;switch(ge){case"daily":Le=ze.subtract(6,"day").startOf("day"),Ie=ze.endOf("day");break;case"weekly":Le=ze.subtract(11,"week").startOf("week"),Ie=ze.endOf("week");break;case"monthly":Le=ze.subtract(11,"month").startOf("month"),Ie=ze.endOf("month");break;default:const ke=ie.map(tt=>Ui(tt.rideEndedAt));Le=Ui.min(ke),Ie=ze}let Ze=Le;for(;Ze.isBefore(Ie);){let ke;switch(ge){case"daily":ke=Ze.format("MMM DD"),Ze=Ze.add(1,"day");break;case"weekly":ke=`Week ${Ze.week()} - ${Ze.format("MMM")}`,Ze=Ze.add(1,"week");break;case"monthly":ke=Ze.format("MMM YYYY"),Ze=Ze.add(1,"month");break}Me.set(ke,{period:ke,revenue:0,calories:0,distance:0,duration:0,carbonSaved:0,rides:0})}return ie.forEach(ke=>{const tt=Ui(ke.rideEndedAt);if(tt.isBetween(Le,Ie,null,"[]")){let Ue;switch(ge){case"daily":Ue=tt.format("MMM DD");break;case"weekly":Ue=`Week ${tt.week()} - ${tt.format("MMM")}`;break;case"monthly":Ue=tt.format("MMM YYYY");break}if(Me.has(Ue)){const He=Me.get(Ue);He.revenue+=Number(ke.amountPaid||0),He.calories+=Number(ke.caloriesBurned||0),He.distance+=Number(ke.distance||0),He.duration+=Number(ke.duration||0)/60,He.carbonSaved+=Number(ke.carbonSaved||0),He.rides+=1}}}),Array.from(Me.values()).map(ke=>({...ke,avgCalories:ke.rides>0?ke.calories/ke.rides:0,avgDistance:ke.rides>0?ke.distance/ke.rides:0,avgDuration:ke.rides>0?ke.duration/ke.rides:0,avgCarbonSaved:ke.rides>0?ke.carbonSaved/ke.rides:0}))},re=(ie,ge)=>{const Me=Ui();switch(ge){case"daily":return ie.filter(ze=>Ui(ze.rideEndedAt).isSame(Me,"day"));case"weekly":return ie.filter(ze=>Ui(ze.rideEndedAt).isAfter(Me.subtract(1,"week")));case"monthly":return ie.filter(ze=>Ui(ze.rideEndedAt).isAfter(Me.subtract(1,"month")));default:return ie}},ce=(ie,ge)=>{if(!ie||ie.length===0)return"No data available";const Me=re(P,w),ze=Me.reduce((Ze,ke)=>{switch(ge){case"revenue":return Ze+(ke.amountPaid||0);case"calories":return Ze+(ke.caloriesBurned||0);case"distance":return Ze+(ke.distance||0);case"duration":return Ze+(ke.duration||0)/60;case"carbonSaved":return Ze+(ke.carbonSaved||0);default:return Ze}},0),Le=Me.length,Ie=w==="daily"?"today":w==="weekly"?"this week":"this month";switch(ge){case"revenue":const Ze=Le>0?ze/Le:0;return`The EcoRide Parada system generated ${ze.toFixed(2)} in revenue ${Ie}. 
                With ${Le} rides completed, residents spent an average of ${Ze.toFixed(2)} per trip. 
                These funds support system maintenance and expansion, creating sustainable transportation
                infrastructure for Barangay Parada while providing an affordable alternative to motor vehicles.`;case"calories":const ke=ze*.26;return`Barangay Parada residents burned ${ze.toFixed(0)} calories through cycling ${Ie}, 
                equivalent to approximately ${Math.round(ze/100)} healthy meals worth of energy. 
                This active transportation promotes community health and wellness, generating estimated healthcare 
                cost savings of ${ke.toFixed(2)} through preventative exercise. Regular cyclists in Parada 
                report improved cardiovascular health and reduced stress levels, creating a healthier community.`;case"distance":const Ue=ze*.25;return`EcoRide users covered ${ze.toFixed(2)} km by bike ${Ie}. 
                Based on Metro Manila traffic research, each bike takes up only 0.25 car units 
                of road space, representing approximately ${Math.round(Ue)} car-equivalent 
                trips removed from local roads. This efficient use of road space helps reduce 
                traffic congestion in Barangay Parada's busiest areas.`;case"duration":const He=Math.floor(ze/60),Ce=Math.floor(ze%60),Se=Le*5,$e=ze*.3;return`Barangay Parada cyclists spent ${He} hours and ${Ce} minutes riding ${Ie}. 
                By choosing EcoRide over cars, residents collectively saved approximately ${Math.round(Se/60+$e)} hours 
                on parking and traffic delays. This represents significant quality-of-life improvement for
                community members while reducing road congestion by an estimated ${Math.round(Le*.8)} vehicles during 
                peak hours, improving mobility for all Parada residents.`;case"carbonSaved":const ht=(ze/21).toFixed(1),ft=(ze/.251).toFixed(1),ut=(ze*.05).toFixed(1);return`The EcoRide system prevented ${ze.toFixed(2)} kg of CO2 emissions in Barangay Parada ${Ie}, 
                equivalent to the yearly CO2 absorption of ${ht} trees. This translates to approximately 
                ${ft} km of car travel removed from local roads and an estimated ${ut}% 
                improvement in local air quality. Every ride contributes to Parada's sustainability goals, helping 
                transform the barangay into a model for eco-friendly transportation in Metro Manila.`;default:return"No analysis available"}},ye=(ie,ge)=>{const Me=new Map;return Ui(),ie.forEach(ze=>{const Le=Ui(ze.timestamp);let Ie;switch(ge){case"daily":Ie=Le.format("MMM DD");break;case"weekly":Ie=`Week ${Le.week()} - ${Le.format("MMM")}`;break;case"monthly":Ie=Le.format("MMM YYYY");break}if(!Me.has(Ie))Me.set(Ie,{period:Ie,averageRating:ze.rating,totalRatings:1});else{const Ze=Me.get(Ie);Ze.averageRating=(Ze.averageRating*Ze.totalRatings+ze.rating)/(Ze.totalRatings+1),Ze.totalRatings+=1}}),Array.from(Me.values())},he=async()=>{try{const ie=Zn(zr,"ride_history"),Me=(await Xi(ie)).docs.map(ft=>{var ut;return{id:ft.id,...ft.data(),rideEndedAt:(ut=ft.data().rideEndedAt)!=null&&ut.toDate?ft.data().rideEndedAt.toDate():new Date(ft.data().rideEndedAt.seconds*1e3)}});z(Me);const ze=Zn(zr,"stations"),Ie=(await Xi(ze)).docs.map(ft=>({id:ft.id,stationName:ft.data().stationName})),Ze=q(Ie,Me,w);n(Ze);const ke=J(Me,"monthly"),tt=J(Me,"weekly"),Ue=J(Me,"daily");l({monthly:ke,weekly:tt,daily:Ue});const He=new Map;Ie.forEach(ft=>{He.set(ft.id,{stationName:ft.stationName,revenue:0,rides:0})}),Me.forEach(ft=>{if(ft.startStation){const ut=He.get(ft.startStation);ut&&(ut.revenue+=Number(ft.amountPaid),ut.rides+=1)}});const Ce=Array.from(He.values()).sort((ft,ut)=>ut.revenue-ft.revenue);e(Ce);const Se=Zn(zr,"ride_ratings"),ht=(await Xi(Se)).docs.map(ft=>{var ut;return{id:ft.id,...ft.data(),timestamp:(ut=ft.data().timestamp)!=null&&ut.toDate?ft.data().timestamp.toDate():new Date(ft.data().timestamp.seconds*1e3)}});U(ht)}catch(ie){console.error("Error fetching analytics:",ie)}};nt.useEffect(()=>{he()},[w]);const _e=(ie,ge)=>ie[ge]||[];return K.jsxs(M0,{children:[K.jsx(Yg,{})," ",K.jsxs("div",{className:"analytics-container",children:[K.jsxs("div",{className:"analytics-header",children:[K.jsx("h1",{children:"System Analytics"}),K.jsx("div",{className:"time-filter",children:Z.map(ie=>K.jsx("button",{className:`filter-btn ${w===ie.value?"active":""}`,onClick:()=>T(ie.value),children:ie.label},ie.value))})]}),K.jsxs("div",{className:"charts-grid",children:[K.jsxs("div",{className:"chart-section full-width",children:[K.jsx("h2",{children:"Revenue Trend"}),K.jsxs("div",{className:"chart-with-analysis",children:[K.jsx(Pp,{width:"100%",height:500,children:K.jsxs(Vw,{data:_e(s,w),margin:{top:20,right:30,left:20,bottom:90},children:[K.jsx("defs",{children:K.jsxs("linearGradient",{id:"revenueGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[K.jsx("stop",{offset:"5%",stopColor:"#009C8C",stopOpacity:.8}),K.jsx("stop",{offset:"95%",stopColor:"#009C8C",stopOpacity:.1})]})}),K.jsx(Vp,{strokeDasharray:"3 3"}),K.jsx(ud,{dataKey:"period",angle:-45,textAnchor:"end",height:80,interval:0}),K.jsx(cd,{tickFormatter:ie=>`${ie.toFixed(0)}`,label:{value:"Revenue ()",angle:-90,position:"insideLeft",offset:10,dy:50}}),K.jsx(cu,{formatter:ie=>[`${ie.toFixed(2)}`,"Revenue"]}),K.jsx(nf,{verticalAlign:"bottom",height:36,wrapperStyle:{paddingTop:"20px",marginBottom:"10px"}}),K.jsx(of,{type:"monotone",dataKey:"revenue",stroke:"#009C8C",fill:"url(#revenueGradient)",name:"Revenue",dot:{r:4}})]})}),K.jsx(_g,{title:"Revenue Analysis",analysis:ce(_e(s,w),"revenue")})]})]}),K.jsxs("div",{className:"chart-section full-width",children:[K.jsx("h2",{children:"Revenue by Station"}),K.jsxs("div",{className:"chart-with-analysis",children:[K.jsx(Pp,{width:"100%",height:500,children:K.jsxs(JM,{data:t.filter(ie=>ie.revenue>0),margin:{top:20,right:30,left:20,bottom:120},children:[K.jsx(Vp,{strokeDasharray:"3 3"}),K.jsx(ud,{dataKey:"stationName",angle:-45,textAnchor:"end",height:100,interval:0,tick:{fontSize:12}}),K.jsx(cd,{tickFormatter:ie=>`${ie.toFixed(2)}`}),K.jsx(cu,{formatter:ie=>`${ie.toFixed(2)}`}),K.jsx(kp,{dataKey:"revenue",children:t.filter(ie=>ie.revenue>0).map((ie,ge)=>K.jsx(Av,{fill:H[ge%H.length]},`cell-${ge}`))})]})}),K.jsx(_g,{title:"Station Revenue Analysis",analysis:`The top earning station is ${((me=t[0])==null?void 0:me.stationName)||"N/A"} with ${(Re=t[0])==null?void 0:Re.revenue.toFixed(2)} in revenue. There are ${t.filter(ie=>ie.revenue>0).length} stations generating revenue, with a total system revenue of ${t.reduce((ie,ge)=>ie+ge.revenue,0).toFixed(2)}.`})]})]}),K.jsxs("div",{className:"chart-section full-width",children:[K.jsx("h2",{children:"Average Calories Burned"}),K.jsxs("div",{className:"chart-with-analysis",children:[K.jsx(Pp,{width:"100%",height:500,children:K.jsxs(Vw,{data:_e(s,w),margin:{top:20,right:30,left:20,bottom:70},children:[K.jsx("defs",{children:K.jsxs("linearGradient",{id:"caloriesGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[K.jsx("stop",{offset:"5%",stopColor:"#FF5722",stopOpacity:.8}),K.jsx("stop",{offset:"95%",stopColor:"#FF5722",stopOpacity:.1})]})}),K.jsx(Vp,{strokeDasharray:"3 3"}),K.jsx(ud,{dataKey:"period"}),K.jsx(cd,{}),K.jsx(cu,{}),K.jsx(nf,{}),K.jsx(of,{type:"monotone",dataKey:"calories",stroke:"#FF5722",fill:"url(#caloriesGradient)",name:"Calories Burned",dot:{fill:"#FF5722"}})]})}),K.jsx(_g,{title:"Health Impact Analysis",analysis:ce(_e(s,w),"calories")})]})]}),K.jsxs("div",{className:"chart-section full-width",children:[K.jsx("h2",{children:"Average Distance Covered"}),K.jsxs("div",{className:"chart-with-analysis",children:[K.jsx(Pp,{width:"100%",height:500,children:K.jsxs(Vw,{data:_e(s,w),margin:{top:20,right:30,left:20,bottom:70},children:[K.jsx("defs",{children:K.jsxs("linearGradient",{id:"distanceGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[K.jsx("stop",{offset:"5%",stopColor:"#2196F3",stopOpacity:.8}),K.jsx("stop",{offset:"95%",stopColor:"#2196F3",stopOpacity:.1})]})}),K.jsx(Vp,{strokeDasharray:"3 3"}),K.jsx(ud,{dataKey:"period"}),K.jsx(cd,{}),K.jsx(cu,{}),K.jsx(nf,{}),K.jsx(of,{type:"monotone",dataKey:"distance",stroke:"#2196F3",fill:"url(#distanceGradient)",name:"Distance (km)",dot:{fill:"#2196F3"}})]})}),K.jsx(_g,{title:"Distance Analysis",analysis:ce(_e(s,w),"distance")})]})]}),K.jsxs("div",{className:"chart-section full-width",children:[K.jsx("h2",{children:"Average Ride Duration"}),K.jsxs("div",{className:"chart-with-analysis",children:[K.jsx(Pp,{width:"100%",height:500,children:K.jsxs(Vw,{data:_e(s,w),margin:{top:20,right:30,left:20,bottom:70},children:[K.jsx("defs",{children:K.jsxs("linearGradient",{id:"durationGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[K.jsx("stop",{offset:"5%",stopColor:"#9C27B0",stopOpacity:.8}),K.jsx("stop",{offset:"95%",stopColor:"#9C27B0",stopOpacity:.1})]})}),K.jsx(Vp,{strokeDasharray:"3 3"}),K.jsx(ud,{dataKey:"period"}),K.jsx(cd,{}),K.jsx(cu,{formatter:(ie,ge)=>[`${ie.toFixed(0)} minutes`,"Duration"]}),K.jsx(nf,{}),K.jsx(of,{type:"monotone",dataKey:"duration",stroke:"#9C27B0",fill:"url(#durationGradient)",name:"Duration (minutes)",dot:{fill:"#9C27B0"}})]})}),K.jsx(_g,{title:"Duration Analysis",analysis:ce(_e(s,w),"duration")})]})]}),K.jsxs("div",{className:"chart-section full-width",children:[K.jsx("h2",{children:"Average CO2 Saved"}),K.jsxs("div",{className:"chart-with-analysis",children:[K.jsx(Pp,{width:"100%",height:500,children:K.jsxs(Vw,{data:_e(s,w),margin:{top:20,right:30,left:20,bottom:70},children:[K.jsx("defs",{children:K.jsxs("linearGradient",{id:"co2Gradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[K.jsx("stop",{offset:"5%",stopColor:"#4CAF50",stopOpacity:.8}),K.jsx("stop",{offset:"95%",stopColor:"#4CAF50",stopOpacity:.1})]})}),K.jsx(Vp,{strokeDasharray:"3 3"}),K.jsx(ud,{dataKey:"period"}),K.jsx(cd,{}),K.jsx(cu,{}),K.jsx(nf,{}),K.jsx(of,{type:"monotone",dataKey:"carbonSaved",stroke:"#4CAF50",fill:"url(#co2Gradient)",name:"CO2 Saved (kg)",dot:{fill:"#4CAF50"}})]})}),K.jsx(_g,{title:"Environmental Impact Analysis",analysis:ce(_e(s,w),"carbonSaved")})]})]}),K.jsxs("div",{className:"chart-section full-width",children:[K.jsx("h2",{children:"User Ride Ratings"}),K.jsxs("div",{className:"chart-with-analysis",children:[K.jsx(Pp,{width:"100%",height:500,children:K.jsxs(zxe,{data:ye(k,w),margin:{top:20,right:30,left:20,bottom:70},children:[K.jsx(Vp,{strokeDasharray:"3 3"}),K.jsx(ud,{dataKey:"period",angle:-45,textAnchor:"end",height:80,interval:0}),K.jsx(cd,{domain:[0,5],ticks:[0,1,2,3,4,5],label:{value:"Average Rating",angle:-90,position:"insideLeft",offset:10}}),K.jsx(cu,{formatter:(ie,ge)=>[ge==="averageRating"?`${ie.toFixed(2)} stars`:ie,ge==="averageRating"?"Average Rating":"Total Ratings"]}),K.jsx(nf,{}),K.jsx(kp,{dataKey:"totalRatings",fill:"#82ca9d",name:"Total Ratings",opacity:.3}),K.jsx(D0,{type:"monotone",dataKey:"averageRating",stroke:"#ff7300",name:"Average Rating",strokeWidth:2,dot:{fill:"#ff7300"}})]})}),K.jsx(_g,{title:"User Satisfaction Analysis",analysis:(()=>{const ie=ye(k,w);if(ie.length===0)return"No ratings data available for this period.";const ge=ie.reduce((Le,Ie)=>Le+Ie.totalRatings,0),Me=ie.reduce((Le,Ie)=>Le+Ie.averageRating*Ie.totalRatings,0)/ge;return`Users submitted ${ge} ride ratings ${w==="daily"?"today":w==="weekly"?"this week":"this month"}, with an average satisfaction score of ${Me.toFixed(2)} out of 5 stars. ${Me>=4.5?"Users are highly satisfied with the service.":Me>=4?"Users are generally satisfied with the service.":Me>=3.5?"Users find the service acceptable but there's room for improvement.":"User satisfaction needs attention and improvement measures should be considered."}`})()})]})]}),K.jsxs("div",{className:"chart-section full-width",children:[K.jsxs("h2",{children:["Most Popular Stations (",w,")"]}),K.jsxs("div",{className:"chart-with-analysis",children:[K.jsx(Pp,{width:"100%",height:600,children:K.jsxs(Vxe,{children:[K.jsx(Iy,{data:q(h,P,w).filter(ie=>ie.rides>0).slice(0,5),dataKey:"rides",nameKey:"stationName",cx:"50%",cy:"50%",outerRadius:180,label:({name:ie,percent:ge})=>`${ie} ${(ge*100).toFixed(0)}%`,children:q(h,P,w).filter(ie=>ie.rides>0).slice(0,5).map((ie,ge)=>K.jsx(Av,{fill:H[ge%H.length]},`cell-${ge}`))}),K.jsx(cu,{formatter:(ie,ge)=>[`${ie} rides`,ge]}),K.jsx(nf,{verticalAlign:"bottom",height:36})]})}),K.jsx(_g,{title:`Station Usage Analysis (${w})`,analysis:`For this ${w} period, the top stations account for ${q(h,P,w).filter(ie=>ie.rides>0).slice(0,5).reduce((ie,ge)=>ie+ge.rides,0)} rides out of ${P.length} total system rides. ${((be=q(h,P,w)[0])==null?void 0:be.stationName)||"N/A"} is currently the most active station with ${((De=q(h,P,w)[0])==null?void 0:De.rides)||0} rides in this period.`})]})]})]})]})]})},pVe=()=>{const[t,e]=nt.useState([]),[a,r]=nt.useState({}),[s,l]=nt.useState({}),[h,n]=nt.useState({}),[w,T]=nt.useState(!0),[P,z]=nt.useState("all"),[k,U]=nt.useState({key:"rideEndedAt",direction:"desc"}),[Z,H]=nt.useState(1),q=10,[J,re]=nt.useState({totalRides:0,totalRevenue:0,totalDistance:0,totalDuration:0,totalCalories:0,totalCarbonSaved:0});nt.useEffect(()=>{ce()},[]);const ce=async()=>{try{const be=Zn(zr,"bikes"),De=await Xi(be),ie={};De.docs.forEach(He=>{ie[He.id]=He.data()}),r(ie);const ge=Zn(zr,"approved_users"),Me=await Xi(ge),ze={};Me.docs.forEach(He=>{const Ce=He.data();ze[He.id]=`${Ce.first_name} ${Ce.surname}`}),l(ze);const Le=Zn(zr,"stations"),Ie=await Xi(Le),Ze={};Ie.docs.forEach(He=>{Ze[He.id]=He.data().stationName}),n(Ze);const ke=Zn(zr,"ride_history"),Ue=(await Xi(ke)).docs.map(He=>{var Ce;return{id:He.id,...He.data(),rideEndedAt:((Ce=He.data().rideEndedAt)==null?void 0:Ce.toDate())||new Date(He.data().rideEndedAt.seconds*1e3)}});e(Ue),T(!1)}catch(be){console.error("Error fetching data:",be),T(!1)}},ye=be=>{const De=Ui();switch(P){case"today":return be.filter(ie=>Ui(ie.rideEndedAt).isSame(De,"day"));case"week":return be.filter(ie=>Ui(ie.rideEndedAt).isAfter(De.subtract(1,"week")));case"month":return be.filter(ie=>Ui(ie.rideEndedAt).isAfter(De.subtract(1,"month")));default:return be}};nt.useEffect(()=>{const De=ye(t).reduce((ie,ge)=>({totalRides:ie.totalRides+1,totalRevenue:ie.totalRevenue+(ge.amountPaid||0),totalDistance:ie.totalDistance+(ge.distance||0),totalDuration:ie.totalDuration+(ge.duration||0),totalCalories:ie.totalCalories+(ge.caloriesBurned||0),totalCarbonSaved:ie.totalCarbonSaved+(ge.carbonSaved||0)}),{totalRides:0,totalRevenue:0,totalDistance:0,totalDuration:0,totalCalories:0,totalCarbonSaved:0});re(De)},[t,P]);const he=be=>{U({key:be,direction:k.key===be&&k.direction==="asc"?"desc":"asc"})},_e=Vt.useMemo(()=>[...ye(t)].sort((De,ie)=>k.key==="rideEndedAt"?k.direction==="asc"?De[k.key]-ie[k.key]:ie[k.key]-De[k.key]:k.direction==="asc"?De[k.key]>ie[k.key]?1:-1:De[k.key]<ie[k.key]?1:-1),[t,P,k]),me=_e.slice((Z-1)*q,Z*q),Re=Math.ceil(_e.length/q);return K.jsxs(M0,{children:[K.jsx(Yg,{})," ",K.jsxs("div",{className:"ride-details-container",children:[K.jsx("h1",{children:"Ride Details"}),K.jsx("div",{className:"controls",children:K.jsxs("div",{className:"time-filter",children:[K.jsx("button",{className:`filter-btn ${P==="all"?"active":""}`,onClick:()=>z("all"),children:"All Time"}),K.jsx("button",{className:`filter-btn ${P==="today"?"active":""}`,onClick:()=>z("today"),children:"Today"}),K.jsx("button",{className:`filter-btn ${P==="week"?"active":""}`,onClick:()=>z("week"),children:"This Week"}),K.jsx("button",{className:`filter-btn ${P==="month"?"active":""}`,onClick:()=>z("month"),children:"This Month"})]})}),K.jsxs("div",{className:"stats-grid",children:[K.jsxs("div",{className:"stat-card",children:[K.jsx("h3",{children:"Total Rides"}),K.jsx("p",{children:J.totalRides})]}),K.jsxs("div",{className:"stat-card",children:[K.jsx("h3",{children:"Total Revenue"}),K.jsxs("p",{children:["",J.totalRevenue.toFixed(2)]})]}),K.jsxs("div",{className:"stat-card",children:[K.jsx("h3",{children:"Total Distance"}),K.jsxs("p",{children:[J.totalDistance.toFixed(2)," km"]})]}),K.jsxs("div",{className:"stat-card",children:[K.jsx("h3",{children:"Total Duration"}),K.jsxs("p",{children:[Math.round(J.totalDuration/60)," min"]})]}),K.jsxs("div",{className:"stat-card",children:[K.jsx("h3",{children:"Calories Burned"}),K.jsxs("p",{children:[Math.round(J.totalCalories)," cal"]})]}),K.jsxs("div",{className:"stat-card",children:[K.jsx("h3",{children:"CO2 Saved"}),K.jsxs("p",{children:[J.totalCarbonSaved.toFixed(2)," kg"]})]})]}),w?K.jsx("div",{className:"loading",children:"Loading..."}):K.jsxs(K.Fragment,{children:[K.jsx("div",{className:"table-container",children:K.jsxs("table",{children:[K.jsx("thead",{children:K.jsxs("tr",{children:[K.jsxs("th",{onClick:()=>he("rideEndedAt"),children:["Date"," ",k.key==="rideEndedAt"&&(k.direction==="asc"?"":"")]}),K.jsxs("th",{onClick:()=>he("userId"),children:["User"," ",k.key==="userId"&&(k.direction==="asc"?"":"")]}),K.jsxs("th",{onClick:()=>he("bikeId"),children:["Bike"," ",k.key==="bikeId"&&(k.direction==="asc"?"":"")]}),K.jsxs("th",{onClick:()=>he("duration"),children:["Duration"," ",k.key==="duration"&&(k.direction==="asc"?"":"")]}),K.jsxs("th",{onClick:()=>he("distance"),children:["Distance"," ",k.key==="distance"&&(k.direction==="asc"?"":"")]}),K.jsxs("th",{onClick:()=>he("caloriesBurned"),children:["Calories"," ",k.key==="caloriesBurned"&&(k.direction==="asc"?"":"")]}),K.jsxs("th",{onClick:()=>he("carbonSaved"),children:["CO2 Saved"," ",k.key==="carbonSaved"&&(k.direction==="asc"?"":"")]}),K.jsxs("th",{onClick:()=>he("amountPaid"),children:["Amount"," ",k.key==="amountPaid"&&(k.direction==="asc"?"":"")]}),K.jsx("th",{children:"Start Station"}),K.jsx("th",{children:"End Station"})]})}),K.jsx("tbody",{children:me.map(be=>{var De,ie,ge,Me;return K.jsxs("tr",{children:[K.jsx("td",{children:Ui(be.rideEndedAt).format("MMM D, YYYY HH:mm")}),K.jsx("td",{children:s[be.userId]||"Unknown User"}),K.jsx("td",{children:((De=a[be.bikeId])==null?void 0:De.bikeName)||"Unknown Bike"}),K.jsxs("td",{children:[Math.round(be.duration/60)," min"]}),K.jsxs("td",{children:[((ie=be.distance)==null?void 0:ie.toFixed(2))||0," km"]}),K.jsxs("td",{children:[Math.round(be.caloriesBurned)||0," cal"]}),K.jsxs("td",{children:[((ge=be.carbonSaved)==null?void 0:ge.toFixed(2))||0," kg"]}),K.jsxs("td",{children:["",((Me=be.amountPaid)==null?void 0:Me.toFixed(2))||0]}),K.jsx("td",{children:h[be.startStation]||"Unknown Station"}),K.jsx("td",{children:h[be.endStation]||"Unknown Station"})]},be.id)})})]})}),K.jsxs("div",{className:"pagination-controls",children:[K.jsx("button",{className:"pagination-button",onClick:()=>H(be=>Math.max(1,be-1)),disabled:Z===1,children:"Previous"}),K.jsxs("span",{className:"pagination-info",children:["Page ",Z," of ",Re]}),K.jsx("button",{className:"pagination-button",onClick:()=>H(be=>Math.min(Re,be+1)),disabled:Z===Re,children:"Next"})]})]})]})]})};class mVe extends Vt.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,a){console.error("Error caught by boundary:",e,a)}render(){return this.state.hasError?K.jsxs("div",{className:"error-container",children:[K.jsx("h2",{children:"Something went wrong."}),K.jsx("p",{children:"Please refresh the page or try again later."})]}):this.props.children}}const yVe=()=>{const[t,e]=nt.useState(null);return nt.useEffect(()=>{e1.onAuthStateChanged(a=>{e(a)})},[]),K.jsx(mVe,{children:K.jsx(cre,{children:K.jsxs(Bae,{children:[K.jsx(xp,{path:"/login",element:t?K.jsx(i5,{}):K.jsx(gm,{})}),K.jsx(xp,{path:"/dashboard",element:t?K.jsx(i5,{}):K.jsx(gm,{})}),K.jsx(xp,{path:"/user-management",element:t?K.jsx(jxe,{}):K.jsx(gm,{})}),K.jsx(xp,{path:"/bike-management",element:t?K.jsx(REe,{}):K.jsx(gm,{})}),K.jsx(xp,{path:"/stations",element:t?K.jsx(tVe,{}):K.jsx(gm,{})}),K.jsx(xp,{path:"/admin-management",element:t?K.jsx(aVe,{}):K.jsx(gm,{})}),K.jsx(xp,{path:"/rate-management",element:t?K.jsx(rVe,{}):K.jsx(gm,{})}),K.jsx(xp,{path:"/system-analytics",element:t?K.jsx(fVe,{}):K.jsx(gm,{})}),K.jsx(xp,{path:"/ride-details",element:t?K.jsx(pVe,{}):K.jsx(gm,{})}),K.jsx(xp,{path:"/",element:t?K.jsx(i5,{}):K.jsx(gm,{})})]})})})};Xte.createRoot(document.getElementById("root")).render(K.jsx(nt.StrictMode,{children:K.jsx(yVe,{})}));export{Ls as _,nC as c,Ji as g};
